2025-10-06 14:14:02,892 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmpr12amk89/django
2025-10-06 14:14:02,892 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 14:14:02,892 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.django_1776_django-13089:v1
2025-10-06 14:14:28,383 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_9880c79d53
2025-10-06 14:14:28,388 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_9880c79d53
2025-10-06 14:14:29,424 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 14:14:29,566 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 14:14:29,566 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 14:14:29,689 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:29,690 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:14:29,690 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 14:14:29,814 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:29,814 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:14:29,814 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen && locale-gen
2025-10-06 14:14:31,218 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:31,218 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
sed -i '/en_US.UTF-8/s/^# //g' /
/etc/locale.gen && locale-gen

Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.

2025-10-06 14:14:31,218 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANG=en_US.UTF-8
2025-10-06 14:14:31,318 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:31,318 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:14:31,319 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANGUAGE=en_US:en
2025-10-06 14:14:31,419 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:31,419 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:14:31,419 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LC_ALL=en_US.UTF-8
2025-10-06 14:14:31,520 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:31,520 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:14:31,520 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 14:14:32,731 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:14:32,731 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
Requirement already satisfied: asgiref>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (3.4.1)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (2024.2)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (0.4.4)
Requirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2->Django==3.2) (4.1.1)
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 3.2
    Uninstalling Django-3.2:
      Successfully uninstalled Django-3.2
  Running setup.py develop for Django
Successfully installed Django-3.2
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m

2025-10-06 14:14:32,789 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
cache.backends.db._cull sometimes fails with 'NoneType' object is not subscriptable

Issue description: 
Description
	 
		(last modified by Guillermo BonvehÃ­)
	 
I'm sporadically getting some cache errors using database backend.
The error is: 'NoneType' object is not subscriptable
And the backtrace:
/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response
/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render
/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback
/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response
/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull
This is using Django 2.2.11 but I see the same code is in master.
â€‹https://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270
				cursor.execute(
					connection.ops.cache_key_culling_sql() % table,
					[cull_num])
				cursor.execute("DELETE FROM %s "
							 "WHERE cache_key < %%s" % table,
							 [cursor.fetchone()[0]])
From what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.
I guess a simple check to see if it contains data would be enough, may apply for an easy picking.
Edit: Wording

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 14:14:32,790 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 14:14:32,790 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\ncache.backends.db._cull sometimes fails with \'NoneType\' object is not subscriptable\n\nIssue description: \nDescription\n\t \n\t\t(last modified by Guillermo BonvehÃ­)\n\t \nI\'m sporadically getting some cache errors using database backend.\nThe error is: \'NoneType\' object is not subscriptable\nAnd the backtrace:\n/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response\n/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render\n/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback\n/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response\n/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull\nThis is using Django 2.2.11 but I see the same code is in master.\n\u200bhttps://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270\n\t\t\t\tcursor.execute(\n\t\t\t\t\tconnection.ops.cache_key_culling_sql() % table,\n\t\t\t\t\t[cull_num])\n\t\t\t\tcursor.execute("DELETE FROM %s "\n\t\t\t\t\t\t\t "WHERE cache_key < %%s" % table,\n\t\t\t\t\t\t\t [cursor.fetchone()[0]])\nFrom what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.\nI guess a simple check to see if it contains data would be enough, may apply for an easy picking.\nEdit: Wording\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 14:14:40,273 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified a bug in the database cache backend that causes a `TypeError` in the `_cull` method due to `cursor.fetchone()` returning `None`. To address this, I will find 5 relevant test cases that test similar functionality. My search will focus on tests for the database cache backend, especially those that cover cache expiration, culling logic, and database interactions. I will start by examining `tests/cache/tests.py` to find suitable examples.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'arguments': '{"type": "function_definition", "relative_path": "tests/cache/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56866, 'candidates_token_count': 130, 'total_token_count': 57354, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56866}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 358, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4530528141902043, 'model_name': 'gemini-2.5-pro'} id='run--a04d2f7e-480f-4a83-8d4d-3162e6e48d67-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'function_definition', 'relative_path': 'tests/cache/tests.py'}, 'id': 'cd1a50b4-5445-4f20-8b65-525f428b6368', 'type': 'tool_call'}] usage_metadata={'input_tokens': 56866, 'output_tokens': 130, 'total_tokens': 57354, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 358}}
2025-10-06 14:15:38,770 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/cache/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'52a1a00c-181a-4384-b18a-d50da264a383': 'CpAEAR/MhbabqPM9V75v6aOy57FJxP4Bwg6k1UZts9TUa7dUIZAthDJstOSkfg7qTV1YlIdVRJyUYo2ARZXsI/UKcTbBoO+j4GbcBOIeCN3qb35kcmNou6CIYeS6wJPHsgbU8qgeIN6vxtjS3GBuzfvmSXuVkEGJNCFl6u/AiHLOMBImQNTpI0KeG1KCX7yU4x6OF+hryQ8Hb3D+iW14r8VMicTajHnyKVv+teY9JljDno45miKuTOKFl093MPd0SRrDMHhBrnkoMiisAZkYks1LJ3H4LEoAIOr/vgqZmMhZfyKP1Pz7ONt6eTrQzquEoqpe8VIcvbVcIBA5yBhY3xCrV4Ik/JKFEHXo1uzDxhk7kiEXggATuoplsyPXtXj4NhHHv98WqWcpolmy5cB1EG+joUOIOlHVOT1oP5Gzcl2kAslhPBsJ6bDuPc8miQJWz2fdGuSztKIFRojdGHs777qt0ONNlF3eNqXH0FtrhKyAMe7JlFRzi/zgpFjnOh6gJ1eA+ZBcQtqTS1LcqbL6ZpT9bc7zSrrQseY40Fgw+tr017C12PD0AWFuanuN0b9NopWq0con+sRq01xK/O3ynRRuRFPM9Uz+WCTTqDWLM+hTeIUI36//JAMjsYtajXwy1oguTAJWY0zEi9Wgy7kM2b1T9rp7SsGhFq6UV5zDtfgh1wlDRsd4UqeTrm/0G4zuCFQg'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 3934, 'end_index': 4155, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}, {'start_index': 11796, 'end_index': 12017, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}, {'start_index': 14818, 'end_index': 15039, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}, {'start_index': 17011, 'end_index': 17232, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}, {'start_index': 19095, 'end_index': 19316, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}, {'start_index': 22337, 'end_index': 22558, 'uri': 'https://github.com/stefanofusai/drf-caching', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 57587, 'candidates_token_count': 21, 'total_token_count': 60661, 'cached_content_token_count': 56147, 'prompt_tokens_details': [{'modality': 1, 'token_count': 57587}], 'cache_tokens_details': [{'modality': 1, 'token_count': 56147}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 3053}, 'finish_reason': 'STOP', 'avg_logprobs': -13.892678397042411, 'model_name': 'gemini-2.5-pro'} id='run--ba9d33e4-febe-4658-92cb-452e121b8f41-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/cache/tests.py'}, 'id': '52a1a00c-181a-4384-b18a-d50da264a383', 'type': 'tool_call'}] usage_metadata={'input_tokens': 57587, 'output_tokens': 21, 'total_tokens': 60661, 'input_token_details': {'cache_read': 56147}, 'output_token_details': {'reasoning': 3053}}
2025-10-06 14:15:42,280 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/cache/tests.py", "end_line": 1001.0}'}, '__gemini_function_call_thought_signatures__': {'5035bfc1-0a37-404f-9997-adb299cc3112': 'CpYCAR/MhbbR2kDPUqg+h0vdsG501AY1o53CCQxrp3sWJ9EHHdFIo5OonZTnCLWmes0tWFgXZJ3NYxjKDPpiaedhcjxk+bjjgxOYlZwznN4HzziQco+lHjdERD54bL1cqf08rFTWlzibTzgjIOyG8Z2BBrppIzesdO3hZfKE0/QpUv4MVpBripOffVeukWxdvK36y1vMWzgAQeO+L6QLk4jpdUNX8731xnqBAFYN34KbSgw3qHiM0sBHrjl7n8JIFE8r0N4eNDMuqK9qD/NG1+kIy6Mru9mZpKHbpWx/cAwFrUzB8hbQxVVho4P+bXtal/re9JqhhQaiWakTBBmwZa8UXJLZaPzZE3xl7cNqqu53gG74l2PLAz8='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 65721, 'candidates_token_count': 27, 'total_token_count': 65813, 'prompt_tokens_details': [{'modality': 1, 'token_count': 65852}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 65, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.38605721791585285, 'model_name': 'gemini-2.5-pro'} id='run--4128e178-7f5b-4d98-9c0a-e1996adae138-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/cache/tests.py', 'end_line': 1001.0}, 'id': '5035bfc1-0a37-404f-9997-adb299cc3112', 'type': 'tool_call'}] usage_metadata={'input_tokens': 65721, 'output_tokens': 27, 'total_tokens': 65813, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 65}}
2025-10-06 14:15:45,099 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "relative_path": "tests/cache/tests.py", "end_line": 1501.0}'}, '__gemini_function_call_thought_signatures__': {'340a974e-1504-4165-b1b8-e97253e31d88': 'CrMCAR/MhbYBgFNBPsObvqsBK5vj1rT3vjSzaAAiXaIghIuWOuxS9tCZEuPVuJewD4jjBiIynOFTdvHdVJz3/gk/4pgqAQ1NvfP+3YuqDbwH5GrRo9lv7CFN9U0K4xmkl+fckHNZO5it6DxpIgxuLHhZhR9Z6PO64vfGev7hl9MkfUqRIPHwMTv/7OBx3nK4XD+AQVyZh1YDCzNrkvbMXlw5cm+oPMFizK4MoLnGDZiOcLikH8z/fwQdYTCpc03UIhaq+yeTq2+GCIKZkkWIiffi4v3dgvWTUl70sEomFulmqH9rvYMVMeKNoqdNJpiUqNfWo2q8TZJuLaoWhScAjlP1W0KUPH5lCwZD1aMgw4ztSI/EVJDBM+UWnK8AYIhN3MvdaDUju9NvtxEdCsMg9JyoA/RpoA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 76215, 'candidates_token_count': 27, 'total_token_count': 76325, 'cached_content_token_count': 63705, 'prompt_tokens_details': [{'modality': 1, 'token_count': 76409}], 'cache_tokens_details': [{'modality': 1, 'token_count': 63705}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 83}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6286907196044922, 'model_name': 'gemini-2.5-pro'} id='run--e4e17bce-e1c4-47ef-ba39-7dbf6c758e3c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'relative_path': 'tests/cache/tests.py', 'end_line': 1501.0}, 'id': '340a974e-1504-4165-b1b8-e97253e31d88', 'type': 'tool_call'}] usage_metadata={'input_tokens': 76215, 'output_tokens': 27, 'total_tokens': 76325, 'input_token_details': {'cache_read': 63705}, 'output_token_details': {'reasoning': 83}}
2025-10-06 14:15:49,208 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1501.0, "relative_path": "tests/cache/tests.py", "end_line": 2020.0}'}, '__gemini_function_call_thought_signatures__': {'a33688c0-1e31-4ef4-b3af-94503ac17997': 'CvUGAR/MhbY2BcMpUwZQaJjroAw8IxGivjMnlnDg/fHltsap64rhrH+NBrgci65wC1Q9a7t6Yu3TiZHClS8C0UoMDgq97RFjRo/9AvCiXNUpaLo1hKscIQfg9ZDuTXYlhItCEwNUpJ/EueJb91gjHY8oEnOck4MSRu67S4bxLgIhK0Be4lb7q+OFl1LBfk0aezdxVY07NnoVfsH9o6vP6VLgbRgdLzwPISdPXJtZmj2yx72uTCe0fy0jtssO5V1tI2pFb/mafjuRfHB9U5r7ZTNxi3vmrlrF7VTxxXrBn3+Td4yw4s5XcmDw6egDRd8SrDNWGv9OzQAzKtBXn4mSgyaOvOBb3IcRK9ycBMb533SKWlkYoSm73zsXaFI5wKgXGlxXrRbwcyqi/1yWYRfHRZzDUGFGKCZPzHMx5ldHXj5U1QpVIKB7KMg2jTSX8hzukdC/vOMxt3spVChvMLXATImaeGBiBbHOSawJjn3wF5pMr0z8SQhOuhNPqMICcum8uQ7ZM/hL9XI+0Lp4V6FOV506yUCP4cTbQUEALmCInlMctzGPyCDrimJeKuZ0Ua5ZBWwOhfBBirUkNz5nhiV/aEBjpkS+h6O4pt6Gme5nlh/gbAlFRYVZXZnIfPN2/4JDTAQ0oDHgkS+0apkYFLGPkjIUtxug/zkObF8/FI4NLqUomeQWhSNS1BTDAuQXEOwZb4SuGzI9r1hJiBqRKar9AvsUvwKQhYHZd7n8FfQqiMwJdbNTdO2abMpFe+ubdQqzDb4zrU+N4cmNIzXT94+umkcODYNh2dG0E5p1Jq1KllRXvi3KIL21GjseypWhdCGRje5n2Kj+ZoBwgzp8SptFOq+kQj271ggvWHm3CYMkLEkGQ15Lp3HiP/VXeTTehLDwghIUmhBQ4KsUUX87CDOgMuzetGuQ0U7KTGuoKpEaaGxDFiGDLXm9RFH9mmp/YKhN5dI9A1PQts292+c1wyJQaZ92UAVSHtrbTus1Oi64njcJVbXJ+jUN67IlUMbCBRN+PCPmILp8geVBlJMESNgY1waYPUE7bc60d7QnCFR3ctqFIko7qZ/MopRy0evbncisVVw9ih10iAuOOfMJ2LvZ4KWKxyCKmle7cwL8JkTNxmCC5ZmeWDXaay4fUImkRgre6lrw58RHjbuh1yvqC9nyBEqX9kUQppyS'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 84791, 'candidates_token_count': 27, 'total_token_count': 85035, 'cached_content_token_count': 75582, 'prompt_tokens_details': [{'modality': 1, 'token_count': 85066}], 'cache_tokens_details': [{'modality': 1, 'token_count': 75582}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 217}, 'finish_reason': 'STOP', 'avg_logprobs': -0.788306059660735, 'model_name': 'gemini-2.5-pro'} id='run--686e08ee-679b-4004-9db8-3334c11d9411-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1501.0, 'relative_path': 'tests/cache/tests.py', 'end_line': 2020.0}, 'id': 'a33688c0-1e31-4ef4-b3af-94503ac17997', 'type': 'tool_call'}] usage_metadata={'input_tokens': 84791, 'output_tokens': 27, 'total_tokens': 85035, 'input_token_details': {'cache_read': 75582}, 'output_token_details': {'reasoning': 217}}
2025-10-06 14:22:07,812 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='Here are 5 relevant existing test cases that demonstrate similar functionality to the reported bug.\n\n#### Test Case 1\nThis test case directly tests the culling functionality of the database cache backend, which is the area where the bug occurs. It sets up a cache with a `MAX_ENTRIES` limit and then adds more entries than the limit to trigger the culling mechanism. Finally, it asserts that the number of entries in the cache is within the expected range after culling.\n\n```python\n# File: tests/cache/tests.py\nimport copy\nimport io\nimport os\nimport pickle\nimport re\nimport shutil\nimport tempfile\nimport threading\nimport time\nimport unittest\nfrom pathlib import Path\nfrom unittest import mock\n\nfrom django.conf import settings\nfrom django.core import management, signals\nfrom django.core.cache import (\n    DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n)\nfrom django.core.cache.backends.base import InvalidCacheBackendError\nfrom django.core.cache.utils import make_template_fragment_key\nfrom django.db import close_old_connections, connection, connections\nfrom django.http import (\n    HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n)\nfrom django.middleware.cache import (\n    CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n)\nfrom django.middleware.csrf import CsrfViewMiddleware\nfrom django.template import engines\nfrom django.template.context_processors import csrf\nfrom django.template.response import TemplateResponse\nfrom django.test import (\n    RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n    override_settings,\n)\nfrom django.test.signals import setting_changed\nfrom django.utils import timezone, translation\nfrom django.utils.cache import (\n    get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n)\nfrom django.views.decorators.cache import cache_control, cache_page\n\nfrom .models import Poll, expensive_calculation\n\n\ndef f():\n    return 42\n\n\nclass C:\n    def m(n):\n        return 24\n\n\nclass Unpicklable:\n    def __getstate__(self):\n        raise pickle.PickleError()\n\n\ndef empty_response(request):\n    return HttpResponse()\n\n\nKEY_ERRORS_WITH_MEMCACHED_MSG = (\n    \'Cache key contains characters that will cause errors if used with \'\n    \'memcached: %r\'\n)\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n    }\n})\nclass DummyCacheTests(SimpleTestCase):\n    # The Dummy cache backend doesn\'t really behave like a test backend,\n    # so it has its own test case.\n\n    def test_simple(self):\n        "Dummy cache backend ignores cache set calls"\n        cache.set("key", "value")\n        self.assertIsNone(cache.get("key"))\n\n    def test_add(self):\n        "Add doesn\'t do anything in dummy cache backend"\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), True)\n        self.assertIsNone(cache.get("addkey1"))\n\n    def test_non_existent(self):\n        "Nonexistent keys aren\'t found in the dummy cache backend"\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        "get_many returns nothing for the dummy cache backend"\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n\n    def test_get_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.get_many([\'key with spaces\'])\n\n    def test_delete(self):\n        "Cache deletion is transparently ignored on the dummy cache backend"\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertIsNone(cache.get("key1"))\n        self.assertIs(cache.delete("key1"), False)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_has_key(self):\n        "The has_key method doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), False)\n        self.assertIs(cache.has_key("goodbye1"), False)\n\n    def test_in(self):\n        "The in operator doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello2", "goodbye2")\n        self.assertNotIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        "Dummy cache values can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        "Dummy cache values can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_touch(self):\n        """Dummy cache can\'t do touch()."""\n        self.assertIs(cache.touch(\'whatever\'), False)\n\n    def test_data_types(self):\n        "All data types are ignored equally by the dummy cache"\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertIsNone(cache.get("stuff"))\n\n    def test_expiration(self):\n        "Expiration has no effect on the dummy cache"\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertIsNone(cache.get("expire2"))\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_unicode(self):\n        "Unicode values are ignored by the dummy cache"\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertIsNone(cache.get(key))\n\n    def test_set_many(self):\n        "set_many does nothing for the dummy cache backend"\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n\n    def test_set_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.set_many({\'key with spaces\': \'foo\'})\n\n    def test_delete_many(self):\n        "delete_many does nothing for the dummy cache backend"\n        cache.delete_many([\'a\', \'b\'])\n\n    def test_delete_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.delete_many({\'key with spaces\': \'foo\'})\n\n    def test_clear(self):\n        "clear does nothing for the dummy cache backend"\n        cache.clear()\n\n    def test_incr_version(self):\n        "Dummy cache versions can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        "Dummy cache versions can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\')\n\n    def test_get_or_set(self):\n        self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n        self.assertIsNone(cache.get_or_set(\'mykey\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'default\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n\n\ndef custom_key_func(key, key_prefix, version):\n    "A customized cache key function"\n    return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n\n\n_caches_setting_base = {\n    \'default\': {},\n    \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n    \'v2\': {\'VERSION\': 2},\n    \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n    \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n    \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n    \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n}\n\n\ndef caches_setting_for_tests(base=None, exclude=None, **params):\n    # `base` is used to pull in the memcached config from the original settings,\n    # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n    # should be omitted.\n    # `params` are test specific overrides and `_caches_settings_base` is the\n    # base config for the tests.\n    # This results in the following search order:\n    # params -> _caches_setting_base -> base\n    base = base or {}\n    exclude = exclude or set()\n    setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n    for key, cache_params in setting.items():\n        cache_params.update(_caches_setting_base[key])\n        cache_params.update(params)\n    return setting\n\n\nclass BaseCacheTests:\n    # A common set of tests to apply to all cache backends\n    factory = RequestFactory()\n\n    def tearDown(self):\n        cache.clear()\n\n    def test_simple(self):\n        # Simple cache set/get works\n        cache.set("key", "value")\n        self.assertEqual(cache.get("key"), "value")\n\n    def test_default_used_when_none_is_set(self):\n        """If None is cached, get() returns it instead of the default."""\n        cache.set(\'key_default_none\', None)\n        self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n\n    def test_add(self):\n        # A key can be added to a cache\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), False)\n        self.assertEqual(cache.get("addkey1"), "value")\n\n    def test_prefix(self):\n        # Test for same cache key conflicts between shared backend\n        cache.set(\'somekey\', \'value\')\n\n        # should not be set in the prefixed cache\n        self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n\n        caches[\'prefix\'].set(\'somekey\', \'value2\')\n\n        self.assertEqual(cache.get(\'somekey\'), \'value\')\n        self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n\n    def test_non_existent(self):\n        """Nonexistent cache keys return as None/default."""\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        # Multiple cache keys can be returned using get_many\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n        self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n\n    def test_delete(self):\n        # Cache keys can be deleted\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertIs(cache.delete("key1"), True)\n        self.assertIsNone(cache.get("key1"))\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_delete_nonexistent(self):\n        self.assertIs(cache.delete(\'nonexistent_key\'), False)\n\n    def test_has_key(self):\n        # The cache can be inspected for cache keys\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), True)\n        self.assertIs(cache.has_key("goodbye1"), False)\n        cache.set("no_expiry", "here", None)\n        self.assertIs(cache.has_key("no_expiry"), True)\n\n    def test_in(self):\n        # The in operator can be used to inspect cache contents\n        cache.set("hello2", "goodbye2")\n        self.assertIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        # Cache values can be incremented\n        cache.set(\'answer\', 41)\n        self.assertEqual(cache.incr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.incr(\'answer\', 10), 52)\n        self.assertEqual(cache.get(\'answer\'), 52)\n        self.assertEqual(cache.incr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        # Cache values can be decremented\n        cache.set(\'answer\', 43)\n        self.assertEqual(cache.decr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.decr(\'answer\', 10), 32)\n        self.assertEqual(cache.get(\'answer\'), 32)\n        self.assertEqual(cache.decr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_close(self):\n        self.assertTrue(hasattr(cache, \'close\'))\n        cache.close()\n\n    def test_data_types(self):\n        # Many different data types can be cached\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertEqual(cache.get("stuff"), stuff)\n\n    def test_cache_read_for_model_instance(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        my_poll = Poll.objects.create(question="Well?")\n        self.assertEqual(Poll.objects.count(), 1)\n        pub_date = my_poll.pub_date\n        cache.set(\'question\', my_poll)\n        cached_poll = cache.get(\'question\')\n        self.assertEqual(cached_poll.pub_date, pub_date)\n        # We only want the default expensive calculation run once\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_write_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache write\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        # cache set should not re-evaluate default functions\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_read_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        runs_before_cache_read = expensive_calculation.num_runs\n        cache.get(\'deferred_queryset\')\n        # We only want the default expensive calculation run on creation and set\n        self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n\n    def test_expiration(self):\n        # Cache values can be set to expire\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertEqual(cache.get("expire2"), "newvalue")\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_touch(self):\n        # cache.touch() updates the timeout.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n        time.sleep(3)\n        self.assertIs(cache.has_key(\'expire1\'), False)\n        # cache.touch() works without the timeout argument.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\'), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n\n        self.assertIs(cache.touch(\'nonexistent\'), False)\n\n    def test_unicode(self):\n        # Unicode values can be cached\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        # Test `set`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `add`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertIs(cache.delete(key), True)\n                self.assertIs(cache.add(key, value), True)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `set_many`\n        for (key, value) in stuff.items():\n            self.assertIs(cache.delete(key), True)\n        cache.set_many(stuff)\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertEqual(cache.get(key), value)\n\n    def test_binary_string(self):\n        # Binary strings should be cacheable\n        from zlib import compress, decompress\n        value = \'value_to_be_compressed\'\n        compressed_value = compress(value.encode())\n\n        # Test set\n        cache.set(\'binary1\', compressed_value)\n        compressed_result = cache.get(\'binary1\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test add\n        self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n        compressed_result = cache.get(\'binary1-add\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test set_many\n        cache.set_many({\'binary1-set_many\': compressed_value})\n        compressed_result = cache.get(\'binary1-set_many\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n    def test_set_many(self):\n        # Multiple keys can be set using set_many\n        cache.set_many({"key1": "spam", "key2": "eggs"})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_set_many_returns_empty_list_on_success(self):\n        """set_many() returns an empty list when all keys are inserted."""\n        failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(failing_keys, [])\n\n    def test_set_many_expiration(self):\n        # set_many takes a second ``timeout`` parameter\n        cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n        time.sleep(2)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_delete_many(self):\n        # Multiple keys can be deleted using delete_many\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n        cache.delete_many(["key1", "key2"])\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n        self.assertEqual(cache.get("key3"), "ham")\n\n    def test_clear(self):\n        # The cache can be emptied using clear\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        cache.clear()\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_long_timeout(self):\n        """\n        Follow memcached\'s convention where a timeout greater than 30 days is\n        treated as an absolute expiration timestamp instead of a relative\n        offset (#12399).\n        """\n        cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n    def test_forever_timeout(self):\n        """\n        Passing in None into timeout results in a value that is cached forever\n        """\n        cache.set(\'key1\', \'eggs\', None)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n        self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n        cache.set(\'key5\', \'belgian fries\', timeout=1)\n        self.assertIs(cache.touch(\'key5\', timeout=None), True)\n        time.sleep(2)\n        self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n\n    def test_zero_timeout(self):\n        """\n        Passing in zero into timeout results in a value that is not cached\n        """\n        cache.set(\'key1\', \'eggs\', 0)\n        self.assertIsNone(cache.get(\'key1\'))\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n        self.assertIsNone(cache.get(\'key2\'))\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n        self.assertIsNone(cache.get(\'key3\'))\n        self.assertIsNone(cache.get(\'key4\'))\n\n        cache.set(\'key5\', \'belgian fries\', timeout=5)\n        self.assertIs(cache.touch(\'key5\', timeout=0), True)\n        self.assertIsNone(cache.get(\'key5\'))\n\n    def test_float_timeout(self):\n        # Make sure a timeout given as a float doesn\'t crash anything.\n        cache.set("key1", "spam", 100.2)\n        self.assertEqual(cache.get("key1"), "spam")\n\n    def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n        try:\n            cull_cache = caches[cull_cache_name]\n        except InvalidCacheBackendError:\n            self.skipTest("Culling isn\'t implemented.")\n\n        # Create initial cache key entries. This will overflow the cache,\n        # causing a cull.\n        for i in range(1, initial_count):\n            cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n        count = 0\n        # Count how many keys are left in the cache.\n        for i in range(1, initial_count):\n            if cull_cache.has_key(\'cull%d\' % i):\n                count += 1\n        self.assertEqual(count, final_count)\n\n    def test_cull(self):\n        self._perform_cull_test(\'cull\', 50, 29)\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 19)\n\n    def _perform_invalid_key_test(self, key, expected_warning):\n        """\n        All the builtin backends should warn (except memcached that should\n        error) on keys that would be refused by memcached. This encourages\n        portable caching code without making it too difficult to use production\n        backends with more liberal key rules. Refs #6447.\n        """\n        # mimic custom ``make_key`` method being defined since the default will\n        # never show the below warnings\n        def func(key, *args):\n            return key\n\n        old_func = cache.key_func\n        cache.key_func = func\n\n        try:\n            with self.assertWarns(CacheKeyWarning) as cm:\n                cache.set(key, \'value\')\n            self.assertEqual(str(cm.warning), expected_warning)\n        finally:\n            cache.key_func = old_func\n\n    def test_invalid_key_characters(self):\n        # memcached doesn\'t allow whitespace or control characters in keys.\n        key = \'key with spaces and æ¸…\'\n        self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n\n    def test_invalid_key_length(self):\n        # memcached limits key length to 250.\n        key = (\'a\' * 250) + \'æ¸…\'\n        expected_warning = (\n            \'Cache key will cause errors if used with memcached: \'\n            \'%r (longer than %s)\' % (key, 250)\n        )\n        self._perform_invalid_key_test(key, expected_warning)\n\n    def test_cache_versioning_get_set(self):\n        # set, using default version = 1\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertEqual(cache.get(\'answer1\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer1\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n\n        # set, default version = 1, but manually override version = 2\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set(\'answer3\', 42)\n        self.assertIsNone(cache.get(\'answer3\'))\n        self.assertIsNone(cache.get(\'answer3\', version=1))\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set(\'answer4\', 42, version=1)\n        self.assertEqual(cache.get(\'answer4\'), 42)\n        self.assertEqual(cache.get(\'answer4\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer4\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n\n    def test_cache_versioning_add(self):\n\n        # add, default version = 1, but manually override version = 2\n        self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        # v2 add, using default version = 2\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        # v2 add, default version = 2, but manually override version = 1\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertEqual(cache.get(\'answer3\', version=2), 37)\n\n    def test_cache_versioning_has_key(self):\n        cache.set(\'answer1\', 42)\n\n        # has_key\n        self.assertIs(cache.has_key(\'answer1\'), True)\n        self.assertIs(cache.has_key(\'answer1\', version=1), True)\n        self.assertIs(cache.has_key(\'answer1\', version=2), False)\n\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n\n    def test_cache_versioning_delete(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertIs(cache.delete(\'answer1\'), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIs(cache.delete(\'answer2\', version=2), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer2\', version=2))\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n        self.assertIsNone(cache.get(\'answer4\', version=1))\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_incr_decr(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer1\'), 38)\n        self.assertEqual(cache.get(\'answer1\', version=1), 38)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n        self.assertEqual(cache.decr(\'answer1\'), 37)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 43)\n        self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 43)\n        self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n        self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_get_set_many(self):\n        # set, using default version = 1\n        cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        # set, default version = 1, but manually override version = 2\n        cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n    def test_incr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n        self.assertIsNone(cache.get(\'answer\', version=3))\n\n        self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertIsNone(cache.get(\'answer\', version=2))\n        self.assertEqual(cache.get(\'answer\', version=3), 42)\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n\n        self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n\n        self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer\', version=2))\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\', version=2)\n\n    def test_custom_key_func(self):\n        # Two caches with different key functions aren\'t visible to each other\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n        self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n\n        caches[\'custom_key\'].set(\'answer2\', 42)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n        self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n\n    def test_cache_write_unpicklable_object(self):\n        fetch_middleware = FetchFromCacheMiddleware(empty_response)\n        fetch_middleware.cache = cache\n\n        request = self.factory.get(\'/cache/test\')\n        request._cache_update_cache = True\n        get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n        self.assertIsNone(get_cache_data)\n\n        content = \'Testing cookie serialization.\'\n\n        def get_response(req):\n            response = HttpResponse(content)\n            response.set_cookie(\'foo\', \'bar\')\n            return response\n\n        update_middleware = UpdateCacheMiddleware(get_response)\n        update_middleware.cache = cache\n        response = update_middleware(request)\n\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n        UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n    def test_add_fail_on_pickleerror(self):\n        # Shouldn\'t fail silently if trying to cache an unpicklable type.\n        with self.assertRaises(pickle.PickleError):\n            cache.add(\'unpicklable\', Unpicklable())\n\n    def test_set_fail_on_pickleerror(self):\n        with self.assertRaises(pickle.PickleError):\n            cache.set(\'unpicklable\', Unpicklable())\n\n    def test_get_or_set(self):\n        self.assertIsNone(cache.get(\'projector\'))\n        self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n        self.assertEqual(cache.get(\'projector\'), 42)\n        self.assertIsNone(cache.get_or_set(\'null\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'value\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n\n    def test_get_or_set_callable_returning_none(self):\n        self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n        # Previous get_or_set() doesn\'t store None in the cache.\n        self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n\n    def test_get_or_set_version(self):\n        msg = "get_or_set() missing 1 required positional argument: \'default\'"\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\')\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\', version=1)\n        self.assertIsNone(cache.get(\'brian\', version=1))\n        self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        self.assertIsNone(cache.get(\'brian\', version=3))\n\n    def test_get_or_set_racing(self):\n        with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n            # Simulate cache.add() failing to add a value. In that case, the\n            # default value should be returned.\n            cache_add.return_value = False\n            self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n\n\n@override_settings(CACHES=caches_setting_for_tests(\n    BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n    # Spaces are used in the table name to ensure quoting/escaping is working\n    LOCATION=\'test cache table\'\n))\nclass DBCacheTests(BaseCacheTests, TransactionTestCase):\n\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        # The super calls needs to happen first for the settings override.\n        super().setUp()\n        self.create_table()\n\n    def tearDown(self):\n        # The super call needs to happen first because it uses the database.\n        super().tearDown()\n        self.drop_table()\n\n    def create_table(self):\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def drop_table(self):\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test cache table\')\n            cursor.execute(\'DROP TABLE %s\' % table_name)\n\n    def test_get_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2})\n        cache.set(\'expired\', \'expired\', 0.01)\n        with self.assertNumQueries(1):\n            self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n        time.sleep(0.02)\n        with self.assertNumQueries(2):\n            self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n\n    def test_delete_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n        with self.assertNumQueries(1):\n            cache.delete_many([\'a\', \'b\', \'c\'])\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 18)\n\n    def test_second_call_doesnt_crash(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', stdout=out)\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n\n    @override_settings(CACHES=caches_setting_for_tests(\n        BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n        # Use another table name to avoid the \'table already exists\' message.\n        LOCATION=\'createcachetable_dry_run_mode\'\n    ))\n    def test_createcachetable_dry_run_mode(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n        output = out.getvalue()\n        self.assertTrue(output.startswith("CREATE TABLE"))\n\n    def test_createcachetable_with_table_argument(self):\n        """\n        Delete and recreate cache table with legacy behavior (explicitly\n        specifying the table name).\n        """\n        self.drop_table()\n        out = io.StringIO()\n        management.call_command(\n            \'createcachetable\',\n            \'test cache table\',\n            verbosity=2,\n            stdout=out,\n        )\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n```\n\n#### Test Case 2\nThis test case is a variation of the culling test where `CULL_FREQUENCY` is set to 0. This means that culling will happen more aggressively, which could help expose race conditions or other subtle bugs in the culling logic.\n\n```python\n# File: tests/cache/tests.py\nimport copy\nimport io\nimport os\nimport pickle\nimport re\nimport shutil\nimport tempfile\nimport threading\nimport time\nimport unittest\nfrom pathlib import Path\nfrom unittest import mock\n\nfrom django.conf import settings\nfrom django.core import management, signals\nfrom django.core.cache import (\n    DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n)\nfrom django.core.cache.backends.base import InvalidCacheBackendError\nfrom django.core.cache.utils import make_template_fragment_key\nfrom django.db import close_old_connections, connection, connections\nfrom django.http import (\n    HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n)\nfrom django.middleware.cache import (\n    CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n)\nfrom django.middleware.csrf import CsrfViewMiddleware\nfrom django.template import engines\nfrom django.template.context_processors import csrf\nfrom django.template.response import TemplateResponse\nfrom django.test import (\n    RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n    override_settings,\n)\nfrom django.test.signals import setting_changed\nfrom django.utils import timezone, translation\nfrom django.utils.cache import (\n    get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n)\nfrom django.views.decorators.cache import cache_control, cache_page\n\nfrom .models import Poll, expensive_calculation\n\n\ndef f():\n    return 42\n\n\nclass C:\n    def m(n):\n        return 24\n\n\nclass Unpicklable:\n    def __getstate__(self):\n        raise pickle.PickleError()\n\n\ndef empty_response(request):\n    return HttpResponse()\n\n\nKEY_ERRORS_WITH_MEMCACHED_MSG = (\n    \'Cache key contains characters that will cause errors if used with \'\n    \'memcached: %r\'\n)\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n    }\n})\nclass DummyCacheTests(SimpleTestCase):\n    # The Dummy cache backend doesn\'t really behave like a test backend,\n    # so it has its own test case.\n\n    def test_simple(self):\n        "Dummy cache backend ignores cache set calls"\n        cache.set("key", "value")\n        self.assertIsNone(cache.get("key"))\n\n    def test_add(self):\n        "Add doesn\'t do anything in dummy cache backend"\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), True)\n        self.assertIsNone(cache.get("addkey1"))\n\n    def test_non_existent(self):\n        "Nonexistent keys aren\'t found in the dummy cache backend"\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        "get_many returns nothing for the dummy cache backend"\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n\n    def test_get_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.get_many([\'key with spaces\'])\n\n    def test_delete(self):\n        "Cache deletion is transparently ignored on the dummy cache backend"\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertIsNone(cache.get("key1"))\n        self.assertIs(cache.delete("key1"), False)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_has_key(self):\n        "The has_key method doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), False)\n        self.assertIs(cache.has_key("goodbye1"), False)\n\n    def test_in(self):\n        "The in operator doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello2", "goodbye2")\n        self.assertNotIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        "Dummy cache values can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        "Dummy cache values can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_touch(self):\n        """Dummy cache can\'t do touch()."""\n        self.assertIs(cache.touch(\'whatever\'), False)\n\n    def test_data_types(self):\n        "All data types are ignored equally by the dummy cache"\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertIsNone(cache.get("stuff"))\n\n    def test_expiration(self):\n        "Expiration has no effect on the dummy cache"\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertIsNone(cache.get("expire2"))\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_unicode(self):\n        "Unicode values are ignored by the dummy cache"\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertIsNone(cache.get(key))\n\n    def test_set_many(self):\n        "set_many does nothing for the dummy cache backend"\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n\n    def test_set_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.set_many({\'key with spaces\': \'foo\'})\n\n    def test_delete_many(self):\n        "delete_many does nothing for the dummy cache backend"\n        cache.delete_many([\'a\', \'b\'])\n\n    def test_delete_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.delete_many({\'key with spaces\': \'foo\'})\n\n    def test_clear(self):\n        "clear does nothing for the dummy cache backend"\n        cache.clear()\n\n    def test_incr_version(self):\n        "Dummy cache versions can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        "Dummy cache versions can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\')\n\n    def test_get_or_set(self):\n        self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n        self.assertIsNone(cache.get_or_set(\'mykey\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'default\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n\n\ndef custom_key_func(key, key_prefix, version):\n    "A customized cache key function"\n    return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n\n\n_caches_setting_base = {\n    \'default\': {},\n    \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n    \'v2\': {\'VERSION\': 2},\n    \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n    \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n    \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n    \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n}\n\n\ndef caches_setting_for_tests(base=None, exclude=None, **params):\n    # `base` is used to pull in the memcached config from the original settings,\n    # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n    # should be omitted.\n    # `params` are test specific overrides and `_caches_settings_base` is the\n    # base config for the tests.\n    # This results in the following search order:\n    # params -> _caches_setting_base -> base\n    base = base or {}\n    exclude = exclude or set()\n    setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n    for key, cache_params in setting.items():\n        cache_params.update(_caches_setting_base[key])\n        cache_params.update(params)\n    return setting\n\n\nclass BaseCacheTests:\n    # A common set of tests to apply to all cache backends\n    factory = RequestFactory()\n\n    def tearDown(self):\n        cache.clear()\n\n    def test_simple(self):\n        # Simple cache set/get works\n        cache.set("key", "value")\n        self.assertEqual(cache.get("key"), "value")\n\n    def test_default_used_when_none_is_set(self):\n        """If None is cached, get() returns it instead of the default."""\n        cache.set(\'key_default_none\', None)\n        self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n\n    def test_add(self):\n        # A key can be added to a cache\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), False)\n        self.assertEqual(cache.get("addkey1"), "value")\n\n    def test_prefix(self):\n        # Test for same cache key conflicts between shared backend\n        cache.set(\'somekey\', \'value\')\n\n        # should not be set in the prefixed cache\n        self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n\n        caches[\'prefix\'].set(\'somekey\', \'value2\')\n\n        self.assertEqual(cache.get(\'somekey\'), \'value\')\n        self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n\n    def test_non_existent(self):\n        """Nonexistent cache keys return as None/default."""\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        # Multiple cache keys can be returned using get_many\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n        self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n\n    def test_delete(self):\n        # Cache keys can be deleted\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertIs(cache.delete("key1"), True)\n        self.assertIsNone(cache.get("key1"))\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_delete_nonexistent(self):\n        self.assertIs(cache.delete(\'nonexistent_key\'), False)\n\n    def test_has_key(self):\n        # The cache can be inspected for cache keys\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), True)\n        self.assertIs(cache.has_key("goodbye1"), False)\n        cache.set("no_expiry", "here", None)\n        self.assertIs(cache.has_key("no_expiry"), True)\n\n    def test_in(self):\n        # The in operator can be used to inspect cache contents\n        cache.set("hello2", "goodbye2")\n        self.assertIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        # Cache values can be incremented\n        cache.set(\'answer\', 41)\n        self.assertEqual(cache.incr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.incr(\'answer\', 10), 52)\n        self.assertEqual(cache.get(\'answer\'), 52)\n        self.assertEqual(cache.incr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        # Cache values can be decremented\n        cache.set(\'answer\', 43)\n        self.assertEqual(cache.decr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.decr(\'answer\', 10), 32)\n        self.assertEqual(cache.get(\'answer\'), 32)\n        self.assertEqual(cache.decr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_close(self):\n        self.assertTrue(hasattr(cache, \'close\'))\n        cache.close()\n\n    def test_data_types(self):\n        # Many different data types can be cached\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertEqual(cache.get("stuff"), stuff)\n\n    def test_cache_read_for_model_instance(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        my_poll = Poll.objects.create(question="Well?")\n        self.assertEqual(Poll.objects.count(), 1)\n        pub_date = my_poll.pub_date\n        cache.set(\'question\', my_poll)\n        cached_poll = cache.get(\'question\')\n        self.assertEqual(cached_poll.pub_date, pub_date)\n        # We only want the default expensive calculation run once\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_write_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache write\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        # cache set should not re-evaluate default functions\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_read_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        runs_before_cache_read = expensive_calculation.num_runs\n        cache.get(\'deferred_queryset\')\n        # We only want the default expensive calculation run on creation and set\n        self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n\n    def test_expiration(self):\n        # Cache values can be set to expire\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertEqual(cache.get("expire2"), "newvalue")\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_touch(self):\n        # cache.touch() updates the timeout.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n        time.sleep(3)\n        self.assertIs(cache.has_key(\'expire1\'), False)\n        # cache.touch() works without the timeout argument.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\'), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n\n        self.assertIs(cache.touch(\'nonexistent\'), False)\n\n    def test_unicode(self):\n        # Unicode values can be cached\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        # Test `set`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `add`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertIs(cache.delete(key), True)\n                self.assertIs(cache.add(key, value), True)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `set_many`\n        for (key, value) in stuff.items():\n            self.assertIs(cache.delete(key), True)\n        cache.set_many(stuff)\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertEqual(cache.get(key), value)\n\n    def test_binary_string(self):\n        # Binary strings should be cacheable\n        from zlib import compress, decompress\n        value = \'value_to_be_compressed\'\n        compressed_value = compress(value.encode())\n\n        # Test set\n        cache.set(\'binary1\', compressed_value)\n        compressed_result = cache.get(\'binary1\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test add\n        self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n        compressed_result = cache.get(\'binary1-add\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test set_many\n        cache.set_many({\'binary1-set_many\': compressed_value})\n        compressed_result = cache.get(\'binary1-set_many\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n    def test_set_many(self):\n        # Multiple keys can be set using set_many\n        cache.set_many({"key1": "spam", "key2": "eggs"})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_set_many_returns_empty_list_on_success(self):\n        """set_many() returns an empty list when all keys are inserted."""\n        failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(failing_keys, [])\n\n    def test_set_many_expiration(self):\n        # set_many takes a second ``timeout`` parameter\n        cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n        time.sleep(2)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_delete_many(self):\n        # Multiple keys can be deleted using delete_many\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n        cache.delete_many(["key1", "key2"])\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n        self.assertEqual(cache.get("key3"), "ham")\n\n    def test_clear(self):\n        # The cache can be emptied using clear\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        cache.clear()\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_long_timeout(self):\n        """\n        Follow memcached\'s convention where a timeout greater than 30 days is\n        treated as an absolute expiration timestamp instead of a relative\n        offset (#12399).\n        """\n        cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n    def test_forever_timeout(self):\n        """\n        Passing in None into timeout results in a value that is cached forever\n        """\n        cache.set(\'key1\', \'eggs\', None)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n        self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n        cache.set(\'key5\', \'belgian fries\', timeout=1)\n        self.assertIs(cache.touch(\'key5\', timeout=None), True)\n        time.sleep(2)\n        self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n\n    def test_zero_timeout(self):\n        """\n        Passing in zero into timeout results in a value that is not cached\n        """\n        cache.set(\'key1\', \'eggs\', 0)\n        self.assertIsNone(cache.get(\'key1\'))\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n        self.assertIsNone(cache.get(\'key2\'))\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n        self.assertIsNone(cache.get(\'key3\'))\n        self.assertIsNone(cache.get(\'key4\'))\n\n        cache.set(\'key5\', \'belgian fries\', timeout=5)\n        self.assertIs(cache.touch(\'key5\', timeout=0), True)\n        self.assertIsNone(cache.get(\'key5\'))\n\n    def test_float_timeout(self):\n        # Make sure a timeout given as a float doesn\'t crash anything.\n        cache.set("key1", "spam", 100.2)\n        self.assertEqual(cache.get("key1"), "spam")\n\n    def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n        try:\n            cull_cache = caches[cull_cache_name]\n        except InvalidCacheBackendError:\n            self.skipTest("Culling isn\'t implemented.")\n\n        # Create initial cache key entries. This will overflow the cache,\n        # causing a cull.\n        for i in range(1, initial_count):\n            cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n        count = 0\n        # Count how many keys are left in the cache.\n        for i in range(1, initial_count):\n            if cull_cache.has_key(\'cull%d\' % i):\n                count += 1\n        self.assertEqual(count, final_count)\n\n    def test_cull(self):\n        self._perform_cull_test(\'cull\', 50, 29)\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 19)\n\n    def _perform_invalid_key_test(self, key, expected_warning):\n        """\n        All the builtin backends should warn (except memcached that should\n        error) on keys that would be refused by memcached. This encourages\n        portable caching code without making it too difficult to use production\n        backends with more liberal key rules. Refs #6447.\n        """\n        # mimic custom ``make_key`` method being defined since the default will\n        # never show the below warnings\n        def func(key, *args):\n            return key\n\n        old_func = cache.key_func\n        cache.key_func = func\n\n        try:\n            with self.assertWarns(CacheKeyWarning) as cm:\n                cache.set(key, \'value\')\n            self.assertEqual(str(cm.warning), expected_warning)\n        finally:\n            cache.key_func = old_func\n\n    def test_invalid_key_characters(self):\n        # memcached doesn\'t allow whitespace or control characters in keys.\n        key = \'key with spaces and æ¸…\'\n        self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n\n    def test_invalid_key_length(self):\n        # memcached limits key length to 250.\n        key = (\'a\' * 250) + \'æ¸…\'\n        expected_warning = (\n            \'Cache key will cause errors if used with memcached: \'\n            \'%r (longer than %s)\' % (key, 250)\n        )\n        self._perform_invalid_key_test(key, expected_warning)\n\n    def test_cache_versioning_get_set(self):\n        # set, using default version = 1\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertEqual(cache.get(\'answer1\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer1\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n\n        # set, default version = 1, but manually override version = 2\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set(\'answer3\', 42)\n        self.assertIsNone(cache.get(\'answer3\'))\n        self.assertIsNone(cache.get(\'answer3\', version=1))\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set(\'answer4\', 42, version=1)\n        self.assertEqual(cache.get(\'answer4\'), 42)\n        self.assertEqual(cache.get(\'answer4\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer4\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n\n    def test_cache_versioning_add(self):\n\n        # add, default version = 1, but manually override version = 2\n        self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        # v2 add, using default version = 2\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        # v2 add, default version = 2, but manually override version = 1\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertEqual(cache.get(\'answer3\', version=2), 37)\n\n    def test_cache_versioning_has_key(self):\n        cache.set(\'answer1\', 42)\n\n        # has_key\n        self.assertIs(cache.has_key(\'answer1\'), True)\n        self.assertIs(cache.has_key(\'answer1\', version=1), True)\n        self.assertIs(cache.has_key(\'answer1\', version=2), False)\n\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n\n    def test_cache_versioning_delete(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertIs(cache.delete(\'answer1\'), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIs(cache.delete(\'answer2\', version=2), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer2\', version=2))\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n        self.assertIsNone(cache.get(\'answer4\', version=1))\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_incr_decr(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer1\'), 38)\n        self.assertEqual(cache.get(\'answer1\', version=1), 38)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n        self.assertEqual(cache.decr(\'answer1\'), 37)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 43)\n        self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 43)\n        self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n        self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_get_set_many(self):\n        # set, using default version = 1\n        cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        # set, default version = 1, but manually override version = 2\n        cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n    def test_incr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n        self.assertIsNone(cache.get(\'answer\', version=3))\n\n        self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertIsNone(cache.get(\'answer\', version=2))\n        self.assertEqual(cache.get(\'answer\', version=3), 42)\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n\n        self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n\n        self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer\', version=2))\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\', version=2)\n\n    def test_custom_key_func(self):\n        # Two caches with different key functions aren\'t visible to each other\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n        self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n\n        caches[\'custom_key\'].set(\'answer2\', 42)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n        self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n\n    def test_cache_write_unpicklable_object(self):\n        fetch_middleware = FetchFromCacheMiddleware(empty_response)\n        fetch_middleware.cache = cache\n\n        request = self.factory.get(\'/cache/test\')\n        request._cache_update_cache = True\n        get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n        self.assertIsNone(get_cache_data)\n\n        content = \'Testing cookie serialization.\'\n\n        def get_response(req):\n            response = HttpResponse(content)\n            response.set_cookie(\'foo\', \'bar\')\n            return response\n\n        update_middleware = UpdateCacheMiddleware(get_response)\n        update_middleware.cache = cache\n        response = update_middleware(request)\n\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n        UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n    def test_add_fail_on_pickleerror(self):\n        # Shouldn\'t fail silently if trying to cache an unpicklable type.\n        with self.assertRaises(pickle.PickleError):\n            cache.add(\'unpicklable\', Unpicklable())\n\n    def test_set_fail_on_pickleerror(self):\n        with self.assertRaises(pickle.PickleError):\n            cache.set(\'unpicklable\', Unpicklable())\n\n    def test_get_or_set(self):\n        self.assertIsNone(cache.get(\'projector\'))\n        self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n        self.assertEqual(cache.get(\'projector\'), 42)\n        self.assertIsNone(cache.get_or_set(\'null\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'value\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n\n    def test_get_or_set_callable_returning_none(self):\n        self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n        # Previous get_or_set() doesn\'t store None in the cache.\n        self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n\n    def test_get_or_set_version(self):\n        msg = "get_or_set() missing 1 required positional argument: \'default\'"\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\')\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\', version=1)\n        self.assertIsNone(cache.get(\'brian\', version=1))\n        self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        self.assertIsNone(cache.get(\'brian\', version=3))\n\n    def test_get_or_set_racing(self):\n        with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n            # Simulate cache.add() failing to add a value. In that case, the\n            # default value should be returned.\n            cache_add.return_value = False\n            self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n\n\n@override_settings(CACHES=caches_setting_for_tests(\n    BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n    # Spaces are used in the table name to ensure quoting/escaping is working\n    LOCATION=\'test cache table\'\n))\nclass DBCacheTests(BaseCacheTests, TransactionTestCase):\n\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        # The super calls needs to happen first for the settings override.\n        super().setUp()\n        self.create_table()\n\n    def tearDown(self):\n        # The super call needs to happen first because it uses the database.\n        super().tearDown()\n        self.drop_table()\n\n    def create_table(self):\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def drop_table(self):\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test cache table\')\n            cursor.execute(\'DROP TABLE %s\' % table_name)\n\n    def test_get_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2})\n        cache.set(\'expired\', \'expired\', 0.01)\n        with self.assertNumQueries(1):\n            self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n        time.sleep(0.02)\n        with self.assertNumQueries(2):\n            self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n\n    def test_delete_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n        with self.assertNumQueries(1):\n            cache.delete_many([\'a\', \'b\', \'c\'])\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 18)\n\n    def test_second_call_doesnt_crash(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', stdout=out)\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n\n    @override_settings(CACHES=caches_setting_for_tests(\n        BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n        # Use another table name to avoid the \'table already exists\' message.\n        LOCATION=\'createcachetable_dry_run_mode\'\n    ))\n    def test_createcachetable_dry_run_mode(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n        output = out.getvalue()\n        self.assertTrue(output.startswith("CREATE TABLE"))\n\n    def test_createcachetable_with_table_argument(self):\n        """\n        Delete and recreate cache table with legacy behavior (explicitly\n        specifying the table name).\n        """\n        self.drop_table()\n        out = io.StringIO()\n        management.call_command(\n            \'createcachetable\',\n            \'test cache table\',\n            verbosity=2,\n            stdout=out,\n        )\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n```\n\n#### Test Case 3\nThis test case is relevant because it checks the number of queries made when calling `get_many`, which could be affected by the culling logic. An incorrect number of queries might indicate that the culling process is not behaving as expected, which could lead to the `NoneType` error.\n\n```python\n# File: tests/cache/tests.py\nimport copy\nimport io\nimport os\nimport pickle\nimport re\nimport shutil\nimport tempfile\nimport threading\nimport time\nimport unittest\nfrom pathlib import Path\nfrom unittest import mock\n\nfrom django.conf import settings\nfrom django.core import management, signals\nfrom django.core.cache import (\n    DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n)\nfrom django.core.cache.backends.base import InvalidCacheBackendError\nfrom django.core.cache.utils import make_template_fragment_key\nfrom django.db import close_old_connections, connection, connections\nfrom django.http import (\n    HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n)\nfrom django.middleware.cache import (\n    CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n)\nfrom django.middleware.csrf import CsrfViewMiddleware\nfrom django.template import engines\nfrom django.template.context_processors import csrf\nfrom django.template.response import TemplateResponse\nfrom django.test import (\n    RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n    override_settings,\n)\nfrom django.test.signals import setting_changed\nfrom django.utils import timezone, translation\nfrom django.utils.cache import (\n    get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n)\nfrom django.views.decorators.cache import cache_control, cache_page\n\nfrom .models import Poll, expensive_calculation\n\n\ndef f():\n    return 42\n\n\nclass C:\n    def m(n):\n        return 24\n\n\nclass Unpicklable:\n    def __getstate__(self):\n        raise pickle.PickleError()\n\n\ndef empty_response(request):\n    return HttpResponse()\n\n\nKEY_ERRORS_WITH_MEMCACHED_MSG = (\n    \'Cache key contains characters that will cause errors if used with \'\n    \'memcached: %r\'\n)\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n    }\n})\nclass DummyCacheTests(SimpleTestCase):\n    # The Dummy cache backend doesn\'t really behave like a test backend,\n    # so it has its own test case.\n\n    def test_simple(self):\n        "Dummy cache backend ignores cache set calls"\n        cache.set("key", "value")\n        self.assertIsNone(cache.get("key"))\n\n    def test_add(self):\n        "Add doesn\'t do anything in dummy cache backend"\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), True)\n        self.assertIsNone(cache.get("addkey1"))\n\n    def test_non_existent(self):\n        "Nonexistent keys aren\'t found in the dummy cache backend"\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        "get_many returns nothing for the dummy cache backend"\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n\n    def test_get_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.get_many([\'key with spaces\'])\n\n    def test_delete(self):\n        "Cache deletion is transparently ignored on the dummy cache backend"\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertIsNone(cache.get("key1"))\n        self.assertIs(cache.delete("key1"), False)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_has_key(self):\n        "The has_key method doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), False)\n        self.assertIs(cache.has_key("goodbye1"), False)\n\n    def test_in(self):\n        "The in operator doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello2", "goodbye2")\n        self.assertNotIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        "Dummy cache values can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        "Dummy cache values can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_touch(self):\n        """Dummy cache can\'t do touch()."""\n        self.assertIs(cache.touch(\'whatever\'), False)\n\n    def test_data_types(self):\n        "All data types are ignored equally by the dummy cache"\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertIsNone(cache.get("stuff"))\n\n    def test_expiration(self):\n        "Expiration has no effect on the dummy cache"\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertIsNone(cache.get("expire2"))\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_unicode(self):\n        "Unicode values are ignored by the dummy cache"\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertIsNone(cache.get(key))\n\n    def test_set_many(self):\n        "set_many does nothing for the dummy cache backend"\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n\n    def test_set_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.set_many({\'key with spaces\': \'foo\'})\n\n    def test_delete_many(self):\n        "delete_many does nothing for the dummy cache backend"\n        cache.delete_many([\'a\', \'b\'])\n\n    def test_delete_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.delete_many({\'key with spaces\': \'foo\'})\n\n    def test_clear(self):\n        "clear does nothing for the dummy cache backend"\n        cache.clear()\n\n    def test_incr_version(self):\n        "Dummy cache versions can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        "Dummy cache versions can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\')\n\n    def test_get_or_set(self):\n        self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n        self.assertIsNone(cache.get_or_set(\'mykey\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'default\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n\n\ndef custom_key_func(key, key_prefix, version):\n    "A customized cache key function"\n    return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n\n\n_caches_setting_base = {\n    \'default\': {},\n    \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n    \'v2\': {\'VERSION\': 2},\n    \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n    \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n    \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n    \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n}\n\n\ndef caches_setting_for_tests(base=None, exclude=None, **params):\n    # `base` is used to pull in the memcached config from the original settings,\n    # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n    # should be omitted.\n    # `params` are test specific overrides and `_caches_settings_base` is the\n    # base config for the tests.\n    # This results in the following search order:\n    # params -> _caches_setting_base -> base\n    base = base or {}\n    exclude = exclude or set()\n    setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n    for key, cache_params in setting.items():\n        cache_params.update(_caches_setting_base[key])\n        cache_params.update(params)\n    return setting\n\n\nclass BaseCacheTests:\n    # A common set of tests to apply to all cache backends\n    factory = RequestFactory()\n\n    def tearDown(self):\n        cache.clear()\n\n    def test_simple(self):\n        # Simple cache set/get works\n        cache.set("key", "value")\n        self.assertEqual(cache.get("key"), "value")\n\n    def test_default_used_when_none_is_set(self):\n        """If None is cached, get() returns it instead of the default."""\n        cache.set(\'key_default_none\', None)\n        self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n\n    def test_add(self):\n        # A key can be added to a cache\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), False)\n        self.assertEqual(cache.get("addkey1"), "value")\n\n    def test_prefix(self):\n        # Test for same cache key conflicts between shared backend\n        cache.set(\'somekey\', \'value\')\n\n        # should not be set in the prefixed cache\n        self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n\n        caches[\'prefix\'].set(\'somekey\', \'value2\')\n\n        self.assertEqual(cache.get(\'somekey\'), \'value\')\n        self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n\n    def test_non_existent(self):\n        """Nonexistent cache keys return as None/default."""\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        # Multiple cache keys can be returned using get_many\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n        self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n\n    def test_delete(self):\n        # Cache keys can be deleted\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertIs(cache.delete("key1"), True)\n        self.assertIsNone(cache.get("key1"))\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_delete_nonexistent(self):\n        self.assertIs(cache.delete(\'nonexistent_key\'), False)\n\n    def test_has_key(self):\n        # The cache can be inspected for cache keys\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), True)\n        self.assertIs(cache.has_key("goodbye1"), False)\n        cache.set("no_expiry", "here", None)\n        self.assertIs(cache.has_key("no_expiry"), True)\n\n    def test_in(self):\n        # The in operator can be used to inspect cache contents\n        cache.set("hello2", "goodbye2")\n        self.assertIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        # Cache values can be incremented\n        cache.set(\'answer\', 41)\n        self.assertEqual(cache.incr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.incr(\'answer\', 10), 52)\n        self.assertEqual(cache.get(\'answer\'), 52)\n        self.assertEqual(cache.incr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        # Cache values can be decremented\n        cache.set(\'answer\', 43)\n        self.assertEqual(cache.decr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.decr(\'answer\', 10), 32)\n        self.assertEqual(cache.get(\'answer\'), 32)\n        self.assertEqual(cache.decr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_close(self):\n        self.assertTrue(hasattr(cache, \'close\'))\n        cache.close()\n\n    def test_data_types(self):\n        # Many different data types can be cached\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertEqual(cache.get("stuff"), stuff)\n\n    def test_cache_read_for_model_instance(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        my_poll = Poll.objects.create(question="Well?")\n        self.assertEqual(Poll.objects.count(), 1)\n        pub_date = my_poll.pub_date\n        cache.set(\'question\', my_poll)\n        cached_poll = cache.get(\'question\')\n        self.assertEqual(cached_poll.pub_date, pub_date)\n        # We only want the default expensive calculation run once\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_write_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache write\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        # cache set should not re-evaluate default functions\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_read_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        runs_before_cache_read = expensive_calculation.num_runs\n        cache.get(\'deferred_queryset\')\n        # We only want the default expensive calculation run on creation and set\n        self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n\n    def test_expiration(self):\n        # Cache values can be set to expire\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertEqual(cache.get("expire2"), "newvalue")\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_touch(self):\n        # cache.touch() updates the timeout.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n        time.sleep(3)\n        self.assertIs(cache.has_key(\'expire1\'), False)\n        # cache.touch() works without the timeout argument.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\'), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n\n        self.assertIs(cache.touch(\'nonexistent\'), False)\n\n    def test_unicode(self):\n        # Unicode values can be cached\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        # Test `set`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `add`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertIs(cache.delete(key), True)\n                self.assertIs(cache.add(key, value), True)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `set_many`\n        for (key, value) in stuff.items():\n            self.assertIs(cache.delete(key), True)\n        cache.set_many(stuff)\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertEqual(cache.get(key), value)\n\n    def test_binary_string(self):\n        # Binary strings should be cacheable\n        from zlib import compress, decompress\n        value = \'value_to_be_compressed\'\n        compressed_value = compress(value.encode())\n\n        # Test set\n        cache.set(\'binary1\', compressed_value)\n        compressed_result = cache.get(\'binary1\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test add\n        self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n        compressed_result = cache.get(\'binary1-add\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test set_many\n        cache.set_many({\'binary1-set_many\': compressed_value})\n        compressed_result = cache.get(\'binary1-set_many\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n    def test_set_many(self):\n        # Multiple keys can be set using set_many\n        cache.set_many({"key1": "spam", "key2": "eggs"})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_set_many_returns_empty_list_on_success(self):\n        """set_many() returns an empty list when all keys are inserted."""\n        failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(failing_keys, [])\n\n    def test_set_many_expiration(self):\n        # set_many takes a second ``timeout`` parameter\n        cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n        time.sleep(2)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_delete_many(self):\n        # Multiple keys can be deleted using delete_many\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n        cache.delete_many(["key1", "key2"])\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n        self.assertEqual(cache.get("key3"), "ham")\n\n    def test_clear(self):\n        # The cache can be emptied using clear\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        cache.clear()\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_long_timeout(self):\n        """\n        Follow memcached\'s convention where a timeout greater than 30 days is\n        treated as an absolute expiration timestamp instead of a relative\n        offset (#12399).\n        """\n        cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n    def test_forever_timeout(self):\n        """\n        Passing in None into timeout results in a value that is cached forever\n        """\n        cache.set(\'key1\', \'eggs\', None)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n        self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n        cache.set(\'key5\', \'belgian fries\', timeout=1)\n        self.assertIs(cache.touch(\'key5\', timeout=None), True)\n        time.sleep(2)\n        self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n\n    def test_zero_timeout(self):\n        """\n        Passing in zero into timeout results in a value that is not cached\n        """\n        cache.set(\'key1\', \'eggs\', 0)\n        self.assertIsNone(cache.get(\'key1\'))\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n        self.assertIsNone(cache.get(\'key2\'))\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n        self.assertIsNone(cache.get(\'key3\'))\n        self.assertIsNone(cache.get(\'key4\'))\n\n        cache.set(\'key5\', \'belgian fries\', timeout=5)\n        self.assertIs(cache.touch(\'key5\', timeout=0), True)\n        self.assertIsNone(cache.get(\'key5\'))\n\n    def test_float_timeout(self):\n        # Make sure a timeout given as a float doesn\'t crash anything.\n        cache.set("key1", "spam", 100.2)\n        self.assertEqual(cache.get("key1"), "spam")\n\n    def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n        try:\n            cull_cache = caches[cull_cache_name]\n        except InvalidCacheBackendError:\n            self.skipTest("Culling isn\'t implemented.")\n\n        # Create initial cache key entries. This will overflow the cache,\n        # causing a cull.\n        for i in range(1, initial_count):\n            cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n        count = 0\n        # Count how many keys are left in the cache.\n        for i in range(1, initial_count):\n            if cull_cache.has_key(\'cull%d\' % i):\n                count += 1\n        self.assertEqual(count, final_count)\n\n    def test_cull(self):\n        self._perform_cull_test(\'cull\', 50, 29)\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 19)\n\n    def _perform_invalid_key_test(self, key, expected_warning):\n        """\n        All the builtin backends should warn (except memcached that should\n        error) on keys that would be refused by memcached. This encourages\n        portable caching code without making it too difficult to use production\n        backends with more liberal key rules. Refs #6447.\n        """\n        # mimic custom ``make_key`` method being defined since the default will\n        # never show the below warnings\n        def func(key, *args):\n            return key\n\n        old_func = cache.key_func\n        cache.key_func = func\n\n        try:\n            with self.assertWarns(CacheKeyWarning) as cm:\n                cache.set(key, \'value\')\n            self.assertEqual(str(cm.warning), expected_warning)\n        finally:\n            cache.key_func = old_func\n\n    def test_invalid_key_characters(self):\n        # memcached doesn\'t allow whitespace or control characters in keys.\n        key = \'key with spaces and æ¸…\'\n        self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n\n    def test_invalid_key_length(self):\n        # memcached limits key length to 250.\n        key = (\'a\' * 250) + \'æ¸…\'\n        expected_warning = (\n            \'Cache key will cause errors if used with memcached: \'\n            \'%r (longer than %s)\' % (key, 250)\n        )\n        self._perform_invalid_key_test(key, expected_warning)\n\n    def test_cache_versioning_get_set(self):\n        # set, using default version = 1\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertEqual(cache.get(\'answer1\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer1\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n\n        # set, default version = 1, but manually override version = 2\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set(\'answer3\', 42)\n        self.assertIsNone(cache.get(\'answer3\'))\n        self.assertIsNone(cache.get(\'answer3\', version=1))\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set(\'answer4\', 42, version=1)\n        self.assertEqual(cache.get(\'answer4\'), 42)\n        self.assertEqual(cache.get(\'answer4\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer4\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n\n    def test_cache_versioning_add(self):\n\n        # add, default version = 1, but manually override version = 2\n        self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        # v2 add, using default version = 2\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        # v2 add, default version = 2, but manually override version = 1\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertEqual(cache.get(\'answer3\', version=2), 37)\n\n    def test_cache_versioning_has_key(self):\n        cache.set(\'answer1\', 42)\n\n        # has_key\n        self.assertIs(cache.has_key(\'answer1\'), True)\n        self.assertIs(cache.has_key(\'answer1\', version=1), True)\n        self.assertIs(cache.has_key(\'answer1\', version=2), False)\n\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n\n    def test_cache_versioning_delete(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertIs(cache.delete(\'answer1\'), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIs(cache.delete(\'answer2\', version=2), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer2\', version=2))\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n        self.assertIsNone(cache.get(\'answer4\', version=1))\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_incr_decr(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer1\'), 38)\n        self.assertEqual(cache.get(\'answer1\', version=1), 38)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n        self.assertEqual(cache.decr(\'answer1\'), 37)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 43)\n        self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 43)\n        self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n        self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_get_set_many(self):\n        # set, using default version = 1\n        cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        # set, default version = 1, but manually override version = 2\n        cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n    def test_incr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n        self.assertIsNone(cache.get(\'answer\', version=3))\n\n        self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertIsNone(cache.get(\'answer\', version=2))\n        self.assertEqual(cache.get(\'answer\', version=3), 42)\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n\n        self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n\n        self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer\', version=2))\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\', version=2)\n\n    def test_custom_key_func(self):\n        # Two caches with different key functions aren\'t visible to each other\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n        self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n\n        caches[\'custom_key\'].set(\'answer2\', 42)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n        self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n\n    def test_cache_write_unpicklable_object(self):\n        fetch_middleware = FetchFromCacheMiddleware(empty_response)\n        fetch_middleware.cache = cache\n\n        request = self.factory.get(\'/cache/test\')\n        request._cache_update_cache = True\n        get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n        self.assertIsNone(get_cache_data)\n\n        content = \'Testing cookie serialization.\'\n\n        def get_response(req):\n            response = HttpResponse(content)\n            response.set_cookie(\'foo\', \'bar\')\n            return response\n\n        update_middleware = UpdateCacheMiddleware(get_response)\n        update_middleware.cache = cache\n        response = update_middleware(request)\n\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n        UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n    def test_add_fail_on_pickleerror(self):\n        # Shouldn\'t fail silently if trying to cache an unpicklable type.\n        with self.assertRaises(pickle.PickleError):\n            cache.add(\'unpicklable\', Unpicklable())\n\n    def test_set_fail_on_pickleerror(self):\n        with self.assertRaises(pickle.PickleError):\n            cache.set(\'unpicklable\', Unpicklable())\n\n    def test_get_or_set(self):\n        self.assertIsNone(cache.get(\'projector\'))\n        self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n        self.assertEqual(cache.get(\'projector\'), 42)\n        self.assertIsNone(cache.get_or_set(\'null\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'value\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n\n    def test_get_or_set_callable_returning_none(self):\n        self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n        # Previous get_or_set() doesn\'t store None in the cache.\n        self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n\n    def test_get_or_set_version(self):\n        msg = "get_or_set() missing 1 required positional argument: \'default\'"\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\')\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\', version=1)\n        self.assertIsNone(cache.get(\'brian\', version=1))\n        self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        self.assertIsNone(cache.get(\'brian\', version=3))\n\n    def test_get_or_set_racing(self):\n        with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n            # Simulate cache.add() failing to add a value. In that case, the\n            # default value should be returned.\n            cache_add.return_value = False\n            self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n\n\n@override_settings(CACHES=caches_setting_for_tests(\n    BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n    # Spaces are used in the table name to ensure quoting/escaping is working\n    LOCATION=\'test cache table\'\n))\nclass DBCacheTests(BaseCacheTests, TransactionTestCase):\n\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        # The super calls needs to happen first for the settings override.\n        super().setUp()\n        self.create_table()\n\n    def tearDown(self):\n        # The super call needs to happen first because it uses the database.\n        super().tearDown()\n        self.drop_table()\n\n    def create_table(self):\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def drop_table(self):\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test cache table\')\n            cursor.execute(\'DROP TABLE %s\' % table_name)\n\n    def test_get_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2})\n        cache.set(\'expired\', \'expired\', 0.01)\n        with self.assertNumQueries(1):\n            self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n        time.sleep(0.02)\n        with self.assertNumQueries(2):\n            self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n\n    def test_delete_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n        with self.assertNumQueries(1):\n            cache.delete_many([\'a\', \'b\', \'c\'])\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 18)\n\n    def test_second_call_doesnt_crash(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', stdout=out)\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n\n    @override_settings(CACHES=caches_setting_for_tests(\n        BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n        # Use another table name to avoid the \'table already exists\' message.\n        LOCATION=\'createcachetable_dry_run_mode\'\n    ))\n    def test_createcachetable_dry_run_mode(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n        output = out.getvalue()\n        self.assertTrue(output.startswith("CREATE TABLE"))\n\n    def test_createcachetable_with_table_argument(self):\n        """\n        Delete and recreate cache table with legacy behavior (explicitly\n        specifying the table name).\n        """\n        self.drop_table()\n        out = io.StringIO()\n        management.call_command(\n            \'createcachetable\',\n            \'test cache table\',\n            verbosity=2,\n            stdout=out,\n        )\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n```\n\n#### Test Case 4\nThis test is similar to the previous one but focuses on `delete_many`. It is relevant because it also interacts with the database cache and could potentially trigger the culling mechanism, providing another angle to test the buggy behavior.\n\n```python\n# File: tests/cache/tests.py\nimport copy\nimport io\nimport os\nimport pickle\nimport re\nimport shutil\nimport tempfile\nimport threading\nimport time\nimport unittest\nfrom pathlib import Path\nfrom unittest import mock\n\nfrom django.conf import settings\nfrom django.core import management, signals\nfrom django.core.cache import (\n    DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n)\nfrom django.core.cache.backends.base import InvalidCacheBackendError\nfrom django.core.cache.utils import make_template_fragment_key\nfrom django.db import close_old_connections, connection, connections\nfrom django.http import (\n    HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n)\nfrom django.middleware.cache import (\n    CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n)\nfrom django.middleware.csrf import CsrfViewMiddleware\nfrom django.template import engines\nfrom django.template.context_processors import csrf\nfrom django.template.response import TemplateResponse\nfrom django.test import (\n    RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n    override_settings,\n)\nfrom django.test.signals import setting_changed\nfrom django.utils import timezone, translation\nfrom django.utils.cache import (\n    get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n)\nfrom django.views.decorators.cache import cache_control, cache_page\n\nfrom .models import Poll, expensive_calculation\n\n\ndef f():\n    return 42\n\n\nclass C:\n    def m(n):\n        return 24\n\n\nclass Unpicklable:\n    def __getstate__(self):\n        raise pickle.PickleError()\n\n\ndef empty_response(request):\n    return HttpResponse()\n\n\nKEY_ERRORS_WITH_MEMCACHED_MSG = (\n    \'Cache key contains characters that will cause errors if used with \'\n    \'memcached: %r\'\n)\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n    }\n})\nclass DummyCacheTests(SimpleTestCase):\n    # The Dummy cache backend doesn\'t really behave like a test backend,\n    # so it has its own test case.\n\n    def test_simple(self):\n        "Dummy cache backend ignores cache set calls"\n        cache.set("key", "value")\n        self.assertIsNone(cache.get("key"))\n\n    def test_add(self):\n        "Add doesn\'t do anything in dummy cache backend"\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), True)\n        self.assertIsNone(cache.get("addkey1"))\n\n    def test_non_existent(self):\n        "Nonexistent keys aren\'t found in the dummy cache backend"\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        "get_many returns nothing for the dummy cache backend"\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n\n    def test_get_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.get_many([\'key with spaces\'])\n\n    def test_delete(self):\n        "Cache deletion is transparently ignored on the dummy cache backend"\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertIsNone(cache.get("key1"))\n        self.assertIs(cache.delete("key1"), False)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_has_key(self):\n        "The has_key method doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), False)\n        self.assertIs(cache.has_key("goodbye1"), False)\n\n    def test_in(self):\n        "The in operator doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello2", "goodbye2")\n        self.assertNotIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        "Dummy cache values can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        "Dummy cache values can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_touch(self):\n        """Dummy cache can\'t do touch()."""\n        self.assertIs(cache.touch(\'whatever\'), False)\n\n    def test_data_types(self):\n        "All data types are ignored equally by the dummy cache"\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertIsNone(cache.get("stuff"))\n\n    def test_expiration(self):\n        "Expiration has no effect on the dummy cache"\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertIsNone(cache.get("expire2"))\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_unicode(self):\n        "Unicode values are ignored by the dummy cache"\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertIsNone(cache.get(key))\n\n    def test_set_many(self):\n        "set_many does nothing for the dummy cache backend"\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n\n    def test_set_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.set_many({\'key with spaces\': \'foo\'})\n\n    def test_delete_many(self):\n        "delete_many does nothing for the dummy cache backend"\n        cache.delete_many([\'a\', \'b\'])\n\n    def test_delete_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.delete_many({\'key with spaces\': \'foo\'})\n\n    def test_clear(self):\n        "clear does nothing for the dummy cache backend"\n        cache.clear()\n\n    def test_incr_version(self):\n        "Dummy cache versions can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        "Dummy cache versions can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\')\n\n    def test_get_or_set(self):\n        self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n        self.assertIsNone(cache.get_or_set(\'mykey\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'default\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n\n\ndef custom_key_func(key, key_prefix, version):\n    "A customized cache key function"\n    return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n\n\n_caches_setting_base = {\n    \'default\': {},\n    \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n    \'v2\': {\'VERSION\': 2},\n    \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n    \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n    \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n    \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n}\n\n\ndef caches_setting_for_tests(base=None, exclude=None, **params):\n    # `base` is used to pull in the memcached config from the original settings,\n    # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n    # should be omitted.\n    # `params` are test specific overrides and `_caches_settings_base` is the\n    # base config for the tests.\n    # This results in the following search order:\n    # params -> _caches_setting_base -> base\n    base = base or {}\n    exclude = exclude or set()\n    setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n    for key, cache_params in setting.items():\n        cache_params.update(_caches_setting_base[key])\n        cache_params.update(params)\n    return setting\n\n\nclass BaseCacheTests:\n    # A common set of tests to apply to all cache backends\n    factory = RequestFactory()\n\n    def tearDown(self):\n        cache.clear()\n\n    def test_simple(self):\n        # Simple cache set/get works\n        cache.set("key", "value")\n        self.assertEqual(cache.get("key"), "value")\n\n    def test_default_used_when_none_is_set(self):\n        """If None is cached, get() returns it instead of the default."""\n        cache.set(\'key_default_none\', None)\n        self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n\n    def test_add(self):\n        # A key can be added to a cache\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), False)\n        self.assertEqual(cache.get("addkey1"), "value")\n\n    def test_prefix(self):\n        # Test for same cache key conflicts between shared backend\n        cache.set(\'somekey\', \'value\')\n\n        # should not be set in the prefixed cache\n        self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n\n        caches[\'prefix\'].set(\'somekey\', \'value2\')\n\n        self.assertEqual(cache.get(\'somekey\'), \'value\')\n        self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n\n    def test_non_existent(self):\n        """Nonexistent cache keys return as None/default."""\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        # Multiple cache keys can be returned using get_many\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n        self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n\n    def test_delete(self):\n        # Cache keys can be deleted\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertIs(cache.delete("key1"), True)\n        self.assertIsNone(cache.get("key1"))\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_delete_nonexistent(self):\n        self.assertIs(cache.delete(\'nonexistent_key\'), False)\n\n    def test_has_key(self):\n        # The cache can be inspected for cache keys\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), True)\n        self.assertIs(cache.has_key("goodbye1"), False)\n        cache.set("no_expiry", "here", None)\n        self.assertIs(cache.has_key("no_expiry"), True)\n\n    def test_in(self):\n        # The in operator can be used to inspect cache contents\n        cache.set("hello2", "goodbye2")\n        self.assertIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        # Cache values can be incremented\n        cache.set(\'answer\', 41)\n        self.assertEqual(cache.incr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.incr(\'answer\', 10), 52)\n        self.assertEqual(cache.get(\'answer\'), 52)\n        self.assertEqual(cache.incr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        # Cache values can be decremented\n        cache.set(\'answer\', 43)\n        self.assertEqual(cache.decr(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.decr(\'answer\', 10), 32)\n        self.assertEqual(cache.get(\'answer\'), 32)\n        self.assertEqual(cache.decr(\'answer\', -10), 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_close(self):\n        self.assertTrue(hasattr(cache, \'close\'))\n        cache.close()\n\n    def test_data_types(self):\n        # Many different data types can be cached\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertEqual(cache.get("stuff"), stuff)\n\n    def test_cache_read_for_model_instance(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        my_poll = Poll.objects.create(question="Well?")\n        self.assertEqual(Poll.objects.count(), 1)\n        pub_date = my_poll.pub_date\n        cache.set(\'question\', my_poll)\n        cached_poll = cache.get(\'question\')\n        self.assertEqual(cached_poll.pub_date, pub_date)\n        # We only want the default expensive calculation run once\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_write_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache write\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        # cache set should not re-evaluate default functions\n        self.assertEqual(expensive_calculation.num_runs, 1)\n\n    def test_cache_read_for_model_instance_with_deferred(self):\n        # Don\'t want fields with callable as default to be called on cache read\n        expensive_calculation.num_runs = 0\n        Poll.objects.all().delete()\n        Poll.objects.create(question="What?")\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        defer_qs = Poll.objects.all().defer(\'question\')\n        self.assertEqual(defer_qs.count(), 1)\n        cache.set(\'deferred_queryset\', defer_qs)\n        self.assertEqual(expensive_calculation.num_runs, 1)\n        runs_before_cache_read = expensive_calculation.num_runs\n        cache.get(\'deferred_queryset\')\n        # We only want the default expensive calculation run on creation and set\n        self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n\n    def test_expiration(self):\n        # Cache values can be set to expire\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertEqual(cache.get("expire2"), "newvalue")\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_touch(self):\n        # cache.touch() updates the timeout.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n        time.sleep(3)\n        self.assertIs(cache.has_key(\'expire1\'), False)\n        # cache.touch() works without the timeout argument.\n        cache.set(\'expire1\', \'very quickly\', timeout=1)\n        self.assertIs(cache.touch(\'expire1\'), True)\n        time.sleep(2)\n        self.assertIs(cache.has_key(\'expire1\'), True)\n\n        self.assertIs(cache.touch(\'nonexistent\'), False)\n\n    def test_unicode(self):\n        # Unicode values can be cached\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        # Test `set`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `add`\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertIs(cache.delete(key), True)\n                self.assertIs(cache.add(key, value), True)\n                self.assertEqual(cache.get(key), value)\n\n        # Test `set_many`\n        for (key, value) in stuff.items():\n            self.assertIs(cache.delete(key), True)\n        cache.set_many(stuff)\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                self.assertEqual(cache.get(key), value)\n\n    def test_binary_string(self):\n        # Binary strings should be cacheable\n        from zlib import compress, decompress\n        value = \'value_to_be_compressed\'\n        compressed_value = compress(value.encode())\n\n        # Test set\n        cache.set(\'binary1\', compressed_value)\n        compressed_result = cache.get(\'binary1\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test add\n        self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n        compressed_result = cache.get(\'binary1-add\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n        # Test set_many\n        cache.set_many({\'binary1-set_many\': compressed_value})\n        compressed_result = cache.get(\'binary1-set_many\')\n        self.assertEqual(compressed_value, compressed_result)\n        self.assertEqual(value, decompress(compressed_result).decode())\n\n    def test_set_many(self):\n        # Multiple keys can be set using set_many\n        cache.set_many({"key1": "spam", "key2": "eggs"})\n        self.assertEqual(cache.get("key1"), "spam")\n        self.assertEqual(cache.get("key2"), "eggs")\n\n    def test_set_many_returns_empty_list_on_success(self):\n        """set_many() returns an empty list when all keys are inserted."""\n        failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertEqual(failing_keys, [])\n\n    def test_set_many_expiration(self):\n        # set_many takes a second ``timeout`` parameter\n        cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n        time.sleep(2)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_delete_many(self):\n        # Multiple keys can be deleted using delete_many\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n        cache.delete_many(["key1", "key2"])\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n        self.assertEqual(cache.get("key3"), "ham")\n\n    def test_clear(self):\n        # The cache can be emptied using clear\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        cache.clear()\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_long_timeout(self):\n        """\n        Follow memcached\'s convention where a timeout greater than 30 days is\n        treated as an absolute expiration timestamp instead of a relative\n        offset (#12399).\n        """\n        cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n    def test_forever_timeout(self):\n        """\n        Passing in None into timeout results in a value that is cached forever\n        """\n        cache.set(\'key1\', \'eggs\', None)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n        self.assertEqual(cache.get(\'key2\'), \'ham\')\n        self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n        self.assertEqual(cache.get(\'key1\'), \'eggs\')\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n        self.assertEqual(cache.get(\'key3\'), \'sausage\')\n        self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n\n        cache.set(\'key5\', \'belgian fries\', timeout=1)\n        self.assertIs(cache.touch(\'key5\', timeout=None), True)\n        time.sleep(2)\n        self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n\n    def test_zero_timeout(self):\n        """\n        Passing in zero into timeout results in a value that is not cached\n        """\n        cache.set(\'key1\', \'eggs\', 0)\n        self.assertIsNone(cache.get(\'key1\'))\n\n        self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n        self.assertIsNone(cache.get(\'key2\'))\n\n        cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n        self.assertIsNone(cache.get(\'key3\'))\n        self.assertIsNone(cache.get(\'key4\'))\n\n        cache.set(\'key5\', \'belgian fries\', timeout=5)\n        self.assertIs(cache.touch(\'key5\', timeout=0), True)\n        self.assertIsNone(cache.get(\'key5\'))\n\n    def test_float_timeout(self):\n        # Make sure a timeout given as a float doesn\'t crash anything.\n        cache.set("key1", "spam", 100.2)\n        self.assertEqual(cache.get("key1"), "spam")\n\n    def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n        try:\n            cull_cache = caches[cull_cache_name]\n        except InvalidCacheBackendError:\n            self.skipTest("Culling isn\'t implemented.")\n\n        # Create initial cache key entries. This will overflow the cache,\n        # causing a cull.\n        for i in range(1, initial_count):\n            cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n        count = 0\n        # Count how many keys are left in the cache.\n        for i in range(1, initial_count):\n            if cull_cache.has_key(\'cull%d\' % i):\n                count += 1\n        self.assertEqual(count, final_count)\n\n    def test_cull(self):\n        self._perform_cull_test(\'cull\', 50, 29)\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 19)\n\n    def _perform_invalid_key_test(self, key, expected_warning):\n        """\n        All the builtin backends should warn (except memcached that should\n        error) on keys that would be refused by memcached. This encourages\n        portable caching code without making it too difficult to use production\n        backends with more liberal key rules. Refs #6447.\n        """\n        # mimic custom ``make_key`` method being defined since the default will\n        # never show the below warnings\n        def func(key, *args):\n            return key\n\n        old_func = cache.key_func\n        cache.key_func = func\n\n        try:\n            with self.assertWarns(CacheKeyWarning) as cm:\n                cache.set(key, \'value\')\n            self.assertEqual(str(cm.warning), expected_warning)\n        finally:\n            cache.key_func = old_func\n\n    def test_invalid_key_characters(self):\n        # memcached doesn\'t allow whitespace or control characters in keys.\n        key = \'key with spaces and æ¸…\'\n        self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n\n    def test_invalid_key_length(self):\n        # memcached limits key length to 250.\n        key = (\'a\' * 250) + \'æ¸…\'\n        expected_warning = (\n            \'Cache key will cause errors if used with memcached: \'\n            \'%r (longer than %s)\' % (key, 250)\n        )\n        self._perform_invalid_key_test(key, expected_warning)\n\n    def test_cache_versioning_get_set(self):\n        # set, using default version = 1\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertEqual(cache.get(\'answer1\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer1\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n\n        # set, default version = 1, but manually override version = 2\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set(\'answer3\', 42)\n        self.assertIsNone(cache.get(\'answer3\'))\n        self.assertIsNone(cache.get(\'answer3\', version=1))\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set(\'answer4\', 42, version=1)\n        self.assertEqual(cache.get(\'answer4\'), 42)\n        self.assertEqual(cache.get(\'answer4\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer4\', version=2))\n\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n\n    def test_cache_versioning_add(self):\n\n        # add, default version = 1, but manually override version = 2\n        self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        # v2 add, using default version = 2\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n        self.assertIsNone(cache.get(\'answer2\', version=1))\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        # v2 add, default version = 2, but manually override version = 1\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 42)\n        self.assertEqual(cache.get(\'answer3\', version=2), 37)\n\n    def test_cache_versioning_has_key(self):\n        cache.set(\'answer1\', 42)\n\n        # has_key\n        self.assertIs(cache.has_key(\'answer1\'), True)\n        self.assertIs(cache.has_key(\'answer1\', version=1), True)\n        self.assertIs(cache.has_key(\'answer1\', version=2), False)\n\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n        self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n\n    def test_cache_versioning_delete(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertIs(cache.delete(\'answer1\'), True)\n        self.assertIsNone(cache.get(\'answer1\', version=1))\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertIs(cache.delete(\'answer2\', version=2), True)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer2\', version=2))\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertIsNone(cache.get(\'answer3\', version=2))\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n        self.assertIsNone(cache.get(\'answer4\', version=1))\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_incr_decr(self):\n        cache.set(\'answer1\', 37, version=1)\n        cache.set(\'answer1\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer1\'), 38)\n        self.assertEqual(cache.get(\'answer1\', version=1), 38)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n        self.assertEqual(cache.decr(\'answer1\'), 37)\n        self.assertEqual(cache.get(\'answer1\', version=1), 37)\n        self.assertEqual(cache.get(\'answer1\', version=2), 42)\n\n        cache.set(\'answer2\', 37, version=1)\n        cache.set(\'answer2\', 42, version=2)\n        self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 43)\n        self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n        self.assertEqual(cache.get(\'answer2\', version=1), 37)\n        self.assertEqual(cache.get(\'answer2\', version=2), 42)\n\n        cache.set(\'answer3\', 37, version=1)\n        cache.set(\'answer3\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 43)\n        self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n        self.assertEqual(cache.get(\'answer3\', version=1), 37)\n        self.assertEqual(cache.get(\'answer3\', version=2), 42)\n\n        cache.set(\'answer4\', 37, version=1)\n        cache.set(\'answer4\', 42, version=2)\n        self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=1), 38)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n        self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=1), 37)\n        self.assertEqual(cache.get(\'answer4\', version=2), 42)\n\n    def test_cache_versioning_get_set_many(self):\n        # set, using default version = 1\n        cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n\n        # set, default version = 1, but manually override version = 2\n        cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n\n        # v2 set, using default version = 2\n        caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n\n        # v2 set, default version = 2, but manually override version = 1\n        caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n        self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n\n    def test_incr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n        self.assertIsNone(cache.get(\'answer\', version=3))\n\n        self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertIsNone(cache.get(\'answer\', version=2))\n        self.assertEqual(cache.get(\'answer\', version=3), 42)\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n\n        self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        cache.set(\'answer\', 42, version=2)\n        self.assertIsNone(cache.get(\'answer\'))\n        self.assertIsNone(cache.get(\'answer\', version=1))\n        self.assertEqual(cache.get(\'answer\', version=2), 42)\n\n        self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n        self.assertEqual(cache.get(\'answer\'), 42)\n        self.assertEqual(cache.get(\'answer\', version=1), 42)\n        self.assertIsNone(cache.get(\'answer\', version=2))\n\n        caches[\'v2\'].set(\'answer2\', 42)\n        self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n\n        self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n        self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n        self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\', version=2)\n\n    def test_custom_key_func(self):\n        # Two caches with different key functions aren\'t visible to each other\n        cache.set(\'answer1\', 42)\n        self.assertEqual(cache.get(\'answer1\'), 42)\n        self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n        self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n\n        caches[\'custom_key\'].set(\'answer2\', 42)\n        self.assertIsNone(cache.get(\'answer2\'))\n        self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n        self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n\n    def test_cache_write_unpicklable_object(self):\n        fetch_middleware = FetchFromCacheMiddleware(empty_response)\n        fetch_middleware.cache = cache\n\n        request = self.factory.get(\'/cache/test\')\n        request._cache_update_cache = True\n        get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n        self.assertIsNone(get_cache_data)\n\n        content = \'Testing cookie serialization.\'\n\n        def get_response(req):\n            response = HttpResponse(content)\n            response.set_cookie(\'foo\', \'bar\')\n            return response\n\n        update_middleware = UpdateCacheMiddleware(get_response)\n        update_middleware.cache = cache\n        response = update_middleware(request)\n\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n        UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n        get_cache_data = fetch_middleware.process_request(request)\n        self.assertIsNotNone(get_cache_data)\n        self.assertEqual(get_cache_data.content, content.encode())\n        self.assertEqual(get_cache_data.cookies, response.cookies)\n\n    def test_add_fail_on_pickleerror(self):\n        # Shouldn\'t fail silently if trying to cache an unpicklable type.\n        with self.assertRaises(pickle.PickleError):\n            cache.add(\'unpicklable\', Unpicklable())\n\n    def test_set_fail_on_pickleerror(self):\n        with self.assertRaises(pickle.PickleError):\n            cache.set(\'unpicklable\', Unpicklable())\n\n    def test_get_or_set(self):\n        self.assertIsNone(cache.get(\'projector\'))\n        self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n        self.assertEqual(cache.get(\'projector\'), 42)\n        self.assertIsNone(cache.get_or_set(\'null\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'value\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n\n    def test_get_or_set_callable_returning_none(self):\n        self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n        # Previous get_or_set() doesn\'t store None in the cache.\n        self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n\n    def test_get_or_set_version(self):\n        msg = "get_or_set() missing 1 required positional argument: \'default\'"\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\')\n        with self.assertRaisesMessage(TypeError, msg):\n            cache.get_or_set(\'brian\', version=1)\n        self.assertIsNone(cache.get(\'brian\', version=1))\n        self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n        self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n        self.assertIsNone(cache.get(\'brian\', version=3))\n\n    def test_get_or_set_racing(self):\n        with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n            # Simulate cache.add() failing to add a value. In that case, the\n            # default value should be returned.\n            cache_add.return_value = False\n            self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n\n\n@override_settings(CACHES=caches_setting_for_tests(\n    BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n    # Spaces are used in the table name to ensure quoting/escaping is working\n    LOCATION=\'test cache table\'\n))\nclass DBCacheTests(BaseCacheTests, TransactionTestCase):\n\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        # The super calls needs to happen first for the settings override.\n        super().setUp()\n        self.create_table()\n\n    def tearDown(self):\n        # The super call needs to happen first because it uses the database.\n        super().tearDown()\n        self.drop_table()\n\n    def create_table(self):\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def drop_table(self):\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test cache table\')\n            cursor.execute(\'DROP TABLE %s\' % table_name)\n\n    def test_get_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2})\n        cache.set(\'expired\', \'expired\', 0.01)\n        with self.assertNumQueries(1):\n            self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n        time.sleep(0.02)\n        with self.assertNumQueries(2):\n            self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n\n    def test_delete_many_num_queries(self):\n        cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n        with self.assertNumQueries(1):\n            cache.delete_many([\'a\', \'b\', \'c\'])\n\n    def test_zero_cull(self):\n        self._perform_cull_test(\'zero_cull\', 50, 18)\n\n    def test_second_call_doesnt_crash(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', stdout=out)\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n\n    @override_settings(CACHES=caches_setting_for_tests(\n        BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n        # Use another table name to avoid the \'table already exists\' message.\n        LOCATION=\'createcachetable_dry_run_mode\'\n    ))\n    def test_createcachetable_dry_run_mode(self):\n        out = io.StringIO()\n        management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n        output = out.getvalue()\n        self.assertTrue(output.startswith("CREATE TABLE"))\n\n    def test_createcachetable_with_table_argument(self):\n        """\n        Delete and recreate cache table with legacy behavior (explicitly\n        specifying the table name).\n        """\n        self.drop_table()\n        out = io.StringIO()\n        management.call_command(\n            \'createcachetable\',\n            \'test cache table\',\n            verbosity=2,\n            stdout=out,\n        )\n        self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n```\n\n#### Test Case 5\nThis test is relevant because it deals with a multi-database setup and database routers. This could expose edge cases in the culling logic when the cache table is on a different database than the default one. The bug might be related to how the cursor is handled in a multi-db environment.\n\n```python\n# File: tests/cache/tests.py\nimport copy\nimport io\nimport os\nimport pickle\nimport re\nimport shutil\nimport tempfile\nimport threading\nimport time\nimport unittest\nfrom pathlib import Path\nfrom unittest import mock\n\nfrom django.conf import settings\nfrom django.core import management, signals\nfrom django.core.cache import (\n    DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n)\nfrom django.core.cache.backends.base import InvalidCacheBackendError\nfrom django.core.cache.utils import make_template_fragment_key\nfrom django.db import close_old_connections, connection, connections\nfrom django.http import (\n    HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n)\nfrom django.middleware.cache import (\n    CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n)\nfrom django.middleware.csrf import CsrfViewMiddleware\nfrom django.template import engines\nfrom django.template.context_processors import csrf\nfrom django.template.response import TemplateResponse\nfrom django.test import (\n    RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n    override_settings,\n)\nfrom django.test.signals import setting_changed\nfrom django.utils import timezone, translation\nfrom django.utils.cache import (\n    get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n)\nfrom django.views.decorators.cache import cache_control, cache_page\n\nfrom .models import Poll, expensive_calculation\n\n\ndef f():\n    return 42\n\n\nclass C:\n    def m(n):\n        return 24\n\n\nclass Unpicklable:\n    def __getstate__(self):\n        raise pickle.PickleError()\n\n\ndef empty_response(request):\n    return HttpResponse()\n\n\nKEY_ERRORS_WITH_MEMCACHED_MSG = (\n    \'Cache key contains characters that will cause errors if used with \'\n    \'memcached: %r\'\n)\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n    }\n})\nclass DummyCacheTests(SimpleTestCase):\n    # The Dummy cache backend doesn\'t really behave like a test backend,\n    # so it has its own test case.\n\n    def test_simple(self):\n        "Dummy cache backend ignores cache set calls"\n        cache.set("key", "value")\n        self.assertIsNone(cache.get("key"))\n\n    def test_add(self):\n        "Add doesn\'t do anything in dummy cache backend"\n        self.assertIs(cache.add("addkey1", "value"), True)\n        self.assertIs(cache.add("addkey1", "newvalue"), True)\n        self.assertIsNone(cache.get("addkey1"))\n\n    def test_non_existent(self):\n        "Nonexistent keys aren\'t found in the dummy cache backend"\n        self.assertIsNone(cache.get("does_not_exist"))\n        self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n\n    def test_get_many(self):\n        "get_many returns nothing for the dummy cache backend"\n        cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n        self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n        self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n\n    def test_get_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.get_many([\'key with spaces\'])\n\n    def test_delete(self):\n        "Cache deletion is transparently ignored on the dummy cache backend"\n        cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n        self.assertIsNone(cache.get("key1"))\n        self.assertIs(cache.delete("key1"), False)\n        self.assertIsNone(cache.get("key1"))\n        self.assertIsNone(cache.get("key2"))\n\n    def test_has_key(self):\n        "The has_key method doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello1", "goodbye1")\n        self.assertIs(cache.has_key("hello1"), False)\n        self.assertIs(cache.has_key("goodbye1"), False)\n\n    def test_in(self):\n        "The in operator doesn\'t ever return True for the dummy cache backend"\n        cache.set("hello2", "goodbye2")\n        self.assertNotIn("hello2", cache)\n        self.assertNotIn("goodbye2", cache)\n\n    def test_incr(self):\n        "Dummy cache values can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr(\'does_not_exist\')\n\n    def test_decr(self):\n        "Dummy cache values can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr(\'does_not_exist\')\n\n    def test_touch(self):\n        """Dummy cache can\'t do touch()."""\n        self.assertIs(cache.touch(\'whatever\'), False)\n\n    def test_data_types(self):\n        "All data types are ignored equally by the dummy cache"\n        stuff = {\n            \'string\': \'this is a string\',\n            \'int\': 42,\n            \'list\': [1, 2, 3, 4],\n            \'tuple\': (1, 2, 3, 4),\n            \'dict\': {\'A\': 1, \'B\': 2},\n            \'function\': f,\n            \'class\': C,\n        }\n        cache.set("stuff", stuff)\n        self.assertIsNone(cache.get("stuff"))\n\n    def test_expiration(self):\n        "Expiration has no effect on the dummy cache"\n        cache.set(\'expire1\', \'very quickly\', 1)\n        cache.set(\'expire2\', \'very quickly\', 1)\n        cache.set(\'expire3\', \'very quickly\', 1)\n\n        time.sleep(2)\n        self.assertIsNone(cache.get("expire1"))\n\n        self.assertIs(cache.add("expire2", "newvalue"), True)\n        self.assertIsNone(cache.get("expire2"))\n        self.assertIs(cache.has_key("expire3"), False)\n\n    def test_unicode(self):\n        "Unicode values are ignored by the dummy cache"\n        stuff = {\n            \'ascii\': \'ascii_value\',\n            \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n            \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n            \'ascii2\': {\'x\': 1}\n        }\n        for (key, value) in stuff.items():\n            with self.subTest(key=key):\n                cache.set(key, value)\n                self.assertIsNone(cache.get(key))\n\n    def test_set_many(self):\n        "set_many does nothing for the dummy cache backend"\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n        self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n\n    def test_set_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.set_many({\'key with spaces\': \'foo\'})\n\n    def test_delete_many(self):\n        "delete_many does nothing for the dummy cache backend"\n        cache.delete_many([\'a\', \'b\'])\n\n    def test_delete_many_invalid_key(self):\n        msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n        with self.assertWarnsMessage(CacheKeyWarning, msg):\n            cache.delete_many({\'key with spaces\': \'foo\'})\n\n    def test_clear(self):\n        "clear does nothing for the dummy cache backend"\n        cache.clear()\n\n    def test_incr_version(self):\n        "Dummy cache versions can\'t be incremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.incr_version(\'does_not_exist\')\n\n    def test_decr_version(self):\n        "Dummy cache versions can\'t be decremented"\n        cache.set(\'answer\', 42)\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'answer\')\n        with self.assertRaises(ValueError):\n            cache.decr_version(\'does_not_exist\')\n\n    def test_get_or_set(self):\n        self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n        self.assertIsNone(cache.get_or_set(\'mykey\', None))\n\n    def test_get_or_set_callable(self):\n        def my_callable():\n            return \'default\'\n\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n        self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n\n\ndef custom_key_func(key, key_prefix, version):\n    "A customized cache key function"\n    return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n\n\n_caches_setting_base = {\n    \'default\': {},\n    \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n    \'v2\': {\'VERSION\': 2},\n    \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n    \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n    \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n    \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n}\n\n\ndef caches_setting_for_tests(base=None, exclude=None, **params):\n    # `base` is used to pull in the memcached config from the original settings,\n    # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n    # should be omitted.\n    # `params` are test specific overrides and `_caches_settings_base` is the\n    # base config for the tests.\n    # This results in the following search order:\n    # params -> _caches_setting_base -> base\n    base = base or {}\n    exclude = exclude or set()\n    setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n    for key, cache_params in setting.items():\n        cache_params.update(_caches_setting_base[key])\n        cache_params.update(params)\n    return setting\n\n\nclass DBCacheRouter:\n    """A router that puts the cache table on the \'other\' database."""\n\n    def db_for_read(self, model, **hints):\n        if model._meta.app_label == \'django_cache\':\n            return \'other\'\n        return None\n\n    def db_for_write(self, model, **hints):\n        if model._meta.app_label == \'django_cache\':\n            return \'other\'\n        return None\n\n    def allow_migrate(self, db, app_label, **hints):\n        if app_label == \'django_cache\':\n            return db == \'other\'\n        return None\n\n\n@override_settings(\n    CACHES={\n        \'default\': {\n            \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n            \'LOCATION\': \'my_cache_table\',\n        },\n    },\n)\nclass CreateCacheTableForDBCacheTests(TestCase):\n    databases = {\'default\', \'other\'}\n\n    @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])\n    def test_createcachetable_observes_database_router(self):\n        # cache table should not be created on \'default\'\n        with self.assertNumQueries(0, using=\'default\'):\n            management.call_command(\'createcachetable\', database=\'default\', verbosity=0)\n        # cache table should be created on \'other\'\n        # Queries:\n        #   1: check table doesn\'t already exist\n        #   2: create savepoint (if transactional DDL is supported)\n        #   3: create the table\n        #   4: create the index\n        #   5: release savepoint (if transactional DDL is supported)\n        num = 5 if connections[\'other\'].features.can_rollback_ddl else 3\n        with self.assertNumQueries(num, using=\'other\'):\n            management.call_command(\'createcachetable\', database=\'other\', verbosity=0)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 2031, 'end_index': 2239, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 2742, 'end_index': 2978, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 15132, 'end_index': 15449, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 15298, 'end_index': 15791, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 15661, 'end_index': 15999, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 16011, 'end_index': 16264, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 16279, 'end_index': 16662, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 17054, 'end_index': 17318, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 17252, 'end_index': 17530, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 18366, 'end_index': 18715, 'uri': 'https://www.programcreek.com/python/example/91440/django.core.cache.cache.set_many', 'title': '', 'license_': ''}, {'start_index': 19577, 'end_index': 19858, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 20140, 'end_index': 20408, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 25249, 'end_index': 25507, 'uri': 'https://build.opensuse.org/projects/home:mcalabkova:branches:OBS_Maintained:python-Django1/packages/python-Django1.openSUSE_Backports_SLE-15-SP5_Update/files/CVE-2020-13254.patch?expand=0', 'title': '', 'license_': ''}, {'start_index': 26471, 'end_index': 28340, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 33829, 'end_index': 34217, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 34412, 'end_index': 34872, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 35886, 'end_index': 36240, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 37799, 'end_index': 38466, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 38355, 'end_index': 38868, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 41462, 'end_index': 41749, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 41609, 'end_index': 41854, 'uri': 'https://github.com/grantjenks/python-diskcache/issues/210', 'title': '', 'license_': ''}, {'start_index': 46354, 'end_index': 46562, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 47065, 'end_index': 47301, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 59455, 'end_index': 59772, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 59621, 'end_index': 60114, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 59984, 'end_index': 60322, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 60334, 'end_index': 60587, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 60602, 'end_index': 60985, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 61377, 'end_index': 61641, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 61575, 'end_index': 61853, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 62689, 'end_index': 63038, 'uri': 'https://www.programcreek.com/python/example/91440/django.core.cache.cache.set_many', 'title': '', 'license_': ''}, {'start_index': 63900, 'end_index': 64181, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 64463, 'end_index': 64731, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 69572, 'end_index': 69830, 'uri': 'https://build.opensuse.org/projects/home:mcalabkova:branches:OBS_Maintained:python-Django1/packages/python-Django1.openSUSE_Backports_SLE-15-SP5_Update/files/CVE-2020-13254.patch?expand=0', 'title': '', 'license_': ''}, {'start_index': 70794, 'end_index': 72663, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 78152, 'end_index': 78540, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 78735, 'end_index': 79195, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 80209, 'end_index': 80563, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 82122, 'end_index': 82789, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 82678, 'end_index': 83191, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 85785, 'end_index': 86072, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 85932, 'end_index': 86177, 'uri': 'https://github.com/grantjenks/python-diskcache/issues/210', 'title': '', 'license_': ''}, {'start_index': 90738, 'end_index': 90946, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 91449, 'end_index': 91685, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 103839, 'end_index': 104156, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 104005, 'end_index': 104498, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 104368, 'end_index': 104706, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 104718, 'end_index': 104971, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 104986, 'end_index': 105369, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 105761, 'end_index': 106025, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 105959, 'end_index': 106237, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 107073, 'end_index': 107422, 'uri': 'https://www.programcreek.com/python/example/91440/django.core.cache.cache.set_many', 'title': '', 'license_': ''}, {'start_index': 108284, 'end_index': 108565, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 108847, 'end_index': 109115, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 113956, 'end_index': 114214, 'uri': 'https://build.opensuse.org/projects/home:mcalabkova:branches:OBS_Maintained:python-Django1/packages/python-Django1.openSUSE_Backports_SLE-15-SP5_Update/files/CVE-2020-13254.patch?expand=0', 'title': '', 'license_': ''}, {'start_index': 115178, 'end_index': 117047, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 122536, 'end_index': 122924, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 123119, 'end_index': 123579, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 124593, 'end_index': 124947, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 126506, 'end_index': 127173, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 127062, 'end_index': 127575, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 130169, 'end_index': 130456, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 130316, 'end_index': 130561, 'uri': 'https://github.com/grantjenks/python-diskcache/issues/210', 'title': '', 'license_': ''}, {'start_index': 135078, 'end_index': 135286, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 135789, 'end_index': 136025, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 148179, 'end_index': 148496, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 148345, 'end_index': 148838, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 148708, 'end_index': 149046, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 149058, 'end_index': 149311, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 149326, 'end_index': 149709, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 150101, 'end_index': 150365, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg44873.html', 'title': '', 'license_': ''}, {'start_index': 150299, 'end_index': 150577, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 151413, 'end_index': 151762, 'uri': 'https://www.programcreek.com/python/example/91440/django.core.cache.cache.set_many', 'title': '', 'license_': ''}, {'start_index': 152624, 'end_index': 152905, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 153187, 'end_index': 153455, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12429', 'title': '', 'license_': ''}, {'start_index': 158296, 'end_index': 158554, 'uri': 'https://build.opensuse.org/projects/home:mcalabkova:branches:OBS_Maintained:python-Django1/packages/python-Django1.openSUSE_Backports_SLE-15-SP5_Update/files/CVE-2020-13254.patch?expand=0', 'title': '', 'license_': ''}, {'start_index': 159518, 'end_index': 161387, 'uri': 'https://github.com/django-pymemcache/django-pymemcache', 'license_': 'Apache-2.0', 'title': ''}, {'start_index': 166876, 'end_index': 167264, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 167459, 'end_index': 167919, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 168933, 'end_index': 169287, 'uri': 'https://duoke360.com/sources/python/django.core.cache.cache/12432', 'title': '', 'license_': ''}, {'start_index': 170846, 'end_index': 171513, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 171402, 'end_index': 171915, 'uri': 'https://verytoolz.com/blog/5dc5e9dbc92/', 'title': '', 'license_': ''}, {'start_index': 174509, 'end_index': 174796, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 174656, 'end_index': 174901, 'uri': 'https://github.com/grantjenks/python-diskcache/issues/210', 'title': '', 'license_': ''}, {'start_index': 179467, 'end_index': 179675, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 180178, 'end_index': 180414, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 94029, 'candidates_token_count': 57436, 'total_token_count': 151750, 'cached_content_token_count': 83407, 'prompt_tokens_details': [{'modality': 1, 'token_count': 94519}], 'cache_tokens_details': [{'modality': 1, 'token_count': 83407}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 57436}], 'thoughts_token_count': 285}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0011623021794009718, 'model_name': 'gemini-2.5-pro'} id='run--107cd3a4-413d-4380-8678-d0c658786657-0' usage_metadata={'input_tokens': 94029, 'output_tokens': 57436, 'total_tokens': 151750, 'input_token_details': {'cache_read': 83407}, 'output_token_details': {'reasoning': 285}}
2025-10-06 14:22:07,816 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 14:22:07,817 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
cache.backends.db._cull sometimes fails with 'NoneType' object is not subscriptable

Issue description: 
Description
	 
		(last modified by Guillermo BonvehÃ­)
	 
I'm sporadically getting some cache errors using database backend.
The error is: 'NoneType' object is not subscriptable
And the backtrace:
/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response
/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render
/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback
/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response
/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull
This is using Django 2.2.11 but I see the same code is in master.
â€‹https://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270
				cursor.execute(
					connection.ops.cache_key_culling_sql() % table,
					[cull_num])
				cursor.execute("DELETE FROM %s "
							 "WHERE cache_key < %%s" % table,
							 [cursor.fetchone()[0]])
From what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.
I guess a simple check to see if it contains data would be enough, may apply for an easy picking.
Edit: Wording

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/cache/tests.py
Line number range: 1 - 500
Content:
1. # Unit tests for cache framework
2. # Uses whatever cache backend is set in the test settings file.
3. import copy
4. import io
5. import os
6. import pickle
7. import re
8. import shutil
9. import tempfile
10. import threading
11. import time
12. import unittest
13. from pathlib import Path
14. from unittest import mock
15. 
16. from django.conf import settings
17. from django.core import management, signals
18. from django.core.cache import (
19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,
20. )
21. from django.core.cache.backends.base import InvalidCacheBackendError
22. from django.core.cache.utils import make_template_fragment_key
23. from django.db import close_old_connections, connection, connections
24. from django.http import (
25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,
26. )
27. from django.middleware.cache import (
28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,
29. )
30. from django.middleware.csrf import CsrfViewMiddleware
31. from django.template import engines
32. from django.template.context_processors import csrf
33. from django.template.response import TemplateResponse
34. from django.test import (
35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,
36.     override_settings,
37. )
38. from django.test.signals import setting_changed
39. from django.utils import timezone, translation
40. from django.utils.cache import (
41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,
42. )
43. from django.views.decorators.cache import cache_control, cache_page
44. 
45. from .models import Poll, expensive_calculation
46. 
47. 
48. # functions/classes for complex data type tests
49. def f():
50.     return 42
51. 
52. 
53. class C:
54.     def m(n):
55.         return 24
56. 
57. 
58. class Unpicklable:
59.     def __getstate__(self):
60.         raise pickle.PickleError()
61. 
62. 
63. def empty_response(request):
64.     return HttpResponse()
65. 
66. 
67. KEY_ERRORS_WITH_MEMCACHED_MSG = (
68.     'Cache key contains characters that will cause errors if used with '
69.     'memcached: %r'
70. )
71. 
72. 
73. @override_settings(CACHES={
74.     'default': {
75.         'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
76.     }
77. })
78. class DummyCacheTests(SimpleTestCase):
79.     # The Dummy cache backend doesn't really behave like a test backend,
80.     # so it has its own test case.
81. 
82.     def test_simple(self):
83.         "Dummy cache backend ignores cache set calls"
84.         cache.set("key", "value")
85.         self.assertIsNone(cache.get("key"))
86. 
87.     def test_add(self):
88.         "Add doesn't do anything in dummy cache backend"
89.         self.assertIs(cache.add("addkey1", "value"), True)
90.         self.assertIs(cache.add("addkey1", "newvalue"), True)
91.         self.assertIsNone(cache.get("addkey1"))
92. 
93.     def test_non_existent(self):
94.         "Nonexistent keys aren't found in the dummy cache backend"
95.         self.assertIsNone(cache.get("does_not_exist"))
96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
97. 
98.     def test_get_many(self):
99.         "get_many returns nothing for the dummy cache backend"
100.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
101.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {})
102.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {})
103. 
104.     def test_get_many_invalid_key(self):
105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
106.         with self.assertWarnsMessage(CacheKeyWarning, msg):
107.             cache.get_many(['key with spaces'])
108. 
109.     def test_delete(self):
110.         "Cache deletion is transparently ignored on the dummy cache backend"
111.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
112.         self.assertIsNone(cache.get("key1"))
113.         self.assertIs(cache.delete("key1"), False)
114.         self.assertIsNone(cache.get("key1"))
115.         self.assertIsNone(cache.get("key2"))
116. 
117.     def test_has_key(self):
118.         "The has_key method doesn't ever return True for the dummy cache backend"
119.         cache.set("hello1", "goodbye1")
120.         self.assertIs(cache.has_key("hello1"), False)
121.         self.assertIs(cache.has_key("goodbye1"), False)
122. 
123.     def test_in(self):
124.         "The in operator doesn't ever return True for the dummy cache backend"
125.         cache.set("hello2", "goodbye2")
126.         self.assertNotIn("hello2", cache)
127.         self.assertNotIn("goodbye2", cache)
128. 
129.     def test_incr(self):
130.         "Dummy cache values can't be incremented"
131.         cache.set('answer', 42)
132.         with self.assertRaises(ValueError):
133.             cache.incr('answer')
134.         with self.assertRaises(ValueError):
135.             cache.incr('does_not_exist')
136. 
137.     def test_decr(self):
138.         "Dummy cache values can't be decremented"
139.         cache.set('answer', 42)
140.         with self.assertRaises(ValueError):
141.             cache.decr('answer')
142.         with self.assertRaises(ValueError):
143.             cache.decr('does_not_exist')
144. 
145.     def test_touch(self):
146.         """Dummy cache can't do touch()."""
147.         self.assertIs(cache.touch('whatever'), False)
148. 
149.     def test_data_types(self):
150.         "All data types are ignored equally by the dummy cache"
151.         stuff = {
152.             'string': 'this is a string',
153.             'int': 42,
154.             'list': [1, 2, 3, 4],
155.             'tuple': (1, 2, 3, 4),
156.             'dict': {'A': 1, 'B': 2},
157.             'function': f,
158.             'class': C,
159.         }
160.         cache.set("stuff", stuff)
161.         self.assertIsNone(cache.get("stuff"))
162. 
163.     def test_expiration(self):
164.         "Expiration has no effect on the dummy cache"
165.         cache.set('expire1', 'very quickly', 1)
166.         cache.set('expire2', 'very quickly', 1)
167.         cache.set('expire3', 'very quickly', 1)
168. 
169.         time.sleep(2)
170.         self.assertIsNone(cache.get("expire1"))
171. 
172.         self.assertIs(cache.add("expire2", "newvalue"), True)
173.         self.assertIsNone(cache.get("expire2"))
174.         self.assertIs(cache.has_key("expire3"), False)
175. 
176.     def test_unicode(self):
177.         "Unicode values are ignored by the dummy cache"
178.         stuff = {
179.             'ascii': 'ascii_value',
180.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
181.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
182.             'ascii2': {'x': 1}
183.         }
184.         for (key, value) in stuff.items():
185.             with self.subTest(key=key):
186.                 cache.set(key, value)
187.                 self.assertIsNone(cache.get(key))
188. 
189.     def test_set_many(self):
190.         "set_many does nothing for the dummy cache backend"
191.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}), [])
192.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}, timeout=2, version='1'), [])
193. 
194.     def test_set_many_invalid_key(self):
195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
196.         with self.assertWarnsMessage(CacheKeyWarning, msg):
197.             cache.set_many({'key with spaces': 'foo'})
198. 
199.     def test_delete_many(self):
200.         "delete_many does nothing for the dummy cache backend"
201.         cache.delete_many(['a', 'b'])
202. 
203.     def test_delete_many_invalid_key(self):
204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
205.         with self.assertWarnsMessage(CacheKeyWarning, msg):
206.             cache.delete_many({'key with spaces': 'foo'})
207. 
208.     def test_clear(self):
209.         "clear does nothing for the dummy cache backend"
210.         cache.clear()
211. 
212.     def test_incr_version(self):
213.         "Dummy cache versions can't be incremented"
214.         cache.set('answer', 42)
215.         with self.assertRaises(ValueError):
216.             cache.incr_version('answer')
217.         with self.assertRaises(ValueError):
218.             cache.incr_version('does_not_exist')
219. 
220.     def test_decr_version(self):
221.         "Dummy cache versions can't be decremented"
222.         cache.set('answer', 42)
223.         with self.assertRaises(ValueError):
224.             cache.decr_version('answer')
225.         with self.assertRaises(ValueError):
226.             cache.decr_version('does_not_exist')
227. 
228.     def test_get_or_set(self):
229.         self.assertEqual(cache.get_or_set('mykey', 'default'), 'default')
230.         self.assertIsNone(cache.get_or_set('mykey', None))
231. 
232.     def test_get_or_set_callable(self):
233.         def my_callable():
234.             return 'default'
235. 
236.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'default')
237.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'default')
238. 
239. 
240. def custom_key_func(key, key_prefix, version):
241.     "A customized cache key function"
242.     return 'CUSTOM-' + '-'.join([key_prefix, str(version), key])
243. 
244. 
245. _caches_setting_base = {
246.     'default': {},
247.     'prefix': {'KEY_PREFIX': 'cacheprefix{}'.format(os.getpid())},
248.     'v2': {'VERSION': 2},
249.     'custom_key': {'KEY_FUNCTION': custom_key_func},
250.     'custom_key2': {'KEY_FUNCTION': 'cache.tests.custom_key_func'},
251.     'cull': {'OPTIONS': {'MAX_ENTRIES': 30}},
252.     'zero_cull': {'OPTIONS': {'CULL_FREQUENCY': 0, 'MAX_ENTRIES': 30}},
253. }
254. 
255. 
256. def caches_setting_for_tests(base=None, exclude=None, **params):
257.     # `base` is used to pull in the memcached config from the original settings,
258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys
259.     # should be omitted.
260.     # `params` are test specific overrides and `_caches_settings_base` is the
261.     # base config for the tests.
262.     # This results in the following search order:
263.     # params -> _caches_setting_base -> base
264.     base = base or {}
265.     exclude = exclude or set()
266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}
267.     for key, cache_params in setting.items():
268.         cache_params.update(_caches_setting_base[key])
269.         cache_params.update(params)
270.     return setting
271. 
272. 
273. class BaseCacheTests:
274.     # A common set of tests to apply to all cache backends
275.     factory = RequestFactory()
276. 
277.     def tearDown(self):
278.         cache.clear()
279. 
280.     def test_simple(self):
281.         # Simple cache set/get works
282.         cache.set("key", "value")
283.         self.assertEqual(cache.get("key"), "value")
284. 
285.     def test_default_used_when_none_is_set(self):
286.         """If None is cached, get() returns it instead of the default."""
287.         cache.set('key_default_none', None)
288.         self.assertIsNone(cache.get('key_default_none', default='default'))
289. 
290.     def test_add(self):
291.         # A key can be added to a cache
292.         self.assertIs(cache.add("addkey1", "value"), True)
293.         self.assertIs(cache.add("addkey1", "newvalue"), False)
294.         self.assertEqual(cache.get("addkey1"), "value")
295. 
296.     def test_prefix(self):
297.         # Test for same cache key conflicts between shared backend
298.         cache.set('somekey', 'value')
299. 
300.         # should not be set in the prefixed cache
301.         self.assertIs(caches['prefix'].has_key('somekey'), False)
302. 
303.         caches['prefix'].set('somekey', 'value2')
304. 
305.         self.assertEqual(cache.get('somekey'), 'value')
306.         self.assertEqual(caches['prefix'].get('somekey'), 'value2')
307. 
308.     def test_non_existent(self):
309.         """Nonexistent cache keys return as None/default."""
310.         self.assertIsNone(cache.get("does_not_exist"))
311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
312. 
313.     def test_get_many(self):
314.         # Multiple cache keys can be returned using get_many
315.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
316.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {'a': 'a', 'c': 'c', 'd': 'd'})
317.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {'a': 'a', 'b': 'b'})
318.         self.assertEqual(cache.get_many(iter(['a', 'b', 'e'])), {'a': 'a', 'b': 'b'})
319. 
320.     def test_delete(self):
321.         # Cache keys can be deleted
322.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
323.         self.assertEqual(cache.get("key1"), "spam")
324.         self.assertIs(cache.delete("key1"), True)
325.         self.assertIsNone(cache.get("key1"))
326.         self.assertEqual(cache.get("key2"), "eggs")
327. 
328.     def test_delete_nonexistent(self):
329.         self.assertIs(cache.delete('nonexistent_key'), False)
330. 
331.     def test_has_key(self):
332.         # The cache can be inspected for cache keys
333.         cache.set("hello1", "goodbye1")
334.         self.assertIs(cache.has_key("hello1"), True)
335.         self.assertIs(cache.has_key("goodbye1"), False)
336.         cache.set("no_expiry", "here", None)
337.         self.assertIs(cache.has_key("no_expiry"), True)
338. 
339.     def test_in(self):
340.         # The in operator can be used to inspect cache contents
341.         cache.set("hello2", "goodbye2")
342.         self.assertIn("hello2", cache)
343.         self.assertNotIn("goodbye2", cache)
344. 
345.     def test_incr(self):
346.         # Cache values can be incremented
347.         cache.set('answer', 41)
348.         self.assertEqual(cache.incr('answer'), 42)
349.         self.assertEqual(cache.get('answer'), 42)
350.         self.assertEqual(cache.incr('answer', 10), 52)
351.         self.assertEqual(cache.get('answer'), 52)
352.         self.assertEqual(cache.incr('answer', -10), 42)
353.         with self.assertRaises(ValueError):
354.             cache.incr('does_not_exist')
355. 
356.     def test_decr(self):
357.         # Cache values can be decremented
358.         cache.set('answer', 43)
359.         self.assertEqual(cache.decr('answer'), 42)
360.         self.assertEqual(cache.get('answer'), 42)
361.         self.assertEqual(cache.decr('answer', 10), 32)
362.         self.assertEqual(cache.get('answer'), 32)
363.         self.assertEqual(cache.decr('answer', -10), 42)
364.         with self.assertRaises(ValueError):
365.             cache.decr('does_not_exist')
366. 
367.     def test_close(self):
368.         self.assertTrue(hasattr(cache, 'close'))
369.         cache.close()
370. 
371.     def test_data_types(self):
372.         # Many different data types can be cached
373.         stuff = {
374.             'string': 'this is a string',
375.             'int': 42,
376.             'list': [1, 2, 3, 4],
377.             'tuple': (1, 2, 3, 4),
378.             'dict': {'A': 1, 'B': 2},
379.             'function': f,
380.             'class': C,
381.         }
382.         cache.set("stuff", stuff)
383.         self.assertEqual(cache.get("stuff"), stuff)
384. 
385.     def test_cache_read_for_model_instance(self):
386.         # Don't want fields with callable as default to be called on cache read
387.         expensive_calculation.num_runs = 0
388.         Poll.objects.all().delete()
389.         my_poll = Poll.objects.create(question="Well?")
390.         self.assertEqual(Poll.objects.count(), 1)
391.         pub_date = my_poll.pub_date
392.         cache.set('question', my_poll)
393.         cached_poll = cache.get('question')
394.         self.assertEqual(cached_poll.pub_date, pub_date)
395.         # We only want the default expensive calculation run once
396.         self.assertEqual(expensive_calculation.num_runs, 1)
397. 
398.     def test_cache_write_for_model_instance_with_deferred(self):
399.         # Don't want fields with callable as default to be called on cache write
400.         expensive_calculation.num_runs = 0
401.         Poll.objects.all().delete()
402.         Poll.objects.create(question="What?")
403.         self.assertEqual(expensive_calculation.num_runs, 1)
404.         defer_qs = Poll.objects.all().defer('question')
405.         self.assertEqual(defer_qs.count(), 1)
406.         self.assertEqual(expensive_calculation.num_runs, 1)
407.         cache.set('deferred_queryset', defer_qs)
408.         # cache set should not re-evaluate default functions
409.         self.assertEqual(expensive_calculation.num_runs, 1)
410. 
411.     def test_cache_read_for_model_instance_with_deferred(self):
412.         # Don't want fields with callable as default to be called on cache read
413.         expensive_calculation.num_runs = 0
414.         Poll.objects.all().delete()
415.         Poll.objects.create(question="What?")
416.         self.assertEqual(expensive_calculation.num_runs, 1)
417.         defer_qs = Poll.objects.all().defer('question')
418.         self.assertEqual(defer_qs.count(), 1)
419.         cache.set('deferred_queryset', defer_qs)
420.         self.assertEqual(expensive_calculation.num_runs, 1)
421.         runs_before_cache_read = expensive_calculation.num_runs
422.         cache.get('deferred_queryset')
423.         # We only want the default expensive calculation run on creation and set
424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)
425. 
426.     def test_expiration(self):
427.         # Cache values can be set to expire
428.         cache.set('expire1', 'very quickly', 1)
429.         cache.set('expire2', 'very quickly', 1)
430.         cache.set('expire3', 'very quickly', 1)
431. 
432.         time.sleep(2)
433.         self.assertIsNone(cache.get("expire1"))
434. 
435.         self.assertIs(cache.add("expire2", "newvalue"), True)
436.         self.assertEqual(cache.get("expire2"), "newvalue")
437.         self.assertIs(cache.has_key("expire3"), False)
438. 
439.     def test_touch(self):
440.         # cache.touch() updates the timeout.
441.         cache.set('expire1', 'very quickly', timeout=1)
442.         self.assertIs(cache.touch('expire1', timeout=4), True)
443.         time.sleep(2)
444.         self.assertIs(cache.has_key('expire1'), True)
445.         time.sleep(3)
446.         self.assertIs(cache.has_key('expire1'), False)
447.         # cache.touch() works without the timeout argument.
448.         cache.set('expire1', 'very quickly', timeout=1)
449.         self.assertIs(cache.touch('expire1'), True)
450.         time.sleep(2)
451.         self.assertIs(cache.has_key('expire1'), True)
452. 
453.         self.assertIs(cache.touch('nonexistent'), False)
454. 
455.     def test_unicode(self):
456.         # Unicode values can be cached
457.         stuff = {
458.             'ascii': 'ascii_value',
459.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
460.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
461.             'ascii2': {'x': 1}
462.         }
463.         # Test `set`
464.         for (key, value) in stuff.items():
465.             with self.subTest(key=key):
466.                 cache.set(key, value)
467.                 self.assertEqual(cache.get(key), value)
468. 
469.         # Test `add`
470.         for (key, value) in stuff.items():
471.             with self.subTest(key=key):
472.                 self.assertIs(cache.delete(key), True)
473.                 self.assertIs(cache.add(key, value), True)
474.                 self.assertEqual(cache.get(key), value)
475. 
476.         # Test `set_many`
477.         for (key, value) in stuff.items():
478.             self.assertIs(cache.delete(key), True)
479.         cache.set_many(stuff)
480.         for (key, value) in stuff.items():
481.             with self.subTest(key=key):
482.                 self.assertEqual(cache.get(key), value)
483. 
484.     def test_binary_string(self):
485.         # Binary strings should be cacheable
486.         from zlib import compress, decompress
487.         value = 'value_to_be_compressed'
488.         compressed_value = compress(value.encode())
489. 
490.         # Test set
491.         cache.set('binary1', compressed_value)
492.         compressed_result = cache.get('binary1')
493.         self.assertEqual(compressed_value, compressed_result)
494.         self.assertEqual(value, decompress(compressed_result).decode())
495. 
496.         # Test add
497.         self.assertIs(cache.add('binary1-add', compressed_value), True)
498.         compressed_result = cache.get('binary1-add')
499.         self.assertEqual(compressed_value, compressed_result)
500.         self.assertEqual(value, decompress(compressed_result).decode())

File: tests/cache/tests.py
Line number range: 501 - 1001
Content:
501. 
502.         # Test set_many
503.         cache.set_many({'binary1-set_many': compressed_value})
504.         compressed_result = cache.get('binary1-set_many')
505.         self.assertEqual(compressed_value, compressed_result)
506.         self.assertEqual(value, decompress(compressed_result).decode())
507. 
508.     def test_set_many(self):
509.         # Multiple keys can be set using set_many
510.         cache.set_many({"key1": "spam", "key2": "eggs"})
511.         self.assertEqual(cache.get("key1"), "spam")
512.         self.assertEqual(cache.get("key2"), "eggs")
513. 
514.     def test_set_many_returns_empty_list_on_success(self):
515.         """set_many() returns an empty list when all keys are inserted."""
516.         failing_keys = cache.set_many({'key1': 'spam', 'key2': 'eggs'})
517.         self.assertEqual(failing_keys, [])
518. 
519.     def test_set_many_expiration(self):
520.         # set_many takes a second ``timeout`` parameter
521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)
522.         time.sleep(2)
523.         self.assertIsNone(cache.get("key1"))
524.         self.assertIsNone(cache.get("key2"))
525. 
526.     def test_delete_many(self):
527.         # Multiple keys can be deleted using delete_many
528.         cache.set_many({'key1': 'spam', 'key2': 'eggs', 'key3': 'ham'})
529.         cache.delete_many(["key1", "key2"])
530.         self.assertIsNone(cache.get("key1"))
531.         self.assertIsNone(cache.get("key2"))
532.         self.assertEqual(cache.get("key3"), "ham")
533. 
534.     def test_clear(self):
535.         # The cache can be emptied using clear
536.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
537.         cache.clear()
538.         self.assertIsNone(cache.get("key1"))
539.         self.assertIsNone(cache.get("key2"))
540. 
541.     def test_long_timeout(self):
542.         """
543.         Follow memcached's convention where a timeout greater than 30 days is
544.         treated as an absolute expiration timestamp instead of a relative
545.         offset (#12399).
546.         """
547.         cache.set('key1', 'eggs', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second
548.         self.assertEqual(cache.get('key1'), 'eggs')
549. 
550.         self.assertIs(cache.add('key2', 'ham', 60 * 60 * 24 * 30 + 1), True)
551.         self.assertEqual(cache.get('key2'), 'ham')
552. 
553.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 60 * 60 * 24 * 30 + 1)
554.         self.assertEqual(cache.get('key3'), 'sausage')
555.         self.assertEqual(cache.get('key4'), 'lobster bisque')
556. 
557.     def test_forever_timeout(self):
558.         """
559.         Passing in None into timeout results in a value that is cached forever
560.         """
561.         cache.set('key1', 'eggs', None)
562.         self.assertEqual(cache.get('key1'), 'eggs')
563. 
564.         self.assertIs(cache.add('key2', 'ham', None), True)
565.         self.assertEqual(cache.get('key2'), 'ham')
566.         self.assertIs(cache.add('key1', 'new eggs', None), False)
567.         self.assertEqual(cache.get('key1'), 'eggs')
568. 
569.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, None)
570.         self.assertEqual(cache.get('key3'), 'sausage')
571.         self.assertEqual(cache.get('key4'), 'lobster bisque')
572. 
573.         cache.set('key5', 'belgian fries', timeout=1)
574.         self.assertIs(cache.touch('key5', timeout=None), True)
575.         time.sleep(2)
576.         self.assertEqual(cache.get('key5'), 'belgian fries')
577. 
578.     def test_zero_timeout(self):
579.         """
580.         Passing in zero into timeout results in a value that is not cached
581.         """
582.         cache.set('key1', 'eggs', 0)
583.         self.assertIsNone(cache.get('key1'))
584. 
585.         self.assertIs(cache.add('key2', 'ham', 0), True)
586.         self.assertIsNone(cache.get('key2'))
587. 
588.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 0)
589.         self.assertIsNone(cache.get('key3'))
590.         self.assertIsNone(cache.get('key4'))
591. 
592.         cache.set('key5', 'belgian fries', timeout=5)
593.         self.assertIs(cache.touch('key5', timeout=0), True)
594.         self.assertIsNone(cache.get('key5'))
595. 
596.     def test_float_timeout(self):
597.         # Make sure a timeout given as a float doesn't crash anything.
598.         cache.set("key1", "spam", 100.2)
599.         self.assertEqual(cache.get("key1"), "spam")
600. 
601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):
602.         try:
603.             cull_cache = caches[cull_cache_name]
604.         except InvalidCacheBackendError:
605.             self.skipTest("Culling isn't implemented.")
606. 
607.         # Create initial cache key entries. This will overflow the cache,
608.         # causing a cull.
609.         for i in range(1, initial_count):
610.             cull_cache.set('cull%d' % i, 'value', 1000)
611.         count = 0
612.         # Count how many keys are left in the cache.
613.         for i in range(1, initial_count):
614.             if cull_cache.has_key('cull%d' % i):
615.                 count += 1
616.         self.assertEqual(count, final_count)
617. 
618.     def test_cull(self):
619.         self._perform_cull_test('cull', 50, 29)
620. 
621.     def test_zero_cull(self):
622.         self._perform_cull_test('zero_cull', 50, 19)
623. 
624.     def _perform_invalid_key_test(self, key, expected_warning):
625.         """
626.         All the builtin backends should warn (except memcached that should
627.         error) on keys that would be refused by memcached. This encourages
628.         portable caching code without making it too difficult to use production
629.         backends with more liberal key rules. Refs #6447.
630.         """
631.         # mimic custom ``make_key`` method being defined since the default will
632.         # never show the below warnings
633.         def func(key, *args):
634.             return key
635. 
636.         old_func = cache.key_func
637.         cache.key_func = func
638. 
639.         try:
640.             with self.assertWarns(CacheKeyWarning) as cm:
641.                 cache.set(key, 'value')
642.             self.assertEqual(str(cm.warning), expected_warning)
643.         finally:
644.             cache.key_func = old_func
645. 
646.     def test_invalid_key_characters(self):
647.         # memcached doesn't allow whitespace or control characters in keys.
648.         key = 'key with spaces and æ¸…'
649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)
650. 
651.     def test_invalid_key_length(self):
652.         # memcached limits key length to 250.
653.         key = ('a' * 250) + 'æ¸…'
654.         expected_warning = (
655.             'Cache key will cause errors if used with memcached: '
656.             '%r (longer than %s)' % (key, 250)
657.         )
658.         self._perform_invalid_key_test(key, expected_warning)
659. 
660.     def test_cache_versioning_get_set(self):
661.         # set, using default version = 1
662.         cache.set('answer1', 42)
663.         self.assertEqual(cache.get('answer1'), 42)
664.         self.assertEqual(cache.get('answer1', version=1), 42)
665.         self.assertIsNone(cache.get('answer1', version=2))
666. 
667.         self.assertIsNone(caches['v2'].get('answer1'))
668.         self.assertEqual(caches['v2'].get('answer1', version=1), 42)
669.         self.assertIsNone(caches['v2'].get('answer1', version=2))
670. 
671.         # set, default version = 1, but manually override version = 2
672.         cache.set('answer2', 42, version=2)
673.         self.assertIsNone(cache.get('answer2'))
674.         self.assertIsNone(cache.get('answer2', version=1))
675.         self.assertEqual(cache.get('answer2', version=2), 42)
676. 
677.         self.assertEqual(caches['v2'].get('answer2'), 42)
678.         self.assertIsNone(caches['v2'].get('answer2', version=1))
679.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
680. 
681.         # v2 set, using default version = 2
682.         caches['v2'].set('answer3', 42)
683.         self.assertIsNone(cache.get('answer3'))
684.         self.assertIsNone(cache.get('answer3', version=1))
685.         self.assertEqual(cache.get('answer3', version=2), 42)
686. 
687.         self.assertEqual(caches['v2'].get('answer3'), 42)
688.         self.assertIsNone(caches['v2'].get('answer3', version=1))
689.         self.assertEqual(caches['v2'].get('answer3', version=2), 42)
690. 
691.         # v2 set, default version = 2, but manually override version = 1
692.         caches['v2'].set('answer4', 42, version=1)
693.         self.assertEqual(cache.get('answer4'), 42)
694.         self.assertEqual(cache.get('answer4', version=1), 42)
695.         self.assertIsNone(cache.get('answer4', version=2))
696. 
697.         self.assertIsNone(caches['v2'].get('answer4'))
698.         self.assertEqual(caches['v2'].get('answer4', version=1), 42)
699.         self.assertIsNone(caches['v2'].get('answer4', version=2))
700. 
701.     def test_cache_versioning_add(self):
702. 
703.         # add, default version = 1, but manually override version = 2
704.         self.assertIs(cache.add('answer1', 42, version=2), True)
705.         self.assertIsNone(cache.get('answer1', version=1))
706.         self.assertEqual(cache.get('answer1', version=2), 42)
707. 
708.         self.assertIs(cache.add('answer1', 37, version=2), False)
709.         self.assertIsNone(cache.get('answer1', version=1))
710.         self.assertEqual(cache.get('answer1', version=2), 42)
711. 
712.         self.assertIs(cache.add('answer1', 37, version=1), True)
713.         self.assertEqual(cache.get('answer1', version=1), 37)
714.         self.assertEqual(cache.get('answer1', version=2), 42)
715. 
716.         # v2 add, using default version = 2
717.         self.assertIs(caches['v2'].add('answer2', 42), True)
718.         self.assertIsNone(cache.get('answer2', version=1))
719.         self.assertEqual(cache.get('answer2', version=2), 42)
720. 
721.         self.assertIs(caches['v2'].add('answer2', 37), False)
722.         self.assertIsNone(cache.get('answer2', version=1))
723.         self.assertEqual(cache.get('answer2', version=2), 42)
724. 
725.         self.assertIs(caches['v2'].add('answer2', 37, version=1), True)
726.         self.assertEqual(cache.get('answer2', version=1), 37)
727.         self.assertEqual(cache.get('answer2', version=2), 42)
728. 
729.         # v2 add, default version = 2, but manually override version = 1
730.         self.assertIs(caches['v2'].add('answer3', 42, version=1), True)
731.         self.assertEqual(cache.get('answer3', version=1), 42)
732.         self.assertIsNone(cache.get('answer3', version=2))
733. 
734.         self.assertIs(caches['v2'].add('answer3', 37, version=1), False)
735.         self.assertEqual(cache.get('answer3', version=1), 42)
736.         self.assertIsNone(cache.get('answer3', version=2))
737. 
738.         self.assertIs(caches['v2'].add('answer3', 37), True)
739.         self.assertEqual(cache.get('answer3', version=1), 42)
740.         self.assertEqual(cache.get('answer3', version=2), 37)
741. 
742.     def test_cache_versioning_has_key(self):
743.         cache.set('answer1', 42)
744. 
745.         # has_key
746.         self.assertIs(cache.has_key('answer1'), True)
747.         self.assertIs(cache.has_key('answer1', version=1), True)
748.         self.assertIs(cache.has_key('answer1', version=2), False)
749. 
750.         self.assertIs(caches['v2'].has_key('answer1'), False)
751.         self.assertIs(caches['v2'].has_key('answer1', version=1), True)
752.         self.assertIs(caches['v2'].has_key('answer1', version=2), False)
753. 
754.     def test_cache_versioning_delete(self):
755.         cache.set('answer1', 37, version=1)
756.         cache.set('answer1', 42, version=2)
757.         self.assertIs(cache.delete('answer1'), True)
758.         self.assertIsNone(cache.get('answer1', version=1))
759.         self.assertEqual(cache.get('answer1', version=2), 42)
760. 
761.         cache.set('answer2', 37, version=1)
762.         cache.set('answer2', 42, version=2)
763.         self.assertIs(cache.delete('answer2', version=2), True)
764.         self.assertEqual(cache.get('answer2', version=1), 37)
765.         self.assertIsNone(cache.get('answer2', version=2))
766. 
767.         cache.set('answer3', 37, version=1)
768.         cache.set('answer3', 42, version=2)
769.         self.assertIs(caches['v2'].delete('answer3'), True)
770.         self.assertEqual(cache.get('answer3', version=1), 37)
771.         self.assertIsNone(cache.get('answer3', version=2))
772. 
773.         cache.set('answer4', 37, version=1)
774.         cache.set('answer4', 42, version=2)
775.         self.assertIs(caches['v2'].delete('answer4', version=1), True)
776.         self.assertIsNone(cache.get('answer4', version=1))
777.         self.assertEqual(cache.get('answer4', version=2), 42)
778. 
779.     def test_cache_versioning_incr_decr(self):
780.         cache.set('answer1', 37, version=1)
781.         cache.set('answer1', 42, version=2)
782.         self.assertEqual(cache.incr('answer1'), 38)
783.         self.assertEqual(cache.get('answer1', version=1), 38)
784.         self.assertEqual(cache.get('answer1', version=2), 42)
785.         self.assertEqual(cache.decr('answer1'), 37)
786.         self.assertEqual(cache.get('answer1', version=1), 37)
787.         self.assertEqual(cache.get('answer1', version=2), 42)
788. 
789.         cache.set('answer2', 37, version=1)
790.         cache.set('answer2', 42, version=2)
791.         self.assertEqual(cache.incr('answer2', version=2), 43)
792.         self.assertEqual(cache.get('answer2', version=1), 37)
793.         self.assertEqual(cache.get('answer2', version=2), 43)
794.         self.assertEqual(cache.decr('answer2', version=2), 42)
795.         self.assertEqual(cache.get('answer2', version=1), 37)
796.         self.assertEqual(cache.get('answer2', version=2), 42)
797. 
798.         cache.set('answer3', 37, version=1)
799.         cache.set('answer3', 42, version=2)
800.         self.assertEqual(caches['v2'].incr('answer3'), 43)
801.         self.assertEqual(cache.get('answer3', version=1), 37)
802.         self.assertEqual(cache.get('answer3', version=2), 43)
803.         self.assertEqual(caches['v2'].decr('answer3'), 42)
804.         self.assertEqual(cache.get('answer3', version=1), 37)
805.         self.assertEqual(cache.get('answer3', version=2), 42)
806. 
807.         cache.set('answer4', 37, version=1)
808.         cache.set('answer4', 42, version=2)
809.         self.assertEqual(caches['v2'].incr('answer4', version=1), 38)
810.         self.assertEqual(cache.get('answer4', version=1), 38)
811.         self.assertEqual(cache.get('answer4', version=2), 42)
812.         self.assertEqual(caches['v2'].decr('answer4', version=1), 37)
813.         self.assertEqual(cache.get('answer4', version=1), 37)
814.         self.assertEqual(cache.get('answer4', version=2), 42)
815. 
816.     def test_cache_versioning_get_set_many(self):
817.         # set, using default version = 1
818.         cache.set_many({'ford1': 37, 'arthur1': 42})
819.         self.assertEqual(cache.get_many(['ford1', 'arthur1']), {'ford1': 37, 'arthur1': 42})
820.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
821.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=2), {})
822. 
823.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1']), {})
824.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
825.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=2), {})
826. 
827.         # set, default version = 1, but manually override version = 2
828.         cache.set_many({'ford2': 37, 'arthur2': 42}, version=2)
829.         self.assertEqual(cache.get_many(['ford2', 'arthur2']), {})
830.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=1), {})
831.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
832. 
833.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2']), {'ford2': 37, 'arthur2': 42})
834.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=1), {})
835.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
836. 
837.         # v2 set, using default version = 2
838.         caches['v2'].set_many({'ford3': 37, 'arthur3': 42})
839.         self.assertEqual(cache.get_many(['ford3', 'arthur3']), {})
840.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=1), {})
841.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
842. 
843.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3']), {'ford3': 37, 'arthur3': 42})
844.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=1), {})
845.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
846. 
847.         # v2 set, default version = 2, but manually override version = 1
848.         caches['v2'].set_many({'ford4': 37, 'arthur4': 42}, version=1)
849.         self.assertEqual(cache.get_many(['ford4', 'arthur4']), {'ford4': 37, 'arthur4': 42})
850.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
851.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=2), {})
852. 
853.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4']), {})
854.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
855.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=2), {})
856. 
857.     def test_incr_version(self):
858.         cache.set('answer', 42, version=2)
859.         self.assertIsNone(cache.get('answer'))
860.         self.assertIsNone(cache.get('answer', version=1))
861.         self.assertEqual(cache.get('answer', version=2), 42)
862.         self.assertIsNone(cache.get('answer', version=3))
863. 
864.         self.assertEqual(cache.incr_version('answer', version=2), 3)
865.         self.assertIsNone(cache.get('answer'))
866.         self.assertIsNone(cache.get('answer', version=1))
867.         self.assertIsNone(cache.get('answer', version=2))
868.         self.assertEqual(cache.get('answer', version=3), 42)
869. 
870.         caches['v2'].set('answer2', 42)
871.         self.assertEqual(caches['v2'].get('answer2'), 42)
872.         self.assertIsNone(caches['v2'].get('answer2', version=1))
873.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
874.         self.assertIsNone(caches['v2'].get('answer2', version=3))
875. 
876.         self.assertEqual(caches['v2'].incr_version('answer2'), 3)
877.         self.assertIsNone(caches['v2'].get('answer2'))
878.         self.assertIsNone(caches['v2'].get('answer2', version=1))
879.         self.assertIsNone(caches['v2'].get('answer2', version=2))
880.         self.assertEqual(caches['v2'].get('answer2', version=3), 42)
881. 
882.         with self.assertRaises(ValueError):
883.             cache.incr_version('does_not_exist')
884. 
885.     def test_decr_version(self):
886.         cache.set('answer', 42, version=2)
887.         self.assertIsNone(cache.get('answer'))
888.         self.assertIsNone(cache.get('answer', version=1))
889.         self.assertEqual(cache.get('answer', version=2), 42)
890. 
891.         self.assertEqual(cache.decr_version('answer', version=2), 1)
892.         self.assertEqual(cache.get('answer'), 42)
893.         self.assertEqual(cache.get('answer', version=1), 42)
894.         self.assertIsNone(cache.get('answer', version=2))
895. 
896.         caches['v2'].set('answer2', 42)
897.         self.assertEqual(caches['v2'].get('answer2'), 42)
898.         self.assertIsNone(caches['v2'].get('answer2', version=1))
899.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
900. 
901.         self.assertEqual(caches['v2'].decr_version('answer2'), 1)
902.         self.assertIsNone(caches['v2'].get('answer2'))
903.         self.assertEqual(caches['v2'].get('answer2', version=1), 42)
904.         self.assertIsNone(caches['v2'].get('answer2', version=2))
905. 
906.         with self.assertRaises(ValueError):
907.             cache.decr_version('does_not_exist', version=2)
908. 
909.     def test_custom_key_func(self):
910.         # Two caches with different key functions aren't visible to each other
911.         cache.set('answer1', 42)
912.         self.assertEqual(cache.get('answer1'), 42)
913.         self.assertIsNone(caches['custom_key'].get('answer1'))
914.         self.assertIsNone(caches['custom_key2'].get('answer1'))
915. 
916.         caches['custom_key'].set('answer2', 42)
917.         self.assertIsNone(cache.get('answer2'))
918.         self.assertEqual(caches['custom_key'].get('answer2'), 42)
919.         self.assertEqual(caches['custom_key2'].get('answer2'), 42)
920. 
921.     def test_cache_write_unpicklable_object(self):
922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)
923.         fetch_middleware.cache = cache
924. 
925.         request = self.factory.get('/cache/test')
926.         request._cache_update_cache = True
927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
928.         self.assertIsNone(get_cache_data)
929. 
930.         content = 'Testing cookie serialization.'
931. 
932.         def get_response(req):
933.             response = HttpResponse(content)
934.             response.set_cookie('foo', 'bar')
935.             return response
936. 
937.         update_middleware = UpdateCacheMiddleware(get_response)
938.         update_middleware.cache = cache
939.         response = update_middleware(request)
940. 
941.         get_cache_data = fetch_middleware.process_request(request)
942.         self.assertIsNotNone(get_cache_data)
943.         self.assertEqual(get_cache_data.content, content.encode())
944.         self.assertEqual(get_cache_data.cookies, response.cookies)
945. 
946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)
947.         get_cache_data = fetch_middleware.process_request(request)
948.         self.assertIsNotNone(get_cache_data)
949.         self.assertEqual(get_cache_data.content, content.encode())
950.         self.assertEqual(get_cache_data.cookies, response.cookies)
951. 
952.     def test_add_fail_on_pickleerror(self):
953.         # Shouldn't fail silently if trying to cache an unpicklable type.
954.         with self.assertRaises(pickle.PickleError):
955.             cache.add('unpicklable', Unpicklable())
956. 
957.     def test_set_fail_on_pickleerror(self):
958.         with self.assertRaises(pickle.PickleError):
959.             cache.set('unpicklable', Unpicklable())
960. 
961.     def test_get_or_set(self):
962.         self.assertIsNone(cache.get('projector'))
963.         self.assertEqual(cache.get_or_set('projector', 42), 42)
964.         self.assertEqual(cache.get('projector'), 42)
965.         self.assertIsNone(cache.get_or_set('null', None))
966. 
967.     def test_get_or_set_callable(self):
968.         def my_callable():
969.             return 'value'
970. 
971.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'value')
972.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'value')
973. 
974.     def test_get_or_set_callable_returning_none(self):
975.         self.assertIsNone(cache.get_or_set('mykey', lambda: None))
976.         # Previous get_or_set() doesn't store None in the cache.
977.         self.assertEqual(cache.get('mykey', 'default'), 'default')
978. 
979.     def test_get_or_set_version(self):
980.         msg = "get_or_set() missing 1 required positional argument: 'default'"
981.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
982.         with self.assertRaisesMessage(TypeError, msg):
983.             cache.get_or_set('brian')
984.         with self.assertRaisesMessage(TypeError, msg):
985.             cache.get_or_set('brian', version=1)
986.         self.assertIsNone(cache.get('brian', version=1))
987.         self.assertEqual(cache.get_or_set('brian', 42, version=1), 42)
988.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
989.         self.assertIsNone(cache.get('brian', version=3))
990. 
991.     def test_get_or_set_racing(self):
992.         with mock.patch('%s.%s' % (settings.CACHES['default']['BACKEND'], 'add')) as cache_add:
993.             # Simulate cache.add() failing to add a value. In that case, the
994.             # default value should be returned.
995.             cache_add.return_value = False
996.             self.assertEqual(cache.get_or_set('key', 'default'), 'default')
997. 
998. 
999. @override_settings(CACHES=caches_setting_for_tests(
1000.     BACKEND='django.core.cache.backends.db.DatabaseCache',
1001.     # Spaces are used in the table name to ensure quoting/escaping is working

File: tests/cache/tests.py
Line number range: 1001 - 1501
Content:
1001.     # Spaces are used in the table name to ensure quoting/escaping is working
1002.     LOCATION='test cache table'
1003. ))
1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):
1005. 
1006.     available_apps = ['cache']
1007. 
1008.     def setUp(self):
1009.         # The super calls needs to happen first for the settings override.
1010.         super().setUp()
1011.         self.create_table()
1012. 
1013.     def tearDown(self):
1014.         # The super call needs to happen first because it uses the database.
1015.         super().tearDown()
1016.         self.drop_table()
1017. 
1018.     def create_table(self):
1019.         management.call_command('createcachetable', verbosity=0)
1020. 
1021.     def drop_table(self):
1022.         with connection.cursor() as cursor:
1023.             table_name = connection.ops.quote_name('test cache table')
1024.             cursor.execute('DROP TABLE %s' % table_name)
1025. 
1026.     def test_get_many_num_queries(self):
1027.         cache.set_many({'a': 1, 'b': 2})
1028.         cache.set('expired', 'expired', 0.01)
1029.         with self.assertNumQueries(1):
1030.             self.assertEqual(cache.get_many(['a', 'b']), {'a': 1, 'b': 2})
1031.         time.sleep(0.02)
1032.         with self.assertNumQueries(2):
1033.             self.assertEqual(cache.get_many(['a', 'b', 'expired']), {'a': 1, 'b': 2})
1034. 
1035.     def test_delete_many_num_queries(self):
1036.         cache.set_many({'a': 1, 'b': 2, 'c': 3})
1037.         with self.assertNumQueries(1):
1038.             cache.delete_many(['a', 'b', 'c'])
1039. 
1040.     def test_zero_cull(self):
1041.         self._perform_cull_test('zero_cull', 50, 18)
1042. 
1043.     def test_second_call_doesnt_crash(self):
1044.         out = io.StringIO()
1045.         management.call_command('createcachetable', stdout=out)
1046.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' already exists.\n" * len(settings.CACHES))
1047. 
1048.     @override_settings(CACHES=caches_setting_for_tests(
1049.         BACKEND='django.core.cache.backends.db.DatabaseCache',
1050.         # Use another table name to avoid the 'table already exists' message.
1051.         LOCATION='createcachetable_dry_run_mode'
1052.     ))
1053.     def test_createcachetable_dry_run_mode(self):
1054.         out = io.StringIO()
1055.         management.call_command('createcachetable', dry_run=True, stdout=out)
1056.         output = out.getvalue()
1057.         self.assertTrue(output.startswith("CREATE TABLE"))
1058. 
1059.     def test_createcachetable_with_table_argument(self):
1060.         """
1061.         Delete and recreate cache table with legacy behavior (explicitly
1062.         specifying the table name).
1063.         """
1064.         self.drop_table()
1065.         out = io.StringIO()
1066.         management.call_command(
1067.             'createcachetable',
1068.             'test cache table',
1069.             verbosity=2,
1070.             stdout=out,
1071.         )
1072.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' created.\n")
1073. 
1074. 
1075. @override_settings(USE_TZ=True)
1076. class DBCacheWithTimeZoneTests(DBCacheTests):
1077.     pass
1078. 
1079. 
1080. class DBCacheRouter:
1081.     """A router that puts the cache table on the 'other' database."""
1082. 
1083.     def db_for_read(self, model, **hints):
1084.         if model._meta.app_label == 'django_cache':
1085.             return 'other'
1086.         return None
1087. 
1088.     def db_for_write(self, model, **hints):
1089.         if model._meta.app_label == 'django_cache':
1090.             return 'other'
1091.         return None
1092. 
1093.     def allow_migrate(self, db, app_label, **hints):
1094.         if app_label == 'django_cache':
1095.             return db == 'other'
1096.         return None
1097. 
1098. 
1099. @override_settings(
1100.     CACHES={
1101.         'default': {
1102.             'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
1103.             'LOCATION': 'my_cache_table',
1104.         },
1105.     },
1106. )
1107. class CreateCacheTableForDBCacheTests(TestCase):
1108.     databases = {'default', 'other'}
1109. 
1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])
1111.     def test_createcachetable_observes_database_router(self):
1112.         # cache table should not be created on 'default'
1113.         with self.assertNumQueries(0, using='default'):
1114.             management.call_command('createcachetable', database='default', verbosity=0)
1115.         # cache table should be created on 'other'
1116.         # Queries:
1117.         #   1: check table doesn't already exist
1118.         #   2: create savepoint (if transactional DDL is supported)
1119.         #   3: create the table
1120.         #   4: create the index
1121.         #   5: release savepoint (if transactional DDL is supported)
1122.         num = 5 if connections['other'].features.can_rollback_ddl else 3
1123.         with self.assertNumQueries(num, using='other'):
1124.             management.call_command('createcachetable', database='other', verbosity=0)
1125. 
1126. 
1127. class PicklingSideEffect:
1128. 
1129.     def __init__(self, cache):
1130.         self.cache = cache
1131.         self.locked = False
1132. 
1133.     def __getstate__(self):
1134.         self.locked = self.cache._lock.locked()
1135.         return {}
1136. 
1137. 
1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(
1139.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1140.     OPTIONS={'MAX_ENTRIES': 9},
1141. ))
1142. 
1143. 
1144. @override_settings(CACHES=caches_setting_for_tests(
1145.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1146. ))
1147. class LocMemCacheTests(BaseCacheTests, TestCase):
1148. 
1149.     def setUp(self):
1150.         super().setUp()
1151. 
1152.         # LocMem requires a hack to make the other caches
1153.         # share a data store with the 'normal' cache.
1154.         caches['prefix']._cache = cache._cache
1155.         caches['prefix']._expire_info = cache._expire_info
1156. 
1157.         caches['v2']._cache = cache._cache
1158.         caches['v2']._expire_info = cache._expire_info
1159. 
1160.         caches['custom_key']._cache = cache._cache
1161.         caches['custom_key']._expire_info = cache._expire_info
1162. 
1163.         caches['custom_key2']._cache = cache._cache
1164.         caches['custom_key2']._expire_info = cache._expire_info
1165. 
1166.     @override_settings(CACHES={
1167.         'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'},
1168.         'other': {
1169.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1170.             'LOCATION': 'other'
1171.         },
1172.     })
1173.     def test_multiple_caches(self):
1174.         "Multiple locmem caches are isolated"
1175.         cache.set('value', 42)
1176.         self.assertEqual(caches['default'].get('value'), 42)
1177.         self.assertIsNone(caches['other'].get('value'))
1178. 
1179.     def test_locking_on_pickle(self):
1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""
1181.         bad_obj = PicklingSideEffect(cache)
1182.         cache.set('set', bad_obj)
1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1184. 
1185.         self.assertIs(cache.add('add', bad_obj), True)
1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1187. 
1188.     def test_incr_decr_timeout(self):
1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""
1190.         key = 'value'
1191.         _key = cache.make_key(key)
1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)
1193.         expire = cache._expire_info[_key]
1194.         self.assertEqual(cache.incr(key), 2)
1195.         self.assertEqual(expire, cache._expire_info[_key])
1196.         self.assertEqual(cache.decr(key), 1)
1197.         self.assertEqual(expire, cache._expire_info[_key])
1198. 
1199.     @limit_locmem_entries
1200.     def test_lru_get(self):
1201.         """get() moves cache keys."""
1202.         for key in range(9):
1203.             cache.set(key, key, timeout=None)
1204.         for key in range(6):
1205.             self.assertEqual(cache.get(key), key)
1206.         cache.set(9, 9, timeout=None)
1207.         for key in range(6):
1208.             self.assertEqual(cache.get(key), key)
1209.         for key in range(6, 9):
1210.             self.assertIsNone(cache.get(key))
1211.         self.assertEqual(cache.get(9), 9)
1212. 
1213.     @limit_locmem_entries
1214.     def test_lru_set(self):
1215.         """set() moves cache keys."""
1216.         for key in range(9):
1217.             cache.set(key, key, timeout=None)
1218.         for key in range(3, 9):
1219.             cache.set(key, key, timeout=None)
1220.         cache.set(9, 9, timeout=None)
1221.         for key in range(3, 10):
1222.             self.assertEqual(cache.get(key), key)
1223.         for key in range(3):
1224.             self.assertIsNone(cache.get(key))
1225. 
1226.     @limit_locmem_entries
1227.     def test_lru_incr(self):
1228.         """incr() moves cache keys."""
1229.         for key in range(9):
1230.             cache.set(key, key, timeout=None)
1231.         for key in range(6):
1232.             self.assertEqual(cache.incr(key), key + 1)
1233.         cache.set(9, 9, timeout=None)
1234.         for key in range(6):
1235.             self.assertEqual(cache.get(key), key + 1)
1236.         for key in range(6, 9):
1237.             self.assertIsNone(cache.get(key))
1238.         self.assertEqual(cache.get(9), 9)
1239. 
1240. 
1241. # memcached backend isn't guaranteed to be available.
1242. # To check the memcached backend, the test settings file will
1243. # need to contain at least one cache backend setting that points at
1244. # your memcache server.
1245. configured_caches = {}
1246. for _cache_params in settings.CACHES.values():
1247.     configured_caches[_cache_params['BACKEND']] = _cache_params
1248. 
1249. MemcachedCache_params = configured_caches.get('django.core.cache.backends.memcached.MemcachedCache')
1250. PyLibMCCache_params = configured_caches.get('django.core.cache.backends.memcached.PyLibMCCache')
1251. 
1252. # The memcached backends don't support cull-related options like `MAX_ENTRIES`.
1253. memcached_excluded_caches = {'cull', 'zero_cull'}
1254. 
1255. 
1256. class BaseMemcachedTests(BaseCacheTests):
1257. 
1258.     # By default it's assumed that the client doesn't clean up connections
1259.     # properly, in which case the backend must do so after each request.
1260.     should_disconnect_on_close = True
1261. 
1262.     def test_location_multiple_servers(self):
1263.         locations = [
1264.             ['server1.tld', 'server2:11211'],
1265.             'server1.tld;server2:11211',
1266.             'server1.tld,server2:11211',
1267.         ]
1268.         for location in locations:
1269.             with self.subTest(location=location):
1270.                 params = {'BACKEND': self.base_params['BACKEND'], 'LOCATION': location}
1271.                 with self.settings(CACHES={'default': params}):
1272.                     self.assertEqual(cache._servers, ['server1.tld', 'server2:11211'])
1273. 
1274.     def _perform_invalid_key_test(self, key, expected_warning):
1275.         """
1276.         While other backends merely warn, memcached should raise for an invalid
1277.         key.
1278.         """
1279.         msg = expected_warning.replace(key, cache.make_key(key))
1280.         with self.assertRaises(InvalidCacheKey) as cm:
1281.             cache.set(key, 'value')
1282.         self.assertEqual(str(cm.exception), msg)
1283. 
1284.     def test_default_never_expiring_timeout(self):
1285.         # Regression test for #22845
1286.         with self.settings(CACHES=caches_setting_for_tests(
1287.                 base=self.base_params,
1288.                 exclude=memcached_excluded_caches,
1289.                 TIMEOUT=None)):
1290.             cache.set('infinite_foo', 'bar')
1291.             self.assertEqual(cache.get('infinite_foo'), 'bar')
1292. 
1293.     def test_default_far_future_timeout(self):
1294.         # Regression test for #22845
1295.         with self.settings(CACHES=caches_setting_for_tests(
1296.                 base=self.base_params,
1297.                 exclude=memcached_excluded_caches,
1298.                 # 60*60*24*365, 1 year
1299.                 TIMEOUT=31536000)):
1300.             cache.set('future_foo', 'bar')
1301.             self.assertEqual(cache.get('future_foo'), 'bar')
1302. 
1303.     def test_memcached_deletes_key_on_failed_set(self):
1304.         # By default memcached allows objects up to 1MB. For the cache_db session
1305.         # backend to always use the current session, memcached needs to delete
1306.         # the old key if it fails to set.
1307.         # pylibmc doesn't seem to have SERVER_MAX_VALUE_LENGTH as far as I can
1308.         # tell from a quick check of its source code. This is falling back to
1309.         # the default value exposed by python-memcached on my system.
1310.         max_value_length = getattr(cache._lib, 'SERVER_MAX_VALUE_LENGTH', 1048576)
1311. 
1312.         cache.set('small_value', 'a')
1313.         self.assertEqual(cache.get('small_value'), 'a')
1314. 
1315.         large_value = 'a' * (max_value_length + 1)
1316.         try:
1317.             cache.set('small_value', large_value)
1318.         except Exception:
1319.             # Some clients (e.g. pylibmc) raise when the value is too large,
1320.             # while others (e.g. python-memcached) intentionally return True
1321.             # indicating success. This test is primarily checking that the key
1322.             # was deleted, so the return/exception behavior for the set()
1323.             # itself is not important.
1324.             pass
1325.         # small_value should be deleted, or set if configured to accept larger values
1326.         value = cache.get('small_value')
1327.         self.assertTrue(value is None or value == large_value)
1328. 
1329.     def test_close(self):
1330.         # For clients that don't manage their connections properly, the
1331.         # connection is closed when the request is complete.
1332.         signals.request_finished.disconnect(close_old_connections)
1333.         try:
1334.             with mock.patch.object(cache._lib.Client, 'disconnect_all', autospec=True) as mock_disconnect:
1335.                 signals.request_finished.send(self.__class__)
1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)
1337.         finally:
1338.             signals.request_finished.connect(close_old_connections)
1339. 
1340.     def test_set_many_returns_failing_keys(self):
1341.         def fail_set_multi(mapping, *args, **kwargs):
1342.             return mapping.keys()
1343.         with mock.patch('%s.Client.set_multi' % self.client_library_name, side_effect=fail_set_multi):
1344.             failing_keys = cache.set_many({'key': 'value'})
1345.             self.assertEqual(failing_keys, ['key'])
1346. 
1347. 
1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")
1349. @override_settings(CACHES=caches_setting_for_tests(
1350.     base=MemcachedCache_params,
1351.     exclude=memcached_excluded_caches,
1352. ))
1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):
1354.     base_params = MemcachedCache_params
1355.     client_library_name = 'memcache'
1356. 
1357.     def test_memcached_uses_highest_pickle_version(self):
1358.         # Regression test for #19810
1359.         for cache_key in settings.CACHES:
1360.             with self.subTest(cache_key=cache_key):
1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)
1362. 
1363.     @override_settings(CACHES=caches_setting_for_tests(
1364.         base=MemcachedCache_params,
1365.         exclude=memcached_excluded_caches,
1366.         OPTIONS={'server_max_value_length': 9999},
1367.     ))
1368.     def test_memcached_options(self):
1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)
1370. 
1371.     def test_default_used_when_none_is_set(self):
1372.         """
1373.         python-memcached doesn't support default in get() so this test
1374.         overrides the one in BaseCacheTests.
1375.         """
1376.         cache.set('key_default_none', None)
1377.         self.assertEqual(cache.get('key_default_none', default='default'), 'default')
1378. 
1379. 
1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")
1381. @override_settings(CACHES=caches_setting_for_tests(
1382.     base=PyLibMCCache_params,
1383.     exclude=memcached_excluded_caches,
1384. ))
1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):
1386.     base_params = PyLibMCCache_params
1387.     client_library_name = 'pylibmc'
1388.     # libmemcached manages its own connections.
1389.     should_disconnect_on_close = False
1390. 
1391.     @override_settings(CACHES=caches_setting_for_tests(
1392.         base=PyLibMCCache_params,
1393.         exclude=memcached_excluded_caches,
1394.         OPTIONS={
1395.             'binary': True,
1396.             'behaviors': {'tcp_nodelay': True},
1397.         },
1398.     ))
1399.     def test_pylibmc_options(self):
1400.         self.assertTrue(cache._cache.binary)
1401.         self.assertEqual(cache._cache.behaviors['tcp_nodelay'], int(True))
1402. 
1403. 
1404. @override_settings(CACHES=caches_setting_for_tests(
1405.     BACKEND='django.core.cache.backends.filebased.FileBasedCache',
1406. ))
1407. class FileBasedCacheTests(BaseCacheTests, TestCase):
1408.     """
1409.     Specific test cases for the file-based cache.
1410.     """
1411. 
1412.     def setUp(self):
1413.         super().setUp()
1414.         self.dirname = self.mkdtemp()
1415.         # Caches location cannot be modified through override_settings / modify_settings,
1416.         # hence settings are manipulated directly here and the setting_changed signal
1417.         # is triggered manually.
1418.         for cache_params in settings.CACHES.values():
1419.             cache_params['LOCATION'] = self.dirname
1420.         setting_changed.send(self.__class__, setting='CACHES', enter=False)
1421. 
1422.     def tearDown(self):
1423.         super().tearDown()
1424.         # Call parent first, as cache.clear() may recreate cache base directory
1425.         shutil.rmtree(self.dirname)
1426. 
1427.     def mkdtemp(self):
1428.         return tempfile.mkdtemp()
1429. 
1430.     def test_ignores_non_cache_files(self):
1431.         fname = os.path.join(self.dirname, 'not-a-cache-file')
1432.         with open(fname, 'w'):
1433.             os.utime(fname, None)
1434.         cache.clear()
1435.         self.assertTrue(os.path.exists(fname),
1436.                         'Expected cache.clear to ignore non cache files')
1437.         os.remove(fname)
1438. 
1439.     def test_clear_does_not_remove_cache_dir(self):
1440.         cache.clear()
1441.         self.assertTrue(os.path.exists(self.dirname),
1442.                         'Expected cache.clear to keep the cache dir')
1443. 
1444.     def test_creates_cache_dir_if_nonexistent(self):
1445.         os.rmdir(self.dirname)
1446.         cache.set('foo', 'bar')
1447.         self.assertTrue(os.path.exists(self.dirname))
1448. 
1449.     def test_get_ignores_enoent(self):
1450.         cache.set('foo', 'bar')
1451.         os.unlink(cache._key_to_file('foo'))
1452.         # Returns the default instead of erroring.
1453.         self.assertEqual(cache.get('foo', 'baz'), 'baz')
1454. 
1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):
1456.         with mock.patch('builtins.open', side_effect=OSError):
1457.             with self.assertRaises(OSError):
1458.                 cache.get('foo')
1459. 
1460.     def test_empty_cache_file_considered_expired(self):
1461.         cache_file = cache._key_to_file('foo')
1462.         with open(cache_file, 'wb') as fh:
1463.             fh.write(b'')
1464.         with open(cache_file, 'rb') as fh:
1465.             self.assertIs(cache._is_expired(fh), True)
1466. 
1467. 
1468. class FileBasedCachePathLibTests(FileBasedCacheTests):
1469.     def mkdtemp(self):
1470.         tmp_dir = super().mkdtemp()
1471.         return Path(tmp_dir)
1472. 
1473. 
1474. @override_settings(CACHES={
1475.     'default': {
1476.         'BACKEND': 'cache.liberal_backend.CacheClass',
1477.     },
1478. })
1479. class CustomCacheKeyValidationTests(SimpleTestCase):
1480.     """
1481.     Tests for the ability to mixin a custom ``validate_key`` method to
1482.     a custom cache backend that otherwise inherits from a builtin
1483.     backend, and override the default key validation. Refs #6447.
1484.     """
1485.     def test_custom_key_validation(self):
1486.         # this key is both longer than 250 characters, and has spaces
1487.         key = 'some key with spaces' * 15
1488.         val = 'a value'
1489.         cache.set(key, val)
1490.         self.assertEqual(cache.get(key), val)
1491. 
1492. 
1493. @override_settings(
1494.     CACHES={
1495.         'default': {
1496.             'BACKEND': 'cache.closeable_cache.CacheClass',
1497.         }
1498.     }
1499. )
1500. class CacheClosingTests(SimpleTestCase):

File: tests/cache/tests.py
Line number range: 1501 - 2020
Content:
1501. 
1502.     def test_close(self):
1503.         self.assertFalse(cache.closed)
1504.         signals.request_finished.send(self.__class__)
1505.         self.assertTrue(cache.closed)
1506. 
1507. 
1508. DEFAULT_MEMORY_CACHES_SETTINGS = {
1509.     'default': {
1510.         'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1511.         'LOCATION': 'unique-snowflake',
1512.     }
1513. }
1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)
1515. NEVER_EXPIRING_CACHES_SETTINGS['default']['TIMEOUT'] = None
1516. 
1517. 
1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):
1519.     """
1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will
1521.     set non-expiring keys.
1522.     """
1523.     def setUp(self):
1524.         # The 5 minute (300 seconds) default expiration time for keys is
1525.         # defined in the implementation of the initializer method of the
1526.         # BaseCache type.
1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout
1528. 
1529.     def tearDown(self):
1530.         del(self.DEFAULT_TIMEOUT)
1531. 
1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):
1533.         """The default expiration time of a cache key is 5 minutes.
1534. 
1535.         This value is defined in
1536.         django.core.cache.backends.base.BaseCache.__init__().
1537.         """
1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)
1539. 
1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):
1541.         """Caches that have the TIMEOUT parameter undefined in the default
1542.         settings will use the default 5 minute timeout.
1543.         """
1544.         cache = caches[DEFAULT_CACHE_ALIAS]
1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)
1546. 
1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):
1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the
1550.         default settings with have `None` as the default timeout.
1551. 
1552.         This means "no timeout".
1553.         """
1554.         cache = caches[DEFAULT_CACHE_ALIAS]
1555.         self.assertIsNone(cache.default_timeout)
1556.         self.assertIsNone(cache.get_backend_timeout())
1557. 
1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)
1559.     def test_caches_with_unset_timeout_set_expiring_key(self):
1560.         """Memory caches that have the TIMEOUT parameter unset will set cache
1561.         keys having the default 5 minute timeout.
1562.         """
1563.         key = "my-key"
1564.         value = "my-value"
1565.         cache = caches[DEFAULT_CACHE_ALIAS]
1566.         cache.set(key, value)
1567.         cache_key = cache.make_key(key)
1568.         self.assertIsNotNone(cache._expire_info[cache_key])
1569. 
1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):
1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set
1573.         a non expiring key by default.
1574.         """
1575.         key = "another-key"
1576.         value = "another-value"
1577.         cache = caches[DEFAULT_CACHE_ALIAS]
1578.         cache.set(key, value)
1579.         cache_key = cache.make_key(key)
1580.         self.assertIsNone(cache._expire_info[cache_key])
1581. 
1582. 
1583. @override_settings(
1584.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1585.     CACHE_MIDDLEWARE_SECONDS=1,
1586.     CACHES={
1587.         'default': {
1588.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1589.         },
1590.     },
1591.     USE_I18N=False,
1592.     ALLOWED_HOSTS=['.example.com'],
1593. )
1594. class CacheUtils(SimpleTestCase):
1595.     """TestCase for django.utils.cache functions."""
1596.     host = 'www.example.com'
1597.     path = '/cache/test/'
1598.     factory = RequestFactory(HTTP_HOST=host)
1599. 
1600.     def tearDown(self):
1601.         cache.clear()
1602. 
1603.     def _get_request_cache(self, method='GET', query_string=None, update_cache=None):
1604.         request = self._get_request(self.host, self.path,
1605.                                     method, query_string=query_string)
1606.         request._cache_update_cache = True if not update_cache else update_cache
1607.         return request
1608. 
1609.     def test_patch_vary_headers(self):
1610.         headers = (
1611.             # Initial vary, new headers, resulting vary.
1612.             (None, ('Accept-Encoding',), 'Accept-Encoding'),
1613.             ('Accept-Encoding', ('accept-encoding',), 'Accept-Encoding'),
1614.             ('Accept-Encoding', ('ACCEPT-ENCODING',), 'Accept-Encoding'),
1615.             ('Cookie', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1616.             ('Cookie, Accept-Encoding', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1617.             ('Cookie, Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1618.             (None, ('Accept-Encoding', 'COOKIE'), 'Accept-Encoding, COOKIE'),
1619.             ('Cookie,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1620.             ('Cookie    ,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1621.             ('*', ('Accept-Language', 'Cookie'), '*'),
1622.             ('Accept-Language, Cookie', ('*',), '*'),
1623.         )
1624.         for initial_vary, newheaders, resulting_vary in headers:
1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):
1626.                 response = HttpResponse()
1627.                 if initial_vary is not None:
1628.                     response['Vary'] = initial_vary
1629.                 patch_vary_headers(response, newheaders)
1630.                 self.assertEqual(response['Vary'], resulting_vary)
1631. 
1632.     def test_get_cache_key(self):
1633.         request = self.factory.get(self.path)
1634.         response = HttpResponse()
1635.         # Expect None if no headers have been set yet.
1636.         self.assertIsNone(get_cache_key(request))
1637.         # Set headers to an empty list.
1638.         learn_cache_key(request, response)
1639. 
1640.         self.assertEqual(
1641.             get_cache_key(request),
1642.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1643.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1644.         )
1645.         # A specified key_prefix is taken into account.
1646.         key_prefix = 'localprefix'
1647.         learn_cache_key(request, response, key_prefix=key_prefix)
1648.         self.assertEqual(
1649.             get_cache_key(request, key_prefix=key_prefix),
1650.             'views.decorators.cache.cache_page.localprefix.GET.'
1651.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1652.         )
1653. 
1654.     def test_get_cache_key_with_query(self):
1655.         request = self.factory.get(self.path, {'test': 1})
1656.         response = HttpResponse()
1657.         # Expect None if no headers have been set yet.
1658.         self.assertIsNone(get_cache_key(request))
1659.         # Set headers to an empty list.
1660.         learn_cache_key(request, response)
1661.         # The querystring is taken into account.
1662.         self.assertEqual(
1663.             get_cache_key(request),
1664.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1665.             'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e'
1666.         )
1667. 
1668.     def test_cache_key_varies_by_url(self):
1669.         """
1670.         get_cache_key keys differ by fully-qualified URL instead of path
1671.         """
1672.         request1 = self.factory.get(self.path, HTTP_HOST='sub-1.example.com')
1673.         learn_cache_key(request1, HttpResponse())
1674.         request2 = self.factory.get(self.path, HTTP_HOST='sub-2.example.com')
1675.         learn_cache_key(request2, HttpResponse())
1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))
1677. 
1678.     def test_learn_cache_key(self):
1679.         request = self.factory.head(self.path)
1680.         response = HttpResponse()
1681.         response['Vary'] = 'Pony'
1682.         # Make sure that the Vary header is added to the key hash
1683.         learn_cache_key(request, response)
1684. 
1685.         self.assertEqual(
1686.             get_cache_key(request),
1687.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1688.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1689.         )
1690. 
1691.     def test_patch_cache_control(self):
1692.         tests = (
1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts
1694.             (None, {'private': True}, {'private'}),
1695.             ('', {'private': True}, {'private'}),
1696.             # no-cache.
1697.             ('', {'no_cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1698.             ('', {'no-cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1699.             ('no-cache=Set-Cookie', {'no_cache': True}, {'no-cache'}),
1700.             ('no-cache=Set-Cookie,no-cache=Link', {'no_cache': True}, {'no-cache'}),
1701.             ('no-cache=Set-Cookie', {'no_cache': 'Link'}, {'no-cache=Set-Cookie', 'no-cache=Link'}),
1702.             (
1703.                 'no-cache=Set-Cookie,no-cache=Link',
1704.                 {'no_cache': 'Custom'},
1705.                 {'no-cache=Set-Cookie', 'no-cache=Link', 'no-cache=Custom'},
1706.             ),
1707.             # Test whether private/public attributes are mutually exclusive
1708.             ('private', {'private': True}, {'private'}),
1709.             ('private', {'public': True}, {'public'}),
1710.             ('public', {'public': True}, {'public'}),
1711.             ('public', {'private': True}, {'private'}),
1712.             ('must-revalidate,max-age=60,private', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1713.             ('must-revalidate,max-age=60,public', {'private': True}, {'must-revalidate', 'max-age=60', 'private'}),
1714.             ('must-revalidate,max-age=60', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1715.         )
1716. 
1717.         cc_delim_re = re.compile(r'\s*,\s*')
1718. 
1719.         for initial_cc, newheaders, expected_cc in tests:
1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):
1721.                 response = HttpResponse()
1722.                 if initial_cc is not None:
1723.                     response['Cache-Control'] = initial_cc
1724.                 patch_cache_control(response, **newheaders)
1725.                 parts = set(cc_delim_re.split(response['Cache-Control']))
1726.                 self.assertEqual(parts, expected_cc)
1727. 
1728. 
1729. @override_settings(
1730.     CACHES={
1731.         'default': {
1732.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1733.             'KEY_PREFIX': 'cacheprefix',
1734.         },
1735.     },
1736. )
1737. class PrefixedCacheUtils(CacheUtils):
1738.     pass
1739. 
1740. 
1741. @override_settings(
1742.     CACHE_MIDDLEWARE_SECONDS=60,
1743.     CACHE_MIDDLEWARE_KEY_PREFIX='test',
1744.     CACHES={
1745.         'default': {
1746.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1747.         },
1748.     },
1749. )
1750. class CacheHEADTest(SimpleTestCase):
1751.     path = '/cache/test/'
1752.     factory = RequestFactory()
1753. 
1754.     def tearDown(self):
1755.         cache.clear()
1756. 
1757.     def _set_cache(self, request, msg):
1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)
1759. 
1760.     def test_head_caches_correctly(self):
1761.         test_content = 'test content'
1762. 
1763.         request = self.factory.head(self.path)
1764.         request._cache_update_cache = True
1765.         self._set_cache(request, test_content)
1766. 
1767.         request = self.factory.head(self.path)
1768.         request._cache_update_cache = True
1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1770.         self.assertIsNotNone(get_cache_data)
1771.         self.assertEqual(test_content.encode(), get_cache_data.content)
1772. 
1773.     def test_head_with_cached_get(self):
1774.         test_content = 'test content'
1775. 
1776.         request = self.factory.get(self.path)
1777.         request._cache_update_cache = True
1778.         self._set_cache(request, test_content)
1779. 
1780.         request = self.factory.head(self.path)
1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1782.         self.assertIsNotNone(get_cache_data)
1783.         self.assertEqual(test_content.encode(), get_cache_data.content)
1784. 
1785. 
1786. @override_settings(
1787.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1788.     CACHES={
1789.         'default': {
1790.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1791.         },
1792.     },
1793.     LANGUAGES=[
1794.         ('en', 'English'),
1795.         ('es', 'Spanish'),
1796.     ],
1797. )
1798. class CacheI18nTest(SimpleTestCase):
1799.     path = '/cache/test/'
1800.     factory = RequestFactory()
1801. 
1802.     def tearDown(self):
1803.         cache.clear()
1804. 
1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1806.     def test_cache_key_i18n_translation(self):
1807.         request = self.factory.get(self.path)
1808.         lang = translation.get_language()
1809.         response = HttpResponse()
1810.         key = learn_cache_key(request, response)
1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1812.         key2 = get_cache_key(request)
1813.         self.assertEqual(key, key2)
1814. 
1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):
1816.         request = self.factory.get(self.path)
1817.         request.META['HTTP_ACCEPT_LANGUAGE'] = accept_language
1818.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1819.         response = HttpResponse()
1820.         response['Vary'] = vary
1821.         key = learn_cache_key(request, response)
1822.         key2 = get_cache_key(request)
1823.         self.assertEqual(key, reference_key)
1824.         self.assertEqual(key2, reference_key)
1825. 
1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1827.     def test_cache_key_i18n_translation_accept_language(self):
1828.         lang = translation.get_language()
1829.         self.assertEqual(lang, 'en')
1830.         request = self.factory.get(self.path)
1831.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1832.         response = HttpResponse()
1833.         response['Vary'] = 'accept-encoding'
1834.         key = learn_cache_key(request, response)
1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1836.         self.check_accept_language_vary(
1837.             'en-us',
1838.             'cookie, accept-language, accept-encoding',
1839.             key
1840.         )
1841.         self.check_accept_language_vary(
1842.             'en-US',
1843.             'cookie, accept-encoding, accept-language',
1844.             key
1845.         )
1846.         self.check_accept_language_vary(
1847.             'en-US,en;q=0.8',
1848.             'accept-encoding, accept-language, cookie',
1849.             key
1850.         )
1851.         self.check_accept_language_vary(
1852.             'en-US,en;q=0.8,ko;q=0.6',
1853.             'accept-language, cookie, accept-encoding',
1854.             key
1855.         )
1856.         self.check_accept_language_vary(
1857.             'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 ',
1858.             'accept-encoding, cookie, accept-language',
1859.             key
1860.         )
1861.         self.check_accept_language_vary(
1862.             'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4',
1863.             'accept-language, accept-encoding, cookie',
1864.             key
1865.         )
1866.         self.check_accept_language_vary(
1867.             'ko;q=1.0,en;q=0.5',
1868.             'cookie, accept-language, accept-encoding',
1869.             key
1870.         )
1871.         self.check_accept_language_vary(
1872.             'ko, en',
1873.             'cookie, accept-encoding, accept-language',
1874.             key
1875.         )
1876.         self.check_accept_language_vary(
1877.             'ko-KR, en-US',
1878.             'accept-encoding, accept-language, cookie',
1879.             key
1880.         )
1881. 
1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)
1883.     def test_cache_key_i18n_formatting(self):
1884.         request = self.factory.get(self.path)
1885.         lang = translation.get_language()
1886.         response = HttpResponse()
1887.         key = learn_cache_key(request, response)
1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")
1889.         key2 = get_cache_key(request)
1890.         self.assertEqual(key, key2)
1891. 
1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)
1893.     def test_cache_key_i18n_timezone(self):
1894.         request = self.factory.get(self.path)
1895.         tz = timezone.get_current_timezone_name()
1896.         response = HttpResponse()
1897.         key = learn_cache_key(request, response)
1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")
1899.         key2 = get_cache_key(request)
1900.         self.assertEqual(key, key2)
1901. 
1902.     @override_settings(USE_I18N=False, USE_L10N=False)
1903.     def test_cache_key_no_i18n(self):
1904.         request = self.factory.get(self.path)
1905.         lang = translation.get_language()
1906.         tz = timezone.get_current_timezone_name()
1907.         response = HttpResponse()
1908.         key = learn_cache_key(request, response)
1909.         self.assertNotIn(lang, key, "Cache keys shouldn't include the language name when i18n isn't active")
1910.         self.assertNotIn(tz, key, "Cache keys shouldn't include the time zone name when i18n isn't active")
1911. 
1912.     @override_settings(
1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1914.         CACHE_MIDDLEWARE_SECONDS=60,
1915.         USE_I18N=True,
1916.     )
1917.     def test_middleware(self):
1918.         def set_cache(request, lang, msg):
1919.             def get_response(req):
1920.                 return HttpResponse(msg)
1921. 
1922.             translation.activate(lang)
1923.             return UpdateCacheMiddleware(get_response)(request)
1924. 
1925.         # cache with non empty request.GET
1926.         request = self.factory.get(self.path, {'foo': 'bar', 'other': 'true'})
1927.         request._cache_update_cache = True
1928. 
1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1930.         # first access, cache must return None
1931.         self.assertIsNone(get_cache_data)
1932.         content = 'Check for cache with QUERY_STRING'
1933. 
1934.         def get_response(req):
1935.             return HttpResponse(content)
1936. 
1937.         UpdateCacheMiddleware(get_response)(request)
1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1939.         # cache must return content
1940.         self.assertIsNotNone(get_cache_data)
1941.         self.assertEqual(get_cache_data.content, content.encode())
1942.         # different QUERY_STRING, cache must be empty
1943.         request = self.factory.get(self.path, {'foo': 'bar', 'somethingelse': 'true'})
1944.         request._cache_update_cache = True
1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1946.         self.assertIsNone(get_cache_data)
1947. 
1948.         # i18n tests
1949.         en_message = "Hello world!"
1950.         es_message = "Hola mundo!"
1951. 
1952.         request = self.factory.get(self.path)
1953.         request._cache_update_cache = True
1954.         set_cache(request, 'en', en_message)
1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1956.         # The cache can be recovered
1957.         self.assertIsNotNone(get_cache_data)
1958.         self.assertEqual(get_cache_data.content, en_message.encode())
1959.         # change the session language and set content
1960.         request = self.factory.get(self.path)
1961.         request._cache_update_cache = True
1962.         set_cache(request, 'es', es_message)
1963.         # change again the language
1964.         translation.activate('en')
1965.         # retrieve the content from cache
1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1967.         self.assertEqual(get_cache_data.content, en_message.encode())
1968.         # change again the language
1969.         translation.activate('es')
1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1971.         self.assertEqual(get_cache_data.content, es_message.encode())
1972.         # reset the language
1973.         translation.deactivate()
1974. 
1975.     @override_settings(
1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1977.         CACHE_MIDDLEWARE_SECONDS=60,
1978.     )
1979.     def test_middleware_doesnt_cache_streaming_response(self):
1980.         request = self.factory.get(self.path)
1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1982.         self.assertIsNone(get_cache_data)
1983. 
1984.         def get_stream_response(req):
1985.             return StreamingHttpResponse(['Check for cache with streaming content.'])
1986. 
1987.         UpdateCacheMiddleware(get_stream_response)(request)
1988. 
1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1990.         self.assertIsNone(get_cache_data)
1991. 
1992. 
1993. @override_settings(
1994.     CACHES={
1995.         'default': {
1996.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1997.             'KEY_PREFIX': 'cacheprefix'
1998.         },
1999.     },
2000. )
2001. class PrefixedCacheI18nTest(CacheI18nTest):
2002.     pass
2003. 
2004. 
2005. def hello_world_view(request, value):
2006.     return HttpResponse('Hello World %s' % value)
2007. 
2008. 
2009. def csrf_view(request):
2010.     return HttpResponse(csrf(request)['csrf_token'])
2011. 
2012. 
2013. @override_settings(
2014.     CACHE_MIDDLEWARE_ALIAS='other',
2015.     CACHE_MIDDLEWARE_KEY_PREFIX='middlewareprefix',
2016.     CACHE_MIDDLEWARE_SECONDS=30,
2017.     CACHES={
2018.         'default': {
2019.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
2020.         },


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 14:23:04,771 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user is reporting a bug in the `_cull` method of the database cache backend.\n   - This test, `test_cull`, directly invokes the culling logic by calling the `_perform_cull_test` helper function.\n\n2. Extended relevance:\n   - This context is part of `BaseCacheTests`, a suite of tests run against multiple cache backends, including the database backend where the bug occurs.\n   - It demonstrates the standard procedure for testing the culling functionality, which is essential for understanding how to reproduce or test a fix for the reported bug.', relative_path='tests/cache/tests.py', start_line=618, end_line=620), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's bug is in the `_cull` method of the `DatabaseCache` backend.\n   - This code provides the essential setup for any test targeting the `DatabaseCache`.\n\n2. Extended relevance:\n   - It shows the `@override_settings` decorator used to specify the `DatabaseCache` backend and a custom table name.\n   - The `setUp` and `tearDown` methods demonstrate how the cache table is created and destroyed using the `createcachetable` management command, which is a necessary step for any database cache test to run.", relative_path='tests/cache/tests.py', start_line=999, end_line=1017), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug occurs in the `_cull` method of the database cache.\n   - This test, `test_zero_cull`, is defined within `DBCacheTests` and specifically targets a culling scenario (`CULL_FREQUENCY=0`) on the database backend.\n\n2. Extended relevance:\n   - It overrides the base test to provide an assertion specific to how the database backend handles this culling strategy.\n   - This is a highly relevant example of a test that verifies the behavior of the exact component (database cache culling) mentioned in the bug report.', relative_path='tests/cache/tests.py', start_line=1040, end_line=1042), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is reporting a bug in the `_cull` method, which is triggered when the number of cache entries exceeds `MAX_ENTRIES`.\n   - This test helper, `_perform_cull_test`, provides the exact logic for testing this scenario.\n\n2. Extended relevance:\n   - It programmatically fills the cache to force a cull operation and then asserts that the cache size has been reduced.\n   - Understanding this helper is crucial as it's the foundation for all culling tests in the file, including those run against the database backend where the bug is found.", relative_path='tests/cache/tests.py', start_line=601, end_line=617), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug is related to cache culling (evicting items when the cache is full).\n   - This test, `test_lru_get`, demonstrates a culling scenario in the `LocMemCache` based on a Least Recently Used (LRU) strategy, which is conceptually similar to the `MAX_ENTRIES` culling in the database backend.\n\n2. Extended relevance:\n   - It shows a pattern for testing culling logic: fill the cache, access certain items to influence their position in the eviction order, add another item to trigger the cull, and then assert that the correct items were evicted.\n   - This provides a valuable example of how to test the *outcome* of an eviction policy, which is relevant to the bug.', relative_path='tests/cache/tests.py', start_line=1199, end_line=1212)]
2025-10-06 14:23:04,772 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/cache/tests.py', content="618.     def test_cull(self):\n619.         self._perform_cull_test('cull', 50, 29)\n620. ", start_line_number=618, end_line_number=620), Context(relative_path='tests/cache/tests.py', content="999. @override_settings(CACHES=caches_setting_for_tests(\n1000.     BACKEND='django.core.cache.backends.db.DatabaseCache',\n1001.     # Spaces are used in the table name to ensure quoting/escaping is working\n1002.     LOCATION='test cache table'\n1003. ))\n1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):\n1005. \n1006.     available_apps = ['cache']\n1007. \n1008.     def setUp(self):\n1009.         # The super calls needs to happen first for the settings override.\n1010.         super().setUp()\n1011.         self.create_table()\n1012. \n1013.     def tearDown(self):\n1014.         # The super call needs to happen first because it uses the database.\n1015.         super().tearDown()\n1016.         self.drop_table()\n1017. ", start_line_number=999, end_line_number=1017), Context(relative_path='tests/cache/tests.py', content="1040.     def test_zero_cull(self):\n1041.         self._perform_cull_test('zero_cull', 50, 18)\n1042. ", start_line_number=1040, end_line_number=1042), Context(relative_path='tests/cache/tests.py', content='601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n602.         try:\n603.             cull_cache = caches[cull_cache_name]\n604.         except InvalidCacheBackendError:\n605.             self.skipTest("Culling isn\'t implemented.")\n606. \n607.         # Create initial cache key entries. This will overflow the cache,\n608.         # causing a cull.\n609.         for i in range(1, initial_count):\n610.             cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n611.         count = 0\n612.         # Count how many keys are left in the cache.\n613.         for i in range(1, initial_count):\n614.             if cull_cache.has_key(\'cull%d\' % i):\n615.                 count += 1\n616.         self.assertEqual(count, final_count)\n617. ', start_line_number=601, end_line_number=617), Context(relative_path='tests/cache/tests.py', content='1199.     @limit_locmem_entries\n1200.     def test_lru_get(self):\n1201.         """get() moves cache keys."""\n1202.         for key in range(9):\n1203.             cache.set(key, key, timeout=None)\n1204.         for key in range(6):\n1205.             self.assertEqual(cache.get(key), key)\n1206.         cache.set(9, 9, timeout=None)\n1207.         for key in range(6):\n1208.             self.assertEqual(cache.get(key), key)\n1209.         for key in range(6, 9):\n1210.             self.assertIsNone(cache.get(key))\n1211.         self.assertEqual(cache.get(9), 9)\n1212. ', start_line_number=1199, end_line_number=1212)]
2025-10-06 14:23:04,772 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 14:23:04,773 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
â”œâ”€â”€ .github
|   â”œâ”€â”€ FUNDING.yml
|   â””â”€â”€ SECURITY.md
â”œâ”€â”€ .tx
â”œâ”€â”€ CONTRIBUTING.rst
â”œâ”€â”€ Gruntfile.js
â”œâ”€â”€ README.rst
â”œâ”€â”€ django
|   â”œâ”€â”€ __init__.py
|   â”œâ”€â”€ __main__.py
|   â”œâ”€â”€ apps
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ config.py
|   |   â””â”€â”€ registry.py
|   â”œâ”€â”€ bin
|   |   â””â”€â”€ django-admin.py
|   â”œâ”€â”€ conf
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ app_template
|   |   |   â””â”€â”€ migrations
|   |   â”œâ”€â”€ global_settings.py
|   |   â”œâ”€â”€ locale
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ af
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ar_DZ
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ast
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ be
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ br
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ de_CH
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ dsb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_NI
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_PR
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hsb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hy
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ia
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ io
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ kab
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ kk
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ky
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ lb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mr
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ my
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ne
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ os
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ pa
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sw
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tg
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tt
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ udm
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ur
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â””â”€â”€ zh_Hant
|   |   |       â”œâ”€â”€ LC_MESSAGES
|   |   |       â”œâ”€â”€ __init__.py
|   |   |       â””â”€â”€ formats.py
|   |   â”œâ”€â”€ project_template
|   |   |   â””â”€â”€ project_name
|   |   â””â”€â”€ urls
|   |       â”œâ”€â”€ __init__.py
|   |       â”œâ”€â”€ i18n.py
|   |       â””â”€â”€ static.py
|   â”œâ”€â”€ contrib
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ admin
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ actions.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ decorators.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ filters.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ helpers.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ am
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_logentry_remove_auto_add.py
|   |   |   |   â”œâ”€â”€ 0003_logentry_add_action_flag_choices.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ options.py
|   |   |   â”œâ”€â”€ sites.py
|   |   |   â”œâ”€â”€ static
|   |   |   |   â””â”€â”€ admin
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â”œâ”€â”€ admin
|   |   |   |   â””â”€â”€ registration
|   |   |   â”œâ”€â”€ templatetags
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ admin_list.py
|   |   |   |   â”œâ”€â”€ admin_modify.py
|   |   |   |   â”œâ”€â”€ admin_urls.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ log.py
|   |   |   â”œâ”€â”€ tests.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â”œâ”€â”€ views
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ autocomplete.py
|   |   |   |   â”œâ”€â”€ decorators.py
|   |   |   |   â””â”€â”€ main.py
|   |   |   â””â”€â”€ widgets.py
|   |   â”œâ”€â”€ admindocs
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ admin_doc
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ auth
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ backends.py
|   |   |   â”œâ”€â”€ base_user.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ context_processors.py
|   |   |   â”œâ”€â”€ decorators.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ handlers
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ modwsgi.py
|   |   |   â”œâ”€â”€ hashers.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_alter_permission_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0003_alter_user_email_max_length.py
|   |   |   |   â”œâ”€â”€ 0004_alter_user_username_opts.py
|   |   |   |   â”œâ”€â”€ 0005_alter_user_last_login_null.py
|   |   |   |   â”œâ”€â”€ 0006_require_contenttypes_0002.py
|   |   |   |   â”œâ”€â”€ 0007_alter_validators_add_error_messages.py
|   |   |   |   â”œâ”€â”€ 0008_alter_user_username_max_length.py
|   |   |   |   â”œâ”€â”€ 0009_alter_user_last_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0010_alter_group_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0011_update_proxy_permissions.py
|   |   |   |   â”œâ”€â”€ 0012_alter_user_first_name_max_length.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ mixins.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ password_validation.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â”œâ”€â”€ auth
|   |   |   |   â””â”€â”€ registration
|   |   |   â”œâ”€â”€ tokens.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ validators.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ contenttypes
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ fields.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_remove_content_type_name.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ flatpages
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ sitemaps.py
|   |   |   â”œâ”€â”€ templatetags
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ flatpages.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ gis
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ options.py
|   |   |   |   â””â”€â”€ widgets.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ db
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ backends
|   |   |   |   â””â”€â”€ models
|   |   |   â”œâ”€â”€ feeds.py
|   |   |   â”œâ”€â”€ forms
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ fields.py
|   |   |   |   â””â”€â”€ widgets.py
|   |   |   â”œâ”€â”€ gdal
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ datasource.py
|   |   |   |   â”œâ”€â”€ driver.py
|   |   |   |   â”œâ”€â”€ envelope.py
|   |   |   |   â”œâ”€â”€ error.py
|   |   |   |   â”œâ”€â”€ feature.py
|   |   |   |   â”œâ”€â”€ field.py
|   |   |   |   â”œâ”€â”€ geometries.py
|   |   |   |   â”œâ”€â”€ geomtype.py
|   |   |   |   â”œâ”€â”€ layer.py
|   |   |   |   â”œâ”€â”€ libgdal.py
|   |   |   |   â”œâ”€â”€ prototypes
|   |   |   |   â”œâ”€â”€ raster
|   |   |   |   â””â”€â”€ srs.py
|   |   |   â”œâ”€â”€ geoip2
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ resources.py
|   |   |   â”œâ”€â”€ geometry.py
|   |   |   â”œâ”€â”€ geos
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ collections.py
|   |   |   |   â”œâ”€â”€ coordseq.py
|   |   |   |   â”œâ”€â”€ error.py
|   |   |   |   â”œâ”€â”€ factory.py
|   |   |   |   â”œâ”€â”€ geometry.py
|   |   |   |   â”œâ”€â”€ io.py
|   |   |   |   â”œâ”€â”€ libgeos.py
|   |   |   |   â”œâ”€â”€ linestring.py
|   |   |   |   â”œâ”€â”€ mutable_list.py
|   |   |   |   â”œâ”€â”€ point.py
|   |   |   |   â”œâ”€â”€ polygon.py
|   |   |   |   â”œâ”€â”€ prepared.py
|   |   |   |   â””â”€â”€ prototypes
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ measure.py
|   |   |   â”œâ”€â”€ ptr.py
|   |   |   â”œâ”€â”€ serializers
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ geojson.py
|   |   |   â”œâ”€â”€ shortcuts.py
|   |   |   â”œâ”€â”€ sitemaps
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ kml.py
|   |   |   |   â””â”€â”€ views.py
|   |   |   â”œâ”€â”€ static
|   |   |   |   â””â”€â”€ gis
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ gis
|   |   |   â”œâ”€â”€ utils
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ layermapping.py
|   |   |   |   â”œâ”€â”€ ogrinfo.py
|   |   |   |   â”œâ”€â”€ ogrinspect.py
|   |   |   |   â””â”€â”€ srs.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ humanize
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ ms
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â””â”€â”€ templatetags
|   |   |       â”œâ”€â”€ __init__.py
|   |   |       â””â”€â”€ humanize.py
|   |   â”œâ”€â”€ messages
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ api.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ constants.py
|   |   |   â”œâ”€â”€ context_processors.py
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ storage
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ cookie.py
|   |   |   |   â”œâ”€â”€ fallback.py
|   |   |   |   â””â”€â”€ session.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ postgres
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ aggregates
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ general.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â””â”€â”€ statistics.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ constraints.py
|   |   |   â”œâ”€â”€ fields
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ array.py
|   |   |   |   â”œâ”€â”€ citext.py
|   |   |   |   â”œâ”€â”€ hstore.py
|   |   |   |   â”œâ”€â”€ jsonb.py
|   |   |   |   â”œâ”€â”€ ranges.py
|   |   |   |   â””â”€â”€ utils.py
|   |   |   â”œâ”€â”€ forms
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ array.py
|   |   |   |   â”œâ”€â”€ hstore.py
|   |   |   |   â”œâ”€â”€ jsonb.py
|   |   |   |   â””â”€â”€ ranges.py
|   |   |   â”œâ”€â”€ functions.py
|   |   |   â”œâ”€â”€ indexes.py
|   |   |   â”œâ”€â”€ jinja2
|   |   |   |   â””â”€â”€ postgres
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ lookups.py
|   |   |   â”œâ”€â”€ operations.py
|   |   |   â”œâ”€â”€ search.py
|   |   |   â”œâ”€â”€ serializers.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ postgres
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ validators.py
|   |   â”œâ”€â”€ redirects
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â””â”€â”€ models.py
|   |   â”œâ”€â”€ sessions
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ cache.py
|   |   |   |   â”œâ”€â”€ cached_db.py
|   |   |   |   â”œâ”€â”€ db.py
|   |   |   |   â”œâ”€â”€ file.py
|   |   |   |   â””â”€â”€ signed_cookies.py
|   |   |   â”œâ”€â”€ base_session.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â””â”€â”€ serializers.py
|   |   â”œâ”€â”€ sitemaps
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ templates
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ sites
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management.py
|   |   |   â”œâ”€â”€ managers.py
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_alter_domain_unique.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ requests.py
|   |   |   â””â”€â”€ shortcuts.py
|   |   â”œâ”€â”€ staticfiles
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ finders.py
|   |   |   â”œâ”€â”€ handlers.py
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ storage.py
|   |   |   â”œâ”€â”€ testing.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â””â”€â”€ syndication
|   |       â”œâ”€â”€ __init__.py
|   |       â”œâ”€â”€ apps.py
|   |       â””â”€â”€ views.py
|   â”œâ”€â”€ core
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ asgi.py
|   |   â”œâ”€â”€ cache
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ db.py
|   |   |   |   â”œâ”€â”€ dummy.py
|   |   |   |   â”œâ”€â”€ filebased.py
|   |   |   |   â”œâ”€â”€ locmem.py
|   |   |   |   â””â”€â”€ memcached.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ checks
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ async_checks.py
|   |   |   â”œâ”€â”€ caches.py
|   |   |   â”œâ”€â”€ compatibility
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ database.py
|   |   |   â”œâ”€â”€ messages.py
|   |   |   â”œâ”€â”€ model_checks.py
|   |   |   â”œâ”€â”€ registry.py
|   |   |   â”œâ”€â”€ security
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ csrf.py
|   |   |   |   â””â”€â”€ sessions.py
|   |   |   â”œâ”€â”€ templates.py
|   |   |   â”œâ”€â”€ translation.py
|   |   |   â””â”€â”€ urls.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ files
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ images.py
|   |   |   â”œâ”€â”€ locks.py
|   |   |   â”œâ”€â”€ move.py
|   |   |   â”œâ”€â”€ storage.py
|   |   |   â”œâ”€â”€ temp.py
|   |   |   â”œâ”€â”€ uploadedfile.py
|   |   |   â”œâ”€â”€ uploadhandler.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ handlers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ asgi.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ exception.py
|   |   |   â””â”€â”€ wsgi.py
|   |   â”œâ”€â”€ mail
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ console.py
|   |   |   |   â”œâ”€â”€ dummy.py
|   |   |   |   â”œâ”€â”€ filebased.py
|   |   |   |   â”œâ”€â”€ locmem.py
|   |   |   |   â””â”€â”€ smtp.py
|   |   |   â”œâ”€â”€ message.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ management
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ color.py
|   |   |   â”œâ”€â”€ commands
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ check.py
|   |   |   |   â”œâ”€â”€ compilemessages.py
|   |   |   |   â”œâ”€â”€ createcachetable.py
|   |   |   |   â”œâ”€â”€ dbshell.py
|   |   |   |   â”œâ”€â”€ diffsettings.py
|   |   |   |   â”œâ”€â”€ dumpdata.py
|   |   |   |   â”œâ”€â”€ flush.py
|   |   |   |   â”œâ”€â”€ inspectdb.py
|   |   |   |   â”œâ”€â”€ loaddata.py
|   |   |   |   â”œâ”€â”€ makemessages.py
|   |   |   |   â”œâ”€â”€ makemigrations.py
|   |   |   |   â”œâ”€â”€ migrate.py
|   |   |   |   â”œâ”€â”€ runserver.py
|   |   |   |   â”œâ”€â”€ sendtestemail.py
|   |   |   |   â”œâ”€â”€ shell.py
|   |   |   |   â”œâ”€â”€ showmigrations.py
|   |   |   |   â”œâ”€â”€ sqlflush.py
|   |   |   |   â”œâ”€â”€ sqlmigrate.py
|   |   |   |   â”œâ”€â”€ sqlsequencereset.py
|   |   |   |   â”œâ”€â”€ squashmigrations.py
|   |   |   |   â”œâ”€â”€ startapp.py
|   |   |   |   â”œâ”€â”€ startproject.py
|   |   |   |   â”œâ”€â”€ test.py
|   |   |   |   â””â”€â”€ testserver.py
|   |   |   â”œâ”€â”€ sql.py
|   |   |   â”œâ”€â”€ templates.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ paginator.py
|   |   â”œâ”€â”€ serializers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ json.py
|   |   |   â”œâ”€â”€ jsonl.py
|   |   |   â”œâ”€â”€ python.py
|   |   |   â”œâ”€â”€ pyyaml.py
|   |   |   â””â”€â”€ xml_serializer.py
|   |   â”œâ”€â”€ servers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â””â”€â”€ basehttp.py
|   |   â”œâ”€â”€ signals.py
|   |   â”œâ”€â”€ signing.py
|   |   â”œâ”€â”€ validators.py
|   |   â””â”€â”€ wsgi.py
|   â”œâ”€â”€ db
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ backends
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ ddl_references.py
|   |   |   â”œâ”€â”€ dummy
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ features.py
|   |   |   â”œâ”€â”€ mysql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ compiler.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ oracle
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ functions.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â”œâ”€â”€ utils.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ postgresql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â””â”€â”€ schema.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ sqlite3
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â””â”€â”€ schema.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ migrations
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ autodetector.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ executor.py
|   |   |   â”œâ”€â”€ graph.py
|   |   |   â”œâ”€â”€ loader.py
|   |   |   â”œâ”€â”€ migration.py
|   |   |   â”œâ”€â”€ operations
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ fields.py
|   |   |   |   â”œâ”€â”€ models.py
|   |   |   |   â”œâ”€â”€ special.py
|   |   |   |   â””â”€â”€ utils.py
|   |   |   â”œâ”€â”€ optimizer.py
|   |   |   â”œâ”€â”€ questioner.py
|   |   |   â”œâ”€â”€ recorder.py
|   |   |   â”œâ”€â”€ serializer.py
|   |   |   â”œâ”€â”€ state.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ writer.py
|   |   â”œâ”€â”€ models
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ aggregates.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ constants.py
|   |   |   â”œâ”€â”€ constraints.py
|   |   |   â”œâ”€â”€ deletion.py
|   |   |   â”œâ”€â”€ enums.py
|   |   |   â”œâ”€â”€ expressions.py
|   |   |   â”œâ”€â”€ fields
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ files.py
|   |   |   |   â”œâ”€â”€ json.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â”œâ”€â”€ proxy.py
|   |   |   |   â”œâ”€â”€ related.py
|   |   |   |   â”œâ”€â”€ related_descriptors.py
|   |   |   |   â”œâ”€â”€ related_lookups.py
|   |   |   |   â””â”€â”€ reverse_related.py
|   |   |   â”œâ”€â”€ functions
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ comparison.py
|   |   |   |   â”œâ”€â”€ datetime.py
|   |   |   |   â”œâ”€â”€ math.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â”œâ”€â”€ text.py
|   |   |   |   â””â”€â”€ window.py
|   |   |   â”œâ”€â”€ indexes.py
|   |   |   â”œâ”€â”€ lookups.py
|   |   |   â”œâ”€â”€ manager.py
|   |   |   â”œâ”€â”€ options.py
|   |   |   â”œâ”€â”€ query.py
|   |   |   â”œâ”€â”€ query_utils.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ sql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ compiler.py
|   |   |   |   â”œâ”€â”€ constants.py
|   |   |   |   â”œâ”€â”€ datastructures.py
|   |   |   |   â”œâ”€â”€ query.py
|   |   |   |   â”œâ”€â”€ subqueries.py
|   |   |   |   â””â”€â”€ where.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ transaction.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ dispatch
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ dispatcher.py
|   |   â””â”€â”€ license.txt
|   â”œâ”€â”€ forms
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ boundfield.py
|   |   â”œâ”€â”€ fields.py
|   |   â”œâ”€â”€ forms.py
|   |   â”œâ”€â”€ formsets.py
|   |   â”œâ”€â”€ jinja2
|   |   |   â””â”€â”€ django
|   |   |       â””â”€â”€ forms
|   |   â”œâ”€â”€ models.py
|   |   â”œâ”€â”€ renderers.py
|   |   â”œâ”€â”€ templates
|   |   |   â””â”€â”€ django
|   |   |       â””â”€â”€ forms
|   |   â”œâ”€â”€ utils.py
|   |   â””â”€â”€ widgets.py
|   â”œâ”€â”€ http
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cookie.py
|   |   â”œâ”€â”€ multipartparser.py
|   |   â”œâ”€â”€ request.py
|   |   â””â”€â”€ response.py
|   â”œâ”€â”€ middleware
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ clickjacking.py
|   |   â”œâ”€â”€ common.py
|   |   â”œâ”€â”€ csrf.py
|   |   â”œâ”€â”€ gzip.py
|   |   â”œâ”€â”€ http.py
|   |   â”œâ”€â”€ locale.py
|   |   â””â”€â”€ security.py
|   â”œâ”€â”€ shortcuts.py
|   â”œâ”€â”€ template
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ backends
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ django.py
|   |   |   â”œâ”€â”€ dummy.py
|   |   |   â”œâ”€â”€ jinja2.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ base.py
|   |   â”œâ”€â”€ context.py
|   |   â”œâ”€â”€ context_processors.py
|   |   â”œâ”€â”€ defaultfilters.py
|   |   â”œâ”€â”€ defaulttags.py
|   |   â”œâ”€â”€ engine.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ library.py
|   |   â”œâ”€â”€ loader.py
|   |   â”œâ”€â”€ loader_tags.py
|   |   â”œâ”€â”€ loaders
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ app_directories.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ cached.py
|   |   |   â”œâ”€â”€ filesystem.py
|   |   |   â””â”€â”€ locmem.py
|   |   â”œâ”€â”€ response.py
|   |   â”œâ”€â”€ smartif.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ templatetags
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ i18n.py
|   |   â”œâ”€â”€ l10n.py
|   |   â”œâ”€â”€ static.py
|   |   â””â”€â”€ tz.py
|   â”œâ”€â”€ test
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ client.py
|   |   â”œâ”€â”€ html.py
|   |   â”œâ”€â”€ runner.py
|   |   â”œâ”€â”€ selenium.py
|   |   â”œâ”€â”€ signals.py
|   |   â”œâ”€â”€ testcases.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ urls
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ base.py
|   |   â”œâ”€â”€ conf.py
|   |   â”œâ”€â”€ converters.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ resolvers.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ utils
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ _os.py
|   |   â”œâ”€â”€ archive.py
|   |   â”œâ”€â”€ asyncio.py
|   |   â”œâ”€â”€ autoreload.py
|   |   â”œâ”€â”€ baseconv.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ crypto.py
|   |   â”œâ”€â”€ datastructures.py
|   |   â”œâ”€â”€ dateformat.py
|   |   â”œâ”€â”€ dateparse.py
|   |   â”œâ”€â”€ dates.py
|   |   â”œâ”€â”€ datetime_safe.py
|   |   â”œâ”€â”€ deconstruct.py
|   |   â”œâ”€â”€ decorators.py
|   |   â”œâ”€â”€ deprecation.py
|   |   â”œâ”€â”€ duration.py
|   |   â”œâ”€â”€ encoding.py
|   |   â”œâ”€â”€ feedgenerator.py
|   |   â”œâ”€â”€ formats.py
|   |   â”œâ”€â”€ functional.py
|   |   â”œâ”€â”€ hashable.py
|   |   â”œâ”€â”€ html.py
|   |   â”œâ”€â”€ http.py
|   |   â”œâ”€â”€ inspect.py
|   |   â”œâ”€â”€ ipv6.py
|   |   â”œâ”€â”€ itercompat.py
|   |   â”œâ”€â”€ jslex.py
|   |   â”œâ”€â”€ log.py
|   |   â”œâ”€â”€ lorem_ipsum.py
|   |   â”œâ”€â”€ module_loading.py
|   |   â”œâ”€â”€ numberformat.py
|   |   â”œâ”€â”€ regex_helper.py
|   |   â”œâ”€â”€ safestring.py
|   |   â”œâ”€â”€ termcolors.py
|   |   â”œâ”€â”€ text.py
|   |   â”œâ”€â”€ timesince.py
|   |   â”œâ”€â”€ timezone.py
|   |   â”œâ”€â”€ topological_sort.py
|   |   â”œâ”€â”€ translation
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ reloader.py
|   |   |   â”œâ”€â”€ template.py
|   |   |   â”œâ”€â”€ trans_null.py
|   |   |   â””â”€â”€ trans_real.py
|   |   â”œâ”€â”€ tree.py
|   |   â”œâ”€â”€ version.py
|   |   â””â”€â”€ xmlutils.py
|   â””â”€â”€ views
|       â”œâ”€â”€ __init__.py
|       â”œâ”€â”€ csrf.py
|       â”œâ”€â”€ debug.py
|       â”œâ”€â”€ decorators
|       |   â”œâ”€â”€ __init__.py
|       |   â”œâ”€â”€ cache.py
|       |   â”œâ”€â”€ clickjacking.py
|       |   â”œâ”€â”€ csrf.py
|       |   â”œâ”€â”€ debug.py
|       |   â”œâ”€â”€ gzip.py
|       |   â”œâ”€â”€ http.py
|       |   â””â”€â”€ vary.py
|       â”œâ”€â”€ defaults.py
|       â”œâ”€â”€ generic
|       |   â”œâ”€â”€ __init__.py
|       |   â”œâ”€â”€ base.py
|       |   â”œâ”€â”€ dates.py
|       |   â”œâ”€â”€ detail.py
|       |   â”œâ”€â”€ edit.py
|       |   â””â”€â”€ list.py
|       â”œâ”€â”€ i18n.py
|       â”œâ”€â”€ static.py
|       â””â”€â”€ templates
|           â””â”€â”€ technical_500.txt
â”œâ”€â”€ docs
|   â”œâ”€â”€ README.rst
|   â”œâ”€â”€ _ext
|   |   â””â”€â”€ djangodocs.py
|   â”œâ”€â”€ _theme
|   |   â”œâ”€â”€ djangodocs
|   |   |   â””â”€â”€ static
|   |   |       â””â”€â”€ fontawesome
|   |   â””â”€â”€ djangodocs-epub
|   |       â””â”€â”€ static
|   â”œâ”€â”€ conf.py
|   â”œâ”€â”€ contents.txt
|   â”œâ”€â”€ faq
|   |   â”œâ”€â”€ admin.txt
|   |   â”œâ”€â”€ contributing.txt
|   |   â”œâ”€â”€ general.txt
|   |   â”œâ”€â”€ help.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ install.txt
|   |   â”œâ”€â”€ models.txt
|   |   â”œâ”€â”€ troubleshooting.txt
|   |   â””â”€â”€ usage.txt
|   â”œâ”€â”€ glossary.txt
|   â”œâ”€â”€ howto
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ auth-remote-user.txt
|   |   â”œâ”€â”€ custom-file-storage.txt
|   |   â”œâ”€â”€ custom-lookups.txt
|   |   â”œâ”€â”€ custom-management-commands.txt
|   |   â”œâ”€â”€ custom-model-fields.txt
|   |   â”œâ”€â”€ custom-template-backend.txt
|   |   â”œâ”€â”€ custom-template-tags.txt
|   |   â”œâ”€â”€ deployment
|   |   |   â”œâ”€â”€ asgi
|   |   |   |   â”œâ”€â”€ daphne.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â””â”€â”€ uvicorn.txt
|   |   |   â”œâ”€â”€ checklist.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â””â”€â”€ wsgi
|   |   |       â”œâ”€â”€ apache-auth.txt
|   |   |       â”œâ”€â”€ gunicorn.txt
|   |   |       â”œâ”€â”€ index.txt
|   |   |       â”œâ”€â”€ modwsgi.txt
|   |   |       â””â”€â”€ uwsgi.txt
|   |   â”œâ”€â”€ error-reporting.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ initial-data.txt
|   |   â”œâ”€â”€ legacy-databases.txt
|   |   â”œâ”€â”€ outputting-csv.txt
|   |   â”œâ”€â”€ outputting-pdf.txt
|   |   â”œâ”€â”€ overriding-templates.txt
|   |   â”œâ”€â”€ static-files
|   |   |   â”œâ”€â”€ deployment.txt
|   |   |   â””â”€â”€ index.txt
|   |   â”œâ”€â”€ upgrade-version.txt
|   |   â”œâ”€â”€ windows.txt
|   |   â””â”€â”€ writing-migrations.txt
|   â”œâ”€â”€ index.txt
|   â”œâ”€â”€ internals
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ contributing
|   |   |   â”œâ”€â”€ bugs-and-features.txt
|   |   |   â”œâ”€â”€ committing-code.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ localizing.txt
|   |   |   â”œâ”€â”€ new-contributors.txt
|   |   |   â”œâ”€â”€ triaging-tickets.txt
|   |   |   â”œâ”€â”€ writing-code
|   |   |   |   â”œâ”€â”€ coding-style.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ javascript.txt
|   |   |   |   â”œâ”€â”€ submitting-patches.txt
|   |   |   |   â”œâ”€â”€ unit-tests.txt
|   |   |   |   â””â”€â”€ working-with-git.txt
|   |   |   â””â”€â”€ writing-documentation.txt
|   |   â”œâ”€â”€ deprecation.txt
|   |   â”œâ”€â”€ git.txt
|   |   â”œâ”€â”€ howto-release-django.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ mailing-lists.txt
|   |   â”œâ”€â”€ organization.txt
|   |   â”œâ”€â”€ release-process.txt
|   |   â””â”€â”€ security.txt
|   â”œâ”€â”€ intro
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ contributing.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ install.txt
|   |   â”œâ”€â”€ overview.txt
|   |   â”œâ”€â”€ reusable-apps.txt
|   |   â”œâ”€â”€ tutorial01.txt
|   |   â”œâ”€â”€ tutorial02.txt
|   |   â”œâ”€â”€ tutorial03.txt
|   |   â”œâ”€â”€ tutorial04.txt
|   |   â”œâ”€â”€ tutorial05.txt
|   |   â”œâ”€â”€ tutorial06.txt
|   |   â”œâ”€â”€ tutorial07.txt
|   |   â””â”€â”€ whatsnext.txt
|   â”œâ”€â”€ man
|   â”œâ”€â”€ misc
|   |   â”œâ”€â”€ api-stability.txt
|   |   â”œâ”€â”€ design-philosophies.txt
|   |   â”œâ”€â”€ distributions.txt
|   |   â””â”€â”€ index.txt
|   â”œâ”€â”€ ref
|   |   â”œâ”€â”€ applications.txt
|   |   â”œâ”€â”€ checks.txt
|   |   â”œâ”€â”€ class-based-views
|   |   |   â”œâ”€â”€ base.txt
|   |   |   â”œâ”€â”€ flattened-index.txt
|   |   |   â”œâ”€â”€ generic-date-based.txt
|   |   |   â”œâ”€â”€ generic-display.txt
|   |   |   â”œâ”€â”€ generic-editing.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ mixins-date-based.txt
|   |   |   â”œâ”€â”€ mixins-editing.txt
|   |   |   â”œâ”€â”€ mixins-multiple-object.txt
|   |   |   â”œâ”€â”€ mixins-simple.txt
|   |   |   â”œâ”€â”€ mixins-single-object.txt
|   |   |   â””â”€â”€ mixins.txt
|   |   â”œâ”€â”€ clickjacking.txt
|   |   â”œâ”€â”€ contrib
|   |   |   â”œâ”€â”€ admin
|   |   |   |   â”œâ”€â”€ _images
|   |   |   |   â”œâ”€â”€ actions.txt
|   |   |   |   â”œâ”€â”€ admindocs.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â””â”€â”€ javascript.txt
|   |   |   â”œâ”€â”€ auth.txt
|   |   |   â”œâ”€â”€ contenttypes.txt
|   |   |   â”œâ”€â”€ flatpages.txt
|   |   |   â”œâ”€â”€ gis
|   |   |   |   â”œâ”€â”€ admin.txt
|   |   |   |   â”œâ”€â”€ commands.txt
|   |   |   |   â”œâ”€â”€ db-api.txt
|   |   |   |   â”œâ”€â”€ deployment.txt
|   |   |   |   â”œâ”€â”€ feeds.txt
|   |   |   |   â”œâ”€â”€ forms-api.txt
|   |   |   |   â”œâ”€â”€ functions.txt
|   |   |   |   â”œâ”€â”€ gdal.txt
|   |   |   |   â”œâ”€â”€ geoip2.txt
|   |   |   |   â”œâ”€â”€ geoquerysets.txt
|   |   |   |   â”œâ”€â”€ geos.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ install
|   |   |   |   â”œâ”€â”€ layermapping.txt
|   |   |   |   â”œâ”€â”€ measure.txt
|   |   |   |   â”œâ”€â”€ model-api.txt
|   |   |   |   â”œâ”€â”€ ogrinspect.txt
|   |   |   |   â”œâ”€â”€ serializers.txt
|   |   |   |   â”œâ”€â”€ sitemaps.txt
|   |   |   |   â”œâ”€â”€ testing.txt
|   |   |   |   â”œâ”€â”€ tutorial.txt
|   |   |   |   â””â”€â”€ utils.txt
|   |   |   â”œâ”€â”€ humanize.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ messages.txt
|   |   |   â”œâ”€â”€ postgres
|   |   |   |   â”œâ”€â”€ aggregates.txt
|   |   |   |   â”œâ”€â”€ constraints.txt
|   |   |   |   â”œâ”€â”€ fields.txt
|   |   |   |   â”œâ”€â”€ forms.txt
|   |   |   |   â”œâ”€â”€ functions.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ indexes.txt
|   |   |   |   â”œâ”€â”€ lookups.txt
|   |   |   |   â”œâ”€â”€ operations.txt
|   |   |   |   â”œâ”€â”€ search.txt
|   |   |   |   â””â”€â”€ validators.txt
|   |   |   â”œâ”€â”€ redirects.txt
|   |   |   â”œâ”€â”€ sitemaps.txt
|   |   |   â”œâ”€â”€ sites.txt
|   |   |   â”œâ”€â”€ staticfiles.txt
|   |   |   â””â”€â”€ syndication.txt
|   |   â”œâ”€â”€ csrf.txt
|   |   â”œâ”€â”€ databases.txt
|   |   â”œâ”€â”€ django-admin.txt
|   |   â”œâ”€â”€ exceptions.txt
|   |   â”œâ”€â”€ files
|   |   |   â”œâ”€â”€ file.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ storage.txt
|   |   |   â””â”€â”€ uploads.txt
|   |   â”œâ”€â”€ forms
|   |   |   â”œâ”€â”€ api.txt
|   |   |   â”œâ”€â”€ fields.txt
|   |   |   â”œâ”€â”€ formsets.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ models.txt
|   |   |   â”œâ”€â”€ renderers.txt
|   |   |   â”œâ”€â”€ validation.txt
|   |   |   â””â”€â”€ widgets.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ middleware.txt
|   |   â”œâ”€â”€ migration-operations.txt
|   |   â”œâ”€â”€ models
|   |   |   â”œâ”€â”€ class.txt
|   |   |   â”œâ”€â”€ conditional-expressions.txt
|   |   |   â”œâ”€â”€ constraints.txt
|   |   |   â”œâ”€â”€ database-functions.txt
|   |   |   â”œâ”€â”€ expressions.txt
|   |   |   â”œâ”€â”€ fields.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ indexes.txt
|   |   |   â”œâ”€â”€ instances.txt
|   |   |   â”œâ”€â”€ lookups.txt
|   |   |   â”œâ”€â”€ meta.txt
|   |   |   â”œâ”€â”€ options.txt
|   |   |   â”œâ”€â”€ querysets.txt
|   |   |   â””â”€â”€ relations.txt
|   |   â”œâ”€â”€ paginator.txt
|   |   â”œâ”€â”€ request-response.txt
|   |   â”œâ”€â”€ schema-editor.txt
|   |   â”œâ”€â”€ settings.txt
|   |   â”œâ”€â”€ signals.txt
|   |   â”œâ”€â”€ template-response.txt
|   |   â”œâ”€â”€ templates
|   |   |   â”œâ”€â”€ api.txt
|   |   |   â”œâ”€â”€ builtins.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â””â”€â”€ language.txt
|   |   â”œâ”€â”€ unicode.txt
|   |   â”œâ”€â”€ urlresolvers.txt
|   |   â”œâ”€â”€ urls.txt
|   |   â”œâ”€â”€ utils.txt
|   |   â”œâ”€â”€ validators.txt
|   |   â””â”€â”€ views.txt
|   â”œâ”€â”€ releases
|   |   â”œâ”€â”€ 0.95.txt
|   |   â”œâ”€â”€ 0.96.txt
|   |   â”œâ”€â”€ 1.0-porting-guide.txt
|   |   â”œâ”€â”€ 1.0.1.txt
|   |   â”œâ”€â”€ 1.0.2.txt
|   |   â”œâ”€â”€ 1.0.txt
|   |   â”œâ”€â”€ 1.1.2.txt
|   |   â”œâ”€â”€ 1.1.3.txt
|   |   â”œâ”€â”€ 1.1.4.txt
|   |   â”œâ”€â”€ 1.1.txt
|   |   â”œâ”€â”€ 1.10.1.txt
|   |   â”œâ”€â”€ 1.10.2.txt
|   |   â”œâ”€â”€ 1.10.3.txt
|   |   â”œâ”€â”€ 1.10.4.txt
|   |   â”œâ”€â”€ 1.10.5.txt
|   |   â”œâ”€â”€ 1.10.6.txt
|   |   â”œâ”€â”€ 1.10.7.txt
|   |   â”œâ”€â”€ 1.10.8.txt
|   |   â”œâ”€â”€ 1.10.txt
|   |   â”œâ”€â”€ 1.11.1.txt
|   |   â”œâ”€â”€ 1.11.10.txt
|   |   â”œâ”€â”€ 1.11.11.txt
|   |   â”œâ”€â”€ 1.11.12.txt
|   |   â”œâ”€â”€ 1.11.13.txt
|   |   â”œâ”€â”€ 1.11.14.txt
|   |   â”œâ”€â”€ 1.11.15.txt
|   |   â”œâ”€â”€ 1.11.16.txt
|   |   â”œâ”€â”€ 1.11.17.txt
|   |   â”œâ”€â”€ 1.11.18.txt
|   |   â”œâ”€â”€ 1.11.19.txt
|   |   â”œâ”€â”€ 1.11.2.txt
|   |   â”œâ”€â”€ 1.11.20.txt
|   |   â”œâ”€â”€ 1.11.21.txt
|   |   â”œâ”€â”€ 1.11.22.txt
|   |   â”œâ”€â”€ 1.11.23.txt
|   |   â”œâ”€â”€ 1.11.24.txt
|   |   â”œâ”€â”€ 1.11.25.txt
|   |   â”œâ”€â”€ 1.11.26.txt
|   |   â”œâ”€â”€ 1.11.27.txt
|   |   â”œâ”€â”€ 1.11.28.txt
|   |   â”œâ”€â”€ 1.11.29.txt
|   |   â”œâ”€â”€ 1.11.3.txt
|   |   â”œâ”€â”€ 1.11.4.txt
|   |   â”œâ”€â”€ 1.11.5.txt
|   |   â”œâ”€â”€ 1.11.6.txt
|   |   â”œâ”€â”€ 1.11.7.txt
|   |   â”œâ”€â”€ 1.11.8.txt
|   |   â”œâ”€â”€ 1.11.9.txt
|   |   â”œâ”€â”€ 1.11.txt
|   |   â”œâ”€â”€ 1.2.1.txt
|   |   â”œâ”€â”€ 1.2.2.txt
|   |   â”œâ”€â”€ 1.2.3.txt
|   |   â”œâ”€â”€ 1.2.4.txt
|   |   â”œâ”€â”€ 1.2.5.txt
|   |   â”œâ”€â”€ 1.2.6.txt
|   |   â”œâ”€â”€ 1.2.7.txt
|   |   â”œâ”€â”€ 1.2.txt
|   |   â”œâ”€â”€ 1.3.1.txt
|   |   â”œâ”€â”€ 1.3.2.txt
|   |   â”œâ”€â”€ 1.3.3.txt
|   |   â”œâ”€â”€ 1.3.4.txt
|   |   â”œâ”€â”€ 1.3.5.txt
|   |   â”œâ”€â”€ 1.3.6.txt
|   |   â”œâ”€â”€ 1.3.7.txt
|   |   â”œâ”€â”€ 1.3.txt
|   |   â”œâ”€â”€ 1.4.1.txt
|   |   â”œâ”€â”€ 1.4.10.txt
|   |   â”œâ”€â”€ 1.4.11.txt
|   |   â”œâ”€â”€ 1.4.12.txt
|   |   â”œâ”€â”€ 1.4.13.txt
|   |   â”œâ”€â”€ 1.4.14.txt
|   |   â”œâ”€â”€ 1.4.15.txt
|   |   â”œâ”€â”€ 1.4.16.txt
|   |   â”œâ”€â”€ 1.4.17.txt
|   |   â”œâ”€â”€ 1.4.18.txt
|   |   â”œâ”€â”€ 1.4.19.txt
|   |   â”œâ”€â”€ 1.4.2.txt
|   |   â”œâ”€â”€ 1.4.20.txt
|   |   â”œâ”€â”€ 1.4.21.txt
|   |   â”œâ”€â”€ 1.4.22.txt
|   |   â”œâ”€â”€ 1.4.3.txt
|   |   â”œâ”€â”€ 1.4.4.txt
|   |   â”œâ”€â”€ 1.4.5.txt
|   |   â”œâ”€â”€ 1.4.6.txt
|   |   â”œâ”€â”€ 1.4.7.txt
|   |   â”œâ”€â”€ 1.4.8.txt
|   |   â”œâ”€â”€ 1.4.9.txt
|   |   â”œâ”€â”€ 1.4.txt
|   |   â”œâ”€â”€ 1.5.1.txt
|   |   â”œâ”€â”€ 1.5.10.txt
|   |   â”œâ”€â”€ 1.5.11.txt
|   |   â”œâ”€â”€ 1.5.12.txt
|   |   â”œâ”€â”€ 1.5.2.txt
|   |   â”œâ”€â”€ 1.5.3.txt
|   |   â”œâ”€â”€ 1.5.4.txt
|   |   â”œâ”€â”€ 1.5.5.txt
|   |   â”œâ”€â”€ 1.5.6.txt
|   |   â”œâ”€â”€ 1.5.7.txt
|   |   â”œâ”€â”€ 1.5.8.txt
|   |   â”œâ”€â”€ 1.5.9.txt
|   |   â”œâ”€â”€ 1.5.txt
|   |   â”œâ”€â”€ 1.6.1.txt
|   |   â”œâ”€â”€ 1.6.10.txt
|   |   â”œâ”€â”€ 1.6.11.txt
|   |   â”œâ”€â”€ 1.6.2.txt
|   |   â”œâ”€â”€ 1.6.3.txt
|   |   â”œâ”€â”€ 1.6.4.txt
|   |   â”œâ”€â”€ 1.6.5.txt
|   |   â”œâ”€â”€ 1.6.6.txt
|   |   â”œâ”€â”€ 1.6.7.txt
|   |   â”œâ”€â”€ 1.6.8.txt
|   |   â”œâ”€â”€ 1.6.9.txt
|   |   â”œâ”€â”€ 1.6.txt
|   |   â”œâ”€â”€ 1.7.1.txt
|   |   â”œâ”€â”€ 1.7.10.txt
|   |   â”œâ”€â”€ 1.7.11.txt
|   |   â”œâ”€â”€ 1.7.2.txt
|   |   â”œâ”€â”€ 1.7.3.txt
|   |   â”œâ”€â”€ 1.7.4.txt
|   |   â”œâ”€â”€ 1.7.5.txt
|   |   â”œâ”€â”€ 1.7.6.txt
|   |   â”œâ”€â”€ 1.7.7.txt
|   |   â”œâ”€â”€ 1.7.8.txt
|   |   â”œâ”€â”€ 1.7.9.txt
|   |   â”œâ”€â”€ 1.7.txt
|   |   â”œâ”€â”€ 1.8.1.txt
|   |   â”œâ”€â”€ 1.8.10.txt
|   |   â”œâ”€â”€ 1.8.11.txt
|   |   â”œâ”€â”€ 1.8.12.txt
|   |   â”œâ”€â”€ 1.8.13.txt
|   |   â”œâ”€â”€ 1.8.14.txt
|   |   â”œâ”€â”€ 1.8.15.txt
|   |   â”œâ”€â”€ 1.8.16.txt
|   |   â”œâ”€â”€ 1.8.17.txt
|   |   â”œâ”€â”€ 1.8.18.txt
|   |   â”œâ”€â”€ 1.8.19.txt
|   |   â”œâ”€â”€ 1.8.2.txt
|   |   â”œâ”€â”€ 1.8.3.txt
|   |   â”œâ”€â”€ 1.8.4.txt
|   |   â”œâ”€â”€ 1.8.5.txt
|   |   â”œâ”€â”€ 1.8.6.txt
|   |   â”œâ”€â”€ 1.8.7.txt
|   |   â”œâ”€â”€ 1.8.8.txt
|   |   â”œâ”€â”€ 1.8.9.txt
|   |   â”œâ”€â”€ 1.8.txt
|   |   â”œâ”€â”€ 1.9.1.txt
|   |   â”œâ”€â”€ 1.9.10.txt
|   |   â”œâ”€â”€ 1.9.11.txt
|   |   â”œâ”€â”€ 1.9.12.txt
|   |   â”œâ”€â”€ 1.9.13.txt
|   |   â”œâ”€â”€ 1.9.2.txt
|   |   â”œâ”€â”€ 1.9.3.txt
|   |   â”œâ”€â”€ 1.9.4.txt
|   |   â”œâ”€â”€ 1.9.5.txt
|   |   â”œâ”€â”€ 1.9.6.txt
|   |   â”œâ”€â”€ 1.9.7.txt
|   |   â”œâ”€â”€ 1.9.8.txt
|   |   â”œâ”€â”€ 1.9.9.txt
|   |   â”œâ”€â”€ 1.9.txt
|   |   â”œâ”€â”€ 2.0.1.txt
|   |   â”œâ”€â”€ 2.0.10.txt
|   |   â”œâ”€â”€ 2.0.11.txt
|   |   â”œâ”€â”€ 2.0.12.txt
|   |   â”œâ”€â”€ 2.0.13.txt
|   |   â”œâ”€â”€ 2.0.2.txt
|   |   â”œâ”€â”€ 2.0.3.txt
|   |   â”œâ”€â”€ 2.0.4.txt
|   |   â”œâ”€â”€ 2.0.5.txt
|   |   â”œâ”€â”€ 2.0.6.txt
|   |   â”œâ”€â”€ 2.0.7.txt
|   |   â”œâ”€â”€ 2.0.8.txt
|   |   â”œâ”€â”€ 2.0.9.txt
|   |   â”œâ”€â”€ 2.0.txt
|   |   â”œâ”€â”€ 2.1.1.txt
|   |   â”œâ”€â”€ 2.1.10.txt
|   |   â”œâ”€â”€ 2.1.11.txt
|   |   â”œâ”€â”€ 2.1.12.txt
|   |   â”œâ”€â”€ 2.1.13.txt
|   |   â”œâ”€â”€ 2.1.14.txt
|   |   â”œâ”€â”€ 2.1.15.txt
|   |   â”œâ”€â”€ 2.1.2.txt
|   |   â”œâ”€â”€ 2.1.3.txt
|   |   â”œâ”€â”€ 2.1.4.txt
|   |   â”œâ”€â”€ 2.1.5.txt
|   |   â”œâ”€â”€ 2.1.6.txt
|   |   â”œâ”€â”€ 2.1.7.txt
|   |   â”œâ”€â”€ 2.1.8.txt
|   |   â”œâ”€â”€ 2.1.9.txt
|   |   â”œâ”€â”€ 2.1.txt
|   |   â”œâ”€â”€ 2.2.1.txt
|   |   â”œâ”€â”€ 2.2.10.txt
|   |   â”œâ”€â”€ 2.2.11.txt
|   |   â”œâ”€â”€ 2.2.12.txt
|   |   â”œâ”€â”€ 2.2.13.txt
|   |   â”œâ”€â”€ 2.2.14.txt
|   |   â”œâ”€â”€ 2.2.2.txt
|   |   â”œâ”€â”€ 2.2.3.txt
|   |   â”œâ”€â”€ 2.2.4.txt
|   |   â”œâ”€â”€ 2.2.5.txt
|   |   â”œâ”€â”€ 2.2.6.txt
|   |   â”œâ”€â”€ 2.2.7.txt
|   |   â”œâ”€â”€ 2.2.8.txt
|   |   â”œâ”€â”€ 2.2.9.txt
|   |   â”œâ”€â”€ 2.2.txt
|   |   â”œâ”€â”€ 3.0.1.txt
|   |   â”œâ”€â”€ 3.0.2.txt
|   |   â”œâ”€â”€ 3.0.3.txt
|   |   â”œâ”€â”€ 3.0.4.txt
|   |   â”œâ”€â”€ 3.0.5.txt
|   |   â”œâ”€â”€ 3.0.6.txt
|   |   â”œâ”€â”€ 3.0.7.txt
|   |   â”œâ”€â”€ 3.0.8.txt
|   |   â”œâ”€â”€ 3.0.txt
|   |   â”œâ”€â”€ 3.1.txt
|   |   â”œâ”€â”€ 3.2.txt
|   |   â”œâ”€â”€ index.txt
|   |   â””â”€â”€ security.txt
|   â””â”€â”€ topics
|       â”œâ”€â”€ async.txt
|       â”œâ”€â”€ auth
|       |   â”œâ”€â”€ customizing.txt
|       |   â”œâ”€â”€ default.txt
|       |   â”œâ”€â”€ index.txt
|       |   â””â”€â”€ passwords.txt
|       â”œâ”€â”€ cache.txt
|       â”œâ”€â”€ checks.txt
|       â”œâ”€â”€ class-based-views
|       |   â”œâ”€â”€ generic-display.txt
|       |   â”œâ”€â”€ generic-editing.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ intro.txt
|       |   â””â”€â”€ mixins.txt
|       â”œâ”€â”€ conditional-view-processing.txt
|       â”œâ”€â”€ db
|       |   â”œâ”€â”€ aggregation.txt
|       |   â”œâ”€â”€ examples
|       |   |   â”œâ”€â”€ index.txt
|       |   |   â”œâ”€â”€ many_to_many.txt
|       |   |   â”œâ”€â”€ many_to_one.txt
|       |   |   â””â”€â”€ one_to_one.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ instrumentation.txt
|       |   â”œâ”€â”€ managers.txt
|       |   â”œâ”€â”€ models.txt
|       |   â”œâ”€â”€ multi-db.txt
|       |   â”œâ”€â”€ optimization.txt
|       |   â”œâ”€â”€ queries.txt
|       |   â”œâ”€â”€ search.txt
|       |   â”œâ”€â”€ sql.txt
|       |   â”œâ”€â”€ tablespaces.txt
|       |   â””â”€â”€ transactions.txt
|       â”œâ”€â”€ email.txt
|       â”œâ”€â”€ external-packages.txt
|       â”œâ”€â”€ files.txt
|       â”œâ”€â”€ forms
|       |   â”œâ”€â”€ formsets.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ media.txt
|       |   â””â”€â”€ modelforms.txt
|       â”œâ”€â”€ http
|       |   â”œâ”€â”€ _images
|       |   â”œâ”€â”€ decorators.txt
|       |   â”œâ”€â”€ file-uploads.txt
|       |   â”œâ”€â”€ generic-views.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ middleware.txt
|       |   â”œâ”€â”€ sessions.txt
|       |   â”œâ”€â”€ shortcuts.txt
|       |   â”œâ”€â”€ urls.txt
|       |   â””â”€â”€ views.txt
|       â”œâ”€â”€ i18n
|       |   â”œâ”€â”€ formatting.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ timezones.txt
|       |   â””â”€â”€ translation.txt
|       â”œâ”€â”€ index.txt
|       â”œâ”€â”€ install.txt
|       â”œâ”€â”€ logging.txt
|       â”œâ”€â”€ migrations.txt
|       â”œâ”€â”€ pagination.txt
|       â”œâ”€â”€ performance.txt
|       â”œâ”€â”€ security.txt
|       â”œâ”€â”€ serialization.txt
|       â”œâ”€â”€ settings.txt
|       â”œâ”€â”€ signals.txt
|       â”œâ”€â”€ signing.txt
|       â”œâ”€â”€ templates.txt
|       â””â”€â”€ testing
|           â”œâ”€â”€ _images
|           â”œâ”€â”€ advanced.txt
|           â”œâ”€â”€ index.txt
|           â”œâ”€â”€ overview.txt
|           â””â”€â”€ tools.txt
â”œâ”€â”€ extras
â”œâ”€â”€ js_tests
|   â”œâ”€â”€ admin
|   |   â”œâ”€â”€ DateTimeShortcuts.test.js
|   |   â”œâ”€â”€ SelectBox.test.js
|   |   â”œâ”€â”€ SelectFilter2.test.js
|   |   â”œâ”€â”€ URLify.test.js
|   |   â”œâ”€â”€ actions.test.js
|   |   â”œâ”€â”€ core.test.js
|   |   â”œâ”€â”€ inlines.test.js
|   |   â””â”€â”€ jsi18n-mocks.test.js
|   â””â”€â”€ gis
|       â””â”€â”€ mapwidget.test.js
â”œâ”€â”€ scripts
|   â”œâ”€â”€ manage_translations.py
|   â””â”€â”€ rpm-install.sh
â”œâ”€â”€ setup.py
â””â”€â”€ tests
    â”œâ”€â”€ README.rst
    â”œâ”€â”€ absolute_url_overrides
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_autodiscover
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_changelist
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_date_hierarchy.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_checks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_custom_urls
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_default_site
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps.py
    |   â”œâ”€â”€ sites.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_docs
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ evilfile.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ namespace_urls.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_utils.py
    |   â”œâ”€â”€ test_views.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ admin_filters
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_inlines
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_registration
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_scripts
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ another_app_waiting_migration
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_raising_messages
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_raising_warning
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_waiting_migration
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_with_import
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ broken_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ complex_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ admin
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ foo.py
    |   |   â”œâ”€â”€ management
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ commands
    |   |   â””â”€â”€ models
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ bar.py
    |   |       â””â”€â”€ foo.py
    |   â”œâ”€â”€ configured_dynamic_settings_manage.py
    |   â”œâ”€â”€ configured_settings_manage.py
    |   â”œâ”€â”€ custom_templates
    |   |   â”œâ”€â”€ app_template
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ api.py
    |   |   â””â”€â”€ project_template
    |   |       â”œâ”€â”€ additional_dir
    |   |       â”œâ”€â”€ project_name
    |   |       â””â”€â”€ ticket-18091-non-ascii-template.txt
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ app_command.py
    |   |       â”œâ”€â”€ base_command.py
    |   |       â”œâ”€â”€ custom_startproject.py
    |   |       â”œâ”€â”€ label_command.py
    |   |       â””â”€â”€ noargs_command.py
    |   â”œâ”€â”€ simple_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ management
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ commands
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ test_django_admin_py.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_utils
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_logentry.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_views
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ custom_has_permission_admin.py
    |   â”œâ”€â”€ customadmin.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ admin
    |   |       â””â”€â”€ admin_views
    |   â”œâ”€â”€ test_actions.py
    |   â”œâ”€â”€ test_adminsite.py
    |   â”œâ”€â”€ test_autocomplete_view.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_history_view.py
    |   â”œâ”€â”€ test_multidb.py
    |   â”œâ”€â”€ test_nav_sidebar.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ admin_widgets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_autocomplete_widget.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ widgetadmin.py
    â”œâ”€â”€ aggregation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_filter_argument.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ aggregation_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ annotations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ app_loading
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ not_installed
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ apps
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps.py
    |   â”œâ”€â”€ default_config_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ apps.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ namespace_package_base
    |   |   â””â”€â”€ nsapp
    |   |       â””â”€â”€ apps.py
    |   â”œâ”€â”€ namespace_package_other_base
    |   |   â””â”€â”€ nsapp
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ asgi
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ project
    |   |   â””â”€â”€ static
    |   |       â””â”€â”€ file.txt
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ async
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ auth_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ backend_alias.py
    |   â”œâ”€â”€ client.py
    |   â”œâ”€â”€ common-passwords-custom.txt
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ custom_permissions.py
    |   |   â”œâ”€â”€ custom_user.py
    |   |   â”œâ”€â”€ invalid_models.py
    |   |   â”œâ”€â”€ is_active.py
    |   |   â”œâ”€â”€ minimal.py
    |   |   â”œâ”€â”€ no_password.py
    |   |   â”œâ”€â”€ proxy.py
    |   |   â”œâ”€â”€ uuid_pk.py
    |   |   â”œâ”€â”€ with_custom_email_field.py
    |   |   â”œâ”€â”€ with_foreign_key.py
    |   |   â”œâ”€â”€ with_integer_username.py
    |   |   â”œâ”€â”€ with_last_login_attr.py
    |   |   â””â”€â”€ with_many_to_many.py
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ context_processors
    |   |   â””â”€â”€ registration
    |   |       â””â”€â”€ password_reset_subject.txt
    |   â”œâ”€â”€ test_admin_multidb.py
    |   â”œâ”€â”€ test_auth_backends.py
    |   â”œâ”€â”€ test_basic.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_context_processors.py
    |   â”œâ”€â”€ test_decorators.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_handlers.py
    |   â”œâ”€â”€ test_hashers.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_migrations.py
    |   â”œâ”€â”€ test_mixins.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_password_reset_timeout_days.py
    |   â”œâ”€â”€ test_remote_user.py
    |   â”œâ”€â”€ test_signals.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ test_tokens.py
    |   â”œâ”€â”€ test_validators.py
    |   â”œâ”€â”€ test_views.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_admin.py
    |   â””â”€â”€ urls_custom_user_admin.py
    â”œâ”€â”€ backends
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_base.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_features.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ test_schema.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ mysql
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_features.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â”œâ”€â”€ test_schema.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ oracle
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ postgresql
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â”œâ”€â”€ test_server_side_cursors.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ sqlite
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ test_ddl_references.py
    |   â”œâ”€â”€ test_utils.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ base
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ models.py
    â”œâ”€â”€ bash_completion
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ test_command.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ basic
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ builtin_server
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ bulk_create
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ cache
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ closeable_cache.py
    |   â”œâ”€â”€ liberal_backend.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ check_framework
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_async_checks.py
    |   â”œâ”€â”€ test_caches.py
    |   â”œâ”€â”€ test_database.py
    |   â”œâ”€â”€ test_model_checks.py
    |   â”œâ”€â”€ test_model_field_deprecation.py
    |   â”œâ”€â”€ test_multi_db.py
    |   â”œâ”€â”€ test_security.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ test_translation.py
    |   â”œâ”€â”€ test_urls.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ bad_error_handlers.py
    |       â”œâ”€â”€ bad_error_handlers_invalid_path.py
    |       â”œâ”€â”€ beginning_with_slash.py
    |       â”œâ”€â”€ contains_tuple.py
    |       â”œâ”€â”€ good_error_handlers.py
    |       â”œâ”€â”€ include_contains_tuple.py
    |       â”œâ”€â”€ include_with_dollar.py
    |       â”œâ”€â”€ name_with_colon.py
    |       â”œâ”€â”€ no_warnings.py
    |       â”œâ”€â”€ no_warnings_i18n.py
    |       â”œâ”€â”€ non_unique_namespaces.py
    |       â”œâ”€â”€ path_compatibility
    |       |   â”œâ”€â”€ __init__.py
    |       |   â”œâ”€â”€ beginning_with_caret.py
    |       |   â”œâ”€â”€ contains_re_named_group.py
    |       |   â””â”€â”€ ending_with_dollar.py
    |       â”œâ”€â”€ unique_namespaces.py
    |       â””â”€â”€ warning_in_include.py
    â”œâ”€â”€ conditional_processing
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ constraints
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ contenttypes_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ operations_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_rename_foo.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_fields.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_order_with_respect_to.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ context_processors
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ context_processors
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ csrf_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ csrf_token_error_handler_urls.py
    |   â”œâ”€â”€ test_context_processor.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ custom_columns
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_lookups
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_managers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_methods
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_migration_operations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ more_operations.py
    |   â””â”€â”€ operations.py
    â”œâ”€â”€ custom_pk
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ datatypes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dates
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ datetimes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ db_functions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ comparison
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_cast.py
    |   |   â”œâ”€â”€ test_coalesce.py
    |   |   â”œâ”€â”€ test_greatest.py
    |   |   â”œâ”€â”€ test_least.py
    |   |   â””â”€â”€ test_nullif.py
    |   â”œâ”€â”€ datetime
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_extract_trunc.py
    |   |   â””â”€â”€ test_now.py
    |   â”œâ”€â”€ math
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_abs.py
    |   |   â”œâ”€â”€ test_acos.py
    |   |   â”œâ”€â”€ test_asin.py
    |   |   â”œâ”€â”€ test_atan.py
    |   |   â”œâ”€â”€ test_atan2.py
    |   |   â”œâ”€â”€ test_ceil.py
    |   |   â”œâ”€â”€ test_cos.py
    |   |   â”œâ”€â”€ test_cot.py
    |   |   â”œâ”€â”€ test_degrees.py
    |   |   â”œâ”€â”€ test_exp.py
    |   |   â”œâ”€â”€ test_floor.py
    |   |   â”œâ”€â”€ test_ln.py
    |   |   â”œâ”€â”€ test_log.py
    |   |   â”œâ”€â”€ test_mod.py
    |   |   â”œâ”€â”€ test_pi.py
    |   |   â”œâ”€â”€ test_power.py
    |   |   â”œâ”€â”€ test_radians.py
    |   |   â”œâ”€â”€ test_round.py
    |   |   â”œâ”€â”€ test_sign.py
    |   |   â”œâ”€â”€ test_sin.py
    |   |   â”œâ”€â”€ test_sqrt.py
    |   |   â””â”€â”€ test_tan.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   â”œâ”€â”€ 0002_create_test_models.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ text
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_chr.py
    |   |   â”œâ”€â”€ test_concat.py
    |   |   â”œâ”€â”€ test_left.py
    |   |   â”œâ”€â”€ test_length.py
    |   |   â”œâ”€â”€ test_lower.py
    |   |   â”œâ”€â”€ test_md5.py
    |   |   â”œâ”€â”€ test_ord.py
    |   |   â”œâ”€â”€ test_pad.py
    |   |   â”œâ”€â”€ test_repeat.py
    |   |   â”œâ”€â”€ test_replace.py
    |   |   â”œâ”€â”€ test_reverse.py
    |   |   â”œâ”€â”€ test_right.py
    |   |   â”œâ”€â”€ test_sha1.py
    |   |   â”œâ”€â”€ test_sha224.py
    |   |   â”œâ”€â”€ test_sha256.py
    |   |   â”œâ”€â”€ test_sha384.py
    |   |   â”œâ”€â”€ test_sha512.py
    |   |   â”œâ”€â”€ test_strindex.py
    |   |   â”œâ”€â”€ test_substr.py
    |   |   â”œâ”€â”€ test_trim.py
    |   |   â””â”€â”€ test_upper.py
    |   â””â”€â”€ window
    |       â”œâ”€â”€ __init__.py
    |       â””â”€â”€ test_validation.py
    â”œâ”€â”€ db_typecasts
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ db_utils
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dbshell
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_mysql.py
    |   â”œâ”€â”€ test_oracle.py
    |   â”œâ”€â”€ test_postgresql.py
    |   â”œâ”€â”€ test_sqlite.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ decorators
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ defer
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ defer_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ delete
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ delete_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ deprecation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_middleware_mixin.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dispatch
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ distinct_on_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ empty
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ no_models
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ empty_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ test_commands.py
    â”œâ”€â”€ expressions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â”œâ”€â”€ test_queryset_values.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ expressions_case
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ expressions_window
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ extra_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_deconstruction
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_defaults
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_subclassing
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ file_storage
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_generate_filename.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ file_uploads
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ uploadhandler.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ files
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ filtered_relation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures_model_package
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ fixtures_1
    |   |   â””â”€â”€ inner
    |   â”œâ”€â”€ fixtures_2
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ flatpages_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ absolute_urls.py
    |   â”œâ”€â”€ no_slash_urls.py
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ flatpages
    |   |   â””â”€â”€ registration
    |   â”œâ”€â”€ test_csrf.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_sitemaps.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ force_insert_update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ foreign_object
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ article.py
    |   |   â”œâ”€â”€ customers.py
    |   |   â”œâ”€â”€ empty_join.py
    |   |   â””â”€â”€ person.py
    |   â”œâ”€â”€ test_agnostic_order_trimjoin.py
    |   â”œâ”€â”€ test_empty_join.py
    |   â”œâ”€â”€ test_forms.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ forms_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ field_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ filepathfield_test_dir
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ a.py
    |   |   |   â”œâ”€â”€ ab.py
    |   |   |   â”œâ”€â”€ b.py
    |   |   |   â”œâ”€â”€ c
    |   |   |   â”œâ”€â”€ h
    |   |   |   â””â”€â”€ j
    |   |   â”œâ”€â”€ test_base.py
    |   |   â”œâ”€â”€ test_booleanfield.py
    |   |   â”œâ”€â”€ test_charfield.py
    |   |   â”œâ”€â”€ test_choicefield.py
    |   |   â”œâ”€â”€ test_combofield.py
    |   |   â”œâ”€â”€ test_datefield.py
    |   |   â”œâ”€â”€ test_datetimefield.py
    |   |   â”œâ”€â”€ test_decimalfield.py
    |   |   â”œâ”€â”€ test_durationfield.py
    |   |   â”œâ”€â”€ test_emailfield.py
    |   |   â”œâ”€â”€ test_filefield.py
    |   |   â”œâ”€â”€ test_filepathfield.py
    |   |   â”œâ”€â”€ test_floatfield.py
    |   |   â”œâ”€â”€ test_genericipaddressfield.py
    |   |   â”œâ”€â”€ test_imagefield.py
    |   |   â”œâ”€â”€ test_integerfield.py
    |   |   â”œâ”€â”€ test_jsonfield.py
    |   |   â”œâ”€â”€ test_multiplechoicefield.py
    |   |   â”œâ”€â”€ test_multivaluefield.py
    |   |   â”œâ”€â”€ test_nullbooleanfield.py
    |   |   â”œâ”€â”€ test_regexfield.py
    |   |   â”œâ”€â”€ test_slugfield.py
    |   |   â”œâ”€â”€ test_splitdatetimefield.py
    |   |   â”œâ”€â”€ test_timefield.py
    |   |   â”œâ”€â”€ test_typedchoicefield.py
    |   |   â”œâ”€â”€ test_typedmultiplechoicefield.py
    |   |   â”œâ”€â”€ test_urlfield.py
    |   |   â””â”€â”€ test_uuidfield.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ forms_tests
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ forms_tests
    |   â”œâ”€â”€ tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ filepath_test_files
    |   |   |   â”œâ”€â”€ directory
    |   |   |   â””â”€â”€ real-text-file.txt
    |   |   â”œâ”€â”€ test_error_messages.py
    |   |   â”œâ”€â”€ test_forms.py
    |   |   â”œâ”€â”€ test_formsets.py
    |   |   â”œâ”€â”€ test_i18n.py
    |   |   â”œâ”€â”€ test_input_formats.py
    |   |   â”œâ”€â”€ test_media.py
    |   |   â”œâ”€â”€ test_renderers.py
    |   |   â”œâ”€â”€ test_utils.py
    |   |   â”œâ”€â”€ test_validators.py
    |   |   â”œâ”€â”€ test_widgets.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ views.py
    |   â””â”€â”€ widget_tests
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ base.py
    |       â”œâ”€â”€ test_checkboxinput.py
    |       â”œâ”€â”€ test_checkboxselectmultiple.py
    |       â”œâ”€â”€ test_clearablefileinput.py
    |       â”œâ”€â”€ test_dateinput.py
    |       â”œâ”€â”€ test_datetimeinput.py
    |       â”œâ”€â”€ test_fileinput.py
    |       â”œâ”€â”€ test_hiddeninput.py
    |       â”œâ”€â”€ test_input.py
    |       â”œâ”€â”€ test_multiplehiddeninput.py
    |       â”œâ”€â”€ test_multiwidget.py
    |       â”œâ”€â”€ test_nullbooleanselect.py
    |       â”œâ”€â”€ test_numberinput.py
    |       â”œâ”€â”€ test_passwordinput.py
    |       â”œâ”€â”€ test_radioselect.py
    |       â”œâ”€â”€ test_select.py
    |       â”œâ”€â”€ test_selectdatewidget.py
    |       â”œâ”€â”€ test_selectmultiple.py
    |       â”œâ”€â”€ test_splitdatetimewidget.py
    |       â”œâ”€â”€ test_splithiddendatetimewidget.py
    |       â”œâ”€â”€ test_textarea.py
    |       â”œâ”€â”€ test_textinput.py
    |       â”œâ”€â”€ test_timeinput.py
    |       â””â”€â”€ test_widget.py
    â”œâ”€â”€ from_db_value
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_inline_admin
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ generic_relations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_forms.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_relations_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_views
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ generic_views
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ generic_views
    |   |   |   â””â”€â”€ robots.txt
    |   |   â””â”€â”€ registration
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_dates.py
    |   â”œâ”€â”€ test_detail.py
    |   â”œâ”€â”€ test_edit.py
    |   â”œâ”€â”€ test_list.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ get_earliest_or_latest
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ get_object_or_404
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ get_or_create
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ gis_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ data
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ ch-city
    |   |   â”œâ”€â”€ cities
    |   |   â”œâ”€â”€ counties
    |   |   â”œâ”€â”€ gas_lines
    |   |   â”œâ”€â”€ has_nulls
    |   |   â”œâ”€â”€ interstates
    |   |   â”œâ”€â”€ invalid
    |   |   â”œâ”€â”€ rasters
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ raster.numpy.txt
    |   |   |   â””â”€â”€ textrasters.py
    |   |   â”œâ”€â”€ test_point
    |   |   â”œâ”€â”€ test_poly
    |   |   â””â”€â”€ test_vrt
    |   â”œâ”€â”€ distapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ gdal_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_driver.py
    |   |   â”œâ”€â”€ test_ds.py
    |   |   â”œâ”€â”€ test_envelope.py
    |   |   â”œâ”€â”€ test_geom.py
    |   |   â”œâ”€â”€ test_raster.py
    |   |   â”œâ”€â”€ test_srs.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ geo3d
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ views.py
    |   â”œâ”€â”€ geoadmin
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ admin.py
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls.py
    |   â”œâ”€â”€ geoapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ feeds.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ sitemaps.py
    |   |   â”œâ”€â”€ test_expressions.py
    |   |   â”œâ”€â”€ test_feeds.py
    |   |   â”œâ”€â”€ test_functions.py
    |   |   â”œâ”€â”€ test_indexes.py
    |   |   â”œâ”€â”€ test_regress.py
    |   |   â”œâ”€â”€ test_serializers.py
    |   |   â”œâ”€â”€ test_sitemaps.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls.py
    |   â”œâ”€â”€ geogapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ geos_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_coordseq.py
    |   |   â”œâ”€â”€ test_geos.py
    |   |   â”œâ”€â”€ test_geos_mutation.py
    |   |   â”œâ”€â”€ test_io.py
    |   |   â””â”€â”€ test_mutable_list.py
    |   â”œâ”€â”€ gis_migrations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   |   â”œâ”€â”€ 0002_create_models.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_commands.py
    |   |   â””â”€â”€ test_operations.py
    |   â”œâ”€â”€ inspectapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ layermap
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ maps
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ rasterapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   |   â”œâ”€â”€ 0002_rastermodels.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ test_rasterfield.py
    |   â”œâ”€â”€ relatedapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ test_data.py
    |   â”œâ”€â”€ test_fields.py
    |   â”œâ”€â”€ test_geoforms.py
    |   â”œâ”€â”€ test_geoip2.py
    |   â”œâ”€â”€ test_gis_tests_utils.py
    |   â”œâ”€â”€ test_measure.py
    |   â”œâ”€â”€ test_ptr.py
    |   â”œâ”€â”€ test_spatialrefsys.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ handlers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ test_exception.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ tests_custom_error_handlers.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ httpwrappers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ abc.txt
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ humanize_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ i18n
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ commands
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app_with_locale
    |   |   |   â””â”€â”€ locale
    |   |   â”œâ”€â”€ ignore_dir
    |   |   â”œâ”€â”€ javascript.js
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â”œâ”€â”€ es_AR
    |   |   |   â”œâ”€â”€ fr
    |   |   |   â”œâ”€â”€ hr
    |   |   |   â”œâ”€â”€ ja
    |   |   |   â”œâ”€â”€ ko
    |   |   |   â”œâ”€â”€ pt_BR
    |   |   |   â”œâ”€â”€ ru
    |   |   |   â””â”€â”€ xxx
    |   |   â”œâ”€â”€ media_root
    |   |   â”œâ”€â”€ someapp
    |   |   |   â””â”€â”€ static
    |   |   â”œâ”€â”€ static
    |   |   |   â””â”€â”€ javascript_ignored.js
    |   |   â””â”€â”€ templates
    |   |       â””â”€â”€ subdir
    |   â”œâ”€â”€ contenttypes
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â””â”€â”€ fr
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ exclude
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ canned_locale
    |   |       â”œâ”€â”€ en
    |   |       â”œâ”€â”€ fr
    |   |       â””â”€â”€ it
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ loading
    |   |   â”œâ”€â”€ en
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_AU
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_CA
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â””â”€â”€ en_NZ
    |   |       â””â”€â”€ LC_MESSAGES
    |   â”œâ”€â”€ loading_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ apps.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ en
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ other
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ other2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ de
    |   â”œâ”€â”€ patterns
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â”œâ”€â”€ nl
    |   |   |   â””â”€â”€ pt_BR
    |   |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ default.py
    |   |       â”œâ”€â”€ disabled.py
    |   |       â”œâ”€â”€ included.py
    |   |       â”œâ”€â”€ namespace.py
    |   |       â”œâ”€â”€ path_unused.py
    |   |       â”œâ”€â”€ wrong.py
    |   |       â””â”€â”€ wrong_namespace.py
    |   â”œâ”€â”€ project_dir
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app_no_locale
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ app_with_locale
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ locale
    |   |   |   â””â”€â”€ models.py
    |   |   â””â”€â”€ project_locale
    |   â”œâ”€â”€ resolution
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ de
    |   â”œâ”€â”€ sampleproject
    |   |   â”œâ”€â”€ locale
    |   |   |   â””â”€â”€ fr
    |   |   â”œâ”€â”€ manage.py
    |   |   â”œâ”€â”€ sampleproject
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ settings.py
    |   |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ update_catalogs.py
    |   â”œâ”€â”€ territorial_fallback
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ de_DE
    |   â”œâ”€â”€ test_compilation.py
    |   â”œâ”€â”€ test_extraction.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_percents.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_default_unprefixed.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ import_error_package
    |   â””â”€â”€ __init__.py
    â”œâ”€â”€ indexes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ inline_formsets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ inspectdb
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ introspection
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ invalid_models_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_backend_specific.py
    |   â”œâ”€â”€ test_custom_fields.py
    |   â”œâ”€â”€ test_deprecated_fields.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_ordinary_fields.py
    |   â””â”€â”€ test_relative_fields.py
    â”œâ”€â”€ known_related_objects
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ logging_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ logconfig.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_i18n.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_decimalfield.py
    |   â”œâ”€â”€ test_lookups.py
    |   â”œâ”€â”€ test_timefield.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_and_m2o
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_intermediary
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_multiple
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_recursive
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_through
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_through_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_multitable.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2o_recursive
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ mail
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ attachments
    |   |   â”œâ”€â”€ file.txt
    |   |   â””â”€â”€ file_png.txt
    |   â”œâ”€â”€ custombackend.py
    |   â”œâ”€â”€ test_sendtestemail.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ managers_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_many
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_one
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_one_null
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ max_lengths
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ messages_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base.py
    |   â”œâ”€â”€ test_api.py
    |   â”œâ”€â”€ test_cookie.py
    |   â”œâ”€â”€ test_fallback.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_mixins.py
    |   â”œâ”€â”€ test_session.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ middleware
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ cond_get_urls.py
    |   â”œâ”€â”€ extra_urls.py
    |   â”œâ”€â”€ test_security.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ middleware_exceptions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ middleware.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ migrate_signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ custom_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ migration_test_data_persistence
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_add_book.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ migrations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ deprecated_field_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_remove_ipaddressfield_ip.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ faulty_migrations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ file.py
    |   |   â””â”€â”€ namespace
    |   |       â””â”€â”€ foo
    |   â”œâ”€â”€ migrations_test_apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ alter_fk
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ author_app
    |   |   |   â””â”€â”€ book_app
    |   |   â”œâ”€â”€ conflicting_app_with_dependencies
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ lookuperror_a
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ lookuperror_b
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ lookuperror_c
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ migrated_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ migrated_unapplied_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ mutate_state_a
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ mutate_state_b
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ normal
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ unmigrated_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unmigrated_app_simple
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unmigrated_app_syncdb
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unspecified_app_with_conflict
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ with_package_model
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models
    |   |   â””â”€â”€ without_init_file
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ migrations
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ related_models_app
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ routers.py
    |   â”œâ”€â”€ test_add_many_to_many_field_initial
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_auto_now_add
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_autodetector.py
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_commands.py
    |   â”œâ”€â”€ test_deprecated_fields.py
    |   â”œâ”€â”€ test_exceptions.py
    |   â”œâ”€â”€ test_executor.py
    |   â”œâ”€â”€ test_fake_initial_case_insensitive
    |   |   â”œâ”€â”€ fake_initial
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ initial
    |   |       â”œâ”€â”€ 0001_initial.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_graph.py
    |   â”œâ”€â”€ test_loader.py
    |   â”œâ”€â”€ test_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_atomic_operation
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_backwards_deps_1
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ 0002_second.py
    |   â”œâ”€â”€ test_migrations_bad_pyc
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_clashing_prefix
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ a.py
    |   |   â””â”€â”€ ab.py
    |   â”œâ”€â”€ test_migrations_conflict
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_conflicting_second.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_custom_user
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_empty
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_fake_split_initial
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_first
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ second.py
    |   |   â””â”€â”€ thefirst.py
    |   â”œâ”€â”€ test_migrations_initial_false
    |   |   â”œâ”€â”€ 0001_not_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_namespace_package
    |   |   â””â”€â”€ 0001_initial.py
    |   â”œâ”€â”€ test_migrations_no_ancestor
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_conflicting_second.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_changes
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_default
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_init
    |   â”œâ”€â”€ test_migrations_no_operations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_non_atomic
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_order
    |   |   â”œâ”€â”€ 0001.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_plan
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â”œâ”€â”€ 0004_fourth.py
    |   |   â”œâ”€â”€ 0005_fifth.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_private
    |   |   â”œâ”€â”€ .util.py
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ _util.py
    |   |   â””â”€â”€ ~util.py
    |   â”œâ”€â”€ test_migrations_run_before
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0001_squashed_0002.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_complex
    |   |   â”œâ”€â”€ 1_auto.py
    |   |   â”œâ”€â”€ 2_auto.py
    |   |   â”œâ”€â”€ 3_auto.py
    |   |   â”œâ”€â”€ 3_squashed_5.py
    |   |   â”œâ”€â”€ 4_auto.py
    |   |   â”œâ”€â”€ 5_auto.py
    |   |   â”œâ”€â”€ 6_auto.py
    |   |   â”œâ”€â”€ 7_auto.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_complex_multi_apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app1
    |   |   |   â”œâ”€â”€ 1_auto.py
    |   |   |   â”œâ”€â”€ 2_auto.py
    |   |   |   â”œâ”€â”€ 2_squashed_3.py
    |   |   |   â”œâ”€â”€ 3_auto.py
    |   |   |   â”œâ”€â”€ 4_auto.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ app2
    |   |       â”œâ”€â”€ 1_auto.py
    |   |       â”œâ”€â”€ 1_squashed_2.py
    |   |       â”œâ”€â”€ 2_auto.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_erroneous
    |   |   â”œâ”€â”€ 1_auto.py
    |   |   â”œâ”€â”€ 2_auto.py
    |   |   â”œâ”€â”€ 3_squashed_5.py
    |   |   â”œâ”€â”€ 6_auto.py
    |   |   â”œâ”€â”€ 7_auto.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_extra
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0001_squashed_0002.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_ref_squashed
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app1
    |   |   |   â”œâ”€â”€ 1_auto.py
    |   |   |   â”œâ”€â”€ 2_auto.py
    |   |   |   â”œâ”€â”€ 2_squashed_3.py
    |   |   |   â”œâ”€â”€ 3_auto.py
    |   |   |   â”œâ”€â”€ 4_auto.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ app2
    |   |       â”œâ”€â”€ 1_auto.py
    |   |       â”œâ”€â”€ 1_squashed_2.py
    |   |       â”œâ”€â”€ 2_auto.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_unmigdep
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_multidb.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_optimizer.py
    |   â”œâ”€â”€ test_questioner.py
    |   â”œâ”€â”€ test_state.py
    |   â””â”€â”€ test_writer.py
    â”œâ”€â”€ migrations2
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_migrations_2
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_2_first
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ test_migrations_2_no_deps
    |       â”œâ”€â”€ 0001_initial.py
    |       â””â”€â”€ __init__.py
    â”œâ”€â”€ model_enums
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_autofield.py
    |   â”œâ”€â”€ test_binaryfield.py
    |   â”œâ”€â”€ test_booleanfield.py
    |   â”œâ”€â”€ test_charfield.py
    |   â”œâ”€â”€ test_datetimefield.py
    |   â”œâ”€â”€ test_decimalfield.py
    |   â”œâ”€â”€ test_durationfield.py
    |   â”œâ”€â”€ test_field_flags.py
    |   â”œâ”€â”€ test_filefield.py
    |   â”œâ”€â”€ test_filepathfield.py
    |   â”œâ”€â”€ test_floatfield.py
    |   â”œâ”€â”€ test_foreignkey.py
    |   â”œâ”€â”€ test_genericipaddressfield.py
    |   â”œâ”€â”€ test_imagefield.py
    |   â”œâ”€â”€ test_integerfield.py
    |   â”œâ”€â”€ test_jsonfield.py
    |   â”œâ”€â”€ test_manytomanyfield.py
    |   â”œâ”€â”€ test_promises.py
    |   â”œâ”€â”€ test_slugfield.py
    |   â”œâ”€â”€ test_textfield.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_forms
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_modelchoicefield.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_formsets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_formsets_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_indexes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_inheritance
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_abstract_inheritance.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_inheritance_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_meta
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ results.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_options
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ default_related_name.py
    |   |   â””â”€â”€ tablespaces.py
    |   â”œâ”€â”€ test_default_related_name.py
    |   â””â”€â”€ test_tablespaces.py
    â”œâ”€â”€ model_package
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ article.py
    |   |   â””â”€â”€ publication.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_pickle.py
    |   â”œâ”€â”€ test_state.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ modeladmin
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_actions.py
    |   â”œâ”€â”€ test_checks.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ multiple_database
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ routers.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ mutually_referential
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ nested_foreign_keys
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ no_models
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_fk
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_fk_ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_queries
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ one_to_one
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ or_lookups
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ order_with_respect_to
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base_tests.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ pagination
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ custom.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ postgres_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ array_default_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_integerarraymodel_field_2.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ array_index_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ integration_settings.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   â”œâ”€â”€ 0002_create_test_models.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_aggregates.py
    |   â”œâ”€â”€ test_apps.py
    |   â”œâ”€â”€ test_array.py
    |   â”œâ”€â”€ test_bulk_update.py
    |   â”œâ”€â”€ test_citext.py
    |   â”œâ”€â”€ test_constraints.py
    |   â”œâ”€â”€ test_functions.py
    |   â”œâ”€â”€ test_hstore.py
    |   â”œâ”€â”€ test_indexes.py
    |   â”œâ”€â”€ test_integration.py
    |   â”œâ”€â”€ test_introspection.py
    |   â”œâ”€â”€ test_json_deprecation.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_ranges.py
    |   â”œâ”€â”€ test_search.py
    |   â”œâ”€â”€ test_signals.py
    |   â”œâ”€â”€ test_trigram.py
    |   â””â”€â”€ test_unaccent.py
    â”œâ”€â”€ prefetch_related
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_prefetch_related_objects.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ project_template
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_settings.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ properties
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ proxy_model_inheritance
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ app1
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ proxy_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ queries
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_bulk_update.py
    |   â”œâ”€â”€ test_db_returning.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â”œâ”€â”€ test_explain.py
    |   â”œâ”€â”€ test_iterator.py
    |   â”œâ”€â”€ test_q.py
    |   â”œâ”€â”€ test_qs_combinators.py
    |   â”œâ”€â”€ test_query.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ queryset_pickle
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ raw_query
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ redirects_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ requests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_accept_header.py
    |   â”œâ”€â”€ test_data_upload_settings.py
    |   â”œâ”€â”€ test_is_ajax_deprecations.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ requirements
    |   â”œâ”€â”€ mysql.txt
    |   â”œâ”€â”€ oracle.txt
    |   â”œâ”€â”€ postgres.txt
    |   â””â”€â”€ py3.txt
    â”œâ”€â”€ reserved_names
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ resolve_url
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ responses
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_cookie.py
    |   â”œâ”€â”€ test_fileresponse.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ reverse_lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ runtests.py
    â”œâ”€â”€ save_delete_hooks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ schema
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_logging.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_for_update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related_onetoone
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ serializers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ base.py
    |   |   â”œâ”€â”€ data.py
    |   |   â”œâ”€â”€ multi_table.py
    |   |   â””â”€â”€ natural.py
    |   â”œâ”€â”€ test_data.py
    |   â”œâ”€â”€ test_deserializedobject.py
    |   â”œâ”€â”€ test_json.py
    |   â”œâ”€â”€ test_jsonl.py
    |   â”œâ”€â”€ test_natural.py
    |   â”œâ”€â”€ test_xml.py
    |   â”œâ”€â”€ test_yaml.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ servers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ another_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ static
    |   |       â””â”€â”€ another_app
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ media
    |   |   â””â”€â”€ example_media_file.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ static
    |   |   â””â”€â”€ example_static_file.txt
    |   â”œâ”€â”€ test_basehttp.py
    |   â”œâ”€â”€ test_liveserverthread.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ sessions_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ settings_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ shell
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ shortcuts
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ shortcuts
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ shortcuts
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ signed_cookies_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ signing
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ sitemaps_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ test_generic.py
    |   â”œâ”€â”€ test_http.py
    |   â”œâ”€â”€ test_https.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_utils.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ empty.py
    |       â”œâ”€â”€ http.py
    |       â”œâ”€â”€ https.py
    |       â””â”€â”€ index_only.py
    â”œâ”€â”€ sites_framework
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ sites_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ staticfiles_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ no_label
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ static
    |   |   â”œâ”€â”€ staticfiles_config.py
    |   |   â””â”€â”€ test
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ otherdir
    |   |       â””â”€â”€ static
    |   â”œâ”€â”€ cases.py
    |   â”œâ”€â”€ project
    |   |   â”œâ”€â”€ documents
    |   |   |   â”œâ”€â”€ cached
    |   |   |   â”œâ”€â”€ subdir
    |   |   |   â”œâ”€â”€ test
    |   |   |   â””â”€â”€ test.txt
    |   |   â”œâ”€â”€ faulty
    |   |   â”œâ”€â”€ loop
    |   |   â”œâ”€â”€ pathlib
    |   |   |   â””â”€â”€ pathlib.txt
    |   |   â”œâ”€â”€ prefixed
    |   |   |   â””â”€â”€ test.txt
    |   |   â””â”€â”€ site_media
    |   |       â”œâ”€â”€ media
    |   |       â””â”€â”€ static
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ storage.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_finders.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_handlers.py
    |   â”œâ”€â”€ test_liveserver.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_storage.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ test_utils.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ default.py
    |       â””â”€â”€ helper.py
    â”œâ”€â”€ str
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ string_lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ swappable_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ syndication_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ feeds.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ syndication
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ template_backends
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ good
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ templatetags
    |   |   â””â”€â”€ importerror
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ templatetags
    |   â”œâ”€â”€ forbidden
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ template_strings
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ test_django.py
    |   â”œâ”€â”€ test_dummy.py
    |   â”œâ”€â”€ test_jinja2.py
    |   â””â”€â”€ test_utils.py
    â”œâ”€â”€ template_loader
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ template_strings
    |   |   â””â”€â”€ template_loader
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_loader
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ template_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ alternate_urls.py
    |   â”œâ”€â”€ annotated_tag_function.py
    |   â”œâ”€â”€ broken_tag.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ filter_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_add.py
    |   |   â”œâ”€â”€ test_addslashes.py
    |   |   â”œâ”€â”€ test_autoescape.py
    |   |   â”œâ”€â”€ test_capfirst.py
    |   |   â”œâ”€â”€ test_center.py
    |   |   â”œâ”€â”€ test_chaining.py
    |   |   â”œâ”€â”€ test_cut.py
    |   |   â”œâ”€â”€ test_date.py
    |   |   â”œâ”€â”€ test_default.py
    |   |   â”œâ”€â”€ test_default_if_none.py
    |   |   â”œâ”€â”€ test_dictsort.py
    |   |   â”œâ”€â”€ test_dictsortreversed.py
    |   |   â”œâ”€â”€ test_divisibleby.py
    |   |   â”œâ”€â”€ test_escape.py
    |   |   â”œâ”€â”€ test_escapejs.py
    |   |   â”œâ”€â”€ test_filesizeformat.py
    |   |   â”œâ”€â”€ test_first.py
    |   |   â”œâ”€â”€ test_floatformat.py
    |   |   â”œâ”€â”€ test_force_escape.py
    |   |   â”œâ”€â”€ test_get_digit.py
    |   |   â”œâ”€â”€ test_iriencode.py
    |   |   â”œâ”€â”€ test_join.py
    |   |   â”œâ”€â”€ test_json_script.py
    |   |   â”œâ”€â”€ test_last.py
    |   |   â”œâ”€â”€ test_length.py
    |   |   â”œâ”€â”€ test_length_is.py
    |   |   â”œâ”€â”€ test_linebreaks.py
    |   |   â”œâ”€â”€ test_linebreaksbr.py
    |   |   â”œâ”€â”€ test_linenumbers.py
    |   |   â”œâ”€â”€ test_ljust.py
    |   |   â”œâ”€â”€ test_lower.py
    |   |   â”œâ”€â”€ test_make_list.py
    |   |   â”œâ”€â”€ test_phone2numeric.py
    |   |   â”œâ”€â”€ test_pluralize.py
    |   |   â”œâ”€â”€ test_random.py
    |   |   â”œâ”€â”€ test_rjust.py
    |   |   â”œâ”€â”€ test_safe.py
    |   |   â”œâ”€â”€ test_safeseq.py
    |   |   â”œâ”€â”€ test_slice.py
    |   |   â”œâ”€â”€ test_slugify.py
    |   |   â”œâ”€â”€ test_stringformat.py
    |   |   â”œâ”€â”€ test_striptags.py
    |   |   â”œâ”€â”€ test_time.py
    |   |   â”œâ”€â”€ test_timesince.py
    |   |   â”œâ”€â”€ test_timeuntil.py
    |   |   â”œâ”€â”€ test_title.py
    |   |   â”œâ”€â”€ test_truncatechars.py
    |   |   â”œâ”€â”€ test_truncatechars_html.py
    |   |   â”œâ”€â”€ test_truncatewords.py
    |   |   â”œâ”€â”€ test_truncatewords_html.py
    |   |   â”œâ”€â”€ test_unordered_list.py
    |   |   â”œâ”€â”€ test_upper.py
    |   |   â”œâ”€â”€ test_urlencode.py
    |   |   â”œâ”€â”€ test_urlize.py
    |   |   â”œâ”€â”€ test_urlizetrunc.py
    |   |   â”œâ”€â”€ test_wordcount.py
    |   |   â”œâ”€â”€ test_wordwrap.py
    |   |   â”œâ”€â”€ test_yesno.py
    |   |   â””â”€â”€ timezone_utils.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ template_tests
    |   â”œâ”€â”€ other_templates
    |   |   â””â”€â”€ priority
    |   â”œâ”€â”€ recursive_templates
    |   |   â”œâ”€â”€ fs
    |   |   â”œâ”€â”€ fs2
    |   |   â””â”€â”€ fs3
    |   â”œâ”€â”€ relative_templates
    |   |   â””â”€â”€ dir1
    |   |       â””â”€â”€ dir2
    |   â”œâ”€â”€ syntax_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ i18n
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ base.py
    |   |   |   â”œâ”€â”€ test_blocktranslate.py
    |   |   |   â”œâ”€â”€ test_filters.py
    |   |   |   â”œâ”€â”€ test_get_available_languages.py
    |   |   |   â”œâ”€â”€ test_get_current_language.py
    |   |   |   â”œâ”€â”€ test_get_current_language_bidi.py
    |   |   |   â”œâ”€â”€ test_get_language_info.py
    |   |   |   â”œâ”€â”€ test_get_language_info_list.py
    |   |   |   â”œâ”€â”€ test_language.py
    |   |   |   â”œâ”€â”€ test_translate.py
    |   |   |   â””â”€â”€ test_underscore_syntax.py
    |   |   â”œâ”€â”€ test_autoescape.py
    |   |   â”œâ”€â”€ test_basic.py
    |   |   â”œâ”€â”€ test_builtins.py
    |   |   â”œâ”€â”€ test_cache.py
    |   |   â”œâ”€â”€ test_comment.py
    |   |   â”œâ”€â”€ test_cycle.py
    |   |   â”œâ”€â”€ test_exceptions.py
    |   |   â”œâ”€â”€ test_extends.py
    |   |   â”œâ”€â”€ test_filter_syntax.py
    |   |   â”œâ”€â”€ test_filter_tag.py
    |   |   â”œâ”€â”€ test_firstof.py
    |   |   â”œâ”€â”€ test_for.py
    |   |   â”œâ”€â”€ test_if.py
    |   |   â”œâ”€â”€ test_if_changed.py
    |   |   â”œâ”€â”€ test_if_equal.py
    |   |   â”œâ”€â”€ test_include.py
    |   |   â”œâ”€â”€ test_invalid_string.py
    |   |   â”œâ”€â”€ test_list_index.py
    |   |   â”œâ”€â”€ test_load.py
    |   |   â”œâ”€â”€ test_lorem.py
    |   |   â”œâ”€â”€ test_multiline.py
    |   |   â”œâ”€â”€ test_named_endblock.py
    |   |   â”œâ”€â”€ test_now.py
    |   |   â”œâ”€â”€ test_numpy.py
    |   |   â”œâ”€â”€ test_regroup.py
    |   |   â”œâ”€â”€ test_resetcycle.py
    |   |   â”œâ”€â”€ test_setup.py
    |   |   â”œâ”€â”€ test_simple_tag.py
    |   |   â”œâ”€â”€ test_spaceless.py
    |   |   â”œâ”€â”€ test_static.py
    |   |   â”œâ”€â”€ test_template_tag.py
    |   |   â”œâ”€â”€ test_url.py
    |   |   â”œâ”€â”€ test_verbatim.py
    |   |   â”œâ”€â”€ test_width_ratio.py
    |   |   â””â”€â”€ test_with.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ first
    |   |   â”œâ”€â”€ priority
    |   |   â”œâ”€â”€ second
    |   |   â””â”€â”€ template_tests
    |   â”œâ”€â”€ templatetags
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ bad_tag.py
    |   |   â”œâ”€â”€ custom.py
    |   |   â”œâ”€â”€ inclusion.py
    |   |   â”œâ”€â”€ subpackage
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ echo.py
    |   |   â”œâ”€â”€ tag_27584.py
    |   |   â””â”€â”€ testtags.py
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_callables.py
    |   â”œâ”€â”€ test_context.py
    |   â”œâ”€â”€ test_custom.py
    |   â”œâ”€â”€ test_engine.py
    |   â”œâ”€â”€ test_extends.py
    |   â”œâ”€â”€ test_extends_relative.py
    |   â”œâ”€â”€ test_library.py
    |   â”œâ”€â”€ test_loaders.py
    |   â”œâ”€â”€ test_logging.py
    |   â”œâ”€â”€ test_nodelist.py
    |   â”œâ”€â”€ test_origin.py
    |   â”œâ”€â”€ test_parser.py
    |   â”œâ”€â”€ test_response.py
    |   â”œâ”€â”€ test_smartif.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ utils.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ templates
    |   â”œâ”€â”€ comments
    |   |   â””â”€â”€ comment_notification_email.txt
    |   â”œâ”€â”€ custom_admin
    |   â””â”€â”€ views
    â”œâ”€â”€ test_client
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ auth_backends.py
    |   â”œâ”€â”€ test_conditional_content_removal.py
    |   â”œâ”€â”€ test_fakepayload.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ test_client_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ auth_backends.py
    |   â”œâ”€â”€ bad_templates
    |   â”œâ”€â”€ context_processors.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ session.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ test_exceptions
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ test_validation_error.py
    â”œâ”€â”€ test_runner
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ runner.py
    |   â”œâ”€â”€ test_debug_sql.py
    |   â”œâ”€â”€ test_discover_runner.py
    |   â”œâ”€â”€ test_parallel.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ test_runner_apps
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ buffer
    |   |   â””â”€â”€ tests_buffer.py
    |   â”œâ”€â”€ databases
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ sample
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ doctests.py
    |   |   â”œâ”€â”€ empty.py
    |   |   â”œâ”€â”€ pattern_tests.py
    |   |   â”œâ”€â”€ tests
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ tests.py
    |   |   â””â”€â”€ tests_sample.py
    |   â”œâ”€â”€ simple
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ tests.py
    |   â””â”€â”€ tagged
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ tests.py
    |       â””â”€â”€ tests_inheritance.py
    â”œâ”€â”€ test_sqlite.py
    â”œâ”€â”€ test_utils
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_used
    |   â”œâ”€â”€ test_simpletestcase.py
    |   â”œâ”€â”€ test_testcase.py
    |   â”œâ”€â”€ test_transactiontestcase.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ timezones
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ transaction_hooks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ transactions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ unmanaged_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ update_only_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ urlpatterns
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ converter_urls.py
    |   â”œâ”€â”€ converters.py
    |   â”œâ”€â”€ included_urls.py
    |   â”œâ”€â”€ more_urls.py
    |   â”œâ”€â”€ path_base64_urls.py
    |   â”œâ”€â”€ path_dynamic_urls.py
    |   â”œâ”€â”€ path_same_name_urls.py
    |   â”œâ”€â”€ path_urls.py
    |   â”œâ”€â”€ test_resolvers.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ urlpatterns_reverse
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ erroneous_urls.py
    |   â”œâ”€â”€ extra_urls.py
    |   â”œâ”€â”€ included_app_urls.py
    |   â”œâ”€â”€ included_named_urls.py
    |   â”œâ”€â”€ included_named_urls2.py
    |   â”œâ”€â”€ included_namespace_urls.py
    |   â”œâ”€â”€ included_no_kwargs_urls.py
    |   â”œâ”€â”€ included_urls.py
    |   â”œâ”€â”€ included_urls2.py
    |   â”œâ”€â”€ method_view_urls.py
    |   â”œâ”€â”€ middleware.py
    |   â”œâ”€â”€ named_urls.py
    |   â”œâ”€â”€ named_urls_conflict.py
    |   â”œâ”€â”€ namespace_urls.py
    |   â”œâ”€â”€ nested_urls.py
    |   â”œâ”€â”€ no_urls.py
    |   â”œâ”€â”€ nonimported_module.py
    |   â”œâ”€â”€ reverse_lazy_urls.py
    |   â”œâ”€â”€ test_localeregexdescriptor.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ translations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ urlconf_inner.py
    |   â”œâ”€â”€ urlconf_outer.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_error_handlers.py
    |   â”œâ”€â”€ urls_error_handlers_callables.py
    |   â”œâ”€â”€ urls_without_handlers.py
    |   â”œâ”€â”€ utils.py
    |   â”œâ”€â”€ views.py
    |   â””â”€â”€ views_broken.py
    â”œâ”€â”€ urls.py
    â”œâ”€â”€ user_commands
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ common_args.py
    |   |       â”œâ”€â”€ dance.py
    |   |       â”œâ”€â”€ hal.py
    |   |       â”œâ”€â”€ mutually_exclusive_required.py
    |   |       â”œâ”€â”€ no_system_checks.py
    |   |       â”œâ”€â”€ no_translations.py
    |   |       â”œâ”€â”€ required_option.py
    |   |       â”œâ”€â”€ reverse_url.py
    |   |       â”œâ”€â”€ set_option.py
    |   |       â”œâ”€â”€ specific_system_checks.py
    |   |       â”œâ”€â”€ subparser.py
    |   |       â”œâ”€â”€ subparser_dest.py
    |   |       â”œâ”€â”€ subparser_required.py
    |   |       â””â”€â”€ transaction.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ utils_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ archives
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ files
    |   |   â””â”€â”€ strip_tags2.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_archive.py
    |   â”œâ”€â”€ test_autoreload.py
    |   â”œâ”€â”€ test_baseconv.py
    |   â”œâ”€â”€ test_crypto.py
    |   â”œâ”€â”€ test_datastructures.py
    |   â”œâ”€â”€ test_dateformat.py
    |   â”œâ”€â”€ test_dateparse.py
    |   â”œâ”€â”€ test_datetime_safe.py
    |   â”œâ”€â”€ test_decorators.py
    |   â”œâ”€â”€ test_duration.py
    |   â”œâ”€â”€ test_encoding.py
    |   â”œâ”€â”€ test_encoding_deprecations.py
    |   â”œâ”€â”€ test_feedgenerator.py
    |   â”œâ”€â”€ test_functional.py
    |   â”œâ”€â”€ test_hashable.py
    |   â”œâ”€â”€ test_html.py
    |   â”œâ”€â”€ test_http.py
    |   â”œâ”€â”€ test_inspect.py
    |   â”œâ”€â”€ test_ipv6.py
    |   â”œâ”€â”€ test_jslex.py
    |   â”œâ”€â”€ test_lazyobject.py
    |   â”œâ”€â”€ test_lorem_ipsum.py
    |   â”œâ”€â”€ test_module
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ another_bad_module.py
    |   |   â”œâ”€â”€ another_good_module.py
    |   |   â”œâ”€â”€ bad_module.py
    |   |   â”œâ”€â”€ child_module
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ grandchild_module.py
    |   |   â””â”€â”€ good_module.py
    |   â”œâ”€â”€ test_module_loading.py
    |   â”œâ”€â”€ test_no_submodule.py
    |   â”œâ”€â”€ test_numberformat.py
    |   â”œâ”€â”€ test_os_utils.py
    |   â”œâ”€â”€ test_regex_helper.py
    |   â”œâ”€â”€ test_safestring.py
    |   â”œâ”€â”€ test_simplelazyobject.py
    |   â”œâ”€â”€ test_termcolors.py
    |   â”œâ”€â”€ test_text.py
    |   â”œâ”€â”€ test_timesince.py
    |   â”œâ”€â”€ test_timezone.py
    |   â”œâ”€â”€ test_topological_sort.py
    |   â”œâ”€â”€ test_tree.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ validation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_custom_messages.py
    |   â”œâ”€â”€ test_error_messages.py
    |   â”œâ”€â”€ test_picklable.py
    |   â”œâ”€â”€ test_unique.py
    |   â”œâ”€â”€ test_validators.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ validators
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ invalid_urls.txt
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ valid_urls.txt
    â”œâ”€â”€ version
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ view_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ app0
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ en
    |   â”œâ”€â”€ app1
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ app2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ app3
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ es_AR
    |   â”œâ”€â”€ app4
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ es_AR
    |   â”œâ”€â”€ app5
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ default_urls.py
    |   â”œâ”€â”€ generic_urls.py
    |   â”œâ”€â”€ locale
    |   |   â”œâ”€â”€ de
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_GB
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ es
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ fr
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ nl
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ pt
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â””â”€â”€ ru
    |   |       â””â”€â”€ LC_MESSAGES
    |   â”œâ”€â”€ media
    |   |   â”œâ”€â”€ %2F.txt
    |   |   â”œâ”€â”€ file.txt
    |   |   â”œâ”€â”€ long-line.txt
    |   |   â””â”€â”€ subdir
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ regression_21530_urls.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ debug
    |   â”œâ”€â”€ templatetags
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ debugtags.py
    |   â”œâ”€â”€ tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_csrf.py
    |   |   â”œâ”€â”€ test_debug.py
    |   |   â”œâ”€â”€ test_defaults.py
    |   |   â”œâ”€â”€ test_i18n.py
    |   |   â”œâ”€â”€ test_json.py
    |   |   â”œâ”€â”€ test_specials.py
    |   |   â””â”€â”€ test_static.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â””â”€â”€ wsgi
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ tests.py
        â”œâ”€â”€ urls.py
        â””â”€â”€ wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
cache.backends.db._cull sometimes fails with 'NoneType' object is not subscriptable

Issue description: 
Description
	 
		(last modified by Guillermo BonvehÃ­)
	 
I'm sporadically getting some cache errors using database backend.
The error is: 'NoneType' object is not subscriptable
And the backtrace:
/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response
/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render
/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback
/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response
/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull
This is using Django 2.2.11 but I see the same code is in master.
â€‹https://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270
				cursor.execute(
					connection.ops.cache_key_culling_sql() % table,
					[cull_num])
				cursor.execute("DELETE FROM %s "
							 "WHERE cache_key < %%s" % table,
							 [cursor.fetchone()[0]])
From what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.
I guess a simple check to see if it contains data would be enough, may apply for an easy picking.
Edit: Wording

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/cache/tests.py
Line number range: 618 - 620
Content:
618.     def test_cull(self):
619.         self._perform_cull_test('cull', 50, 29)
620. 


File: tests/cache/tests.py
Line number range: 999 - 1017
Content:
999. @override_settings(CACHES=caches_setting_for_tests(
1000.     BACKEND='django.core.cache.backends.db.DatabaseCache',
1001.     # Spaces are used in the table name to ensure quoting/escaping is working
1002.     LOCATION='test cache table'
1003. ))
1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):
1005. 
1006.     available_apps = ['cache']
1007. 
1008.     def setUp(self):
1009.         # The super calls needs to happen first for the settings override.
1010.         super().setUp()
1011.         self.create_table()
1012. 
1013.     def tearDown(self):
1014.         # The super call needs to happen first because it uses the database.
1015.         super().tearDown()
1016.         self.drop_table()
1017. 


File: tests/cache/tests.py
Line number range: 1040 - 1042
Content:
1040.     def test_zero_cull(self):
1041.         self._perform_cull_test('zero_cull', 50, 18)
1042. 


File: tests/cache/tests.py
Line number range: 601 - 617
Content:
601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):
602.         try:
603.             cull_cache = caches[cull_cache_name]
604.         except InvalidCacheBackendError:
605.             self.skipTest("Culling isn't implemented.")
606. 
607.         # Create initial cache key entries. This will overflow the cache,
608.         # causing a cull.
609.         for i in range(1, initial_count):
610.             cull_cache.set('cull%d' % i, 'value', 1000)
611.         count = 0
612.         # Count how many keys are left in the cache.
613.         for i in range(1, initial_count):
614.             if cull_cache.has_key('cull%d' % i):
615.                 count += 1
616.         self.assertEqual(count, final_count)
617. 


File: tests/cache/tests.py
Line number range: 1199 - 1212
Content:
1199.     @limit_locmem_entries
1200.     def test_lru_get(self):
1201.         """get() moves cache keys."""
1202.         for key in range(9):
1203.             cache.set(key, key, timeout=None)
1204.         for key in range(6):
1205.             self.assertEqual(cache.get(key), key)
1206.         cache.set(9, 9, timeout=None)
1207.         for key in range(6):
1208.             self.assertEqual(cache.get(key), key)
1209.         for key in range(6, 9):
1210.             self.assertIsNone(cache.get(key))
1211.         self.assertEqual(cache.get(9), 9)
1212. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 14:23:44,227 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user request requires providing 5 complete and self-contained test cases related to a bug in the database cache culling mechanism.\n2. The current context provides only fragmented snippets from `tests/cache/tests.py`, which are insufficient to construct complete test cases.\n3. To fulfill the request, I need the full source code of `tests/cache/tests.py` to access all necessary imports, base classes (`BaseCacheTests`), test classes (`DBCacheTests`), helper methods (`_perform_cull_test`, `create_table`, `drop_table`), and the full suite of tests related to the database cache.\n4. Having the complete file is essential to identify 5 relevant tests and present them in a self-contained format as requested.' refined_query='Please provide the full source code for the file `tests/cache/tests.py`.'
2025-10-06 14:23:50,321 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/cache/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'4b651776-e21d-414f-92ce-75366128dbd5': 'Cq8DAR/MhbYBERMEsTdSpZJ7qD6GIyk/D4JxlhHZ1hffc6DDFaCjagpJT2GSiGmNHJjwe8MlTBGPP86mv/atIFJgDpJQvy3Wz2wHaiE8T1GDaWzSEZqRbomqoo6Ye8JJj/adk8YvSLVh1cbDssm3mpz/+SYHZWKCWe7fsp7+pUQvVP4agEZpbJsXER5PYoQIrBtUNS0c6Eq4TFEsHz9uvePoy3OPG6+i21VlFqJrLKGI/P8ZcK988d2kZsacYvtCYtcUABnwY0RGc6GceHv97z8xHUvwYb+pPtCKmoQE4o74Pq3127ja53+ybf4rtbVatKlZR5kpaGu/TmNwvqUE9alj0KbxXhb/6MtolzDPMBD3zbT6MgkEDpnrnNC17unE3RLwUlOlH/xkZ+8fsiCqE10pLN9QWGQkbgr761AKETq5725Bu9lVtuHl0gVsSB4anC29HXA3pMphdha75q1Zdb6MAY3+0SYv8rwbje8iBTqI2geMm//G8fbbe1jGuvainZO4yczYkna16OWkbFtJ2Q8uAuL57VJ/7tmBJDy9Fq/kCll5IvhNa/OJWPkcgtoLYxA='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 55626, 'candidates_token_count': 21, 'total_token_count': 55759, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55626}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 112, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1157076358795166, 'model_name': 'gemini-2.5-pro'} id='run--915064b2-5a56-4568-9072-293a9d8f3282-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/cache/tests.py'}, 'id': '4b651776-e21d-414f-92ce-75366128dbd5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 55626, 'output_tokens': 21, 'total_tokens': 55759, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 112}}
2025-10-06 14:23:57,454 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "tests/cache/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'1f397eda-11d1-4028-9e13-d196e5b5d8f9': 'CoIFAR/MhbYQDsHeVDJM9ucWgNQdHXum1yfcTt1EY1DU/7XrN7KoSf7jHADBgQbHbwp0C7/fDsB4wq/aH5lVRHjkSve/xswwd51/1jU8m2O5jzJX3CuoFdfLrEBqS82K8wAZkMXDeEN08cSv/UbHwRNydlgO9/8CBzZB43kNujUV74oCvotA7TphueCdd1nD9YrO3fLqpFc9UbOfXyzmuajFpC+X4pmCtGeBoShJ2SVReGM+Qbileb5Z9ZOQBfOrnHUGhYPEaSqwCVv14XKQnJYoU0fD0mpjN9GZuJ2duwcht3KxJo/AEdbcWaE/hgQjUVmdFRmuKREA6svE8M52f+1K5k5fY5XxXis1yNxvOZTdTrPMYVxo0txrpnPgn8wxgX+PXG+7d+1wDj5cxf7JGMlcHfpQmHLmp5IG0AWlYMnswscVK8cy5fImw8znPhMVTpN98qixbDFklSN+3kA5yL8XAbcfkLUZDY2+uAorFanI0TngQaPZMma0Qq2WvzX6qTcmC+LPOCoK1Q47SVgCnkLJg47eT6nf6cxoRoHWVYC7k3grJxIDsESihwhLT0Y4wPlVxVepMhK3VFjL6TwaUIY7QSSlXrpK5ZE2b53P3URh5I9oqHjojKy5w4wDWn4W/VrxQdyWpA3xFFQBaSfTajoJeCAiutdHbHoDKDCpnnSGjOLbkaC+FPSluf22g3DZiUCbQnnnxBJl017AgwBR3X4Ki47/xzqayVy0iLPecTLHyxJptoKFX+ntl2NRLHnlxaOgNkTfzsR3iGB7Nf4HH+MEht9JcLGPQPtFghu5YUT7g3xHZ5Exs+4lSbn+7hMXLmfFmBMjnYwpZpiFougsPFkf5ZZA'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 63760, 'candidates_token_count': 21, 'total_token_count': 63957, 'cached_content_token_count': 54003, 'prompt_tokens_details': [{'modality': 1, 'token_count': 63870}], 'cache_tokens_details': [{'modality': 1, 'token_count': 54003}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 176}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7746490296863374, 'model_name': 'gemini-2.5-pro'} id='run--b37ab11e-5521-4898-8e51-2686e81f1055-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'tests/cache/tests.py'}, 'id': '1f397eda-11d1-4028-9e13-d196e5b5d8f9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 63760, 'output_tokens': 21, 'total_tokens': 63957, 'input_token_details': {'cache_read': 54003}, 'output_token_details': {'reasoning': 176}}
2025-10-06 14:24:04,293 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/cache/tests.py", "start_line": 501.0, "end_line": 2000.0}'}, '__gemini_function_call_thought_signatures__': {'9bac3197-1b09-4b85-9411-86914abfa92b': 'CqMEAR/MhbacT3l+TkyysUcUcAOGmpKh9e57ifhwqh4BnQk3fK/Aw7dEFawbnXwEGXbB7iN/IBvcEHv9R1oxwqbdv4sFqCT7ZVKPrDHnujWGlC/cwD23xFTKEx7OR2JfsYMP2OfK8F6UkoVsfVLDRQDNqpB5gZ9LxDX8uQAaxzjnBsNt7xSebr0gK+8HU2W2dqS74IQjLonOxF/aDI/SScEQT0Di5uxabGNX8tUItddX1vWployS9swDGnSmtfdlyImxtHkEVA0qPsjzzB7b6vEt3G0AIhSlwybgOJLjhwUSJ9y7aJjxVA+58Bn8k/wdRfZd3s9XMJVp0E2KILbr2cXIogc8UsISHmC+LTRKmPwKeEYWBlevLppgh7oa0bGHttTZbEI93MqgxXpOXZt37p98fFbwku2eGw5ubIWBVRfURBWyQkbBX//AP9CZ2pQKz5id4r8NGSL8qwppXVYeAfG0zilXm7hHakwKoxs7wBqimPrt6iqQ4dCXMfSjXtyJ6q6ZCTizX04B19RK4oPQqnMD4PpAG83zdaCKgci9eWhCnimzUMCDciqSe9sUYwACziBKfF9sIU+o9r9wM53Dcqb8HSui+Zhu96p5a7MRmmypw5pfZ1rm08RQ2YLdHafFdXFrR77D0CnJV4sfbrASjMLA4pIHUo7F7OQpENi5OYyMSmgbY+CqsIy7dIzX/lgfhF4kOrDlbBncoUZSGdic/uULBetMAQ=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 63835, 'candidates_token_count': 27, 'total_token_count': 64021, 'prompt_tokens_details': [{'modality': 1, 'token_count': 64119}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 159, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.46611061802616827, 'model_name': 'gemini-2.5-pro'} id='run--ca6830b3-38c0-4476-b972-b2f0da358818-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/cache/tests.py', 'start_line': 501.0, 'end_line': 2000.0}, 'id': '9bac3197-1b09-4b85-9411-86914abfa92b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 63835, 'output_tokens': 27, 'total_tokens': 64021, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 159}}
2025-10-06 14:24:09,610 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the full source code for `tests/cache/tests.py`. The file contains a comprehensive suite of unit tests for Django's caching framework, covering various backends like `DummyCache`, `DatabaseCache`, `LocMemCache`, and `FileBasedCache`. The tests examine functionalities such as setting and getting cache keys, managing cache expiration, handling different data types, and implementing cache versioning. Additionally, the file includes tests for cache-related utilities and middleware, ensuring robust and reliable caching behavior across the framework." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 91632, 'candidates_token_count': 109, 'total_token_count': 91863, 'cached_content_token_count': 63650, 'prompt_tokens_details': [{'modality': 1, 'token_count': 92073}], 'cache_tokens_details': [{'modality': 1, 'token_count': 63650}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 122}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2344910507902093, 'model_name': 'gemini-2.5-pro'} id='run--e2143948-969b-4129-a827-5a44dccb7b7d-0' usage_metadata={'input_tokens': 91632, 'output_tokens': 109, 'total_tokens': 91863, 'input_token_details': {'cache_read': 63650}, 'output_token_details': {'reasoning': 122}}
2025-10-06 14:24:09,611 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 14:24:09,611 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
cache.backends.db._cull sometimes fails with 'NoneType' object is not subscriptable

Issue description: 
Description
	 
		(last modified by Guillermo BonvehÃ­)
	 
I'm sporadically getting some cache errors using database backend.
The error is: 'NoneType' object is not subscriptable
And the backtrace:
/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response
/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render
/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback
/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response
/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull
This is using Django 2.2.11 but I see the same code is in master.
â€‹https://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270
				cursor.execute(
					connection.ops.cache_key_culling_sql() % table,
					[cull_num])
				cursor.execute("DELETE FROM %s "
							 "WHERE cache_key < %%s" % table,
							 [cursor.fetchone()[0]])
From what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.
I guess a simple check to see if it contains data would be enough, may apply for an easy picking.
Edit: Wording

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full source code for the file `tests/cache/tests.py`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/cache/tests.py
Line number range: 1 - 500
Content:
1. # Unit tests for cache framework
2. # Uses whatever cache backend is set in the test settings file.
3. import copy
4. import io
5. import os
6. import pickle
7. import re
8. import shutil
9. import tempfile
10. import threading
11. import time
12. import unittest
13. from pathlib import Path
14. from unittest import mock
15. 
16. from django.conf import settings
17. from django.core import management, signals
18. from django.core.cache import (
19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,
20. )
21. from django.core.cache.backends.base import InvalidCacheBackendError
22. from django.core.cache.utils import make_template_fragment_key
23. from django.db import close_old_connections, connection, connections
24. from django.http import (
25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,
26. )
27. from django.middleware.cache import (
28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,
29. )
30. from django.middleware.csrf import CsrfViewMiddleware
31. from django.template import engines
32. from django.template.context_processors import csrf
33. from django.template.response import TemplateResponse
34. from django.test import (
35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,
36.     override_settings,
37. )
38. from django.test.signals import setting_changed
39. from django.utils import timezone, translation
40. from django.utils.cache import (
41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,
42. )
43. from django.views.decorators.cache import cache_control, cache_page
44. 
45. from .models import Poll, expensive_calculation
46. 
47. 
48. # functions/classes for complex data type tests
49. def f():
50.     return 42
51. 
52. 
53. class C:
54.     def m(n):
55.         return 24
56. 
57. 
58. class Unpicklable:
59.     def __getstate__(self):
60.         raise pickle.PickleError()
61. 
62. 
63. def empty_response(request):
64.     return HttpResponse()
65. 
66. 
67. KEY_ERRORS_WITH_MEMCACHED_MSG = (
68.     'Cache key contains characters that will cause errors if used with '
69.     'memcached: %r'
70. )
71. 
72. 
73. @override_settings(CACHES={
74.     'default': {
75.         'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
76.     }
77. })
78. class DummyCacheTests(SimpleTestCase):
79.     # The Dummy cache backend doesn't really behave like a test backend,
80.     # so it has its own test case.
81. 
82.     def test_simple(self):
83.         "Dummy cache backend ignores cache set calls"
84.         cache.set("key", "value")
85.         self.assertIsNone(cache.get("key"))
86. 
87.     def test_add(self):
88.         "Add doesn't do anything in dummy cache backend"
89.         self.assertIs(cache.add("addkey1", "value"), True)
90.         self.assertIs(cache.add("addkey1", "newvalue"), True)
91.         self.assertIsNone(cache.get("addkey1"))
92. 
93.     def test_non_existent(self):
94.         "Nonexistent keys aren't found in the dummy cache backend"
95.         self.assertIsNone(cache.get("does_not_exist"))
96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
97. 
98.     def test_get_many(self):
99.         "get_many returns nothing for the dummy cache backend"
100.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
101.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {})
102.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {})
103. 
104.     def test_get_many_invalid_key(self):
105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
106.         with self.assertWarnsMessage(CacheKeyWarning, msg):
107.             cache.get_many(['key with spaces'])
108. 
109.     def test_delete(self):
110.         "Cache deletion is transparently ignored on the dummy cache backend"
111.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
112.         self.assertIsNone(cache.get("key1"))
113.         self.assertIs(cache.delete("key1"), False)
114.         self.assertIsNone(cache.get("key1"))
115.         self.assertIsNone(cache.get("key2"))
116. 
117.     def test_has_key(self):
118.         "The has_key method doesn't ever return True for the dummy cache backend"
119.         cache.set("hello1", "goodbye1")
120.         self.assertIs(cache.has_key("hello1"), False)
121.         self.assertIs(cache.has_key("goodbye1"), False)
122. 
123.     def test_in(self):
124.         "The in operator doesn't ever return True for the dummy cache backend"
125.         cache.set("hello2", "goodbye2")
126.         self.assertNotIn("hello2", cache)
127.         self.assertNotIn("goodbye2", cache)
128. 
129.     def test_incr(self):
130.         "Dummy cache values can't be incremented"
131.         cache.set('answer', 42)
132.         with self.assertRaises(ValueError):
133.             cache.incr('answer')
134.         with self.assertRaises(ValueError):
135.             cache.incr('does_not_exist')
136. 
137.     def test_decr(self):
138.         "Dummy cache values can't be decremented"
139.         cache.set('answer', 42)
140.         with self.assertRaises(ValueError):
141.             cache.decr('answer')
142.         with self.assertRaises(ValueError):
143.             cache.decr('does_not_exist')
144. 
145.     def test_touch(self):
146.         """Dummy cache can't do touch()."""
147.         self.assertIs(cache.touch('whatever'), False)
148. 
149.     def test_data_types(self):
150.         "All data types are ignored equally by the dummy cache"
151.         stuff = {
152.             'string': 'this is a string',
153.             'int': 42,
154.             'list': [1, 2, 3, 4],
155.             'tuple': (1, 2, 3, 4),
156.             'dict': {'A': 1, 'B': 2},
157.             'function': f,
158.             'class': C,
159.         }
160.         cache.set("stuff", stuff)
161.         self.assertIsNone(cache.get("stuff"))
162. 
163.     def test_expiration(self):
164.         "Expiration has no effect on the dummy cache"
165.         cache.set('expire1', 'very quickly', 1)
166.         cache.set('expire2', 'very quickly', 1)
167.         cache.set('expire3', 'very quickly', 1)
168. 
169.         time.sleep(2)
170.         self.assertIsNone(cache.get("expire1"))
171. 
172.         self.assertIs(cache.add("expire2", "newvalue"), True)
173.         self.assertIsNone(cache.get("expire2"))
174.         self.assertIs(cache.has_key("expire3"), False)
175. 
176.     def test_unicode(self):
177.         "Unicode values are ignored by the dummy cache"
178.         stuff = {
179.             'ascii': 'ascii_value',
180.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
181.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
182.             'ascii2': {'x': 1}
183.         }
184.         for (key, value) in stuff.items():
185.             with self.subTest(key=key):
186.                 cache.set(key, value)
187.                 self.assertIsNone(cache.get(key))
188. 
189.     def test_set_many(self):
190.         "set_many does nothing for the dummy cache backend"
191.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}), [])
192.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}, timeout=2, version='1'), [])
193. 
194.     def test_set_many_invalid_key(self):
195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
196.         with self.assertWarnsMessage(CacheKeyWarning, msg):
197.             cache.set_many({'key with spaces': 'foo'})
198. 
199.     def test_delete_many(self):
200.         "delete_many does nothing for the dummy cache backend"
201.         cache.delete_many(['a', 'b'])
202. 
203.     def test_delete_many_invalid_key(self):
204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
205.         with self.assertWarnsMessage(CacheKeyWarning, msg):
206.             cache.delete_many({'key with spaces': 'foo'})
207. 
208.     def test_clear(self):
209.         "clear does nothing for the dummy cache backend"
210.         cache.clear()
211. 
212.     def test_incr_version(self):
213.         "Dummy cache versions can't be incremented"
214.         cache.set('answer', 42)
215.         with self.assertRaises(ValueError):
216.             cache.incr_version('answer')
217.         with self.assertRaises(ValueError):
218.             cache.incr_version('does_not_exist')
219. 
220.     def test_decr_version(self):
221.         "Dummy cache versions can't be decremented"
222.         cache.set('answer', 42)
223.         with self.assertRaises(ValueError):
224.             cache.decr_version('answer')
225.         with self.assertRaises(ValueError):
226.             cache.decr_version('does_not_exist')
227. 
228.     def test_get_or_set(self):
229.         self.assertEqual(cache.get_or_set('mykey', 'default'), 'default')
230.         self.assertIsNone(cache.get_or_set('mykey', None))
231. 
232.     def test_get_or_set_callable(self):
233.         def my_callable():
234.             return 'default'
235. 
236.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'default')
237.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'default')
238. 
239. 
240. def custom_key_func(key, key_prefix, version):
241.     "A customized cache key function"
242.     return 'CUSTOM-' + '-'.join([key_prefix, str(version), key])
243. 
244. 
245. _caches_setting_base = {
246.     'default': {},
247.     'prefix': {'KEY_PREFIX': 'cacheprefix{}'.format(os.getpid())},
248.     'v2': {'VERSION': 2},
249.     'custom_key': {'KEY_FUNCTION': custom_key_func},
250.     'custom_key2': {'KEY_FUNCTION': 'cache.tests.custom_key_func'},
251.     'cull': {'OPTIONS': {'MAX_ENTRIES': 30}},
252.     'zero_cull': {'OPTIONS': {'CULL_FREQUENCY': 0, 'MAX_ENTRIES': 30}},
253. }
254. 
255. 
256. def caches_setting_for_tests(base=None, exclude=None, **params):
257.     # `base` is used to pull in the memcached config from the original settings,
258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys
259.     # should be omitted.
260.     # `params` are test specific overrides and `_caches_settings_base` is the
261.     # base config for the tests.
262.     # This results in the following search order:
263.     # params -> _caches_setting_base -> base
264.     base = base or {}
265.     exclude = exclude or set()
266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}
267.     for key, cache_params in setting.items():
268.         cache_params.update(_caches_setting_base[key])
269.         cache_params.update(params)
270.     return setting
271. 
272. 
273. class BaseCacheTests:
274.     # A common set of tests to apply to all cache backends
275.     factory = RequestFactory()
276. 
277.     def tearDown(self):
278.         cache.clear()
279. 
280.     def test_simple(self):
281.         # Simple cache set/get works
282.         cache.set("key", "value")
283.         self.assertEqual(cache.get("key"), "value")
284. 
285.     def test_default_used_when_none_is_set(self):
286.         """If None is cached, get() returns it instead of the default."""
287.         cache.set('key_default_none', None)
288.         self.assertIsNone(cache.get('key_default_none', default='default'))
289. 
290.     def test_add(self):
291.         # A key can be added to a cache
292.         self.assertIs(cache.add("addkey1", "value"), True)
293.         self.assertIs(cache.add("addkey1", "newvalue"), False)
294.         self.assertEqual(cache.get("addkey1"), "value")
295. 
296.     def test_prefix(self):
297.         # Test for same cache key conflicts between shared backend
298.         cache.set('somekey', 'value')
299. 
300.         # should not be set in the prefixed cache
301.         self.assertIs(caches['prefix'].has_key('somekey'), False)
302. 
303.         caches['prefix'].set('somekey', 'value2')
304. 
305.         self.assertEqual(cache.get('somekey'), 'value')
306.         self.assertEqual(caches['prefix'].get('somekey'), 'value2')
307. 
308.     def test_non_existent(self):
309.         """Nonexistent cache keys return as None/default."""
310.         self.assertIsNone(cache.get("does_not_exist"))
311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
312. 
313.     def test_get_many(self):
314.         # Multiple cache keys can be returned using get_many
315.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
316.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {'a': 'a', 'c': 'c', 'd': 'd'})
317.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {'a': 'a', 'b': 'b'})
318.         self.assertEqual(cache.get_many(iter(['a', 'b', 'e'])), {'a': 'a', 'b': 'b'})
319. 
320.     def test_delete(self):
321.         # Cache keys can be deleted
322.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
323.         self.assertEqual(cache.get("key1"), "spam")
324.         self.assertIs(cache.delete("key1"), True)
325.         self.assertIsNone(cache.get("key1"))
326.         self.assertEqual(cache.get("key2"), "eggs")
327. 
328.     def test_delete_nonexistent(self):
329.         self.assertIs(cache.delete('nonexistent_key'), False)
330. 
331.     def test_has_key(self):
332.         # The cache can be inspected for cache keys
333.         cache.set("hello1", "goodbye1")
334.         self.assertIs(cache.has_key("hello1"), True)
335.         self.assertIs(cache.has_key("goodbye1"), False)
336.         cache.set("no_expiry", "here", None)
337.         self.assertIs(cache.has_key("no_expiry"), True)
338. 
339.     def test_in(self):
340.         # The in operator can be used to inspect cache contents
341.         cache.set("hello2", "goodbye2")
342.         self.assertIn("hello2", cache)
343.         self.assertNotIn("goodbye2", cache)
344. 
345.     def test_incr(self):
346.         # Cache values can be incremented
347.         cache.set('answer', 41)
348.         self.assertEqual(cache.incr('answer'), 42)
349.         self.assertEqual(cache.get('answer'), 42)
350.         self.assertEqual(cache.incr('answer', 10), 52)
351.         self.assertEqual(cache.get('answer'), 52)
352.         self.assertEqual(cache.incr('answer', -10), 42)
353.         with self.assertRaises(ValueError):
354.             cache.incr('does_not_exist')
355. 
356.     def test_decr(self):
357.         # Cache values can be decremented
358.         cache.set('answer', 43)
359.         self.assertEqual(cache.decr('answer'), 42)
360.         self.assertEqual(cache.get('answer'), 42)
361.         self.assertEqual(cache.decr('answer', 10), 32)
362.         self.assertEqual(cache.get('answer'), 32)
363.         self.assertEqual(cache.decr('answer', -10), 42)
364.         with self.assertRaises(ValueError):
365.             cache.decr('does_not_exist')
366. 
367.     def test_close(self):
368.         self.assertTrue(hasattr(cache, 'close'))
369.         cache.close()
370. 
371.     def test_data_types(self):
372.         # Many different data types can be cached
373.         stuff = {
374.             'string': 'this is a string',
375.             'int': 42,
376.             'list': [1, 2, 3, 4],
377.             'tuple': (1, 2, 3, 4),
378.             'dict': {'A': 1, 'B': 2},
379.             'function': f,
380.             'class': C,
381.         }
382.         cache.set("stuff", stuff)
383.         self.assertEqual(cache.get("stuff"), stuff)
384. 
385.     def test_cache_read_for_model_instance(self):
386.         # Don't want fields with callable as default to be called on cache read
387.         expensive_calculation.num_runs = 0
388.         Poll.objects.all().delete()
389.         my_poll = Poll.objects.create(question="Well?")
390.         self.assertEqual(Poll.objects.count(), 1)
391.         pub_date = my_poll.pub_date
392.         cache.set('question', my_poll)
393.         cached_poll = cache.get('question')
394.         self.assertEqual(cached_poll.pub_date, pub_date)
395.         # We only want the default expensive calculation run once
396.         self.assertEqual(expensive_calculation.num_runs, 1)
397. 
398.     def test_cache_write_for_model_instance_with_deferred(self):
399.         # Don't want fields with callable as default to be called on cache write
400.         expensive_calculation.num_runs = 0
401.         Poll.objects.all().delete()
402.         Poll.objects.create(question="What?")
403.         self.assertEqual(expensive_calculation.num_runs, 1)
404.         defer_qs = Poll.objects.all().defer('question')
405.         self.assertEqual(defer_qs.count(), 1)
406.         self.assertEqual(expensive_calculation.num_runs, 1)
407.         cache.set('deferred_queryset', defer_qs)
408.         # cache set should not re-evaluate default functions
409.         self.assertEqual(expensive_calculation.num_runs, 1)
410. 
411.     def test_cache_read_for_model_instance_with_deferred(self):
412.         # Don't want fields with callable as default to be called on cache read
413.         expensive_calculation.num_runs = 0
414.         Poll.objects.all().delete()
415.         Poll.objects.create(question="What?")
416.         self.assertEqual(expensive_calculation.num_runs, 1)
417.         defer_qs = Poll.objects.all().defer('question')
418.         self.assertEqual(defer_qs.count(), 1)
419.         cache.set('deferred_queryset', defer_qs)
420.         self.assertEqual(expensive_calculation.num_runs, 1)
421.         runs_before_cache_read = expensive_calculation.num_runs
422.         cache.get('deferred_queryset')
423.         # We only want the default expensive calculation run on creation and set
424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)
425. 
426.     def test_expiration(self):
427.         # Cache values can be set to expire
428.         cache.set('expire1', 'very quickly', 1)
429.         cache.set('expire2', 'very quickly', 1)
430.         cache.set('expire3', 'very quickly', 1)
431. 
432.         time.sleep(2)
433.         self.assertIsNone(cache.get("expire1"))
434. 
435.         self.assertIs(cache.add("expire2", "newvalue"), True)
436.         self.assertEqual(cache.get("expire2"), "newvalue")
437.         self.assertIs(cache.has_key("expire3"), False)
438. 
439.     def test_touch(self):
440.         # cache.touch() updates the timeout.
441.         cache.set('expire1', 'very quickly', timeout=1)
442.         self.assertIs(cache.touch('expire1', timeout=4), True)
443.         time.sleep(2)
444.         self.assertIs(cache.has_key('expire1'), True)
445.         time.sleep(3)
446.         self.assertIs(cache.has_key('expire1'), False)
447.         # cache.touch() works without the timeout argument.
448.         cache.set('expire1', 'very quickly', timeout=1)
449.         self.assertIs(cache.touch('expire1'), True)
450.         time.sleep(2)
451.         self.assertIs(cache.has_key('expire1'), True)
452. 
453.         self.assertIs(cache.touch('nonexistent'), False)
454. 
455.     def test_unicode(self):
456.         # Unicode values can be cached
457.         stuff = {
458.             'ascii': 'ascii_value',
459.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
460.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
461.             'ascii2': {'x': 1}
462.         }
463.         # Test `set`
464.         for (key, value) in stuff.items():
465.             with self.subTest(key=key):
466.                 cache.set(key, value)
467.                 self.assertEqual(cache.get(key), value)
468. 
469.         # Test `add`
470.         for (key, value) in stuff.items():
471.             with self.subTest(key=key):
472.                 self.assertIs(cache.delete(key), True)
473.                 self.assertIs(cache.add(key, value), True)
474.                 self.assertEqual(cache.get(key), value)
475. 
476.         # Test `set_many`
477.         for (key, value) in stuff.items():
478.             self.assertIs(cache.delete(key), True)
479.         cache.set_many(stuff)
480.         for (key, value) in stuff.items():
481.             with self.subTest(key=key):
482.                 self.assertEqual(cache.get(key), value)
483. 
484.     def test_binary_string(self):
485.         # Binary strings should be cacheable
486.         from zlib import compress, decompress
487.         value = 'value_to_be_compressed'
488.         compressed_value = compress(value.encode())
489. 
490.         # Test set
491.         cache.set('binary1', compressed_value)
492.         compressed_result = cache.get('binary1')
493.         self.assertEqual(compressed_value, compressed_result)
494.         self.assertEqual(value, decompress(compressed_result).decode())
495. 
496.         # Test add
497.         self.assertIs(cache.add('binary1-add', compressed_value), True)
498.         compressed_result = cache.get('binary1-add')
499.         self.assertEqual(compressed_value, compressed_result)
500.         self.assertEqual(value, decompress(compressed_result).decode())

File: tests/cache/tests.py
Line number range: 501 - 2000
Content:
501. 
502.         # Test set_many
503.         cache.set_many({'binary1-set_many': compressed_value})
504.         compressed_result = cache.get('binary1-set_many')
505.         self.assertEqual(compressed_value, compressed_result)
506.         self.assertEqual(value, decompress(compressed_result).decode())
507. 
508.     def test_set_many(self):
509.         # Multiple keys can be set using set_many
510.         cache.set_many({"key1": "spam", "key2": "eggs"})
511.         self.assertEqual(cache.get("key1"), "spam")
512.         self.assertEqual(cache.get("key2"), "eggs")
513. 
514.     def test_set_many_returns_empty_list_on_success(self):
515.         """set_many() returns an empty list when all keys are inserted."""
516.         failing_keys = cache.set_many({'key1': 'spam', 'key2': 'eggs'})
517.         self.assertEqual(failing_keys, [])
518. 
519.     def test_set_many_expiration(self):
520.         # set_many takes a second ``timeout`` parameter
521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)
522.         time.sleep(2)
523.         self.assertIsNone(cache.get("key1"))
524.         self.assertIsNone(cache.get("key2"))
525. 
526.     def test_delete_many(self):
527.         # Multiple keys can be deleted using delete_many
528.         cache.set_many({'key1': 'spam', 'key2': 'eggs', 'key3': 'ham'})
529.         cache.delete_many(["key1", "key2"])
530.         self.assertIsNone(cache.get("key1"))
531.         self.assertIsNone(cache.get("key2"))
532.         self.assertEqual(cache.get("key3"), "ham")
533. 
534.     def test_clear(self):
535.         # The cache can be emptied using clear
536.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
537.         cache.clear()
538.         self.assertIsNone(cache.get("key1"))
539.         self.assertIsNone(cache.get("key2"))
540. 
541.     def test_long_timeout(self):
542.         """
543.         Follow memcached's convention where a timeout greater than 30 days is
544.         treated as an absolute expiration timestamp instead of a relative
545.         offset (#12399).
546.         """
547.         cache.set('key1', 'eggs', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second
548.         self.assertEqual(cache.get('key1'), 'eggs')
549. 
550.         self.assertIs(cache.add('key2', 'ham', 60 * 60 * 24 * 30 + 1), True)
551.         self.assertEqual(cache.get('key2'), 'ham')
552. 
553.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 60 * 60 * 24 * 30 + 1)
554.         self.assertEqual(cache.get('key3'), 'sausage')
555.         self.assertEqual(cache.get('key4'), 'lobster bisque')
556. 
557.     def test_forever_timeout(self):
558.         """
559.         Passing in None into timeout results in a value that is cached forever
560.         """
561.         cache.set('key1', 'eggs', None)
562.         self.assertEqual(cache.get('key1'), 'eggs')
563. 
564.         self.assertIs(cache.add('key2', 'ham', None), True)
565.         self.assertEqual(cache.get('key2'), 'ham')
566.         self.assertIs(cache.add('key1', 'new eggs', None), False)
567.         self.assertEqual(cache.get('key1'), 'eggs')
568. 
569.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, None)
570.         self.assertEqual(cache.get('key3'), 'sausage')
571.         self.assertEqual(cache.get('key4'), 'lobster bisque')
572. 
573.         cache.set('key5', 'belgian fries', timeout=1)
574.         self.assertIs(cache.touch('key5', timeout=None), True)
575.         time.sleep(2)
576.         self.assertEqual(cache.get('key5'), 'belgian fries')
577. 
578.     def test_zero_timeout(self):
579.         """
580.         Passing in zero into timeout results in a value that is not cached
581.         """
582.         cache.set('key1', 'eggs', 0)
583.         self.assertIsNone(cache.get('key1'))
584. 
585.         self.assertIs(cache.add('key2', 'ham', 0), True)
586.         self.assertIsNone(cache.get('key2'))
587. 
588.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 0)
589.         self.assertIsNone(cache.get('key3'))
590.         self.assertIsNone(cache.get('key4'))
591. 
592.         cache.set('key5', 'belgian fries', timeout=5)
593.         self.assertIs(cache.touch('key5', timeout=0), True)
594.         self.assertIsNone(cache.get('key5'))
595. 
596.     def test_float_timeout(self):
597.         # Make sure a timeout given as a float doesn't crash anything.
598.         cache.set("key1", "spam", 100.2)
599.         self.assertEqual(cache.get("key1"), "spam")
600. 
601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):
602.         try:
603.             cull_cache = caches[cull_cache_name]
604.         except InvalidCacheBackendError:
605.             self.skipTest("Culling isn't implemented.")
606. 
607.         # Create initial cache key entries. This will overflow the cache,
608.         # causing a cull.
609.         for i in range(1, initial_count):
610.             cull_cache.set('cull%d' % i, 'value', 1000)
611.         count = 0
612.         # Count how many keys are left in the cache.
613.         for i in range(1, initial_count):
614.             if cull_cache.has_key('cull%d' % i):
615.                 count += 1
616.         self.assertEqual(count, final_count)
617. 
618.     def test_cull(self):
619.         self._perform_cull_test('cull', 50, 29)
620. 
621.     def test_zero_cull(self):
622.         self._perform_cull_test('zero_cull', 50, 19)
623. 
624.     def _perform_invalid_key_test(self, key, expected_warning):
625.         """
626.         All the builtin backends should warn (except memcached that should
627.         error) on keys that would be refused by memcached. This encourages
628.         portable caching code without making it too difficult to use production
629.         backends with more liberal key rules. Refs #6447.
630.         """
631.         # mimic custom ``make_key`` method being defined since the default will
632.         # never show the below warnings
633.         def func(key, *args):
634.             return key
635. 
636.         old_func = cache.key_func
637.         cache.key_func = func
638. 
639.         try:
640.             with self.assertWarns(CacheKeyWarning) as cm:
641.                 cache.set(key, 'value')
642.             self.assertEqual(str(cm.warning), expected_warning)
643.         finally:
644.             cache.key_func = old_func
645. 
646.     def test_invalid_key_characters(self):
647.         # memcached doesn't allow whitespace or control characters in keys.
648.         key = 'key with spaces and æ¸…'
649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)
650. 
651.     def test_invalid_key_length(self):
652.         # memcached limits key length to 250.
653.         key = ('a' * 250) + 'æ¸…'
654.         expected_warning = (
655.             'Cache key will cause errors if used with memcached: '
656.             '%r (longer than %s)' % (key, 250)
657.         )
658.         self._perform_invalid_key_test(key, expected_warning)
659. 
660.     def test_cache_versioning_get_set(self):
661.         # set, using default version = 1
662.         cache.set('answer1', 42)
663.         self.assertEqual(cache.get('answer1'), 42)
664.         self.assertEqual(cache.get('answer1', version=1), 42)
665.         self.assertIsNone(cache.get('answer1', version=2))
666. 
667.         self.assertIsNone(caches['v2'].get('answer1'))
668.         self.assertEqual(caches['v2'].get('answer1', version=1), 42)
669.         self.assertIsNone(caches['v2'].get('answer1', version=2))
670. 
671.         # set, default version = 1, but manually override version = 2
672.         cache.set('answer2', 42, version=2)
673.         self.assertIsNone(cache.get('answer2'))
674.         self.assertIsNone(cache.get('answer2', version=1))
675.         self.assertEqual(cache.get('answer2', version=2), 42)
676. 
677.         self.assertEqual(caches['v2'].get('answer2'), 42)
678.         self.assertIsNone(caches['v2'].get('answer2', version=1))
679.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
680. 
681.         # v2 set, using default version = 2
682.         caches['v2'].set('answer3', 42)
683.         self.assertIsNone(cache.get('answer3'))
684.         self.assertIsNone(cache.get('answer3', version=1))
685.         self.assertEqual(cache.get('answer3', version=2), 42)
686. 
687.         self.assertEqual(caches['v2'].get('answer3'), 42)
688.         self.assertIsNone(caches['v2'].get('answer3', version=1))
689.         self.assertEqual(caches['v2'].get('answer3', version=2), 42)
690. 
691.         # v2 set, default version = 2, but manually override version = 1
692.         caches['v2'].set('answer4', 42, version=1)
693.         self.assertEqual(cache.get('answer4'), 42)
694.         self.assertEqual(cache.get('answer4', version=1), 42)
695.         self.assertIsNone(cache.get('answer4', version=2))
696. 
697.         self.assertIsNone(caches['v2'].get('answer4'))
698.         self.assertEqual(caches['v2'].get('answer4', version=1), 42)
699.         self.assertIsNone(caches['v2'].get('answer4', version=2))
700. 
701.     def test_cache_versioning_add(self):
702. 
703.         # add, default version = 1, but manually override version = 2
704.         self.assertIs(cache.add('answer1', 42, version=2), True)
705.         self.assertIsNone(cache.get('answer1', version=1))
706.         self.assertEqual(cache.get('answer1', version=2), 42)
707. 
708.         self.assertIs(cache.add('answer1', 37, version=2), False)
709.         self.assertIsNone(cache.get('answer1', version=1))
710.         self.assertEqual(cache.get('answer1', version=2), 42)
711. 
712.         self.assertIs(cache.add('answer1', 37, version=1), True)
713.         self.assertEqual(cache.get('answer1', version=1), 37)
714.         self.assertEqual(cache.get('answer1', version=2), 42)
715. 
716.         # v2 add, using default version = 2
717.         self.assertIs(caches['v2'].add('answer2', 42), True)
718.         self.assertIsNone(cache.get('answer2', version=1))
719.         self.assertEqual(cache.get('answer2', version=2), 42)
720. 
721.         self.assertIs(caches['v2'].add('answer2', 37), False)
722.         self.assertIsNone(cache.get('answer2', version=1))
723.         self.assertEqual(cache.get('answer2', version=2), 42)
724. 
725.         self.assertIs(caches['v2'].add('answer2', 37, version=1), True)
726.         self.assertEqual(cache.get('answer2', version=1), 37)
727.         self.assertEqual(cache.get('answer2', version=2), 42)
728. 
729.         # v2 add, default version = 2, but manually override version = 1
730.         self.assertIs(caches['v2'].add('answer3', 42, version=1), True)
731.         self.assertEqual(cache.get('answer3', version=1), 42)
732.         self.assertIsNone(cache.get('answer3', version=2))
733. 
734.         self.assertIs(caches['v2'].add('answer3', 37, version=1), False)
735.         self.assertEqual(cache.get('answer3', version=1), 42)
736.         self.assertIsNone(cache.get('answer3', version=2))
737. 
738.         self.assertIs(caches['v2'].add('answer3', 37), True)
739.         self.assertEqual(cache.get('answer3', version=1), 42)
740.         self.assertEqual(cache.get('answer3', version=2), 37)
741. 
742.     def test_cache_versioning_has_key(self):
743.         cache.set('answer1', 42)
744. 
745.         # has_key
746.         self.assertIs(cache.has_key('answer1'), True)
747.         self.assertIs(cache.has_key('answer1', version=1), True)
748.         self.assertIs(cache.has_key('answer1', version=2), False)
749. 
750.         self.assertIs(caches['v2'].has_key('answer1'), False)
751.         self.assertIs(caches['v2'].has_key('answer1', version=1), True)
752.         self.assertIs(caches['v2'].has_key('answer1', version=2), False)
753. 
754.     def test_cache_versioning_delete(self):
755.         cache.set('answer1', 37, version=1)
756.         cache.set('answer1', 42, version=2)
757.         self.assertIs(cache.delete('answer1'), True)
758.         self.assertIsNone(cache.get('answer1', version=1))
759.         self.assertEqual(cache.get('answer1', version=2), 42)
760. 
761.         cache.set('answer2', 37, version=1)
762.         cache.set('answer2', 42, version=2)
763.         self.assertIs(cache.delete('answer2', version=2), True)
764.         self.assertEqual(cache.get('answer2', version=1), 37)
765.         self.assertIsNone(cache.get('answer2', version=2))
766. 
767.         cache.set('answer3', 37, version=1)
768.         cache.set('answer3', 42, version=2)
769.         self.assertIs(caches['v2'].delete('answer3'), True)
770.         self.assertEqual(cache.get('answer3', version=1), 37)
771.         self.assertIsNone(cache.get('answer3', version=2))
772. 
773.         cache.set('answer4', 37, version=1)
774.         cache.set('answer4', 42, version=2)
775.         self.assertIs(caches['v2'].delete('answer4', version=1), True)
776.         self.assertIsNone(cache.get('answer4', version=1))
777.         self.assertEqual(cache.get('answer4', version=2), 42)
778. 
779.     def test_cache_versioning_incr_decr(self):
780.         cache.set('answer1', 37, version=1)
781.         cache.set('answer1', 42, version=2)
782.         self.assertEqual(cache.incr('answer1'), 38)
783.         self.assertEqual(cache.get('answer1', version=1), 38)
784.         self.assertEqual(cache.get('answer1', version=2), 42)
785.         self.assertEqual(cache.decr('answer1'), 37)
786.         self.assertEqual(cache.get('answer1', version=1), 37)
787.         self.assertEqual(cache.get('answer1', version=2), 42)
788. 
789.         cache.set('answer2', 37, version=1)
790.         cache.set('answer2', 42, version=2)
791.         self.assertEqual(cache.incr('answer2', version=2), 43)
792.         self.assertEqual(cache.get('answer2', version=1), 37)
793.         self.assertEqual(cache.get('answer2', version=2), 43)
794.         self.assertEqual(cache.decr('answer2', version=2), 42)
795.         self.assertEqual(cache.get('answer2', version=1), 37)
796.         self.assertEqual(cache.get('answer2', version=2), 42)
797. 
798.         cache.set('answer3', 37, version=1)
799.         cache.set('answer3', 42, version=2)
800.         self.assertEqual(caches['v2'].incr('answer3'), 43)
801.         self.assertEqual(cache.get('answer3', version=1), 37)
802.         self.assertEqual(cache.get('answer3', version=2), 43)
803.         self.assertEqual(caches['v2'].decr('answer3'), 42)
804.         self.assertEqual(cache.get('answer3', version=1), 37)
805.         self.assertEqual(cache.get('answer3', version=2), 42)
806. 
807.         cache.set('answer4', 37, version=1)
808.         cache.set('answer4', 42, version=2)
809.         self.assertEqual(caches['v2'].incr('answer4', version=1), 38)
810.         self.assertEqual(cache.get('answer4', version=1), 38)
811.         self.assertEqual(cache.get('answer4', version=2), 42)
812.         self.assertEqual(caches['v2'].decr('answer4', version=1), 37)
813.         self.assertEqual(cache.get('answer4', version=1), 37)
814.         self.assertEqual(cache.get('answer4', version=2), 42)
815. 
816.     def test_cache_versioning_get_set_many(self):
817.         # set, using default version = 1
818.         cache.set_many({'ford1': 37, 'arthur1': 42})
819.         self.assertEqual(cache.get_many(['ford1', 'arthur1']), {'ford1': 37, 'arthur1': 42})
820.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
821.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=2), {})
822. 
823.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1']), {})
824.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
825.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=2), {})
826. 
827.         # set, default version = 1, but manually override version = 2
828.         cache.set_many({'ford2': 37, 'arthur2': 42}, version=2)
829.         self.assertEqual(cache.get_many(['ford2', 'arthur2']), {})
830.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=1), {})
831.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
832. 
833.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2']), {'ford2': 37, 'arthur2': 42})
834.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=1), {})
835.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
836. 
837.         # v2 set, using default version = 2
838.         caches['v2'].set_many({'ford3': 37, 'arthur3': 42})
839.         self.assertEqual(cache.get_many(['ford3', 'arthur3']), {})
840.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=1), {})
841.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
842. 
843.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3']), {'ford3': 37, 'arthur3': 42})
844.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=1), {})
845.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
846. 
847.         # v2 set, default version = 2, but manually override version = 1
848.         caches['v2'].set_many({'ford4': 37, 'arthur4': 42}, version=1)
849.         self.assertEqual(cache.get_many(['ford4', 'arthur4']), {'ford4': 37, 'arthur4': 42})
850.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
851.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=2), {})
852. 
853.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4']), {})
854.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
855.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=2), {})
856. 
857.     def test_incr_version(self):
858.         cache.set('answer', 42, version=2)
859.         self.assertIsNone(cache.get('answer'))
860.         self.assertIsNone(cache.get('answer', version=1))
861.         self.assertEqual(cache.get('answer', version=2), 42)
862.         self.assertIsNone(cache.get('answer', version=3))
863. 
864.         self.assertEqual(cache.incr_version('answer', version=2), 3)
865.         self.assertIsNone(cache.get('answer'))
866.         self.assertIsNone(cache.get('answer', version=1))
867.         self.assertIsNone(cache.get('answer', version=2))
868.         self.assertEqual(cache.get('answer', version=3), 42)
869. 
870.         caches['v2'].set('answer2', 42)
871.         self.assertEqual(caches['v2'].get('answer2'), 42)
872.         self.assertIsNone(caches['v2'].get('answer2', version=1))
873.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
874.         self.assertIsNone(caches['v2'].get('answer2', version=3))
875. 
876.         self.assertEqual(caches['v2'].incr_version('answer2'), 3)
877.         self.assertIsNone(caches['v2'].get('answer2'))
878.         self.assertIsNone(caches['v2'].get('answer2', version=1))
879.         self.assertIsNone(caches['v2'].get('answer2', version=2))
880.         self.assertEqual(caches['v2'].get('answer2', version=3), 42)
881. 
882.         with self.assertRaises(ValueError):
883.             cache.incr_version('does_not_exist')
884. 
885.     def test_decr_version(self):
886.         cache.set('answer', 42, version=2)
887.         self.assertIsNone(cache.get('answer'))
888.         self.assertIsNone(cache.get('answer', version=1))
889.         self.assertEqual(cache.get('answer', version=2), 42)
890. 
891.         self.assertEqual(cache.decr_version('answer', version=2), 1)
892.         self.assertEqual(cache.get('answer'), 42)
893.         self.assertEqual(cache.get('answer', version=1), 42)
894.         self.assertIsNone(cache.get('answer', version=2))
895. 
896.         caches['v2'].set('answer2', 42)
897.         self.assertEqual(caches['v2'].get('answer2'), 42)
898.         self.assertIsNone(caches['v2'].get('answer2', version=1))
899.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
900. 
901.         self.assertEqual(caches['v2'].decr_version('answer2'), 1)
902.         self.assertIsNone(caches['v2'].get('answer2'))
903.         self.assertEqual(caches['v2'].get('answer2', version=1), 42)
904.         self.assertIsNone(caches['v2'].get('answer2', version=2))
905. 
906.         with self.assertRaises(ValueError):
907.             cache.decr_version('does_not_exist', version=2)
908. 
909.     def test_custom_key_func(self):
910.         # Two caches with different key functions aren't visible to each other
911.         cache.set('answer1', 42)
912.         self.assertEqual(cache.get('answer1'), 42)
913.         self.assertIsNone(caches['custom_key'].get('answer1'))
914.         self.assertIsNone(caches['custom_key2'].get('answer1'))
915. 
916.         caches['custom_key'].set('answer2', 42)
917.         self.assertIsNone(cache.get('answer2'))
918.         self.assertEqual(caches['custom_key'].get('answer2'), 42)
919.         self.assertEqual(caches['custom_key2'].get('answer2'), 42)
920. 
921.     def test_cache_write_unpicklable_object(self):
922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)
923.         fetch_middleware.cache = cache
924. 
925.         request = self.factory.get('/cache/test')
926.         request._cache_update_cache = True
927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
928.         self.assertIsNone(get_cache_data)
929. 
930.         content = 'Testing cookie serialization.'
931. 
932.         def get_response(req):
933.             response = HttpResponse(content)
934.             response.set_cookie('foo', 'bar')
935.             return response
936. 
937.         update_middleware = UpdateCacheMiddleware(get_response)
938.         update_middleware.cache = cache
939.         response = update_middleware(request)
940. 
941.         get_cache_data = fetch_middleware.process_request(request)
942.         self.assertIsNotNone(get_cache_data)
943.         self.assertEqual(get_cache_data.content, content.encode())
944.         self.assertEqual(get_cache_data.cookies, response.cookies)
945. 
946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)
947.         get_cache_data = fetch_middleware.process_request(request)
948.         self.assertIsNotNone(get_cache_data)
949.         self.assertEqual(get_cache_data.content, content.encode())
950.         self.assertEqual(get_cache_data.cookies, response.cookies)
951. 
952.     def test_add_fail_on_pickleerror(self):
953.         # Shouldn't fail silently if trying to cache an unpicklable type.
954.         with self.assertRaises(pickle.PickleError):
955.             cache.add('unpicklable', Unpicklable())
956. 
957.     def test_set_fail_on_pickleerror(self):
958.         with self.assertRaises(pickle.PickleError):
959.             cache.set('unpicklable', Unpicklable())
960. 
961.     def test_get_or_set(self):
962.         self.assertIsNone(cache.get('projector'))
963.         self.assertEqual(cache.get_or_set('projector', 42), 42)
964.         self.assertEqual(cache.get('projector'), 42)
965.         self.assertIsNone(cache.get_or_set('null', None))
966. 
967.     def test_get_or_set_callable(self):
968.         def my_callable():
969.             return 'value'
970. 
971.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'value')
972.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'value')
973. 
974.     def test_get_or_set_callable_returning_none(self):
975.         self.assertIsNone(cache.get_or_set('mykey', lambda: None))
976.         # Previous get_or_set() doesn't store None in the cache.
977.         self.assertEqual(cache.get('mykey', 'default'), 'default')
978. 
979.     def test_get_or_set_version(self):
980.         msg = "get_or_set() missing 1 required positional argument: 'default'"
981.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
982.         with self.assertRaisesMessage(TypeError, msg):
983.             cache.get_or_set('brian')
984.         with self.assertRaisesMessage(TypeError, msg):
985.             cache.get_or_set('brian', version=1)
986.         self.assertIsNone(cache.get('brian', version=1))
987.         self.assertEqual(cache.get_or_set('brian', 42, version=1), 42)
988.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
989.         self.assertIsNone(cache.get('brian', version=3))
990. 
991.     def test_get_or_set_racing(self):
992.         with mock.patch('%s.%s' % (settings.CACHES['default']['BACKEND'], 'add')) as cache_add:
993.             # Simulate cache.add() failing to add a value. In that case, the
994.             # default value should be returned.
995.             cache_add.return_value = False
996.             self.assertEqual(cache.get_or_set('key', 'default'), 'default')
997. 
998. 
999. @override_settings(CACHES=caches_setting_for_tests(
1000.     BACKEND='django.core.cache.backends.db.DatabaseCache',
1001.     # Spaces are used in the table name to ensure quoting/escaping is working
1002.     LOCATION='test cache table'
1003. ))
1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):
1005. 
1006.     available_apps = ['cache']
1007. 
1008.     def setUp(self):
1009.         # The super calls needs to happen first for the settings override.
1010.         super().setUp()
1011.         self.create_table()
1012. 
1013.     def tearDown(self):
1014.         # The super call needs to happen first because it uses the database.
1015.         super().tearDown()
1016.         self.drop_table()
1017. 
1018.     def create_table(self):
1019.         management.call_command('createcachetable', verbosity=0)
1020. 
1021.     def drop_table(self):
1022.         with connection.cursor() as cursor:
1023.             table_name = connection.ops.quote_name('test cache table')
1024.             cursor.execute('DROP TABLE %s' % table_name)
1025. 
1026.     def test_get_many_num_queries(self):
1027.         cache.set_many({'a': 1, 'b': 2})
1028.         cache.set('expired', 'expired', 0.01)
1029.         with self.assertNumQueries(1):
1030.             self.assertEqual(cache.get_many(['a', 'b']), {'a': 1, 'b': 2})
1031.         time.sleep(0.02)
1032.         with self.assertNumQueries(2):
1033.             self.assertEqual(cache.get_many(['a', 'b', 'expired']), {'a': 1, 'b': 2})
1034. 
1035.     def test_delete_many_num_queries(self):
1036.         cache.set_many({'a': 1, 'b': 2, 'c': 3})
1037.         with self.assertNumQueries(1):
1038.             cache.delete_many(['a', 'b', 'c'])
1039. 
1040.     def test_zero_cull(self):
1041.         self._perform_cull_test('zero_cull', 50, 18)
1042. 
1043.     def test_second_call_doesnt_crash(self):
1044.         out = io.StringIO()
1045.         management.call_command('createcachetable', stdout=out)
1046.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' already exists.\n" * len(settings.CACHES))
1047. 
1048.     @override_settings(CACHES=caches_setting_for_tests(
1049.         BACKEND='django.core.cache.backends.db.DatabaseCache',
1050.         # Use another table name to avoid the 'table already exists' message.
1051.         LOCATION='createcachetable_dry_run_mode'
1052.     ))
1053.     def test_createcachetable_dry_run_mode(self):
1054.         out = io.StringIO()
1055.         management.call_command('createcachetable', dry_run=True, stdout=out)
1056.         output = out.getvalue()
1057.         self.assertTrue(output.startswith("CREATE TABLE"))
1058. 
1059.     def test_createcachetable_with_table_argument(self):
1060.         """
1061.         Delete and recreate cache table with legacy behavior (explicitly
1062.         specifying the table name).
1063.         """
1064.         self.drop_table()
1065.         out = io.StringIO()
1066.         management.call_command(
1067.             'createcachetable',
1068.             'test cache table',
1069.             verbosity=2,
1070.             stdout=out,
1071.         )
1072.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' created.\n")
1073. 
1074. 
1075. @override_settings(USE_TZ=True)
1076. class DBCacheWithTimeZoneTests(DBCacheTests):
1077.     pass
1078. 
1079. 
1080. class DBCacheRouter:
1081.     """A router that puts the cache table on the 'other' database."""
1082. 
1083.     def db_for_read(self, model, **hints):
1084.         if model._meta.app_label == 'django_cache':
1085.             return 'other'
1086.         return None
1087. 
1088.     def db_for_write(self, model, **hints):
1089.         if model._meta.app_label == 'django_cache':
1090.             return 'other'
1091.         return None
1092. 
1093.     def allow_migrate(self, db, app_label, **hints):
1094.         if app_label == 'django_cache':
1095.             return db == 'other'
1096.         return None
1097. 
1098. 
1099. @override_settings(
1100.     CACHES={
1101.         'default': {
1102.             'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
1103.             'LOCATION': 'my_cache_table',
1104.         },
1105.     },
1106. )
1107. class CreateCacheTableForDBCacheTests(TestCase):
1108.     databases = {'default', 'other'}
1109. 
1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])
1111.     def test_createcachetable_observes_database_router(self):
1112.         # cache table should not be created on 'default'
1113.         with self.assertNumQueries(0, using='default'):
1114.             management.call_command('createcachetable', database='default', verbosity=0)
1115.         # cache table should be created on 'other'
1116.         # Queries:
1117.         #   1: check table doesn't already exist
1118.         #   2: create savepoint (if transactional DDL is supported)
1119.         #   3: create the table
1120.         #   4: create the index
1121.         #   5: release savepoint (if transactional DDL is supported)
1122.         num = 5 if connections['other'].features.can_rollback_ddl else 3
1123.         with self.assertNumQueries(num, using='other'):
1124.             management.call_command('createcachetable', database='other', verbosity=0)
1125. 
1126. 
1127. class PicklingSideEffect:
1128. 
1129.     def __init__(self, cache):
1130.         self.cache = cache
1131.         self.locked = False
1132. 
1133.     def __getstate__(self):
1134.         self.locked = self.cache._lock.locked()
1135.         return {}
1136. 
1137. 
1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(
1139.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1140.     OPTIONS={'MAX_ENTRIES': 9},
1141. ))
1142. 
1143. 
1144. @override_settings(CACHES=caches_setting_for_tests(
1145.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1146. ))
1147. class LocMemCacheTests(BaseCacheTests, TestCase):
1148. 
1149.     def setUp(self):
1150.         super().setUp()
1151. 
1152.         # LocMem requires a hack to make the other caches
1153.         # share a data store with the 'normal' cache.
1154.         caches['prefix']._cache = cache._cache
1155.         caches['prefix']._expire_info = cache._expire_info
1156. 
1157.         caches['v2']._cache = cache._cache
1158.         caches['v2']._expire_info = cache._expire_info
1159. 
1160.         caches['custom_key']._cache = cache._cache
1161.         caches['custom_key']._expire_info = cache._expire_info
1162. 
1163.         caches['custom_key2']._cache = cache._cache
1164.         caches['custom_key2']._expire_info = cache._expire_info
1165. 
1166.     @override_settings(CACHES={
1167.         'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'},
1168.         'other': {
1169.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1170.             'LOCATION': 'other'
1171.         },
1172.     })
1173.     def test_multiple_caches(self):
1174.         "Multiple locmem caches are isolated"
1175.         cache.set('value', 42)
1176.         self.assertEqual(caches['default'].get('value'), 42)
1177.         self.assertIsNone(caches['other'].get('value'))
1178. 
1179.     def test_locking_on_pickle(self):
1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""
1181.         bad_obj = PicklingSideEffect(cache)
1182.         cache.set('set', bad_obj)
1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1184. 
1185.         self.assertIs(cache.add('add', bad_obj), True)
1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1187. 
1188.     def test_incr_decr_timeout(self):
1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""
1190.         key = 'value'
1191.         _key = cache.make_key(key)
1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)
1193.         expire = cache._expire_info[_key]
1194.         self.assertEqual(cache.incr(key), 2)
1195.         self.assertEqual(expire, cache._expire_info[_key])
1196.         self.assertEqual(cache.decr(key), 1)
1197.         self.assertEqual(expire, cache._expire_info[_key])
1198. 
1199.     @limit_locmem_entries
1200.     def test_lru_get(self):
1201.         """get() moves cache keys."""
1202.         for key in range(9):
1203.             cache.set(key, key, timeout=None)
1204.         for key in range(6):
1205.             self.assertEqual(cache.get(key), key)
1206.         cache.set(9, 9, timeout=None)
1207.         for key in range(6):
1208.             self.assertEqual(cache.get(key), key)
1209.         for key in range(6, 9):
1210.             self.assertIsNone(cache.get(key))
1211.         self.assertEqual(cache.get(9), 9)
1212. 
1213.     @limit_locmem_entries
1214.     def test_lru_set(self):
1215.         """set() moves cache keys."""
1216.         for key in range(9):
1217.             cache.set(key, key, timeout=None)
1218.         for key in range(3, 9):
1219.             cache.set(key, key, timeout=None)
1220.         cache.set(9, 9, timeout=None)
1221.         for key in range(3, 10):
1222.             self.assertEqual(cache.get(key), key)
1223.         for key in range(3):
1224.             self.assertIsNone(cache.get(key))
1225. 
1226.     @limit_locmem_entries
1227.     def test_lru_incr(self):
1228.         """incr() moves cache keys."""
1229.         for key in range(9):
1230.             cache.set(key, key, timeout=None)
1231.         for key in range(6):
1232.             self.assertEqual(cache.incr(key), key + 1)
1233.         cache.set(9, 9, timeout=None)
1234.         for key in range(6):
1235.             self.assertEqual(cache.get(key), key + 1)
1236.         for key in range(6, 9):
1237.             self.assertIsNone(cache.get(key))
1238.         self.assertEqual(cache.get(9), 9)
1239. 
1240. 
1241. # memcached backend isn't guaranteed to be available.
1242. # To check the memcached backend, the test settings file will
1243. # need to contain at least one cache backend setting that points at
1244. # your memcache server.
1245. configured_caches = {}
1246. for _cache_params in settings.CACHES.values():
1247.     configured_caches[_cache_params['BACKEND']] = _cache_params
1248. 
1249. MemcachedCache_params = configured_caches.get('django.core.cache.backends.memcached.MemcachedCache')
1250. PyLibMCCache_params = configured_caches.get('django.core.cache.backends.memcached.PyLibMCCache')
1251. 
1252. # The memcached backends don't support cull-related options like `MAX_ENTRIES`.
1253. memcached_excluded_caches = {'cull', 'zero_cull'}
1254. 
1255. 
1256. class BaseMemcachedTests(BaseCacheTests):
1257. 
1258.     # By default it's assumed that the client doesn't clean up connections
1259.     # properly, in which case the backend must do so after each request.
1260.     should_disconnect_on_close = True
1261. 
1262.     def test_location_multiple_servers(self):
1263.         locations = [
1264.             ['server1.tld', 'server2:11211'],
1265.             'server1.tld;server2:11211',
1266.             'server1.tld,server2:11211',
1267.         ]
1268.         for location in locations:
1269.             with self.subTest(location=location):
1270.                 params = {'BACKEND': self.base_params['BACKEND'], 'LOCATION': location}
1271.                 with self.settings(CACHES={'default': params}):
1272.                     self.assertEqual(cache._servers, ['server1.tld', 'server2:11211'])
1273. 
1274.     def _perform_invalid_key_test(self, key, expected_warning):
1275.         """
1276.         While other backends merely warn, memcached should raise for an invalid
1277.         key.
1278.         """
1279.         msg = expected_warning.replace(key, cache.make_key(key))
1280.         with self.assertRaises(InvalidCacheKey) as cm:
1281.             cache.set(key, 'value')
1282.         self.assertEqual(str(cm.exception), msg)
1283. 
1284.     def test_default_never_expiring_timeout(self):
1285.         # Regression test for #22845
1286.         with self.settings(CACHES=caches_setting_for_tests(
1287.                 base=self.base_params,
1288.                 exclude=memcached_excluded_caches,
1289.                 TIMEOUT=None)):
1290.             cache.set('infinite_foo', 'bar')
1291.             self.assertEqual(cache.get('infinite_foo'), 'bar')
1292. 
1293.     def test_default_far_future_timeout(self):
1294.         # Regression test for #22845
1295.         with self.settings(CACHES=caches_setting_for_tests(
1296.                 base=self.base_params,
1297.                 exclude=memcached_excluded_caches,
1298.                 # 60*60*24*365, 1 year
1299.                 TIMEOUT=31536000)):
1300.             cache.set('future_foo', 'bar')
1301.             self.assertEqual(cache.get('future_foo'), 'bar')
1302. 
1303.     def test_memcached_deletes_key_on_failed_set(self):
1304.         # By default memcached allows objects up to 1MB. For the cache_db session
1305.         # backend to always use the current session, memcached needs to delete
1306.         # the old key if it fails to set.
1307.         # pylibmc doesn't seem to have SERVER_MAX_VALUE_LENGTH as far as I can
1308.         # tell from a quick check of its source code. This is falling back to
1309.         # the default value exposed by python-memcached on my system.
1310.         max_value_length = getattr(cache._lib, 'SERVER_MAX_VALUE_LENGTH', 1048576)
1311. 
1312.         cache.set('small_value', 'a')
1313.         self.assertEqual(cache.get('small_value'), 'a')
1314. 
1315.         large_value = 'a' * (max_value_length + 1)
1316.         try:
1317.             cache.set('small_value', large_value)
1318.         except Exception:
1319.             # Some clients (e.g. pylibmc) raise when the value is too large,
1320.             # while others (e.g. python-memcached) intentionally return True
1321.             # indicating success. This test is primarily checking that the key
1322.             # was deleted, so the return/exception behavior for the set()
1323.             # itself is not important.
1324.             pass
1325.         # small_value should be deleted, or set if configured to accept larger values
1326.         value = cache.get('small_value')
1327.         self.assertTrue(value is None or value == large_value)
1328. 
1329.     def test_close(self):
1330.         # For clients that don't manage their connections properly, the
1331.         # connection is closed when the request is complete.
1332.         signals.request_finished.disconnect(close_old_connections)
1333.         try:
1334.             with mock.patch.object(cache._lib.Client, 'disconnect_all', autospec=True) as mock_disconnect:
1335.                 signals.request_finished.send(self.__class__)
1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)
1337.         finally:
1338.             signals.request_finished.connect(close_old_connections)
1339. 
1340.     def test_set_many_returns_failing_keys(self):
1341.         def fail_set_multi(mapping, *args, **kwargs):
1342.             return mapping.keys()
1343.         with mock.patch('%s.Client.set_multi' % self.client_library_name, side_effect=fail_set_multi):
1344.             failing_keys = cache.set_many({'key': 'value'})
1345.             self.assertEqual(failing_keys, ['key'])
1346. 
1347. 
1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")
1349. @override_settings(CACHES=caches_setting_for_tests(
1350.     base=MemcachedCache_params,
1351.     exclude=memcached_excluded_caches,
1352. ))
1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):
1354.     base_params = MemcachedCache_params
1355.     client_library_name = 'memcache'
1356. 
1357.     def test_memcached_uses_highest_pickle_version(self):
1358.         # Regression test for #19810
1359.         for cache_key in settings.CACHES:
1360.             with self.subTest(cache_key=cache_key):
1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)
1362. 
1363.     @override_settings(CACHES=caches_setting_for_tests(
1364.         base=MemcachedCache_params,
1365.         exclude=memcached_excluded_caches,
1366.         OPTIONS={'server_max_value_length': 9999},
1367.     ))
1368.     def test_memcached_options(self):
1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)
1370. 
1371.     def test_default_used_when_none_is_set(self):
1372.         """
1373.         python-memcached doesn't support default in get() so this test
1374.         overrides the one in BaseCacheTests.
1375.         """
1376.         cache.set('key_default_none', None)
1377.         self.assertEqual(cache.get('key_default_none', default='default'), 'default')
1378. 
1379. 
1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")
1381. @override_settings(CACHES=caches_setting_for_tests(
1382.     base=PyLibMCCache_params,
1383.     exclude=memcached_excluded_caches,
1384. ))
1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):
1386.     base_params = PyLibMCCache_params
1387.     client_library_name = 'pylibmc'
1388.     # libmemcached manages its own connections.
1389.     should_disconnect_on_close = False
1390. 
1391.     @override_settings(CACHES=caches_setting_for_tests(
1392.         base=PyLibMCCache_params,
1393.         exclude=memcached_excluded_caches,
1394.         OPTIONS={
1395.             'binary': True,
1396.             'behaviors': {'tcp_nodelay': True},
1397.         },
1398.     ))
1399.     def test_pylibmc_options(self):
1400.         self.assertTrue(cache._cache.binary)
1401.         self.assertEqual(cache._cache.behaviors['tcp_nodelay'], int(True))
1402. 
1403. 
1404. @override_settings(CACHES=caches_setting_for_tests(
1405.     BACKEND='django.core.cache.backends.filebased.FileBasedCache',
1406. ))
1407. class FileBasedCacheTests(BaseCacheTests, TestCase):
1408.     """
1409.     Specific test cases for the file-based cache.
1410.     """
1411. 
1412.     def setUp(self):
1413.         super().setUp()
1414.         self.dirname = self.mkdtemp()
1415.         # Caches location cannot be modified through override_settings / modify_settings,
1416.         # hence settings are manipulated directly here and the setting_changed signal
1417.         # is triggered manually.
1418.         for cache_params in settings.CACHES.values():
1419.             cache_params['LOCATION'] = self.dirname
1420.         setting_changed.send(self.__class__, setting='CACHES', enter=False)
1421. 
1422.     def tearDown(self):
1423.         super().tearDown()
1424.         # Call parent first, as cache.clear() may recreate cache base directory
1425.         shutil.rmtree(self.dirname)
1426. 
1427.     def mkdtemp(self):
1428.         return tempfile.mkdtemp()
1429. 
1430.     def test_ignores_non_cache_files(self):
1431.         fname = os.path.join(self.dirname, 'not-a-cache-file')
1432.         with open(fname, 'w'):
1433.             os.utime(fname, None)
1434.         cache.clear()
1435.         self.assertTrue(os.path.exists(fname),
1436.                         'Expected cache.clear to ignore non cache files')
1437.         os.remove(fname)
1438. 
1439.     def test_clear_does_not_remove_cache_dir(self):
1440.         cache.clear()
1441.         self.assertTrue(os.path.exists(self.dirname),
1442.                         'Expected cache.clear to keep the cache dir')
1443. 
1444.     def test_creates_cache_dir_if_nonexistent(self):
1445.         os.rmdir(self.dirname)
1446.         cache.set('foo', 'bar')
1447.         self.assertTrue(os.path.exists(self.dirname))
1448. 
1449.     def test_get_ignores_enoent(self):
1450.         cache.set('foo', 'bar')
1451.         os.unlink(cache._key_to_file('foo'))
1452.         # Returns the default instead of erroring.
1453.         self.assertEqual(cache.get('foo', 'baz'), 'baz')
1454. 
1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):
1456.         with mock.patch('builtins.open', side_effect=OSError):
1457.             with self.assertRaises(OSError):
1458.                 cache.get('foo')
1459. 
1460.     def test_empty_cache_file_considered_expired(self):
1461.         cache_file = cache._key_to_file('foo')
1462.         with open(cache_file, 'wb') as fh:
1463.             fh.write(b'')
1464.         with open(cache_file, 'rb') as fh:
1465.             self.assertIs(cache._is_expired(fh), True)
1466. 
1467. 
1468. class FileBasedCachePathLibTests(FileBasedCacheTests):
1469.     def mkdtemp(self):
1470.         tmp_dir = super().mkdtemp()
1471.         return Path(tmp_dir)
1472. 
1473. 
1474. @override_settings(CACHES={
1475.     'default': {
1476.         'BACKEND': 'cache.liberal_backend.CacheClass',
1477.     },
1478. })
1479. class CustomCacheKeyValidationTests(SimpleTestCase):
1480.     """
1481.     Tests for the ability to mixin a custom ``validate_key`` method to
1482.     a custom cache backend that otherwise inherits from a builtin
1483.     backend, and override the default key validation. Refs #6447.
1484.     """
1485.     def test_custom_key_validation(self):
1486.         # this key is both longer than 250 characters, and has spaces
1487.         key = 'some key with spaces' * 15
1488.         val = 'a value'
1489.         cache.set(key, val)
1490.         self.assertEqual(cache.get(key), val)
1491. 
1492. 
1493. @override_settings(
1494.     CACHES={
1495.         'default': {
1496.             'BACKEND': 'cache.closeable_cache.CacheClass',
1497.         }
1498.     }
1499. )
1500. class CacheClosingTests(SimpleTestCase):
1501. 
1502.     def test_close(self):
1503.         self.assertFalse(cache.closed)
1504.         signals.request_finished.send(self.__class__)
1505.         self.assertTrue(cache.closed)
1506. 
1507. 
1508. DEFAULT_MEMORY_CACHES_SETTINGS = {
1509.     'default': {
1510.         'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1511.         'LOCATION': 'unique-snowflake',
1512.     }
1513. }
1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)
1515. NEVER_EXPIRING_CACHES_SETTINGS['default']['TIMEOUT'] = None
1516. 
1517. 
1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):
1519.     """
1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will
1521.     set non-expiring keys.
1522.     """
1523.     def setUp(self):
1524.         # The 5 minute (300 seconds) default expiration time for keys is
1525.         # defined in the implementation of the initializer method of the
1526.         # BaseCache type.
1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout
1528. 
1529.     def tearDown(self):
1530.         del(self.DEFAULT_TIMEOUT)
1531. 
1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):
1533.         """The default expiration time of a cache key is 5 minutes.
1534. 
1535.         This value is defined in
1536.         django.core.cache.backends.base.BaseCache.__init__().
1537.         """
1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)
1539. 
1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):
1541.         """Caches that have the TIMEOUT parameter undefined in the default
1542.         settings will use the default 5 minute timeout.
1543.         """
1544.         cache = caches[DEFAULT_CACHE_ALIAS]
1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)
1546. 
1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):
1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the
1550.         default settings with have `None` as the default timeout.
1551. 
1552.         This means "no timeout".
1553.         """
1554.         cache = caches[DEFAULT_CACHE_ALIAS]
1555.         self.assertIsNone(cache.default_timeout)
1556.         self.assertIsNone(cache.get_backend_timeout())
1557. 
1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)
1559.     def test_caches_with_unset_timeout_set_expiring_key(self):
1560.         """Memory caches that have the TIMEOUT parameter unset will set cache
1561.         keys having the default 5 minute timeout.
1562.         """
1563.         key = "my-key"
1564.         value = "my-value"
1565.         cache = caches[DEFAULT_CACHE_ALIAS]
1566.         cache.set(key, value)
1567.         cache_key = cache.make_key(key)
1568.         self.assertIsNotNone(cache._expire_info[cache_key])
1569. 
1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):
1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set
1573.         a non expiring key by default.
1574.         """
1575.         key = "another-key"
1576.         value = "another-value"
1577.         cache = caches[DEFAULT_CACHE_ALIAS]
1578.         cache.set(key, value)
1579.         cache_key = cache.make_key(key)
1580.         self.assertIsNone(cache._expire_info[cache_key])
1581. 
1582. 
1583. @override_settings(
1584.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1585.     CACHE_MIDDLEWARE_SECONDS=1,
1586.     CACHES={
1587.         'default': {
1588.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1589.         },
1590.     },
1591.     USE_I18N=False,
1592.     ALLOWED_HOSTS=['.example.com'],
1593. )
1594. class CacheUtils(SimpleTestCase):
1595.     """TestCase for django.utils.cache functions."""
1596.     host = 'www.example.com'
1597.     path = '/cache/test/'
1598.     factory = RequestFactory(HTTP_HOST=host)
1599. 
1600.     def tearDown(self):
1601.         cache.clear()
1602. 
1603.     def _get_request_cache(self, method='GET', query_string=None, update_cache=None):
1604.         request = self._get_request(self.host, self.path,
1605.                                     method, query_string=query_string)
1606.         request._cache_update_cache = True if not update_cache else update_cache
1607.         return request
1608. 
1609.     def test_patch_vary_headers(self):
1610.         headers = (
1611.             # Initial vary, new headers, resulting vary.
1612.             (None, ('Accept-Encoding',), 'Accept-Encoding'),
1613.             ('Accept-Encoding', ('accept-encoding',), 'Accept-Encoding'),
1614.             ('Accept-Encoding', ('ACCEPT-ENCODING',), 'Accept-Encoding'),
1615.             ('Cookie', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1616.             ('Cookie, Accept-Encoding', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1617.             ('Cookie, Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1618.             (None, ('Accept-Encoding', 'COOKIE'), 'Accept-Encoding, COOKIE'),
1619.             ('Cookie,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1620.             ('Cookie    ,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1621.             ('*', ('Accept-Language', 'Cookie'), '*'),
1622.             ('Accept-Language, Cookie', ('*',), '*'),
1623.         )
1624.         for initial_vary, newheaders, resulting_vary in headers:
1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):
1626.                 response = HttpResponse()
1627.                 if initial_vary is not None:
1628.                     response['Vary'] = initial_vary
1629.                 patch_vary_headers(response, newheaders)
1630.                 self.assertEqual(response['Vary'], resulting_vary)
1631. 
1632.     def test_get_cache_key(self):
1633.         request = self.factory.get(self.path)
1634.         response = HttpResponse()
1635.         # Expect None if no headers have been set yet.
1636.         self.assertIsNone(get_cache_key(request))
1637.         # Set headers to an empty list.
1638.         learn_cache_key(request, response)
1639. 
1640.         self.assertEqual(
1641.             get_cache_key(request),
1642.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1643.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1644.         )
1645.         # A specified key_prefix is taken into account.
1646.         key_prefix = 'localprefix'
1647.         learn_cache_key(request, response, key_prefix=key_prefix)
1648.         self.assertEqual(
1649.             get_cache_key(request, key_prefix=key_prefix),
1650.             'views.decorators.cache.cache_page.localprefix.GET.'
1651.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1652.         )
1653. 
1654.     def test_get_cache_key_with_query(self):
1655.         request = self.factory.get(self.path, {'test': 1})
1656.         response = HttpResponse()
1657.         # Expect None if no headers have been set yet.
1658.         self.assertIsNone(get_cache_key(request))
1659.         # Set headers to an empty list.
1660.         learn_cache_key(request, response)
1661.         # The querystring is taken into account.
1662.         self.assertEqual(
1663.             get_cache_key(request),
1664.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1665.             'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e'
1666.         )
1667. 
1668.     def test_cache_key_varies_by_url(self):
1669.         """
1670.         get_cache_key keys differ by fully-qualified URL instead of path
1671.         """
1672.         request1 = self.factory.get(self.path, HTTP_HOST='sub-1.example.com')
1673.         learn_cache_key(request1, HttpResponse())
1674.         request2 = self.factory.get(self.path, HTTP_HOST='sub-2.example.com')
1675.         learn_cache_key(request2, HttpResponse())
1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))
1677. 
1678.     def test_learn_cache_key(self):
1679.         request = self.factory.head(self.path)
1680.         response = HttpResponse()
1681.         response['Vary'] = 'Pony'
1682.         # Make sure that the Vary header is added to the key hash
1683.         learn_cache_key(request, response)
1684. 
1685.         self.assertEqual(
1686.             get_cache_key(request),
1687.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1688.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1689.         )
1690. 
1691.     def test_patch_cache_control(self):
1692.         tests = (
1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts
1694.             (None, {'private': True}, {'private'}),
1695.             ('', {'private': True}, {'private'}),
1696.             # no-cache.
1697.             ('', {'no_cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1698.             ('', {'no-cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1699.             ('no-cache=Set-Cookie', {'no_cache': True}, {'no-cache'}),
1700.             ('no-cache=Set-Cookie,no-cache=Link', {'no_cache': True}, {'no-cache'}),
1701.             ('no-cache=Set-Cookie', {'no_cache': 'Link'}, {'no-cache=Set-Cookie', 'no-cache=Link'}),
1702.             (
1703.                 'no-cache=Set-Cookie,no-cache=Link',
1704.                 {'no_cache': 'Custom'},
1705.                 {'no-cache=Set-Cookie', 'no-cache=Link', 'no-cache=Custom'},
1706.             ),
1707.             # Test whether private/public attributes are mutually exclusive
1708.             ('private', {'private': True}, {'private'}),
1709.             ('private', {'public': True}, {'public'}),
1710.             ('public', {'public': True}, {'public'}),
1711.             ('public', {'private': True}, {'private'}),
1712.             ('must-revalidate,max-age=60,private', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1713.             ('must-revalidate,max-age=60,public', {'private': True}, {'must-revalidate', 'max-age=60', 'private'}),
1714.             ('must-revalidate,max-age=60', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1715.         )
1716. 
1717.         cc_delim_re = re.compile(r'\s*,\s*')
1718. 
1719.         for initial_cc, newheaders, expected_cc in tests:
1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):
1721.                 response = HttpResponse()
1722.                 if initial_cc is not None:
1723.                     response['Cache-Control'] = initial_cc
1724.                 patch_cache_control(response, **newheaders)
1725.                 parts = set(cc_delim_re.split(response['Cache-Control']))
1726.                 self.assertEqual(parts, expected_cc)
1727. 
1728. 
1729. @override_settings(
1730.     CACHES={
1731.         'default': {
1732.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1733.             'KEY_PREFIX': 'cacheprefix',
1734.         },
1735.     },
1736. )
1737. class PrefixedCacheUtils(CacheUtils):
1738.     pass
1739. 
1740. 
1741. @override_settings(
1742.     CACHE_MIDDLEWARE_SECONDS=60,
1743.     CACHE_MIDDLEWARE_KEY_PREFIX='test',
1744.     CACHES={
1745.         'default': {
1746.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1747.         },
1748.     },
1749. )
1750. class CacheHEADTest(SimpleTestCase):
1751.     path = '/cache/test/'
1752.     factory = RequestFactory()
1753. 
1754.     def tearDown(self):
1755.         cache.clear()
1756. 
1757.     def _set_cache(self, request, msg):
1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)
1759. 
1760.     def test_head_caches_correctly(self):
1761.         test_content = 'test content'
1762. 
1763.         request = self.factory.head(self.path)
1764.         request._cache_update_cache = True
1765.         self._set_cache(request, test_content)
1766. 
1767.         request = self.factory.head(self.path)
1768.         request._cache_update_cache = True
1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1770.         self.assertIsNotNone(get_cache_data)
1771.         self.assertEqual(test_content.encode(), get_cache_data.content)
1772. 
1773.     def test_head_with_cached_get(self):
1774.         test_content = 'test content'
1775. 
1776.         request = self.factory.get(self.path)
1777.         request._cache_update_cache = True
1778.         self._set_cache(request, test_content)
1779. 
1780.         request = self.factory.head(self.path)
1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1782.         self.assertIsNotNone(get_cache_data)
1783.         self.assertEqual(test_content.encode(), get_cache_data.content)
1784. 
1785. 
1786. @override_settings(
1787.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1788.     CACHES={
1789.         'default': {
1790.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1791.         },
1792.     },
1793.     LANGUAGES=[
1794.         ('en', 'English'),
1795.         ('es', 'Spanish'),
1796.     ],
1797. )
1798. class CacheI18nTest(SimpleTestCase):
1799.     path = '/cache/test/'
1800.     factory = RequestFactory()
1801. 
1802.     def tearDown(self):
1803.         cache.clear()
1804. 
1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1806.     def test_cache_key_i18n_translation(self):
1807.         request = self.factory.get(self.path)
1808.         lang = translation.get_language()
1809.         response = HttpResponse()
1810.         key = learn_cache_key(request, response)
1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1812.         key2 = get_cache_key(request)
1813.         self.assertEqual(key, key2)
1814. 
1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):
1816.         request = self.factory.get(self.path)
1817.         request.META['HTTP_ACCEPT_LANGUAGE'] = accept_language
1818.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1819.         response = HttpResponse()
1820.         response['Vary'] = vary
1821.         key = learn_cache_key(request, response)
1822.         key2 = get_cache_key(request)
1823.         self.assertEqual(key, reference_key)
1824.         self.assertEqual(key2, reference_key)
1825. 
1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1827.     def test_cache_key_i18n_translation_accept_language(self):
1828.         lang = translation.get_language()
1829.         self.assertEqual(lang, 'en')
1830.         request = self.factory.get(self.path)
1831.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1832.         response = HttpResponse()
1833.         response['Vary'] = 'accept-encoding'
1834.         key = learn_cache_key(request, response)
1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1836.         self.check_accept_language_vary(
1837.             'en-us',
1838.             'cookie, accept-language, accept-encoding',
1839.             key
1840.         )
1841.         self.check_accept_language_vary(
1842.             'en-US',
1843.             'cookie, accept-encoding, accept-language',
1844.             key
1845.         )
1846.         self.check_accept_language_vary(
1847.             'en-US,en;q=0.8',
1848.             'accept-encoding, accept-language, cookie',
1849.             key
1850.         )
1851.         self.check_accept_language_vary(
1852.             'en-US,en;q=0.8,ko;q=0.6',
1853.             'accept-language, cookie, accept-encoding',
1854.             key
1855.         )
1856.         self.check_accept_language_vary(
1857.             'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 ',
1858.             'accept-encoding, cookie, accept-language',
1859.             key
1860.         )
1861.         self.check_accept_language_vary(
1862.             'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4',
1863.             'accept-language, accept-encoding, cookie',
1864.             key
1865.         )
1866.         self.check_accept_language_vary(
1867.             'ko;q=1.0,en;q=0.5',
1868.             'cookie, accept-language, accept-encoding',
1869.             key
1870.         )
1871.         self.check_accept_language_vary(
1872.             'ko, en',
1873.             'cookie, accept-encoding, accept-language',
1874.             key
1875.         )
1876.         self.check_accept_language_vary(
1877.             'ko-KR, en-US',
1878.             'accept-encoding, accept-language, cookie',
1879.             key
1880.         )
1881. 
1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)
1883.     def test_cache_key_i18n_formatting(self):
1884.         request = self.factory.get(self.path)
1885.         lang = translation.get_language()
1886.         response = HttpResponse()
1887.         key = learn_cache_key(request, response)
1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")
1889.         key2 = get_cache_key(request)
1890.         self.assertEqual(key, key2)
1891. 
1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)
1893.     def test_cache_key_i18n_timezone(self):
1894.         request = self.factory.get(self.path)
1895.         tz = timezone.get_current_timezone_name()
1896.         response = HttpResponse()
1897.         key = learn_cache_key(request, response)
1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")
1899.         key2 = get_cache_key(request)
1900.         self.assertEqual(key, key2)
1901. 
1902.     @override_settings(USE_I18N=False, USE_L10N=False)
1903.     def test_cache_key_no_i18n(self):
1904.         request = self.factory.get(self.path)
1905.         lang = translation.get_language()
1906.         tz = timezone.get_current_timezone_name()
1907.         response = HttpResponse()
1908.         key = learn_cache_key(request, response)
1909.         self.assertNotIn(lang, key, "Cache keys shouldn't include the language name when i18n isn't active")
1910.         self.assertNotIn(tz, key, "Cache keys shouldn't include the time zone name when i18n isn't active")
1911. 
1912.     @override_settings(
1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1914.         CACHE_MIDDLEWARE_SECONDS=60,
1915.         USE_I18N=True,
1916.     )
1917.     def test_middleware(self):
1918.         def set_cache(request, lang, msg):
1919.             def get_response(req):
1920.                 return HttpResponse(msg)
1921. 
1922.             translation.activate(lang)
1923.             return UpdateCacheMiddleware(get_response)(request)
1924. 
1925.         # cache with non empty request.GET
1926.         request = self.factory.get(self.path, {'foo': 'bar', 'other': 'true'})
1927.         request._cache_update_cache = True
1928. 
1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1930.         # first access, cache must return None
1931.         self.assertIsNone(get_cache_data)
1932.         content = 'Check for cache with QUERY_STRING'
1933. 
1934.         def get_response(req):
1935.             return HttpResponse(content)
1936. 
1937.         UpdateCacheMiddleware(get_response)(request)
1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1939.         # cache must return content
1940.         self.assertIsNotNone(get_cache_data)
1941.         self.assertEqual(get_cache_data.content, content.encode())
1942.         # different QUERY_STRING, cache must be empty
1943.         request = self.factory.get(self.path, {'foo': 'bar', 'somethingelse': 'true'})
1944.         request._cache_update_cache = True
1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1946.         self.assertIsNone(get_cache_data)
1947. 
1948.         # i18n tests
1949.         en_message = "Hello world!"
1950.         es_message = "Hola mundo!"
1951. 
1952.         request = self.factory.get(self.path)
1953.         request._cache_update_cache = True
1954.         set_cache(request, 'en', en_message)
1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1956.         # The cache can be recovered
1957.         self.assertIsNotNone(get_cache_data)
1958.         self.assertEqual(get_cache_data.content, en_message.encode())
1959.         # change the session language and set content
1960.         request = self.factory.get(self.path)
1961.         request._cache_update_cache = True
1962.         set_cache(request, 'es', es_message)
1963.         # change again the language
1964.         translation.activate('en')
1965.         # retrieve the content from cache
1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1967.         self.assertEqual(get_cache_data.content, en_message.encode())
1968.         # change again the language
1969.         translation.activate('es')
1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1971.         self.assertEqual(get_cache_data.content, es_message.encode())
1972.         # reset the language
1973.         translation.deactivate()
1974. 
1975.     @override_settings(
1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1977.         CACHE_MIDDLEWARE_SECONDS=60,
1978.     )
1979.     def test_middleware_doesnt_cache_streaming_response(self):
1980.         request = self.factory.get(self.path)
1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1982.         self.assertIsNone(get_cache_data)
1983. 
1984.         def get_stream_response(req):
1985.             return StreamingHttpResponse(['Check for cache with streaming content.'])
1986. 
1987.         UpdateCacheMiddleware(get_stream_response)(request)
1988. 
1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1990.         self.assertIsNone(get_cache_data)
1991. 
1992. 
1993. @override_settings(
1994.     CACHES={
1995.         'default': {
1996.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1997.             'KEY_PREFIX': 'cacheprefix'
1998.         },
1999.     },
2000. )


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 14:24:18,937 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full source code for the file `tests/cache/tests.py`. This context block contains the entire file content as requested.', relative_path='tests/cache/tests.py', start_line=1, end_line=2000)]
2025-10-06 14:24:18,939 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/cache/tests.py', content='1. # Unit tests for cache framework\n2. # Uses whatever cache backend is set in the test settings file.\n3. import copy\n4. import io\n5. import os\n6. import pickle\n7. import re\n8. import shutil\n9. import tempfile\n10. import threading\n11. import time\n12. import unittest\n13. from pathlib import Path\n14. from unittest import mock\n15. \n16. from django.conf import settings\n17. from django.core import management, signals\n18. from django.core.cache import (\n19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n20. )\n21. from django.core.cache.backends.base import InvalidCacheBackendError\n22. from django.core.cache.utils import make_template_fragment_key\n23. from django.db import close_old_connections, connection, connections\n24. from django.http import (\n25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n26. )\n27. from django.middleware.cache import (\n28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n29. )\n30. from django.middleware.csrf import CsrfViewMiddleware\n31. from django.template import engines\n32. from django.template.context_processors import csrf\n33. from django.template.response import TemplateResponse\n34. from django.test import (\n35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n36.     override_settings,\n37. )\n38. from django.test.signals import setting_changed\n39. from django.utils import timezone, translation\n40. from django.utils.cache import (\n41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n42. )\n43. from django.views.decorators.cache import cache_control, cache_page\n44. \n45. from .models import Poll, expensive_calculation\n46. \n47. \n48. # functions/classes for complex data type tests\n49. def f():\n50.     return 42\n51. \n52. \n53. class C:\n54.     def m(n):\n55.         return 24\n56. \n57. \n58. class Unpicklable:\n59.     def __getstate__(self):\n60.         raise pickle.PickleError()\n61. \n62. \n63. def empty_response(request):\n64.     return HttpResponse()\n65. \n66. \n67. KEY_ERRORS_WITH_MEMCACHED_MSG = (\n68.     \'Cache key contains characters that will cause errors if used with \'\n69.     \'memcached: %r\'\n70. )\n71. \n72. \n73. @override_settings(CACHES={\n74.     \'default\': {\n75.         \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n76.     }\n77. })\n78. class DummyCacheTests(SimpleTestCase):\n79.     # The Dummy cache backend doesn\'t really behave like a test backend,\n80.     # so it has its own test case.\n81. \n82.     def test_simple(self):\n83.         "Dummy cache backend ignores cache set calls"\n84.         cache.set("key", "value")\n85.         self.assertIsNone(cache.get("key"))\n86. \n87.     def test_add(self):\n88.         "Add doesn\'t do anything in dummy cache backend"\n89.         self.assertIs(cache.add("addkey1", "value"), True)\n90.         self.assertIs(cache.add("addkey1", "newvalue"), True)\n91.         self.assertIsNone(cache.get("addkey1"))\n92. \n93.     def test_non_existent(self):\n94.         "Nonexistent keys aren\'t found in the dummy cache backend"\n95.         self.assertIsNone(cache.get("does_not_exist"))\n96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n97. \n98.     def test_get_many(self):\n99.         "get_many returns nothing for the dummy cache backend"\n100.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n101.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n102.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n103. \n104.     def test_get_many_invalid_key(self):\n105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n106.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n107.             cache.get_many([\'key with spaces\'])\n108. \n109.     def test_delete(self):\n110.         "Cache deletion is transparently ignored on the dummy cache backend"\n111.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n112.         self.assertIsNone(cache.get("key1"))\n113.         self.assertIs(cache.delete("key1"), False)\n114.         self.assertIsNone(cache.get("key1"))\n115.         self.assertIsNone(cache.get("key2"))\n116. \n117.     def test_has_key(self):\n118.         "The has_key method doesn\'t ever return True for the dummy cache backend"\n119.         cache.set("hello1", "goodbye1")\n120.         self.assertIs(cache.has_key("hello1"), False)\n121.         self.assertIs(cache.has_key("goodbye1"), False)\n122. \n123.     def test_in(self):\n124.         "The in operator doesn\'t ever return True for the dummy cache backend"\n125.         cache.set("hello2", "goodbye2")\n126.         self.assertNotIn("hello2", cache)\n127.         self.assertNotIn("goodbye2", cache)\n128. \n129.     def test_incr(self):\n130.         "Dummy cache values can\'t be incremented"\n131.         cache.set(\'answer\', 42)\n132.         with self.assertRaises(ValueError):\n133.             cache.incr(\'answer\')\n134.         with self.assertRaises(ValueError):\n135.             cache.incr(\'does_not_exist\')\n136. \n137.     def test_decr(self):\n138.         "Dummy cache values can\'t be decremented"\n139.         cache.set(\'answer\', 42)\n140.         with self.assertRaises(ValueError):\n141.             cache.decr(\'answer\')\n142.         with self.assertRaises(ValueError):\n143.             cache.decr(\'does_not_exist\')\n144. \n145.     def test_touch(self):\n146.         """Dummy cache can\'t do touch()."""\n147.         self.assertIs(cache.touch(\'whatever\'), False)\n148. \n149.     def test_data_types(self):\n150.         "All data types are ignored equally by the dummy cache"\n151.         stuff = {\n152.             \'string\': \'this is a string\',\n153.             \'int\': 42,\n154.             \'list\': [1, 2, 3, 4],\n155.             \'tuple\': (1, 2, 3, 4),\n156.             \'dict\': {\'A\': 1, \'B\': 2},\n157.             \'function\': f,\n158.             \'class\': C,\n159.         }\n160.         cache.set("stuff", stuff)\n161.         self.assertIsNone(cache.get("stuff"))\n162. \n163.     def test_expiration(self):\n164.         "Expiration has no effect on the dummy cache"\n165.         cache.set(\'expire1\', \'very quickly\', 1)\n166.         cache.set(\'expire2\', \'very quickly\', 1)\n167.         cache.set(\'expire3\', \'very quickly\', 1)\n168. \n169.         time.sleep(2)\n170.         self.assertIsNone(cache.get("expire1"))\n171. \n172.         self.assertIs(cache.add("expire2", "newvalue"), True)\n173.         self.assertIsNone(cache.get("expire2"))\n174.         self.assertIs(cache.has_key("expire3"), False)\n175. \n176.     def test_unicode(self):\n177.         "Unicode values are ignored by the dummy cache"\n178.         stuff = {\n179.             \'ascii\': \'ascii_value\',\n180.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n181.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n182.             \'ascii2\': {\'x\': 1}\n183.         }\n184.         for (key, value) in stuff.items():\n185.             with self.subTest(key=key):\n186.                 cache.set(key, value)\n187.                 self.assertIsNone(cache.get(key))\n188. \n189.     def test_set_many(self):\n190.         "set_many does nothing for the dummy cache backend"\n191.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n192.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n193. \n194.     def test_set_many_invalid_key(self):\n195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n196.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n197.             cache.set_many({\'key with spaces\': \'foo\'})\n198. \n199.     def test_delete_many(self):\n200.         "delete_many does nothing for the dummy cache backend"\n201.         cache.delete_many([\'a\', \'b\'])\n202. \n203.     def test_delete_many_invalid_key(self):\n204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n205.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n206.             cache.delete_many({\'key with spaces\': \'foo\'})\n207. \n208.     def test_clear(self):\n209.         "clear does nothing for the dummy cache backend"\n210.         cache.clear()\n211. \n212.     def test_incr_version(self):\n213.         "Dummy cache versions can\'t be incremented"\n214.         cache.set(\'answer\', 42)\n215.         with self.assertRaises(ValueError):\n216.             cache.incr_version(\'answer\')\n217.         with self.assertRaises(ValueError):\n218.             cache.incr_version(\'does_not_exist\')\n219. \n220.     def test_decr_version(self):\n221.         "Dummy cache versions can\'t be decremented"\n222.         cache.set(\'answer\', 42)\n223.         with self.assertRaises(ValueError):\n224.             cache.decr_version(\'answer\')\n225.         with self.assertRaises(ValueError):\n226.             cache.decr_version(\'does_not_exist\')\n227. \n228.     def test_get_or_set(self):\n229.         self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n230.         self.assertIsNone(cache.get_or_set(\'mykey\', None))\n231. \n232.     def test_get_or_set_callable(self):\n233.         def my_callable():\n234.             return \'default\'\n235. \n236.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n237.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n238. \n239. \n240. def custom_key_func(key, key_prefix, version):\n241.     "A customized cache key function"\n242.     return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n243. \n244. \n245. _caches_setting_base = {\n246.     \'default\': {},\n247.     \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n248.     \'v2\': {\'VERSION\': 2},\n249.     \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n250.     \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n251.     \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n252.     \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n253. }\n254. \n255. \n256. def caches_setting_for_tests(base=None, exclude=None, **params):\n257.     # `base` is used to pull in the memcached config from the original settings,\n258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n259.     # should be omitted.\n260.     # `params` are test specific overrides and `_caches_settings_base` is the\n261.     # base config for the tests.\n262.     # This results in the following search order:\n263.     # params -> _caches_setting_base -> base\n264.     base = base or {}\n265.     exclude = exclude or set()\n266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n267.     for key, cache_params in setting.items():\n268.         cache_params.update(_caches_setting_base[key])\n269.         cache_params.update(params)\n270.     return setting\n271. \n272. \n273. class BaseCacheTests:\n274.     # A common set of tests to apply to all cache backends\n275.     factory = RequestFactory()\n276. \n277.     def tearDown(self):\n278.         cache.clear()\n279. \n280.     def test_simple(self):\n281.         # Simple cache set/get works\n282.         cache.set("key", "value")\n283.         self.assertEqual(cache.get("key"), "value")\n284. \n285.     def test_default_used_when_none_is_set(self):\n286.         """If None is cached, get() returns it instead of the default."""\n287.         cache.set(\'key_default_none\', None)\n288.         self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n289. \n290.     def test_add(self):\n291.         # A key can be added to a cache\n292.         self.assertIs(cache.add("addkey1", "value"), True)\n293.         self.assertIs(cache.add("addkey1", "newvalue"), False)\n294.         self.assertEqual(cache.get("addkey1"), "value")\n295. \n296.     def test_prefix(self):\n297.         # Test for same cache key conflicts between shared backend\n298.         cache.set(\'somekey\', \'value\')\n299. \n300.         # should not be set in the prefixed cache\n301.         self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n302. \n303.         caches[\'prefix\'].set(\'somekey\', \'value2\')\n304. \n305.         self.assertEqual(cache.get(\'somekey\'), \'value\')\n306.         self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n307. \n308.     def test_non_existent(self):\n309.         """Nonexistent cache keys return as None/default."""\n310.         self.assertIsNone(cache.get("does_not_exist"))\n311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n312. \n313.     def test_get_many(self):\n314.         # Multiple cache keys can be returned using get_many\n315.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n316.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n317.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n318.         self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n319. \n320.     def test_delete(self):\n321.         # Cache keys can be deleted\n322.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n323.         self.assertEqual(cache.get("key1"), "spam")\n324.         self.assertIs(cache.delete("key1"), True)\n325.         self.assertIsNone(cache.get("key1"))\n326.         self.assertEqual(cache.get("key2"), "eggs")\n327. \n328.     def test_delete_nonexistent(self):\n329.         self.assertIs(cache.delete(\'nonexistent_key\'), False)\n330. \n331.     def test_has_key(self):\n332.         # The cache can be inspected for cache keys\n333.         cache.set("hello1", "goodbye1")\n334.         self.assertIs(cache.has_key("hello1"), True)\n335.         self.assertIs(cache.has_key("goodbye1"), False)\n336.         cache.set("no_expiry", "here", None)\n337.         self.assertIs(cache.has_key("no_expiry"), True)\n338. \n339.     def test_in(self):\n340.         # The in operator can be used to inspect cache contents\n341.         cache.set("hello2", "goodbye2")\n342.         self.assertIn("hello2", cache)\n343.         self.assertNotIn("goodbye2", cache)\n344. \n345.     def test_incr(self):\n346.         # Cache values can be incremented\n347.         cache.set(\'answer\', 41)\n348.         self.assertEqual(cache.incr(\'answer\'), 42)\n349.         self.assertEqual(cache.get(\'answer\'), 42)\n350.         self.assertEqual(cache.incr(\'answer\', 10), 52)\n351.         self.assertEqual(cache.get(\'answer\'), 52)\n352.         self.assertEqual(cache.incr(\'answer\', -10), 42)\n353.         with self.assertRaises(ValueError):\n354.             cache.incr(\'does_not_exist\')\n355. \n356.     def test_decr(self):\n357.         # Cache values can be decremented\n358.         cache.set(\'answer\', 43)\n359.         self.assertEqual(cache.decr(\'answer\'), 42)\n360.         self.assertEqual(cache.get(\'answer\'), 42)\n361.         self.assertEqual(cache.decr(\'answer\', 10), 32)\n362.         self.assertEqual(cache.get(\'answer\'), 32)\n363.         self.assertEqual(cache.decr(\'answer\', -10), 42)\n364.         with self.assertRaises(ValueError):\n365.             cache.decr(\'does_not_exist\')\n366. \n367.     def test_close(self):\n368.         self.assertTrue(hasattr(cache, \'close\'))\n369.         cache.close()\n370. \n371.     def test_data_types(self):\n372.         # Many different data types can be cached\n373.         stuff = {\n374.             \'string\': \'this is a string\',\n375.             \'int\': 42,\n376.             \'list\': [1, 2, 3, 4],\n377.             \'tuple\': (1, 2, 3, 4),\n378.             \'dict\': {\'A\': 1, \'B\': 2},\n379.             \'function\': f,\n380.             \'class\': C,\n381.         }\n382.         cache.set("stuff", stuff)\n383.         self.assertEqual(cache.get("stuff"), stuff)\n384. \n385.     def test_cache_read_for_model_instance(self):\n386.         # Don\'t want fields with callable as default to be called on cache read\n387.         expensive_calculation.num_runs = 0\n388.         Poll.objects.all().delete()\n389.         my_poll = Poll.objects.create(question="Well?")\n390.         self.assertEqual(Poll.objects.count(), 1)\n391.         pub_date = my_poll.pub_date\n392.         cache.set(\'question\', my_poll)\n393.         cached_poll = cache.get(\'question\')\n394.         self.assertEqual(cached_poll.pub_date, pub_date)\n395.         # We only want the default expensive calculation run once\n396.         self.assertEqual(expensive_calculation.num_runs, 1)\n397. \n398.     def test_cache_write_for_model_instance_with_deferred(self):\n399.         # Don\'t want fields with callable as default to be called on cache write\n400.         expensive_calculation.num_runs = 0\n401.         Poll.objects.all().delete()\n402.         Poll.objects.create(question="What?")\n403.         self.assertEqual(expensive_calculation.num_runs, 1)\n404.         defer_qs = Poll.objects.all().defer(\'question\')\n405.         self.assertEqual(defer_qs.count(), 1)\n406.         self.assertEqual(expensive_calculation.num_runs, 1)\n407.         cache.set(\'deferred_queryset\', defer_qs)\n408.         # cache set should not re-evaluate default functions\n409.         self.assertEqual(expensive_calculation.num_runs, 1)\n410. \n411.     def test_cache_read_for_model_instance_with_deferred(self):\n412.         # Don\'t want fields with callable as default to be called on cache read\n413.         expensive_calculation.num_runs = 0\n414.         Poll.objects.all().delete()\n415.         Poll.objects.create(question="What?")\n416.         self.assertEqual(expensive_calculation.num_runs, 1)\n417.         defer_qs = Poll.objects.all().defer(\'question\')\n418.         self.assertEqual(defer_qs.count(), 1)\n419.         cache.set(\'deferred_queryset\', defer_qs)\n420.         self.assertEqual(expensive_calculation.num_runs, 1)\n421.         runs_before_cache_read = expensive_calculation.num_runs\n422.         cache.get(\'deferred_queryset\')\n423.         # We only want the default expensive calculation run on creation and set\n424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n425. \n426.     def test_expiration(self):\n427.         # Cache values can be set to expire\n428.         cache.set(\'expire1\', \'very quickly\', 1)\n429.         cache.set(\'expire2\', \'very quickly\', 1)\n430.         cache.set(\'expire3\', \'very quickly\', 1)\n431. \n432.         time.sleep(2)\n433.         self.assertIsNone(cache.get("expire1"))\n434. \n435.         self.assertIs(cache.add("expire2", "newvalue"), True)\n436.         self.assertEqual(cache.get("expire2"), "newvalue")\n437.         self.assertIs(cache.has_key("expire3"), False)\n438. \n439.     def test_touch(self):\n440.         # cache.touch() updates the timeout.\n441.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n442.         self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n443.         time.sleep(2)\n444.         self.assertIs(cache.has_key(\'expire1\'), True)\n445.         time.sleep(3)\n446.         self.assertIs(cache.has_key(\'expire1\'), False)\n447.         # cache.touch() works without the timeout argument.\n448.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n449.         self.assertIs(cache.touch(\'expire1\'), True)\n450.         time.sleep(2)\n451.         self.assertIs(cache.has_key(\'expire1\'), True)\n452. \n453.         self.assertIs(cache.touch(\'nonexistent\'), False)\n454. \n455.     def test_unicode(self):\n456.         # Unicode values can be cached\n457.         stuff = {\n458.             \'ascii\': \'ascii_value\',\n459.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n460.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n461.             \'ascii2\': {\'x\': 1}\n462.         }\n463.         # Test `set`\n464.         for (key, value) in stuff.items():\n465.             with self.subTest(key=key):\n466.                 cache.set(key, value)\n467.                 self.assertEqual(cache.get(key), value)\n468. \n469.         # Test `add`\n470.         for (key, value) in stuff.items():\n471.             with self.subTest(key=key):\n472.                 self.assertIs(cache.delete(key), True)\n473.                 self.assertIs(cache.add(key, value), True)\n474.                 self.assertEqual(cache.get(key), value)\n475. \n476.         # Test `set_many`\n477.         for (key, value) in stuff.items():\n478.             self.assertIs(cache.delete(key), True)\n479.         cache.set_many(stuff)\n480.         for (key, value) in stuff.items():\n481.             with self.subTest(key=key):\n482.                 self.assertEqual(cache.get(key), value)\n483. \n484.     def test_binary_string(self):\n485.         # Binary strings should be cacheable\n486.         from zlib import compress, decompress\n487.         value = \'value_to_be_compressed\'\n488.         compressed_value = compress(value.encode())\n489. \n490.         # Test set\n491.         cache.set(\'binary1\', compressed_value)\n492.         compressed_result = cache.get(\'binary1\')\n493.         self.assertEqual(compressed_value, compressed_result)\n494.         self.assertEqual(value, decompress(compressed_result).decode())\n495. \n496.         # Test add\n497.         self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n498.         compressed_result = cache.get(\'binary1-add\')\n499.         self.assertEqual(compressed_value, compressed_result)\n500.         self.assertEqual(value, decompress(compressed_result).decode())\n501. \n502.         # Test set_many\n503.         cache.set_many({\'binary1-set_many\': compressed_value})\n504.         compressed_result = cache.get(\'binary1-set_many\')\n505.         self.assertEqual(compressed_value, compressed_result)\n506.         self.assertEqual(value, decompress(compressed_result).decode())\n507. \n508.     def test_set_many(self):\n509.         # Multiple keys can be set using set_many\n510.         cache.set_many({"key1": "spam", "key2": "eggs"})\n511.         self.assertEqual(cache.get("key1"), "spam")\n512.         self.assertEqual(cache.get("key2"), "eggs")\n513. \n514.     def test_set_many_returns_empty_list_on_success(self):\n515.         """set_many() returns an empty list when all keys are inserted."""\n516.         failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n517.         self.assertEqual(failing_keys, [])\n518. \n519.     def test_set_many_expiration(self):\n520.         # set_many takes a second ``timeout`` parameter\n521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n522.         time.sleep(2)\n523.         self.assertIsNone(cache.get("key1"))\n524.         self.assertIsNone(cache.get("key2"))\n525. \n526.     def test_delete_many(self):\n527.         # Multiple keys can be deleted using delete_many\n528.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n529.         cache.delete_many(["key1", "key2"])\n530.         self.assertIsNone(cache.get("key1"))\n531.         self.assertIsNone(cache.get("key2"))\n532.         self.assertEqual(cache.get("key3"), "ham")\n533. \n534.     def test_clear(self):\n535.         # The cache can be emptied using clear\n536.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n537.         cache.clear()\n538.         self.assertIsNone(cache.get("key1"))\n539.         self.assertIsNone(cache.get("key2"))\n540. \n541.     def test_long_timeout(self):\n542.         """\n543.         Follow memcached\'s convention where a timeout greater than 30 days is\n544.         treated as an absolute expiration timestamp instead of a relative\n545.         offset (#12399).\n546.         """\n547.         cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n548.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n549. \n550.         self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n551.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n552. \n553.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n554.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n555.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n556. \n557.     def test_forever_timeout(self):\n558.         """\n559.         Passing in None into timeout results in a value that is cached forever\n560.         """\n561.         cache.set(\'key1\', \'eggs\', None)\n562.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n563. \n564.         self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n565.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n566.         self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n567.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n568. \n569.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n570.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n571.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n572. \n573.         cache.set(\'key5\', \'belgian fries\', timeout=1)\n574.         self.assertIs(cache.touch(\'key5\', timeout=None), True)\n575.         time.sleep(2)\n576.         self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n577. \n578.     def test_zero_timeout(self):\n579.         """\n580.         Passing in zero into timeout results in a value that is not cached\n581.         """\n582.         cache.set(\'key1\', \'eggs\', 0)\n583.         self.assertIsNone(cache.get(\'key1\'))\n584. \n585.         self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n586.         self.assertIsNone(cache.get(\'key2\'))\n587. \n588.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n589.         self.assertIsNone(cache.get(\'key3\'))\n590.         self.assertIsNone(cache.get(\'key4\'))\n591. \n592.         cache.set(\'key5\', \'belgian fries\', timeout=5)\n593.         self.assertIs(cache.touch(\'key5\', timeout=0), True)\n594.         self.assertIsNone(cache.get(\'key5\'))\n595. \n596.     def test_float_timeout(self):\n597.         # Make sure a timeout given as a float doesn\'t crash anything.\n598.         cache.set("key1", "spam", 100.2)\n599.         self.assertEqual(cache.get("key1"), "spam")\n600. \n601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n602.         try:\n603.             cull_cache = caches[cull_cache_name]\n604.         except InvalidCacheBackendError:\n605.             self.skipTest("Culling isn\'t implemented.")\n606. \n607.         # Create initial cache key entries. This will overflow the cache,\n608.         # causing a cull.\n609.         for i in range(1, initial_count):\n610.             cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n611.         count = 0\n612.         # Count how many keys are left in the cache.\n613.         for i in range(1, initial_count):\n614.             if cull_cache.has_key(\'cull%d\' % i):\n615.                 count += 1\n616.         self.assertEqual(count, final_count)\n617. \n618.     def test_cull(self):\n619.         self._perform_cull_test(\'cull\', 50, 29)\n620. \n621.     def test_zero_cull(self):\n622.         self._perform_cull_test(\'zero_cull\', 50, 19)\n623. \n624.     def _perform_invalid_key_test(self, key, expected_warning):\n625.         """\n626.         All the builtin backends should warn (except memcached that should\n627.         error) on keys that would be refused by memcached. This encourages\n628.         portable caching code without making it too difficult to use production\n629.         backends with more liberal key rules. Refs #6447.\n630.         """\n631.         # mimic custom ``make_key`` method being defined since the default will\n632.         # never show the below warnings\n633.         def func(key, *args):\n634.             return key\n635. \n636.         old_func = cache.key_func\n637.         cache.key_func = func\n638. \n639.         try:\n640.             with self.assertWarns(CacheKeyWarning) as cm:\n641.                 cache.set(key, \'value\')\n642.             self.assertEqual(str(cm.warning), expected_warning)\n643.         finally:\n644.             cache.key_func = old_func\n645. \n646.     def test_invalid_key_characters(self):\n647.         # memcached doesn\'t allow whitespace or control characters in keys.\n648.         key = \'key with spaces and æ¸…\'\n649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n650. \n651.     def test_invalid_key_length(self):\n652.         # memcached limits key length to 250.\n653.         key = (\'a\' * 250) + \'æ¸…\'\n654.         expected_warning = (\n655.             \'Cache key will cause errors if used with memcached: \'\n656.             \'%r (longer than %s)\' % (key, 250)\n657.         )\n658.         self._perform_invalid_key_test(key, expected_warning)\n659. \n660.     def test_cache_versioning_get_set(self):\n661.         # set, using default version = 1\n662.         cache.set(\'answer1\', 42)\n663.         self.assertEqual(cache.get(\'answer1\'), 42)\n664.         self.assertEqual(cache.get(\'answer1\', version=1), 42)\n665.         self.assertIsNone(cache.get(\'answer1\', version=2))\n666. \n667.         self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n668.         self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n669.         self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n670. \n671.         # set, default version = 1, but manually override version = 2\n672.         cache.set(\'answer2\', 42, version=2)\n673.         self.assertIsNone(cache.get(\'answer2\'))\n674.         self.assertIsNone(cache.get(\'answer2\', version=1))\n675.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n676. \n677.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n678.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n679.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n680. \n681.         # v2 set, using default version = 2\n682.         caches[\'v2\'].set(\'answer3\', 42)\n683.         self.assertIsNone(cache.get(\'answer3\'))\n684.         self.assertIsNone(cache.get(\'answer3\', version=1))\n685.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n686. \n687.         self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n688.         self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n689.         self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n690. \n691.         # v2 set, default version = 2, but manually override version = 1\n692.         caches[\'v2\'].set(\'answer4\', 42, version=1)\n693.         self.assertEqual(cache.get(\'answer4\'), 42)\n694.         self.assertEqual(cache.get(\'answer4\', version=1), 42)\n695.         self.assertIsNone(cache.get(\'answer4\', version=2))\n696. \n697.         self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n698.         self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n699.         self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n700. \n701.     def test_cache_versioning_add(self):\n702. \n703.         # add, default version = 1, but manually override version = 2\n704.         self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n705.         self.assertIsNone(cache.get(\'answer1\', version=1))\n706.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n707. \n708.         self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n709.         self.assertIsNone(cache.get(\'answer1\', version=1))\n710.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n711. \n712.         self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n713.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n714.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n715. \n716.         # v2 add, using default version = 2\n717.         self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n718.         self.assertIsNone(cache.get(\'answer2\', version=1))\n719.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n720. \n721.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n722.         self.assertIsNone(cache.get(\'answer2\', version=1))\n723.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n724. \n725.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n726.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n727.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n728. \n729.         # v2 add, default version = 2, but manually override version = 1\n730.         self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n731.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n732.         self.assertIsNone(cache.get(\'answer3\', version=2))\n733. \n734.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n735.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n736.         self.assertIsNone(cache.get(\'answer3\', version=2))\n737. \n738.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n739.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n740.         self.assertEqual(cache.get(\'answer3\', version=2), 37)\n741. \n742.     def test_cache_versioning_has_key(self):\n743.         cache.set(\'answer1\', 42)\n744. \n745.         # has_key\n746.         self.assertIs(cache.has_key(\'answer1\'), True)\n747.         self.assertIs(cache.has_key(\'answer1\', version=1), True)\n748.         self.assertIs(cache.has_key(\'answer1\', version=2), False)\n749. \n750.         self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n751.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n752.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n753. \n754.     def test_cache_versioning_delete(self):\n755.         cache.set(\'answer1\', 37, version=1)\n756.         cache.set(\'answer1\', 42, version=2)\n757.         self.assertIs(cache.delete(\'answer1\'), True)\n758.         self.assertIsNone(cache.get(\'answer1\', version=1))\n759.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n760. \n761.         cache.set(\'answer2\', 37, version=1)\n762.         cache.set(\'answer2\', 42, version=2)\n763.         self.assertIs(cache.delete(\'answer2\', version=2), True)\n764.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n765.         self.assertIsNone(cache.get(\'answer2\', version=2))\n766. \n767.         cache.set(\'answer3\', 37, version=1)\n768.         cache.set(\'answer3\', 42, version=2)\n769.         self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n770.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n771.         self.assertIsNone(cache.get(\'answer3\', version=2))\n772. \n773.         cache.set(\'answer4\', 37, version=1)\n774.         cache.set(\'answer4\', 42, version=2)\n775.         self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n776.         self.assertIsNone(cache.get(\'answer4\', version=1))\n777.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n778. \n779.     def test_cache_versioning_incr_decr(self):\n780.         cache.set(\'answer1\', 37, version=1)\n781.         cache.set(\'answer1\', 42, version=2)\n782.         self.assertEqual(cache.incr(\'answer1\'), 38)\n783.         self.assertEqual(cache.get(\'answer1\', version=1), 38)\n784.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n785.         self.assertEqual(cache.decr(\'answer1\'), 37)\n786.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n787.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n788. \n789.         cache.set(\'answer2\', 37, version=1)\n790.         cache.set(\'answer2\', 42, version=2)\n791.         self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n792.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n793.         self.assertEqual(cache.get(\'answer2\', version=2), 43)\n794.         self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n795.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n796.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n797. \n798.         cache.set(\'answer3\', 37, version=1)\n799.         cache.set(\'answer3\', 42, version=2)\n800.         self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n801.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n802.         self.assertEqual(cache.get(\'answer3\', version=2), 43)\n803.         self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n804.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n805.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n806. \n807.         cache.set(\'answer4\', 37, version=1)\n808.         cache.set(\'answer4\', 42, version=2)\n809.         self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n810.         self.assertEqual(cache.get(\'answer4\', version=1), 38)\n811.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n812.         self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n813.         self.assertEqual(cache.get(\'answer4\', version=1), 37)\n814.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n815. \n816.     def test_cache_versioning_get_set_many(self):\n817.         # set, using default version = 1\n818.         cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n819.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n820.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n821.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n822. \n823.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n824.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n825.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n826. \n827.         # set, default version = 1, but manually override version = 2\n828.         cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n829.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n830.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n831.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n832. \n833.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n834.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n835.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n836. \n837.         # v2 set, using default version = 2\n838.         caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n839.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n840.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n841.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n842. \n843.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n844.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n845.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n846. \n847.         # v2 set, default version = 2, but manually override version = 1\n848.         caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n849.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n850.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n851.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n852. \n853.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n854.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n855.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n856. \n857.     def test_incr_version(self):\n858.         cache.set(\'answer\', 42, version=2)\n859.         self.assertIsNone(cache.get(\'answer\'))\n860.         self.assertIsNone(cache.get(\'answer\', version=1))\n861.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n862.         self.assertIsNone(cache.get(\'answer\', version=3))\n863. \n864.         self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n865.         self.assertIsNone(cache.get(\'answer\'))\n866.         self.assertIsNone(cache.get(\'answer\', version=1))\n867.         self.assertIsNone(cache.get(\'answer\', version=2))\n868.         self.assertEqual(cache.get(\'answer\', version=3), 42)\n869. \n870.         caches[\'v2\'].set(\'answer2\', 42)\n871.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n872.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n873.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n874.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n875. \n876.         self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n877.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n878.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n879.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n880.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n881. \n882.         with self.assertRaises(ValueError):\n883.             cache.incr_version(\'does_not_exist\')\n884. \n885.     def test_decr_version(self):\n886.         cache.set(\'answer\', 42, version=2)\n887.         self.assertIsNone(cache.get(\'answer\'))\n888.         self.assertIsNone(cache.get(\'answer\', version=1))\n889.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n890. \n891.         self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n892.         self.assertEqual(cache.get(\'answer\'), 42)\n893.         self.assertEqual(cache.get(\'answer\', version=1), 42)\n894.         self.assertIsNone(cache.get(\'answer\', version=2))\n895. \n896.         caches[\'v2\'].set(\'answer2\', 42)\n897.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n898.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n899.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n900. \n901.         self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n902.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n903.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n904.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n905. \n906.         with self.assertRaises(ValueError):\n907.             cache.decr_version(\'does_not_exist\', version=2)\n908. \n909.     def test_custom_key_func(self):\n910.         # Two caches with different key functions aren\'t visible to each other\n911.         cache.set(\'answer1\', 42)\n912.         self.assertEqual(cache.get(\'answer1\'), 42)\n913.         self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n914.         self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n915. \n916.         caches[\'custom_key\'].set(\'answer2\', 42)\n917.         self.assertIsNone(cache.get(\'answer2\'))\n918.         self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n919.         self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n920. \n921.     def test_cache_write_unpicklable_object(self):\n922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)\n923.         fetch_middleware.cache = cache\n924. \n925.         request = self.factory.get(\'/cache/test\')\n926.         request._cache_update_cache = True\n927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n928.         self.assertIsNone(get_cache_data)\n929. \n930.         content = \'Testing cookie serialization.\'\n931. \n932.         def get_response(req):\n933.             response = HttpResponse(content)\n934.             response.set_cookie(\'foo\', \'bar\')\n935.             return response\n936. \n937.         update_middleware = UpdateCacheMiddleware(get_response)\n938.         update_middleware.cache = cache\n939.         response = update_middleware(request)\n940. \n941.         get_cache_data = fetch_middleware.process_request(request)\n942.         self.assertIsNotNone(get_cache_data)\n943.         self.assertEqual(get_cache_data.content, content.encode())\n944.         self.assertEqual(get_cache_data.cookies, response.cookies)\n945. \n946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n947.         get_cache_data = fetch_middleware.process_request(request)\n948.         self.assertIsNotNone(get_cache_data)\n949.         self.assertEqual(get_cache_data.content, content.encode())\n950.         self.assertEqual(get_cache_data.cookies, response.cookies)\n951. \n952.     def test_add_fail_on_pickleerror(self):\n953.         # Shouldn\'t fail silently if trying to cache an unpicklable type.\n954.         with self.assertRaises(pickle.PickleError):\n955.             cache.add(\'unpicklable\', Unpicklable())\n956. \n957.     def test_set_fail_on_pickleerror(self):\n958.         with self.assertRaises(pickle.PickleError):\n959.             cache.set(\'unpicklable\', Unpicklable())\n960. \n961.     def test_get_or_set(self):\n962.         self.assertIsNone(cache.get(\'projector\'))\n963.         self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n964.         self.assertEqual(cache.get(\'projector\'), 42)\n965.         self.assertIsNone(cache.get_or_set(\'null\', None))\n966. \n967.     def test_get_or_set_callable(self):\n968.         def my_callable():\n969.             return \'value\'\n970. \n971.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n972.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n973. \n974.     def test_get_or_set_callable_returning_none(self):\n975.         self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n976.         # Previous get_or_set() doesn\'t store None in the cache.\n977.         self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n978. \n979.     def test_get_or_set_version(self):\n980.         msg = "get_or_set() missing 1 required positional argument: \'default\'"\n981.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n982.         with self.assertRaisesMessage(TypeError, msg):\n983.             cache.get_or_set(\'brian\')\n984.         with self.assertRaisesMessage(TypeError, msg):\n985.             cache.get_or_set(\'brian\', version=1)\n986.         self.assertIsNone(cache.get(\'brian\', version=1))\n987.         self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n988.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n989.         self.assertIsNone(cache.get(\'brian\', version=3))\n990. \n991.     def test_get_or_set_racing(self):\n992.         with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n993.             # Simulate cache.add() failing to add a value. In that case, the\n994.             # default value should be returned.\n995.             cache_add.return_value = False\n996.             self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n997. \n998. \n999. @override_settings(CACHES=caches_setting_for_tests(\n1000.     BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1001.     # Spaces are used in the table name to ensure quoting/escaping is working\n1002.     LOCATION=\'test cache table\'\n1003. ))\n1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):\n1005. \n1006.     available_apps = [\'cache\']\n1007. \n1008.     def setUp(self):\n1009.         # The super calls needs to happen first for the settings override.\n1010.         super().setUp()\n1011.         self.create_table()\n1012. \n1013.     def tearDown(self):\n1014.         # The super call needs to happen first because it uses the database.\n1015.         super().tearDown()\n1016.         self.drop_table()\n1017. \n1018.     def create_table(self):\n1019.         management.call_command(\'createcachetable\', verbosity=0)\n1020. \n1021.     def drop_table(self):\n1022.         with connection.cursor() as cursor:\n1023.             table_name = connection.ops.quote_name(\'test cache table\')\n1024.             cursor.execute(\'DROP TABLE %s\' % table_name)\n1025. \n1026.     def test_get_many_num_queries(self):\n1027.         cache.set_many({\'a\': 1, \'b\': 2})\n1028.         cache.set(\'expired\', \'expired\', 0.01)\n1029.         with self.assertNumQueries(1):\n1030.             self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n1031.         time.sleep(0.02)\n1032.         with self.assertNumQueries(2):\n1033.             self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n1034. \n1035.     def test_delete_many_num_queries(self):\n1036.         cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n1037.         with self.assertNumQueries(1):\n1038.             cache.delete_many([\'a\', \'b\', \'c\'])\n1039. \n1040.     def test_zero_cull(self):\n1041.         self._perform_cull_test(\'zero_cull\', 50, 18)\n1042. \n1043.     def test_second_call_doesnt_crash(self):\n1044.         out = io.StringIO()\n1045.         management.call_command(\'createcachetable\', stdout=out)\n1046.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n1047. \n1048.     @override_settings(CACHES=caches_setting_for_tests(\n1049.         BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1050.         # Use another table name to avoid the \'table already exists\' message.\n1051.         LOCATION=\'createcachetable_dry_run_mode\'\n1052.     ))\n1053.     def test_createcachetable_dry_run_mode(self):\n1054.         out = io.StringIO()\n1055.         management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n1056.         output = out.getvalue()\n1057.         self.assertTrue(output.startswith("CREATE TABLE"))\n1058. \n1059.     def test_createcachetable_with_table_argument(self):\n1060.         """\n1061.         Delete and recreate cache table with legacy behavior (explicitly\n1062.         specifying the table name).\n1063.         """\n1064.         self.drop_table()\n1065.         out = io.StringIO()\n1066.         management.call_command(\n1067.             \'createcachetable\',\n1068.             \'test cache table\',\n1069.             verbosity=2,\n1070.             stdout=out,\n1071.         )\n1072.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n1073. \n1074. \n1075. @override_settings(USE_TZ=True)\n1076. class DBCacheWithTimeZoneTests(DBCacheTests):\n1077.     pass\n1078. \n1079. \n1080. class DBCacheRouter:\n1081.     """A router that puts the cache table on the \'other\' database."""\n1082. \n1083.     def db_for_read(self, model, **hints):\n1084.         if model._meta.app_label == \'django_cache\':\n1085.             return \'other\'\n1086.         return None\n1087. \n1088.     def db_for_write(self, model, **hints):\n1089.         if model._meta.app_label == \'django_cache\':\n1090.             return \'other\'\n1091.         return None\n1092. \n1093.     def allow_migrate(self, db, app_label, **hints):\n1094.         if app_label == \'django_cache\':\n1095.             return db == \'other\'\n1096.         return None\n1097. \n1098. \n1099. @override_settings(\n1100.     CACHES={\n1101.         \'default\': {\n1102.             \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n1103.             \'LOCATION\': \'my_cache_table\',\n1104.         },\n1105.     },\n1106. )\n1107. class CreateCacheTableForDBCacheTests(TestCase):\n1108.     databases = {\'default\', \'other\'}\n1109. \n1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])\n1111.     def test_createcachetable_observes_database_router(self):\n1112.         # cache table should not be created on \'default\'\n1113.         with self.assertNumQueries(0, using=\'default\'):\n1114.             management.call_command(\'createcachetable\', database=\'default\', verbosity=0)\n1115.         # cache table should be created on \'other\'\n1116.         # Queries:\n1117.         #   1: check table doesn\'t already exist\n1118.         #   2: create savepoint (if transactional DDL is supported)\n1119.         #   3: create the table\n1120.         #   4: create the index\n1121.         #   5: release savepoint (if transactional DDL is supported)\n1122.         num = 5 if connections[\'other\'].features.can_rollback_ddl else 3\n1123.         with self.assertNumQueries(num, using=\'other\'):\n1124.             management.call_command(\'createcachetable\', database=\'other\', verbosity=0)\n1125. \n1126. \n1127. class PicklingSideEffect:\n1128. \n1129.     def __init__(self, cache):\n1130.         self.cache = cache\n1131.         self.locked = False\n1132. \n1133.     def __getstate__(self):\n1134.         self.locked = self.cache._lock.locked()\n1135.         return {}\n1136. \n1137. \n1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(\n1139.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1140.     OPTIONS={\'MAX_ENTRIES\': 9},\n1141. ))\n1142. \n1143. \n1144. @override_settings(CACHES=caches_setting_for_tests(\n1145.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1146. ))\n1147. class LocMemCacheTests(BaseCacheTests, TestCase):\n1148. \n1149.     def setUp(self):\n1150.         super().setUp()\n1151. \n1152.         # LocMem requires a hack to make the other caches\n1153.         # share a data store with the \'normal\' cache.\n1154.         caches[\'prefix\']._cache = cache._cache\n1155.         caches[\'prefix\']._expire_info = cache._expire_info\n1156. \n1157.         caches[\'v2\']._cache = cache._cache\n1158.         caches[\'v2\']._expire_info = cache._expire_info\n1159. \n1160.         caches[\'custom_key\']._cache = cache._cache\n1161.         caches[\'custom_key\']._expire_info = cache._expire_info\n1162. \n1163.         caches[\'custom_key2\']._cache = cache._cache\n1164.         caches[\'custom_key2\']._expire_info = cache._expire_info\n1165. \n1166.     @override_settings(CACHES={\n1167.         \'default\': {\'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\'},\n1168.         \'other\': {\n1169.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1170.             \'LOCATION\': \'other\'\n1171.         },\n1172.     })\n1173.     def test_multiple_caches(self):\n1174.         "Multiple locmem caches are isolated"\n1175.         cache.set(\'value\', 42)\n1176.         self.assertEqual(caches[\'default\'].get(\'value\'), 42)\n1177.         self.assertIsNone(caches[\'other\'].get(\'value\'))\n1178. \n1179.     def test_locking_on_pickle(self):\n1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""\n1181.         bad_obj = PicklingSideEffect(cache)\n1182.         cache.set(\'set\', bad_obj)\n1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1184. \n1185.         self.assertIs(cache.add(\'add\', bad_obj), True)\n1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1187. \n1188.     def test_incr_decr_timeout(self):\n1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""\n1190.         key = \'value\'\n1191.         _key = cache.make_key(key)\n1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)\n1193.         expire = cache._expire_info[_key]\n1194.         self.assertEqual(cache.incr(key), 2)\n1195.         self.assertEqual(expire, cache._expire_info[_key])\n1196.         self.assertEqual(cache.decr(key), 1)\n1197.         self.assertEqual(expire, cache._expire_info[_key])\n1198. \n1199.     @limit_locmem_entries\n1200.     def test_lru_get(self):\n1201.         """get() moves cache keys."""\n1202.         for key in range(9):\n1203.             cache.set(key, key, timeout=None)\n1204.         for key in range(6):\n1205.             self.assertEqual(cache.get(key), key)\n1206.         cache.set(9, 9, timeout=None)\n1207.         for key in range(6):\n1208.             self.assertEqual(cache.get(key), key)\n1209.         for key in range(6, 9):\n1210.             self.assertIsNone(cache.get(key))\n1211.         self.assertEqual(cache.get(9), 9)\n1212. \n1213.     @limit_locmem_entries\n1214.     def test_lru_set(self):\n1215.         """set() moves cache keys."""\n1216.         for key in range(9):\n1217.             cache.set(key, key, timeout=None)\n1218.         for key in range(3, 9):\n1219.             cache.set(key, key, timeout=None)\n1220.         cache.set(9, 9, timeout=None)\n1221.         for key in range(3, 10):\n1222.             self.assertEqual(cache.get(key), key)\n1223.         for key in range(3):\n1224.             self.assertIsNone(cache.get(key))\n1225. \n1226.     @limit_locmem_entries\n1227.     def test_lru_incr(self):\n1228.         """incr() moves cache keys."""\n1229.         for key in range(9):\n1230.             cache.set(key, key, timeout=None)\n1231.         for key in range(6):\n1232.             self.assertEqual(cache.incr(key), key + 1)\n1233.         cache.set(9, 9, timeout=None)\n1234.         for key in range(6):\n1235.             self.assertEqual(cache.get(key), key + 1)\n1236.         for key in range(6, 9):\n1237.             self.assertIsNone(cache.get(key))\n1238.         self.assertEqual(cache.get(9), 9)\n1239. \n1240. \n1241. # memcached backend isn\'t guaranteed to be available.\n1242. # To check the memcached backend, the test settings file will\n1243. # need to contain at least one cache backend setting that points at\n1244. # your memcache server.\n1245. configured_caches = {}\n1246. for _cache_params in settings.CACHES.values():\n1247.     configured_caches[_cache_params[\'BACKEND\']] = _cache_params\n1248. \n1249. MemcachedCache_params = configured_caches.get(\'django.core.cache.backends.memcached.MemcachedCache\')\n1250. PyLibMCCache_params = configured_caches.get(\'django.core.cache.backends.memcached.PyLibMCCache\')\n1251. \n1252. # The memcached backends don\'t support cull-related options like `MAX_ENTRIES`.\n1253. memcached_excluded_caches = {\'cull\', \'zero_cull\'}\n1254. \n1255. \n1256. class BaseMemcachedTests(BaseCacheTests):\n1257. \n1258.     # By default it\'s assumed that the client doesn\'t clean up connections\n1259.     # properly, in which case the backend must do so after each request.\n1260.     should_disconnect_on_close = True\n1261. \n1262.     def test_location_multiple_servers(self):\n1263.         locations = [\n1264.             [\'server1.tld\', \'server2:11211\'],\n1265.             \'server1.tld;server2:11211\',\n1266.             \'server1.tld,server2:11211\',\n1267.         ]\n1268.         for location in locations:\n1269.             with self.subTest(location=location):\n1270.                 params = {\'BACKEND\': self.base_params[\'BACKEND\'], \'LOCATION\': location}\n1271.                 with self.settings(CACHES={\'default\': params}):\n1272.                     self.assertEqual(cache._servers, [\'server1.tld\', \'server2:11211\'])\n1273. \n1274.     def _perform_invalid_key_test(self, key, expected_warning):\n1275.         """\n1276.         While other backends merely warn, memcached should raise for an invalid\n1277.         key.\n1278.         """\n1279.         msg = expected_warning.replace(key, cache.make_key(key))\n1280.         with self.assertRaises(InvalidCacheKey) as cm:\n1281.             cache.set(key, \'value\')\n1282.         self.assertEqual(str(cm.exception), msg)\n1283. \n1284.     def test_default_never_expiring_timeout(self):\n1285.         # Regression test for #22845\n1286.         with self.settings(CACHES=caches_setting_for_tests(\n1287.                 base=self.base_params,\n1288.                 exclude=memcached_excluded_caches,\n1289.                 TIMEOUT=None)):\n1290.             cache.set(\'infinite_foo\', \'bar\')\n1291.             self.assertEqual(cache.get(\'infinite_foo\'), \'bar\')\n1292. \n1293.     def test_default_far_future_timeout(self):\n1294.         # Regression test for #22845\n1295.         with self.settings(CACHES=caches_setting_for_tests(\n1296.                 base=self.base_params,\n1297.                 exclude=memcached_excluded_caches,\n1298.                 # 60*60*24*365, 1 year\n1299.                 TIMEOUT=31536000)):\n1300.             cache.set(\'future_foo\', \'bar\')\n1301.             self.assertEqual(cache.get(\'future_foo\'), \'bar\')\n1302. \n1303.     def test_memcached_deletes_key_on_failed_set(self):\n1304.         # By default memcached allows objects up to 1MB. For the cache_db session\n1305.         # backend to always use the current session, memcached needs to delete\n1306.         # the old key if it fails to set.\n1307.         # pylibmc doesn\'t seem to have SERVER_MAX_VALUE_LENGTH as far as I can\n1308.         # tell from a quick check of its source code. This is falling back to\n1309.         # the default value exposed by python-memcached on my system.\n1310.         max_value_length = getattr(cache._lib, \'SERVER_MAX_VALUE_LENGTH\', 1048576)\n1311. \n1312.         cache.set(\'small_value\', \'a\')\n1313.         self.assertEqual(cache.get(\'small_value\'), \'a\')\n1314. \n1315.         large_value = \'a\' * (max_value_length + 1)\n1316.         try:\n1317.             cache.set(\'small_value\', large_value)\n1318.         except Exception:\n1319.             # Some clients (e.g. pylibmc) raise when the value is too large,\n1320.             # while others (e.g. python-memcached) intentionally return True\n1321.             # indicating success. This test is primarily checking that the key\n1322.             # was deleted, so the return/exception behavior for the set()\n1323.             # itself is not important.\n1324.             pass\n1325.         # small_value should be deleted, or set if configured to accept larger values\n1326.         value = cache.get(\'small_value\')\n1327.         self.assertTrue(value is None or value == large_value)\n1328. \n1329.     def test_close(self):\n1330.         # For clients that don\'t manage their connections properly, the\n1331.         # connection is closed when the request is complete.\n1332.         signals.request_finished.disconnect(close_old_connections)\n1333.         try:\n1334.             with mock.patch.object(cache._lib.Client, \'disconnect_all\', autospec=True) as mock_disconnect:\n1335.                 signals.request_finished.send(self.__class__)\n1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)\n1337.         finally:\n1338.             signals.request_finished.connect(close_old_connections)\n1339. \n1340.     def test_set_many_returns_failing_keys(self):\n1341.         def fail_set_multi(mapping, *args, **kwargs):\n1342.             return mapping.keys()\n1343.         with mock.patch(\'%s.Client.set_multi\' % self.client_library_name, side_effect=fail_set_multi):\n1344.             failing_keys = cache.set_many({\'key\': \'value\'})\n1345.             self.assertEqual(failing_keys, [\'key\'])\n1346. \n1347. \n1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")\n1349. @override_settings(CACHES=caches_setting_for_tests(\n1350.     base=MemcachedCache_params,\n1351.     exclude=memcached_excluded_caches,\n1352. ))\n1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):\n1354.     base_params = MemcachedCache_params\n1355.     client_library_name = \'memcache\'\n1356. \n1357.     def test_memcached_uses_highest_pickle_version(self):\n1358.         # Regression test for #19810\n1359.         for cache_key in settings.CACHES:\n1360.             with self.subTest(cache_key=cache_key):\n1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)\n1362. \n1363.     @override_settings(CACHES=caches_setting_for_tests(\n1364.         base=MemcachedCache_params,\n1365.         exclude=memcached_excluded_caches,\n1366.         OPTIONS={\'server_max_value_length\': 9999},\n1367.     ))\n1368.     def test_memcached_options(self):\n1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)\n1370. \n1371.     def test_default_used_when_none_is_set(self):\n1372.         """\n1373.         python-memcached doesn\'t support default in get() so this test\n1374.         overrides the one in BaseCacheTests.\n1375.         """\n1376.         cache.set(\'key_default_none\', None)\n1377.         self.assertEqual(cache.get(\'key_default_none\', default=\'default\'), \'default\')\n1378. \n1379. \n1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")\n1381. @override_settings(CACHES=caches_setting_for_tests(\n1382.     base=PyLibMCCache_params,\n1383.     exclude=memcached_excluded_caches,\n1384. ))\n1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):\n1386.     base_params = PyLibMCCache_params\n1387.     client_library_name = \'pylibmc\'\n1388.     # libmemcached manages its own connections.\n1389.     should_disconnect_on_close = False\n1390. \n1391.     @override_settings(CACHES=caches_setting_for_tests(\n1392.         base=PyLibMCCache_params,\n1393.         exclude=memcached_excluded_caches,\n1394.         OPTIONS={\n1395.             \'binary\': True,\n1396.             \'behaviors\': {\'tcp_nodelay\': True},\n1397.         },\n1398.     ))\n1399.     def test_pylibmc_options(self):\n1400.         self.assertTrue(cache._cache.binary)\n1401.         self.assertEqual(cache._cache.behaviors[\'tcp_nodelay\'], int(True))\n1402. \n1403. \n1404. @override_settings(CACHES=caches_setting_for_tests(\n1405.     BACKEND=\'django.core.cache.backends.filebased.FileBasedCache\',\n1406. ))\n1407. class FileBasedCacheTests(BaseCacheTests, TestCase):\n1408.     """\n1409.     Specific test cases for the file-based cache.\n1410.     """\n1411. \n1412.     def setUp(self):\n1413.         super().setUp()\n1414.         self.dirname = self.mkdtemp()\n1415.         # Caches location cannot be modified through override_settings / modify_settings,\n1416.         # hence settings are manipulated directly here and the setting_changed signal\n1417.         # is triggered manually.\n1418.         for cache_params in settings.CACHES.values():\n1419.             cache_params[\'LOCATION\'] = self.dirname\n1420.         setting_changed.send(self.__class__, setting=\'CACHES\', enter=False)\n1421. \n1422.     def tearDown(self):\n1423.         super().tearDown()\n1424.         # Call parent first, as cache.clear() may recreate cache base directory\n1425.         shutil.rmtree(self.dirname)\n1426. \n1427.     def mkdtemp(self):\n1428.         return tempfile.mkdtemp()\n1429. \n1430.     def test_ignores_non_cache_files(self):\n1431.         fname = os.path.join(self.dirname, \'not-a-cache-file\')\n1432.         with open(fname, \'w\'):\n1433.             os.utime(fname, None)\n1434.         cache.clear()\n1435.         self.assertTrue(os.path.exists(fname),\n1436.                         \'Expected cache.clear to ignore non cache files\')\n1437.         os.remove(fname)\n1438. \n1439.     def test_clear_does_not_remove_cache_dir(self):\n1440.         cache.clear()\n1441.         self.assertTrue(os.path.exists(self.dirname),\n1442.                         \'Expected cache.clear to keep the cache dir\')\n1443. \n1444.     def test_creates_cache_dir_if_nonexistent(self):\n1445.         os.rmdir(self.dirname)\n1446.         cache.set(\'foo\', \'bar\')\n1447.         self.assertTrue(os.path.exists(self.dirname))\n1448. \n1449.     def test_get_ignores_enoent(self):\n1450.         cache.set(\'foo\', \'bar\')\n1451.         os.unlink(cache._key_to_file(\'foo\'))\n1452.         # Returns the default instead of erroring.\n1453.         self.assertEqual(cache.get(\'foo\', \'baz\'), \'baz\')\n1454. \n1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):\n1456.         with mock.patch(\'builtins.open\', side_effect=OSError):\n1457.             with self.assertRaises(OSError):\n1458.                 cache.get(\'foo\')\n1459. \n1460.     def test_empty_cache_file_considered_expired(self):\n1461.         cache_file = cache._key_to_file(\'foo\')\n1462.         with open(cache_file, \'wb\') as fh:\n1463.             fh.write(b\'\')\n1464.         with open(cache_file, \'rb\') as fh:\n1465.             self.assertIs(cache._is_expired(fh), True)\n1466. \n1467. \n1468. class FileBasedCachePathLibTests(FileBasedCacheTests):\n1469.     def mkdtemp(self):\n1470.         tmp_dir = super().mkdtemp()\n1471.         return Path(tmp_dir)\n1472. \n1473. \n1474. @override_settings(CACHES={\n1475.     \'default\': {\n1476.         \'BACKEND\': \'cache.liberal_backend.CacheClass\',\n1477.     },\n1478. })\n1479. class CustomCacheKeyValidationTests(SimpleTestCase):\n1480.     """\n1481.     Tests for the ability to mixin a custom ``validate_key`` method to\n1482.     a custom cache backend that otherwise inherits from a builtin\n1483.     backend, and override the default key validation. Refs #6447.\n1484.     """\n1485.     def test_custom_key_validation(self):\n1486.         # this key is both longer than 250 characters, and has spaces\n1487.         key = \'some key with spaces\' * 15\n1488.         val = \'a value\'\n1489.         cache.set(key, val)\n1490.         self.assertEqual(cache.get(key), val)\n1491. \n1492. \n1493. @override_settings(\n1494.     CACHES={\n1495.         \'default\': {\n1496.             \'BACKEND\': \'cache.closeable_cache.CacheClass\',\n1497.         }\n1498.     }\n1499. )\n1500. class CacheClosingTests(SimpleTestCase):\n1501. \n1502.     def test_close(self):\n1503.         self.assertFalse(cache.closed)\n1504.         signals.request_finished.send(self.__class__)\n1505.         self.assertTrue(cache.closed)\n1506. \n1507. \n1508. DEFAULT_MEMORY_CACHES_SETTINGS = {\n1509.     \'default\': {\n1510.         \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1511.         \'LOCATION\': \'unique-snowflake\',\n1512.     }\n1513. }\n1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)\n1515. NEVER_EXPIRING_CACHES_SETTINGS[\'default\'][\'TIMEOUT\'] = None\n1516. \n1517. \n1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):\n1519.     """\n1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will\n1521.     set non-expiring keys.\n1522.     """\n1523.     def setUp(self):\n1524.         # The 5 minute (300 seconds) default expiration time for keys is\n1525.         # defined in the implementation of the initializer method of the\n1526.         # BaseCache type.\n1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout\n1528. \n1529.     def tearDown(self):\n1530.         del(self.DEFAULT_TIMEOUT)\n1531. \n1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):\n1533.         """The default expiration time of a cache key is 5 minutes.\n1534. \n1535.         This value is defined in\n1536.         django.core.cache.backends.base.BaseCache.__init__().\n1537.         """\n1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)\n1539. \n1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):\n1541.         """Caches that have the TIMEOUT parameter undefined in the default\n1542.         settings will use the default 5 minute timeout.\n1543.         """\n1544.         cache = caches[DEFAULT_CACHE_ALIAS]\n1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)\n1546. \n1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):\n1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the\n1550.         default settings with have `None` as the default timeout.\n1551. \n1552.         This means "no timeout".\n1553.         """\n1554.         cache = caches[DEFAULT_CACHE_ALIAS]\n1555.         self.assertIsNone(cache.default_timeout)\n1556.         self.assertIsNone(cache.get_backend_timeout())\n1557. \n1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)\n1559.     def test_caches_with_unset_timeout_set_expiring_key(self):\n1560.         """Memory caches that have the TIMEOUT parameter unset will set cache\n1561.         keys having the default 5 minute timeout.\n1562.         """\n1563.         key = "my-key"\n1564.         value = "my-value"\n1565.         cache = caches[DEFAULT_CACHE_ALIAS]\n1566.         cache.set(key, value)\n1567.         cache_key = cache.make_key(key)\n1568.         self.assertIsNotNone(cache._expire_info[cache_key])\n1569. \n1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):\n1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set\n1573.         a non expiring key by default.\n1574.         """\n1575.         key = "another-key"\n1576.         value = "another-value"\n1577.         cache = caches[DEFAULT_CACHE_ALIAS]\n1578.         cache.set(key, value)\n1579.         cache_key = cache.make_key(key)\n1580.         self.assertIsNone(cache._expire_info[cache_key])\n1581. \n1582. \n1583. @override_settings(\n1584.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1585.     CACHE_MIDDLEWARE_SECONDS=1,\n1586.     CACHES={\n1587.         \'default\': {\n1588.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1589.         },\n1590.     },\n1591.     USE_I18N=False,\n1592.     ALLOWED_HOSTS=[\'.example.com\'],\n1593. )\n1594. class CacheUtils(SimpleTestCase):\n1595.     """TestCase for django.utils.cache functions."""\n1596.     host = \'www.example.com\'\n1597.     path = \'/cache/test/\'\n1598.     factory = RequestFactory(HTTP_HOST=host)\n1599. \n1600.     def tearDown(self):\n1601.         cache.clear()\n1602. \n1603.     def _get_request_cache(self, method=\'GET\', query_string=None, update_cache=None):\n1604.         request = self._get_request(self.host, self.path,\n1605.                                     method, query_string=query_string)\n1606.         request._cache_update_cache = True if not update_cache else update_cache\n1607.         return request\n1608. \n1609.     def test_patch_vary_headers(self):\n1610.         headers = (\n1611.             # Initial vary, new headers, resulting vary.\n1612.             (None, (\'Accept-Encoding\',), \'Accept-Encoding\'),\n1613.             (\'Accept-Encoding\', (\'accept-encoding\',), \'Accept-Encoding\'),\n1614.             (\'Accept-Encoding\', (\'ACCEPT-ENCODING\',), \'Accept-Encoding\'),\n1615.             (\'Cookie\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1616.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1617.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1618.             (None, (\'Accept-Encoding\', \'COOKIE\'), \'Accept-Encoding, COOKIE\'),\n1619.             (\'Cookie,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1620.             (\'Cookie    ,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1621.             (\'*\', (\'Accept-Language\', \'Cookie\'), \'*\'),\n1622.             (\'Accept-Language, Cookie\', (\'*\',), \'*\'),\n1623.         )\n1624.         for initial_vary, newheaders, resulting_vary in headers:\n1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):\n1626.                 response = HttpResponse()\n1627.                 if initial_vary is not None:\n1628.                     response[\'Vary\'] = initial_vary\n1629.                 patch_vary_headers(response, newheaders)\n1630.                 self.assertEqual(response[\'Vary\'], resulting_vary)\n1631. \n1632.     def test_get_cache_key(self):\n1633.         request = self.factory.get(self.path)\n1634.         response = HttpResponse()\n1635.         # Expect None if no headers have been set yet.\n1636.         self.assertIsNone(get_cache_key(request))\n1637.         # Set headers to an empty list.\n1638.         learn_cache_key(request, response)\n1639. \n1640.         self.assertEqual(\n1641.             get_cache_key(request),\n1642.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1643.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1644.         )\n1645.         # A specified key_prefix is taken into account.\n1646.         key_prefix = \'localprefix\'\n1647.         learn_cache_key(request, response, key_prefix=key_prefix)\n1648.         self.assertEqual(\n1649.             get_cache_key(request, key_prefix=key_prefix),\n1650.             \'views.decorators.cache.cache_page.localprefix.GET.\'\n1651.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1652.         )\n1653. \n1654.     def test_get_cache_key_with_query(self):\n1655.         request = self.factory.get(self.path, {\'test\': 1})\n1656.         response = HttpResponse()\n1657.         # Expect None if no headers have been set yet.\n1658.         self.assertIsNone(get_cache_key(request))\n1659.         # Set headers to an empty list.\n1660.         learn_cache_key(request, response)\n1661.         # The querystring is taken into account.\n1662.         self.assertEqual(\n1663.             get_cache_key(request),\n1664.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1665.             \'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e\'\n1666.         )\n1667. \n1668.     def test_cache_key_varies_by_url(self):\n1669.         """\n1670.         get_cache_key keys differ by fully-qualified URL instead of path\n1671.         """\n1672.         request1 = self.factory.get(self.path, HTTP_HOST=\'sub-1.example.com\')\n1673.         learn_cache_key(request1, HttpResponse())\n1674.         request2 = self.factory.get(self.path, HTTP_HOST=\'sub-2.example.com\')\n1675.         learn_cache_key(request2, HttpResponse())\n1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))\n1677. \n1678.     def test_learn_cache_key(self):\n1679.         request = self.factory.head(self.path)\n1680.         response = HttpResponse()\n1681.         response[\'Vary\'] = \'Pony\'\n1682.         # Make sure that the Vary header is added to the key hash\n1683.         learn_cache_key(request, response)\n1684. \n1685.         self.assertEqual(\n1686.             get_cache_key(request),\n1687.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1688.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1689.         )\n1690. \n1691.     def test_patch_cache_control(self):\n1692.         tests = (\n1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts\n1694.             (None, {\'private\': True}, {\'private\'}),\n1695.             (\'\', {\'private\': True}, {\'private\'}),\n1696.             # no-cache.\n1697.             (\'\', {\'no_cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1698.             (\'\', {\'no-cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1699.             (\'no-cache=Set-Cookie\', {\'no_cache\': True}, {\'no-cache\'}),\n1700.             (\'no-cache=Set-Cookie,no-cache=Link\', {\'no_cache\': True}, {\'no-cache\'}),\n1701.             (\'no-cache=Set-Cookie\', {\'no_cache\': \'Link\'}, {\'no-cache=Set-Cookie\', \'no-cache=Link\'}),\n1702.             (\n1703.                 \'no-cache=Set-Cookie,no-cache=Link\',\n1704.                 {\'no_cache\': \'Custom\'},\n1705.                 {\'no-cache=Set-Cookie\', \'no-cache=Link\', \'no-cache=Custom\'},\n1706.             ),\n1707.             # Test whether private/public attributes are mutually exclusive\n1708.             (\'private\', {\'private\': True}, {\'private\'}),\n1709.             (\'private\', {\'public\': True}, {\'public\'}),\n1710.             (\'public\', {\'public\': True}, {\'public\'}),\n1711.             (\'public\', {\'private\': True}, {\'private\'}),\n1712.             (\'must-revalidate,max-age=60,private\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1713.             (\'must-revalidate,max-age=60,public\', {\'private\': True}, {\'must-revalidate\', \'max-age=60\', \'private\'}),\n1714.             (\'must-revalidate,max-age=60\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1715.         )\n1716. \n1717.         cc_delim_re = re.compile(r\'\\s*,\\s*\')\n1718. \n1719.         for initial_cc, newheaders, expected_cc in tests:\n1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):\n1721.                 response = HttpResponse()\n1722.                 if initial_cc is not None:\n1723.                     response[\'Cache-Control\'] = initial_cc\n1724.                 patch_cache_control(response, **newheaders)\n1725.                 parts = set(cc_delim_re.split(response[\'Cache-Control\']))\n1726.                 self.assertEqual(parts, expected_cc)\n1727. \n1728. \n1729. @override_settings(\n1730.     CACHES={\n1731.         \'default\': {\n1732.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1733.             \'KEY_PREFIX\': \'cacheprefix\',\n1734.         },\n1735.     },\n1736. )\n1737. class PrefixedCacheUtils(CacheUtils):\n1738.     pass\n1739. \n1740. \n1741. @override_settings(\n1742.     CACHE_MIDDLEWARE_SECONDS=60,\n1743.     CACHE_MIDDLEWARE_KEY_PREFIX=\'test\',\n1744.     CACHES={\n1745.         \'default\': {\n1746.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1747.         },\n1748.     },\n1749. )\n1750. class CacheHEADTest(SimpleTestCase):\n1751.     path = \'/cache/test/\'\n1752.     factory = RequestFactory()\n1753. \n1754.     def tearDown(self):\n1755.         cache.clear()\n1756. \n1757.     def _set_cache(self, request, msg):\n1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)\n1759. \n1760.     def test_head_caches_correctly(self):\n1761.         test_content = \'test content\'\n1762. \n1763.         request = self.factory.head(self.path)\n1764.         request._cache_update_cache = True\n1765.         self._set_cache(request, test_content)\n1766. \n1767.         request = self.factory.head(self.path)\n1768.         request._cache_update_cache = True\n1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1770.         self.assertIsNotNone(get_cache_data)\n1771.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1772. \n1773.     def test_head_with_cached_get(self):\n1774.         test_content = \'test content\'\n1775. \n1776.         request = self.factory.get(self.path)\n1777.         request._cache_update_cache = True\n1778.         self._set_cache(request, test_content)\n1779. \n1780.         request = self.factory.head(self.path)\n1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1782.         self.assertIsNotNone(get_cache_data)\n1783.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1784. \n1785. \n1786. @override_settings(\n1787.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1788.     CACHES={\n1789.         \'default\': {\n1790.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1791.         },\n1792.     },\n1793.     LANGUAGES=[\n1794.         (\'en\', \'English\'),\n1795.         (\'es\', \'Spanish\'),\n1796.     ],\n1797. )\n1798. class CacheI18nTest(SimpleTestCase):\n1799.     path = \'/cache/test/\'\n1800.     factory = RequestFactory()\n1801. \n1802.     def tearDown(self):\n1803.         cache.clear()\n1804. \n1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1806.     def test_cache_key_i18n_translation(self):\n1807.         request = self.factory.get(self.path)\n1808.         lang = translation.get_language()\n1809.         response = HttpResponse()\n1810.         key = learn_cache_key(request, response)\n1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1812.         key2 = get_cache_key(request)\n1813.         self.assertEqual(key, key2)\n1814. \n1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):\n1816.         request = self.factory.get(self.path)\n1817.         request.META[\'HTTP_ACCEPT_LANGUAGE\'] = accept_language\n1818.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1819.         response = HttpResponse()\n1820.         response[\'Vary\'] = vary\n1821.         key = learn_cache_key(request, response)\n1822.         key2 = get_cache_key(request)\n1823.         self.assertEqual(key, reference_key)\n1824.         self.assertEqual(key2, reference_key)\n1825. \n1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1827.     def test_cache_key_i18n_translation_accept_language(self):\n1828.         lang = translation.get_language()\n1829.         self.assertEqual(lang, \'en\')\n1830.         request = self.factory.get(self.path)\n1831.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1832.         response = HttpResponse()\n1833.         response[\'Vary\'] = \'accept-encoding\'\n1834.         key = learn_cache_key(request, response)\n1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1836.         self.check_accept_language_vary(\n1837.             \'en-us\',\n1838.             \'cookie, accept-language, accept-encoding\',\n1839.             key\n1840.         )\n1841.         self.check_accept_language_vary(\n1842.             \'en-US\',\n1843.             \'cookie, accept-encoding, accept-language\',\n1844.             key\n1845.         )\n1846.         self.check_accept_language_vary(\n1847.             \'en-US,en;q=0.8\',\n1848.             \'accept-encoding, accept-language, cookie\',\n1849.             key\n1850.         )\n1851.         self.check_accept_language_vary(\n1852.             \'en-US,en;q=0.8,ko;q=0.6\',\n1853.             \'accept-language, cookie, accept-encoding\',\n1854.             key\n1855.         )\n1856.         self.check_accept_language_vary(\n1857.             \'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 \',\n1858.             \'accept-encoding, cookie, accept-language\',\n1859.             key\n1860.         )\n1861.         self.check_accept_language_vary(\n1862.             \'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4\',\n1863.             \'accept-language, accept-encoding, cookie\',\n1864.             key\n1865.         )\n1866.         self.check_accept_language_vary(\n1867.             \'ko;q=1.0,en;q=0.5\',\n1868.             \'cookie, accept-language, accept-encoding\',\n1869.             key\n1870.         )\n1871.         self.check_accept_language_vary(\n1872.             \'ko, en\',\n1873.             \'cookie, accept-encoding, accept-language\',\n1874.             key\n1875.         )\n1876.         self.check_accept_language_vary(\n1877.             \'ko-KR, en-US\',\n1878.             \'accept-encoding, accept-language, cookie\',\n1879.             key\n1880.         )\n1881. \n1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)\n1883.     def test_cache_key_i18n_formatting(self):\n1884.         request = self.factory.get(self.path)\n1885.         lang = translation.get_language()\n1886.         response = HttpResponse()\n1887.         key = learn_cache_key(request, response)\n1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")\n1889.         key2 = get_cache_key(request)\n1890.         self.assertEqual(key, key2)\n1891. \n1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)\n1893.     def test_cache_key_i18n_timezone(self):\n1894.         request = self.factory.get(self.path)\n1895.         tz = timezone.get_current_timezone_name()\n1896.         response = HttpResponse()\n1897.         key = learn_cache_key(request, response)\n1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")\n1899.         key2 = get_cache_key(request)\n1900.         self.assertEqual(key, key2)\n1901. \n1902.     @override_settings(USE_I18N=False, USE_L10N=False)\n1903.     def test_cache_key_no_i18n(self):\n1904.         request = self.factory.get(self.path)\n1905.         lang = translation.get_language()\n1906.         tz = timezone.get_current_timezone_name()\n1907.         response = HttpResponse()\n1908.         key = learn_cache_key(request, response)\n1909.         self.assertNotIn(lang, key, "Cache keys shouldn\'t include the language name when i18n isn\'t active")\n1910.         self.assertNotIn(tz, key, "Cache keys shouldn\'t include the time zone name when i18n isn\'t active")\n1911. \n1912.     @override_settings(\n1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1914.         CACHE_MIDDLEWARE_SECONDS=60,\n1915.         USE_I18N=True,\n1916.     )\n1917.     def test_middleware(self):\n1918.         def set_cache(request, lang, msg):\n1919.             def get_response(req):\n1920.                 return HttpResponse(msg)\n1921. \n1922.             translation.activate(lang)\n1923.             return UpdateCacheMiddleware(get_response)(request)\n1924. \n1925.         # cache with non empty request.GET\n1926.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'other\': \'true\'})\n1927.         request._cache_update_cache = True\n1928. \n1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1930.         # first access, cache must return None\n1931.         self.assertIsNone(get_cache_data)\n1932.         content = \'Check for cache with QUERY_STRING\'\n1933. \n1934.         def get_response(req):\n1935.             return HttpResponse(content)\n1936. \n1937.         UpdateCacheMiddleware(get_response)(request)\n1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1939.         # cache must return content\n1940.         self.assertIsNotNone(get_cache_data)\n1941.         self.assertEqual(get_cache_data.content, content.encode())\n1942.         # different QUERY_STRING, cache must be empty\n1943.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'somethingelse\': \'true\'})\n1944.         request._cache_update_cache = True\n1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1946.         self.assertIsNone(get_cache_data)\n1947. \n1948.         # i18n tests\n1949.         en_message = "Hello world!"\n1950.         es_message = "Hola mundo!"\n1951. \n1952.         request = self.factory.get(self.path)\n1953.         request._cache_update_cache = True\n1954.         set_cache(request, \'en\', en_message)\n1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1956.         # The cache can be recovered\n1957.         self.assertIsNotNone(get_cache_data)\n1958.         self.assertEqual(get_cache_data.content, en_message.encode())\n1959.         # change the session language and set content\n1960.         request = self.factory.get(self.path)\n1961.         request._cache_update_cache = True\n1962.         set_cache(request, \'es\', es_message)\n1963.         # change again the language\n1964.         translation.activate(\'en\')\n1965.         # retrieve the content from cache\n1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1967.         self.assertEqual(get_cache_data.content, en_message.encode())\n1968.         # change again the language\n1969.         translation.activate(\'es\')\n1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1971.         self.assertEqual(get_cache_data.content, es_message.encode())\n1972.         # reset the language\n1973.         translation.deactivate()\n1974. \n1975.     @override_settings(\n1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1977.         CACHE_MIDDLEWARE_SECONDS=60,\n1978.     )\n1979.     def test_middleware_doesnt_cache_streaming_response(self):\n1980.         request = self.factory.get(self.path)\n1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1982.         self.assertIsNone(get_cache_data)\n1983. \n1984.         def get_stream_response(req):\n1985.             return StreamingHttpResponse([\'Check for cache with streaming content.\'])\n1986. \n1987.         UpdateCacheMiddleware(get_stream_response)(request)\n1988. \n1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1990.         self.assertIsNone(get_cache_data)\n1991. \n1992. \n1993. @override_settings(\n1994.     CACHES={\n1995.         \'default\': {\n1996.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1997.             \'KEY_PREFIX\': \'cacheprefix\'\n1998.         },\n1999.     },\n2000. )', start_line_number=1, end_line_number=2000)]
2025-10-06 14:24:18,940 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 14:24:18,940 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
â”œâ”€â”€ .github
|   â”œâ”€â”€ FUNDING.yml
|   â””â”€â”€ SECURITY.md
â”œâ”€â”€ .tx
â”œâ”€â”€ CONTRIBUTING.rst
â”œâ”€â”€ Gruntfile.js
â”œâ”€â”€ README.rst
â”œâ”€â”€ django
|   â”œâ”€â”€ __init__.py
|   â”œâ”€â”€ __main__.py
|   â”œâ”€â”€ apps
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ config.py
|   |   â””â”€â”€ registry.py
|   â”œâ”€â”€ bin
|   |   â””â”€â”€ django-admin.py
|   â”œâ”€â”€ conf
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ app_template
|   |   |   â””â”€â”€ migrations
|   |   â”œâ”€â”€ global_settings.py
|   |   â”œâ”€â”€ locale
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ af
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ar_DZ
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ast
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ be
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ br
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ de_CH
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ dsb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_NI
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_PR
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hsb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ hy
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ia
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ io
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ kab
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ kk
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ky
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ lb
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ mr
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ my
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ne
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ os
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ pa
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ sw
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tg
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ tt
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ udm
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ ur
|   |   |   |   â””â”€â”€ LC_MESSAGES
|   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â”œâ”€â”€ LC_MESSAGES
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ formats.py
|   |   |   â””â”€â”€ zh_Hant
|   |   |       â”œâ”€â”€ LC_MESSAGES
|   |   |       â”œâ”€â”€ __init__.py
|   |   |       â””â”€â”€ formats.py
|   |   â”œâ”€â”€ project_template
|   |   |   â””â”€â”€ project_name
|   |   â””â”€â”€ urls
|   |       â”œâ”€â”€ __init__.py
|   |       â”œâ”€â”€ i18n.py
|   |       â””â”€â”€ static.py
|   â”œâ”€â”€ contrib
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ admin
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ actions.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ decorators.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ filters.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ helpers.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ am
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_logentry_remove_auto_add.py
|   |   |   |   â”œâ”€â”€ 0003_logentry_add_action_flag_choices.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ options.py
|   |   |   â”œâ”€â”€ sites.py
|   |   |   â”œâ”€â”€ static
|   |   |   |   â””â”€â”€ admin
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â”œâ”€â”€ admin
|   |   |   |   â””â”€â”€ registration
|   |   |   â”œâ”€â”€ templatetags
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ admin_list.py
|   |   |   |   â”œâ”€â”€ admin_modify.py
|   |   |   |   â”œâ”€â”€ admin_urls.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ log.py
|   |   |   â”œâ”€â”€ tests.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â”œâ”€â”€ views
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ autocomplete.py
|   |   |   |   â”œâ”€â”€ decorators.py
|   |   |   |   â””â”€â”€ main.py
|   |   |   â””â”€â”€ widgets.py
|   |   â”œâ”€â”€ admindocs
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ admin_doc
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ auth
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ backends.py
|   |   |   â”œâ”€â”€ base_user.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ context_processors.py
|   |   |   â”œâ”€â”€ decorators.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ handlers
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ modwsgi.py
|   |   |   â”œâ”€â”€ hashers.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_alter_permission_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0003_alter_user_email_max_length.py
|   |   |   |   â”œâ”€â”€ 0004_alter_user_username_opts.py
|   |   |   |   â”œâ”€â”€ 0005_alter_user_last_login_null.py
|   |   |   |   â”œâ”€â”€ 0006_require_contenttypes_0002.py
|   |   |   |   â”œâ”€â”€ 0007_alter_validators_add_error_messages.py
|   |   |   |   â”œâ”€â”€ 0008_alter_user_username_max_length.py
|   |   |   |   â”œâ”€â”€ 0009_alter_user_last_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0010_alter_group_name_max_length.py
|   |   |   |   â”œâ”€â”€ 0011_update_proxy_permissions.py
|   |   |   |   â”œâ”€â”€ 0012_alter_user_first_name_max_length.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ mixins.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ password_validation.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â”œâ”€â”€ auth
|   |   |   |   â””â”€â”€ registration
|   |   |   â”œâ”€â”€ tokens.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ validators.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ contenttypes
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ fields.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_remove_content_type_name.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ flatpages
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ forms.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ sitemaps.py
|   |   |   â”œâ”€â”€ templatetags
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ flatpages.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ gis
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ options.py
|   |   |   |   â””â”€â”€ widgets.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ db
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ backends
|   |   |   |   â””â”€â”€ models
|   |   |   â”œâ”€â”€ feeds.py
|   |   |   â”œâ”€â”€ forms
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ fields.py
|   |   |   |   â””â”€â”€ widgets.py
|   |   |   â”œâ”€â”€ gdal
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ datasource.py
|   |   |   |   â”œâ”€â”€ driver.py
|   |   |   |   â”œâ”€â”€ envelope.py
|   |   |   |   â”œâ”€â”€ error.py
|   |   |   |   â”œâ”€â”€ feature.py
|   |   |   |   â”œâ”€â”€ field.py
|   |   |   |   â”œâ”€â”€ geometries.py
|   |   |   |   â”œâ”€â”€ geomtype.py
|   |   |   |   â”œâ”€â”€ layer.py
|   |   |   |   â”œâ”€â”€ libgdal.py
|   |   |   |   â”œâ”€â”€ prototypes
|   |   |   |   â”œâ”€â”€ raster
|   |   |   |   â””â”€â”€ srs.py
|   |   |   â”œâ”€â”€ geoip2
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ resources.py
|   |   |   â”œâ”€â”€ geometry.py
|   |   |   â”œâ”€â”€ geos
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ collections.py
|   |   |   |   â”œâ”€â”€ coordseq.py
|   |   |   |   â”œâ”€â”€ error.py
|   |   |   |   â”œâ”€â”€ factory.py
|   |   |   |   â”œâ”€â”€ geometry.py
|   |   |   |   â”œâ”€â”€ io.py
|   |   |   |   â”œâ”€â”€ libgeos.py
|   |   |   |   â”œâ”€â”€ linestring.py
|   |   |   |   â”œâ”€â”€ mutable_list.py
|   |   |   |   â”œâ”€â”€ point.py
|   |   |   |   â”œâ”€â”€ polygon.py
|   |   |   |   â”œâ”€â”€ prepared.py
|   |   |   |   â””â”€â”€ prototypes
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ measure.py
|   |   |   â”œâ”€â”€ ptr.py
|   |   |   â”œâ”€â”€ serializers
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ geojson.py
|   |   |   â”œâ”€â”€ shortcuts.py
|   |   |   â”œâ”€â”€ sitemaps
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ kml.py
|   |   |   |   â””â”€â”€ views.py
|   |   |   â”œâ”€â”€ static
|   |   |   |   â””â”€â”€ gis
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ gis
|   |   |   â”œâ”€â”€ utils
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ layermapping.py
|   |   |   |   â”œâ”€â”€ ogrinfo.py
|   |   |   |   â”œâ”€â”€ ogrinspect.py
|   |   |   |   â””â”€â”€ srs.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ humanize
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ ms
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â””â”€â”€ templatetags
|   |   |       â”œâ”€â”€ __init__.py
|   |   |       â””â”€â”€ humanize.py
|   |   â”œâ”€â”€ messages
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ api.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ constants.py
|   |   |   â”œâ”€â”€ context_processors.py
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ storage
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ cookie.py
|   |   |   |   â”œâ”€â”€ fallback.py
|   |   |   |   â””â”€â”€ session.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ postgres
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ aggregates
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ general.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â””â”€â”€ statistics.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ constraints.py
|   |   |   â”œâ”€â”€ fields
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ array.py
|   |   |   |   â”œâ”€â”€ citext.py
|   |   |   |   â”œâ”€â”€ hstore.py
|   |   |   |   â”œâ”€â”€ jsonb.py
|   |   |   |   â”œâ”€â”€ ranges.py
|   |   |   |   â””â”€â”€ utils.py
|   |   |   â”œâ”€â”€ forms
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ array.py
|   |   |   |   â”œâ”€â”€ hstore.py
|   |   |   |   â”œâ”€â”€ jsonb.py
|   |   |   |   â””â”€â”€ ranges.py
|   |   |   â”œâ”€â”€ functions.py
|   |   |   â”œâ”€â”€ indexes.py
|   |   |   â”œâ”€â”€ jinja2
|   |   |   |   â””â”€â”€ postgres
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ lookups.py
|   |   |   â”œâ”€â”€ operations.py
|   |   |   â”œâ”€â”€ search.py
|   |   |   â”œâ”€â”€ serializers.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ templates
|   |   |   |   â””â”€â”€ postgres
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ validators.py
|   |   â”œâ”€â”€ redirects
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â””â”€â”€ models.py
|   |   â”œâ”€â”€ sessions
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ cache.py
|   |   |   |   â”œâ”€â”€ cached_db.py
|   |   |   |   â”œâ”€â”€ db.py
|   |   |   |   â”œâ”€â”€ file.py
|   |   |   |   â””â”€â”€ signed_cookies.py
|   |   |   â”œâ”€â”€ base_session.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â””â”€â”€ serializers.py
|   |   â”œâ”€â”€ sitemaps
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ templates
|   |   |   â””â”€â”€ views.py
|   |   â”œâ”€â”€ sites
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ admin.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ locale
|   |   |   |   â”œâ”€â”€ af
|   |   |   |   â”œâ”€â”€ ar
|   |   |   |   â”œâ”€â”€ ast
|   |   |   |   â”œâ”€â”€ az
|   |   |   |   â”œâ”€â”€ be
|   |   |   |   â”œâ”€â”€ bg
|   |   |   |   â”œâ”€â”€ bn
|   |   |   |   â”œâ”€â”€ br
|   |   |   |   â”œâ”€â”€ bs
|   |   |   |   â”œâ”€â”€ ca
|   |   |   |   â”œâ”€â”€ cs
|   |   |   |   â”œâ”€â”€ cy
|   |   |   |   â”œâ”€â”€ da
|   |   |   |   â”œâ”€â”€ de
|   |   |   |   â”œâ”€â”€ dsb
|   |   |   |   â”œâ”€â”€ el
|   |   |   |   â”œâ”€â”€ en
|   |   |   |   â”œâ”€â”€ en_AU
|   |   |   |   â”œâ”€â”€ en_GB
|   |   |   |   â”œâ”€â”€ eo
|   |   |   |   â”œâ”€â”€ es
|   |   |   |   â”œâ”€â”€ es_AR
|   |   |   |   â”œâ”€â”€ es_CO
|   |   |   |   â”œâ”€â”€ es_MX
|   |   |   |   â”œâ”€â”€ es_VE
|   |   |   |   â”œâ”€â”€ et
|   |   |   |   â”œâ”€â”€ eu
|   |   |   |   â”œâ”€â”€ fa
|   |   |   |   â”œâ”€â”€ fi
|   |   |   |   â”œâ”€â”€ fr
|   |   |   |   â”œâ”€â”€ fy
|   |   |   |   â”œâ”€â”€ ga
|   |   |   |   â”œâ”€â”€ gd
|   |   |   |   â”œâ”€â”€ gl
|   |   |   |   â”œâ”€â”€ he
|   |   |   |   â”œâ”€â”€ hi
|   |   |   |   â”œâ”€â”€ hr
|   |   |   |   â”œâ”€â”€ hsb
|   |   |   |   â”œâ”€â”€ hu
|   |   |   |   â”œâ”€â”€ hy
|   |   |   |   â”œâ”€â”€ ia
|   |   |   |   â”œâ”€â”€ id
|   |   |   |   â”œâ”€â”€ io
|   |   |   |   â”œâ”€â”€ is
|   |   |   |   â”œâ”€â”€ it
|   |   |   |   â”œâ”€â”€ ja
|   |   |   |   â”œâ”€â”€ ka
|   |   |   |   â”œâ”€â”€ kab
|   |   |   |   â”œâ”€â”€ kk
|   |   |   |   â”œâ”€â”€ km
|   |   |   |   â”œâ”€â”€ kn
|   |   |   |   â”œâ”€â”€ ko
|   |   |   |   â”œâ”€â”€ lb
|   |   |   |   â”œâ”€â”€ lt
|   |   |   |   â”œâ”€â”€ lv
|   |   |   |   â”œâ”€â”€ mk
|   |   |   |   â”œâ”€â”€ ml
|   |   |   |   â”œâ”€â”€ mn
|   |   |   |   â”œâ”€â”€ mr
|   |   |   |   â”œâ”€â”€ my
|   |   |   |   â”œâ”€â”€ nb
|   |   |   |   â”œâ”€â”€ ne
|   |   |   |   â”œâ”€â”€ nl
|   |   |   |   â”œâ”€â”€ nn
|   |   |   |   â”œâ”€â”€ os
|   |   |   |   â”œâ”€â”€ pa
|   |   |   |   â”œâ”€â”€ pl
|   |   |   |   â”œâ”€â”€ pt
|   |   |   |   â”œâ”€â”€ pt_BR
|   |   |   |   â”œâ”€â”€ ro
|   |   |   |   â”œâ”€â”€ ru
|   |   |   |   â”œâ”€â”€ sk
|   |   |   |   â”œâ”€â”€ sl
|   |   |   |   â”œâ”€â”€ sq
|   |   |   |   â”œâ”€â”€ sr
|   |   |   |   â”œâ”€â”€ sr_Latn
|   |   |   |   â”œâ”€â”€ sv
|   |   |   |   â”œâ”€â”€ sw
|   |   |   |   â”œâ”€â”€ ta
|   |   |   |   â”œâ”€â”€ te
|   |   |   |   â”œâ”€â”€ th
|   |   |   |   â”œâ”€â”€ tr
|   |   |   |   â”œâ”€â”€ tt
|   |   |   |   â”œâ”€â”€ udm
|   |   |   |   â”œâ”€â”€ uk
|   |   |   |   â”œâ”€â”€ ur
|   |   |   |   â”œâ”€â”€ uz
|   |   |   |   â”œâ”€â”€ vi
|   |   |   |   â”œâ”€â”€ zh_Hans
|   |   |   |   â””â”€â”€ zh_Hant
|   |   |   â”œâ”€â”€ management.py
|   |   |   â”œâ”€â”€ managers.py
|   |   |   â”œâ”€â”€ middleware.py
|   |   |   â”œâ”€â”€ migrations
|   |   |   |   â”œâ”€â”€ 0001_initial.py
|   |   |   |   â”œâ”€â”€ 0002_alter_domain_unique.py
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ models.py
|   |   |   â”œâ”€â”€ requests.py
|   |   |   â””â”€â”€ shortcuts.py
|   |   â”œâ”€â”€ staticfiles
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ apps.py
|   |   |   â”œâ”€â”€ checks.py
|   |   |   â”œâ”€â”€ finders.py
|   |   |   â”œâ”€â”€ handlers.py
|   |   |   â”œâ”€â”€ management
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â””â”€â”€ commands
|   |   |   â”œâ”€â”€ storage.py
|   |   |   â”œâ”€â”€ testing.py
|   |   |   â”œâ”€â”€ urls.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ views.py
|   |   â””â”€â”€ syndication
|   |       â”œâ”€â”€ __init__.py
|   |       â”œâ”€â”€ apps.py
|   |       â””â”€â”€ views.py
|   â”œâ”€â”€ core
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ asgi.py
|   |   â”œâ”€â”€ cache
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ db.py
|   |   |   |   â”œâ”€â”€ dummy.py
|   |   |   |   â”œâ”€â”€ filebased.py
|   |   |   |   â”œâ”€â”€ locmem.py
|   |   |   |   â””â”€â”€ memcached.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ checks
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ async_checks.py
|   |   |   â”œâ”€â”€ caches.py
|   |   |   â”œâ”€â”€ compatibility
|   |   |   |   â””â”€â”€ __init__.py
|   |   |   â”œâ”€â”€ database.py
|   |   |   â”œâ”€â”€ messages.py
|   |   |   â”œâ”€â”€ model_checks.py
|   |   |   â”œâ”€â”€ registry.py
|   |   |   â”œâ”€â”€ security
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ csrf.py
|   |   |   |   â””â”€â”€ sessions.py
|   |   |   â”œâ”€â”€ templates.py
|   |   |   â”œâ”€â”€ translation.py
|   |   |   â””â”€â”€ urls.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ files
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ images.py
|   |   |   â”œâ”€â”€ locks.py
|   |   |   â”œâ”€â”€ move.py
|   |   |   â”œâ”€â”€ storage.py
|   |   |   â”œâ”€â”€ temp.py
|   |   |   â”œâ”€â”€ uploadedfile.py
|   |   |   â”œâ”€â”€ uploadhandler.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ handlers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ asgi.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ exception.py
|   |   |   â””â”€â”€ wsgi.py
|   |   â”œâ”€â”€ mail
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ backends
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ console.py
|   |   |   |   â”œâ”€â”€ dummy.py
|   |   |   |   â”œâ”€â”€ filebased.py
|   |   |   |   â”œâ”€â”€ locmem.py
|   |   |   |   â””â”€â”€ smtp.py
|   |   |   â”œâ”€â”€ message.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ management
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ color.py
|   |   |   â”œâ”€â”€ commands
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ check.py
|   |   |   |   â”œâ”€â”€ compilemessages.py
|   |   |   |   â”œâ”€â”€ createcachetable.py
|   |   |   |   â”œâ”€â”€ dbshell.py
|   |   |   |   â”œâ”€â”€ diffsettings.py
|   |   |   |   â”œâ”€â”€ dumpdata.py
|   |   |   |   â”œâ”€â”€ flush.py
|   |   |   |   â”œâ”€â”€ inspectdb.py
|   |   |   |   â”œâ”€â”€ loaddata.py
|   |   |   |   â”œâ”€â”€ makemessages.py
|   |   |   |   â”œâ”€â”€ makemigrations.py
|   |   |   |   â”œâ”€â”€ migrate.py
|   |   |   |   â”œâ”€â”€ runserver.py
|   |   |   |   â”œâ”€â”€ sendtestemail.py
|   |   |   |   â”œâ”€â”€ shell.py
|   |   |   |   â”œâ”€â”€ showmigrations.py
|   |   |   |   â”œâ”€â”€ sqlflush.py
|   |   |   |   â”œâ”€â”€ sqlmigrate.py
|   |   |   |   â”œâ”€â”€ sqlsequencereset.py
|   |   |   |   â”œâ”€â”€ squashmigrations.py
|   |   |   |   â”œâ”€â”€ startapp.py
|   |   |   |   â”œâ”€â”€ startproject.py
|   |   |   |   â”œâ”€â”€ test.py
|   |   |   |   â””â”€â”€ testserver.py
|   |   |   â”œâ”€â”€ sql.py
|   |   |   â”œâ”€â”€ templates.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ paginator.py
|   |   â”œâ”€â”€ serializers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ json.py
|   |   |   â”œâ”€â”€ jsonl.py
|   |   |   â”œâ”€â”€ python.py
|   |   |   â”œâ”€â”€ pyyaml.py
|   |   |   â””â”€â”€ xml_serializer.py
|   |   â”œâ”€â”€ servers
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â””â”€â”€ basehttp.py
|   |   â”œâ”€â”€ signals.py
|   |   â”œâ”€â”€ signing.py
|   |   â”œâ”€â”€ validators.py
|   |   â””â”€â”€ wsgi.py
|   â”œâ”€â”€ db
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ backends
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ ddl_references.py
|   |   |   â”œâ”€â”€ dummy
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â””â”€â”€ features.py
|   |   |   â”œâ”€â”€ mysql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ compiler.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ oracle
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ functions.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â”œâ”€â”€ schema.py
|   |   |   |   â”œâ”€â”€ utils.py
|   |   |   |   â””â”€â”€ validation.py
|   |   |   â”œâ”€â”€ postgresql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â””â”€â”€ schema.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ sqlite3
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ client.py
|   |   |   |   â”œâ”€â”€ creation.py
|   |   |   |   â”œâ”€â”€ features.py
|   |   |   |   â”œâ”€â”€ introspection.py
|   |   |   |   â”œâ”€â”€ operations.py
|   |   |   |   â””â”€â”€ schema.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ migrations
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ autodetector.py
|   |   |   â”œâ”€â”€ exceptions.py
|   |   |   â”œâ”€â”€ executor.py
|   |   |   â”œâ”€â”€ graph.py
|   |   |   â”œâ”€â”€ loader.py
|   |   |   â”œâ”€â”€ migration.py
|   |   |   â”œâ”€â”€ operations
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ base.py
|   |   |   |   â”œâ”€â”€ fields.py
|   |   |   |   â”œâ”€â”€ models.py
|   |   |   |   â”œâ”€â”€ special.py
|   |   |   |   â””â”€â”€ utils.py
|   |   |   â”œâ”€â”€ optimizer.py
|   |   |   â”œâ”€â”€ questioner.py
|   |   |   â”œâ”€â”€ recorder.py
|   |   |   â”œâ”€â”€ serializer.py
|   |   |   â”œâ”€â”€ state.py
|   |   |   â”œâ”€â”€ utils.py
|   |   |   â””â”€â”€ writer.py
|   |   â”œâ”€â”€ models
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ aggregates.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ constants.py
|   |   |   â”œâ”€â”€ constraints.py
|   |   |   â”œâ”€â”€ deletion.py
|   |   |   â”œâ”€â”€ enums.py
|   |   |   â”œâ”€â”€ expressions.py
|   |   |   â”œâ”€â”€ fields
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ files.py
|   |   |   |   â”œâ”€â”€ json.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â”œâ”€â”€ proxy.py
|   |   |   |   â”œâ”€â”€ related.py
|   |   |   |   â”œâ”€â”€ related_descriptors.py
|   |   |   |   â”œâ”€â”€ related_lookups.py
|   |   |   |   â””â”€â”€ reverse_related.py
|   |   |   â”œâ”€â”€ functions
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ comparison.py
|   |   |   |   â”œâ”€â”€ datetime.py
|   |   |   |   â”œâ”€â”€ math.py
|   |   |   |   â”œâ”€â”€ mixins.py
|   |   |   |   â”œâ”€â”€ text.py
|   |   |   |   â””â”€â”€ window.py
|   |   |   â”œâ”€â”€ indexes.py
|   |   |   â”œâ”€â”€ lookups.py
|   |   |   â”œâ”€â”€ manager.py
|   |   |   â”œâ”€â”€ options.py
|   |   |   â”œâ”€â”€ query.py
|   |   |   â”œâ”€â”€ query_utils.py
|   |   |   â”œâ”€â”€ signals.py
|   |   |   â”œâ”€â”€ sql
|   |   |   |   â”œâ”€â”€ __init__.py
|   |   |   |   â”œâ”€â”€ compiler.py
|   |   |   |   â”œâ”€â”€ constants.py
|   |   |   |   â”œâ”€â”€ datastructures.py
|   |   |   |   â”œâ”€â”€ query.py
|   |   |   |   â”œâ”€â”€ subqueries.py
|   |   |   |   â””â”€â”€ where.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ transaction.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ dispatch
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ dispatcher.py
|   |   â””â”€â”€ license.txt
|   â”œâ”€â”€ forms
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ boundfield.py
|   |   â”œâ”€â”€ fields.py
|   |   â”œâ”€â”€ forms.py
|   |   â”œâ”€â”€ formsets.py
|   |   â”œâ”€â”€ jinja2
|   |   |   â””â”€â”€ django
|   |   |       â””â”€â”€ forms
|   |   â”œâ”€â”€ models.py
|   |   â”œâ”€â”€ renderers.py
|   |   â”œâ”€â”€ templates
|   |   |   â””â”€â”€ django
|   |   |       â””â”€â”€ forms
|   |   â”œâ”€â”€ utils.py
|   |   â””â”€â”€ widgets.py
|   â”œâ”€â”€ http
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cookie.py
|   |   â”œâ”€â”€ multipartparser.py
|   |   â”œâ”€â”€ request.py
|   |   â””â”€â”€ response.py
|   â”œâ”€â”€ middleware
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ clickjacking.py
|   |   â”œâ”€â”€ common.py
|   |   â”œâ”€â”€ csrf.py
|   |   â”œâ”€â”€ gzip.py
|   |   â”œâ”€â”€ http.py
|   |   â”œâ”€â”€ locale.py
|   |   â””â”€â”€ security.py
|   â”œâ”€â”€ shortcuts.py
|   â”œâ”€â”€ template
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ backends
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ django.py
|   |   |   â”œâ”€â”€ dummy.py
|   |   |   â”œâ”€â”€ jinja2.py
|   |   |   â””â”€â”€ utils.py
|   |   â”œâ”€â”€ base.py
|   |   â”œâ”€â”€ context.py
|   |   â”œâ”€â”€ context_processors.py
|   |   â”œâ”€â”€ defaultfilters.py
|   |   â”œâ”€â”€ defaulttags.py
|   |   â”œâ”€â”€ engine.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ library.py
|   |   â”œâ”€â”€ loader.py
|   |   â”œâ”€â”€ loader_tags.py
|   |   â”œâ”€â”€ loaders
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ app_directories.py
|   |   |   â”œâ”€â”€ base.py
|   |   |   â”œâ”€â”€ cached.py
|   |   |   â”œâ”€â”€ filesystem.py
|   |   |   â””â”€â”€ locmem.py
|   |   â”œâ”€â”€ response.py
|   |   â”œâ”€â”€ smartif.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ templatetags
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ i18n.py
|   |   â”œâ”€â”€ l10n.py
|   |   â”œâ”€â”€ static.py
|   |   â””â”€â”€ tz.py
|   â”œâ”€â”€ test
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ client.py
|   |   â”œâ”€â”€ html.py
|   |   â”œâ”€â”€ runner.py
|   |   â”œâ”€â”€ selenium.py
|   |   â”œâ”€â”€ signals.py
|   |   â”œâ”€â”€ testcases.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ urls
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ base.py
|   |   â”œâ”€â”€ conf.py
|   |   â”œâ”€â”€ converters.py
|   |   â”œâ”€â”€ exceptions.py
|   |   â”œâ”€â”€ resolvers.py
|   |   â””â”€â”€ utils.py
|   â”œâ”€â”€ utils
|   |   â”œâ”€â”€ __init__.py
|   |   â”œâ”€â”€ _os.py
|   |   â”œâ”€â”€ archive.py
|   |   â”œâ”€â”€ asyncio.py
|   |   â”œâ”€â”€ autoreload.py
|   |   â”œâ”€â”€ baseconv.py
|   |   â”œâ”€â”€ cache.py
|   |   â”œâ”€â”€ crypto.py
|   |   â”œâ”€â”€ datastructures.py
|   |   â”œâ”€â”€ dateformat.py
|   |   â”œâ”€â”€ dateparse.py
|   |   â”œâ”€â”€ dates.py
|   |   â”œâ”€â”€ datetime_safe.py
|   |   â”œâ”€â”€ deconstruct.py
|   |   â”œâ”€â”€ decorators.py
|   |   â”œâ”€â”€ deprecation.py
|   |   â”œâ”€â”€ duration.py
|   |   â”œâ”€â”€ encoding.py
|   |   â”œâ”€â”€ feedgenerator.py
|   |   â”œâ”€â”€ formats.py
|   |   â”œâ”€â”€ functional.py
|   |   â”œâ”€â”€ hashable.py
|   |   â”œâ”€â”€ html.py
|   |   â”œâ”€â”€ http.py
|   |   â”œâ”€â”€ inspect.py
|   |   â”œâ”€â”€ ipv6.py
|   |   â”œâ”€â”€ itercompat.py
|   |   â”œâ”€â”€ jslex.py
|   |   â”œâ”€â”€ log.py
|   |   â”œâ”€â”€ lorem_ipsum.py
|   |   â”œâ”€â”€ module_loading.py
|   |   â”œâ”€â”€ numberformat.py
|   |   â”œâ”€â”€ regex_helper.py
|   |   â”œâ”€â”€ safestring.py
|   |   â”œâ”€â”€ termcolors.py
|   |   â”œâ”€â”€ text.py
|   |   â”œâ”€â”€ timesince.py
|   |   â”œâ”€â”€ timezone.py
|   |   â”œâ”€â”€ topological_sort.py
|   |   â”œâ”€â”€ translation
|   |   |   â”œâ”€â”€ __init__.py
|   |   |   â”œâ”€â”€ reloader.py
|   |   |   â”œâ”€â”€ template.py
|   |   |   â”œâ”€â”€ trans_null.py
|   |   |   â””â”€â”€ trans_real.py
|   |   â”œâ”€â”€ tree.py
|   |   â”œâ”€â”€ version.py
|   |   â””â”€â”€ xmlutils.py
|   â””â”€â”€ views
|       â”œâ”€â”€ __init__.py
|       â”œâ”€â”€ csrf.py
|       â”œâ”€â”€ debug.py
|       â”œâ”€â”€ decorators
|       |   â”œâ”€â”€ __init__.py
|       |   â”œâ”€â”€ cache.py
|       |   â”œâ”€â”€ clickjacking.py
|       |   â”œâ”€â”€ csrf.py
|       |   â”œâ”€â”€ debug.py
|       |   â”œâ”€â”€ gzip.py
|       |   â”œâ”€â”€ http.py
|       |   â””â”€â”€ vary.py
|       â”œâ”€â”€ defaults.py
|       â”œâ”€â”€ generic
|       |   â”œâ”€â”€ __init__.py
|       |   â”œâ”€â”€ base.py
|       |   â”œâ”€â”€ dates.py
|       |   â”œâ”€â”€ detail.py
|       |   â”œâ”€â”€ edit.py
|       |   â””â”€â”€ list.py
|       â”œâ”€â”€ i18n.py
|       â”œâ”€â”€ static.py
|       â””â”€â”€ templates
|           â””â”€â”€ technical_500.txt
â”œâ”€â”€ docs
|   â”œâ”€â”€ README.rst
|   â”œâ”€â”€ _ext
|   |   â””â”€â”€ djangodocs.py
|   â”œâ”€â”€ _theme
|   |   â”œâ”€â”€ djangodocs
|   |   |   â””â”€â”€ static
|   |   |       â””â”€â”€ fontawesome
|   |   â””â”€â”€ djangodocs-epub
|   |       â””â”€â”€ static
|   â”œâ”€â”€ conf.py
|   â”œâ”€â”€ contents.txt
|   â”œâ”€â”€ faq
|   |   â”œâ”€â”€ admin.txt
|   |   â”œâ”€â”€ contributing.txt
|   |   â”œâ”€â”€ general.txt
|   |   â”œâ”€â”€ help.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ install.txt
|   |   â”œâ”€â”€ models.txt
|   |   â”œâ”€â”€ troubleshooting.txt
|   |   â””â”€â”€ usage.txt
|   â”œâ”€â”€ glossary.txt
|   â”œâ”€â”€ howto
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ auth-remote-user.txt
|   |   â”œâ”€â”€ custom-file-storage.txt
|   |   â”œâ”€â”€ custom-lookups.txt
|   |   â”œâ”€â”€ custom-management-commands.txt
|   |   â”œâ”€â”€ custom-model-fields.txt
|   |   â”œâ”€â”€ custom-template-backend.txt
|   |   â”œâ”€â”€ custom-template-tags.txt
|   |   â”œâ”€â”€ deployment
|   |   |   â”œâ”€â”€ asgi
|   |   |   |   â”œâ”€â”€ daphne.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â””â”€â”€ uvicorn.txt
|   |   |   â”œâ”€â”€ checklist.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â””â”€â”€ wsgi
|   |   |       â”œâ”€â”€ apache-auth.txt
|   |   |       â”œâ”€â”€ gunicorn.txt
|   |   |       â”œâ”€â”€ index.txt
|   |   |       â”œâ”€â”€ modwsgi.txt
|   |   |       â””â”€â”€ uwsgi.txt
|   |   â”œâ”€â”€ error-reporting.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ initial-data.txt
|   |   â”œâ”€â”€ legacy-databases.txt
|   |   â”œâ”€â”€ outputting-csv.txt
|   |   â”œâ”€â”€ outputting-pdf.txt
|   |   â”œâ”€â”€ overriding-templates.txt
|   |   â”œâ”€â”€ static-files
|   |   |   â”œâ”€â”€ deployment.txt
|   |   |   â””â”€â”€ index.txt
|   |   â”œâ”€â”€ upgrade-version.txt
|   |   â”œâ”€â”€ windows.txt
|   |   â””â”€â”€ writing-migrations.txt
|   â”œâ”€â”€ index.txt
|   â”œâ”€â”€ internals
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ contributing
|   |   |   â”œâ”€â”€ bugs-and-features.txt
|   |   |   â”œâ”€â”€ committing-code.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ localizing.txt
|   |   |   â”œâ”€â”€ new-contributors.txt
|   |   |   â”œâ”€â”€ triaging-tickets.txt
|   |   |   â”œâ”€â”€ writing-code
|   |   |   |   â”œâ”€â”€ coding-style.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ javascript.txt
|   |   |   |   â”œâ”€â”€ submitting-patches.txt
|   |   |   |   â”œâ”€â”€ unit-tests.txt
|   |   |   |   â””â”€â”€ working-with-git.txt
|   |   |   â””â”€â”€ writing-documentation.txt
|   |   â”œâ”€â”€ deprecation.txt
|   |   â”œâ”€â”€ git.txt
|   |   â”œâ”€â”€ howto-release-django.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ mailing-lists.txt
|   |   â”œâ”€â”€ organization.txt
|   |   â”œâ”€â”€ release-process.txt
|   |   â””â”€â”€ security.txt
|   â”œâ”€â”€ intro
|   |   â”œâ”€â”€ _images
|   |   â”œâ”€â”€ contributing.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ install.txt
|   |   â”œâ”€â”€ overview.txt
|   |   â”œâ”€â”€ reusable-apps.txt
|   |   â”œâ”€â”€ tutorial01.txt
|   |   â”œâ”€â”€ tutorial02.txt
|   |   â”œâ”€â”€ tutorial03.txt
|   |   â”œâ”€â”€ tutorial04.txt
|   |   â”œâ”€â”€ tutorial05.txt
|   |   â”œâ”€â”€ tutorial06.txt
|   |   â”œâ”€â”€ tutorial07.txt
|   |   â””â”€â”€ whatsnext.txt
|   â”œâ”€â”€ man
|   â”œâ”€â”€ misc
|   |   â”œâ”€â”€ api-stability.txt
|   |   â”œâ”€â”€ design-philosophies.txt
|   |   â”œâ”€â”€ distributions.txt
|   |   â””â”€â”€ index.txt
|   â”œâ”€â”€ ref
|   |   â”œâ”€â”€ applications.txt
|   |   â”œâ”€â”€ checks.txt
|   |   â”œâ”€â”€ class-based-views
|   |   |   â”œâ”€â”€ base.txt
|   |   |   â”œâ”€â”€ flattened-index.txt
|   |   |   â”œâ”€â”€ generic-date-based.txt
|   |   |   â”œâ”€â”€ generic-display.txt
|   |   |   â”œâ”€â”€ generic-editing.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ mixins-date-based.txt
|   |   |   â”œâ”€â”€ mixins-editing.txt
|   |   |   â”œâ”€â”€ mixins-multiple-object.txt
|   |   |   â”œâ”€â”€ mixins-simple.txt
|   |   |   â”œâ”€â”€ mixins-single-object.txt
|   |   |   â””â”€â”€ mixins.txt
|   |   â”œâ”€â”€ clickjacking.txt
|   |   â”œâ”€â”€ contrib
|   |   |   â”œâ”€â”€ admin
|   |   |   |   â”œâ”€â”€ _images
|   |   |   |   â”œâ”€â”€ actions.txt
|   |   |   |   â”œâ”€â”€ admindocs.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â””â”€â”€ javascript.txt
|   |   |   â”œâ”€â”€ auth.txt
|   |   |   â”œâ”€â”€ contenttypes.txt
|   |   |   â”œâ”€â”€ flatpages.txt
|   |   |   â”œâ”€â”€ gis
|   |   |   |   â”œâ”€â”€ admin.txt
|   |   |   |   â”œâ”€â”€ commands.txt
|   |   |   |   â”œâ”€â”€ db-api.txt
|   |   |   |   â”œâ”€â”€ deployment.txt
|   |   |   |   â”œâ”€â”€ feeds.txt
|   |   |   |   â”œâ”€â”€ forms-api.txt
|   |   |   |   â”œâ”€â”€ functions.txt
|   |   |   |   â”œâ”€â”€ gdal.txt
|   |   |   |   â”œâ”€â”€ geoip2.txt
|   |   |   |   â”œâ”€â”€ geoquerysets.txt
|   |   |   |   â”œâ”€â”€ geos.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ install
|   |   |   |   â”œâ”€â”€ layermapping.txt
|   |   |   |   â”œâ”€â”€ measure.txt
|   |   |   |   â”œâ”€â”€ model-api.txt
|   |   |   |   â”œâ”€â”€ ogrinspect.txt
|   |   |   |   â”œâ”€â”€ serializers.txt
|   |   |   |   â”œâ”€â”€ sitemaps.txt
|   |   |   |   â”œâ”€â”€ testing.txt
|   |   |   |   â”œâ”€â”€ tutorial.txt
|   |   |   |   â””â”€â”€ utils.txt
|   |   |   â”œâ”€â”€ humanize.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ messages.txt
|   |   |   â”œâ”€â”€ postgres
|   |   |   |   â”œâ”€â”€ aggregates.txt
|   |   |   |   â”œâ”€â”€ constraints.txt
|   |   |   |   â”œâ”€â”€ fields.txt
|   |   |   |   â”œâ”€â”€ forms.txt
|   |   |   |   â”œâ”€â”€ functions.txt
|   |   |   |   â”œâ”€â”€ index.txt
|   |   |   |   â”œâ”€â”€ indexes.txt
|   |   |   |   â”œâ”€â”€ lookups.txt
|   |   |   |   â”œâ”€â”€ operations.txt
|   |   |   |   â”œâ”€â”€ search.txt
|   |   |   |   â””â”€â”€ validators.txt
|   |   |   â”œâ”€â”€ redirects.txt
|   |   |   â”œâ”€â”€ sitemaps.txt
|   |   |   â”œâ”€â”€ sites.txt
|   |   |   â”œâ”€â”€ staticfiles.txt
|   |   |   â””â”€â”€ syndication.txt
|   |   â”œâ”€â”€ csrf.txt
|   |   â”œâ”€â”€ databases.txt
|   |   â”œâ”€â”€ django-admin.txt
|   |   â”œâ”€â”€ exceptions.txt
|   |   â”œâ”€â”€ files
|   |   |   â”œâ”€â”€ file.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ storage.txt
|   |   |   â””â”€â”€ uploads.txt
|   |   â”œâ”€â”€ forms
|   |   |   â”œâ”€â”€ api.txt
|   |   |   â”œâ”€â”€ fields.txt
|   |   |   â”œâ”€â”€ formsets.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ models.txt
|   |   |   â”œâ”€â”€ renderers.txt
|   |   |   â”œâ”€â”€ validation.txt
|   |   |   â””â”€â”€ widgets.txt
|   |   â”œâ”€â”€ index.txt
|   |   â”œâ”€â”€ middleware.txt
|   |   â”œâ”€â”€ migration-operations.txt
|   |   â”œâ”€â”€ models
|   |   |   â”œâ”€â”€ class.txt
|   |   |   â”œâ”€â”€ conditional-expressions.txt
|   |   |   â”œâ”€â”€ constraints.txt
|   |   |   â”œâ”€â”€ database-functions.txt
|   |   |   â”œâ”€â”€ expressions.txt
|   |   |   â”œâ”€â”€ fields.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â”œâ”€â”€ indexes.txt
|   |   |   â”œâ”€â”€ instances.txt
|   |   |   â”œâ”€â”€ lookups.txt
|   |   |   â”œâ”€â”€ meta.txt
|   |   |   â”œâ”€â”€ options.txt
|   |   |   â”œâ”€â”€ querysets.txt
|   |   |   â””â”€â”€ relations.txt
|   |   â”œâ”€â”€ paginator.txt
|   |   â”œâ”€â”€ request-response.txt
|   |   â”œâ”€â”€ schema-editor.txt
|   |   â”œâ”€â”€ settings.txt
|   |   â”œâ”€â”€ signals.txt
|   |   â”œâ”€â”€ template-response.txt
|   |   â”œâ”€â”€ templates
|   |   |   â”œâ”€â”€ api.txt
|   |   |   â”œâ”€â”€ builtins.txt
|   |   |   â”œâ”€â”€ index.txt
|   |   |   â””â”€â”€ language.txt
|   |   â”œâ”€â”€ unicode.txt
|   |   â”œâ”€â”€ urlresolvers.txt
|   |   â”œâ”€â”€ urls.txt
|   |   â”œâ”€â”€ utils.txt
|   |   â”œâ”€â”€ validators.txt
|   |   â””â”€â”€ views.txt
|   â”œâ”€â”€ releases
|   |   â”œâ”€â”€ 0.95.txt
|   |   â”œâ”€â”€ 0.96.txt
|   |   â”œâ”€â”€ 1.0-porting-guide.txt
|   |   â”œâ”€â”€ 1.0.1.txt
|   |   â”œâ”€â”€ 1.0.2.txt
|   |   â”œâ”€â”€ 1.0.txt
|   |   â”œâ”€â”€ 1.1.2.txt
|   |   â”œâ”€â”€ 1.1.3.txt
|   |   â”œâ”€â”€ 1.1.4.txt
|   |   â”œâ”€â”€ 1.1.txt
|   |   â”œâ”€â”€ 1.10.1.txt
|   |   â”œâ”€â”€ 1.10.2.txt
|   |   â”œâ”€â”€ 1.10.3.txt
|   |   â”œâ”€â”€ 1.10.4.txt
|   |   â”œâ”€â”€ 1.10.5.txt
|   |   â”œâ”€â”€ 1.10.6.txt
|   |   â”œâ”€â”€ 1.10.7.txt
|   |   â”œâ”€â”€ 1.10.8.txt
|   |   â”œâ”€â”€ 1.10.txt
|   |   â”œâ”€â”€ 1.11.1.txt
|   |   â”œâ”€â”€ 1.11.10.txt
|   |   â”œâ”€â”€ 1.11.11.txt
|   |   â”œâ”€â”€ 1.11.12.txt
|   |   â”œâ”€â”€ 1.11.13.txt
|   |   â”œâ”€â”€ 1.11.14.txt
|   |   â”œâ”€â”€ 1.11.15.txt
|   |   â”œâ”€â”€ 1.11.16.txt
|   |   â”œâ”€â”€ 1.11.17.txt
|   |   â”œâ”€â”€ 1.11.18.txt
|   |   â”œâ”€â”€ 1.11.19.txt
|   |   â”œâ”€â”€ 1.11.2.txt
|   |   â”œâ”€â”€ 1.11.20.txt
|   |   â”œâ”€â”€ 1.11.21.txt
|   |   â”œâ”€â”€ 1.11.22.txt
|   |   â”œâ”€â”€ 1.11.23.txt
|   |   â”œâ”€â”€ 1.11.24.txt
|   |   â”œâ”€â”€ 1.11.25.txt
|   |   â”œâ”€â”€ 1.11.26.txt
|   |   â”œâ”€â”€ 1.11.27.txt
|   |   â”œâ”€â”€ 1.11.28.txt
|   |   â”œâ”€â”€ 1.11.29.txt
|   |   â”œâ”€â”€ 1.11.3.txt
|   |   â”œâ”€â”€ 1.11.4.txt
|   |   â”œâ”€â”€ 1.11.5.txt
|   |   â”œâ”€â”€ 1.11.6.txt
|   |   â”œâ”€â”€ 1.11.7.txt
|   |   â”œâ”€â”€ 1.11.8.txt
|   |   â”œâ”€â”€ 1.11.9.txt
|   |   â”œâ”€â”€ 1.11.txt
|   |   â”œâ”€â”€ 1.2.1.txt
|   |   â”œâ”€â”€ 1.2.2.txt
|   |   â”œâ”€â”€ 1.2.3.txt
|   |   â”œâ”€â”€ 1.2.4.txt
|   |   â”œâ”€â”€ 1.2.5.txt
|   |   â”œâ”€â”€ 1.2.6.txt
|   |   â”œâ”€â”€ 1.2.7.txt
|   |   â”œâ”€â”€ 1.2.txt
|   |   â”œâ”€â”€ 1.3.1.txt
|   |   â”œâ”€â”€ 1.3.2.txt
|   |   â”œâ”€â”€ 1.3.3.txt
|   |   â”œâ”€â”€ 1.3.4.txt
|   |   â”œâ”€â”€ 1.3.5.txt
|   |   â”œâ”€â”€ 1.3.6.txt
|   |   â”œâ”€â”€ 1.3.7.txt
|   |   â”œâ”€â”€ 1.3.txt
|   |   â”œâ”€â”€ 1.4.1.txt
|   |   â”œâ”€â”€ 1.4.10.txt
|   |   â”œâ”€â”€ 1.4.11.txt
|   |   â”œâ”€â”€ 1.4.12.txt
|   |   â”œâ”€â”€ 1.4.13.txt
|   |   â”œâ”€â”€ 1.4.14.txt
|   |   â”œâ”€â”€ 1.4.15.txt
|   |   â”œâ”€â”€ 1.4.16.txt
|   |   â”œâ”€â”€ 1.4.17.txt
|   |   â”œâ”€â”€ 1.4.18.txt
|   |   â”œâ”€â”€ 1.4.19.txt
|   |   â”œâ”€â”€ 1.4.2.txt
|   |   â”œâ”€â”€ 1.4.20.txt
|   |   â”œâ”€â”€ 1.4.21.txt
|   |   â”œâ”€â”€ 1.4.22.txt
|   |   â”œâ”€â”€ 1.4.3.txt
|   |   â”œâ”€â”€ 1.4.4.txt
|   |   â”œâ”€â”€ 1.4.5.txt
|   |   â”œâ”€â”€ 1.4.6.txt
|   |   â”œâ”€â”€ 1.4.7.txt
|   |   â”œâ”€â”€ 1.4.8.txt
|   |   â”œâ”€â”€ 1.4.9.txt
|   |   â”œâ”€â”€ 1.4.txt
|   |   â”œâ”€â”€ 1.5.1.txt
|   |   â”œâ”€â”€ 1.5.10.txt
|   |   â”œâ”€â”€ 1.5.11.txt
|   |   â”œâ”€â”€ 1.5.12.txt
|   |   â”œâ”€â”€ 1.5.2.txt
|   |   â”œâ”€â”€ 1.5.3.txt
|   |   â”œâ”€â”€ 1.5.4.txt
|   |   â”œâ”€â”€ 1.5.5.txt
|   |   â”œâ”€â”€ 1.5.6.txt
|   |   â”œâ”€â”€ 1.5.7.txt
|   |   â”œâ”€â”€ 1.5.8.txt
|   |   â”œâ”€â”€ 1.5.9.txt
|   |   â”œâ”€â”€ 1.5.txt
|   |   â”œâ”€â”€ 1.6.1.txt
|   |   â”œâ”€â”€ 1.6.10.txt
|   |   â”œâ”€â”€ 1.6.11.txt
|   |   â”œâ”€â”€ 1.6.2.txt
|   |   â”œâ”€â”€ 1.6.3.txt
|   |   â”œâ”€â”€ 1.6.4.txt
|   |   â”œâ”€â”€ 1.6.5.txt
|   |   â”œâ”€â”€ 1.6.6.txt
|   |   â”œâ”€â”€ 1.6.7.txt
|   |   â”œâ”€â”€ 1.6.8.txt
|   |   â”œâ”€â”€ 1.6.9.txt
|   |   â”œâ”€â”€ 1.6.txt
|   |   â”œâ”€â”€ 1.7.1.txt
|   |   â”œâ”€â”€ 1.7.10.txt
|   |   â”œâ”€â”€ 1.7.11.txt
|   |   â”œâ”€â”€ 1.7.2.txt
|   |   â”œâ”€â”€ 1.7.3.txt
|   |   â”œâ”€â”€ 1.7.4.txt
|   |   â”œâ”€â”€ 1.7.5.txt
|   |   â”œâ”€â”€ 1.7.6.txt
|   |   â”œâ”€â”€ 1.7.7.txt
|   |   â”œâ”€â”€ 1.7.8.txt
|   |   â”œâ”€â”€ 1.7.9.txt
|   |   â”œâ”€â”€ 1.7.txt
|   |   â”œâ”€â”€ 1.8.1.txt
|   |   â”œâ”€â”€ 1.8.10.txt
|   |   â”œâ”€â”€ 1.8.11.txt
|   |   â”œâ”€â”€ 1.8.12.txt
|   |   â”œâ”€â”€ 1.8.13.txt
|   |   â”œâ”€â”€ 1.8.14.txt
|   |   â”œâ”€â”€ 1.8.15.txt
|   |   â”œâ”€â”€ 1.8.16.txt
|   |   â”œâ”€â”€ 1.8.17.txt
|   |   â”œâ”€â”€ 1.8.18.txt
|   |   â”œâ”€â”€ 1.8.19.txt
|   |   â”œâ”€â”€ 1.8.2.txt
|   |   â”œâ”€â”€ 1.8.3.txt
|   |   â”œâ”€â”€ 1.8.4.txt
|   |   â”œâ”€â”€ 1.8.5.txt
|   |   â”œâ”€â”€ 1.8.6.txt
|   |   â”œâ”€â”€ 1.8.7.txt
|   |   â”œâ”€â”€ 1.8.8.txt
|   |   â”œâ”€â”€ 1.8.9.txt
|   |   â”œâ”€â”€ 1.8.txt
|   |   â”œâ”€â”€ 1.9.1.txt
|   |   â”œâ”€â”€ 1.9.10.txt
|   |   â”œâ”€â”€ 1.9.11.txt
|   |   â”œâ”€â”€ 1.9.12.txt
|   |   â”œâ”€â”€ 1.9.13.txt
|   |   â”œâ”€â”€ 1.9.2.txt
|   |   â”œâ”€â”€ 1.9.3.txt
|   |   â”œâ”€â”€ 1.9.4.txt
|   |   â”œâ”€â”€ 1.9.5.txt
|   |   â”œâ”€â”€ 1.9.6.txt
|   |   â”œâ”€â”€ 1.9.7.txt
|   |   â”œâ”€â”€ 1.9.8.txt
|   |   â”œâ”€â”€ 1.9.9.txt
|   |   â”œâ”€â”€ 1.9.txt
|   |   â”œâ”€â”€ 2.0.1.txt
|   |   â”œâ”€â”€ 2.0.10.txt
|   |   â”œâ”€â”€ 2.0.11.txt
|   |   â”œâ”€â”€ 2.0.12.txt
|   |   â”œâ”€â”€ 2.0.13.txt
|   |   â”œâ”€â”€ 2.0.2.txt
|   |   â”œâ”€â”€ 2.0.3.txt
|   |   â”œâ”€â”€ 2.0.4.txt
|   |   â”œâ”€â”€ 2.0.5.txt
|   |   â”œâ”€â”€ 2.0.6.txt
|   |   â”œâ”€â”€ 2.0.7.txt
|   |   â”œâ”€â”€ 2.0.8.txt
|   |   â”œâ”€â”€ 2.0.9.txt
|   |   â”œâ”€â”€ 2.0.txt
|   |   â”œâ”€â”€ 2.1.1.txt
|   |   â”œâ”€â”€ 2.1.10.txt
|   |   â”œâ”€â”€ 2.1.11.txt
|   |   â”œâ”€â”€ 2.1.12.txt
|   |   â”œâ”€â”€ 2.1.13.txt
|   |   â”œâ”€â”€ 2.1.14.txt
|   |   â”œâ”€â”€ 2.1.15.txt
|   |   â”œâ”€â”€ 2.1.2.txt
|   |   â”œâ”€â”€ 2.1.3.txt
|   |   â”œâ”€â”€ 2.1.4.txt
|   |   â”œâ”€â”€ 2.1.5.txt
|   |   â”œâ”€â”€ 2.1.6.txt
|   |   â”œâ”€â”€ 2.1.7.txt
|   |   â”œâ”€â”€ 2.1.8.txt
|   |   â”œâ”€â”€ 2.1.9.txt
|   |   â”œâ”€â”€ 2.1.txt
|   |   â”œâ”€â”€ 2.2.1.txt
|   |   â”œâ”€â”€ 2.2.10.txt
|   |   â”œâ”€â”€ 2.2.11.txt
|   |   â”œâ”€â”€ 2.2.12.txt
|   |   â”œâ”€â”€ 2.2.13.txt
|   |   â”œâ”€â”€ 2.2.14.txt
|   |   â”œâ”€â”€ 2.2.2.txt
|   |   â”œâ”€â”€ 2.2.3.txt
|   |   â”œâ”€â”€ 2.2.4.txt
|   |   â”œâ”€â”€ 2.2.5.txt
|   |   â”œâ”€â”€ 2.2.6.txt
|   |   â”œâ”€â”€ 2.2.7.txt
|   |   â”œâ”€â”€ 2.2.8.txt
|   |   â”œâ”€â”€ 2.2.9.txt
|   |   â”œâ”€â”€ 2.2.txt
|   |   â”œâ”€â”€ 3.0.1.txt
|   |   â”œâ”€â”€ 3.0.2.txt
|   |   â”œâ”€â”€ 3.0.3.txt
|   |   â”œâ”€â”€ 3.0.4.txt
|   |   â”œâ”€â”€ 3.0.5.txt
|   |   â”œâ”€â”€ 3.0.6.txt
|   |   â”œâ”€â”€ 3.0.7.txt
|   |   â”œâ”€â”€ 3.0.8.txt
|   |   â”œâ”€â”€ 3.0.txt
|   |   â”œâ”€â”€ 3.1.txt
|   |   â”œâ”€â”€ 3.2.txt
|   |   â”œâ”€â”€ index.txt
|   |   â””â”€â”€ security.txt
|   â””â”€â”€ topics
|       â”œâ”€â”€ async.txt
|       â”œâ”€â”€ auth
|       |   â”œâ”€â”€ customizing.txt
|       |   â”œâ”€â”€ default.txt
|       |   â”œâ”€â”€ index.txt
|       |   â””â”€â”€ passwords.txt
|       â”œâ”€â”€ cache.txt
|       â”œâ”€â”€ checks.txt
|       â”œâ”€â”€ class-based-views
|       |   â”œâ”€â”€ generic-display.txt
|       |   â”œâ”€â”€ generic-editing.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ intro.txt
|       |   â””â”€â”€ mixins.txt
|       â”œâ”€â”€ conditional-view-processing.txt
|       â”œâ”€â”€ db
|       |   â”œâ”€â”€ aggregation.txt
|       |   â”œâ”€â”€ examples
|       |   |   â”œâ”€â”€ index.txt
|       |   |   â”œâ”€â”€ many_to_many.txt
|       |   |   â”œâ”€â”€ many_to_one.txt
|       |   |   â””â”€â”€ one_to_one.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ instrumentation.txt
|       |   â”œâ”€â”€ managers.txt
|       |   â”œâ”€â”€ models.txt
|       |   â”œâ”€â”€ multi-db.txt
|       |   â”œâ”€â”€ optimization.txt
|       |   â”œâ”€â”€ queries.txt
|       |   â”œâ”€â”€ search.txt
|       |   â”œâ”€â”€ sql.txt
|       |   â”œâ”€â”€ tablespaces.txt
|       |   â””â”€â”€ transactions.txt
|       â”œâ”€â”€ email.txt
|       â”œâ”€â”€ external-packages.txt
|       â”œâ”€â”€ files.txt
|       â”œâ”€â”€ forms
|       |   â”œâ”€â”€ formsets.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ media.txt
|       |   â””â”€â”€ modelforms.txt
|       â”œâ”€â”€ http
|       |   â”œâ”€â”€ _images
|       |   â”œâ”€â”€ decorators.txt
|       |   â”œâ”€â”€ file-uploads.txt
|       |   â”œâ”€â”€ generic-views.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ middleware.txt
|       |   â”œâ”€â”€ sessions.txt
|       |   â”œâ”€â”€ shortcuts.txt
|       |   â”œâ”€â”€ urls.txt
|       |   â””â”€â”€ views.txt
|       â”œâ”€â”€ i18n
|       |   â”œâ”€â”€ formatting.txt
|       |   â”œâ”€â”€ index.txt
|       |   â”œâ”€â”€ timezones.txt
|       |   â””â”€â”€ translation.txt
|       â”œâ”€â”€ index.txt
|       â”œâ”€â”€ install.txt
|       â”œâ”€â”€ logging.txt
|       â”œâ”€â”€ migrations.txt
|       â”œâ”€â”€ pagination.txt
|       â”œâ”€â”€ performance.txt
|       â”œâ”€â”€ security.txt
|       â”œâ”€â”€ serialization.txt
|       â”œâ”€â”€ settings.txt
|       â”œâ”€â”€ signals.txt
|       â”œâ”€â”€ signing.txt
|       â”œâ”€â”€ templates.txt
|       â””â”€â”€ testing
|           â”œâ”€â”€ _images
|           â”œâ”€â”€ advanced.txt
|           â”œâ”€â”€ index.txt
|           â”œâ”€â”€ overview.txt
|           â””â”€â”€ tools.txt
â”œâ”€â”€ extras
â”œâ”€â”€ js_tests
|   â”œâ”€â”€ admin
|   |   â”œâ”€â”€ DateTimeShortcuts.test.js
|   |   â”œâ”€â”€ SelectBox.test.js
|   |   â”œâ”€â”€ SelectFilter2.test.js
|   |   â”œâ”€â”€ URLify.test.js
|   |   â”œâ”€â”€ actions.test.js
|   |   â”œâ”€â”€ core.test.js
|   |   â”œâ”€â”€ inlines.test.js
|   |   â””â”€â”€ jsi18n-mocks.test.js
|   â””â”€â”€ gis
|       â””â”€â”€ mapwidget.test.js
â”œâ”€â”€ scripts
|   â”œâ”€â”€ manage_translations.py
|   â””â”€â”€ rpm-install.sh
â”œâ”€â”€ setup.py
â””â”€â”€ tests
    â”œâ”€â”€ README.rst
    â”œâ”€â”€ absolute_url_overrides
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_autodiscover
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_changelist
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_date_hierarchy.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_checks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_custom_urls
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_default_site
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps.py
    |   â”œâ”€â”€ sites.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_docs
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ evilfile.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ namespace_urls.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_utils.py
    |   â”œâ”€â”€ test_views.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ admin_filters
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_inlines
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_registration
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ admin_scripts
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ another_app_waiting_migration
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_raising_messages
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_raising_warning
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_waiting_migration
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app_with_import
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ broken_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ complex_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ admin
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ foo.py
    |   |   â”œâ”€â”€ management
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ commands
    |   |   â””â”€â”€ models
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ bar.py
    |   |       â””â”€â”€ foo.py
    |   â”œâ”€â”€ configured_dynamic_settings_manage.py
    |   â”œâ”€â”€ configured_settings_manage.py
    |   â”œâ”€â”€ custom_templates
    |   |   â”œâ”€â”€ app_template
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ api.py
    |   |   â””â”€â”€ project_template
    |   |       â”œâ”€â”€ additional_dir
    |   |       â”œâ”€â”€ project_name
    |   |       â””â”€â”€ ticket-18091-non-ascii-template.txt
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ app_command.py
    |   |       â”œâ”€â”€ base_command.py
    |   |       â”œâ”€â”€ custom_startproject.py
    |   |       â”œâ”€â”€ label_command.py
    |   |       â””â”€â”€ noargs_command.py
    |   â”œâ”€â”€ simple_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ management
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ commands
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ test_django_admin_py.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_utils
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_logentry.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ admin_views
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ custom_has_permission_admin.py
    |   â”œâ”€â”€ customadmin.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ admin
    |   |       â””â”€â”€ admin_views
    |   â”œâ”€â”€ test_actions.py
    |   â”œâ”€â”€ test_adminsite.py
    |   â”œâ”€â”€ test_autocomplete_view.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_history_view.py
    |   â”œâ”€â”€ test_multidb.py
    |   â”œâ”€â”€ test_nav_sidebar.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ admin_widgets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_autocomplete_widget.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ widgetadmin.py
    â”œâ”€â”€ aggregation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_filter_argument.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ aggregation_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ annotations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ app_loading
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ not_installed
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ apps
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps.py
    |   â”œâ”€â”€ default_config_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ apps.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ namespace_package_base
    |   |   â””â”€â”€ nsapp
    |   |       â””â”€â”€ apps.py
    |   â”œâ”€â”€ namespace_package_other_base
    |   |   â””â”€â”€ nsapp
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ asgi
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ project
    |   |   â””â”€â”€ static
    |   |       â””â”€â”€ file.txt
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ async
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ auth_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ backend_alias.py
    |   â”œâ”€â”€ client.py
    |   â”œâ”€â”€ common-passwords-custom.txt
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ custom_permissions.py
    |   |   â”œâ”€â”€ custom_user.py
    |   |   â”œâ”€â”€ invalid_models.py
    |   |   â”œâ”€â”€ is_active.py
    |   |   â”œâ”€â”€ minimal.py
    |   |   â”œâ”€â”€ no_password.py
    |   |   â”œâ”€â”€ proxy.py
    |   |   â”œâ”€â”€ uuid_pk.py
    |   |   â”œâ”€â”€ with_custom_email_field.py
    |   |   â”œâ”€â”€ with_foreign_key.py
    |   |   â”œâ”€â”€ with_integer_username.py
    |   |   â”œâ”€â”€ with_last_login_attr.py
    |   |   â””â”€â”€ with_many_to_many.py
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ context_processors
    |   |   â””â”€â”€ registration
    |   |       â””â”€â”€ password_reset_subject.txt
    |   â”œâ”€â”€ test_admin_multidb.py
    |   â”œâ”€â”€ test_auth_backends.py
    |   â”œâ”€â”€ test_basic.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_context_processors.py
    |   â”œâ”€â”€ test_decorators.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_handlers.py
    |   â”œâ”€â”€ test_hashers.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_migrations.py
    |   â”œâ”€â”€ test_mixins.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_password_reset_timeout_days.py
    |   â”œâ”€â”€ test_remote_user.py
    |   â”œâ”€â”€ test_signals.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ test_tokens.py
    |   â”œâ”€â”€ test_validators.py
    |   â”œâ”€â”€ test_views.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_admin.py
    |   â””â”€â”€ urls_custom_user_admin.py
    â”œâ”€â”€ backends
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_base.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_features.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ test_schema.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ mysql
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_features.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â”œâ”€â”€ test_schema.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ oracle
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ postgresql
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â”œâ”€â”€ test_server_side_cursors.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ sqlite
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_creation.py
    |   |   â”œâ”€â”€ test_introspection.py
    |   |   â”œâ”€â”€ test_operations.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ test_ddl_references.py
    |   â”œâ”€â”€ test_utils.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ base
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ models.py
    â”œâ”€â”€ bash_completion
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ test_command.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ basic
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ builtin_server
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ bulk_create
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ cache
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ closeable_cache.py
    |   â”œâ”€â”€ liberal_backend.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ check_framework
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_async_checks.py
    |   â”œâ”€â”€ test_caches.py
    |   â”œâ”€â”€ test_database.py
    |   â”œâ”€â”€ test_model_checks.py
    |   â”œâ”€â”€ test_model_field_deprecation.py
    |   â”œâ”€â”€ test_multi_db.py
    |   â”œâ”€â”€ test_security.py
    |   â”œâ”€â”€ test_templates.py
    |   â”œâ”€â”€ test_translation.py
    |   â”œâ”€â”€ test_urls.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ bad_error_handlers.py
    |       â”œâ”€â”€ bad_error_handlers_invalid_path.py
    |       â”œâ”€â”€ beginning_with_slash.py
    |       â”œâ”€â”€ contains_tuple.py
    |       â”œâ”€â”€ good_error_handlers.py
    |       â”œâ”€â”€ include_contains_tuple.py
    |       â”œâ”€â”€ include_with_dollar.py
    |       â”œâ”€â”€ name_with_colon.py
    |       â”œâ”€â”€ no_warnings.py
    |       â”œâ”€â”€ no_warnings_i18n.py
    |       â”œâ”€â”€ non_unique_namespaces.py
    |       â”œâ”€â”€ path_compatibility
    |       |   â”œâ”€â”€ __init__.py
    |       |   â”œâ”€â”€ beginning_with_caret.py
    |       |   â”œâ”€â”€ contains_re_named_group.py
    |       |   â””â”€â”€ ending_with_dollar.py
    |       â”œâ”€â”€ unique_namespaces.py
    |       â””â”€â”€ warning_in_include.py
    â”œâ”€â”€ conditional_processing
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ constraints
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ contenttypes_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ operations_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_rename_foo.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_fields.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_order_with_respect_to.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ context_processors
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ context_processors
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ csrf_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ csrf_token_error_handler_urls.py
    |   â”œâ”€â”€ test_context_processor.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ custom_columns
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_lookups
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_managers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_methods
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ custom_migration_operations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ more_operations.py
    |   â””â”€â”€ operations.py
    â”œâ”€â”€ custom_pk
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ datatypes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dates
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ datetimes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ db_functions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ comparison
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_cast.py
    |   |   â”œâ”€â”€ test_coalesce.py
    |   |   â”œâ”€â”€ test_greatest.py
    |   |   â”œâ”€â”€ test_least.py
    |   |   â””â”€â”€ test_nullif.py
    |   â”œâ”€â”€ datetime
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_extract_trunc.py
    |   |   â””â”€â”€ test_now.py
    |   â”œâ”€â”€ math
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_abs.py
    |   |   â”œâ”€â”€ test_acos.py
    |   |   â”œâ”€â”€ test_asin.py
    |   |   â”œâ”€â”€ test_atan.py
    |   |   â”œâ”€â”€ test_atan2.py
    |   |   â”œâ”€â”€ test_ceil.py
    |   |   â”œâ”€â”€ test_cos.py
    |   |   â”œâ”€â”€ test_cot.py
    |   |   â”œâ”€â”€ test_degrees.py
    |   |   â”œâ”€â”€ test_exp.py
    |   |   â”œâ”€â”€ test_floor.py
    |   |   â”œâ”€â”€ test_ln.py
    |   |   â”œâ”€â”€ test_log.py
    |   |   â”œâ”€â”€ test_mod.py
    |   |   â”œâ”€â”€ test_pi.py
    |   |   â”œâ”€â”€ test_power.py
    |   |   â”œâ”€â”€ test_radians.py
    |   |   â”œâ”€â”€ test_round.py
    |   |   â”œâ”€â”€ test_sign.py
    |   |   â”œâ”€â”€ test_sin.py
    |   |   â”œâ”€â”€ test_sqrt.py
    |   |   â””â”€â”€ test_tan.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   â”œâ”€â”€ 0002_create_test_models.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ text
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_chr.py
    |   |   â”œâ”€â”€ test_concat.py
    |   |   â”œâ”€â”€ test_left.py
    |   |   â”œâ”€â”€ test_length.py
    |   |   â”œâ”€â”€ test_lower.py
    |   |   â”œâ”€â”€ test_md5.py
    |   |   â”œâ”€â”€ test_ord.py
    |   |   â”œâ”€â”€ test_pad.py
    |   |   â”œâ”€â”€ test_repeat.py
    |   |   â”œâ”€â”€ test_replace.py
    |   |   â”œâ”€â”€ test_reverse.py
    |   |   â”œâ”€â”€ test_right.py
    |   |   â”œâ”€â”€ test_sha1.py
    |   |   â”œâ”€â”€ test_sha224.py
    |   |   â”œâ”€â”€ test_sha256.py
    |   |   â”œâ”€â”€ test_sha384.py
    |   |   â”œâ”€â”€ test_sha512.py
    |   |   â”œâ”€â”€ test_strindex.py
    |   |   â”œâ”€â”€ test_substr.py
    |   |   â”œâ”€â”€ test_trim.py
    |   |   â””â”€â”€ test_upper.py
    |   â””â”€â”€ window
    |       â”œâ”€â”€ __init__.py
    |       â””â”€â”€ test_validation.py
    â”œâ”€â”€ db_typecasts
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ db_utils
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dbshell
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_mysql.py
    |   â”œâ”€â”€ test_oracle.py
    |   â”œâ”€â”€ test_postgresql.py
    |   â”œâ”€â”€ test_sqlite.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ decorators
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ defer
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ defer_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ delete
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ delete_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ deprecation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_middleware_mixin.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ dispatch
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ distinct_on_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ empty
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ no_models
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ empty_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ test_commands.py
    â”œâ”€â”€ expressions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â”œâ”€â”€ test_queryset_values.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ expressions_case
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ expressions_window
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ extra_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_deconstruction
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_defaults
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ field_subclassing
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ file_storage
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_generate_filename.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ file_uploads
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ uploadhandler.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ files
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ filtered_relation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures_model_package
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ fixtures_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ fixtures_1
    |   |   â””â”€â”€ inner
    |   â”œâ”€â”€ fixtures_2
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ flatpages_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ absolute_urls.py
    |   â”œâ”€â”€ no_slash_urls.py
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ flatpages
    |   |   â””â”€â”€ registration
    |   â”œâ”€â”€ test_csrf.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_sitemaps.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ force_insert_update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ foreign_object
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ article.py
    |   |   â”œâ”€â”€ customers.py
    |   |   â”œâ”€â”€ empty_join.py
    |   |   â””â”€â”€ person.py
    |   â”œâ”€â”€ test_agnostic_order_trimjoin.py
    |   â”œâ”€â”€ test_empty_join.py
    |   â”œâ”€â”€ test_forms.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ forms_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ field_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ filepathfield_test_dir
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ a.py
    |   |   |   â”œâ”€â”€ ab.py
    |   |   |   â”œâ”€â”€ b.py
    |   |   |   â”œâ”€â”€ c
    |   |   |   â”œâ”€â”€ h
    |   |   |   â””â”€â”€ j
    |   |   â”œâ”€â”€ test_base.py
    |   |   â”œâ”€â”€ test_booleanfield.py
    |   |   â”œâ”€â”€ test_charfield.py
    |   |   â”œâ”€â”€ test_choicefield.py
    |   |   â”œâ”€â”€ test_combofield.py
    |   |   â”œâ”€â”€ test_datefield.py
    |   |   â”œâ”€â”€ test_datetimefield.py
    |   |   â”œâ”€â”€ test_decimalfield.py
    |   |   â”œâ”€â”€ test_durationfield.py
    |   |   â”œâ”€â”€ test_emailfield.py
    |   |   â”œâ”€â”€ test_filefield.py
    |   |   â”œâ”€â”€ test_filepathfield.py
    |   |   â”œâ”€â”€ test_floatfield.py
    |   |   â”œâ”€â”€ test_genericipaddressfield.py
    |   |   â”œâ”€â”€ test_imagefield.py
    |   |   â”œâ”€â”€ test_integerfield.py
    |   |   â”œâ”€â”€ test_jsonfield.py
    |   |   â”œâ”€â”€ test_multiplechoicefield.py
    |   |   â”œâ”€â”€ test_multivaluefield.py
    |   |   â”œâ”€â”€ test_nullbooleanfield.py
    |   |   â”œâ”€â”€ test_regexfield.py
    |   |   â”œâ”€â”€ test_slugfield.py
    |   |   â”œâ”€â”€ test_splitdatetimefield.py
    |   |   â”œâ”€â”€ test_timefield.py
    |   |   â”œâ”€â”€ test_typedchoicefield.py
    |   |   â”œâ”€â”€ test_typedmultiplechoicefield.py
    |   |   â”œâ”€â”€ test_urlfield.py
    |   |   â””â”€â”€ test_uuidfield.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ forms_tests
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ forms_tests
    |   â”œâ”€â”€ tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ filepath_test_files
    |   |   |   â”œâ”€â”€ directory
    |   |   |   â””â”€â”€ real-text-file.txt
    |   |   â”œâ”€â”€ test_error_messages.py
    |   |   â”œâ”€â”€ test_forms.py
    |   |   â”œâ”€â”€ test_formsets.py
    |   |   â”œâ”€â”€ test_i18n.py
    |   |   â”œâ”€â”€ test_input_formats.py
    |   |   â”œâ”€â”€ test_media.py
    |   |   â”œâ”€â”€ test_renderers.py
    |   |   â”œâ”€â”€ test_utils.py
    |   |   â”œâ”€â”€ test_validators.py
    |   |   â”œâ”€â”€ test_widgets.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ views.py
    |   â””â”€â”€ widget_tests
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ base.py
    |       â”œâ”€â”€ test_checkboxinput.py
    |       â”œâ”€â”€ test_checkboxselectmultiple.py
    |       â”œâ”€â”€ test_clearablefileinput.py
    |       â”œâ”€â”€ test_dateinput.py
    |       â”œâ”€â”€ test_datetimeinput.py
    |       â”œâ”€â”€ test_fileinput.py
    |       â”œâ”€â”€ test_hiddeninput.py
    |       â”œâ”€â”€ test_input.py
    |       â”œâ”€â”€ test_multiplehiddeninput.py
    |       â”œâ”€â”€ test_multiwidget.py
    |       â”œâ”€â”€ test_nullbooleanselect.py
    |       â”œâ”€â”€ test_numberinput.py
    |       â”œâ”€â”€ test_passwordinput.py
    |       â”œâ”€â”€ test_radioselect.py
    |       â”œâ”€â”€ test_select.py
    |       â”œâ”€â”€ test_selectdatewidget.py
    |       â”œâ”€â”€ test_selectmultiple.py
    |       â”œâ”€â”€ test_splitdatetimewidget.py
    |       â”œâ”€â”€ test_splithiddendatetimewidget.py
    |       â”œâ”€â”€ test_textarea.py
    |       â”œâ”€â”€ test_textinput.py
    |       â”œâ”€â”€ test_timeinput.py
    |       â””â”€â”€ test_widget.py
    â”œâ”€â”€ from_db_value
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_inline_admin
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ generic_relations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_forms.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_relations_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ generic_views
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ generic_views
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ generic_views
    |   |   |   â””â”€â”€ robots.txt
    |   |   â””â”€â”€ registration
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_dates.py
    |   â”œâ”€â”€ test_detail.py
    |   â”œâ”€â”€ test_edit.py
    |   â”œâ”€â”€ test_list.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ get_earliest_or_latest
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ get_object_or_404
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ get_or_create
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ gis_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ data
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ ch-city
    |   |   â”œâ”€â”€ cities
    |   |   â”œâ”€â”€ counties
    |   |   â”œâ”€â”€ gas_lines
    |   |   â”œâ”€â”€ has_nulls
    |   |   â”œâ”€â”€ interstates
    |   |   â”œâ”€â”€ invalid
    |   |   â”œâ”€â”€ rasters
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ raster.numpy.txt
    |   |   |   â””â”€â”€ textrasters.py
    |   |   â”œâ”€â”€ test_point
    |   |   â”œâ”€â”€ test_poly
    |   |   â””â”€â”€ test_vrt
    |   â”œâ”€â”€ distapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ gdal_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_driver.py
    |   |   â”œâ”€â”€ test_ds.py
    |   |   â”œâ”€â”€ test_envelope.py
    |   |   â”œâ”€â”€ test_geom.py
    |   |   â”œâ”€â”€ test_raster.py
    |   |   â”œâ”€â”€ test_srs.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ geo3d
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ views.py
    |   â”œâ”€â”€ geoadmin
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ admin.py
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls.py
    |   â”œâ”€â”€ geoapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ feeds.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â”œâ”€â”€ sitemaps.py
    |   |   â”œâ”€â”€ test_expressions.py
    |   |   â”œâ”€â”€ test_feeds.py
    |   |   â”œâ”€â”€ test_functions.py
    |   |   â”œâ”€â”€ test_indexes.py
    |   |   â”œâ”€â”€ test_regress.py
    |   |   â”œâ”€â”€ test_serializers.py
    |   |   â”œâ”€â”€ test_sitemaps.py
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls.py
    |   â”œâ”€â”€ geogapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ geos_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_coordseq.py
    |   |   â”œâ”€â”€ test_geos.py
    |   |   â”œâ”€â”€ test_geos_mutation.py
    |   |   â”œâ”€â”€ test_io.py
    |   |   â””â”€â”€ test_mutable_list.py
    |   â”œâ”€â”€ gis_migrations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   |   â”œâ”€â”€ 0002_create_models.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_commands.py
    |   |   â””â”€â”€ test_operations.py
    |   â”œâ”€â”€ inspectapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ layermap
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ maps
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ rasterapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ migrations
    |   |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   |   â”œâ”€â”€ 0002_rastermodels.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ test_rasterfield.py
    |   â”œâ”€â”€ relatedapp
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ fixtures
    |   |   â”œâ”€â”€ models.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ test_data.py
    |   â”œâ”€â”€ test_fields.py
    |   â”œâ”€â”€ test_geoforms.py
    |   â”œâ”€â”€ test_geoip2.py
    |   â”œâ”€â”€ test_gis_tests_utils.py
    |   â”œâ”€â”€ test_measure.py
    |   â”œâ”€â”€ test_ptr.py
    |   â”œâ”€â”€ test_spatialrefsys.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ handlers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ test_exception.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ tests_custom_error_handlers.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ httpwrappers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ abc.txt
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ humanize_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ i18n
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ commands
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app_with_locale
    |   |   |   â””â”€â”€ locale
    |   |   â”œâ”€â”€ ignore_dir
    |   |   â”œâ”€â”€ javascript.js
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â”œâ”€â”€ es_AR
    |   |   |   â”œâ”€â”€ fr
    |   |   |   â”œâ”€â”€ hr
    |   |   |   â”œâ”€â”€ ja
    |   |   |   â”œâ”€â”€ ko
    |   |   |   â”œâ”€â”€ pt_BR
    |   |   |   â”œâ”€â”€ ru
    |   |   |   â””â”€â”€ xxx
    |   |   â”œâ”€â”€ media_root
    |   |   â”œâ”€â”€ someapp
    |   |   |   â””â”€â”€ static
    |   |   â”œâ”€â”€ static
    |   |   |   â””â”€â”€ javascript_ignored.js
    |   |   â””â”€â”€ templates
    |   |       â””â”€â”€ subdir
    |   â”œâ”€â”€ contenttypes
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â””â”€â”€ fr
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ exclude
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ canned_locale
    |   |       â”œâ”€â”€ en
    |   |       â”œâ”€â”€ fr
    |   |       â””â”€â”€ it
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ loading
    |   |   â”œâ”€â”€ en
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_AU
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_CA
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â””â”€â”€ en_NZ
    |   |       â””â”€â”€ LC_MESSAGES
    |   â”œâ”€â”€ loading_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ apps.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ en
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ other
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ other2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ de
    |   â”œâ”€â”€ patterns
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ locale
    |   |   |   â”œâ”€â”€ en
    |   |   |   â”œâ”€â”€ nl
    |   |   |   â””â”€â”€ pt_BR
    |   |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ tests.py
    |   |   â””â”€â”€ urls
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ default.py
    |   |       â”œâ”€â”€ disabled.py
    |   |       â”œâ”€â”€ included.py
    |   |       â”œâ”€â”€ namespace.py
    |   |       â”œâ”€â”€ path_unused.py
    |   |       â”œâ”€â”€ wrong.py
    |   |       â””â”€â”€ wrong_namespace.py
    |   â”œâ”€â”€ project_dir
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app_no_locale
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ app_with_locale
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ locale
    |   |   |   â””â”€â”€ models.py
    |   |   â””â”€â”€ project_locale
    |   â”œâ”€â”€ resolution
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ de
    |   â”œâ”€â”€ sampleproject
    |   |   â”œâ”€â”€ locale
    |   |   |   â””â”€â”€ fr
    |   |   â”œâ”€â”€ manage.py
    |   |   â”œâ”€â”€ sampleproject
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ settings.py
    |   |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ update_catalogs.py
    |   â”œâ”€â”€ territorial_fallback
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ de_DE
    |   â”œâ”€â”€ test_compilation.py
    |   â”œâ”€â”€ test_extraction.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_percents.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_default_unprefixed.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ import_error_package
    |   â””â”€â”€ __init__.py
    â”œâ”€â”€ indexes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ inline_formsets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ inspectdb
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ introspection
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ invalid_models_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_backend_specific.py
    |   â”œâ”€â”€ test_custom_fields.py
    |   â”œâ”€â”€ test_deprecated_fields.py
    |   â”œâ”€â”€ test_models.py
    |   â”œâ”€â”€ test_ordinary_fields.py
    |   â””â”€â”€ test_relative_fields.py
    â”œâ”€â”€ known_related_objects
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ logging_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ logconfig.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_i18n.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_decimalfield.py
    |   â”œâ”€â”€ test_lookups.py
    |   â”œâ”€â”€ test_timefield.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_and_m2o
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_intermediary
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_multiple
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_recursive
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_through
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2m_through_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_multitable.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ m2o_recursive
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ mail
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ attachments
    |   |   â”œâ”€â”€ file.txt
    |   |   â””â”€â”€ file_png.txt
    |   â”œâ”€â”€ custombackend.py
    |   â”œâ”€â”€ test_sendtestemail.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ managers_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_many
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_one
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ many_to_one_null
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ max_lengths
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ messages_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base.py
    |   â”œâ”€â”€ test_api.py
    |   â”œâ”€â”€ test_cookie.py
    |   â”œâ”€â”€ test_fallback.py
    |   â”œâ”€â”€ test_middleware.py
    |   â”œâ”€â”€ test_mixins.py
    |   â”œâ”€â”€ test_session.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ middleware
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ cond_get_urls.py
    |   â”œâ”€â”€ extra_urls.py
    |   â”œâ”€â”€ test_security.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ middleware_exceptions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ middleware.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ migrate_signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ custom_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ migration_test_data_persistence
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_add_book.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ migrations
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ deprecated_field_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_remove_ipaddressfield_ip.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ faulty_migrations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ file.py
    |   |   â””â”€â”€ namespace
    |   |       â””â”€â”€ foo
    |   â”œâ”€â”€ migrations_test_apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ alter_fk
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ author_app
    |   |   |   â””â”€â”€ book_app
    |   |   â”œâ”€â”€ conflicting_app_with_dependencies
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ lookuperror_a
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ lookuperror_b
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ lookuperror_c
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ migrated_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ migrated_unapplied_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ mutate_state_a
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ mutate_state_b
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ migrations
    |   |   â”œâ”€â”€ normal
    |   |   |   â””â”€â”€ __init__.py
    |   |   â”œâ”€â”€ unmigrated_app
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unmigrated_app_simple
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unmigrated_app_syncdb
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ unspecified_app_with_conflict
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ migrations
    |   |   |   â””â”€â”€ models.py
    |   |   â”œâ”€â”€ with_package_model
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ models
    |   |   â””â”€â”€ without_init_file
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ migrations
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ related_models_app
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ routers.py
    |   â”œâ”€â”€ test_add_many_to_many_field_initial
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_auto_now_add
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_autodetector.py
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_commands.py
    |   â”œâ”€â”€ test_deprecated_fields.py
    |   â”œâ”€â”€ test_exceptions.py
    |   â”œâ”€â”€ test_executor.py
    |   â”œâ”€â”€ test_fake_initial_case_insensitive
    |   |   â”œâ”€â”€ fake_initial
    |   |   |   â”œâ”€â”€ 0001_initial.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ initial
    |   |       â”œâ”€â”€ 0001_initial.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_graph.py
    |   â”œâ”€â”€ test_loader.py
    |   â”œâ”€â”€ test_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_atomic_operation
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_backwards_deps_1
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ 0002_second.py
    |   â”œâ”€â”€ test_migrations_bad_pyc
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_clashing_prefix
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ a.py
    |   |   â””â”€â”€ ab.py
    |   â”œâ”€â”€ test_migrations_conflict
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_conflicting_second.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_custom_user
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_empty
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_fake_split_initial
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_first
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ second.py
    |   |   â””â”€â”€ thefirst.py
    |   â”œâ”€â”€ test_migrations_initial_false
    |   |   â”œâ”€â”€ 0001_not_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_namespace_package
    |   |   â””â”€â”€ 0001_initial.py
    |   â”œâ”€â”€ test_migrations_no_ancestor
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_conflicting_second.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_changes
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_default
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_no_init
    |   â”œâ”€â”€ test_migrations_no_operations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_non_atomic
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_order
    |   |   â”œâ”€â”€ 0001.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_plan
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â”œâ”€â”€ 0004_fourth.py
    |   |   â”œâ”€â”€ 0005_fifth.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_private
    |   |   â”œâ”€â”€ .util.py
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ _util.py
    |   |   â””â”€â”€ ~util.py
    |   â”œâ”€â”€ test_migrations_run_before
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0001_squashed_0002.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_complex
    |   |   â”œâ”€â”€ 1_auto.py
    |   |   â”œâ”€â”€ 2_auto.py
    |   |   â”œâ”€â”€ 3_auto.py
    |   |   â”œâ”€â”€ 3_squashed_5.py
    |   |   â”œâ”€â”€ 4_auto.py
    |   |   â”œâ”€â”€ 5_auto.py
    |   |   â”œâ”€â”€ 6_auto.py
    |   |   â”œâ”€â”€ 7_auto.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_complex_multi_apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app1
    |   |   |   â”œâ”€â”€ 1_auto.py
    |   |   |   â”œâ”€â”€ 2_auto.py
    |   |   |   â”œâ”€â”€ 2_squashed_3.py
    |   |   |   â”œâ”€â”€ 3_auto.py
    |   |   |   â”œâ”€â”€ 4_auto.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ app2
    |   |       â”œâ”€â”€ 1_auto.py
    |   |       â”œâ”€â”€ 1_squashed_2.py
    |   |       â”œâ”€â”€ 2_auto.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_erroneous
    |   |   â”œâ”€â”€ 1_auto.py
    |   |   â”œâ”€â”€ 2_auto.py
    |   |   â”œâ”€â”€ 3_squashed_5.py
    |   |   â”œâ”€â”€ 6_auto.py
    |   |   â”œâ”€â”€ 7_auto.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_extra
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0001_squashed_0002.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â”œâ”€â”€ 0003_third.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_squashed_ref_squashed
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ app1
    |   |   |   â”œâ”€â”€ 1_auto.py
    |   |   |   â”œâ”€â”€ 2_auto.py
    |   |   |   â”œâ”€â”€ 2_squashed_3.py
    |   |   |   â”œâ”€â”€ 3_auto.py
    |   |   |   â”œâ”€â”€ 4_auto.py
    |   |   |   â””â”€â”€ __init__.py
    |   |   â””â”€â”€ app2
    |   |       â”œâ”€â”€ 1_auto.py
    |   |       â”œâ”€â”€ 1_squashed_2.py
    |   |       â”œâ”€â”€ 2_auto.py
    |   |       â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_unmigdep
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_multidb.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_optimizer.py
    |   â”œâ”€â”€ test_questioner.py
    |   â”œâ”€â”€ test_state.py
    |   â””â”€â”€ test_writer.py
    â”œâ”€â”€ migrations2
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_migrations_2
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ test_migrations_2_first
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_second.py
    |   |   â””â”€â”€ __init__.py
    |   â””â”€â”€ test_migrations_2_no_deps
    |       â”œâ”€â”€ 0001_initial.py
    |       â””â”€â”€ __init__.py
    â”œâ”€â”€ model_enums
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_autofield.py
    |   â”œâ”€â”€ test_binaryfield.py
    |   â”œâ”€â”€ test_booleanfield.py
    |   â”œâ”€â”€ test_charfield.py
    |   â”œâ”€â”€ test_datetimefield.py
    |   â”œâ”€â”€ test_decimalfield.py
    |   â”œâ”€â”€ test_durationfield.py
    |   â”œâ”€â”€ test_field_flags.py
    |   â”œâ”€â”€ test_filefield.py
    |   â”œâ”€â”€ test_filepathfield.py
    |   â”œâ”€â”€ test_floatfield.py
    |   â”œâ”€â”€ test_foreignkey.py
    |   â”œâ”€â”€ test_genericipaddressfield.py
    |   â”œâ”€â”€ test_imagefield.py
    |   â”œâ”€â”€ test_integerfield.py
    |   â”œâ”€â”€ test_jsonfield.py
    |   â”œâ”€â”€ test_manytomanyfield.py
    |   â”œâ”€â”€ test_promises.py
    |   â”œâ”€â”€ test_slugfield.py
    |   â”œâ”€â”€ test_textfield.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_forms
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_modelchoicefield.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_formsets
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_formsets_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_indexes
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_inheritance
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_abstract_inheritance.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_inheritance_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_meta
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ results.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_options
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ default_related_name.py
    |   |   â””â”€â”€ tablespaces.py
    |   â”œâ”€â”€ test_default_related_name.py
    |   â””â”€â”€ test_tablespaces.py
    â”œâ”€â”€ model_package
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ article.py
    |   |   â””â”€â”€ publication.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ model_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_pickle.py
    |   â”œâ”€â”€ test_state.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ modeladmin
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_actions.py
    |   â”œâ”€â”€ test_checks.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ multiple_database
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ routers.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ mutually_referential
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ nested_foreign_keys
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ no_models
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_fk
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_fk_ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ null_queries
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ one_to_one
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ or_lookups
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ order_with_respect_to
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base_tests.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ ordering
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ pagination
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ custom.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ postgres_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ array_default_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â”œâ”€â”€ 0002_integerarraymodel_field_2.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ array_index_migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ integration_settings.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_setup_extensions.py
    |   |   â”œâ”€â”€ 0002_create_test_models.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_aggregates.py
    |   â”œâ”€â”€ test_apps.py
    |   â”œâ”€â”€ test_array.py
    |   â”œâ”€â”€ test_bulk_update.py
    |   â”œâ”€â”€ test_citext.py
    |   â”œâ”€â”€ test_constraints.py
    |   â”œâ”€â”€ test_functions.py
    |   â”œâ”€â”€ test_hstore.py
    |   â”œâ”€â”€ test_indexes.py
    |   â”œâ”€â”€ test_integration.py
    |   â”œâ”€â”€ test_introspection.py
    |   â”œâ”€â”€ test_json_deprecation.py
    |   â”œâ”€â”€ test_operations.py
    |   â”œâ”€â”€ test_ranges.py
    |   â”œâ”€â”€ test_search.py
    |   â”œâ”€â”€ test_signals.py
    |   â”œâ”€â”€ test_trigram.py
    |   â””â”€â”€ test_unaccent.py
    â”œâ”€â”€ prefetch_related
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_prefetch_related_objects.py
    |   â”œâ”€â”€ test_uuid.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ project_template
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_settings.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ properties
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ proxy_model_inheritance
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ app1
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ app2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ models.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ proxy_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ queries
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_bulk_update.py
    |   â”œâ”€â”€ test_db_returning.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â”œâ”€â”€ test_explain.py
    |   â”œâ”€â”€ test_iterator.py
    |   â”œâ”€â”€ test_q.py
    |   â”œâ”€â”€ test_qs_combinators.py
    |   â”œâ”€â”€ test_query.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ queryset_pickle
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ raw_query
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ redirects_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ requests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_accept_header.py
    |   â”œâ”€â”€ test_data_upload_settings.py
    |   â”œâ”€â”€ test_is_ajax_deprecations.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ requirements
    |   â”œâ”€â”€ mysql.txt
    |   â”œâ”€â”€ oracle.txt
    |   â”œâ”€â”€ postgres.txt
    |   â””â”€â”€ py3.txt
    â”œâ”€â”€ reserved_names
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ resolve_url
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ responses
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ test_cookie.py
    |   â”œâ”€â”€ test_fileresponse.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ reverse_lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ runtests.py
    â”œâ”€â”€ save_delete_hooks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ schema
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fields.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_logging.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_for_update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related_onetoone
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ select_related_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ serializers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ base.py
    |   |   â”œâ”€â”€ data.py
    |   |   â”œâ”€â”€ multi_table.py
    |   |   â””â”€â”€ natural.py
    |   â”œâ”€â”€ test_data.py
    |   â”œâ”€â”€ test_deserializedobject.py
    |   â”œâ”€â”€ test_json.py
    |   â”œâ”€â”€ test_jsonl.py
    |   â”œâ”€â”€ test_natural.py
    |   â”œâ”€â”€ test_xml.py
    |   â”œâ”€â”€ test_yaml.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ servers
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ another_app
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ static
    |   |       â””â”€â”€ another_app
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ media
    |   |   â””â”€â”€ example_media_file.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ static
    |   |   â””â”€â”€ example_static_file.txt
    |   â”œâ”€â”€ test_basehttp.py
    |   â”œâ”€â”€ test_liveserverthread.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ sessions_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ settings_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ shell
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ shortcuts
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ shortcuts
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ shortcuts
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ signals
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_deprecation.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ signed_cookies_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ signing
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ sitemaps_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ base.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ test_generic.py
    |   â”œâ”€â”€ test_http.py
    |   â”œâ”€â”€ test_https.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_utils.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ empty.py
    |       â”œâ”€â”€ http.py
    |       â”œâ”€â”€ https.py
    |       â””â”€â”€ index_only.py
    â”œâ”€â”€ sites_framework
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ migrations
    |   |   â”œâ”€â”€ 0001_initial.py
    |   |   â””â”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ sites_tests
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ staticfiles_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ no_label
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ static
    |   |   â”œâ”€â”€ staticfiles_config.py
    |   |   â””â”€â”€ test
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ otherdir
    |   |       â””â”€â”€ static
    |   â”œâ”€â”€ cases.py
    |   â”œâ”€â”€ project
    |   |   â”œâ”€â”€ documents
    |   |   |   â”œâ”€â”€ cached
    |   |   |   â”œâ”€â”€ subdir
    |   |   |   â”œâ”€â”€ test
    |   |   |   â””â”€â”€ test.txt
    |   |   â”œâ”€â”€ faulty
    |   |   â”œâ”€â”€ loop
    |   |   â”œâ”€â”€ pathlib
    |   |   |   â””â”€â”€ pathlib.txt
    |   |   â”œâ”€â”€ prefixed
    |   |   |   â””â”€â”€ test.txt
    |   |   â””â”€â”€ site_media
    |   |       â”œâ”€â”€ media
    |   |       â””â”€â”€ static
    |   â”œâ”€â”€ settings.py
    |   â”œâ”€â”€ storage.py
    |   â”œâ”€â”€ test_checks.py
    |   â”œâ”€â”€ test_finders.py
    |   â”œâ”€â”€ test_forms.py
    |   â”œâ”€â”€ test_handlers.py
    |   â”œâ”€â”€ test_liveserver.py
    |   â”œâ”€â”€ test_management.py
    |   â”œâ”€â”€ test_storage.py
    |   â”œâ”€â”€ test_templatetags.py
    |   â”œâ”€â”€ test_utils.py
    |   â”œâ”€â”€ test_views.py
    |   â””â”€â”€ urls
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ default.py
    |       â””â”€â”€ helper.py
    â”œâ”€â”€ str
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ string_lookup
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ swappable_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ syndication_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ feeds.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ syndication
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ template_backends
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ apps
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ good
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ templatetags
    |   |   â””â”€â”€ importerror
    |   |       â”œâ”€â”€ __init__.py
    |   |       â””â”€â”€ templatetags
    |   â”œâ”€â”€ forbidden
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ template_strings
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_backends
    |   â”œâ”€â”€ test_django.py
    |   â”œâ”€â”€ test_dummy.py
    |   â”œâ”€â”€ test_jinja2.py
    |   â””â”€â”€ test_utils.py
    â”œâ”€â”€ template_loader
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ template_strings
    |   |   â””â”€â”€ template_loader
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_loader
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ template_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ alternate_urls.py
    |   â”œâ”€â”€ annotated_tag_function.py
    |   â”œâ”€â”€ broken_tag.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ filter_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_add.py
    |   |   â”œâ”€â”€ test_addslashes.py
    |   |   â”œâ”€â”€ test_autoescape.py
    |   |   â”œâ”€â”€ test_capfirst.py
    |   |   â”œâ”€â”€ test_center.py
    |   |   â”œâ”€â”€ test_chaining.py
    |   |   â”œâ”€â”€ test_cut.py
    |   |   â”œâ”€â”€ test_date.py
    |   |   â”œâ”€â”€ test_default.py
    |   |   â”œâ”€â”€ test_default_if_none.py
    |   |   â”œâ”€â”€ test_dictsort.py
    |   |   â”œâ”€â”€ test_dictsortreversed.py
    |   |   â”œâ”€â”€ test_divisibleby.py
    |   |   â”œâ”€â”€ test_escape.py
    |   |   â”œâ”€â”€ test_escapejs.py
    |   |   â”œâ”€â”€ test_filesizeformat.py
    |   |   â”œâ”€â”€ test_first.py
    |   |   â”œâ”€â”€ test_floatformat.py
    |   |   â”œâ”€â”€ test_force_escape.py
    |   |   â”œâ”€â”€ test_get_digit.py
    |   |   â”œâ”€â”€ test_iriencode.py
    |   |   â”œâ”€â”€ test_join.py
    |   |   â”œâ”€â”€ test_json_script.py
    |   |   â”œâ”€â”€ test_last.py
    |   |   â”œâ”€â”€ test_length.py
    |   |   â”œâ”€â”€ test_length_is.py
    |   |   â”œâ”€â”€ test_linebreaks.py
    |   |   â”œâ”€â”€ test_linebreaksbr.py
    |   |   â”œâ”€â”€ test_linenumbers.py
    |   |   â”œâ”€â”€ test_ljust.py
    |   |   â”œâ”€â”€ test_lower.py
    |   |   â”œâ”€â”€ test_make_list.py
    |   |   â”œâ”€â”€ test_phone2numeric.py
    |   |   â”œâ”€â”€ test_pluralize.py
    |   |   â”œâ”€â”€ test_random.py
    |   |   â”œâ”€â”€ test_rjust.py
    |   |   â”œâ”€â”€ test_safe.py
    |   |   â”œâ”€â”€ test_safeseq.py
    |   |   â”œâ”€â”€ test_slice.py
    |   |   â”œâ”€â”€ test_slugify.py
    |   |   â”œâ”€â”€ test_stringformat.py
    |   |   â”œâ”€â”€ test_striptags.py
    |   |   â”œâ”€â”€ test_time.py
    |   |   â”œâ”€â”€ test_timesince.py
    |   |   â”œâ”€â”€ test_timeuntil.py
    |   |   â”œâ”€â”€ test_title.py
    |   |   â”œâ”€â”€ test_truncatechars.py
    |   |   â”œâ”€â”€ test_truncatechars_html.py
    |   |   â”œâ”€â”€ test_truncatewords.py
    |   |   â”œâ”€â”€ test_truncatewords_html.py
    |   |   â”œâ”€â”€ test_unordered_list.py
    |   |   â”œâ”€â”€ test_upper.py
    |   |   â”œâ”€â”€ test_urlencode.py
    |   |   â”œâ”€â”€ test_urlize.py
    |   |   â”œâ”€â”€ test_urlizetrunc.py
    |   |   â”œâ”€â”€ test_wordcount.py
    |   |   â”œâ”€â”€ test_wordwrap.py
    |   |   â”œâ”€â”€ test_yesno.py
    |   |   â””â”€â”€ timezone_utils.py
    |   â”œâ”€â”€ jinja2
    |   |   â””â”€â”€ template_tests
    |   â”œâ”€â”€ other_templates
    |   |   â””â”€â”€ priority
    |   â”œâ”€â”€ recursive_templates
    |   |   â”œâ”€â”€ fs
    |   |   â”œâ”€â”€ fs2
    |   |   â””â”€â”€ fs3
    |   â”œâ”€â”€ relative_templates
    |   |   â””â”€â”€ dir1
    |   |       â””â”€â”€ dir2
    |   â”œâ”€â”€ syntax_tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ i18n
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â”œâ”€â”€ base.py
    |   |   |   â”œâ”€â”€ test_blocktranslate.py
    |   |   |   â”œâ”€â”€ test_filters.py
    |   |   |   â”œâ”€â”€ test_get_available_languages.py
    |   |   |   â”œâ”€â”€ test_get_current_language.py
    |   |   |   â”œâ”€â”€ test_get_current_language_bidi.py
    |   |   |   â”œâ”€â”€ test_get_language_info.py
    |   |   |   â”œâ”€â”€ test_get_language_info_list.py
    |   |   |   â”œâ”€â”€ test_language.py
    |   |   |   â”œâ”€â”€ test_translate.py
    |   |   |   â””â”€â”€ test_underscore_syntax.py
    |   |   â”œâ”€â”€ test_autoescape.py
    |   |   â”œâ”€â”€ test_basic.py
    |   |   â”œâ”€â”€ test_builtins.py
    |   |   â”œâ”€â”€ test_cache.py
    |   |   â”œâ”€â”€ test_comment.py
    |   |   â”œâ”€â”€ test_cycle.py
    |   |   â”œâ”€â”€ test_exceptions.py
    |   |   â”œâ”€â”€ test_extends.py
    |   |   â”œâ”€â”€ test_filter_syntax.py
    |   |   â”œâ”€â”€ test_filter_tag.py
    |   |   â”œâ”€â”€ test_firstof.py
    |   |   â”œâ”€â”€ test_for.py
    |   |   â”œâ”€â”€ test_if.py
    |   |   â”œâ”€â”€ test_if_changed.py
    |   |   â”œâ”€â”€ test_if_equal.py
    |   |   â”œâ”€â”€ test_include.py
    |   |   â”œâ”€â”€ test_invalid_string.py
    |   |   â”œâ”€â”€ test_list_index.py
    |   |   â”œâ”€â”€ test_load.py
    |   |   â”œâ”€â”€ test_lorem.py
    |   |   â”œâ”€â”€ test_multiline.py
    |   |   â”œâ”€â”€ test_named_endblock.py
    |   |   â”œâ”€â”€ test_now.py
    |   |   â”œâ”€â”€ test_numpy.py
    |   |   â”œâ”€â”€ test_regroup.py
    |   |   â”œâ”€â”€ test_resetcycle.py
    |   |   â”œâ”€â”€ test_setup.py
    |   |   â”œâ”€â”€ test_simple_tag.py
    |   |   â”œâ”€â”€ test_spaceless.py
    |   |   â”œâ”€â”€ test_static.py
    |   |   â”œâ”€â”€ test_template_tag.py
    |   |   â”œâ”€â”€ test_url.py
    |   |   â”œâ”€â”€ test_verbatim.py
    |   |   â”œâ”€â”€ test_width_ratio.py
    |   |   â””â”€â”€ test_with.py
    |   â”œâ”€â”€ templates
    |   |   â”œâ”€â”€ first
    |   |   â”œâ”€â”€ priority
    |   |   â”œâ”€â”€ second
    |   |   â””â”€â”€ template_tests
    |   â”œâ”€â”€ templatetags
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ bad_tag.py
    |   |   â”œâ”€â”€ custom.py
    |   |   â”œâ”€â”€ inclusion.py
    |   |   â”œâ”€â”€ subpackage
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ echo.py
    |   |   â”œâ”€â”€ tag_27584.py
    |   |   â””â”€â”€ testtags.py
    |   â”œâ”€â”€ test_base.py
    |   â”œâ”€â”€ test_callables.py
    |   â”œâ”€â”€ test_context.py
    |   â”œâ”€â”€ test_custom.py
    |   â”œâ”€â”€ test_engine.py
    |   â”œâ”€â”€ test_extends.py
    |   â”œâ”€â”€ test_extends_relative.py
    |   â”œâ”€â”€ test_library.py
    |   â”œâ”€â”€ test_loaders.py
    |   â”œâ”€â”€ test_logging.py
    |   â”œâ”€â”€ test_nodelist.py
    |   â”œâ”€â”€ test_origin.py
    |   â”œâ”€â”€ test_parser.py
    |   â”œâ”€â”€ test_response.py
    |   â”œâ”€â”€ test_smartif.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ utils.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ templates
    |   â”œâ”€â”€ comments
    |   |   â””â”€â”€ comment_notification_email.txt
    |   â”œâ”€â”€ custom_admin
    |   â””â”€â”€ views
    â”œâ”€â”€ test_client
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ auth_backends.py
    |   â”œâ”€â”€ test_conditional_content_removal.py
    |   â”œâ”€â”€ test_fakepayload.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ test_client_regress
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ auth_backends.py
    |   â”œâ”€â”€ bad_templates
    |   â”œâ”€â”€ context_processors.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ session.py
    |   â”œâ”€â”€ templates
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ test_exceptions
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ test_validation_error.py
    â”œâ”€â”€ test_runner
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ runner.py
    |   â”œâ”€â”€ test_debug_sql.py
    |   â”œâ”€â”€ test_discover_runner.py
    |   â”œâ”€â”€ test_parallel.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ test_runner_apps
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ buffer
    |   |   â””â”€â”€ tests_buffer.py
    |   â”œâ”€â”€ databases
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ tests.py
    |   â”œâ”€â”€ sample
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ doctests.py
    |   |   â”œâ”€â”€ empty.py
    |   |   â”œâ”€â”€ pattern_tests.py
    |   |   â”œâ”€â”€ tests
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ tests.py
    |   |   â””â”€â”€ tests_sample.py
    |   â”œâ”€â”€ simple
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ tests.py
    |   â””â”€â”€ tagged
    |       â”œâ”€â”€ __init__.py
    |       â”œâ”€â”€ tests.py
    |       â””â”€â”€ tests_inheritance.py
    â”œâ”€â”€ test_sqlite.py
    â”œâ”€â”€ test_utils
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ fixtures
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ template_used
    |   â”œâ”€â”€ test_simpletestcase.py
    |   â”œâ”€â”€ test_testcase.py
    |   â”œâ”€â”€ test_transactiontestcase.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ timezones
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ admin.py
    |   â”œâ”€â”€ forms.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ transaction_hooks
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ transactions
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ unmanaged_models
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ update
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ update_only_fields
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ urlpatterns
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ converter_urls.py
    |   â”œâ”€â”€ converters.py
    |   â”œâ”€â”€ included_urls.py
    |   â”œâ”€â”€ more_urls.py
    |   â”œâ”€â”€ path_base64_urls.py
    |   â”œâ”€â”€ path_dynamic_urls.py
    |   â”œâ”€â”€ path_same_name_urls.py
    |   â”œâ”€â”€ path_urls.py
    |   â”œâ”€â”€ test_resolvers.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ views.py
    â”œâ”€â”€ urlpatterns_reverse
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ erroneous_urls.py
    |   â”œâ”€â”€ extra_urls.py
    |   â”œâ”€â”€ included_app_urls.py
    |   â”œâ”€â”€ included_named_urls.py
    |   â”œâ”€â”€ included_named_urls2.py
    |   â”œâ”€â”€ included_namespace_urls.py
    |   â”œâ”€â”€ included_no_kwargs_urls.py
    |   â”œâ”€â”€ included_urls.py
    |   â”œâ”€â”€ included_urls2.py
    |   â”œâ”€â”€ method_view_urls.py
    |   â”œâ”€â”€ middleware.py
    |   â”œâ”€â”€ named_urls.py
    |   â”œâ”€â”€ named_urls_conflict.py
    |   â”œâ”€â”€ namespace_urls.py
    |   â”œâ”€â”€ nested_urls.py
    |   â”œâ”€â”€ no_urls.py
    |   â”œâ”€â”€ nonimported_module.py
    |   â”œâ”€â”€ reverse_lazy_urls.py
    |   â”œâ”€â”€ test_localeregexdescriptor.py
    |   â”œâ”€â”€ tests.py
    |   â”œâ”€â”€ translations
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ de
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ urlconf_inner.py
    |   â”œâ”€â”€ urlconf_outer.py
    |   â”œâ”€â”€ urls.py
    |   â”œâ”€â”€ urls_error_handlers.py
    |   â”œâ”€â”€ urls_error_handlers_callables.py
    |   â”œâ”€â”€ urls_without_handlers.py
    |   â”œâ”€â”€ utils.py
    |   â”œâ”€â”€ views.py
    |   â””â”€â”€ views_broken.py
    â”œâ”€â”€ urls.py
    â”œâ”€â”€ user_commands
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ management
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ commands
    |   |       â”œâ”€â”€ __init__.py
    |   |       â”œâ”€â”€ common_args.py
    |   |       â”œâ”€â”€ dance.py
    |   |       â”œâ”€â”€ hal.py
    |   |       â”œâ”€â”€ mutually_exclusive_required.py
    |   |       â”œâ”€â”€ no_system_checks.py
    |   |       â”œâ”€â”€ no_translations.py
    |   |       â”œâ”€â”€ required_option.py
    |   |       â”œâ”€â”€ reverse_url.py
    |   |       â”œâ”€â”€ set_option.py
    |   |       â”œâ”€â”€ specific_system_checks.py
    |   |       â”œâ”€â”€ subparser.py
    |   |       â”œâ”€â”€ subparser_dest.py
    |   |       â”œâ”€â”€ subparser_required.py
    |   |       â””â”€â”€ transaction.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ urls.py
    â”œâ”€â”€ utils_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ archives
    |   â”œâ”€â”€ eggs
    |   â”œâ”€â”€ files
    |   |   â””â”€â”€ strip_tags2.txt
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_archive.py
    |   â”œâ”€â”€ test_autoreload.py
    |   â”œâ”€â”€ test_baseconv.py
    |   â”œâ”€â”€ test_crypto.py
    |   â”œâ”€â”€ test_datastructures.py
    |   â”œâ”€â”€ test_dateformat.py
    |   â”œâ”€â”€ test_dateparse.py
    |   â”œâ”€â”€ test_datetime_safe.py
    |   â”œâ”€â”€ test_decorators.py
    |   â”œâ”€â”€ test_duration.py
    |   â”œâ”€â”€ test_encoding.py
    |   â”œâ”€â”€ test_encoding_deprecations.py
    |   â”œâ”€â”€ test_feedgenerator.py
    |   â”œâ”€â”€ test_functional.py
    |   â”œâ”€â”€ test_hashable.py
    |   â”œâ”€â”€ test_html.py
    |   â”œâ”€â”€ test_http.py
    |   â”œâ”€â”€ test_inspect.py
    |   â”œâ”€â”€ test_ipv6.py
    |   â”œâ”€â”€ test_jslex.py
    |   â”œâ”€â”€ test_lazyobject.py
    |   â”œâ”€â”€ test_lorem_ipsum.py
    |   â”œâ”€â”€ test_module
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ another_bad_module.py
    |   |   â”œâ”€â”€ another_good_module.py
    |   |   â”œâ”€â”€ bad_module.py
    |   |   â”œâ”€â”€ child_module
    |   |   |   â”œâ”€â”€ __init__.py
    |   |   |   â””â”€â”€ grandchild_module.py
    |   |   â””â”€â”€ good_module.py
    |   â”œâ”€â”€ test_module_loading.py
    |   â”œâ”€â”€ test_no_submodule.py
    |   â”œâ”€â”€ test_numberformat.py
    |   â”œâ”€â”€ test_os_utils.py
    |   â”œâ”€â”€ test_regex_helper.py
    |   â”œâ”€â”€ test_safestring.py
    |   â”œâ”€â”€ test_simplelazyobject.py
    |   â”œâ”€â”€ test_termcolors.py
    |   â”œâ”€â”€ test_text.py
    |   â”œâ”€â”€ test_timesince.py
    |   â”œâ”€â”€ test_timezone.py
    |   â”œâ”€â”€ test_topological_sort.py
    |   â”œâ”€â”€ test_tree.py
    |   â””â”€â”€ utils.py
    â”œâ”€â”€ validation
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ test_custom_messages.py
    |   â”œâ”€â”€ test_error_messages.py
    |   â”œâ”€â”€ test_picklable.py
    |   â”œâ”€â”€ test_unique.py
    |   â”œâ”€â”€ test_validators.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ validators
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ invalid_urls.txt
    |   â”œâ”€â”€ tests.py
    |   â””â”€â”€ valid_urls.txt
    â”œâ”€â”€ version
    |   â”œâ”€â”€ __init__.py
    |   â””â”€â”€ tests.py
    â”œâ”€â”€ view_tests
    |   â”œâ”€â”€ __init__.py
    |   â”œâ”€â”€ app0
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ en
    |   â”œâ”€â”€ app1
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ app2
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ app3
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ es_AR
    |   â”œâ”€â”€ app4
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ es_AR
    |   â”œâ”€â”€ app5
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ locale
    |   |       â””â”€â”€ fr
    |   â”œâ”€â”€ default_urls.py
    |   â”œâ”€â”€ generic_urls.py
    |   â”œâ”€â”€ locale
    |   |   â”œâ”€â”€ de
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ en_GB
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ es
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ fr
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ nl
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â”œâ”€â”€ pt
    |   |   |   â””â”€â”€ LC_MESSAGES
    |   |   â””â”€â”€ ru
    |   |       â””â”€â”€ LC_MESSAGES
    |   â”œâ”€â”€ media
    |   |   â”œâ”€â”€ %2F.txt
    |   |   â”œâ”€â”€ file.txt
    |   |   â”œâ”€â”€ long-line.txt
    |   |   â””â”€â”€ subdir
    |   â”œâ”€â”€ models.py
    |   â”œâ”€â”€ regression_21530_urls.py
    |   â”œâ”€â”€ templates
    |   |   â””â”€â”€ debug
    |   â”œâ”€â”€ templatetags
    |   |   â”œâ”€â”€ __init__.py
    |   |   â””â”€â”€ debugtags.py
    |   â”œâ”€â”€ tests
    |   |   â”œâ”€â”€ __init__.py
    |   |   â”œâ”€â”€ test_csrf.py
    |   |   â”œâ”€â”€ test_debug.py
    |   |   â”œâ”€â”€ test_defaults.py
    |   |   â”œâ”€â”€ test_i18n.py
    |   |   â”œâ”€â”€ test_json.py
    |   |   â”œâ”€â”€ test_specials.py
    |   |   â””â”€â”€ test_static.py
    |   â”œâ”€â”€ urls.py
    |   â””â”€â”€ views.py
    â””â”€â”€ wsgi
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ tests.py
        â”œâ”€â”€ urls.py
        â””â”€â”€ wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
cache.backends.db._cull sometimes fails with 'NoneType' object is not subscriptable

Issue description: 
Description
	 
		(last modified by Guillermo BonvehÃ­)
	 
I'm sporadically getting some cache errors using database backend.
The error is: 'NoneType' object is not subscriptable
And the backtrace:
/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response
/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render
/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback
/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response
/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set
/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull
This is using Django 2.2.11 but I see the same code is in master.
â€‹https://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270
				cursor.execute(
					connection.ops.cache_key_culling_sql() % table,
					[cull_num])
				cursor.execute("DELETE FROM %s "
							 "WHERE cache_key < %%s" % table,
							 [cursor.fetchone()[0]])
From what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.
I guess a simple check to see if it contains data would be enough, may apply for an easy picking.
Edit: Wording

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/cache/tests.py
Line number range: 1 - 2000
Content:
1. # Unit tests for cache framework
2. # Uses whatever cache backend is set in the test settings file.
3. import copy
4. import io
5. import os
6. import pickle
7. import re
8. import shutil
9. import tempfile
10. import threading
11. import time
12. import unittest
13. from pathlib import Path
14. from unittest import mock
15. 
16. from django.conf import settings
17. from django.core import management, signals
18. from django.core.cache import (
19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,
20. )
21. from django.core.cache.backends.base import InvalidCacheBackendError
22. from django.core.cache.utils import make_template_fragment_key
23. from django.db import close_old_connections, connection, connections
24. from django.http import (
25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,
26. )
27. from django.middleware.cache import (
28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,
29. )
30. from django.middleware.csrf import CsrfViewMiddleware
31. from django.template import engines
32. from django.template.context_processors import csrf
33. from django.template.response import TemplateResponse
34. from django.test import (
35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,
36.     override_settings,
37. )
38. from django.test.signals import setting_changed
39. from django.utils import timezone, translation
40. from django.utils.cache import (
41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,
42. )
43. from django.views.decorators.cache import cache_control, cache_page
44. 
45. from .models import Poll, expensive_calculation
46. 
47. 
48. # functions/classes for complex data type tests
49. def f():
50.     return 42
51. 
52. 
53. class C:
54.     def m(n):
55.         return 24
56. 
57. 
58. class Unpicklable:
59.     def __getstate__(self):
60.         raise pickle.PickleError()
61. 
62. 
63. def empty_response(request):
64.     return HttpResponse()
65. 
66. 
67. KEY_ERRORS_WITH_MEMCACHED_MSG = (
68.     'Cache key contains characters that will cause errors if used with '
69.     'memcached: %r'
70. )
71. 
72. 
73. @override_settings(CACHES={
74.     'default': {
75.         'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
76.     }
77. })
78. class DummyCacheTests(SimpleTestCase):
79.     # The Dummy cache backend doesn't really behave like a test backend,
80.     # so it has its own test case.
81. 
82.     def test_simple(self):
83.         "Dummy cache backend ignores cache set calls"
84.         cache.set("key", "value")
85.         self.assertIsNone(cache.get("key"))
86. 
87.     def test_add(self):
88.         "Add doesn't do anything in dummy cache backend"
89.         self.assertIs(cache.add("addkey1", "value"), True)
90.         self.assertIs(cache.add("addkey1", "newvalue"), True)
91.         self.assertIsNone(cache.get("addkey1"))
92. 
93.     def test_non_existent(self):
94.         "Nonexistent keys aren't found in the dummy cache backend"
95.         self.assertIsNone(cache.get("does_not_exist"))
96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
97. 
98.     def test_get_many(self):
99.         "get_many returns nothing for the dummy cache backend"
100.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
101.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {})
102.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {})
103. 
104.     def test_get_many_invalid_key(self):
105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
106.         with self.assertWarnsMessage(CacheKeyWarning, msg):
107.             cache.get_many(['key with spaces'])
108. 
109.     def test_delete(self):
110.         "Cache deletion is transparently ignored on the dummy cache backend"
111.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
112.         self.assertIsNone(cache.get("key1"))
113.         self.assertIs(cache.delete("key1"), False)
114.         self.assertIsNone(cache.get("key1"))
115.         self.assertIsNone(cache.get("key2"))
116. 
117.     def test_has_key(self):
118.         "The has_key method doesn't ever return True for the dummy cache backend"
119.         cache.set("hello1", "goodbye1")
120.         self.assertIs(cache.has_key("hello1"), False)
121.         self.assertIs(cache.has_key("goodbye1"), False)
122. 
123.     def test_in(self):
124.         "The in operator doesn't ever return True for the dummy cache backend"
125.         cache.set("hello2", "goodbye2")
126.         self.assertNotIn("hello2", cache)
127.         self.assertNotIn("goodbye2", cache)
128. 
129.     def test_incr(self):
130.         "Dummy cache values can't be incremented"
131.         cache.set('answer', 42)
132.         with self.assertRaises(ValueError):
133.             cache.incr('answer')
134.         with self.assertRaises(ValueError):
135.             cache.incr('does_not_exist')
136. 
137.     def test_decr(self):
138.         "Dummy cache values can't be decremented"
139.         cache.set('answer', 42)
140.         with self.assertRaises(ValueError):
141.             cache.decr('answer')
142.         with self.assertRaises(ValueError):
143.             cache.decr('does_not_exist')
144. 
145.     def test_touch(self):
146.         """Dummy cache can't do touch()."""
147.         self.assertIs(cache.touch('whatever'), False)
148. 
149.     def test_data_types(self):
150.         "All data types are ignored equally by the dummy cache"
151.         stuff = {
152.             'string': 'this is a string',
153.             'int': 42,
154.             'list': [1, 2, 3, 4],
155.             'tuple': (1, 2, 3, 4),
156.             'dict': {'A': 1, 'B': 2},
157.             'function': f,
158.             'class': C,
159.         }
160.         cache.set("stuff", stuff)
161.         self.assertIsNone(cache.get("stuff"))
162. 
163.     def test_expiration(self):
164.         "Expiration has no effect on the dummy cache"
165.         cache.set('expire1', 'very quickly', 1)
166.         cache.set('expire2', 'very quickly', 1)
167.         cache.set('expire3', 'very quickly', 1)
168. 
169.         time.sleep(2)
170.         self.assertIsNone(cache.get("expire1"))
171. 
172.         self.assertIs(cache.add("expire2", "newvalue"), True)
173.         self.assertIsNone(cache.get("expire2"))
174.         self.assertIs(cache.has_key("expire3"), False)
175. 
176.     def test_unicode(self):
177.         "Unicode values are ignored by the dummy cache"
178.         stuff = {
179.             'ascii': 'ascii_value',
180.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
181.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
182.             'ascii2': {'x': 1}
183.         }
184.         for (key, value) in stuff.items():
185.             with self.subTest(key=key):
186.                 cache.set(key, value)
187.                 self.assertIsNone(cache.get(key))
188. 
189.     def test_set_many(self):
190.         "set_many does nothing for the dummy cache backend"
191.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}), [])
192.         self.assertEqual(cache.set_many({'a': 1, 'b': 2}, timeout=2, version='1'), [])
193. 
194.     def test_set_many_invalid_key(self):
195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
196.         with self.assertWarnsMessage(CacheKeyWarning, msg):
197.             cache.set_many({'key with spaces': 'foo'})
198. 
199.     def test_delete_many(self):
200.         "delete_many does nothing for the dummy cache backend"
201.         cache.delete_many(['a', 'b'])
202. 
203.     def test_delete_many_invalid_key(self):
204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % ':1:key with spaces'
205.         with self.assertWarnsMessage(CacheKeyWarning, msg):
206.             cache.delete_many({'key with spaces': 'foo'})
207. 
208.     def test_clear(self):
209.         "clear does nothing for the dummy cache backend"
210.         cache.clear()
211. 
212.     def test_incr_version(self):
213.         "Dummy cache versions can't be incremented"
214.         cache.set('answer', 42)
215.         with self.assertRaises(ValueError):
216.             cache.incr_version('answer')
217.         with self.assertRaises(ValueError):
218.             cache.incr_version('does_not_exist')
219. 
220.     def test_decr_version(self):
221.         "Dummy cache versions can't be decremented"
222.         cache.set('answer', 42)
223.         with self.assertRaises(ValueError):
224.             cache.decr_version('answer')
225.         with self.assertRaises(ValueError):
226.             cache.decr_version('does_not_exist')
227. 
228.     def test_get_or_set(self):
229.         self.assertEqual(cache.get_or_set('mykey', 'default'), 'default')
230.         self.assertIsNone(cache.get_or_set('mykey', None))
231. 
232.     def test_get_or_set_callable(self):
233.         def my_callable():
234.             return 'default'
235. 
236.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'default')
237.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'default')
238. 
239. 
240. def custom_key_func(key, key_prefix, version):
241.     "A customized cache key function"
242.     return 'CUSTOM-' + '-'.join([key_prefix, str(version), key])
243. 
244. 
245. _caches_setting_base = {
246.     'default': {},
247.     'prefix': {'KEY_PREFIX': 'cacheprefix{}'.format(os.getpid())},
248.     'v2': {'VERSION': 2},
249.     'custom_key': {'KEY_FUNCTION': custom_key_func},
250.     'custom_key2': {'KEY_FUNCTION': 'cache.tests.custom_key_func'},
251.     'cull': {'OPTIONS': {'MAX_ENTRIES': 30}},
252.     'zero_cull': {'OPTIONS': {'CULL_FREQUENCY': 0, 'MAX_ENTRIES': 30}},
253. }
254. 
255. 
256. def caches_setting_for_tests(base=None, exclude=None, **params):
257.     # `base` is used to pull in the memcached config from the original settings,
258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys
259.     # should be omitted.
260.     # `params` are test specific overrides and `_caches_settings_base` is the
261.     # base config for the tests.
262.     # This results in the following search order:
263.     # params -> _caches_setting_base -> base
264.     base = base or {}
265.     exclude = exclude or set()
266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}
267.     for key, cache_params in setting.items():
268.         cache_params.update(_caches_setting_base[key])
269.         cache_params.update(params)
270.     return setting
271. 
272. 
273. class BaseCacheTests:
274.     # A common set of tests to apply to all cache backends
275.     factory = RequestFactory()
276. 
277.     def tearDown(self):
278.         cache.clear()
279. 
280.     def test_simple(self):
281.         # Simple cache set/get works
282.         cache.set("key", "value")
283.         self.assertEqual(cache.get("key"), "value")
284. 
285.     def test_default_used_when_none_is_set(self):
286.         """If None is cached, get() returns it instead of the default."""
287.         cache.set('key_default_none', None)
288.         self.assertIsNone(cache.get('key_default_none', default='default'))
289. 
290.     def test_add(self):
291.         # A key can be added to a cache
292.         self.assertIs(cache.add("addkey1", "value"), True)
293.         self.assertIs(cache.add("addkey1", "newvalue"), False)
294.         self.assertEqual(cache.get("addkey1"), "value")
295. 
296.     def test_prefix(self):
297.         # Test for same cache key conflicts between shared backend
298.         cache.set('somekey', 'value')
299. 
300.         # should not be set in the prefixed cache
301.         self.assertIs(caches['prefix'].has_key('somekey'), False)
302. 
303.         caches['prefix'].set('somekey', 'value2')
304. 
305.         self.assertEqual(cache.get('somekey'), 'value')
306.         self.assertEqual(caches['prefix'].get('somekey'), 'value2')
307. 
308.     def test_non_existent(self):
309.         """Nonexistent cache keys return as None/default."""
310.         self.assertIsNone(cache.get("does_not_exist"))
311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")
312. 
313.     def test_get_many(self):
314.         # Multiple cache keys can be returned using get_many
315.         cache.set_many({'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd'})
316.         self.assertEqual(cache.get_many(['a', 'c', 'd']), {'a': 'a', 'c': 'c', 'd': 'd'})
317.         self.assertEqual(cache.get_many(['a', 'b', 'e']), {'a': 'a', 'b': 'b'})
318.         self.assertEqual(cache.get_many(iter(['a', 'b', 'e'])), {'a': 'a', 'b': 'b'})
319. 
320.     def test_delete(self):
321.         # Cache keys can be deleted
322.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
323.         self.assertEqual(cache.get("key1"), "spam")
324.         self.assertIs(cache.delete("key1"), True)
325.         self.assertIsNone(cache.get("key1"))
326.         self.assertEqual(cache.get("key2"), "eggs")
327. 
328.     def test_delete_nonexistent(self):
329.         self.assertIs(cache.delete('nonexistent_key'), False)
330. 
331.     def test_has_key(self):
332.         # The cache can be inspected for cache keys
333.         cache.set("hello1", "goodbye1")
334.         self.assertIs(cache.has_key("hello1"), True)
335.         self.assertIs(cache.has_key("goodbye1"), False)
336.         cache.set("no_expiry", "here", None)
337.         self.assertIs(cache.has_key("no_expiry"), True)
338. 
339.     def test_in(self):
340.         # The in operator can be used to inspect cache contents
341.         cache.set("hello2", "goodbye2")
342.         self.assertIn("hello2", cache)
343.         self.assertNotIn("goodbye2", cache)
344. 
345.     def test_incr(self):
346.         # Cache values can be incremented
347.         cache.set('answer', 41)
348.         self.assertEqual(cache.incr('answer'), 42)
349.         self.assertEqual(cache.get('answer'), 42)
350.         self.assertEqual(cache.incr('answer', 10), 52)
351.         self.assertEqual(cache.get('answer'), 52)
352.         self.assertEqual(cache.incr('answer', -10), 42)
353.         with self.assertRaises(ValueError):
354.             cache.incr('does_not_exist')
355. 
356.     def test_decr(self):
357.         # Cache values can be decremented
358.         cache.set('answer', 43)
359.         self.assertEqual(cache.decr('answer'), 42)
360.         self.assertEqual(cache.get('answer'), 42)
361.         self.assertEqual(cache.decr('answer', 10), 32)
362.         self.assertEqual(cache.get('answer'), 32)
363.         self.assertEqual(cache.decr('answer', -10), 42)
364.         with self.assertRaises(ValueError):
365.             cache.decr('does_not_exist')
366. 
367.     def test_close(self):
368.         self.assertTrue(hasattr(cache, 'close'))
369.         cache.close()
370. 
371.     def test_data_types(self):
372.         # Many different data types can be cached
373.         stuff = {
374.             'string': 'this is a string',
375.             'int': 42,
376.             'list': [1, 2, 3, 4],
377.             'tuple': (1, 2, 3, 4),
378.             'dict': {'A': 1, 'B': 2},
379.             'function': f,
380.             'class': C,
381.         }
382.         cache.set("stuff", stuff)
383.         self.assertEqual(cache.get("stuff"), stuff)
384. 
385.     def test_cache_read_for_model_instance(self):
386.         # Don't want fields with callable as default to be called on cache read
387.         expensive_calculation.num_runs = 0
388.         Poll.objects.all().delete()
389.         my_poll = Poll.objects.create(question="Well?")
390.         self.assertEqual(Poll.objects.count(), 1)
391.         pub_date = my_poll.pub_date
392.         cache.set('question', my_poll)
393.         cached_poll = cache.get('question')
394.         self.assertEqual(cached_poll.pub_date, pub_date)
395.         # We only want the default expensive calculation run once
396.         self.assertEqual(expensive_calculation.num_runs, 1)
397. 
398.     def test_cache_write_for_model_instance_with_deferred(self):
399.         # Don't want fields with callable as default to be called on cache write
400.         expensive_calculation.num_runs = 0
401.         Poll.objects.all().delete()
402.         Poll.objects.create(question="What?")
403.         self.assertEqual(expensive_calculation.num_runs, 1)
404.         defer_qs = Poll.objects.all().defer('question')
405.         self.assertEqual(defer_qs.count(), 1)
406.         self.assertEqual(expensive_calculation.num_runs, 1)
407.         cache.set('deferred_queryset', defer_qs)
408.         # cache set should not re-evaluate default functions
409.         self.assertEqual(expensive_calculation.num_runs, 1)
410. 
411.     def test_cache_read_for_model_instance_with_deferred(self):
412.         # Don't want fields with callable as default to be called on cache read
413.         expensive_calculation.num_runs = 0
414.         Poll.objects.all().delete()
415.         Poll.objects.create(question="What?")
416.         self.assertEqual(expensive_calculation.num_runs, 1)
417.         defer_qs = Poll.objects.all().defer('question')
418.         self.assertEqual(defer_qs.count(), 1)
419.         cache.set('deferred_queryset', defer_qs)
420.         self.assertEqual(expensive_calculation.num_runs, 1)
421.         runs_before_cache_read = expensive_calculation.num_runs
422.         cache.get('deferred_queryset')
423.         # We only want the default expensive calculation run on creation and set
424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)
425. 
426.     def test_expiration(self):
427.         # Cache values can be set to expire
428.         cache.set('expire1', 'very quickly', 1)
429.         cache.set('expire2', 'very quickly', 1)
430.         cache.set('expire3', 'very quickly', 1)
431. 
432.         time.sleep(2)
433.         self.assertIsNone(cache.get("expire1"))
434. 
435.         self.assertIs(cache.add("expire2", "newvalue"), True)
436.         self.assertEqual(cache.get("expire2"), "newvalue")
437.         self.assertIs(cache.has_key("expire3"), False)
438. 
439.     def test_touch(self):
440.         # cache.touch() updates the timeout.
441.         cache.set('expire1', 'very quickly', timeout=1)
442.         self.assertIs(cache.touch('expire1', timeout=4), True)
443.         time.sleep(2)
444.         self.assertIs(cache.has_key('expire1'), True)
445.         time.sleep(3)
446.         self.assertIs(cache.has_key('expire1'), False)
447.         # cache.touch() works without the timeout argument.
448.         cache.set('expire1', 'very quickly', timeout=1)
449.         self.assertIs(cache.touch('expire1'), True)
450.         time.sleep(2)
451.         self.assertIs(cache.has_key('expire1'), True)
452. 
453.         self.assertIs(cache.touch('nonexistent'), False)
454. 
455.     def test_unicode(self):
456.         # Unicode values can be cached
457.         stuff = {
458.             'ascii': 'ascii_value',
459.             'unicode_ascii': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1',
460.             'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n': 'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2',
461.             'ascii2': {'x': 1}
462.         }
463.         # Test `set`
464.         for (key, value) in stuff.items():
465.             with self.subTest(key=key):
466.                 cache.set(key, value)
467.                 self.assertEqual(cache.get(key), value)
468. 
469.         # Test `add`
470.         for (key, value) in stuff.items():
471.             with self.subTest(key=key):
472.                 self.assertIs(cache.delete(key), True)
473.                 self.assertIs(cache.add(key, value), True)
474.                 self.assertEqual(cache.get(key), value)
475. 
476.         # Test `set_many`
477.         for (key, value) in stuff.items():
478.             self.assertIs(cache.delete(key), True)
479.         cache.set_many(stuff)
480.         for (key, value) in stuff.items():
481.             with self.subTest(key=key):
482.                 self.assertEqual(cache.get(key), value)
483. 
484.     def test_binary_string(self):
485.         # Binary strings should be cacheable
486.         from zlib import compress, decompress
487.         value = 'value_to_be_compressed'
488.         compressed_value = compress(value.encode())
489. 
490.         # Test set
491.         cache.set('binary1', compressed_value)
492.         compressed_result = cache.get('binary1')
493.         self.assertEqual(compressed_value, compressed_result)
494.         self.assertEqual(value, decompress(compressed_result).decode())
495. 
496.         # Test add
497.         self.assertIs(cache.add('binary1-add', compressed_value), True)
498.         compressed_result = cache.get('binary1-add')
499.         self.assertEqual(compressed_value, compressed_result)
500.         self.assertEqual(value, decompress(compressed_result).decode())
501. 
502.         # Test set_many
503.         cache.set_many({'binary1-set_many': compressed_value})
504.         compressed_result = cache.get('binary1-set_many')
505.         self.assertEqual(compressed_value, compressed_result)
506.         self.assertEqual(value, decompress(compressed_result).decode())
507. 
508.     def test_set_many(self):
509.         # Multiple keys can be set using set_many
510.         cache.set_many({"key1": "spam", "key2": "eggs"})
511.         self.assertEqual(cache.get("key1"), "spam")
512.         self.assertEqual(cache.get("key2"), "eggs")
513. 
514.     def test_set_many_returns_empty_list_on_success(self):
515.         """set_many() returns an empty list when all keys are inserted."""
516.         failing_keys = cache.set_many({'key1': 'spam', 'key2': 'eggs'})
517.         self.assertEqual(failing_keys, [])
518. 
519.     def test_set_many_expiration(self):
520.         # set_many takes a second ``timeout`` parameter
521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)
522.         time.sleep(2)
523.         self.assertIsNone(cache.get("key1"))
524.         self.assertIsNone(cache.get("key2"))
525. 
526.     def test_delete_many(self):
527.         # Multiple keys can be deleted using delete_many
528.         cache.set_many({'key1': 'spam', 'key2': 'eggs', 'key3': 'ham'})
529.         cache.delete_many(["key1", "key2"])
530.         self.assertIsNone(cache.get("key1"))
531.         self.assertIsNone(cache.get("key2"))
532.         self.assertEqual(cache.get("key3"), "ham")
533. 
534.     def test_clear(self):
535.         # The cache can be emptied using clear
536.         cache.set_many({'key1': 'spam', 'key2': 'eggs'})
537.         cache.clear()
538.         self.assertIsNone(cache.get("key1"))
539.         self.assertIsNone(cache.get("key2"))
540. 
541.     def test_long_timeout(self):
542.         """
543.         Follow memcached's convention where a timeout greater than 30 days is
544.         treated as an absolute expiration timestamp instead of a relative
545.         offset (#12399).
546.         """
547.         cache.set('key1', 'eggs', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second
548.         self.assertEqual(cache.get('key1'), 'eggs')
549. 
550.         self.assertIs(cache.add('key2', 'ham', 60 * 60 * 24 * 30 + 1), True)
551.         self.assertEqual(cache.get('key2'), 'ham')
552. 
553.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 60 * 60 * 24 * 30 + 1)
554.         self.assertEqual(cache.get('key3'), 'sausage')
555.         self.assertEqual(cache.get('key4'), 'lobster bisque')
556. 
557.     def test_forever_timeout(self):
558.         """
559.         Passing in None into timeout results in a value that is cached forever
560.         """
561.         cache.set('key1', 'eggs', None)
562.         self.assertEqual(cache.get('key1'), 'eggs')
563. 
564.         self.assertIs(cache.add('key2', 'ham', None), True)
565.         self.assertEqual(cache.get('key2'), 'ham')
566.         self.assertIs(cache.add('key1', 'new eggs', None), False)
567.         self.assertEqual(cache.get('key1'), 'eggs')
568. 
569.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, None)
570.         self.assertEqual(cache.get('key3'), 'sausage')
571.         self.assertEqual(cache.get('key4'), 'lobster bisque')
572. 
573.         cache.set('key5', 'belgian fries', timeout=1)
574.         self.assertIs(cache.touch('key5', timeout=None), True)
575.         time.sleep(2)
576.         self.assertEqual(cache.get('key5'), 'belgian fries')
577. 
578.     def test_zero_timeout(self):
579.         """
580.         Passing in zero into timeout results in a value that is not cached
581.         """
582.         cache.set('key1', 'eggs', 0)
583.         self.assertIsNone(cache.get('key1'))
584. 
585.         self.assertIs(cache.add('key2', 'ham', 0), True)
586.         self.assertIsNone(cache.get('key2'))
587. 
588.         cache.set_many({'key3': 'sausage', 'key4': 'lobster bisque'}, 0)
589.         self.assertIsNone(cache.get('key3'))
590.         self.assertIsNone(cache.get('key4'))
591. 
592.         cache.set('key5', 'belgian fries', timeout=5)
593.         self.assertIs(cache.touch('key5', timeout=0), True)
594.         self.assertIsNone(cache.get('key5'))
595. 
596.     def test_float_timeout(self):
597.         # Make sure a timeout given as a float doesn't crash anything.
598.         cache.set("key1", "spam", 100.2)
599.         self.assertEqual(cache.get("key1"), "spam")
600. 
601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):
602.         try:
603.             cull_cache = caches[cull_cache_name]
604.         except InvalidCacheBackendError:
605.             self.skipTest("Culling isn't implemented.")
606. 
607.         # Create initial cache key entries. This will overflow the cache,
608.         # causing a cull.
609.         for i in range(1, initial_count):
610.             cull_cache.set('cull%d' % i, 'value', 1000)
611.         count = 0
612.         # Count how many keys are left in the cache.
613.         for i in range(1, initial_count):
614.             if cull_cache.has_key('cull%d' % i):
615.                 count += 1
616.         self.assertEqual(count, final_count)
617. 
618.     def test_cull(self):
619.         self._perform_cull_test('cull', 50, 29)
620. 
621.     def test_zero_cull(self):
622.         self._perform_cull_test('zero_cull', 50, 19)
623. 
624.     def _perform_invalid_key_test(self, key, expected_warning):
625.         """
626.         All the builtin backends should warn (except memcached that should
627.         error) on keys that would be refused by memcached. This encourages
628.         portable caching code without making it too difficult to use production
629.         backends with more liberal key rules. Refs #6447.
630.         """
631.         # mimic custom ``make_key`` method being defined since the default will
632.         # never show the below warnings
633.         def func(key, *args):
634.             return key
635. 
636.         old_func = cache.key_func
637.         cache.key_func = func
638. 
639.         try:
640.             with self.assertWarns(CacheKeyWarning) as cm:
641.                 cache.set(key, 'value')
642.             self.assertEqual(str(cm.warning), expected_warning)
643.         finally:
644.             cache.key_func = old_func
645. 
646.     def test_invalid_key_characters(self):
647.         # memcached doesn't allow whitespace or control characters in keys.
648.         key = 'key with spaces and æ¸…'
649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)
650. 
651.     def test_invalid_key_length(self):
652.         # memcached limits key length to 250.
653.         key = ('a' * 250) + 'æ¸…'
654.         expected_warning = (
655.             'Cache key will cause errors if used with memcached: '
656.             '%r (longer than %s)' % (key, 250)
657.         )
658.         self._perform_invalid_key_test(key, expected_warning)
659. 
660.     def test_cache_versioning_get_set(self):
661.         # set, using default version = 1
662.         cache.set('answer1', 42)
663.         self.assertEqual(cache.get('answer1'), 42)
664.         self.assertEqual(cache.get('answer1', version=1), 42)
665.         self.assertIsNone(cache.get('answer1', version=2))
666. 
667.         self.assertIsNone(caches['v2'].get('answer1'))
668.         self.assertEqual(caches['v2'].get('answer1', version=1), 42)
669.         self.assertIsNone(caches['v2'].get('answer1', version=2))
670. 
671.         # set, default version = 1, but manually override version = 2
672.         cache.set('answer2', 42, version=2)
673.         self.assertIsNone(cache.get('answer2'))
674.         self.assertIsNone(cache.get('answer2', version=1))
675.         self.assertEqual(cache.get('answer2', version=2), 42)
676. 
677.         self.assertEqual(caches['v2'].get('answer2'), 42)
678.         self.assertIsNone(caches['v2'].get('answer2', version=1))
679.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
680. 
681.         # v2 set, using default version = 2
682.         caches['v2'].set('answer3', 42)
683.         self.assertIsNone(cache.get('answer3'))
684.         self.assertIsNone(cache.get('answer3', version=1))
685.         self.assertEqual(cache.get('answer3', version=2), 42)
686. 
687.         self.assertEqual(caches['v2'].get('answer3'), 42)
688.         self.assertIsNone(caches['v2'].get('answer3', version=1))
689.         self.assertEqual(caches['v2'].get('answer3', version=2), 42)
690. 
691.         # v2 set, default version = 2, but manually override version = 1
692.         caches['v2'].set('answer4', 42, version=1)
693.         self.assertEqual(cache.get('answer4'), 42)
694.         self.assertEqual(cache.get('answer4', version=1), 42)
695.         self.assertIsNone(cache.get('answer4', version=2))
696. 
697.         self.assertIsNone(caches['v2'].get('answer4'))
698.         self.assertEqual(caches['v2'].get('answer4', version=1), 42)
699.         self.assertIsNone(caches['v2'].get('answer4', version=2))
700. 
701.     def test_cache_versioning_add(self):
702. 
703.         # add, default version = 1, but manually override version = 2
704.         self.assertIs(cache.add('answer1', 42, version=2), True)
705.         self.assertIsNone(cache.get('answer1', version=1))
706.         self.assertEqual(cache.get('answer1', version=2), 42)
707. 
708.         self.assertIs(cache.add('answer1', 37, version=2), False)
709.         self.assertIsNone(cache.get('answer1', version=1))
710.         self.assertEqual(cache.get('answer1', version=2), 42)
711. 
712.         self.assertIs(cache.add('answer1', 37, version=1), True)
713.         self.assertEqual(cache.get('answer1', version=1), 37)
714.         self.assertEqual(cache.get('answer1', version=2), 42)
715. 
716.         # v2 add, using default version = 2
717.         self.assertIs(caches['v2'].add('answer2', 42), True)
718.         self.assertIsNone(cache.get('answer2', version=1))
719.         self.assertEqual(cache.get('answer2', version=2), 42)
720. 
721.         self.assertIs(caches['v2'].add('answer2', 37), False)
722.         self.assertIsNone(cache.get('answer2', version=1))
723.         self.assertEqual(cache.get('answer2', version=2), 42)
724. 
725.         self.assertIs(caches['v2'].add('answer2', 37, version=1), True)
726.         self.assertEqual(cache.get('answer2', version=1), 37)
727.         self.assertEqual(cache.get('answer2', version=2), 42)
728. 
729.         # v2 add, default version = 2, but manually override version = 1
730.         self.assertIs(caches['v2'].add('answer3', 42, version=1), True)
731.         self.assertEqual(cache.get('answer3', version=1), 42)
732.         self.assertIsNone(cache.get('answer3', version=2))
733. 
734.         self.assertIs(caches['v2'].add('answer3', 37, version=1), False)
735.         self.assertEqual(cache.get('answer3', version=1), 42)
736.         self.assertIsNone(cache.get('answer3', version=2))
737. 
738.         self.assertIs(caches['v2'].add('answer3', 37), True)
739.         self.assertEqual(cache.get('answer3', version=1), 42)
740.         self.assertEqual(cache.get('answer3', version=2), 37)
741. 
742.     def test_cache_versioning_has_key(self):
743.         cache.set('answer1', 42)
744. 
745.         # has_key
746.         self.assertIs(cache.has_key('answer1'), True)
747.         self.assertIs(cache.has_key('answer1', version=1), True)
748.         self.assertIs(cache.has_key('answer1', version=2), False)
749. 
750.         self.assertIs(caches['v2'].has_key('answer1'), False)
751.         self.assertIs(caches['v2'].has_key('answer1', version=1), True)
752.         self.assertIs(caches['v2'].has_key('answer1', version=2), False)
753. 
754.     def test_cache_versioning_delete(self):
755.         cache.set('answer1', 37, version=1)
756.         cache.set('answer1', 42, version=2)
757.         self.assertIs(cache.delete('answer1'), True)
758.         self.assertIsNone(cache.get('answer1', version=1))
759.         self.assertEqual(cache.get('answer1', version=2), 42)
760. 
761.         cache.set('answer2', 37, version=1)
762.         cache.set('answer2', 42, version=2)
763.         self.assertIs(cache.delete('answer2', version=2), True)
764.         self.assertEqual(cache.get('answer2', version=1), 37)
765.         self.assertIsNone(cache.get('answer2', version=2))
766. 
767.         cache.set('answer3', 37, version=1)
768.         cache.set('answer3', 42, version=2)
769.         self.assertIs(caches['v2'].delete('answer3'), True)
770.         self.assertEqual(cache.get('answer3', version=1), 37)
771.         self.assertIsNone(cache.get('answer3', version=2))
772. 
773.         cache.set('answer4', 37, version=1)
774.         cache.set('answer4', 42, version=2)
775.         self.assertIs(caches['v2'].delete('answer4', version=1), True)
776.         self.assertIsNone(cache.get('answer4', version=1))
777.         self.assertEqual(cache.get('answer4', version=2), 42)
778. 
779.     def test_cache_versioning_incr_decr(self):
780.         cache.set('answer1', 37, version=1)
781.         cache.set('answer1', 42, version=2)
782.         self.assertEqual(cache.incr('answer1'), 38)
783.         self.assertEqual(cache.get('answer1', version=1), 38)
784.         self.assertEqual(cache.get('answer1', version=2), 42)
785.         self.assertEqual(cache.decr('answer1'), 37)
786.         self.assertEqual(cache.get('answer1', version=1), 37)
787.         self.assertEqual(cache.get('answer1', version=2), 42)
788. 
789.         cache.set('answer2', 37, version=1)
790.         cache.set('answer2', 42, version=2)
791.         self.assertEqual(cache.incr('answer2', version=2), 43)
792.         self.assertEqual(cache.get('answer2', version=1), 37)
793.         self.assertEqual(cache.get('answer2', version=2), 43)
794.         self.assertEqual(cache.decr('answer2', version=2), 42)
795.         self.assertEqual(cache.get('answer2', version=1), 37)
796.         self.assertEqual(cache.get('answer2', version=2), 42)
797. 
798.         cache.set('answer3', 37, version=1)
799.         cache.set('answer3', 42, version=2)
800.         self.assertEqual(caches['v2'].incr('answer3'), 43)
801.         self.assertEqual(cache.get('answer3', version=1), 37)
802.         self.assertEqual(cache.get('answer3', version=2), 43)
803.         self.assertEqual(caches['v2'].decr('answer3'), 42)
804.         self.assertEqual(cache.get('answer3', version=1), 37)
805.         self.assertEqual(cache.get('answer3', version=2), 42)
806. 
807.         cache.set('answer4', 37, version=1)
808.         cache.set('answer4', 42, version=2)
809.         self.assertEqual(caches['v2'].incr('answer4', version=1), 38)
810.         self.assertEqual(cache.get('answer4', version=1), 38)
811.         self.assertEqual(cache.get('answer4', version=2), 42)
812.         self.assertEqual(caches['v2'].decr('answer4', version=1), 37)
813.         self.assertEqual(cache.get('answer4', version=1), 37)
814.         self.assertEqual(cache.get('answer4', version=2), 42)
815. 
816.     def test_cache_versioning_get_set_many(self):
817.         # set, using default version = 1
818.         cache.set_many({'ford1': 37, 'arthur1': 42})
819.         self.assertEqual(cache.get_many(['ford1', 'arthur1']), {'ford1': 37, 'arthur1': 42})
820.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
821.         self.assertEqual(cache.get_many(['ford1', 'arthur1'], version=2), {})
822. 
823.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1']), {})
824.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=1), {'ford1': 37, 'arthur1': 42})
825.         self.assertEqual(caches['v2'].get_many(['ford1', 'arthur1'], version=2), {})
826. 
827.         # set, default version = 1, but manually override version = 2
828.         cache.set_many({'ford2': 37, 'arthur2': 42}, version=2)
829.         self.assertEqual(cache.get_many(['ford2', 'arthur2']), {})
830.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=1), {})
831.         self.assertEqual(cache.get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
832. 
833.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2']), {'ford2': 37, 'arthur2': 42})
834.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=1), {})
835.         self.assertEqual(caches['v2'].get_many(['ford2', 'arthur2'], version=2), {'ford2': 37, 'arthur2': 42})
836. 
837.         # v2 set, using default version = 2
838.         caches['v2'].set_many({'ford3': 37, 'arthur3': 42})
839.         self.assertEqual(cache.get_many(['ford3', 'arthur3']), {})
840.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=1), {})
841.         self.assertEqual(cache.get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
842. 
843.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3']), {'ford3': 37, 'arthur3': 42})
844.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=1), {})
845.         self.assertEqual(caches['v2'].get_many(['ford3', 'arthur3'], version=2), {'ford3': 37, 'arthur3': 42})
846. 
847.         # v2 set, default version = 2, but manually override version = 1
848.         caches['v2'].set_many({'ford4': 37, 'arthur4': 42}, version=1)
849.         self.assertEqual(cache.get_many(['ford4', 'arthur4']), {'ford4': 37, 'arthur4': 42})
850.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
851.         self.assertEqual(cache.get_many(['ford4', 'arthur4'], version=2), {})
852. 
853.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4']), {})
854.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=1), {'ford4': 37, 'arthur4': 42})
855.         self.assertEqual(caches['v2'].get_many(['ford4', 'arthur4'], version=2), {})
856. 
857.     def test_incr_version(self):
858.         cache.set('answer', 42, version=2)
859.         self.assertIsNone(cache.get('answer'))
860.         self.assertIsNone(cache.get('answer', version=1))
861.         self.assertEqual(cache.get('answer', version=2), 42)
862.         self.assertIsNone(cache.get('answer', version=3))
863. 
864.         self.assertEqual(cache.incr_version('answer', version=2), 3)
865.         self.assertIsNone(cache.get('answer'))
866.         self.assertIsNone(cache.get('answer', version=1))
867.         self.assertIsNone(cache.get('answer', version=2))
868.         self.assertEqual(cache.get('answer', version=3), 42)
869. 
870.         caches['v2'].set('answer2', 42)
871.         self.assertEqual(caches['v2'].get('answer2'), 42)
872.         self.assertIsNone(caches['v2'].get('answer2', version=1))
873.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
874.         self.assertIsNone(caches['v2'].get('answer2', version=3))
875. 
876.         self.assertEqual(caches['v2'].incr_version('answer2'), 3)
877.         self.assertIsNone(caches['v2'].get('answer2'))
878.         self.assertIsNone(caches['v2'].get('answer2', version=1))
879.         self.assertIsNone(caches['v2'].get('answer2', version=2))
880.         self.assertEqual(caches['v2'].get('answer2', version=3), 42)
881. 
882.         with self.assertRaises(ValueError):
883.             cache.incr_version('does_not_exist')
884. 
885.     def test_decr_version(self):
886.         cache.set('answer', 42, version=2)
887.         self.assertIsNone(cache.get('answer'))
888.         self.assertIsNone(cache.get('answer', version=1))
889.         self.assertEqual(cache.get('answer', version=2), 42)
890. 
891.         self.assertEqual(cache.decr_version('answer', version=2), 1)
892.         self.assertEqual(cache.get('answer'), 42)
893.         self.assertEqual(cache.get('answer', version=1), 42)
894.         self.assertIsNone(cache.get('answer', version=2))
895. 
896.         caches['v2'].set('answer2', 42)
897.         self.assertEqual(caches['v2'].get('answer2'), 42)
898.         self.assertIsNone(caches['v2'].get('answer2', version=1))
899.         self.assertEqual(caches['v2'].get('answer2', version=2), 42)
900. 
901.         self.assertEqual(caches['v2'].decr_version('answer2'), 1)
902.         self.assertIsNone(caches['v2'].get('answer2'))
903.         self.assertEqual(caches['v2'].get('answer2', version=1), 42)
904.         self.assertIsNone(caches['v2'].get('answer2', version=2))
905. 
906.         with self.assertRaises(ValueError):
907.             cache.decr_version('does_not_exist', version=2)
908. 
909.     def test_custom_key_func(self):
910.         # Two caches with different key functions aren't visible to each other
911.         cache.set('answer1', 42)
912.         self.assertEqual(cache.get('answer1'), 42)
913.         self.assertIsNone(caches['custom_key'].get('answer1'))
914.         self.assertIsNone(caches['custom_key2'].get('answer1'))
915. 
916.         caches['custom_key'].set('answer2', 42)
917.         self.assertIsNone(cache.get('answer2'))
918.         self.assertEqual(caches['custom_key'].get('answer2'), 42)
919.         self.assertEqual(caches['custom_key2'].get('answer2'), 42)
920. 
921.     def test_cache_write_unpicklable_object(self):
922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)
923.         fetch_middleware.cache = cache
924. 
925.         request = self.factory.get('/cache/test')
926.         request._cache_update_cache = True
927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
928.         self.assertIsNone(get_cache_data)
929. 
930.         content = 'Testing cookie serialization.'
931. 
932.         def get_response(req):
933.             response = HttpResponse(content)
934.             response.set_cookie('foo', 'bar')
935.             return response
936. 
937.         update_middleware = UpdateCacheMiddleware(get_response)
938.         update_middleware.cache = cache
939.         response = update_middleware(request)
940. 
941.         get_cache_data = fetch_middleware.process_request(request)
942.         self.assertIsNotNone(get_cache_data)
943.         self.assertEqual(get_cache_data.content, content.encode())
944.         self.assertEqual(get_cache_data.cookies, response.cookies)
945. 
946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)
947.         get_cache_data = fetch_middleware.process_request(request)
948.         self.assertIsNotNone(get_cache_data)
949.         self.assertEqual(get_cache_data.content, content.encode())
950.         self.assertEqual(get_cache_data.cookies, response.cookies)
951. 
952.     def test_add_fail_on_pickleerror(self):
953.         # Shouldn't fail silently if trying to cache an unpicklable type.
954.         with self.assertRaises(pickle.PickleError):
955.             cache.add('unpicklable', Unpicklable())
956. 
957.     def test_set_fail_on_pickleerror(self):
958.         with self.assertRaises(pickle.PickleError):
959.             cache.set('unpicklable', Unpicklable())
960. 
961.     def test_get_or_set(self):
962.         self.assertIsNone(cache.get('projector'))
963.         self.assertEqual(cache.get_or_set('projector', 42), 42)
964.         self.assertEqual(cache.get('projector'), 42)
965.         self.assertIsNone(cache.get_or_set('null', None))
966. 
967.     def test_get_or_set_callable(self):
968.         def my_callable():
969.             return 'value'
970. 
971.         self.assertEqual(cache.get_or_set('mykey', my_callable), 'value')
972.         self.assertEqual(cache.get_or_set('mykey', my_callable()), 'value')
973. 
974.     def test_get_or_set_callable_returning_none(self):
975.         self.assertIsNone(cache.get_or_set('mykey', lambda: None))
976.         # Previous get_or_set() doesn't store None in the cache.
977.         self.assertEqual(cache.get('mykey', 'default'), 'default')
978. 
979.     def test_get_or_set_version(self):
980.         msg = "get_or_set() missing 1 required positional argument: 'default'"
981.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
982.         with self.assertRaisesMessage(TypeError, msg):
983.             cache.get_or_set('brian')
984.         with self.assertRaisesMessage(TypeError, msg):
985.             cache.get_or_set('brian', version=1)
986.         self.assertIsNone(cache.get('brian', version=1))
987.         self.assertEqual(cache.get_or_set('brian', 42, version=1), 42)
988.         self.assertEqual(cache.get_or_set('brian', 1979, version=2), 1979)
989.         self.assertIsNone(cache.get('brian', version=3))
990. 
991.     def test_get_or_set_racing(self):
992.         with mock.patch('%s.%s' % (settings.CACHES['default']['BACKEND'], 'add')) as cache_add:
993.             # Simulate cache.add() failing to add a value. In that case, the
994.             # default value should be returned.
995.             cache_add.return_value = False
996.             self.assertEqual(cache.get_or_set('key', 'default'), 'default')
997. 
998. 
999. @override_settings(CACHES=caches_setting_for_tests(
1000.     BACKEND='django.core.cache.backends.db.DatabaseCache',
1001.     # Spaces are used in the table name to ensure quoting/escaping is working
1002.     LOCATION='test cache table'
1003. ))
1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):
1005. 
1006.     available_apps = ['cache']
1007. 
1008.     def setUp(self):
1009.         # The super calls needs to happen first for the settings override.
1010.         super().setUp()
1011.         self.create_table()
1012. 
1013.     def tearDown(self):
1014.         # The super call needs to happen first because it uses the database.
1015.         super().tearDown()
1016.         self.drop_table()
1017. 
1018.     def create_table(self):
1019.         management.call_command('createcachetable', verbosity=0)
1020. 
1021.     def drop_table(self):
1022.         with connection.cursor() as cursor:
1023.             table_name = connection.ops.quote_name('test cache table')
1024.             cursor.execute('DROP TABLE %s' % table_name)
1025. 
1026.     def test_get_many_num_queries(self):
1027.         cache.set_many({'a': 1, 'b': 2})
1028.         cache.set('expired', 'expired', 0.01)
1029.         with self.assertNumQueries(1):
1030.             self.assertEqual(cache.get_many(['a', 'b']), {'a': 1, 'b': 2})
1031.         time.sleep(0.02)
1032.         with self.assertNumQueries(2):
1033.             self.assertEqual(cache.get_many(['a', 'b', 'expired']), {'a': 1, 'b': 2})
1034. 
1035.     def test_delete_many_num_queries(self):
1036.         cache.set_many({'a': 1, 'b': 2, 'c': 3})
1037.         with self.assertNumQueries(1):
1038.             cache.delete_many(['a', 'b', 'c'])
1039. 
1040.     def test_zero_cull(self):
1041.         self._perform_cull_test('zero_cull', 50, 18)
1042. 
1043.     def test_second_call_doesnt_crash(self):
1044.         out = io.StringIO()
1045.         management.call_command('createcachetable', stdout=out)
1046.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' already exists.\n" * len(settings.CACHES))
1047. 
1048.     @override_settings(CACHES=caches_setting_for_tests(
1049.         BACKEND='django.core.cache.backends.db.DatabaseCache',
1050.         # Use another table name to avoid the 'table already exists' message.
1051.         LOCATION='createcachetable_dry_run_mode'
1052.     ))
1053.     def test_createcachetable_dry_run_mode(self):
1054.         out = io.StringIO()
1055.         management.call_command('createcachetable', dry_run=True, stdout=out)
1056.         output = out.getvalue()
1057.         self.assertTrue(output.startswith("CREATE TABLE"))
1058. 
1059.     def test_createcachetable_with_table_argument(self):
1060.         """
1061.         Delete and recreate cache table with legacy behavior (explicitly
1062.         specifying the table name).
1063.         """
1064.         self.drop_table()
1065.         out = io.StringIO()
1066.         management.call_command(
1067.             'createcachetable',
1068.             'test cache table',
1069.             verbosity=2,
1070.             stdout=out,
1071.         )
1072.         self.assertEqual(out.getvalue(), "Cache table 'test cache table' created.\n")
1073. 
1074. 
1075. @override_settings(USE_TZ=True)
1076. class DBCacheWithTimeZoneTests(DBCacheTests):
1077.     pass
1078. 
1079. 
1080. class DBCacheRouter:
1081.     """A router that puts the cache table on the 'other' database."""
1082. 
1083.     def db_for_read(self, model, **hints):
1084.         if model._meta.app_label == 'django_cache':
1085.             return 'other'
1086.         return None
1087. 
1088.     def db_for_write(self, model, **hints):
1089.         if model._meta.app_label == 'django_cache':
1090.             return 'other'
1091.         return None
1092. 
1093.     def allow_migrate(self, db, app_label, **hints):
1094.         if app_label == 'django_cache':
1095.             return db == 'other'
1096.         return None
1097. 
1098. 
1099. @override_settings(
1100.     CACHES={
1101.         'default': {
1102.             'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
1103.             'LOCATION': 'my_cache_table',
1104.         },
1105.     },
1106. )
1107. class CreateCacheTableForDBCacheTests(TestCase):
1108.     databases = {'default', 'other'}
1109. 
1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])
1111.     def test_createcachetable_observes_database_router(self):
1112.         # cache table should not be created on 'default'
1113.         with self.assertNumQueries(0, using='default'):
1114.             management.call_command('createcachetable', database='default', verbosity=0)
1115.         # cache table should be created on 'other'
1116.         # Queries:
1117.         #   1: check table doesn't already exist
1118.         #   2: create savepoint (if transactional DDL is supported)
1119.         #   3: create the table
1120.         #   4: create the index
1121.         #   5: release savepoint (if transactional DDL is supported)
1122.         num = 5 if connections['other'].features.can_rollback_ddl else 3
1123.         with self.assertNumQueries(num, using='other'):
1124.             management.call_command('createcachetable', database='other', verbosity=0)
1125. 
1126. 
1127. class PicklingSideEffect:
1128. 
1129.     def __init__(self, cache):
1130.         self.cache = cache
1131.         self.locked = False
1132. 
1133.     def __getstate__(self):
1134.         self.locked = self.cache._lock.locked()
1135.         return {}
1136. 
1137. 
1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(
1139.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1140.     OPTIONS={'MAX_ENTRIES': 9},
1141. ))
1142. 
1143. 
1144. @override_settings(CACHES=caches_setting_for_tests(
1145.     BACKEND='django.core.cache.backends.locmem.LocMemCache',
1146. ))
1147. class LocMemCacheTests(BaseCacheTests, TestCase):
1148. 
1149.     def setUp(self):
1150.         super().setUp()
1151. 
1152.         # LocMem requires a hack to make the other caches
1153.         # share a data store with the 'normal' cache.
1154.         caches['prefix']._cache = cache._cache
1155.         caches['prefix']._expire_info = cache._expire_info
1156. 
1157.         caches['v2']._cache = cache._cache
1158.         caches['v2']._expire_info = cache._expire_info
1159. 
1160.         caches['custom_key']._cache = cache._cache
1161.         caches['custom_key']._expire_info = cache._expire_info
1162. 
1163.         caches['custom_key2']._cache = cache._cache
1164.         caches['custom_key2']._expire_info = cache._expire_info
1165. 
1166.     @override_settings(CACHES={
1167.         'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'},
1168.         'other': {
1169.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1170.             'LOCATION': 'other'
1171.         },
1172.     })
1173.     def test_multiple_caches(self):
1174.         "Multiple locmem caches are isolated"
1175.         cache.set('value', 42)
1176.         self.assertEqual(caches['default'].get('value'), 42)
1177.         self.assertIsNone(caches['other'].get('value'))
1178. 
1179.     def test_locking_on_pickle(self):
1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""
1181.         bad_obj = PicklingSideEffect(cache)
1182.         cache.set('set', bad_obj)
1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1184. 
1185.         self.assertIs(cache.add('add', bad_obj), True)
1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")
1187. 
1188.     def test_incr_decr_timeout(self):
1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""
1190.         key = 'value'
1191.         _key = cache.make_key(key)
1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)
1193.         expire = cache._expire_info[_key]
1194.         self.assertEqual(cache.incr(key), 2)
1195.         self.assertEqual(expire, cache._expire_info[_key])
1196.         self.assertEqual(cache.decr(key), 1)
1197.         self.assertEqual(expire, cache._expire_info[_key])
1198. 
1199.     @limit_locmem_entries
1200.     def test_lru_get(self):
1201.         """get() moves cache keys."""
1202.         for key in range(9):
1203.             cache.set(key, key, timeout=None)
1204.         for key in range(6):
1205.             self.assertEqual(cache.get(key), key)
1206.         cache.set(9, 9, timeout=None)
1207.         for key in range(6):
1208.             self.assertEqual(cache.get(key), key)
1209.         for key in range(6, 9):
1210.             self.assertIsNone(cache.get(key))
1211.         self.assertEqual(cache.get(9), 9)
1212. 
1213.     @limit_locmem_entries
1214.     def test_lru_set(self):
1215.         """set() moves cache keys."""
1216.         for key in range(9):
1217.             cache.set(key, key, timeout=None)
1218.         for key in range(3, 9):
1219.             cache.set(key, key, timeout=None)
1220.         cache.set(9, 9, timeout=None)
1221.         for key in range(3, 10):
1222.             self.assertEqual(cache.get(key), key)
1223.         for key in range(3):
1224.             self.assertIsNone(cache.get(key))
1225. 
1226.     @limit_locmem_entries
1227.     def test_lru_incr(self):
1228.         """incr() moves cache keys."""
1229.         for key in range(9):
1230.             cache.set(key, key, timeout=None)
1231.         for key in range(6):
1232.             self.assertEqual(cache.incr(key), key + 1)
1233.         cache.set(9, 9, timeout=None)
1234.         for key in range(6):
1235.             self.assertEqual(cache.get(key), key + 1)
1236.         for key in range(6, 9):
1237.             self.assertIsNone(cache.get(key))
1238.         self.assertEqual(cache.get(9), 9)
1239. 
1240. 
1241. # memcached backend isn't guaranteed to be available.
1242. # To check the memcached backend, the test settings file will
1243. # need to contain at least one cache backend setting that points at
1244. # your memcache server.
1245. configured_caches = {}
1246. for _cache_params in settings.CACHES.values():
1247.     configured_caches[_cache_params['BACKEND']] = _cache_params
1248. 
1249. MemcachedCache_params = configured_caches.get('django.core.cache.backends.memcached.MemcachedCache')
1250. PyLibMCCache_params = configured_caches.get('django.core.cache.backends.memcached.PyLibMCCache')
1251. 
1252. # The memcached backends don't support cull-related options like `MAX_ENTRIES`.
1253. memcached_excluded_caches = {'cull', 'zero_cull'}
1254. 
1255. 
1256. class BaseMemcachedTests(BaseCacheTests):
1257. 
1258.     # By default it's assumed that the client doesn't clean up connections
1259.     # properly, in which case the backend must do so after each request.
1260.     should_disconnect_on_close = True
1261. 
1262.     def test_location_multiple_servers(self):
1263.         locations = [
1264.             ['server1.tld', 'server2:11211'],
1265.             'server1.tld;server2:11211',
1266.             'server1.tld,server2:11211',
1267.         ]
1268.         for location in locations:
1269.             with self.subTest(location=location):
1270.                 params = {'BACKEND': self.base_params['BACKEND'], 'LOCATION': location}
1271.                 with self.settings(CACHES={'default': params}):
1272.                     self.assertEqual(cache._servers, ['server1.tld', 'server2:11211'])
1273. 
1274.     def _perform_invalid_key_test(self, key, expected_warning):
1275.         """
1276.         While other backends merely warn, memcached should raise for an invalid
1277.         key.
1278.         """
1279.         msg = expected_warning.replace(key, cache.make_key(key))
1280.         with self.assertRaises(InvalidCacheKey) as cm:
1281.             cache.set(key, 'value')
1282.         self.assertEqual(str(cm.exception), msg)
1283. 
1284.     def test_default_never_expiring_timeout(self):
1285.         # Regression test for #22845
1286.         with self.settings(CACHES=caches_setting_for_tests(
1287.                 base=self.base_params,
1288.                 exclude=memcached_excluded_caches,
1289.                 TIMEOUT=None)):
1290.             cache.set('infinite_foo', 'bar')
1291.             self.assertEqual(cache.get('infinite_foo'), 'bar')
1292. 
1293.     def test_default_far_future_timeout(self):
1294.         # Regression test for #22845
1295.         with self.settings(CACHES=caches_setting_for_tests(
1296.                 base=self.base_params,
1297.                 exclude=memcached_excluded_caches,
1298.                 # 60*60*24*365, 1 year
1299.                 TIMEOUT=31536000)):
1300.             cache.set('future_foo', 'bar')
1301.             self.assertEqual(cache.get('future_foo'), 'bar')
1302. 
1303.     def test_memcached_deletes_key_on_failed_set(self):
1304.         # By default memcached allows objects up to 1MB. For the cache_db session
1305.         # backend to always use the current session, memcached needs to delete
1306.         # the old key if it fails to set.
1307.         # pylibmc doesn't seem to have SERVER_MAX_VALUE_LENGTH as far as I can
1308.         # tell from a quick check of its source code. This is falling back to
1309.         # the default value exposed by python-memcached on my system.
1310.         max_value_length = getattr(cache._lib, 'SERVER_MAX_VALUE_LENGTH', 1048576)
1311. 
1312.         cache.set('small_value', 'a')
1313.         self.assertEqual(cache.get('small_value'), 'a')
1314. 
1315.         large_value = 'a' * (max_value_length + 1)
1316.         try:
1317.             cache.set('small_value', large_value)
1318.         except Exception:
1319.             # Some clients (e.g. pylibmc) raise when the value is too large,
1320.             # while others (e.g. python-memcached) intentionally return True
1321.             # indicating success. This test is primarily checking that the key
1322.             # was deleted, so the return/exception behavior for the set()
1323.             # itself is not important.
1324.             pass
1325.         # small_value should be deleted, or set if configured to accept larger values
1326.         value = cache.get('small_value')
1327.         self.assertTrue(value is None or value == large_value)
1328. 
1329.     def test_close(self):
1330.         # For clients that don't manage their connections properly, the
1331.         # connection is closed when the request is complete.
1332.         signals.request_finished.disconnect(close_old_connections)
1333.         try:
1334.             with mock.patch.object(cache._lib.Client, 'disconnect_all', autospec=True) as mock_disconnect:
1335.                 signals.request_finished.send(self.__class__)
1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)
1337.         finally:
1338.             signals.request_finished.connect(close_old_connections)
1339. 
1340.     def test_set_many_returns_failing_keys(self):
1341.         def fail_set_multi(mapping, *args, **kwargs):
1342.             return mapping.keys()
1343.         with mock.patch('%s.Client.set_multi' % self.client_library_name, side_effect=fail_set_multi):
1344.             failing_keys = cache.set_many({'key': 'value'})
1345.             self.assertEqual(failing_keys, ['key'])
1346. 
1347. 
1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")
1349. @override_settings(CACHES=caches_setting_for_tests(
1350.     base=MemcachedCache_params,
1351.     exclude=memcached_excluded_caches,
1352. ))
1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):
1354.     base_params = MemcachedCache_params
1355.     client_library_name = 'memcache'
1356. 
1357.     def test_memcached_uses_highest_pickle_version(self):
1358.         # Regression test for #19810
1359.         for cache_key in settings.CACHES:
1360.             with self.subTest(cache_key=cache_key):
1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)
1362. 
1363.     @override_settings(CACHES=caches_setting_for_tests(
1364.         base=MemcachedCache_params,
1365.         exclude=memcached_excluded_caches,
1366.         OPTIONS={'server_max_value_length': 9999},
1367.     ))
1368.     def test_memcached_options(self):
1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)
1370. 
1371.     def test_default_used_when_none_is_set(self):
1372.         """
1373.         python-memcached doesn't support default in get() so this test
1374.         overrides the one in BaseCacheTests.
1375.         """
1376.         cache.set('key_default_none', None)
1377.         self.assertEqual(cache.get('key_default_none', default='default'), 'default')
1378. 
1379. 
1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")
1381. @override_settings(CACHES=caches_setting_for_tests(
1382.     base=PyLibMCCache_params,
1383.     exclude=memcached_excluded_caches,
1384. ))
1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):
1386.     base_params = PyLibMCCache_params
1387.     client_library_name = 'pylibmc'
1388.     # libmemcached manages its own connections.
1389.     should_disconnect_on_close = False
1390. 
1391.     @override_settings(CACHES=caches_setting_for_tests(
1392.         base=PyLibMCCache_params,
1393.         exclude=memcached_excluded_caches,
1394.         OPTIONS={
1395.             'binary': True,
1396.             'behaviors': {'tcp_nodelay': True},
1397.         },
1398.     ))
1399.     def test_pylibmc_options(self):
1400.         self.assertTrue(cache._cache.binary)
1401.         self.assertEqual(cache._cache.behaviors['tcp_nodelay'], int(True))
1402. 
1403. 
1404. @override_settings(CACHES=caches_setting_for_tests(
1405.     BACKEND='django.core.cache.backends.filebased.FileBasedCache',
1406. ))
1407. class FileBasedCacheTests(BaseCacheTests, TestCase):
1408.     """
1409.     Specific test cases for the file-based cache.
1410.     """
1411. 
1412.     def setUp(self):
1413.         super().setUp()
1414.         self.dirname = self.mkdtemp()
1415.         # Caches location cannot be modified through override_settings / modify_settings,
1416.         # hence settings are manipulated directly here and the setting_changed signal
1417.         # is triggered manually.
1418.         for cache_params in settings.CACHES.values():
1419.             cache_params['LOCATION'] = self.dirname
1420.         setting_changed.send(self.__class__, setting='CACHES', enter=False)
1421. 
1422.     def tearDown(self):
1423.         super().tearDown()
1424.         # Call parent first, as cache.clear() may recreate cache base directory
1425.         shutil.rmtree(self.dirname)
1426. 
1427.     def mkdtemp(self):
1428.         return tempfile.mkdtemp()
1429. 
1430.     def test_ignores_non_cache_files(self):
1431.         fname = os.path.join(self.dirname, 'not-a-cache-file')
1432.         with open(fname, 'w'):
1433.             os.utime(fname, None)
1434.         cache.clear()
1435.         self.assertTrue(os.path.exists(fname),
1436.                         'Expected cache.clear to ignore non cache files')
1437.         os.remove(fname)
1438. 
1439.     def test_clear_does_not_remove_cache_dir(self):
1440.         cache.clear()
1441.         self.assertTrue(os.path.exists(self.dirname),
1442.                         'Expected cache.clear to keep the cache dir')
1443. 
1444.     def test_creates_cache_dir_if_nonexistent(self):
1445.         os.rmdir(self.dirname)
1446.         cache.set('foo', 'bar')
1447.         self.assertTrue(os.path.exists(self.dirname))
1448. 
1449.     def test_get_ignores_enoent(self):
1450.         cache.set('foo', 'bar')
1451.         os.unlink(cache._key_to_file('foo'))
1452.         # Returns the default instead of erroring.
1453.         self.assertEqual(cache.get('foo', 'baz'), 'baz')
1454. 
1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):
1456.         with mock.patch('builtins.open', side_effect=OSError):
1457.             with self.assertRaises(OSError):
1458.                 cache.get('foo')
1459. 
1460.     def test_empty_cache_file_considered_expired(self):
1461.         cache_file = cache._key_to_file('foo')
1462.         with open(cache_file, 'wb') as fh:
1463.             fh.write(b'')
1464.         with open(cache_file, 'rb') as fh:
1465.             self.assertIs(cache._is_expired(fh), True)
1466. 
1467. 
1468. class FileBasedCachePathLibTests(FileBasedCacheTests):
1469.     def mkdtemp(self):
1470.         tmp_dir = super().mkdtemp()
1471.         return Path(tmp_dir)
1472. 
1473. 
1474. @override_settings(CACHES={
1475.     'default': {
1476.         'BACKEND': 'cache.liberal_backend.CacheClass',
1477.     },
1478. })
1479. class CustomCacheKeyValidationTests(SimpleTestCase):
1480.     """
1481.     Tests for the ability to mixin a custom ``validate_key`` method to
1482.     a custom cache backend that otherwise inherits from a builtin
1483.     backend, and override the default key validation. Refs #6447.
1484.     """
1485.     def test_custom_key_validation(self):
1486.         # this key is both longer than 250 characters, and has spaces
1487.         key = 'some key with spaces' * 15
1488.         val = 'a value'
1489.         cache.set(key, val)
1490.         self.assertEqual(cache.get(key), val)
1491. 
1492. 
1493. @override_settings(
1494.     CACHES={
1495.         'default': {
1496.             'BACKEND': 'cache.closeable_cache.CacheClass',
1497.         }
1498.     }
1499. )
1500. class CacheClosingTests(SimpleTestCase):
1501. 
1502.     def test_close(self):
1503.         self.assertFalse(cache.closed)
1504.         signals.request_finished.send(self.__class__)
1505.         self.assertTrue(cache.closed)
1506. 
1507. 
1508. DEFAULT_MEMORY_CACHES_SETTINGS = {
1509.     'default': {
1510.         'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1511.         'LOCATION': 'unique-snowflake',
1512.     }
1513. }
1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)
1515. NEVER_EXPIRING_CACHES_SETTINGS['default']['TIMEOUT'] = None
1516. 
1517. 
1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):
1519.     """
1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will
1521.     set non-expiring keys.
1522.     """
1523.     def setUp(self):
1524.         # The 5 minute (300 seconds) default expiration time for keys is
1525.         # defined in the implementation of the initializer method of the
1526.         # BaseCache type.
1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout
1528. 
1529.     def tearDown(self):
1530.         del(self.DEFAULT_TIMEOUT)
1531. 
1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):
1533.         """The default expiration time of a cache key is 5 minutes.
1534. 
1535.         This value is defined in
1536.         django.core.cache.backends.base.BaseCache.__init__().
1537.         """
1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)
1539. 
1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):
1541.         """Caches that have the TIMEOUT parameter undefined in the default
1542.         settings will use the default 5 minute timeout.
1543.         """
1544.         cache = caches[DEFAULT_CACHE_ALIAS]
1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)
1546. 
1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):
1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the
1550.         default settings with have `None` as the default timeout.
1551. 
1552.         This means "no timeout".
1553.         """
1554.         cache = caches[DEFAULT_CACHE_ALIAS]
1555.         self.assertIsNone(cache.default_timeout)
1556.         self.assertIsNone(cache.get_backend_timeout())
1557. 
1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)
1559.     def test_caches_with_unset_timeout_set_expiring_key(self):
1560.         """Memory caches that have the TIMEOUT parameter unset will set cache
1561.         keys having the default 5 minute timeout.
1562.         """
1563.         key = "my-key"
1564.         value = "my-value"
1565.         cache = caches[DEFAULT_CACHE_ALIAS]
1566.         cache.set(key, value)
1567.         cache_key = cache.make_key(key)
1568.         self.assertIsNotNone(cache._expire_info[cache_key])
1569. 
1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)
1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):
1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set
1573.         a non expiring key by default.
1574.         """
1575.         key = "another-key"
1576.         value = "another-value"
1577.         cache = caches[DEFAULT_CACHE_ALIAS]
1578.         cache.set(key, value)
1579.         cache_key = cache.make_key(key)
1580.         self.assertIsNone(cache._expire_info[cache_key])
1581. 
1582. 
1583. @override_settings(
1584.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1585.     CACHE_MIDDLEWARE_SECONDS=1,
1586.     CACHES={
1587.         'default': {
1588.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1589.         },
1590.     },
1591.     USE_I18N=False,
1592.     ALLOWED_HOSTS=['.example.com'],
1593. )
1594. class CacheUtils(SimpleTestCase):
1595.     """TestCase for django.utils.cache functions."""
1596.     host = 'www.example.com'
1597.     path = '/cache/test/'
1598.     factory = RequestFactory(HTTP_HOST=host)
1599. 
1600.     def tearDown(self):
1601.         cache.clear()
1602. 
1603.     def _get_request_cache(self, method='GET', query_string=None, update_cache=None):
1604.         request = self._get_request(self.host, self.path,
1605.                                     method, query_string=query_string)
1606.         request._cache_update_cache = True if not update_cache else update_cache
1607.         return request
1608. 
1609.     def test_patch_vary_headers(self):
1610.         headers = (
1611.             # Initial vary, new headers, resulting vary.
1612.             (None, ('Accept-Encoding',), 'Accept-Encoding'),
1613.             ('Accept-Encoding', ('accept-encoding',), 'Accept-Encoding'),
1614.             ('Accept-Encoding', ('ACCEPT-ENCODING',), 'Accept-Encoding'),
1615.             ('Cookie', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1616.             ('Cookie, Accept-Encoding', ('Accept-Encoding',), 'Cookie, Accept-Encoding'),
1617.             ('Cookie, Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1618.             (None, ('Accept-Encoding', 'COOKIE'), 'Accept-Encoding, COOKIE'),
1619.             ('Cookie,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1620.             ('Cookie    ,     Accept-Encoding', ('Accept-Encoding', 'cookie'), 'Cookie, Accept-Encoding'),
1621.             ('*', ('Accept-Language', 'Cookie'), '*'),
1622.             ('Accept-Language, Cookie', ('*',), '*'),
1623.         )
1624.         for initial_vary, newheaders, resulting_vary in headers:
1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):
1626.                 response = HttpResponse()
1627.                 if initial_vary is not None:
1628.                     response['Vary'] = initial_vary
1629.                 patch_vary_headers(response, newheaders)
1630.                 self.assertEqual(response['Vary'], resulting_vary)
1631. 
1632.     def test_get_cache_key(self):
1633.         request = self.factory.get(self.path)
1634.         response = HttpResponse()
1635.         # Expect None if no headers have been set yet.
1636.         self.assertIsNone(get_cache_key(request))
1637.         # Set headers to an empty list.
1638.         learn_cache_key(request, response)
1639. 
1640.         self.assertEqual(
1641.             get_cache_key(request),
1642.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1643.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1644.         )
1645.         # A specified key_prefix is taken into account.
1646.         key_prefix = 'localprefix'
1647.         learn_cache_key(request, response, key_prefix=key_prefix)
1648.         self.assertEqual(
1649.             get_cache_key(request, key_prefix=key_prefix),
1650.             'views.decorators.cache.cache_page.localprefix.GET.'
1651.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1652.         )
1653. 
1654.     def test_get_cache_key_with_query(self):
1655.         request = self.factory.get(self.path, {'test': 1})
1656.         response = HttpResponse()
1657.         # Expect None if no headers have been set yet.
1658.         self.assertIsNone(get_cache_key(request))
1659.         # Set headers to an empty list.
1660.         learn_cache_key(request, response)
1661.         # The querystring is taken into account.
1662.         self.assertEqual(
1663.             get_cache_key(request),
1664.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1665.             'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e'
1666.         )
1667. 
1668.     def test_cache_key_varies_by_url(self):
1669.         """
1670.         get_cache_key keys differ by fully-qualified URL instead of path
1671.         """
1672.         request1 = self.factory.get(self.path, HTTP_HOST='sub-1.example.com')
1673.         learn_cache_key(request1, HttpResponse())
1674.         request2 = self.factory.get(self.path, HTTP_HOST='sub-2.example.com')
1675.         learn_cache_key(request2, HttpResponse())
1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))
1677. 
1678.     def test_learn_cache_key(self):
1679.         request = self.factory.head(self.path)
1680.         response = HttpResponse()
1681.         response['Vary'] = 'Pony'
1682.         # Make sure that the Vary header is added to the key hash
1683.         learn_cache_key(request, response)
1684. 
1685.         self.assertEqual(
1686.             get_cache_key(request),
1687.             'views.decorators.cache.cache_page.settingsprefix.GET.'
1688.             '18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e'
1689.         )
1690. 
1691.     def test_patch_cache_control(self):
1692.         tests = (
1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts
1694.             (None, {'private': True}, {'private'}),
1695.             ('', {'private': True}, {'private'}),
1696.             # no-cache.
1697.             ('', {'no_cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1698.             ('', {'no-cache': 'Set-Cookie'}, {'no-cache=Set-Cookie'}),
1699.             ('no-cache=Set-Cookie', {'no_cache': True}, {'no-cache'}),
1700.             ('no-cache=Set-Cookie,no-cache=Link', {'no_cache': True}, {'no-cache'}),
1701.             ('no-cache=Set-Cookie', {'no_cache': 'Link'}, {'no-cache=Set-Cookie', 'no-cache=Link'}),
1702.             (
1703.                 'no-cache=Set-Cookie,no-cache=Link',
1704.                 {'no_cache': 'Custom'},
1705.                 {'no-cache=Set-Cookie', 'no-cache=Link', 'no-cache=Custom'},
1706.             ),
1707.             # Test whether private/public attributes are mutually exclusive
1708.             ('private', {'private': True}, {'private'}),
1709.             ('private', {'public': True}, {'public'}),
1710.             ('public', {'public': True}, {'public'}),
1711.             ('public', {'private': True}, {'private'}),
1712.             ('must-revalidate,max-age=60,private', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1713.             ('must-revalidate,max-age=60,public', {'private': True}, {'must-revalidate', 'max-age=60', 'private'}),
1714.             ('must-revalidate,max-age=60', {'public': True}, {'must-revalidate', 'max-age=60', 'public'}),
1715.         )
1716. 
1717.         cc_delim_re = re.compile(r'\s*,\s*')
1718. 
1719.         for initial_cc, newheaders, expected_cc in tests:
1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):
1721.                 response = HttpResponse()
1722.                 if initial_cc is not None:
1723.                     response['Cache-Control'] = initial_cc
1724.                 patch_cache_control(response, **newheaders)
1725.                 parts = set(cc_delim_re.split(response['Cache-Control']))
1726.                 self.assertEqual(parts, expected_cc)
1727. 
1728. 
1729. @override_settings(
1730.     CACHES={
1731.         'default': {
1732.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1733.             'KEY_PREFIX': 'cacheprefix',
1734.         },
1735.     },
1736. )
1737. class PrefixedCacheUtils(CacheUtils):
1738.     pass
1739. 
1740. 
1741. @override_settings(
1742.     CACHE_MIDDLEWARE_SECONDS=60,
1743.     CACHE_MIDDLEWARE_KEY_PREFIX='test',
1744.     CACHES={
1745.         'default': {
1746.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1747.         },
1748.     },
1749. )
1750. class CacheHEADTest(SimpleTestCase):
1751.     path = '/cache/test/'
1752.     factory = RequestFactory()
1753. 
1754.     def tearDown(self):
1755.         cache.clear()
1756. 
1757.     def _set_cache(self, request, msg):
1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)
1759. 
1760.     def test_head_caches_correctly(self):
1761.         test_content = 'test content'
1762. 
1763.         request = self.factory.head(self.path)
1764.         request._cache_update_cache = True
1765.         self._set_cache(request, test_content)
1766. 
1767.         request = self.factory.head(self.path)
1768.         request._cache_update_cache = True
1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1770.         self.assertIsNotNone(get_cache_data)
1771.         self.assertEqual(test_content.encode(), get_cache_data.content)
1772. 
1773.     def test_head_with_cached_get(self):
1774.         test_content = 'test content'
1775. 
1776.         request = self.factory.get(self.path)
1777.         request._cache_update_cache = True
1778.         self._set_cache(request, test_content)
1779. 
1780.         request = self.factory.head(self.path)
1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1782.         self.assertIsNotNone(get_cache_data)
1783.         self.assertEqual(test_content.encode(), get_cache_data.content)
1784. 
1785. 
1786. @override_settings(
1787.     CACHE_MIDDLEWARE_KEY_PREFIX='settingsprefix',
1788.     CACHES={
1789.         'default': {
1790.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1791.         },
1792.     },
1793.     LANGUAGES=[
1794.         ('en', 'English'),
1795.         ('es', 'Spanish'),
1796.     ],
1797. )
1798. class CacheI18nTest(SimpleTestCase):
1799.     path = '/cache/test/'
1800.     factory = RequestFactory()
1801. 
1802.     def tearDown(self):
1803.         cache.clear()
1804. 
1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1806.     def test_cache_key_i18n_translation(self):
1807.         request = self.factory.get(self.path)
1808.         lang = translation.get_language()
1809.         response = HttpResponse()
1810.         key = learn_cache_key(request, response)
1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1812.         key2 = get_cache_key(request)
1813.         self.assertEqual(key, key2)
1814. 
1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):
1816.         request = self.factory.get(self.path)
1817.         request.META['HTTP_ACCEPT_LANGUAGE'] = accept_language
1818.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1819.         response = HttpResponse()
1820.         response['Vary'] = vary
1821.         key = learn_cache_key(request, response)
1822.         key2 = get_cache_key(request)
1823.         self.assertEqual(key, reference_key)
1824.         self.assertEqual(key2, reference_key)
1825. 
1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)
1827.     def test_cache_key_i18n_translation_accept_language(self):
1828.         lang = translation.get_language()
1829.         self.assertEqual(lang, 'en')
1830.         request = self.factory.get(self.path)
1831.         request.META['HTTP_ACCEPT_ENCODING'] = 'gzip;q=1.0, identity; q=0.5, *;q=0'
1832.         response = HttpResponse()
1833.         response['Vary'] = 'accept-encoding'
1834.         key = learn_cache_key(request, response)
1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")
1836.         self.check_accept_language_vary(
1837.             'en-us',
1838.             'cookie, accept-language, accept-encoding',
1839.             key
1840.         )
1841.         self.check_accept_language_vary(
1842.             'en-US',
1843.             'cookie, accept-encoding, accept-language',
1844.             key
1845.         )
1846.         self.check_accept_language_vary(
1847.             'en-US,en;q=0.8',
1848.             'accept-encoding, accept-language, cookie',
1849.             key
1850.         )
1851.         self.check_accept_language_vary(
1852.             'en-US,en;q=0.8,ko;q=0.6',
1853.             'accept-language, cookie, accept-encoding',
1854.             key
1855.         )
1856.         self.check_accept_language_vary(
1857.             'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 ',
1858.             'accept-encoding, cookie, accept-language',
1859.             key
1860.         )
1861.         self.check_accept_language_vary(
1862.             'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4',
1863.             'accept-language, accept-encoding, cookie',
1864.             key
1865.         )
1866.         self.check_accept_language_vary(
1867.             'ko;q=1.0,en;q=0.5',
1868.             'cookie, accept-language, accept-encoding',
1869.             key
1870.         )
1871.         self.check_accept_language_vary(
1872.             'ko, en',
1873.             'cookie, accept-encoding, accept-language',
1874.             key
1875.         )
1876.         self.check_accept_language_vary(
1877.             'ko-KR, en-US',
1878.             'accept-encoding, accept-language, cookie',
1879.             key
1880.         )
1881. 
1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)
1883.     def test_cache_key_i18n_formatting(self):
1884.         request = self.factory.get(self.path)
1885.         lang = translation.get_language()
1886.         response = HttpResponse()
1887.         key = learn_cache_key(request, response)
1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")
1889.         key2 = get_cache_key(request)
1890.         self.assertEqual(key, key2)
1891. 
1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)
1893.     def test_cache_key_i18n_timezone(self):
1894.         request = self.factory.get(self.path)
1895.         tz = timezone.get_current_timezone_name()
1896.         response = HttpResponse()
1897.         key = learn_cache_key(request, response)
1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")
1899.         key2 = get_cache_key(request)
1900.         self.assertEqual(key, key2)
1901. 
1902.     @override_settings(USE_I18N=False, USE_L10N=False)
1903.     def test_cache_key_no_i18n(self):
1904.         request = self.factory.get(self.path)
1905.         lang = translation.get_language()
1906.         tz = timezone.get_current_timezone_name()
1907.         response = HttpResponse()
1908.         key = learn_cache_key(request, response)
1909.         self.assertNotIn(lang, key, "Cache keys shouldn't include the language name when i18n isn't active")
1910.         self.assertNotIn(tz, key, "Cache keys shouldn't include the time zone name when i18n isn't active")
1911. 
1912.     @override_settings(
1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1914.         CACHE_MIDDLEWARE_SECONDS=60,
1915.         USE_I18N=True,
1916.     )
1917.     def test_middleware(self):
1918.         def set_cache(request, lang, msg):
1919.             def get_response(req):
1920.                 return HttpResponse(msg)
1921. 
1922.             translation.activate(lang)
1923.             return UpdateCacheMiddleware(get_response)(request)
1924. 
1925.         # cache with non empty request.GET
1926.         request = self.factory.get(self.path, {'foo': 'bar', 'other': 'true'})
1927.         request._cache_update_cache = True
1928. 
1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1930.         # first access, cache must return None
1931.         self.assertIsNone(get_cache_data)
1932.         content = 'Check for cache with QUERY_STRING'
1933. 
1934.         def get_response(req):
1935.             return HttpResponse(content)
1936. 
1937.         UpdateCacheMiddleware(get_response)(request)
1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1939.         # cache must return content
1940.         self.assertIsNotNone(get_cache_data)
1941.         self.assertEqual(get_cache_data.content, content.encode())
1942.         # different QUERY_STRING, cache must be empty
1943.         request = self.factory.get(self.path, {'foo': 'bar', 'somethingelse': 'true'})
1944.         request._cache_update_cache = True
1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1946.         self.assertIsNone(get_cache_data)
1947. 
1948.         # i18n tests
1949.         en_message = "Hello world!"
1950.         es_message = "Hola mundo!"
1951. 
1952.         request = self.factory.get(self.path)
1953.         request._cache_update_cache = True
1954.         set_cache(request, 'en', en_message)
1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1956.         # The cache can be recovered
1957.         self.assertIsNotNone(get_cache_data)
1958.         self.assertEqual(get_cache_data.content, en_message.encode())
1959.         # change the session language and set content
1960.         request = self.factory.get(self.path)
1961.         request._cache_update_cache = True
1962.         set_cache(request, 'es', es_message)
1963.         # change again the language
1964.         translation.activate('en')
1965.         # retrieve the content from cache
1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1967.         self.assertEqual(get_cache_data.content, en_message.encode())
1968.         # change again the language
1969.         translation.activate('es')
1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1971.         self.assertEqual(get_cache_data.content, es_message.encode())
1972.         # reset the language
1973.         translation.deactivate()
1974. 
1975.     @override_settings(
1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",
1977.         CACHE_MIDDLEWARE_SECONDS=60,
1978.     )
1979.     def test_middleware_doesnt_cache_streaming_response(self):
1980.         request = self.factory.get(self.path)
1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1982.         self.assertIsNone(get_cache_data)
1983. 
1984.         def get_stream_response(req):
1985.             return StreamingHttpResponse(['Check for cache with streaming content.'])
1986. 
1987.         UpdateCacheMiddleware(get_stream_response)(request)
1988. 
1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)
1990.         self.assertIsNone(get_cache_data)
1991. 
1992. 
1993. @override_settings(
1994.     CACHES={
1995.         'default': {
1996.             'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
1997.             'KEY_PREFIX': 'cacheprefix'
1998.         },
1999.     },
2000. )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 14:25:39,553 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find 5 relevant existing test cases. The provided context is a test file that contains tests for Django's cache framework. I can identify several tests for the database cache backend, specifically for the culling mechanism which is where the bug is reported. Therefore, the context is sufficient. I will select 5 tests related to culling, expiration, and deletion in the database cache." refined_query=''
2025-10-06 14:25:39,554 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='tests/cache/tests.py', content='1. # Unit tests for cache framework\n2. # Uses whatever cache backend is set in the test settings file.\n3. import copy\n4. import io\n5. import os\n6. import pickle\n7. import re\n8. import shutil\n9. import tempfile\n10. import threading\n11. import time\n12. import unittest\n13. from pathlib import Path\n14. from unittest import mock\n15. \n16. from django.conf import settings\n17. from django.core import management, signals\n18. from django.core.cache import (\n19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n20. )\n21. from django.core.cache.backends.base import InvalidCacheBackendError\n22. from django.core.cache.utils import make_template_fragment_key\n23. from django.db import close_old_connections, connection, connections\n24. from django.http import (\n25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n26. )\n27. from django.middleware.cache import (\n28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n29. )\n30. from django.middleware.csrf import CsrfViewMiddleware\n31. from django.template import engines\n32. from django.template.context_processors import csrf\n33. from django.template.response import TemplateResponse\n34. from django.test import (\n35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n36.     override_settings,\n37. )\n38. from django.test.signals import setting_changed\n39. from django.utils import timezone, translation\n40. from django.utils.cache import (\n41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n42. )\n43. from django.views.decorators.cache import cache_control, cache_page\n44. \n45. from .models import Poll, expensive_calculation\n46. \n47. \n48. # functions/classes for complex data type tests\n49. def f():\n50.     return 42\n51. \n52. \n53. class C:\n54.     def m(n):\n55.         return 24\n56. \n57. \n58. class Unpicklable:\n59.     def __getstate__(self):\n60.         raise pickle.PickleError()\n61. \n62. \n63. def empty_response(request):\n64.     return HttpResponse()\n65. \n66. \n67. KEY_ERRORS_WITH_MEMCACHED_MSG = (\n68.     \'Cache key contains characters that will cause errors if used with \'\n69.     \'memcached: %r\'\n70. )\n71. \n72. \n73. @override_settings(CACHES={\n74.     \'default\': {\n75.         \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n76.     }\n77. })\n78. class DummyCacheTests(SimpleTestCase):\n79.     # The Dummy cache backend doesn\'t really behave like a test backend,\n80.     # so it has its own test case.\n81. \n82.     def test_simple(self):\n83.         "Dummy cache backend ignores cache set calls"\n84.         cache.set("key", "value")\n85.         self.assertIsNone(cache.get("key"))\n86. \n87.     def test_add(self):\n88.         "Add doesn\'t do anything in dummy cache backend"\n89.         self.assertIs(cache.add("addkey1", "value"), True)\n90.         self.assertIs(cache.add("addkey1", "newvalue"), True)\n91.         self.assertIsNone(cache.get("addkey1"))\n92. \n93.     def test_non_existent(self):\n94.         "Nonexistent keys aren\'t found in the dummy cache backend"\n95.         self.assertIsNone(cache.get("does_not_exist"))\n96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n97. \n98.     def test_get_many(self):\n99.         "get_many returns nothing for the dummy cache backend"\n100.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n101.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n102.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n103. \n104.     def test_get_many_invalid_key(self):\n105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n106.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n107.             cache.get_many([\'key with spaces\'])\n108. \n109.     def test_delete(self):\n110.         "Cache deletion is transparently ignored on the dummy cache backend"\n111.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n112.         self.assertIsNone(cache.get("key1"))\n113.         self.assertIs(cache.delete("key1"), False)\n114.         self.assertIsNone(cache.get("key1"))\n115.         self.assertIsNone(cache.get("key2"))\n116. \n117.     def test_has_key(self):\n118.         "The has_key method doesn\'t ever return True for the dummy cache backend"\n119.         cache.set("hello1", "goodbye1")\n120.         self.assertIs(cache.has_key("hello1"), False)\n121.         self.assertIs(cache.has_key("goodbye1"), False)\n122. \n123.     def test_in(self):\n124.         "The in operator doesn\'t ever return True for the dummy cache backend"\n125.         cache.set("hello2", "goodbye2")\n126.         self.assertNotIn("hello2", cache)\n127.         self.assertNotIn("goodbye2", cache)\n128. \n129.     def test_incr(self):\n130.         "Dummy cache values can\'t be incremented"\n131.         cache.set(\'answer\', 42)\n132.         with self.assertRaises(ValueError):\n133.             cache.incr(\'answer\')\n134.         with self.assertRaises(ValueError):\n135.             cache.incr(\'does_not_exist\')\n136. \n137.     def test_decr(self):\n138.         "Dummy cache values can\'t be decremented"\n139.         cache.set(\'answer\', 42)\n140.         with self.assertRaises(ValueError):\n141.             cache.decr(\'answer\')\n142.         with self.assertRaises(ValueError):\n143.             cache.decr(\'does_not_exist\')\n144. \n145.     def test_touch(self):\n146.         """Dummy cache can\'t do touch()."""\n147.         self.assertIs(cache.touch(\'whatever\'), False)\n148. \n149.     def test_data_types(self):\n150.         "All data types are ignored equally by the dummy cache"\n151.         stuff = {\n152.             \'string\': \'this is a string\',\n153.             \'int\': 42,\n154.             \'list\': [1, 2, 3, 4],\n155.             \'tuple\': (1, 2, 3, 4),\n156.             \'dict\': {\'A\': 1, \'B\': 2},\n157.             \'function\': f,\n158.             \'class\': C,\n159.         }\n160.         cache.set("stuff", stuff)\n161.         self.assertIsNone(cache.get("stuff"))\n162. \n163.     def test_expiration(self):\n164.         "Expiration has no effect on the dummy cache"\n165.         cache.set(\'expire1\', \'very quickly\', 1)\n166.         cache.set(\'expire2\', \'very quickly\', 1)\n167.         cache.set(\'expire3\', \'very quickly\', 1)\n168. \n169.         time.sleep(2)\n170.         self.assertIsNone(cache.get("expire1"))\n171. \n172.         self.assertIs(cache.add("expire2", "newvalue"), True)\n173.         self.assertIsNone(cache.get("expire2"))\n174.         self.assertIs(cache.has_key("expire3"), False)\n175. \n176.     def test_unicode(self):\n177.         "Unicode values are ignored by the dummy cache"\n178.         stuff = {\n179.             \'ascii\': \'ascii_value\',\n180.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n181.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n182.             \'ascii2\': {\'x\': 1}\n183.         }\n184.         for (key, value) in stuff.items():\n185.             with self.subTest(key=key):\n186.                 cache.set(key, value)\n187.                 self.assertIsNone(cache.get(key))\n188. \n189.     def test_set_many(self):\n190.         "set_many does nothing for the dummy cache backend"\n191.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n192.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n193. \n194.     def test_set_many_invalid_key(self):\n195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n196.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n197.             cache.set_many({\'key with spaces\': \'foo\'})\n198. \n199.     def test_delete_many(self):\n200.         "delete_many does nothing for the dummy cache backend"\n201.         cache.delete_many([\'a\', \'b\'])\n202. \n203.     def test_delete_many_invalid_key(self):\n204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n205.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n206.             cache.delete_many({\'key with spaces\': \'foo\'})\n207. \n208.     def test_clear(self):\n209.         "clear does nothing for the dummy cache backend"\n210.         cache.clear()\n211. \n212.     def test_incr_version(self):\n213.         "Dummy cache versions can\'t be incremented"\n214.         cache.set(\'answer\', 42)\n215.         with self.assertRaises(ValueError):\n216.             cache.incr_version(\'answer\')\n217.         with self.assertRaises(ValueError):\n218.             cache.incr_version(\'does_not_exist\')\n219. \n220.     def test_decr_version(self):\n221.         "Dummy cache versions can\'t be decremented"\n222.         cache.set(\'answer\', 42)\n223.         with self.assertRaises(ValueError):\n224.             cache.decr_version(\'answer\')\n225.         with self.assertRaises(ValueError):\n226.             cache.decr_version(\'does_not_exist\')\n227. \n228.     def test_get_or_set(self):\n229.         self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n230.         self.assertIsNone(cache.get_or_set(\'mykey\', None))\n231. \n232.     def test_get_or_set_callable(self):\n233.         def my_callable():\n234.             return \'default\'\n235. \n236.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n237.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n238. \n239. \n240. def custom_key_func(key, key_prefix, version):\n241.     "A customized cache key function"\n242.     return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n243. \n244. \n245. _caches_setting_base = {\n246.     \'default\': {},\n247.     \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n248.     \'v2\': {\'VERSION\': 2},\n249.     \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n250.     \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n251.     \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n252.     \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n253. }\n254. \n255. \n256. def caches_setting_for_tests(base=None, exclude=None, **params):\n257.     # `base` is used to pull in the memcached config from the original settings,\n258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n259.     # should be omitted.\n260.     # `params` are test specific overrides and `_caches_settings_base` is the\n261.     # base config for the tests.\n262.     # This results in the following search order:\n263.     # params -> _caches_setting_base -> base\n264.     base = base or {}\n265.     exclude = exclude or set()\n266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n267.     for key, cache_params in setting.items():\n268.         cache_params.update(_caches_setting_base[key])\n269.         cache_params.update(params)\n270.     return setting\n271. \n272. \n273. class BaseCacheTests:\n274.     # A common set of tests to apply to all cache backends\n275.     factory = RequestFactory()\n276. \n277.     def tearDown(self):\n278.         cache.clear()\n279. \n280.     def test_simple(self):\n281.         # Simple cache set/get works\n282.         cache.set("key", "value")\n283.         self.assertEqual(cache.get("key"), "value")\n284. \n285.     def test_default_used_when_none_is_set(self):\n286.         """If None is cached, get() returns it instead of the default."""\n287.         cache.set(\'key_default_none\', None)\n288.         self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n289. \n290.     def test_add(self):\n291.         # A key can be added to a cache\n292.         self.assertIs(cache.add("addkey1", "value"), True)\n293.         self.assertIs(cache.add("addkey1", "newvalue"), False)\n294.         self.assertEqual(cache.get("addkey1"), "value")\n295. \n296.     def test_prefix(self):\n297.         # Test for same cache key conflicts between shared backend\n298.         cache.set(\'somekey\', \'value\')\n299. \n300.         # should not be set in the prefixed cache\n301.         self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n302. \n303.         caches[\'prefix\'].set(\'somekey\', \'value2\')\n304. \n305.         self.assertEqual(cache.get(\'somekey\'), \'value\')\n306.         self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n307. \n308.     def test_non_existent(self):\n309.         """Nonexistent cache keys return as None/default."""\n310.         self.assertIsNone(cache.get("does_not_exist"))\n311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n312. \n313.     def test_get_many(self):\n314.         # Multiple cache keys can be returned using get_many\n315.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n316.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n317.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n318.         self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n319. \n320.     def test_delete(self):\n321.         # Cache keys can be deleted\n322.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n323.         self.assertEqual(cache.get("key1"), "spam")\n324.         self.assertIs(cache.delete("key1"), True)\n325.         self.assertIsNone(cache.get("key1"))\n326.         self.assertEqual(cache.get("key2"), "eggs")\n327. \n328.     def test_delete_nonexistent(self):\n329.         self.assertIs(cache.delete(\'nonexistent_key\'), False)\n330. \n331.     def test_has_key(self):\n332.         # The cache can be inspected for cache keys\n333.         cache.set("hello1", "goodbye1")\n334.         self.assertIs(cache.has_key("hello1"), True)\n335.         self.assertIs(cache.has_key("goodbye1"), False)\n336.         cache.set("no_expiry", "here", None)\n337.         self.assertIs(cache.has_key("no_expiry"), True)\n338. \n339.     def test_in(self):\n340.         # The in operator can be used to inspect cache contents\n341.         cache.set("hello2", "goodbye2")\n342.         self.assertIn("hello2", cache)\n343.         self.assertNotIn("goodbye2", cache)\n344. \n345.     def test_incr(self):\n346.         # Cache values can be incremented\n347.         cache.set(\'answer\', 41)\n348.         self.assertEqual(cache.incr(\'answer\'), 42)\n349.         self.assertEqual(cache.get(\'answer\'), 42)\n350.         self.assertEqual(cache.incr(\'answer\', 10), 52)\n351.         self.assertEqual(cache.get(\'answer\'), 52)\n352.         self.assertEqual(cache.incr(\'answer\', -10), 42)\n353.         with self.assertRaises(ValueError):\n354.             cache.incr(\'does_not_exist\')\n355. \n356.     def test_decr(self):\n357.         # Cache values can be decremented\n358.         cache.set(\'answer\', 43)\n359.         self.assertEqual(cache.decr(\'answer\'), 42)\n360.         self.assertEqual(cache.get(\'answer\'), 42)\n361.         self.assertEqual(cache.decr(\'answer\', 10), 32)\n362.         self.assertEqual(cache.get(\'answer\'), 32)\n363.         self.assertEqual(cache.decr(\'answer\', -10), 42)\n364.         with self.assertRaises(ValueError):\n365.             cache.decr(\'does_not_exist\')\n366. \n367.     def test_close(self):\n368.         self.assertTrue(hasattr(cache, \'close\'))\n369.         cache.close()\n370. \n371.     def test_data_types(self):\n372.         # Many different data types can be cached\n373.         stuff = {\n374.             \'string\': \'this is a string\',\n375.             \'int\': 42,\n376.             \'list\': [1, 2, 3, 4],\n377.             \'tuple\': (1, 2, 3, 4),\n378.             \'dict\': {\'A\': 1, \'B\': 2},\n379.             \'function\': f,\n380.             \'class\': C,\n381.         }\n382.         cache.set("stuff", stuff)\n383.         self.assertEqual(cache.get("stuff"), stuff)\n384. \n385.     def test_cache_read_for_model_instance(self):\n386.         # Don\'t want fields with callable as default to be called on cache read\n387.         expensive_calculation.num_runs = 0\n388.         Poll.objects.all().delete()\n389.         my_poll = Poll.objects.create(question="Well?")\n390.         self.assertEqual(Poll.objects.count(), 1)\n391.         pub_date = my_poll.pub_date\n392.         cache.set(\'question\', my_poll)\n393.         cached_poll = cache.get(\'question\')\n394.         self.assertEqual(cached_poll.pub_date, pub_date)\n395.         # We only want the default expensive calculation run once\n396.         self.assertEqual(expensive_calculation.num_runs, 1)\n397. \n398.     def test_cache_write_for_model_instance_with_deferred(self):\n399.         # Don\'t want fields with callable as default to be called on cache write\n400.         expensive_calculation.num_runs = 0\n401.         Poll.objects.all().delete()\n402.         Poll.objects.create(question="What?")\n403.         self.assertEqual(expensive_calculation.num_runs, 1)\n404.         defer_qs = Poll.objects.all().defer(\'question\')\n405.         self.assertEqual(defer_qs.count(), 1)\n406.         self.assertEqual(expensive_calculation.num_runs, 1)\n407.         cache.set(\'deferred_queryset\', defer_qs)\n408.         # cache set should not re-evaluate default functions\n409.         self.assertEqual(expensive_calculation.num_runs, 1)\n410. \n411.     def test_cache_read_for_model_instance_with_deferred(self):\n412.         # Don\'t want fields with callable as default to be called on cache read\n413.         expensive_calculation.num_runs = 0\n414.         Poll.objects.all().delete()\n415.         Poll.objects.create(question="What?")\n416.         self.assertEqual(expensive_calculation.num_runs, 1)\n417.         defer_qs = Poll.objects.all().defer(\'question\')\n418.         self.assertEqual(defer_qs.count(), 1)\n419.         cache.set(\'deferred_queryset\', defer_qs)\n420.         self.assertEqual(expensive_calculation.num_runs, 1)\n421.         runs_before_cache_read = expensive_calculation.num_runs\n422.         cache.get(\'deferred_queryset\')\n423.         # We only want the default expensive calculation run on creation and set\n424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n425. \n426.     def test_expiration(self):\n427.         # Cache values can be set to expire\n428.         cache.set(\'expire1\', \'very quickly\', 1)\n429.         cache.set(\'expire2\', \'very quickly\', 1)\n430.         cache.set(\'expire3\', \'very quickly\', 1)\n431. \n432.         time.sleep(2)\n433.         self.assertIsNone(cache.get("expire1"))\n434. \n435.         self.assertIs(cache.add("expire2", "newvalue"), True)\n436.         self.assertEqual(cache.get("expire2"), "newvalue")\n437.         self.assertIs(cache.has_key("expire3"), False)\n438. \n439.     def test_touch(self):\n440.         # cache.touch() updates the timeout.\n441.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n442.         self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n443.         time.sleep(2)\n444.         self.assertIs(cache.has_key(\'expire1\'), True)\n445.         time.sleep(3)\n446.         self.assertIs(cache.has_key(\'expire1\'), False)\n447.         # cache.touch() works without the timeout argument.\n448.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n449.         self.assertIs(cache.touch(\'expire1\'), True)\n450.         time.sleep(2)\n451.         self.assertIs(cache.has_key(\'expire1\'), True)\n452. \n453.         self.assertIs(cache.touch(\'nonexistent\'), False)\n454. \n455.     def test_unicode(self):\n456.         # Unicode values can be cached\n457.         stuff = {\n458.             \'ascii\': \'ascii_value\',\n459.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n460.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n461.             \'ascii2\': {\'x\': 1}\n462.         }\n463.         # Test `set`\n464.         for (key, value) in stuff.items():\n465.             with self.subTest(key=key):\n466.                 cache.set(key, value)\n467.                 self.assertEqual(cache.get(key), value)\n468. \n469.         # Test `add`\n470.         for (key, value) in stuff.items():\n471.             with self.subTest(key=key):\n472.                 self.assertIs(cache.delete(key), True)\n473.                 self.assertIs(cache.add(key, value), True)\n474.                 self.assertEqual(cache.get(key), value)\n475. \n476.         # Test `set_many`\n477.         for (key, value) in stuff.items():\n478.             self.assertIs(cache.delete(key), True)\n479.         cache.set_many(stuff)\n480.         for (key, value) in stuff.items():\n481.             with self.subTest(key=key):\n482.                 self.assertEqual(cache.get(key), value)\n483. \n484.     def test_binary_string(self):\n485.         # Binary strings should be cacheable\n486.         from zlib import compress, decompress\n487.         value = \'value_to_be_compressed\'\n488.         compressed_value = compress(value.encode())\n489. \n490.         # Test set\n491.         cache.set(\'binary1\', compressed_value)\n492.         compressed_result = cache.get(\'binary1\')\n493.         self.assertEqual(compressed_value, compressed_result)\n494.         self.assertEqual(value, decompress(compressed_result).decode())\n495. \n496.         # Test add\n497.         self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n498.         compressed_result = cache.get(\'binary1-add\')\n499.         self.assertEqual(compressed_value, compressed_result)\n500.         self.assertEqual(value, decompress(compressed_result).decode())\n501. \n502.         # Test set_many\n503.         cache.set_many({\'binary1-set_many\': compressed_value})\n504.         compressed_result = cache.get(\'binary1-set_many\')\n505.         self.assertEqual(compressed_value, compressed_result)\n506.         self.assertEqual(value, decompress(compressed_result).decode())\n507. \n508.     def test_set_many(self):\n509.         # Multiple keys can be set using set_many\n510.         cache.set_many({"key1": "spam", "key2": "eggs"})\n511.         self.assertEqual(cache.get("key1"), "spam")\n512.         self.assertEqual(cache.get("key2"), "eggs")\n513. \n514.     def test_set_many_returns_empty_list_on_success(self):\n515.         """set_many() returns an empty list when all keys are inserted."""\n516.         failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n517.         self.assertEqual(failing_keys, [])\n518. \n519.     def test_set_many_expiration(self):\n520.         # set_many takes a second ``timeout`` parameter\n521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n522.         time.sleep(2)\n523.         self.assertIsNone(cache.get("key1"))\n524.         self.assertIsNone(cache.get("key2"))\n525. \n526.     def test_delete_many(self):\n527.         # Multiple keys can be deleted using delete_many\n528.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n529.         cache.delete_many(["key1", "key2"])\n530.         self.assertIsNone(cache.get("key1"))\n531.         self.assertIsNone(cache.get("key2"))\n532.         self.assertEqual(cache.get("key3"), "ham")\n533. \n534.     def test_clear(self):\n535.         # The cache can be emptied using clear\n536.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n537.         cache.clear()\n538.         self.assertIsNone(cache.get("key1"))\n539.         self.assertIsNone(cache.get("key2"))\n540. \n541.     def test_long_timeout(self):\n542.         """\n543.         Follow memcached\'s convention where a timeout greater than 30 days is\n544.         treated as an absolute expiration timestamp instead of a relative\n545.         offset (#12399).\n546.         """\n547.         cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n548.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n549. \n550.         self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n551.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n552. \n553.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n554.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n555.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n556. \n557.     def test_forever_timeout(self):\n558.         """\n559.         Passing in None into timeout results in a value that is cached forever\n560.         """\n561.         cache.set(\'key1\', \'eggs\', None)\n562.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n563. \n564.         self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n565.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n566.         self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n567.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n568. \n569.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n570.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n571.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n572. \n573.         cache.set(\'key5\', \'belgian fries\', timeout=1)\n574.         self.assertIs(cache.touch(\'key5\', timeout=None), True)\n575.         time.sleep(2)\n576.         self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n577. \n578.     def test_zero_timeout(self):\n579.         """\n580.         Passing in zero into timeout results in a value that is not cached\n581.         """\n582.         cache.set(\'key1\', \'eggs\', 0)\n583.         self.assertIsNone(cache.get(\'key1\'))\n584. \n585.         self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n586.         self.assertIsNone(cache.get(\'key2\'))\n587. \n588.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n589.         self.assertIsNone(cache.get(\'key3\'))\n590.         self.assertIsNone(cache.get(\'key4\'))\n591. \n592.         cache.set(\'key5\', \'belgian fries\', timeout=5)\n593.         self.assertIs(cache.touch(\'key5\', timeout=0), True)\n594.         self.assertIsNone(cache.get(\'key5\'))\n595. \n596.     def test_float_timeout(self):\n597.         # Make sure a timeout given as a float doesn\'t crash anything.\n598.         cache.set("key1", "spam", 100.2)\n599.         self.assertEqual(cache.get("key1"), "spam")\n600. \n601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n602.         try:\n603.             cull_cache = caches[cull_cache_name]\n604.         except InvalidCacheBackendError:\n605.             self.skipTest("Culling isn\'t implemented.")\n606. \n607.         # Create initial cache key entries. This will overflow the cache,\n608.         # causing a cull.\n609.         for i in range(1, initial_count):\n610.             cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n611.         count = 0\n612.         # Count how many keys are left in the cache.\n613.         for i in range(1, initial_count):\n614.             if cull_cache.has_key(\'cull%d\' % i):\n615.                 count += 1\n616.         self.assertEqual(count, final_count)\n617. \n618.     def test_cull(self):\n619.         self._perform_cull_test(\'cull\', 50, 29)\n620. \n621.     def test_zero_cull(self):\n622.         self._perform_cull_test(\'zero_cull\', 50, 19)\n623. \n624.     def _perform_invalid_key_test(self, key, expected_warning):\n625.         """\n626.         All the builtin backends should warn (except memcached that should\n627.         error) on keys that would be refused by memcached. This encourages\n628.         portable caching code without making it too difficult to use production\n629.         backends with more liberal key rules. Refs #6447.\n630.         """\n631.         # mimic custom ``make_key`` method being defined since the default will\n632.         # never show the below warnings\n633.         def func(key, *args):\n634.             return key\n635. \n636.         old_func = cache.key_func\n637.         cache.key_func = func\n638. \n639.         try:\n640.             with self.assertWarns(CacheKeyWarning) as cm:\n641.                 cache.set(key, \'value\')\n642.             self.assertEqual(str(cm.warning), expected_warning)\n643.         finally:\n644.             cache.key_func = old_func\n645. \n646.     def test_invalid_key_characters(self):\n647.         # memcached doesn\'t allow whitespace or control characters in keys.\n648.         key = \'key with spaces and æ¸…\'\n649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n650. \n651.     def test_invalid_key_length(self):\n652.         # memcached limits key length to 250.\n653.         key = (\'a\' * 250) + \'æ¸…\'\n654.         expected_warning = (\n655.             \'Cache key will cause errors if used with memcached: \'\n656.             \'%r (longer than %s)\' % (key, 250)\n657.         )\n658.         self._perform_invalid_key_test(key, expected_warning)\n659. \n660.     def test_cache_versioning_get_set(self):\n661.         # set, using default version = 1\n662.         cache.set(\'answer1\', 42)\n663.         self.assertEqual(cache.get(\'answer1\'), 42)\n664.         self.assertEqual(cache.get(\'answer1\', version=1), 42)\n665.         self.assertIsNone(cache.get(\'answer1\', version=2))\n666. \n667.         self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n668.         self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n669.         self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n670. \n671.         # set, default version = 1, but manually override version = 2\n672.         cache.set(\'answer2\', 42, version=2)\n673.         self.assertIsNone(cache.get(\'answer2\'))\n674.         self.assertIsNone(cache.get(\'answer2\', version=1))\n675.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n676. \n677.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n678.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n679.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n680. \n681.         # v2 set, using default version = 2\n682.         caches[\'v2\'].set(\'answer3\', 42)\n683.         self.assertIsNone(cache.get(\'answer3\'))\n684.         self.assertIsNone(cache.get(\'answer3\', version=1))\n685.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n686. \n687.         self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n688.         self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n689.         self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n690. \n691.         # v2 set, default version = 2, but manually override version = 1\n692.         caches[\'v2\'].set(\'answer4\', 42, version=1)\n693.         self.assertEqual(cache.get(\'answer4\'), 42)\n694.         self.assertEqual(cache.get(\'answer4\', version=1), 42)\n695.         self.assertIsNone(cache.get(\'answer4\', version=2))\n696. \n697.         self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n698.         self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n699.         self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n700. \n701.     def test_cache_versioning_add(self):\n702. \n703.         # add, default version = 1, but manually override version = 2\n704.         self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n705.         self.assertIsNone(cache.get(\'answer1\', version=1))\n706.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n707. \n708.         self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n709.         self.assertIsNone(cache.get(\'answer1\', version=1))\n710.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n711. \n712.         self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n713.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n714.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n715. \n716.         # v2 add, using default version = 2\n717.         self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n718.         self.assertIsNone(cache.get(\'answer2\', version=1))\n719.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n720. \n721.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n722.         self.assertIsNone(cache.get(\'answer2\', version=1))\n723.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n724. \n725.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n726.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n727.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n728. \n729.         # v2 add, default version = 2, but manually override version = 1\n730.         self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n731.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n732.         self.assertIsNone(cache.get(\'answer3\', version=2))\n733. \n734.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n735.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n736.         self.assertIsNone(cache.get(\'answer3\', version=2))\n737. \n738.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n739.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n740.         self.assertEqual(cache.get(\'answer3\', version=2), 37)\n741. \n742.     def test_cache_versioning_has_key(self):\n743.         cache.set(\'answer1\', 42)\n744. \n745.         # has_key\n746.         self.assertIs(cache.has_key(\'answer1\'), True)\n747.         self.assertIs(cache.has_key(\'answer1\', version=1), True)\n748.         self.assertIs(cache.has_key(\'answer1\', version=2), False)\n749. \n750.         self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n751.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n752.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n753. \n754.     def test_cache_versioning_delete(self):\n755.         cache.set(\'answer1\', 37, version=1)\n756.         cache.set(\'answer1\', 42, version=2)\n757.         self.assertIs(cache.delete(\'answer1\'), True)\n758.         self.assertIsNone(cache.get(\'answer1\', version=1))\n759.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n760. \n761.         cache.set(\'answer2\', 37, version=1)\n762.         cache.set(\'answer2\', 42, version=2)\n763.         self.assertIs(cache.delete(\'answer2\', version=2), True)\n764.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n765.         self.assertIsNone(cache.get(\'answer2\', version=2))\n766. \n767.         cache.set(\'answer3\', 37, version=1)\n768.         cache.set(\'answer3\', 42, version=2)\n769.         self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n770.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n771.         self.assertIsNone(cache.get(\'answer3\', version=2))\n772. \n773.         cache.set(\'answer4\', 37, version=1)\n774.         cache.set(\'answer4\', 42, version=2)\n775.         self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n776.         self.assertIsNone(cache.get(\'answer4\', version=1))\n777.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n778. \n779.     def test_cache_versioning_incr_decr(self):\n780.         cache.set(\'answer1\', 37, version=1)\n781.         cache.set(\'answer1\', 42, version=2)\n782.         self.assertEqual(cache.incr(\'answer1\'), 38)\n783.         self.assertEqual(cache.get(\'answer1\', version=1), 38)\n784.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n785.         self.assertEqual(cache.decr(\'answer1\'), 37)\n786.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n787.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n788. \n789.         cache.set(\'answer2\', 37, version=1)\n790.         cache.set(\'answer2\', 42, version=2)\n791.         self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n792.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n793.         self.assertEqual(cache.get(\'answer2\', version=2), 43)\n794.         self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n795.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n796.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n797. \n798.         cache.set(\'answer3\', 37, version=1)\n799.         cache.set(\'answer3\', 42, version=2)\n800.         self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n801.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n802.         self.assertEqual(cache.get(\'answer3\', version=2), 43)\n803.         self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n804.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n805.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n806. \n807.         cache.set(\'answer4\', 37, version=1)\n808.         cache.set(\'answer4\', 42, version=2)\n809.         self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n810.         self.assertEqual(cache.get(\'answer4\', version=1), 38)\n811.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n812.         self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n813.         self.assertEqual(cache.get(\'answer4\', version=1), 37)\n814.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n815. \n816.     def test_cache_versioning_get_set_many(self):\n817.         # set, using default version = 1\n818.         cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n819.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n820.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n821.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n822. \n823.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n824.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n825.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n826. \n827.         # set, default version = 1, but manually override version = 2\n828.         cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n829.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n830.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n831.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n832. \n833.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n834.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n835.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n836. \n837.         # v2 set, using default version = 2\n838.         caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n839.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n840.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n841.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n842. \n843.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n844.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n845.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n846. \n847.         # v2 set, default version = 2, but manually override version = 1\n848.         caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n849.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n850.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n851.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n852. \n853.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n854.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n855.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n856. \n857.     def test_incr_version(self):\n858.         cache.set(\'answer\', 42, version=2)\n859.         self.assertIsNone(cache.get(\'answer\'))\n860.         self.assertIsNone(cache.get(\'answer\', version=1))\n861.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n862.         self.assertIsNone(cache.get(\'answer\', version=3))\n863. \n864.         self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n865.         self.assertIsNone(cache.get(\'answer\'))\n866.         self.assertIsNone(cache.get(\'answer\', version=1))\n867.         self.assertIsNone(cache.get(\'answer\', version=2))\n868.         self.assertEqual(cache.get(\'answer\', version=3), 42)\n869. \n870.         caches[\'v2\'].set(\'answer2\', 42)\n871.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n872.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n873.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n874.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n875. \n876.         self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n877.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n878.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n879.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n880.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n881. \n882.         with self.assertRaises(ValueError):\n883.             cache.incr_version(\'does_not_exist\')\n884. \n885.     def test_decr_version(self):\n886.         cache.set(\'answer\', 42, version=2)\n887.         self.assertIsNone(cache.get(\'answer\'))\n888.         self.assertIsNone(cache.get(\'answer\', version=1))\n889.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n890. \n891.         self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n892.         self.assertEqual(cache.get(\'answer\'), 42)\n893.         self.assertEqual(cache.get(\'answer\', version=1), 42)\n894.         self.assertIsNone(cache.get(\'answer\', version=2))\n895. \n896.         caches[\'v2\'].set(\'answer2\', 42)\n897.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n898.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n899.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n900. \n901.         self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n902.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n903.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n904.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n905. \n906.         with self.assertRaises(ValueError):\n907.             cache.decr_version(\'does_not_exist\', version=2)\n908. \n909.     def test_custom_key_func(self):\n910.         # Two caches with different key functions aren\'t visible to each other\n911.         cache.set(\'answer1\', 42)\n912.         self.assertEqual(cache.get(\'answer1\'), 42)\n913.         self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n914.         self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n915. \n916.         caches[\'custom_key\'].set(\'answer2\', 42)\n917.         self.assertIsNone(cache.get(\'answer2\'))\n918.         self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n919.         self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n920. \n921.     def test_cache_write_unpicklable_object(self):\n922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)\n923.         fetch_middleware.cache = cache\n924. \n925.         request = self.factory.get(\'/cache/test\')\n926.         request._cache_update_cache = True\n927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n928.         self.assertIsNone(get_cache_data)\n929. \n930.         content = \'Testing cookie serialization.\'\n931. \n932.         def get_response(req):\n933.             response = HttpResponse(content)\n934.             response.set_cookie(\'foo\', \'bar\')\n935.             return response\n936. \n937.         update_middleware = UpdateCacheMiddleware(get_response)\n938.         update_middleware.cache = cache\n939.         response = update_middleware(request)\n940. \n941.         get_cache_data = fetch_middleware.process_request(request)\n942.         self.assertIsNotNone(get_cache_data)\n943.         self.assertEqual(get_cache_data.content, content.encode())\n944.         self.assertEqual(get_cache_data.cookies, response.cookies)\n945. \n946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n947.         get_cache_data = fetch_middleware.process_request(request)\n948.         self.assertIsNotNone(get_cache_data)\n949.         self.assertEqual(get_cache_data.content, content.encode())\n950.         self.assertEqual(get_cache_data.cookies, response.cookies)\n951. \n952.     def test_add_fail_on_pickleerror(self):\n953.         # Shouldn\'t fail silently if trying to cache an unpicklable type.\n954.         with self.assertRaises(pickle.PickleError):\n955.             cache.add(\'unpicklable\', Unpicklable())\n956. \n957.     def test_set_fail_on_pickleerror(self):\n958.         with self.assertRaises(pickle.PickleError):\n959.             cache.set(\'unpicklable\', Unpicklable())\n960. \n961.     def test_get_or_set(self):\n962.         self.assertIsNone(cache.get(\'projector\'))\n963.         self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n964.         self.assertEqual(cache.get(\'projector\'), 42)\n965.         self.assertIsNone(cache.get_or_set(\'null\', None))\n966. \n967.     def test_get_or_set_callable(self):\n968.         def my_callable():\n969.             return \'value\'\n970. \n971.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n972.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n973. \n974.     def test_get_or_set_callable_returning_none(self):\n975.         self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n976.         # Previous get_or_set() doesn\'t store None in the cache.\n977.         self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n978. \n979.     def test_get_or_set_version(self):\n980.         msg = "get_or_set() missing 1 required positional argument: \'default\'"\n981.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n982.         with self.assertRaisesMessage(TypeError, msg):\n983.             cache.get_or_set(\'brian\')\n984.         with self.assertRaisesMessage(TypeError, msg):\n985.             cache.get_or_set(\'brian\', version=1)\n986.         self.assertIsNone(cache.get(\'brian\', version=1))\n987.         self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n988.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n989.         self.assertIsNone(cache.get(\'brian\', version=3))\n990. \n991.     def test_get_or_set_racing(self):\n992.         with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n993.             # Simulate cache.add() failing to add a value. In that case, the\n994.             # default value should be returned.\n995.             cache_add.return_value = False\n996.             self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n997. \n998. \n999. @override_settings(CACHES=caches_setting_for_tests(\n1000.     BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1001.     # Spaces are used in the table name to ensure quoting/escaping is working\n1002.     LOCATION=\'test cache table\'\n1003. ))\n1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):\n1005. \n1006.     available_apps = [\'cache\']\n1007. \n1008.     def setUp(self):\n1009.         # The super calls needs to happen first for the settings override.\n1010.         super().setUp()\n1011.         self.create_table()\n1012. \n1013.     def tearDown(self):\n1014.         # The super call needs to happen first because it uses the database.\n1015.         super().tearDown()\n1016.         self.drop_table()\n1017. \n1018.     def create_table(self):\n1019.         management.call_command(\'createcachetable\', verbosity=0)\n1020. \n1021.     def drop_table(self):\n1022.         with connection.cursor() as cursor:\n1023.             table_name = connection.ops.quote_name(\'test cache table\')\n1024.             cursor.execute(\'DROP TABLE %s\' % table_name)\n1025. \n1026.     def test_get_many_num_queries(self):\n1027.         cache.set_many({\'a\': 1, \'b\': 2})\n1028.         cache.set(\'expired\', \'expired\', 0.01)\n1029.         with self.assertNumQueries(1):\n1030.             self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n1031.         time.sleep(0.02)\n1032.         with self.assertNumQueries(2):\n1033.             self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n1034. \n1035.     def test_delete_many_num_queries(self):\n1036.         cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n1037.         with self.assertNumQueries(1):\n1038.             cache.delete_many([\'a\', \'b\', \'c\'])\n1039. \n1040.     def test_zero_cull(self):\n1041.         self._perform_cull_test(\'zero_cull\', 50, 18)\n1042. \n1043.     def test_second_call_doesnt_crash(self):\n1044.         out = io.StringIO()\n1045.         management.call_command(\'createcachetable\', stdout=out)\n1046.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n1047. \n1048.     @override_settings(CACHES=caches_setting_for_tests(\n1049.         BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1050.         # Use another table name to avoid the \'table already exists\' message.\n1051.         LOCATION=\'createcachetable_dry_run_mode\'\n1052.     ))\n1053.     def test_createcachetable_dry_run_mode(self):\n1054.         out = io.StringIO()\n1055.         management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n1056.         output = out.getvalue()\n1057.         self.assertTrue(output.startswith("CREATE TABLE"))\n1058. \n1059.     def test_createcachetable_with_table_argument(self):\n1060.         """\n1061.         Delete and recreate cache table with legacy behavior (explicitly\n1062.         specifying the table name).\n1063.         """\n1064.         self.drop_table()\n1065.         out = io.StringIO()\n1066.         management.call_command(\n1067.             \'createcachetable\',\n1068.             \'test cache table\',\n1069.             verbosity=2,\n1070.             stdout=out,\n1071.         )\n1072.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n1073. \n1074. \n1075. @override_settings(USE_TZ=True)\n1076. class DBCacheWithTimeZoneTests(DBCacheTests):\n1077.     pass\n1078. \n1079. \n1080. class DBCacheRouter:\n1081.     """A router that puts the cache table on the \'other\' database."""\n1082. \n1083.     def db_for_read(self, model, **hints):\n1084.         if model._meta.app_label == \'django_cache\':\n1085.             return \'other\'\n1086.         return None\n1087. \n1088.     def db_for_write(self, model, **hints):\n1089.         if model._meta.app_label == \'django_cache\':\n1090.             return \'other\'\n1091.         return None\n1092. \n1093.     def allow_migrate(self, db, app_label, **hints):\n1094.         if app_label == \'django_cache\':\n1095.             return db == \'other\'\n1096.         return None\n1097. \n1098. \n1099. @override_settings(\n1100.     CACHES={\n1101.         \'default\': {\n1102.             \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n1103.             \'LOCATION\': \'my_cache_table\',\n1104.         },\n1105.     },\n1106. )\n1107. class CreateCacheTableForDBCacheTests(TestCase):\n1108.     databases = {\'default\', \'other\'}\n1109. \n1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])\n1111.     def test_createcachetable_observes_database_router(self):\n1112.         # cache table should not be created on \'default\'\n1113.         with self.assertNumQueries(0, using=\'default\'):\n1114.             management.call_command(\'createcachetable\', database=\'default\', verbosity=0)\n1115.         # cache table should be created on \'other\'\n1116.         # Queries:\n1117.         #   1: check table doesn\'t already exist\n1118.         #   2: create savepoint (if transactional DDL is supported)\n1119.         #   3: create the table\n1120.         #   4: create the index\n1121.         #   5: release savepoint (if transactional DDL is supported)\n1122.         num = 5 if connections[\'other\'].features.can_rollback_ddl else 3\n1123.         with self.assertNumQueries(num, using=\'other\'):\n1124.             management.call_command(\'createcachetable\', database=\'other\', verbosity=0)\n1125. \n1126. \n1127. class PicklingSideEffect:\n1128. \n1129.     def __init__(self, cache):\n1130.         self.cache = cache\n1131.         self.locked = False\n1132. \n1133.     def __getstate__(self):\n1134.         self.locked = self.cache._lock.locked()\n1135.         return {}\n1136. \n1137. \n1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(\n1139.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1140.     OPTIONS={\'MAX_ENTRIES\': 9},\n1141. ))\n1142. \n1143. \n1144. @override_settings(CACHES=caches_setting_for_tests(\n1145.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1146. ))\n1147. class LocMemCacheTests(BaseCacheTests, TestCase):\n1148. \n1149.     def setUp(self):\n1150.         super().setUp()\n1151. \n1152.         # LocMem requires a hack to make the other caches\n1153.         # share a data store with the \'normal\' cache.\n1154.         caches[\'prefix\']._cache = cache._cache\n1155.         caches[\'prefix\']._expire_info = cache._expire_info\n1156. \n1157.         caches[\'v2\']._cache = cache._cache\n1158.         caches[\'v2\']._expire_info = cache._expire_info\n1159. \n1160.         caches[\'custom_key\']._cache = cache._cache\n1161.         caches[\'custom_key\']._expire_info = cache._expire_info\n1162. \n1163.         caches[\'custom_key2\']._cache = cache._cache\n1164.         caches[\'custom_key2\']._expire_info = cache._expire_info\n1165. \n1166.     @override_settings(CACHES={\n1167.         \'default\': {\'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\'},\n1168.         \'other\': {\n1169.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1170.             \'LOCATION\': \'other\'\n1171.         },\n1172.     })\n1173.     def test_multiple_caches(self):\n1174.         "Multiple locmem caches are isolated"\n1175.         cache.set(\'value\', 42)\n1176.         self.assertEqual(caches[\'default\'].get(\'value\'), 42)\n1177.         self.assertIsNone(caches[\'other\'].get(\'value\'))\n1178. \n1179.     def test_locking_on_pickle(self):\n1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""\n1181.         bad_obj = PicklingSideEffect(cache)\n1182.         cache.set(\'set\', bad_obj)\n1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1184. \n1185.         self.assertIs(cache.add(\'add\', bad_obj), True)\n1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1187. \n1188.     def test_incr_decr_timeout(self):\n1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""\n1190.         key = \'value\'\n1191.         _key = cache.make_key(key)\n1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)\n1193.         expire = cache._expire_info[_key]\n1194.         self.assertEqual(cache.incr(key), 2)\n1195.         self.assertEqual(expire, cache._expire_info[_key])\n1196.         self.assertEqual(cache.decr(key), 1)\n1197.         self.assertEqual(expire, cache._expire_info[_key])\n1198. \n1199.     @limit_locmem_entries\n1200.     def test_lru_get(self):\n1201.         """get() moves cache keys."""\n1202.         for key in range(9):\n1203.             cache.set(key, key, timeout=None)\n1204.         for key in range(6):\n1205.             self.assertEqual(cache.get(key), key)\n1206.         cache.set(9, 9, timeout=None)\n1207.         for key in range(6):\n1208.             self.assertEqual(cache.get(key), key)\n1209.         for key in range(6, 9):\n1210.             self.assertIsNone(cache.get(key))\n1211.         self.assertEqual(cache.get(9), 9)\n1212. \n1213.     @limit_locmem_entries\n1214.     def test_lru_set(self):\n1215.         """set() moves cache keys."""\n1216.         for key in range(9):\n1217.             cache.set(key, key, timeout=None)\n1218.         for key in range(3, 9):\n1219.             cache.set(key, key, timeout=None)\n1220.         cache.set(9, 9, timeout=None)\n1221.         for key in range(3, 10):\n1222.             self.assertEqual(cache.get(key), key)\n1223.         for key in range(3):\n1224.             self.assertIsNone(cache.get(key))\n1225. \n1226.     @limit_locmem_entries\n1227.     def test_lru_incr(self):\n1228.         """incr() moves cache keys."""\n1229.         for key in range(9):\n1230.             cache.set(key, key, timeout=None)\n1231.         for key in range(6):\n1232.             self.assertEqual(cache.incr(key), key + 1)\n1233.         cache.set(9, 9, timeout=None)\n1234.         for key in range(6):\n1235.             self.assertEqual(cache.get(key), key + 1)\n1236.         for key in range(6, 9):\n1237.             self.assertIsNone(cache.get(key))\n1238.         self.assertEqual(cache.get(9), 9)\n1239. \n1240. \n1241. # memcached backend isn\'t guaranteed to be available.\n1242. # To check the memcached backend, the test settings file will\n1243. # need to contain at least one cache backend setting that points at\n1244. # your memcache server.\n1245. configured_caches = {}\n1246. for _cache_params in settings.CACHES.values():\n1247.     configured_caches[_cache_params[\'BACKEND\']] = _cache_params\n1248. \n1249. MemcachedCache_params = configured_caches.get(\'django.core.cache.backends.memcached.MemcachedCache\')\n1250. PyLibMCCache_params = configured_caches.get(\'django.core.cache.backends.memcached.PyLibMCCache\')\n1251. \n1252. # The memcached backends don\'t support cull-related options like `MAX_ENTRIES`.\n1253. memcached_excluded_caches = {\'cull\', \'zero_cull\'}\n1254. \n1255. \n1256. class BaseMemcachedTests(BaseCacheTests):\n1257. \n1258.     # By default it\'s assumed that the client doesn\'t clean up connections\n1259.     # properly, in which case the backend must do so after each request.\n1260.     should_disconnect_on_close = True\n1261. \n1262.     def test_location_multiple_servers(self):\n1263.         locations = [\n1264.             [\'server1.tld\', \'server2:11211\'],\n1265.             \'server1.tld;server2:11211\',\n1266.             \'server1.tld,server2:11211\',\n1267.         ]\n1268.         for location in locations:\n1269.             with self.subTest(location=location):\n1270.                 params = {\'BACKEND\': self.base_params[\'BACKEND\'], \'LOCATION\': location}\n1271.                 with self.settings(CACHES={\'default\': params}):\n1272.                     self.assertEqual(cache._servers, [\'server1.tld\', \'server2:11211\'])\n1273. \n1274.     def _perform_invalid_key_test(self, key, expected_warning):\n1275.         """\n1276.         While other backends merely warn, memcached should raise for an invalid\n1277.         key.\n1278.         """\n1279.         msg = expected_warning.replace(key, cache.make_key(key))\n1280.         with self.assertRaises(InvalidCacheKey) as cm:\n1281.             cache.set(key, \'value\')\n1282.         self.assertEqual(str(cm.exception), msg)\n1283. \n1284.     def test_default_never_expiring_timeout(self):\n1285.         # Regression test for #22845\n1286.         with self.settings(CACHES=caches_setting_for_tests(\n1287.                 base=self.base_params,\n1288.                 exclude=memcached_excluded_caches,\n1289.                 TIMEOUT=None)):\n1290.             cache.set(\'infinite_foo\', \'bar\')\n1291.             self.assertEqual(cache.get(\'infinite_foo\'), \'bar\')\n1292. \n1293.     def test_default_far_future_timeout(self):\n1294.         # Regression test for #22845\n1295.         with self.settings(CACHES=caches_setting_for_tests(\n1296.                 base=self.base_params,\n1297.                 exclude=memcached_excluded_caches,\n1298.                 # 60*60*24*365, 1 year\n1299.                 TIMEOUT=31536000)):\n1300.             cache.set(\'future_foo\', \'bar\')\n1301.             self.assertEqual(cache.get(\'future_foo\'), \'bar\')\n1302. \n1303.     def test_memcached_deletes_key_on_failed_set(self):\n1304.         # By default memcached allows objects up to 1MB. For the cache_db session\n1305.         # backend to always use the current session, memcached needs to delete\n1306.         # the old key if it fails to set.\n1307.         # pylibmc doesn\'t seem to have SERVER_MAX_VALUE_LENGTH as far as I can\n1308.         # tell from a quick check of its source code. This is falling back to\n1309.         # the default value exposed by python-memcached on my system.\n1310.         max_value_length = getattr(cache._lib, \'SERVER_MAX_VALUE_LENGTH\', 1048576)\n1311. \n1312.         cache.set(\'small_value\', \'a\')\n1313.         self.assertEqual(cache.get(\'small_value\'), \'a\')\n1314. \n1315.         large_value = \'a\' * (max_value_length + 1)\n1316.         try:\n1317.             cache.set(\'small_value\', large_value)\n1318.         except Exception:\n1319.             # Some clients (e.g. pylibmc) raise when the value is too large,\n1320.             # while others (e.g. python-memcached) intentionally return True\n1321.             # indicating success. This test is primarily checking that the key\n1322.             # was deleted, so the return/exception behavior for the set()\n1323.             # itself is not important.\n1324.             pass\n1325.         # small_value should be deleted, or set if configured to accept larger values\n1326.         value = cache.get(\'small_value\')\n1327.         self.assertTrue(value is None or value == large_value)\n1328. \n1329.     def test_close(self):\n1330.         # For clients that don\'t manage their connections properly, the\n1331.         # connection is closed when the request is complete.\n1332.         signals.request_finished.disconnect(close_old_connections)\n1333.         try:\n1334.             with mock.patch.object(cache._lib.Client, \'disconnect_all\', autospec=True) as mock_disconnect:\n1335.                 signals.request_finished.send(self.__class__)\n1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)\n1337.         finally:\n1338.             signals.request_finished.connect(close_old_connections)\n1339. \n1340.     def test_set_many_returns_failing_keys(self):\n1341.         def fail_set_multi(mapping, *args, **kwargs):\n1342.             return mapping.keys()\n1343.         with mock.patch(\'%s.Client.set_multi\' % self.client_library_name, side_effect=fail_set_multi):\n1344.             failing_keys = cache.set_many({\'key\': \'value\'})\n1345.             self.assertEqual(failing_keys, [\'key\'])\n1346. \n1347. \n1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")\n1349. @override_settings(CACHES=caches_setting_for_tests(\n1350.     base=MemcachedCache_params,\n1351.     exclude=memcached_excluded_caches,\n1352. ))\n1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):\n1354.     base_params = MemcachedCache_params\n1355.     client_library_name = \'memcache\'\n1356. \n1357.     def test_memcached_uses_highest_pickle_version(self):\n1358.         # Regression test for #19810\n1359.         for cache_key in settings.CACHES:\n1360.             with self.subTest(cache_key=cache_key):\n1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)\n1362. \n1363.     @override_settings(CACHES=caches_setting_for_tests(\n1364.         base=MemcachedCache_params,\n1365.         exclude=memcached_excluded_caches,\n1366.         OPTIONS={\'server_max_value_length\': 9999},\n1367.     ))\n1368.     def test_memcached_options(self):\n1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)\n1370. \n1371.     def test_default_used_when_none_is_set(self):\n1372.         """\n1373.         python-memcached doesn\'t support default in get() so this test\n1374.         overrides the one in BaseCacheTests.\n1375.         """\n1376.         cache.set(\'key_default_none\', None)\n1377.         self.assertEqual(cache.get(\'key_default_none\', default=\'default\'), \'default\')\n1378. \n1379. \n1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")\n1381. @override_settings(CACHES=caches_setting_for_tests(\n1382.     base=PyLibMCCache_params,\n1383.     exclude=memcached_excluded_caches,\n1384. ))\n1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):\n1386.     base_params = PyLibMCCache_params\n1387.     client_library_name = \'pylibmc\'\n1388.     # libmemcached manages its own connections.\n1389.     should_disconnect_on_close = False\n1390. \n1391.     @override_settings(CACHES=caches_setting_for_tests(\n1392.         base=PyLibMCCache_params,\n1393.         exclude=memcached_excluded_caches,\n1394.         OPTIONS={\n1395.             \'binary\': True,\n1396.             \'behaviors\': {\'tcp_nodelay\': True},\n1397.         },\n1398.     ))\n1399.     def test_pylibmc_options(self):\n1400.         self.assertTrue(cache._cache.binary)\n1401.         self.assertEqual(cache._cache.behaviors[\'tcp_nodelay\'], int(True))\n1402. \n1403. \n1404. @override_settings(CACHES=caches_setting_for_tests(\n1405.     BACKEND=\'django.core.cache.backends.filebased.FileBasedCache\',\n1406. ))\n1407. class FileBasedCacheTests(BaseCacheTests, TestCase):\n1408.     """\n1409.     Specific test cases for the file-based cache.\n1410.     """\n1411. \n1412.     def setUp(self):\n1413.         super().setUp()\n1414.         self.dirname = self.mkdtemp()\n1415.         # Caches location cannot be modified through override_settings / modify_settings,\n1416.         # hence settings are manipulated directly here and the setting_changed signal\n1417.         # is triggered manually.\n1418.         for cache_params in settings.CACHES.values():\n1419.             cache_params[\'LOCATION\'] = self.dirname\n1420.         setting_changed.send(self.__class__, setting=\'CACHES\', enter=False)\n1421. \n1422.     def tearDown(self):\n1423.         super().tearDown()\n1424.         # Call parent first, as cache.clear() may recreate cache base directory\n1425.         shutil.rmtree(self.dirname)\n1426. \n1427.     def mkdtemp(self):\n1428.         return tempfile.mkdtemp()\n1429. \n1430.     def test_ignores_non_cache_files(self):\n1431.         fname = os.path.join(self.dirname, \'not-a-cache-file\')\n1432.         with open(fname, \'w\'):\n1433.             os.utime(fname, None)\n1434.         cache.clear()\n1435.         self.assertTrue(os.path.exists(fname),\n1436.                         \'Expected cache.clear to ignore non cache files\')\n1437.         os.remove(fname)\n1438. \n1439.     def test_clear_does_not_remove_cache_dir(self):\n1440.         cache.clear()\n1441.         self.assertTrue(os.path.exists(self.dirname),\n1442.                         \'Expected cache.clear to keep the cache dir\')\n1443. \n1444.     def test_creates_cache_dir_if_nonexistent(self):\n1445.         os.rmdir(self.dirname)\n1446.         cache.set(\'foo\', \'bar\')\n1447.         self.assertTrue(os.path.exists(self.dirname))\n1448. \n1449.     def test_get_ignores_enoent(self):\n1450.         cache.set(\'foo\', \'bar\')\n1451.         os.unlink(cache._key_to_file(\'foo\'))\n1452.         # Returns the default instead of erroring.\n1453.         self.assertEqual(cache.get(\'foo\', \'baz\'), \'baz\')\n1454. \n1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):\n1456.         with mock.patch(\'builtins.open\', side_effect=OSError):\n1457.             with self.assertRaises(OSError):\n1458.                 cache.get(\'foo\')\n1459. \n1460.     def test_empty_cache_file_considered_expired(self):\n1461.         cache_file = cache._key_to_file(\'foo\')\n1462.         with open(cache_file, \'wb\') as fh:\n1463.             fh.write(b\'\')\n1464.         with open(cache_file, \'rb\') as fh:\n1465.             self.assertIs(cache._is_expired(fh), True)\n1466. \n1467. \n1468. class FileBasedCachePathLibTests(FileBasedCacheTests):\n1469.     def mkdtemp(self):\n1470.         tmp_dir = super().mkdtemp()\n1471.         return Path(tmp_dir)\n1472. \n1473. \n1474. @override_settings(CACHES={\n1475.     \'default\': {\n1476.         \'BACKEND\': \'cache.liberal_backend.CacheClass\',\n1477.     },\n1478. })\n1479. class CustomCacheKeyValidationTests(SimpleTestCase):\n1480.     """\n1481.     Tests for the ability to mixin a custom ``validate_key`` method to\n1482.     a custom cache backend that otherwise inherits from a builtin\n1483.     backend, and override the default key validation. Refs #6447.\n1484.     """\n1485.     def test_custom_key_validation(self):\n1486.         # this key is both longer than 250 characters, and has spaces\n1487.         key = \'some key with spaces\' * 15\n1488.         val = \'a value\'\n1489.         cache.set(key, val)\n1490.         self.assertEqual(cache.get(key), val)\n1491. \n1492. \n1493. @override_settings(\n1494.     CACHES={\n1495.         \'default\': {\n1496.             \'BACKEND\': \'cache.closeable_cache.CacheClass\',\n1497.         }\n1498.     }\n1499. )\n1500. class CacheClosingTests(SimpleTestCase):\n1501. \n1502.     def test_close(self):\n1503.         self.assertFalse(cache.closed)\n1504.         signals.request_finished.send(self.__class__)\n1505.         self.assertTrue(cache.closed)\n1506. \n1507. \n1508. DEFAULT_MEMORY_CACHES_SETTINGS = {\n1509.     \'default\': {\n1510.         \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1511.         \'LOCATION\': \'unique-snowflake\',\n1512.     }\n1513. }\n1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)\n1515. NEVER_EXPIRING_CACHES_SETTINGS[\'default\'][\'TIMEOUT\'] = None\n1516. \n1517. \n1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):\n1519.     """\n1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will\n1521.     set non-expiring keys.\n1522.     """\n1523.     def setUp(self):\n1524.         # The 5 minute (300 seconds) default expiration time for keys is\n1525.         # defined in the implementation of the initializer method of the\n1526.         # BaseCache type.\n1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout\n1528. \n1529.     def tearDown(self):\n1530.         del(self.DEFAULT_TIMEOUT)\n1531. \n1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):\n1533.         """The default expiration time of a cache key is 5 minutes.\n1534. \n1535.         This value is defined in\n1536.         django.core.cache.backends.base.BaseCache.__init__().\n1537.         """\n1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)\n1539. \n1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):\n1541.         """Caches that have the TIMEOUT parameter undefined in the default\n1542.         settings will use the default 5 minute timeout.\n1543.         """\n1544.         cache = caches[DEFAULT_CACHE_ALIAS]\n1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)\n1546. \n1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):\n1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the\n1550.         default settings with have `None` as the default timeout.\n1551. \n1552.         This means "no timeout".\n1553.         """\n1554.         cache = caches[DEFAULT_CACHE_ALIAS]\n1555.         self.assertIsNone(cache.default_timeout)\n1556.         self.assertIsNone(cache.get_backend_timeout())\n1557. \n1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)\n1559.     def test_caches_with_unset_timeout_set_expiring_key(self):\n1560.         """Memory caches that have the TIMEOUT parameter unset will set cache\n1561.         keys having the default 5 minute timeout.\n1562.         """\n1563.         key = "my-key"\n1564.         value = "my-value"\n1565.         cache = caches[DEFAULT_CACHE_ALIAS]\n1566.         cache.set(key, value)\n1567.         cache_key = cache.make_key(key)\n1568.         self.assertIsNotNone(cache._expire_info[cache_key])\n1569. \n1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):\n1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set\n1573.         a non expiring key by default.\n1574.         """\n1575.         key = "another-key"\n1576.         value = "another-value"\n1577.         cache = caches[DEFAULT_CACHE_ALIAS]\n1578.         cache.set(key, value)\n1579.         cache_key = cache.make_key(key)\n1580.         self.assertIsNone(cache._expire_info[cache_key])\n1581. \n1582. \n1583. @override_settings(\n1584.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1585.     CACHE_MIDDLEWARE_SECONDS=1,\n1586.     CACHES={\n1587.         \'default\': {\n1588.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1589.         },\n1590.     },\n1591.     USE_I18N=False,\n1592.     ALLOWED_HOSTS=[\'.example.com\'],\n1593. )\n1594. class CacheUtils(SimpleTestCase):\n1595.     """TestCase for django.utils.cache functions."""\n1596.     host = \'www.example.com\'\n1597.     path = \'/cache/test/\'\n1598.     factory = RequestFactory(HTTP_HOST=host)\n1599. \n1600.     def tearDown(self):\n1601.         cache.clear()\n1602. \n1603.     def _get_request_cache(self, method=\'GET\', query_string=None, update_cache=None):\n1604.         request = self._get_request(self.host, self.path,\n1605.                                     method, query_string=query_string)\n1606.         request._cache_update_cache = True if not update_cache else update_cache\n1607.         return request\n1608. \n1609.     def test_patch_vary_headers(self):\n1610.         headers = (\n1611.             # Initial vary, new headers, resulting vary.\n1612.             (None, (\'Accept-Encoding\',), \'Accept-Encoding\'),\n1613.             (\'Accept-Encoding\', (\'accept-encoding\',), \'Accept-Encoding\'),\n1614.             (\'Accept-Encoding\', (\'ACCEPT-ENCODING\',), \'Accept-Encoding\'),\n1615.             (\'Cookie\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1616.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1617.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1618.             (None, (\'Accept-Encoding\', \'COOKIE\'), \'Accept-Encoding, COOKIE\'),\n1619.             (\'Cookie,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1620.             (\'Cookie    ,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1621.             (\'*\', (\'Accept-Language\', \'Cookie\'), \'*\'),\n1622.             (\'Accept-Language, Cookie\', (\'*\',), \'*\'),\n1623.         )\n1624.         for initial_vary, newheaders, resulting_vary in headers:\n1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):\n1626.                 response = HttpResponse()\n1627.                 if initial_vary is not None:\n1628.                     response[\'Vary\'] = initial_vary\n1629.                 patch_vary_headers(response, newheaders)\n1630.                 self.assertEqual(response[\'Vary\'], resulting_vary)\n1631. \n1632.     def test_get_cache_key(self):\n1633.         request = self.factory.get(self.path)\n1634.         response = HttpResponse()\n1635.         # Expect None if no headers have been set yet.\n1636.         self.assertIsNone(get_cache_key(request))\n1637.         # Set headers to an empty list.\n1638.         learn_cache_key(request, response)\n1639. \n1640.         self.assertEqual(\n1641.             get_cache_key(request),\n1642.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1643.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1644.         )\n1645.         # A specified key_prefix is taken into account.\n1646.         key_prefix = \'localprefix\'\n1647.         learn_cache_key(request, response, key_prefix=key_prefix)\n1648.         self.assertEqual(\n1649.             get_cache_key(request, key_prefix=key_prefix),\n1650.             \'views.decorators.cache.cache_page.localprefix.GET.\'\n1651.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1652.         )\n1653. \n1654.     def test_get_cache_key_with_query(self):\n1655.         request = self.factory.get(self.path, {\'test\': 1})\n1656.         response = HttpResponse()\n1657.         # Expect None if no headers have been set yet.\n1658.         self.assertIsNone(get_cache_key(request))\n1659.         # Set headers to an empty list.\n1660.         learn_cache_key(request, response)\n1661.         # The querystring is taken into account.\n1662.         self.assertEqual(\n1663.             get_cache_key(request),\n1664.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1665.             \'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e\'\n1666.         )\n1667. \n1668.     def test_cache_key_varies_by_url(self):\n1669.         """\n1670.         get_cache_key keys differ by fully-qualified URL instead of path\n1671.         """\n1672.         request1 = self.factory.get(self.path, HTTP_HOST=\'sub-1.example.com\')\n1673.         learn_cache_key(request1, HttpResponse())\n1674.         request2 = self.factory.get(self.path, HTTP_HOST=\'sub-2.example.com\')\n1675.         learn_cache_key(request2, HttpResponse())\n1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))\n1677. \n1678.     def test_learn_cache_key(self):\n1679.         request = self.factory.head(self.path)\n1680.         response = HttpResponse()\n1681.         response[\'Vary\'] = \'Pony\'\n1682.         # Make sure that the Vary header is added to the key hash\n1683.         learn_cache_key(request, response)\n1684. \n1685.         self.assertEqual(\n1686.             get_cache_key(request),\n1687.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1688.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1689.         )\n1690. \n1691.     def test_patch_cache_control(self):\n1692.         tests = (\n1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts\n1694.             (None, {\'private\': True}, {\'private\'}),\n1695.             (\'\', {\'private\': True}, {\'private\'}),\n1696.             # no-cache.\n1697.             (\'\', {\'no_cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1698.             (\'\', {\'no-cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1699.             (\'no-cache=Set-Cookie\', {\'no_cache\': True}, {\'no-cache\'}),\n1700.             (\'no-cache=Set-Cookie,no-cache=Link\', {\'no_cache\': True}, {\'no-cache\'}),\n1701.             (\'no-cache=Set-Cookie\', {\'no_cache\': \'Link\'}, {\'no-cache=Set-Cookie\', \'no-cache=Link\'}),\n1702.             (\n1703.                 \'no-cache=Set-Cookie,no-cache=Link\',\n1704.                 {\'no_cache\': \'Custom\'},\n1705.                 {\'no-cache=Set-Cookie\', \'no-cache=Link\', \'no-cache=Custom\'},\n1706.             ),\n1707.             # Test whether private/public attributes are mutually exclusive\n1708.             (\'private\', {\'private\': True}, {\'private\'}),\n1709.             (\'private\', {\'public\': True}, {\'public\'}),\n1710.             (\'public\', {\'public\': True}, {\'public\'}),\n1711.             (\'public\', {\'private\': True}, {\'private\'}),\n1712.             (\'must-revalidate,max-age=60,private\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1713.             (\'must-revalidate,max-age=60,public\', {\'private\': True}, {\'must-revalidate\', \'max-age=60\', \'private\'}),\n1714.             (\'must-revalidate,max-age=60\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1715.         )\n1716. \n1717.         cc_delim_re = re.compile(r\'\\s*,\\s*\')\n1718. \n1719.         for initial_cc, newheaders, expected_cc in tests:\n1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):\n1721.                 response = HttpResponse()\n1722.                 if initial_cc is not None:\n1723.                     response[\'Cache-Control\'] = initial_cc\n1724.                 patch_cache_control(response, **newheaders)\n1725.                 parts = set(cc_delim_re.split(response[\'Cache-Control\']))\n1726.                 self.assertEqual(parts, expected_cc)\n1727. \n1728. \n1729. @override_settings(\n1730.     CACHES={\n1731.         \'default\': {\n1732.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1733.             \'KEY_PREFIX\': \'cacheprefix\',\n1734.         },\n1735.     },\n1736. )\n1737. class PrefixedCacheUtils(CacheUtils):\n1738.     pass\n1739. \n1740. \n1741. @override_settings(\n1742.     CACHE_MIDDLEWARE_SECONDS=60,\n1743.     CACHE_MIDDLEWARE_KEY_PREFIX=\'test\',\n1744.     CACHES={\n1745.         \'default\': {\n1746.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1747.         },\n1748.     },\n1749. )\n1750. class CacheHEADTest(SimpleTestCase):\n1751.     path = \'/cache/test/\'\n1752.     factory = RequestFactory()\n1753. \n1754.     def tearDown(self):\n1755.         cache.clear()\n1756. \n1757.     def _set_cache(self, request, msg):\n1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)\n1759. \n1760.     def test_head_caches_correctly(self):\n1761.         test_content = \'test content\'\n1762. \n1763.         request = self.factory.head(self.path)\n1764.         request._cache_update_cache = True\n1765.         self._set_cache(request, test_content)\n1766. \n1767.         request = self.factory.head(self.path)\n1768.         request._cache_update_cache = True\n1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1770.         self.assertIsNotNone(get_cache_data)\n1771.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1772. \n1773.     def test_head_with_cached_get(self):\n1774.         test_content = \'test content\'\n1775. \n1776.         request = self.factory.get(self.path)\n1777.         request._cache_update_cache = True\n1778.         self._set_cache(request, test_content)\n1779. \n1780.         request = self.factory.head(self.path)\n1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1782.         self.assertIsNotNone(get_cache_data)\n1783.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1784. \n1785. \n1786. @override_settings(\n1787.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1788.     CACHES={\n1789.         \'default\': {\n1790.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1791.         },\n1792.     },\n1793.     LANGUAGES=[\n1794.         (\'en\', \'English\'),\n1795.         (\'es\', \'Spanish\'),\n1796.     ],\n1797. )\n1798. class CacheI18nTest(SimpleTestCase):\n1799.     path = \'/cache/test/\'\n1800.     factory = RequestFactory()\n1801. \n1802.     def tearDown(self):\n1803.         cache.clear()\n1804. \n1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1806.     def test_cache_key_i18n_translation(self):\n1807.         request = self.factory.get(self.path)\n1808.         lang = translation.get_language()\n1809.         response = HttpResponse()\n1810.         key = learn_cache_key(request, response)\n1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1812.         key2 = get_cache_key(request)\n1813.         self.assertEqual(key, key2)\n1814. \n1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):\n1816.         request = self.factory.get(self.path)\n1817.         request.META[\'HTTP_ACCEPT_LANGUAGE\'] = accept_language\n1818.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1819.         response = HttpResponse()\n1820.         response[\'Vary\'] = vary\n1821.         key = learn_cache_key(request, response)\n1822.         key2 = get_cache_key(request)\n1823.         self.assertEqual(key, reference_key)\n1824.         self.assertEqual(key2, reference_key)\n1825. \n1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1827.     def test_cache_key_i18n_translation_accept_language(self):\n1828.         lang = translation.get_language()\n1829.         self.assertEqual(lang, \'en\')\n1830.         request = self.factory.get(self.path)\n1831.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1832.         response = HttpResponse()\n1833.         response[\'Vary\'] = \'accept-encoding\'\n1834.         key = learn_cache_key(request, response)\n1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1836.         self.check_accept_language_vary(\n1837.             \'en-us\',\n1838.             \'cookie, accept-language, accept-encoding\',\n1839.             key\n1840.         )\n1841.         self.check_accept_language_vary(\n1842.             \'en-US\',\n1843.             \'cookie, accept-encoding, accept-language\',\n1844.             key\n1845.         )\n1846.         self.check_accept_language_vary(\n1847.             \'en-US,en;q=0.8\',\n1848.             \'accept-encoding, accept-language, cookie\',\n1849.             key\n1850.         )\n1851.         self.check_accept_language_vary(\n1852.             \'en-US,en;q=0.8,ko;q=0.6\',\n1853.             \'accept-language, cookie, accept-encoding\',\n1854.             key\n1855.         )\n1856.         self.check_accept_language_vary(\n1857.             \'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 \',\n1858.             \'accept-encoding, cookie, accept-language\',\n1859.             key\n1860.         )\n1861.         self.check_accept_language_vary(\n1862.             \'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4\',\n1863.             \'accept-language, accept-encoding, cookie\',\n1864.             key\n1865.         )\n1866.         self.check_accept_language_vary(\n1867.             \'ko;q=1.0,en;q=0.5\',\n1868.             \'cookie, accept-language, accept-encoding\',\n1869.             key\n1870.         )\n1871.         self.check_accept_language_vary(\n1872.             \'ko, en\',\n1873.             \'cookie, accept-encoding, accept-language\',\n1874.             key\n1875.         )\n1876.         self.check_accept_language_vary(\n1877.             \'ko-KR, en-US\',\n1878.             \'accept-encoding, accept-language, cookie\',\n1879.             key\n1880.         )\n1881. \n1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)\n1883.     def test_cache_key_i18n_formatting(self):\n1884.         request = self.factory.get(self.path)\n1885.         lang = translation.get_language()\n1886.         response = HttpResponse()\n1887.         key = learn_cache_key(request, response)\n1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")\n1889.         key2 = get_cache_key(request)\n1890.         self.assertEqual(key, key2)\n1891. \n1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)\n1893.     def test_cache_key_i18n_timezone(self):\n1894.         request = self.factory.get(self.path)\n1895.         tz = timezone.get_current_timezone_name()\n1896.         response = HttpResponse()\n1897.         key = learn_cache_key(request, response)\n1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")\n1899.         key2 = get_cache_key(request)\n1900.         self.assertEqual(key, key2)\n1901. \n1902.     @override_settings(USE_I18N=False, USE_L10N=False)\n1903.     def test_cache_key_no_i18n(self):\n1904.         request = self.factory.get(self.path)\n1905.         lang = translation.get_language()\n1906.         tz = timezone.get_current_timezone_name()\n1907.         response = HttpResponse()\n1908.         key = learn_cache_key(request, response)\n1909.         self.assertNotIn(lang, key, "Cache keys shouldn\'t include the language name when i18n isn\'t active")\n1910.         self.assertNotIn(tz, key, "Cache keys shouldn\'t include the time zone name when i18n isn\'t active")\n1911. \n1912.     @override_settings(\n1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1914.         CACHE_MIDDLEWARE_SECONDS=60,\n1915.         USE_I18N=True,\n1916.     )\n1917.     def test_middleware(self):\n1918.         def set_cache(request, lang, msg):\n1919.             def get_response(req):\n1920.                 return HttpResponse(msg)\n1921. \n1922.             translation.activate(lang)\n1923.             return UpdateCacheMiddleware(get_response)(request)\n1924. \n1925.         # cache with non empty request.GET\n1926.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'other\': \'true\'})\n1927.         request._cache_update_cache = True\n1928. \n1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1930.         # first access, cache must return None\n1931.         self.assertIsNone(get_cache_data)\n1932.         content = \'Check for cache with QUERY_STRING\'\n1933. \n1934.         def get_response(req):\n1935.             return HttpResponse(content)\n1936. \n1937.         UpdateCacheMiddleware(get_response)(request)\n1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1939.         # cache must return content\n1940.         self.assertIsNotNone(get_cache_data)\n1941.         self.assertEqual(get_cache_data.content, content.encode())\n1942.         # different QUERY_STRING, cache must be empty\n1943.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'somethingelse\': \'true\'})\n1944.         request._cache_update_cache = True\n1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1946.         self.assertIsNone(get_cache_data)\n1947. \n1948.         # i18n tests\n1949.         en_message = "Hello world!"\n1950.         es_message = "Hola mundo!"\n1951. \n1952.         request = self.factory.get(self.path)\n1953.         request._cache_update_cache = True\n1954.         set_cache(request, \'en\', en_message)\n1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1956.         # The cache can be recovered\n1957.         self.assertIsNotNone(get_cache_data)\n1958.         self.assertEqual(get_cache_data.content, en_message.encode())\n1959.         # change the session language and set content\n1960.         request = self.factory.get(self.path)\n1961.         request._cache_update_cache = True\n1962.         set_cache(request, \'es\', es_message)\n1963.         # change again the language\n1964.         translation.activate(\'en\')\n1965.         # retrieve the content from cache\n1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1967.         self.assertEqual(get_cache_data.content, en_message.encode())\n1968.         # change again the language\n1969.         translation.activate(\'es\')\n1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1971.         self.assertEqual(get_cache_data.content, es_message.encode())\n1972.         # reset the language\n1973.         translation.deactivate()\n1974. \n1975.     @override_settings(\n1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1977.         CACHE_MIDDLEWARE_SECONDS=60,\n1978.     )\n1979.     def test_middleware_doesnt_cache_streaming_response(self):\n1980.         request = self.factory.get(self.path)\n1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1982.         self.assertIsNone(get_cache_data)\n1983. \n1984.         def get_stream_response(req):\n1985.             return StreamingHttpResponse([\'Check for cache with streaming content.\'])\n1986. \n1987.         UpdateCacheMiddleware(get_stream_response)(request)\n1988. \n1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1990.         self.assertIsNone(get_cache_data)\n1991. \n1992. \n1993. @override_settings(\n1994.     CACHES={\n1995.         \'default\': {\n1996.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1997.             \'KEY_PREFIX\': \'cacheprefix\'\n1998.         },\n1999.     },\n2000. )', start_line_number=1, end_line_number=2000)]
2025-10-06 14:25:39,555 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\ncache.backends.db._cull sometimes fails with \'NoneType\' object is not subscriptable\n\nIssue description: \nDescription\n\t \n\t\t(last modified by Guillermo BonvehÃ­)\n\t \nI\'m sporadically getting some cache errors using database backend.\nThe error is: \'NoneType\' object is not subscriptable\nAnd the backtrace:\n/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py:143â†’ _get_response\n/usr/local/lib/python3.7/site-packages/django/template/response.py:108â†’ render\n/usr/local/lib/python3.7/site-packages/django/utils/decorators.py:156â†’ callback\n/usr/local/lib/python3.7/site-packages/django/middleware/cache.py:103â†’ process_response\n/usr/local/lib/python3.7/site-packages/django/utils/cache.py:374â†’ learn_cache_key\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:104â†’ set\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:136â†’ _base_set\n/usr/local/lib/python3.7/site-packages/django/core/cache/backends/db.py:277â†’ _cull\nThis is using Django 2.2.11 but I see the same code is in master.\n\u200bhttps://github.com/django/django/blob/master/django/core/cache/backends/db.py#L270\n\t\t\t\tcursor.execute(\n\t\t\t\t\tconnection.ops.cache_key_culling_sql() % table,\n\t\t\t\t\t[cull_num])\n\t\t\t\tcursor.execute("DELETE FROM %s "\n\t\t\t\t\t\t\t "WHERE cache_key < %%s" % table,\n\t\t\t\t\t\t\t [cursor.fetchone()[0]])\nFrom what I can understand, the cursor after running connection.ops.cache_key_culling_sql() command is not returning any data, so cursor.fetchone()[0] afterwards fails.\nI guess a simple check to see if it contains data would be enough, may apply for an easy picking.\nEdit: Wording\n\nIssue comments:\n\n\nBug reproducing context:\nFile: tests/cache/tests.py\nLine number range: 1 - 2000\nContent:\n1. # Unit tests for cache framework\n2. # Uses whatever cache backend is set in the test settings file.\n3. import copy\n4. import io\n5. import os\n6. import pickle\n7. import re\n8. import shutil\n9. import tempfile\n10. import threading\n11. import time\n12. import unittest\n13. from pathlib import Path\n14. from unittest import mock\n15. \n16. from django.conf import settings\n17. from django.core import management, signals\n18. from django.core.cache import (\n19.     DEFAULT_CACHE_ALIAS, CacheKeyWarning, InvalidCacheKey, cache, caches,\n20. )\n21. from django.core.cache.backends.base import InvalidCacheBackendError\n22. from django.core.cache.utils import make_template_fragment_key\n23. from django.db import close_old_connections, connection, connections\n24. from django.http import (\n25.     HttpRequest, HttpResponse, HttpResponseNotModified, StreamingHttpResponse,\n26. )\n27. from django.middleware.cache import (\n28.     CacheMiddleware, FetchFromCacheMiddleware, UpdateCacheMiddleware,\n29. )\n30. from django.middleware.csrf import CsrfViewMiddleware\n31. from django.template import engines\n32. from django.template.context_processors import csrf\n33. from django.template.response import TemplateResponse\n34. from django.test import (\n35.     RequestFactory, SimpleTestCase, TestCase, TransactionTestCase,\n36.     override_settings,\n37. )\n38. from django.test.signals import setting_changed\n39. from django.utils import timezone, translation\n40. from django.utils.cache import (\n41.     get_cache_key, learn_cache_key, patch_cache_control, patch_vary_headers,\n42. )\n43. from django.views.decorators.cache import cache_control, cache_page\n44. \n45. from .models import Poll, expensive_calculation\n46. \n47. \n48. # functions/classes for complex data type tests\n49. def f():\n50.     return 42\n51. \n52. \n53. class C:\n54.     def m(n):\n55.         return 24\n56. \n57. \n58. class Unpicklable:\n59.     def __getstate__(self):\n60.         raise pickle.PickleError()\n61. \n62. \n63. def empty_response(request):\n64.     return HttpResponse()\n65. \n66. \n67. KEY_ERRORS_WITH_MEMCACHED_MSG = (\n68.     \'Cache key contains characters that will cause errors if used with \'\n69.     \'memcached: %r\'\n70. )\n71. \n72. \n73. @override_settings(CACHES={\n74.     \'default\': {\n75.         \'BACKEND\': \'django.core.cache.backends.dummy.DummyCache\',\n76.     }\n77. })\n78. class DummyCacheTests(SimpleTestCase):\n79.     # The Dummy cache backend doesn\'t really behave like a test backend,\n80.     # so it has its own test case.\n81. \n82.     def test_simple(self):\n83.         "Dummy cache backend ignores cache set calls"\n84.         cache.set("key", "value")\n85.         self.assertIsNone(cache.get("key"))\n86. \n87.     def test_add(self):\n88.         "Add doesn\'t do anything in dummy cache backend"\n89.         self.assertIs(cache.add("addkey1", "value"), True)\n90.         self.assertIs(cache.add("addkey1", "newvalue"), True)\n91.         self.assertIsNone(cache.get("addkey1"))\n92. \n93.     def test_non_existent(self):\n94.         "Nonexistent keys aren\'t found in the dummy cache backend"\n95.         self.assertIsNone(cache.get("does_not_exist"))\n96.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n97. \n98.     def test_get_many(self):\n99.         "get_many returns nothing for the dummy cache backend"\n100.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n101.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {})\n102.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {})\n103. \n104.     def test_get_many_invalid_key(self):\n105.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n106.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n107.             cache.get_many([\'key with spaces\'])\n108. \n109.     def test_delete(self):\n110.         "Cache deletion is transparently ignored on the dummy cache backend"\n111.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n112.         self.assertIsNone(cache.get("key1"))\n113.         self.assertIs(cache.delete("key1"), False)\n114.         self.assertIsNone(cache.get("key1"))\n115.         self.assertIsNone(cache.get("key2"))\n116. \n117.     def test_has_key(self):\n118.         "The has_key method doesn\'t ever return True for the dummy cache backend"\n119.         cache.set("hello1", "goodbye1")\n120.         self.assertIs(cache.has_key("hello1"), False)\n121.         self.assertIs(cache.has_key("goodbye1"), False)\n122. \n123.     def test_in(self):\n124.         "The in operator doesn\'t ever return True for the dummy cache backend"\n125.         cache.set("hello2", "goodbye2")\n126.         self.assertNotIn("hello2", cache)\n127.         self.assertNotIn("goodbye2", cache)\n128. \n129.     def test_incr(self):\n130.         "Dummy cache values can\'t be incremented"\n131.         cache.set(\'answer\', 42)\n132.         with self.assertRaises(ValueError):\n133.             cache.incr(\'answer\')\n134.         with self.assertRaises(ValueError):\n135.             cache.incr(\'does_not_exist\')\n136. \n137.     def test_decr(self):\n138.         "Dummy cache values can\'t be decremented"\n139.         cache.set(\'answer\', 42)\n140.         with self.assertRaises(ValueError):\n141.             cache.decr(\'answer\')\n142.         with self.assertRaises(ValueError):\n143.             cache.decr(\'does_not_exist\')\n144. \n145.     def test_touch(self):\n146.         """Dummy cache can\'t do touch()."""\n147.         self.assertIs(cache.touch(\'whatever\'), False)\n148. \n149.     def test_data_types(self):\n150.         "All data types are ignored equally by the dummy cache"\n151.         stuff = {\n152.             \'string\': \'this is a string\',\n153.             \'int\': 42,\n154.             \'list\': [1, 2, 3, 4],\n155.             \'tuple\': (1, 2, 3, 4),\n156.             \'dict\': {\'A\': 1, \'B\': 2},\n157.             \'function\': f,\n158.             \'class\': C,\n159.         }\n160.         cache.set("stuff", stuff)\n161.         self.assertIsNone(cache.get("stuff"))\n162. \n163.     def test_expiration(self):\n164.         "Expiration has no effect on the dummy cache"\n165.         cache.set(\'expire1\', \'very quickly\', 1)\n166.         cache.set(\'expire2\', \'very quickly\', 1)\n167.         cache.set(\'expire3\', \'very quickly\', 1)\n168. \n169.         time.sleep(2)\n170.         self.assertIsNone(cache.get("expire1"))\n171. \n172.         self.assertIs(cache.add("expire2", "newvalue"), True)\n173.         self.assertIsNone(cache.get("expire2"))\n174.         self.assertIs(cache.has_key("expire3"), False)\n175. \n176.     def test_unicode(self):\n177.         "Unicode values are ignored by the dummy cache"\n178.         stuff = {\n179.             \'ascii\': \'ascii_value\',\n180.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n181.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n182.             \'ascii2\': {\'x\': 1}\n183.         }\n184.         for (key, value) in stuff.items():\n185.             with self.subTest(key=key):\n186.                 cache.set(key, value)\n187.                 self.assertIsNone(cache.get(key))\n188. \n189.     def test_set_many(self):\n190.         "set_many does nothing for the dummy cache backend"\n191.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}), [])\n192.         self.assertEqual(cache.set_many({\'a\': 1, \'b\': 2}, timeout=2, version=\'1\'), [])\n193. \n194.     def test_set_many_invalid_key(self):\n195.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n196.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n197.             cache.set_many({\'key with spaces\': \'foo\'})\n198. \n199.     def test_delete_many(self):\n200.         "delete_many does nothing for the dummy cache backend"\n201.         cache.delete_many([\'a\', \'b\'])\n202. \n203.     def test_delete_many_invalid_key(self):\n204.         msg = KEY_ERRORS_WITH_MEMCACHED_MSG % \':1:key with spaces\'\n205.         with self.assertWarnsMessage(CacheKeyWarning, msg):\n206.             cache.delete_many({\'key with spaces\': \'foo\'})\n207. \n208.     def test_clear(self):\n209.         "clear does nothing for the dummy cache backend"\n210.         cache.clear()\n211. \n212.     def test_incr_version(self):\n213.         "Dummy cache versions can\'t be incremented"\n214.         cache.set(\'answer\', 42)\n215.         with self.assertRaises(ValueError):\n216.             cache.incr_version(\'answer\')\n217.         with self.assertRaises(ValueError):\n218.             cache.incr_version(\'does_not_exist\')\n219. \n220.     def test_decr_version(self):\n221.         "Dummy cache versions can\'t be decremented"\n222.         cache.set(\'answer\', 42)\n223.         with self.assertRaises(ValueError):\n224.             cache.decr_version(\'answer\')\n225.         with self.assertRaises(ValueError):\n226.             cache.decr_version(\'does_not_exist\')\n227. \n228.     def test_get_or_set(self):\n229.         self.assertEqual(cache.get_or_set(\'mykey\', \'default\'), \'default\')\n230.         self.assertIsNone(cache.get_or_set(\'mykey\', None))\n231. \n232.     def test_get_or_set_callable(self):\n233.         def my_callable():\n234.             return \'default\'\n235. \n236.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'default\')\n237.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'default\')\n238. \n239. \n240. def custom_key_func(key, key_prefix, version):\n241.     "A customized cache key function"\n242.     return \'CUSTOM-\' + \'-\'.join([key_prefix, str(version), key])\n243. \n244. \n245. _caches_setting_base = {\n246.     \'default\': {},\n247.     \'prefix\': {\'KEY_PREFIX\': \'cacheprefix{}\'.format(os.getpid())},\n248.     \'v2\': {\'VERSION\': 2},\n249.     \'custom_key\': {\'KEY_FUNCTION\': custom_key_func},\n250.     \'custom_key2\': {\'KEY_FUNCTION\': \'cache.tests.custom_key_func\'},\n251.     \'cull\': {\'OPTIONS\': {\'MAX_ENTRIES\': 30}},\n252.     \'zero_cull\': {\'OPTIONS\': {\'CULL_FREQUENCY\': 0, \'MAX_ENTRIES\': 30}},\n253. }\n254. \n255. \n256. def caches_setting_for_tests(base=None, exclude=None, **params):\n257.     # `base` is used to pull in the memcached config from the original settings,\n258.     # `exclude` is a set of cache names denoting which `_caches_setting_base` keys\n259.     # should be omitted.\n260.     # `params` are test specific overrides and `_caches_settings_base` is the\n261.     # base config for the tests.\n262.     # This results in the following search order:\n263.     # params -> _caches_setting_base -> base\n264.     base = base or {}\n265.     exclude = exclude or set()\n266.     setting = {k: base.copy() for k in _caches_setting_base if k not in exclude}\n267.     for key, cache_params in setting.items():\n268.         cache_params.update(_caches_setting_base[key])\n269.         cache_params.update(params)\n270.     return setting\n271. \n272. \n273. class BaseCacheTests:\n274.     # A common set of tests to apply to all cache backends\n275.     factory = RequestFactory()\n276. \n277.     def tearDown(self):\n278.         cache.clear()\n279. \n280.     def test_simple(self):\n281.         # Simple cache set/get works\n282.         cache.set("key", "value")\n283.         self.assertEqual(cache.get("key"), "value")\n284. \n285.     def test_default_used_when_none_is_set(self):\n286.         """If None is cached, get() returns it instead of the default."""\n287.         cache.set(\'key_default_none\', None)\n288.         self.assertIsNone(cache.get(\'key_default_none\', default=\'default\'))\n289. \n290.     def test_add(self):\n291.         # A key can be added to a cache\n292.         self.assertIs(cache.add("addkey1", "value"), True)\n293.         self.assertIs(cache.add("addkey1", "newvalue"), False)\n294.         self.assertEqual(cache.get("addkey1"), "value")\n295. \n296.     def test_prefix(self):\n297.         # Test for same cache key conflicts between shared backend\n298.         cache.set(\'somekey\', \'value\')\n299. \n300.         # should not be set in the prefixed cache\n301.         self.assertIs(caches[\'prefix\'].has_key(\'somekey\'), False)\n302. \n303.         caches[\'prefix\'].set(\'somekey\', \'value2\')\n304. \n305.         self.assertEqual(cache.get(\'somekey\'), \'value\')\n306.         self.assertEqual(caches[\'prefix\'].get(\'somekey\'), \'value2\')\n307. \n308.     def test_non_existent(self):\n309.         """Nonexistent cache keys return as None/default."""\n310.         self.assertIsNone(cache.get("does_not_exist"))\n311.         self.assertEqual(cache.get("does_not_exist", "bang!"), "bang!")\n312. \n313.     def test_get_many(self):\n314.         # Multiple cache keys can be returned using get_many\n315.         cache.set_many({\'a\': \'a\', \'b\': \'b\', \'c\': \'c\', \'d\': \'d\'})\n316.         self.assertEqual(cache.get_many([\'a\', \'c\', \'d\']), {\'a\': \'a\', \'c\': \'c\', \'d\': \'d\'})\n317.         self.assertEqual(cache.get_many([\'a\', \'b\', \'e\']), {\'a\': \'a\', \'b\': \'b\'})\n318.         self.assertEqual(cache.get_many(iter([\'a\', \'b\', \'e\'])), {\'a\': \'a\', \'b\': \'b\'})\n319. \n320.     def test_delete(self):\n321.         # Cache keys can be deleted\n322.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n323.         self.assertEqual(cache.get("key1"), "spam")\n324.         self.assertIs(cache.delete("key1"), True)\n325.         self.assertIsNone(cache.get("key1"))\n326.         self.assertEqual(cache.get("key2"), "eggs")\n327. \n328.     def test_delete_nonexistent(self):\n329.         self.assertIs(cache.delete(\'nonexistent_key\'), False)\n330. \n331.     def test_has_key(self):\n332.         # The cache can be inspected for cache keys\n333.         cache.set("hello1", "goodbye1")\n334.         self.assertIs(cache.has_key("hello1"), True)\n335.         self.assertIs(cache.has_key("goodbye1"), False)\n336.         cache.set("no_expiry", "here", None)\n337.         self.assertIs(cache.has_key("no_expiry"), True)\n338. \n339.     def test_in(self):\n340.         # The in operator can be used to inspect cache contents\n341.         cache.set("hello2", "goodbye2")\n342.         self.assertIn("hello2", cache)\n343.         self.assertNotIn("goodbye2", cache)\n344. \n345.     def test_incr(self):\n346.         # Cache values can be incremented\n347.         cache.set(\'answer\', 41)\n348.         self.assertEqual(cache.incr(\'answer\'), 42)\n349.         self.assertEqual(cache.get(\'answer\'), 42)\n350.         self.assertEqual(cache.incr(\'answer\', 10), 52)\n351.         self.assertEqual(cache.get(\'answer\'), 52)\n352.         self.assertEqual(cache.incr(\'answer\', -10), 42)\n353.         with self.assertRaises(ValueError):\n354.             cache.incr(\'does_not_exist\')\n355. \n356.     def test_decr(self):\n357.         # Cache values can be decremented\n358.         cache.set(\'answer\', 43)\n359.         self.assertEqual(cache.decr(\'answer\'), 42)\n360.         self.assertEqual(cache.get(\'answer\'), 42)\n361.         self.assertEqual(cache.decr(\'answer\', 10), 32)\n362.         self.assertEqual(cache.get(\'answer\'), 32)\n363.         self.assertEqual(cache.decr(\'answer\', -10), 42)\n364.         with self.assertRaises(ValueError):\n365.             cache.decr(\'does_not_exist\')\n366. \n367.     def test_close(self):\n368.         self.assertTrue(hasattr(cache, \'close\'))\n369.         cache.close()\n370. \n371.     def test_data_types(self):\n372.         # Many different data types can be cached\n373.         stuff = {\n374.             \'string\': \'this is a string\',\n375.             \'int\': 42,\n376.             \'list\': [1, 2, 3, 4],\n377.             \'tuple\': (1, 2, 3, 4),\n378.             \'dict\': {\'A\': 1, \'B\': 2},\n379.             \'function\': f,\n380.             \'class\': C,\n381.         }\n382.         cache.set("stuff", stuff)\n383.         self.assertEqual(cache.get("stuff"), stuff)\n384. \n385.     def test_cache_read_for_model_instance(self):\n386.         # Don\'t want fields with callable as default to be called on cache read\n387.         expensive_calculation.num_runs = 0\n388.         Poll.objects.all().delete()\n389.         my_poll = Poll.objects.create(question="Well?")\n390.         self.assertEqual(Poll.objects.count(), 1)\n391.         pub_date = my_poll.pub_date\n392.         cache.set(\'question\', my_poll)\n393.         cached_poll = cache.get(\'question\')\n394.         self.assertEqual(cached_poll.pub_date, pub_date)\n395.         # We only want the default expensive calculation run once\n396.         self.assertEqual(expensive_calculation.num_runs, 1)\n397. \n398.     def test_cache_write_for_model_instance_with_deferred(self):\n399.         # Don\'t want fields with callable as default to be called on cache write\n400.         expensive_calculation.num_runs = 0\n401.         Poll.objects.all().delete()\n402.         Poll.objects.create(question="What?")\n403.         self.assertEqual(expensive_calculation.num_runs, 1)\n404.         defer_qs = Poll.objects.all().defer(\'question\')\n405.         self.assertEqual(defer_qs.count(), 1)\n406.         self.assertEqual(expensive_calculation.num_runs, 1)\n407.         cache.set(\'deferred_queryset\', defer_qs)\n408.         # cache set should not re-evaluate default functions\n409.         self.assertEqual(expensive_calculation.num_runs, 1)\n410. \n411.     def test_cache_read_for_model_instance_with_deferred(self):\n412.         # Don\'t want fields with callable as default to be called on cache read\n413.         expensive_calculation.num_runs = 0\n414.         Poll.objects.all().delete()\n415.         Poll.objects.create(question="What?")\n416.         self.assertEqual(expensive_calculation.num_runs, 1)\n417.         defer_qs = Poll.objects.all().defer(\'question\')\n418.         self.assertEqual(defer_qs.count(), 1)\n419.         cache.set(\'deferred_queryset\', defer_qs)\n420.         self.assertEqual(expensive_calculation.num_runs, 1)\n421.         runs_before_cache_read = expensive_calculation.num_runs\n422.         cache.get(\'deferred_queryset\')\n423.         # We only want the default expensive calculation run on creation and set\n424.         self.assertEqual(expensive_calculation.num_runs, runs_before_cache_read)\n425. \n426.     def test_expiration(self):\n427.         # Cache values can be set to expire\n428.         cache.set(\'expire1\', \'very quickly\', 1)\n429.         cache.set(\'expire2\', \'very quickly\', 1)\n430.         cache.set(\'expire3\', \'very quickly\', 1)\n431. \n432.         time.sleep(2)\n433.         self.assertIsNone(cache.get("expire1"))\n434. \n435.         self.assertIs(cache.add("expire2", "newvalue"), True)\n436.         self.assertEqual(cache.get("expire2"), "newvalue")\n437.         self.assertIs(cache.has_key("expire3"), False)\n438. \n439.     def test_touch(self):\n440.         # cache.touch() updates the timeout.\n441.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n442.         self.assertIs(cache.touch(\'expire1\', timeout=4), True)\n443.         time.sleep(2)\n444.         self.assertIs(cache.has_key(\'expire1\'), True)\n445.         time.sleep(3)\n446.         self.assertIs(cache.has_key(\'expire1\'), False)\n447.         # cache.touch() works without the timeout argument.\n448.         cache.set(\'expire1\', \'very quickly\', timeout=1)\n449.         self.assertIs(cache.touch(\'expire1\'), True)\n450.         time.sleep(2)\n451.         self.assertIs(cache.has_key(\'expire1\'), True)\n452. \n453.         self.assertIs(cache.touch(\'nonexistent\'), False)\n454. \n455.     def test_unicode(self):\n456.         # Unicode values can be cached\n457.         stuff = {\n458.             \'ascii\': \'ascii_value\',\n459.             \'unicode_ascii\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n1\',\n460.             \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n\': \'IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n2\',\n461.             \'ascii2\': {\'x\': 1}\n462.         }\n463.         # Test `set`\n464.         for (key, value) in stuff.items():\n465.             with self.subTest(key=key):\n466.                 cache.set(key, value)\n467.                 self.assertEqual(cache.get(key), value)\n468. \n469.         # Test `add`\n470.         for (key, value) in stuff.items():\n471.             with self.subTest(key=key):\n472.                 self.assertIs(cache.delete(key), True)\n473.                 self.assertIs(cache.add(key, value), True)\n474.                 self.assertEqual(cache.get(key), value)\n475. \n476.         # Test `set_many`\n477.         for (key, value) in stuff.items():\n478.             self.assertIs(cache.delete(key), True)\n479.         cache.set_many(stuff)\n480.         for (key, value) in stuff.items():\n481.             with self.subTest(key=key):\n482.                 self.assertEqual(cache.get(key), value)\n483. \n484.     def test_binary_string(self):\n485.         # Binary strings should be cacheable\n486.         from zlib import compress, decompress\n487.         value = \'value_to_be_compressed\'\n488.         compressed_value = compress(value.encode())\n489. \n490.         # Test set\n491.         cache.set(\'binary1\', compressed_value)\n492.         compressed_result = cache.get(\'binary1\')\n493.         self.assertEqual(compressed_value, compressed_result)\n494.         self.assertEqual(value, decompress(compressed_result).decode())\n495. \n496.         # Test add\n497.         self.assertIs(cache.add(\'binary1-add\', compressed_value), True)\n498.         compressed_result = cache.get(\'binary1-add\')\n499.         self.assertEqual(compressed_value, compressed_result)\n500.         self.assertEqual(value, decompress(compressed_result).decode())\n501. \n502.         # Test set_many\n503.         cache.set_many({\'binary1-set_many\': compressed_value})\n504.         compressed_result = cache.get(\'binary1-set_many\')\n505.         self.assertEqual(compressed_value, compressed_result)\n506.         self.assertEqual(value, decompress(compressed_result).decode())\n507. \n508.     def test_set_many(self):\n509.         # Multiple keys can be set using set_many\n510.         cache.set_many({"key1": "spam", "key2": "eggs"})\n511.         self.assertEqual(cache.get("key1"), "spam")\n512.         self.assertEqual(cache.get("key2"), "eggs")\n513. \n514.     def test_set_many_returns_empty_list_on_success(self):\n515.         """set_many() returns an empty list when all keys are inserted."""\n516.         failing_keys = cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n517.         self.assertEqual(failing_keys, [])\n518. \n519.     def test_set_many_expiration(self):\n520.         # set_many takes a second ``timeout`` parameter\n521.         cache.set_many({"key1": "spam", "key2": "eggs"}, 1)\n522.         time.sleep(2)\n523.         self.assertIsNone(cache.get("key1"))\n524.         self.assertIsNone(cache.get("key2"))\n525. \n526.     def test_delete_many(self):\n527.         # Multiple keys can be deleted using delete_many\n528.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\', \'key3\': \'ham\'})\n529.         cache.delete_many(["key1", "key2"])\n530.         self.assertIsNone(cache.get("key1"))\n531.         self.assertIsNone(cache.get("key2"))\n532.         self.assertEqual(cache.get("key3"), "ham")\n533. \n534.     def test_clear(self):\n535.         # The cache can be emptied using clear\n536.         cache.set_many({\'key1\': \'spam\', \'key2\': \'eggs\'})\n537.         cache.clear()\n538.         self.assertIsNone(cache.get("key1"))\n539.         self.assertIsNone(cache.get("key2"))\n540. \n541.     def test_long_timeout(self):\n542.         """\n543.         Follow memcached\'s convention where a timeout greater than 30 days is\n544.         treated as an absolute expiration timestamp instead of a relative\n545.         offset (#12399).\n546.         """\n547.         cache.set(\'key1\', \'eggs\', 60 * 60 * 24 * 30 + 1)  # 30 days + 1 second\n548.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n549. \n550.         self.assertIs(cache.add(\'key2\', \'ham\', 60 * 60 * 24 * 30 + 1), True)\n551.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n552. \n553.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 60 * 60 * 24 * 30 + 1)\n554.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n555.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n556. \n557.     def test_forever_timeout(self):\n558.         """\n559.         Passing in None into timeout results in a value that is cached forever\n560.         """\n561.         cache.set(\'key1\', \'eggs\', None)\n562.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n563. \n564.         self.assertIs(cache.add(\'key2\', \'ham\', None), True)\n565.         self.assertEqual(cache.get(\'key2\'), \'ham\')\n566.         self.assertIs(cache.add(\'key1\', \'new eggs\', None), False)\n567.         self.assertEqual(cache.get(\'key1\'), \'eggs\')\n568. \n569.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, None)\n570.         self.assertEqual(cache.get(\'key3\'), \'sausage\')\n571.         self.assertEqual(cache.get(\'key4\'), \'lobster bisque\')\n572. \n573.         cache.set(\'key5\', \'belgian fries\', timeout=1)\n574.         self.assertIs(cache.touch(\'key5\', timeout=None), True)\n575.         time.sleep(2)\n576.         self.assertEqual(cache.get(\'key5\'), \'belgian fries\')\n577. \n578.     def test_zero_timeout(self):\n579.         """\n580.         Passing in zero into timeout results in a value that is not cached\n581.         """\n582.         cache.set(\'key1\', \'eggs\', 0)\n583.         self.assertIsNone(cache.get(\'key1\'))\n584. \n585.         self.assertIs(cache.add(\'key2\', \'ham\', 0), True)\n586.         self.assertIsNone(cache.get(\'key2\'))\n587. \n588.         cache.set_many({\'key3\': \'sausage\', \'key4\': \'lobster bisque\'}, 0)\n589.         self.assertIsNone(cache.get(\'key3\'))\n590.         self.assertIsNone(cache.get(\'key4\'))\n591. \n592.         cache.set(\'key5\', \'belgian fries\', timeout=5)\n593.         self.assertIs(cache.touch(\'key5\', timeout=0), True)\n594.         self.assertIsNone(cache.get(\'key5\'))\n595. \n596.     def test_float_timeout(self):\n597.         # Make sure a timeout given as a float doesn\'t crash anything.\n598.         cache.set("key1", "spam", 100.2)\n599.         self.assertEqual(cache.get("key1"), "spam")\n600. \n601.     def _perform_cull_test(self, cull_cache_name, initial_count, final_count):\n602.         try:\n603.             cull_cache = caches[cull_cache_name]\n604.         except InvalidCacheBackendError:\n605.             self.skipTest("Culling isn\'t implemented.")\n606. \n607.         # Create initial cache key entries. This will overflow the cache,\n608.         # causing a cull.\n609.         for i in range(1, initial_count):\n610.             cull_cache.set(\'cull%d\' % i, \'value\', 1000)\n611.         count = 0\n612.         # Count how many keys are left in the cache.\n613.         for i in range(1, initial_count):\n614.             if cull_cache.has_key(\'cull%d\' % i):\n615.                 count += 1\n616.         self.assertEqual(count, final_count)\n617. \n618.     def test_cull(self):\n619.         self._perform_cull_test(\'cull\', 50, 29)\n620. \n621.     def test_zero_cull(self):\n622.         self._perform_cull_test(\'zero_cull\', 50, 19)\n623. \n624.     def _perform_invalid_key_test(self, key, expected_warning):\n625.         """\n626.         All the builtin backends should warn (except memcached that should\n627.         error) on keys that would be refused by memcached. This encourages\n628.         portable caching code without making it too difficult to use production\n629.         backends with more liberal key rules. Refs #6447.\n630.         """\n631.         # mimic custom ``make_key`` method being defined since the default will\n632.         # never show the below warnings\n633.         def func(key, *args):\n634.             return key\n635. \n636.         old_func = cache.key_func\n637.         cache.key_func = func\n638. \n639.         try:\n640.             with self.assertWarns(CacheKeyWarning) as cm:\n641.                 cache.set(key, \'value\')\n642.             self.assertEqual(str(cm.warning), expected_warning)\n643.         finally:\n644.             cache.key_func = old_func\n645. \n646.     def test_invalid_key_characters(self):\n647.         # memcached doesn\'t allow whitespace or control characters in keys.\n648.         key = \'key with spaces and æ¸…\'\n649.         self._perform_invalid_key_test(key, KEY_ERRORS_WITH_MEMCACHED_MSG % key)\n650. \n651.     def test_invalid_key_length(self):\n652.         # memcached limits key length to 250.\n653.         key = (\'a\' * 250) + \'æ¸…\'\n654.         expected_warning = (\n655.             \'Cache key will cause errors if used with memcached: \'\n656.             \'%r (longer than %s)\' % (key, 250)\n657.         )\n658.         self._perform_invalid_key_test(key, expected_warning)\n659. \n660.     def test_cache_versioning_get_set(self):\n661.         # set, using default version = 1\n662.         cache.set(\'answer1\', 42)\n663.         self.assertEqual(cache.get(\'answer1\'), 42)\n664.         self.assertEqual(cache.get(\'answer1\', version=1), 42)\n665.         self.assertIsNone(cache.get(\'answer1\', version=2))\n666. \n667.         self.assertIsNone(caches[\'v2\'].get(\'answer1\'))\n668.         self.assertEqual(caches[\'v2\'].get(\'answer1\', version=1), 42)\n669.         self.assertIsNone(caches[\'v2\'].get(\'answer1\', version=2))\n670. \n671.         # set, default version = 1, but manually override version = 2\n672.         cache.set(\'answer2\', 42, version=2)\n673.         self.assertIsNone(cache.get(\'answer2\'))\n674.         self.assertIsNone(cache.get(\'answer2\', version=1))\n675.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n676. \n677.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n678.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n679.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n680. \n681.         # v2 set, using default version = 2\n682.         caches[\'v2\'].set(\'answer3\', 42)\n683.         self.assertIsNone(cache.get(\'answer3\'))\n684.         self.assertIsNone(cache.get(\'answer3\', version=1))\n685.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n686. \n687.         self.assertEqual(caches[\'v2\'].get(\'answer3\'), 42)\n688.         self.assertIsNone(caches[\'v2\'].get(\'answer3\', version=1))\n689.         self.assertEqual(caches[\'v2\'].get(\'answer3\', version=2), 42)\n690. \n691.         # v2 set, default version = 2, but manually override version = 1\n692.         caches[\'v2\'].set(\'answer4\', 42, version=1)\n693.         self.assertEqual(cache.get(\'answer4\'), 42)\n694.         self.assertEqual(cache.get(\'answer4\', version=1), 42)\n695.         self.assertIsNone(cache.get(\'answer4\', version=2))\n696. \n697.         self.assertIsNone(caches[\'v2\'].get(\'answer4\'))\n698.         self.assertEqual(caches[\'v2\'].get(\'answer4\', version=1), 42)\n699.         self.assertIsNone(caches[\'v2\'].get(\'answer4\', version=2))\n700. \n701.     def test_cache_versioning_add(self):\n702. \n703.         # add, default version = 1, but manually override version = 2\n704.         self.assertIs(cache.add(\'answer1\', 42, version=2), True)\n705.         self.assertIsNone(cache.get(\'answer1\', version=1))\n706.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n707. \n708.         self.assertIs(cache.add(\'answer1\', 37, version=2), False)\n709.         self.assertIsNone(cache.get(\'answer1\', version=1))\n710.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n711. \n712.         self.assertIs(cache.add(\'answer1\', 37, version=1), True)\n713.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n714.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n715. \n716.         # v2 add, using default version = 2\n717.         self.assertIs(caches[\'v2\'].add(\'answer2\', 42), True)\n718.         self.assertIsNone(cache.get(\'answer2\', version=1))\n719.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n720. \n721.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37), False)\n722.         self.assertIsNone(cache.get(\'answer2\', version=1))\n723.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n724. \n725.         self.assertIs(caches[\'v2\'].add(\'answer2\', 37, version=1), True)\n726.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n727.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n728. \n729.         # v2 add, default version = 2, but manually override version = 1\n730.         self.assertIs(caches[\'v2\'].add(\'answer3\', 42, version=1), True)\n731.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n732.         self.assertIsNone(cache.get(\'answer3\', version=2))\n733. \n734.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37, version=1), False)\n735.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n736.         self.assertIsNone(cache.get(\'answer3\', version=2))\n737. \n738.         self.assertIs(caches[\'v2\'].add(\'answer3\', 37), True)\n739.         self.assertEqual(cache.get(\'answer3\', version=1), 42)\n740.         self.assertEqual(cache.get(\'answer3\', version=2), 37)\n741. \n742.     def test_cache_versioning_has_key(self):\n743.         cache.set(\'answer1\', 42)\n744. \n745.         # has_key\n746.         self.assertIs(cache.has_key(\'answer1\'), True)\n747.         self.assertIs(cache.has_key(\'answer1\', version=1), True)\n748.         self.assertIs(cache.has_key(\'answer1\', version=2), False)\n749. \n750.         self.assertIs(caches[\'v2\'].has_key(\'answer1\'), False)\n751.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=1), True)\n752.         self.assertIs(caches[\'v2\'].has_key(\'answer1\', version=2), False)\n753. \n754.     def test_cache_versioning_delete(self):\n755.         cache.set(\'answer1\', 37, version=1)\n756.         cache.set(\'answer1\', 42, version=2)\n757.         self.assertIs(cache.delete(\'answer1\'), True)\n758.         self.assertIsNone(cache.get(\'answer1\', version=1))\n759.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n760. \n761.         cache.set(\'answer2\', 37, version=1)\n762.         cache.set(\'answer2\', 42, version=2)\n763.         self.assertIs(cache.delete(\'answer2\', version=2), True)\n764.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n765.         self.assertIsNone(cache.get(\'answer2\', version=2))\n766. \n767.         cache.set(\'answer3\', 37, version=1)\n768.         cache.set(\'answer3\', 42, version=2)\n769.         self.assertIs(caches[\'v2\'].delete(\'answer3\'), True)\n770.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n771.         self.assertIsNone(cache.get(\'answer3\', version=2))\n772. \n773.         cache.set(\'answer4\', 37, version=1)\n774.         cache.set(\'answer4\', 42, version=2)\n775.         self.assertIs(caches[\'v2\'].delete(\'answer4\', version=1), True)\n776.         self.assertIsNone(cache.get(\'answer4\', version=1))\n777.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n778. \n779.     def test_cache_versioning_incr_decr(self):\n780.         cache.set(\'answer1\', 37, version=1)\n781.         cache.set(\'answer1\', 42, version=2)\n782.         self.assertEqual(cache.incr(\'answer1\'), 38)\n783.         self.assertEqual(cache.get(\'answer1\', version=1), 38)\n784.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n785.         self.assertEqual(cache.decr(\'answer1\'), 37)\n786.         self.assertEqual(cache.get(\'answer1\', version=1), 37)\n787.         self.assertEqual(cache.get(\'answer1\', version=2), 42)\n788. \n789.         cache.set(\'answer2\', 37, version=1)\n790.         cache.set(\'answer2\', 42, version=2)\n791.         self.assertEqual(cache.incr(\'answer2\', version=2), 43)\n792.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n793.         self.assertEqual(cache.get(\'answer2\', version=2), 43)\n794.         self.assertEqual(cache.decr(\'answer2\', version=2), 42)\n795.         self.assertEqual(cache.get(\'answer2\', version=1), 37)\n796.         self.assertEqual(cache.get(\'answer2\', version=2), 42)\n797. \n798.         cache.set(\'answer3\', 37, version=1)\n799.         cache.set(\'answer3\', 42, version=2)\n800.         self.assertEqual(caches[\'v2\'].incr(\'answer3\'), 43)\n801.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n802.         self.assertEqual(cache.get(\'answer3\', version=2), 43)\n803.         self.assertEqual(caches[\'v2\'].decr(\'answer3\'), 42)\n804.         self.assertEqual(cache.get(\'answer3\', version=1), 37)\n805.         self.assertEqual(cache.get(\'answer3\', version=2), 42)\n806. \n807.         cache.set(\'answer4\', 37, version=1)\n808.         cache.set(\'answer4\', 42, version=2)\n809.         self.assertEqual(caches[\'v2\'].incr(\'answer4\', version=1), 38)\n810.         self.assertEqual(cache.get(\'answer4\', version=1), 38)\n811.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n812.         self.assertEqual(caches[\'v2\'].decr(\'answer4\', version=1), 37)\n813.         self.assertEqual(cache.get(\'answer4\', version=1), 37)\n814.         self.assertEqual(cache.get(\'answer4\', version=2), 42)\n815. \n816.     def test_cache_versioning_get_set_many(self):\n817.         # set, using default version = 1\n818.         cache.set_many({\'ford1\': 37, \'arthur1\': 42})\n819.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\']), {\'ford1\': 37, \'arthur1\': 42})\n820.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n821.         self.assertEqual(cache.get_many([\'ford1\', \'arthur1\'], version=2), {})\n822. \n823.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\']), {})\n824.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=1), {\'ford1\': 37, \'arthur1\': 42})\n825.         self.assertEqual(caches[\'v2\'].get_many([\'ford1\', \'arthur1\'], version=2), {})\n826. \n827.         # set, default version = 1, but manually override version = 2\n828.         cache.set_many({\'ford2\': 37, \'arthur2\': 42}, version=2)\n829.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\']), {})\n830.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=1), {})\n831.         self.assertEqual(cache.get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n832. \n833.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\']), {\'ford2\': 37, \'arthur2\': 42})\n834.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=1), {})\n835.         self.assertEqual(caches[\'v2\'].get_many([\'ford2\', \'arthur2\'], version=2), {\'ford2\': 37, \'arthur2\': 42})\n836. \n837.         # v2 set, using default version = 2\n838.         caches[\'v2\'].set_many({\'ford3\': 37, \'arthur3\': 42})\n839.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\']), {})\n840.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=1), {})\n841.         self.assertEqual(cache.get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n842. \n843.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\']), {\'ford3\': 37, \'arthur3\': 42})\n844.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=1), {})\n845.         self.assertEqual(caches[\'v2\'].get_many([\'ford3\', \'arthur3\'], version=2), {\'ford3\': 37, \'arthur3\': 42})\n846. \n847.         # v2 set, default version = 2, but manually override version = 1\n848.         caches[\'v2\'].set_many({\'ford4\': 37, \'arthur4\': 42}, version=1)\n849.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\']), {\'ford4\': 37, \'arthur4\': 42})\n850.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n851.         self.assertEqual(cache.get_many([\'ford4\', \'arthur4\'], version=2), {})\n852. \n853.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\']), {})\n854.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=1), {\'ford4\': 37, \'arthur4\': 42})\n855.         self.assertEqual(caches[\'v2\'].get_many([\'ford4\', \'arthur4\'], version=2), {})\n856. \n857.     def test_incr_version(self):\n858.         cache.set(\'answer\', 42, version=2)\n859.         self.assertIsNone(cache.get(\'answer\'))\n860.         self.assertIsNone(cache.get(\'answer\', version=1))\n861.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n862.         self.assertIsNone(cache.get(\'answer\', version=3))\n863. \n864.         self.assertEqual(cache.incr_version(\'answer\', version=2), 3)\n865.         self.assertIsNone(cache.get(\'answer\'))\n866.         self.assertIsNone(cache.get(\'answer\', version=1))\n867.         self.assertIsNone(cache.get(\'answer\', version=2))\n868.         self.assertEqual(cache.get(\'answer\', version=3), 42)\n869. \n870.         caches[\'v2\'].set(\'answer2\', 42)\n871.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n872.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n873.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n874.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=3))\n875. \n876.         self.assertEqual(caches[\'v2\'].incr_version(\'answer2\'), 3)\n877.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n878.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n879.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n880.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=3), 42)\n881. \n882.         with self.assertRaises(ValueError):\n883.             cache.incr_version(\'does_not_exist\')\n884. \n885.     def test_decr_version(self):\n886.         cache.set(\'answer\', 42, version=2)\n887.         self.assertIsNone(cache.get(\'answer\'))\n888.         self.assertIsNone(cache.get(\'answer\', version=1))\n889.         self.assertEqual(cache.get(\'answer\', version=2), 42)\n890. \n891.         self.assertEqual(cache.decr_version(\'answer\', version=2), 1)\n892.         self.assertEqual(cache.get(\'answer\'), 42)\n893.         self.assertEqual(cache.get(\'answer\', version=1), 42)\n894.         self.assertIsNone(cache.get(\'answer\', version=2))\n895. \n896.         caches[\'v2\'].set(\'answer2\', 42)\n897.         self.assertEqual(caches[\'v2\'].get(\'answer2\'), 42)\n898.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=1))\n899.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=2), 42)\n900. \n901.         self.assertEqual(caches[\'v2\'].decr_version(\'answer2\'), 1)\n902.         self.assertIsNone(caches[\'v2\'].get(\'answer2\'))\n903.         self.assertEqual(caches[\'v2\'].get(\'answer2\', version=1), 42)\n904.         self.assertIsNone(caches[\'v2\'].get(\'answer2\', version=2))\n905. \n906.         with self.assertRaises(ValueError):\n907.             cache.decr_version(\'does_not_exist\', version=2)\n908. \n909.     def test_custom_key_func(self):\n910.         # Two caches with different key functions aren\'t visible to each other\n911.         cache.set(\'answer1\', 42)\n912.         self.assertEqual(cache.get(\'answer1\'), 42)\n913.         self.assertIsNone(caches[\'custom_key\'].get(\'answer1\'))\n914.         self.assertIsNone(caches[\'custom_key2\'].get(\'answer1\'))\n915. \n916.         caches[\'custom_key\'].set(\'answer2\', 42)\n917.         self.assertIsNone(cache.get(\'answer2\'))\n918.         self.assertEqual(caches[\'custom_key\'].get(\'answer2\'), 42)\n919.         self.assertEqual(caches[\'custom_key2\'].get(\'answer2\'), 42)\n920. \n921.     def test_cache_write_unpicklable_object(self):\n922.         fetch_middleware = FetchFromCacheMiddleware(empty_response)\n923.         fetch_middleware.cache = cache\n924. \n925.         request = self.factory.get(\'/cache/test\')\n926.         request._cache_update_cache = True\n927.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n928.         self.assertIsNone(get_cache_data)\n929. \n930.         content = \'Testing cookie serialization.\'\n931. \n932.         def get_response(req):\n933.             response = HttpResponse(content)\n934.             response.set_cookie(\'foo\', \'bar\')\n935.             return response\n936. \n937.         update_middleware = UpdateCacheMiddleware(get_response)\n938.         update_middleware.cache = cache\n939.         response = update_middleware(request)\n940. \n941.         get_cache_data = fetch_middleware.process_request(request)\n942.         self.assertIsNotNone(get_cache_data)\n943.         self.assertEqual(get_cache_data.content, content.encode())\n944.         self.assertEqual(get_cache_data.cookies, response.cookies)\n945. \n946.         UpdateCacheMiddleware(lambda req: get_cache_data)(request)\n947.         get_cache_data = fetch_middleware.process_request(request)\n948.         self.assertIsNotNone(get_cache_data)\n949.         self.assertEqual(get_cache_data.content, content.encode())\n950.         self.assertEqual(get_cache_data.cookies, response.cookies)\n951. \n952.     def test_add_fail_on_pickleerror(self):\n953.         # Shouldn\'t fail silently if trying to cache an unpicklable type.\n954.         with self.assertRaises(pickle.PickleError):\n955.             cache.add(\'unpicklable\', Unpicklable())\n956. \n957.     def test_set_fail_on_pickleerror(self):\n958.         with self.assertRaises(pickle.PickleError):\n959.             cache.set(\'unpicklable\', Unpicklable())\n960. \n961.     def test_get_or_set(self):\n962.         self.assertIsNone(cache.get(\'projector\'))\n963.         self.assertEqual(cache.get_or_set(\'projector\', 42), 42)\n964.         self.assertEqual(cache.get(\'projector\'), 42)\n965.         self.assertIsNone(cache.get_or_set(\'null\', None))\n966. \n967.     def test_get_or_set_callable(self):\n968.         def my_callable():\n969.             return \'value\'\n970. \n971.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable), \'value\')\n972.         self.assertEqual(cache.get_or_set(\'mykey\', my_callable()), \'value\')\n973. \n974.     def test_get_or_set_callable_returning_none(self):\n975.         self.assertIsNone(cache.get_or_set(\'mykey\', lambda: None))\n976.         # Previous get_or_set() doesn\'t store None in the cache.\n977.         self.assertEqual(cache.get(\'mykey\', \'default\'), \'default\')\n978. \n979.     def test_get_or_set_version(self):\n980.         msg = "get_or_set() missing 1 required positional argument: \'default\'"\n981.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n982.         with self.assertRaisesMessage(TypeError, msg):\n983.             cache.get_or_set(\'brian\')\n984.         with self.assertRaisesMessage(TypeError, msg):\n985.             cache.get_or_set(\'brian\', version=1)\n986.         self.assertIsNone(cache.get(\'brian\', version=1))\n987.         self.assertEqual(cache.get_or_set(\'brian\', 42, version=1), 42)\n988.         self.assertEqual(cache.get_or_set(\'brian\', 1979, version=2), 1979)\n989.         self.assertIsNone(cache.get(\'brian\', version=3))\n990. \n991.     def test_get_or_set_racing(self):\n992.         with mock.patch(\'%s.%s\' % (settings.CACHES[\'default\'][\'BACKEND\'], \'add\')) as cache_add:\n993.             # Simulate cache.add() failing to add a value. In that case, the\n994.             # default value should be returned.\n995.             cache_add.return_value = False\n996.             self.assertEqual(cache.get_or_set(\'key\', \'default\'), \'default\')\n997. \n998. \n999. @override_settings(CACHES=caches_setting_for_tests(\n1000.     BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1001.     # Spaces are used in the table name to ensure quoting/escaping is working\n1002.     LOCATION=\'test cache table\'\n1003. ))\n1004. class DBCacheTests(BaseCacheTests, TransactionTestCase):\n1005. \n1006.     available_apps = [\'cache\']\n1007. \n1008.     def setUp(self):\n1009.         # The super calls needs to happen first for the settings override.\n1010.         super().setUp()\n1011.         self.create_table()\n1012. \n1013.     def tearDown(self):\n1014.         # The super call needs to happen first because it uses the database.\n1015.         super().tearDown()\n1016.         self.drop_table()\n1017. \n1018.     def create_table(self):\n1019.         management.call_command(\'createcachetable\', verbosity=0)\n1020. \n1021.     def drop_table(self):\n1022.         with connection.cursor() as cursor:\n1023.             table_name = connection.ops.quote_name(\'test cache table\')\n1024.             cursor.execute(\'DROP TABLE %s\' % table_name)\n1025. \n1026.     def test_get_many_num_queries(self):\n1027.         cache.set_many({\'a\': 1, \'b\': 2})\n1028.         cache.set(\'expired\', \'expired\', 0.01)\n1029.         with self.assertNumQueries(1):\n1030.             self.assertEqual(cache.get_many([\'a\', \'b\']), {\'a\': 1, \'b\': 2})\n1031.         time.sleep(0.02)\n1032.         with self.assertNumQueries(2):\n1033.             self.assertEqual(cache.get_many([\'a\', \'b\', \'expired\']), {\'a\': 1, \'b\': 2})\n1034. \n1035.     def test_delete_many_num_queries(self):\n1036.         cache.set_many({\'a\': 1, \'b\': 2, \'c\': 3})\n1037.         with self.assertNumQueries(1):\n1038.             cache.delete_many([\'a\', \'b\', \'c\'])\n1039. \n1040.     def test_zero_cull(self):\n1041.         self._perform_cull_test(\'zero_cull\', 50, 18)\n1042. \n1043.     def test_second_call_doesnt_crash(self):\n1044.         out = io.StringIO()\n1045.         management.call_command(\'createcachetable\', stdout=out)\n1046.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' already exists.\\n" * len(settings.CACHES))\n1047. \n1048.     @override_settings(CACHES=caches_setting_for_tests(\n1049.         BACKEND=\'django.core.cache.backends.db.DatabaseCache\',\n1050.         # Use another table name to avoid the \'table already exists\' message.\n1051.         LOCATION=\'createcachetable_dry_run_mode\'\n1052.     ))\n1053.     def test_createcachetable_dry_run_mode(self):\n1054.         out = io.StringIO()\n1055.         management.call_command(\'createcachetable\', dry_run=True, stdout=out)\n1056.         output = out.getvalue()\n1057.         self.assertTrue(output.startswith("CREATE TABLE"))\n1058. \n1059.     def test_createcachetable_with_table_argument(self):\n1060.         """\n1061.         Delete and recreate cache table with legacy behavior (explicitly\n1062.         specifying the table name).\n1063.         """\n1064.         self.drop_table()\n1065.         out = io.StringIO()\n1066.         management.call_command(\n1067.             \'createcachetable\',\n1068.             \'test cache table\',\n1069.             verbosity=2,\n1070.             stdout=out,\n1071.         )\n1072.         self.assertEqual(out.getvalue(), "Cache table \'test cache table\' created.\\n")\n1073. \n1074. \n1075. @override_settings(USE_TZ=True)\n1076. class DBCacheWithTimeZoneTests(DBCacheTests):\n1077.     pass\n1078. \n1079. \n1080. class DBCacheRouter:\n1081.     """A router that puts the cache table on the \'other\' database."""\n1082. \n1083.     def db_for_read(self, model, **hints):\n1084.         if model._meta.app_label == \'django_cache\':\n1085.             return \'other\'\n1086.         return None\n1087. \n1088.     def db_for_write(self, model, **hints):\n1089.         if model._meta.app_label == \'django_cache\':\n1090.             return \'other\'\n1091.         return None\n1092. \n1093.     def allow_migrate(self, db, app_label, **hints):\n1094.         if app_label == \'django_cache\':\n1095.             return db == \'other\'\n1096.         return None\n1097. \n1098. \n1099. @override_settings(\n1100.     CACHES={\n1101.         \'default\': {\n1102.             \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n1103.             \'LOCATION\': \'my_cache_table\',\n1104.         },\n1105.     },\n1106. )\n1107. class CreateCacheTableForDBCacheTests(TestCase):\n1108.     databases = {\'default\', \'other\'}\n1109. \n1110.     @override_settings(DATABASE_ROUTERS=[DBCacheRouter()])\n1111.     def test_createcachetable_observes_database_router(self):\n1112.         # cache table should not be created on \'default\'\n1113.         with self.assertNumQueries(0, using=\'default\'):\n1114.             management.call_command(\'createcachetable\', database=\'default\', verbosity=0)\n1115.         # cache table should be created on \'other\'\n1116.         # Queries:\n1117.         #   1: check table doesn\'t already exist\n1118.         #   2: create savepoint (if transactional DDL is supported)\n1119.         #   3: create the table\n1120.         #   4: create the index\n1121.         #   5: release savepoint (if transactional DDL is supported)\n1122.         num = 5 if connections[\'other\'].features.can_rollback_ddl else 3\n1123.         with self.assertNumQueries(num, using=\'other\'):\n1124.             management.call_command(\'createcachetable\', database=\'other\', verbosity=0)\n1125. \n1126. \n1127. class PicklingSideEffect:\n1128. \n1129.     def __init__(self, cache):\n1130.         self.cache = cache\n1131.         self.locked = False\n1132. \n1133.     def __getstate__(self):\n1134.         self.locked = self.cache._lock.locked()\n1135.         return {}\n1136. \n1137. \n1138. limit_locmem_entries = override_settings(CACHES=caches_setting_for_tests(\n1139.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1140.     OPTIONS={\'MAX_ENTRIES\': 9},\n1141. ))\n1142. \n1143. \n1144. @override_settings(CACHES=caches_setting_for_tests(\n1145.     BACKEND=\'django.core.cache.backends.locmem.LocMemCache\',\n1146. ))\n1147. class LocMemCacheTests(BaseCacheTests, TestCase):\n1148. \n1149.     def setUp(self):\n1150.         super().setUp()\n1151. \n1152.         # LocMem requires a hack to make the other caches\n1153.         # share a data store with the \'normal\' cache.\n1154.         caches[\'prefix\']._cache = cache._cache\n1155.         caches[\'prefix\']._expire_info = cache._expire_info\n1156. \n1157.         caches[\'v2\']._cache = cache._cache\n1158.         caches[\'v2\']._expire_info = cache._expire_info\n1159. \n1160.         caches[\'custom_key\']._cache = cache._cache\n1161.         caches[\'custom_key\']._expire_info = cache._expire_info\n1162. \n1163.         caches[\'custom_key2\']._cache = cache._cache\n1164.         caches[\'custom_key2\']._expire_info = cache._expire_info\n1165. \n1166.     @override_settings(CACHES={\n1167.         \'default\': {\'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\'},\n1168.         \'other\': {\n1169.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1170.             \'LOCATION\': \'other\'\n1171.         },\n1172.     })\n1173.     def test_multiple_caches(self):\n1174.         "Multiple locmem caches are isolated"\n1175.         cache.set(\'value\', 42)\n1176.         self.assertEqual(caches[\'default\'].get(\'value\'), 42)\n1177.         self.assertIsNone(caches[\'other\'].get(\'value\'))\n1178. \n1179.     def test_locking_on_pickle(self):\n1180.         """#20613/#18541 -- Ensures pickling is done outside of the lock."""\n1181.         bad_obj = PicklingSideEffect(cache)\n1182.         cache.set(\'set\', bad_obj)\n1183.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1184. \n1185.         self.assertIs(cache.add(\'add\', bad_obj), True)\n1186.         self.assertFalse(bad_obj.locked, "Cache was locked during pickling")\n1187. \n1188.     def test_incr_decr_timeout(self):\n1189.         """incr/decr does not modify expiry time (matches memcached behavior)"""\n1190.         key = \'value\'\n1191.         _key = cache.make_key(key)\n1192.         cache.set(key, 1, timeout=cache.default_timeout * 10)\n1193.         expire = cache._expire_info[_key]\n1194.         self.assertEqual(cache.incr(key), 2)\n1195.         self.assertEqual(expire, cache._expire_info[_key])\n1196.         self.assertEqual(cache.decr(key), 1)\n1197.         self.assertEqual(expire, cache._expire_info[_key])\n1198. \n1199.     @limit_locmem_entries\n1200.     def test_lru_get(self):\n1201.         """get() moves cache keys."""\n1202.         for key in range(9):\n1203.             cache.set(key, key, timeout=None)\n1204.         for key in range(6):\n1205.             self.assertEqual(cache.get(key), key)\n1206.         cache.set(9, 9, timeout=None)\n1207.         for key in range(6):\n1208.             self.assertEqual(cache.get(key), key)\n1209.         for key in range(6, 9):\n1210.             self.assertIsNone(cache.get(key))\n1211.         self.assertEqual(cache.get(9), 9)\n1212. \n1213.     @limit_locmem_entries\n1214.     def test_lru_set(self):\n1215.         """set() moves cache keys."""\n1216.         for key in range(9):\n1217.             cache.set(key, key, timeout=None)\n1218.         for key in range(3, 9):\n1219.             cache.set(key, key, timeout=None)\n1220.         cache.set(9, 9, timeout=None)\n1221.         for key in range(3, 10):\n1222.             self.assertEqual(cache.get(key), key)\n1223.         for key in range(3):\n1224.             self.assertIsNone(cache.get(key))\n1225. \n1226.     @limit_locmem_entries\n1227.     def test_lru_incr(self):\n1228.         """incr() moves cache keys."""\n1229.         for key in range(9):\n1230.             cache.set(key, key, timeout=None)\n1231.         for key in range(6):\n1232.             self.assertEqual(cache.incr(key), key + 1)\n1233.         cache.set(9, 9, timeout=None)\n1234.         for key in range(6):\n1235.             self.assertEqual(cache.get(key), key + 1)\n1236.         for key in range(6, 9):\n1237.             self.assertIsNone(cache.get(key))\n1238.         self.assertEqual(cache.get(9), 9)\n1239. \n1240. \n1241. # memcached backend isn\'t guaranteed to be available.\n1242. # To check the memcached backend, the test settings file will\n1243. # need to contain at least one cache backend setting that points at\n1244. # your memcache server.\n1245. configured_caches = {}\n1246. for _cache_params in settings.CACHES.values():\n1247.     configured_caches[_cache_params[\'BACKEND\']] = _cache_params\n1248. \n1249. MemcachedCache_params = configured_caches.get(\'django.core.cache.backends.memcached.MemcachedCache\')\n1250. PyLibMCCache_params = configured_caches.get(\'django.core.cache.backends.memcached.PyLibMCCache\')\n1251. \n1252. # The memcached backends don\'t support cull-related options like `MAX_ENTRIES`.\n1253. memcached_excluded_caches = {\'cull\', \'zero_cull\'}\n1254. \n1255. \n1256. class BaseMemcachedTests(BaseCacheTests):\n1257. \n1258.     # By default it\'s assumed that the client doesn\'t clean up connections\n1259.     # properly, in which case the backend must do so after each request.\n1260.     should_disconnect_on_close = True\n1261. \n1262.     def test_location_multiple_servers(self):\n1263.         locations = [\n1264.             [\'server1.tld\', \'server2:11211\'],\n1265.             \'server1.tld;server2:11211\',\n1266.             \'server1.tld,server2:11211\',\n1267.         ]\n1268.         for location in locations:\n1269.             with self.subTest(location=location):\n1270.                 params = {\'BACKEND\': self.base_params[\'BACKEND\'], \'LOCATION\': location}\n1271.                 with self.settings(CACHES={\'default\': params}):\n1272.                     self.assertEqual(cache._servers, [\'server1.tld\', \'server2:11211\'])\n1273. \n1274.     def _perform_invalid_key_test(self, key, expected_warning):\n1275.         """\n1276.         While other backends merely warn, memcached should raise for an invalid\n1277.         key.\n1278.         """\n1279.         msg = expected_warning.replace(key, cache.make_key(key))\n1280.         with self.assertRaises(InvalidCacheKey) as cm:\n1281.             cache.set(key, \'value\')\n1282.         self.assertEqual(str(cm.exception), msg)\n1283. \n1284.     def test_default_never_expiring_timeout(self):\n1285.         # Regression test for #22845\n1286.         with self.settings(CACHES=caches_setting_for_tests(\n1287.                 base=self.base_params,\n1288.                 exclude=memcached_excluded_caches,\n1289.                 TIMEOUT=None)):\n1290.             cache.set(\'infinite_foo\', \'bar\')\n1291.             self.assertEqual(cache.get(\'infinite_foo\'), \'bar\')\n1292. \n1293.     def test_default_far_future_timeout(self):\n1294.         # Regression test for #22845\n1295.         with self.settings(CACHES=caches_setting_for_tests(\n1296.                 base=self.base_params,\n1297.                 exclude=memcached_excluded_caches,\n1298.                 # 60*60*24*365, 1 year\n1299.                 TIMEOUT=31536000)):\n1300.             cache.set(\'future_foo\', \'bar\')\n1301.             self.assertEqual(cache.get(\'future_foo\'), \'bar\')\n1302. \n1303.     def test_memcached_deletes_key_on_failed_set(self):\n1304.         # By default memcached allows objects up to 1MB. For the cache_db session\n1305.         # backend to always use the current session, memcached needs to delete\n1306.         # the old key if it fails to set.\n1307.         # pylibmc doesn\'t seem to have SERVER_MAX_VALUE_LENGTH as far as I can\n1308.         # tell from a quick check of its source code. This is falling back to\n1309.         # the default value exposed by python-memcached on my system.\n1310.         max_value_length = getattr(cache._lib, \'SERVER_MAX_VALUE_LENGTH\', 1048576)\n1311. \n1312.         cache.set(\'small_value\', \'a\')\n1313.         self.assertEqual(cache.get(\'small_value\'), \'a\')\n1314. \n1315.         large_value = \'a\' * (max_value_length + 1)\n1316.         try:\n1317.             cache.set(\'small_value\', large_value)\n1318.         except Exception:\n1319.             # Some clients (e.g. pylibmc) raise when the value is too large,\n1320.             # while others (e.g. python-memcached) intentionally return True\n1321.             # indicating success. This test is primarily checking that the key\n1322.             # was deleted, so the return/exception behavior for the set()\n1323.             # itself is not important.\n1324.             pass\n1325.         # small_value should be deleted, or set if configured to accept larger values\n1326.         value = cache.get(\'small_value\')\n1327.         self.assertTrue(value is None or value == large_value)\n1328. \n1329.     def test_close(self):\n1330.         # For clients that don\'t manage their connections properly, the\n1331.         # connection is closed when the request is complete.\n1332.         signals.request_finished.disconnect(close_old_connections)\n1333.         try:\n1334.             with mock.patch.object(cache._lib.Client, \'disconnect_all\', autospec=True) as mock_disconnect:\n1335.                 signals.request_finished.send(self.__class__)\n1336.                 self.assertIs(mock_disconnect.called, self.should_disconnect_on_close)\n1337.         finally:\n1338.             signals.request_finished.connect(close_old_connections)\n1339. \n1340.     def test_set_many_returns_failing_keys(self):\n1341.         def fail_set_multi(mapping, *args, **kwargs):\n1342.             return mapping.keys()\n1343.         with mock.patch(\'%s.Client.set_multi\' % self.client_library_name, side_effect=fail_set_multi):\n1344.             failing_keys = cache.set_many({\'key\': \'value\'})\n1345.             self.assertEqual(failing_keys, [\'key\'])\n1346. \n1347. \n1348. @unittest.skipUnless(MemcachedCache_params, "MemcachedCache backend not configured")\n1349. @override_settings(CACHES=caches_setting_for_tests(\n1350.     base=MemcachedCache_params,\n1351.     exclude=memcached_excluded_caches,\n1352. ))\n1353. class MemcachedCacheTests(BaseMemcachedTests, TestCase):\n1354.     base_params = MemcachedCache_params\n1355.     client_library_name = \'memcache\'\n1356. \n1357.     def test_memcached_uses_highest_pickle_version(self):\n1358.         # Regression test for #19810\n1359.         for cache_key in settings.CACHES:\n1360.             with self.subTest(cache_key=cache_key):\n1361.                 self.assertEqual(caches[cache_key]._cache.pickleProtocol, pickle.HIGHEST_PROTOCOL)\n1362. \n1363.     @override_settings(CACHES=caches_setting_for_tests(\n1364.         base=MemcachedCache_params,\n1365.         exclude=memcached_excluded_caches,\n1366.         OPTIONS={\'server_max_value_length\': 9999},\n1367.     ))\n1368.     def test_memcached_options(self):\n1369.         self.assertEqual(cache._cache.server_max_value_length, 9999)\n1370. \n1371.     def test_default_used_when_none_is_set(self):\n1372.         """\n1373.         python-memcached doesn\'t support default in get() so this test\n1374.         overrides the one in BaseCacheTests.\n1375.         """\n1376.         cache.set(\'key_default_none\', None)\n1377.         self.assertEqual(cache.get(\'key_default_none\', default=\'default\'), \'default\')\n1378. \n1379. \n1380. @unittest.skipUnless(PyLibMCCache_params, "PyLibMCCache backend not configured")\n1381. @override_settings(CACHES=caches_setting_for_tests(\n1382.     base=PyLibMCCache_params,\n1383.     exclude=memcached_excluded_caches,\n1384. ))\n1385. class PyLibMCCacheTests(BaseMemcachedTests, TestCase):\n1386.     base_params = PyLibMCCache_params\n1387.     client_library_name = \'pylibmc\'\n1388.     # libmemcached manages its own connections.\n1389.     should_disconnect_on_close = False\n1390. \n1391.     @override_settings(CACHES=caches_setting_for_tests(\n1392.         base=PyLibMCCache_params,\n1393.         exclude=memcached_excluded_caches,\n1394.         OPTIONS={\n1395.             \'binary\': True,\n1396.             \'behaviors\': {\'tcp_nodelay\': True},\n1397.         },\n1398.     ))\n1399.     def test_pylibmc_options(self):\n1400.         self.assertTrue(cache._cache.binary)\n1401.         self.assertEqual(cache._cache.behaviors[\'tcp_nodelay\'], int(True))\n1402. \n1403. \n1404. @override_settings(CACHES=caches_setting_for_tests(\n1405.     BACKEND=\'django.core.cache.backends.filebased.FileBasedCache\',\n1406. ))\n1407. class FileBasedCacheTests(BaseCacheTests, TestCase):\n1408.     """\n1409.     Specific test cases for the file-based cache.\n1410.     """\n1411. \n1412.     def setUp(self):\n1413.         super().setUp()\n1414.         self.dirname = self.mkdtemp()\n1415.         # Caches location cannot be modified through override_settings / modify_settings,\n1416.         # hence settings are manipulated directly here and the setting_changed signal\n1417.         # is triggered manually.\n1418.         for cache_params in settings.CACHES.values():\n1419.             cache_params[\'LOCATION\'] = self.dirname\n1420.         setting_changed.send(self.__class__, setting=\'CACHES\', enter=False)\n1421. \n1422.     def tearDown(self):\n1423.         super().tearDown()\n1424.         # Call parent first, as cache.clear() may recreate cache base directory\n1425.         shutil.rmtree(self.dirname)\n1426. \n1427.     def mkdtemp(self):\n1428.         return tempfile.mkdtemp()\n1429. \n1430.     def test_ignores_non_cache_files(self):\n1431.         fname = os.path.join(self.dirname, \'not-a-cache-file\')\n1432.         with open(fname, \'w\'):\n1433.             os.utime(fname, None)\n1434.         cache.clear()\n1435.         self.assertTrue(os.path.exists(fname),\n1436.                         \'Expected cache.clear to ignore non cache files\')\n1437.         os.remove(fname)\n1438. \n1439.     def test_clear_does_not_remove_cache_dir(self):\n1440.         cache.clear()\n1441.         self.assertTrue(os.path.exists(self.dirname),\n1442.                         \'Expected cache.clear to keep the cache dir\')\n1443. \n1444.     def test_creates_cache_dir_if_nonexistent(self):\n1445.         os.rmdir(self.dirname)\n1446.         cache.set(\'foo\', \'bar\')\n1447.         self.assertTrue(os.path.exists(self.dirname))\n1448. \n1449.     def test_get_ignores_enoent(self):\n1450.         cache.set(\'foo\', \'bar\')\n1451.         os.unlink(cache._key_to_file(\'foo\'))\n1452.         # Returns the default instead of erroring.\n1453.         self.assertEqual(cache.get(\'foo\', \'baz\'), \'baz\')\n1454. \n1455.     def test_get_does_not_ignore_non_filenotfound_exceptions(self):\n1456.         with mock.patch(\'builtins.open\', side_effect=OSError):\n1457.             with self.assertRaises(OSError):\n1458.                 cache.get(\'foo\')\n1459. \n1460.     def test_empty_cache_file_considered_expired(self):\n1461.         cache_file = cache._key_to_file(\'foo\')\n1462.         with open(cache_file, \'wb\') as fh:\n1463.             fh.write(b\'\')\n1464.         with open(cache_file, \'rb\') as fh:\n1465.             self.assertIs(cache._is_expired(fh), True)\n1466. \n1467. \n1468. class FileBasedCachePathLibTests(FileBasedCacheTests):\n1469.     def mkdtemp(self):\n1470.         tmp_dir = super().mkdtemp()\n1471.         return Path(tmp_dir)\n1472. \n1473. \n1474. @override_settings(CACHES={\n1475.     \'default\': {\n1476.         \'BACKEND\': \'cache.liberal_backend.CacheClass\',\n1477.     },\n1478. })\n1479. class CustomCacheKeyValidationTests(SimpleTestCase):\n1480.     """\n1481.     Tests for the ability to mixin a custom ``validate_key`` method to\n1482.     a custom cache backend that otherwise inherits from a builtin\n1483.     backend, and override the default key validation. Refs #6447.\n1484.     """\n1485.     def test_custom_key_validation(self):\n1486.         # this key is both longer than 250 characters, and has spaces\n1487.         key = \'some key with spaces\' * 15\n1488.         val = \'a value\'\n1489.         cache.set(key, val)\n1490.         self.assertEqual(cache.get(key), val)\n1491. \n1492. \n1493. @override_settings(\n1494.     CACHES={\n1495.         \'default\': {\n1496.             \'BACKEND\': \'cache.closeable_cache.CacheClass\',\n1497.         }\n1498.     }\n1499. )\n1500. class CacheClosingTests(SimpleTestCase):\n1501. \n1502.     def test_close(self):\n1503.         self.assertFalse(cache.closed)\n1504.         signals.request_finished.send(self.__class__)\n1505.         self.assertTrue(cache.closed)\n1506. \n1507. \n1508. DEFAULT_MEMORY_CACHES_SETTINGS = {\n1509.     \'default\': {\n1510.         \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1511.         \'LOCATION\': \'unique-snowflake\',\n1512.     }\n1513. }\n1514. NEVER_EXPIRING_CACHES_SETTINGS = copy.deepcopy(DEFAULT_MEMORY_CACHES_SETTINGS)\n1515. NEVER_EXPIRING_CACHES_SETTINGS[\'default\'][\'TIMEOUT\'] = None\n1516. \n1517. \n1518. class DefaultNonExpiringCacheKeyTests(SimpleTestCase):\n1519.     """\n1520.     Settings having Cache arguments with a TIMEOUT=None create Caches that will\n1521.     set non-expiring keys.\n1522.     """\n1523.     def setUp(self):\n1524.         # The 5 minute (300 seconds) default expiration time for keys is\n1525.         # defined in the implementation of the initializer method of the\n1526.         # BaseCache type.\n1527.         self.DEFAULT_TIMEOUT = caches[DEFAULT_CACHE_ALIAS].default_timeout\n1528. \n1529.     def tearDown(self):\n1530.         del(self.DEFAULT_TIMEOUT)\n1531. \n1532.     def test_default_expiration_time_for_keys_is_5_minutes(self):\n1533.         """The default expiration time of a cache key is 5 minutes.\n1534. \n1535.         This value is defined in\n1536.         django.core.cache.backends.base.BaseCache.__init__().\n1537.         """\n1538.         self.assertEqual(300, self.DEFAULT_TIMEOUT)\n1539. \n1540.     def test_caches_with_unset_timeout_has_correct_default_timeout(self):\n1541.         """Caches that have the TIMEOUT parameter undefined in the default\n1542.         settings will use the default 5 minute timeout.\n1543.         """\n1544.         cache = caches[DEFAULT_CACHE_ALIAS]\n1545.         self.assertEqual(self.DEFAULT_TIMEOUT, cache.default_timeout)\n1546. \n1547.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1548.     def test_caches_set_with_timeout_as_none_has_correct_default_timeout(self):\n1549.         """Memory caches that have the TIMEOUT parameter set to `None` in the\n1550.         default settings with have `None` as the default timeout.\n1551. \n1552.         This means "no timeout".\n1553.         """\n1554.         cache = caches[DEFAULT_CACHE_ALIAS]\n1555.         self.assertIsNone(cache.default_timeout)\n1556.         self.assertIsNone(cache.get_backend_timeout())\n1557. \n1558.     @override_settings(CACHES=DEFAULT_MEMORY_CACHES_SETTINGS)\n1559.     def test_caches_with_unset_timeout_set_expiring_key(self):\n1560.         """Memory caches that have the TIMEOUT parameter unset will set cache\n1561.         keys having the default 5 minute timeout.\n1562.         """\n1563.         key = "my-key"\n1564.         value = "my-value"\n1565.         cache = caches[DEFAULT_CACHE_ALIAS]\n1566.         cache.set(key, value)\n1567.         cache_key = cache.make_key(key)\n1568.         self.assertIsNotNone(cache._expire_info[cache_key])\n1569. \n1570.     @override_settings(CACHES=NEVER_EXPIRING_CACHES_SETTINGS)\n1571.     def test_caches_set_with_timeout_as_none_set_non_expiring_key(self):\n1572.         """Memory caches that have the TIMEOUT parameter set to `None` will set\n1573.         a non expiring key by default.\n1574.         """\n1575.         key = "another-key"\n1576.         value = "another-value"\n1577.         cache = caches[DEFAULT_CACHE_ALIAS]\n1578.         cache.set(key, value)\n1579.         cache_key = cache.make_key(key)\n1580.         self.assertIsNone(cache._expire_info[cache_key])\n1581. \n1582. \n1583. @override_settings(\n1584.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1585.     CACHE_MIDDLEWARE_SECONDS=1,\n1586.     CACHES={\n1587.         \'default\': {\n1588.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1589.         },\n1590.     },\n1591.     USE_I18N=False,\n1592.     ALLOWED_HOSTS=[\'.example.com\'],\n1593. )\n1594. class CacheUtils(SimpleTestCase):\n1595.     """TestCase for django.utils.cache functions."""\n1596.     host = \'www.example.com\'\n1597.     path = \'/cache/test/\'\n1598.     factory = RequestFactory(HTTP_HOST=host)\n1599. \n1600.     def tearDown(self):\n1601.         cache.clear()\n1602. \n1603.     def _get_request_cache(self, method=\'GET\', query_string=None, update_cache=None):\n1604.         request = self._get_request(self.host, self.path,\n1605.                                     method, query_string=query_string)\n1606.         request._cache_update_cache = True if not update_cache else update_cache\n1607.         return request\n1608. \n1609.     def test_patch_vary_headers(self):\n1610.         headers = (\n1611.             # Initial vary, new headers, resulting vary.\n1612.             (None, (\'Accept-Encoding\',), \'Accept-Encoding\'),\n1613.             (\'Accept-Encoding\', (\'accept-encoding\',), \'Accept-Encoding\'),\n1614.             (\'Accept-Encoding\', (\'ACCEPT-ENCODING\',), \'Accept-Encoding\'),\n1615.             (\'Cookie\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1616.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\',), \'Cookie, Accept-Encoding\'),\n1617.             (\'Cookie, Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1618.             (None, (\'Accept-Encoding\', \'COOKIE\'), \'Accept-Encoding, COOKIE\'),\n1619.             (\'Cookie,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1620.             (\'Cookie    ,     Accept-Encoding\', (\'Accept-Encoding\', \'cookie\'), \'Cookie, Accept-Encoding\'),\n1621.             (\'*\', (\'Accept-Language\', \'Cookie\'), \'*\'),\n1622.             (\'Accept-Language, Cookie\', (\'*\',), \'*\'),\n1623.         )\n1624.         for initial_vary, newheaders, resulting_vary in headers:\n1625.             with self.subTest(initial_vary=initial_vary, newheaders=newheaders):\n1626.                 response = HttpResponse()\n1627.                 if initial_vary is not None:\n1628.                     response[\'Vary\'] = initial_vary\n1629.                 patch_vary_headers(response, newheaders)\n1630.                 self.assertEqual(response[\'Vary\'], resulting_vary)\n1631. \n1632.     def test_get_cache_key(self):\n1633.         request = self.factory.get(self.path)\n1634.         response = HttpResponse()\n1635.         # Expect None if no headers have been set yet.\n1636.         self.assertIsNone(get_cache_key(request))\n1637.         # Set headers to an empty list.\n1638.         learn_cache_key(request, response)\n1639. \n1640.         self.assertEqual(\n1641.             get_cache_key(request),\n1642.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1643.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1644.         )\n1645.         # A specified key_prefix is taken into account.\n1646.         key_prefix = \'localprefix\'\n1647.         learn_cache_key(request, response, key_prefix=key_prefix)\n1648.         self.assertEqual(\n1649.             get_cache_key(request, key_prefix=key_prefix),\n1650.             \'views.decorators.cache.cache_page.localprefix.GET.\'\n1651.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1652.         )\n1653. \n1654.     def test_get_cache_key_with_query(self):\n1655.         request = self.factory.get(self.path, {\'test\': 1})\n1656.         response = HttpResponse()\n1657.         # Expect None if no headers have been set yet.\n1658.         self.assertIsNone(get_cache_key(request))\n1659.         # Set headers to an empty list.\n1660.         learn_cache_key(request, response)\n1661.         # The querystring is taken into account.\n1662.         self.assertEqual(\n1663.             get_cache_key(request),\n1664.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1665.             \'beaf87a9a99ee81c673ea2d67ccbec2a.d41d8cd98f00b204e9800998ecf8427e\'\n1666.         )\n1667. \n1668.     def test_cache_key_varies_by_url(self):\n1669.         """\n1670.         get_cache_key keys differ by fully-qualified URL instead of path\n1671.         """\n1672.         request1 = self.factory.get(self.path, HTTP_HOST=\'sub-1.example.com\')\n1673.         learn_cache_key(request1, HttpResponse())\n1674.         request2 = self.factory.get(self.path, HTTP_HOST=\'sub-2.example.com\')\n1675.         learn_cache_key(request2, HttpResponse())\n1676.         self.assertNotEqual(get_cache_key(request1), get_cache_key(request2))\n1677. \n1678.     def test_learn_cache_key(self):\n1679.         request = self.factory.head(self.path)\n1680.         response = HttpResponse()\n1681.         response[\'Vary\'] = \'Pony\'\n1682.         # Make sure that the Vary header is added to the key hash\n1683.         learn_cache_key(request, response)\n1684. \n1685.         self.assertEqual(\n1686.             get_cache_key(request),\n1687.             \'views.decorators.cache.cache_page.settingsprefix.GET.\'\n1688.             \'18a03f9c9649f7d684af5db3524f5c99.d41d8cd98f00b204e9800998ecf8427e\'\n1689.         )\n1690. \n1691.     def test_patch_cache_control(self):\n1692.         tests = (\n1693.             # Initial Cache-Control, kwargs to patch_cache_control, expected Cache-Control parts\n1694.             (None, {\'private\': True}, {\'private\'}),\n1695.             (\'\', {\'private\': True}, {\'private\'}),\n1696.             # no-cache.\n1697.             (\'\', {\'no_cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1698.             (\'\', {\'no-cache\': \'Set-Cookie\'}, {\'no-cache=Set-Cookie\'}),\n1699.             (\'no-cache=Set-Cookie\', {\'no_cache\': True}, {\'no-cache\'}),\n1700.             (\'no-cache=Set-Cookie,no-cache=Link\', {\'no_cache\': True}, {\'no-cache\'}),\n1701.             (\'no-cache=Set-Cookie\', {\'no_cache\': \'Link\'}, {\'no-cache=Set-Cookie\', \'no-cache=Link\'}),\n1702.             (\n1703.                 \'no-cache=Set-Cookie,no-cache=Link\',\n1704.                 {\'no_cache\': \'Custom\'},\n1705.                 {\'no-cache=Set-Cookie\', \'no-cache=Link\', \'no-cache=Custom\'},\n1706.             ),\n1707.             # Test whether private/public attributes are mutually exclusive\n1708.             (\'private\', {\'private\': True}, {\'private\'}),\n1709.             (\'private\', {\'public\': True}, {\'public\'}),\n1710.             (\'public\', {\'public\': True}, {\'public\'}),\n1711.             (\'public\', {\'private\': True}, {\'private\'}),\n1712.             (\'must-revalidate,max-age=60,private\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1713.             (\'must-revalidate,max-age=60,public\', {\'private\': True}, {\'must-revalidate\', \'max-age=60\', \'private\'}),\n1714.             (\'must-revalidate,max-age=60\', {\'public\': True}, {\'must-revalidate\', \'max-age=60\', \'public\'}),\n1715.         )\n1716. \n1717.         cc_delim_re = re.compile(r\'\\s*,\\s*\')\n1718. \n1719.         for initial_cc, newheaders, expected_cc in tests:\n1720.             with self.subTest(initial_cc=initial_cc, newheaders=newheaders):\n1721.                 response = HttpResponse()\n1722.                 if initial_cc is not None:\n1723.                     response[\'Cache-Control\'] = initial_cc\n1724.                 patch_cache_control(response, **newheaders)\n1725.                 parts = set(cc_delim_re.split(response[\'Cache-Control\']))\n1726.                 self.assertEqual(parts, expected_cc)\n1727. \n1728. \n1729. @override_settings(\n1730.     CACHES={\n1731.         \'default\': {\n1732.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1733.             \'KEY_PREFIX\': \'cacheprefix\',\n1734.         },\n1735.     },\n1736. )\n1737. class PrefixedCacheUtils(CacheUtils):\n1738.     pass\n1739. \n1740. \n1741. @override_settings(\n1742.     CACHE_MIDDLEWARE_SECONDS=60,\n1743.     CACHE_MIDDLEWARE_KEY_PREFIX=\'test\',\n1744.     CACHES={\n1745.         \'default\': {\n1746.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1747.         },\n1748.     },\n1749. )\n1750. class CacheHEADTest(SimpleTestCase):\n1751.     path = \'/cache/test/\'\n1752.     factory = RequestFactory()\n1753. \n1754.     def tearDown(self):\n1755.         cache.clear()\n1756. \n1757.     def _set_cache(self, request, msg):\n1758.         return UpdateCacheMiddleware(lambda req: HttpResponse(msg))(request)\n1759. \n1760.     def test_head_caches_correctly(self):\n1761.         test_content = \'test content\'\n1762. \n1763.         request = self.factory.head(self.path)\n1764.         request._cache_update_cache = True\n1765.         self._set_cache(request, test_content)\n1766. \n1767.         request = self.factory.head(self.path)\n1768.         request._cache_update_cache = True\n1769.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1770.         self.assertIsNotNone(get_cache_data)\n1771.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1772. \n1773.     def test_head_with_cached_get(self):\n1774.         test_content = \'test content\'\n1775. \n1776.         request = self.factory.get(self.path)\n1777.         request._cache_update_cache = True\n1778.         self._set_cache(request, test_content)\n1779. \n1780.         request = self.factory.head(self.path)\n1781.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1782.         self.assertIsNotNone(get_cache_data)\n1783.         self.assertEqual(test_content.encode(), get_cache_data.content)\n1784. \n1785. \n1786. @override_settings(\n1787.     CACHE_MIDDLEWARE_KEY_PREFIX=\'settingsprefix\',\n1788.     CACHES={\n1789.         \'default\': {\n1790.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1791.         },\n1792.     },\n1793.     LANGUAGES=[\n1794.         (\'en\', \'English\'),\n1795.         (\'es\', \'Spanish\'),\n1796.     ],\n1797. )\n1798. class CacheI18nTest(SimpleTestCase):\n1799.     path = \'/cache/test/\'\n1800.     factory = RequestFactory()\n1801. \n1802.     def tearDown(self):\n1803.         cache.clear()\n1804. \n1805.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1806.     def test_cache_key_i18n_translation(self):\n1807.         request = self.factory.get(self.path)\n1808.         lang = translation.get_language()\n1809.         response = HttpResponse()\n1810.         key = learn_cache_key(request, response)\n1811.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1812.         key2 = get_cache_key(request)\n1813.         self.assertEqual(key, key2)\n1814. \n1815.     def check_accept_language_vary(self, accept_language, vary, reference_key):\n1816.         request = self.factory.get(self.path)\n1817.         request.META[\'HTTP_ACCEPT_LANGUAGE\'] = accept_language\n1818.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1819.         response = HttpResponse()\n1820.         response[\'Vary\'] = vary\n1821.         key = learn_cache_key(request, response)\n1822.         key2 = get_cache_key(request)\n1823.         self.assertEqual(key, reference_key)\n1824.         self.assertEqual(key2, reference_key)\n1825. \n1826.     @override_settings(USE_I18N=True, USE_L10N=False, USE_TZ=False)\n1827.     def test_cache_key_i18n_translation_accept_language(self):\n1828.         lang = translation.get_language()\n1829.         self.assertEqual(lang, \'en\')\n1830.         request = self.factory.get(self.path)\n1831.         request.META[\'HTTP_ACCEPT_ENCODING\'] = \'gzip;q=1.0, identity; q=0.5, *;q=0\'\n1832.         response = HttpResponse()\n1833.         response[\'Vary\'] = \'accept-encoding\'\n1834.         key = learn_cache_key(request, response)\n1835.         self.assertIn(lang, key, "Cache keys should include the language name when translation is active")\n1836.         self.check_accept_language_vary(\n1837.             \'en-us\',\n1838.             \'cookie, accept-language, accept-encoding\',\n1839.             key\n1840.         )\n1841.         self.check_accept_language_vary(\n1842.             \'en-US\',\n1843.             \'cookie, accept-encoding, accept-language\',\n1844.             key\n1845.         )\n1846.         self.check_accept_language_vary(\n1847.             \'en-US,en;q=0.8\',\n1848.             \'accept-encoding, accept-language, cookie\',\n1849.             key\n1850.         )\n1851.         self.check_accept_language_vary(\n1852.             \'en-US,en;q=0.8,ko;q=0.6\',\n1853.             \'accept-language, cookie, accept-encoding\',\n1854.             key\n1855.         )\n1856.         self.check_accept_language_vary(\n1857.             \'ko-kr,ko;q=0.8,en-us;q=0.5,en;q=0.3 \',\n1858.             \'accept-encoding, cookie, accept-language\',\n1859.             key\n1860.         )\n1861.         self.check_accept_language_vary(\n1862.             \'ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4\',\n1863.             \'accept-language, accept-encoding, cookie\',\n1864.             key\n1865.         )\n1866.         self.check_accept_language_vary(\n1867.             \'ko;q=1.0,en;q=0.5\',\n1868.             \'cookie, accept-language, accept-encoding\',\n1869.             key\n1870.         )\n1871.         self.check_accept_language_vary(\n1872.             \'ko, en\',\n1873.             \'cookie, accept-encoding, accept-language\',\n1874.             key\n1875.         )\n1876.         self.check_accept_language_vary(\n1877.             \'ko-KR, en-US\',\n1878.             \'accept-encoding, accept-language, cookie\',\n1879.             key\n1880.         )\n1881. \n1882.     @override_settings(USE_I18N=False, USE_L10N=True, USE_TZ=False)\n1883.     def test_cache_key_i18n_formatting(self):\n1884.         request = self.factory.get(self.path)\n1885.         lang = translation.get_language()\n1886.         response = HttpResponse()\n1887.         key = learn_cache_key(request, response)\n1888.         self.assertIn(lang, key, "Cache keys should include the language name when formatting is active")\n1889.         key2 = get_cache_key(request)\n1890.         self.assertEqual(key, key2)\n1891. \n1892.     @override_settings(USE_I18N=False, USE_L10N=False, USE_TZ=True)\n1893.     def test_cache_key_i18n_timezone(self):\n1894.         request = self.factory.get(self.path)\n1895.         tz = timezone.get_current_timezone_name()\n1896.         response = HttpResponse()\n1897.         key = learn_cache_key(request, response)\n1898.         self.assertIn(tz, key, "Cache keys should include the time zone name when time zones are active")\n1899.         key2 = get_cache_key(request)\n1900.         self.assertEqual(key, key2)\n1901. \n1902.     @override_settings(USE_I18N=False, USE_L10N=False)\n1903.     def test_cache_key_no_i18n(self):\n1904.         request = self.factory.get(self.path)\n1905.         lang = translation.get_language()\n1906.         tz = timezone.get_current_timezone_name()\n1907.         response = HttpResponse()\n1908.         key = learn_cache_key(request, response)\n1909.         self.assertNotIn(lang, key, "Cache keys shouldn\'t include the language name when i18n isn\'t active")\n1910.         self.assertNotIn(tz, key, "Cache keys shouldn\'t include the time zone name when i18n isn\'t active")\n1911. \n1912.     @override_settings(\n1913.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1914.         CACHE_MIDDLEWARE_SECONDS=60,\n1915.         USE_I18N=True,\n1916.     )\n1917.     def test_middleware(self):\n1918.         def set_cache(request, lang, msg):\n1919.             def get_response(req):\n1920.                 return HttpResponse(msg)\n1921. \n1922.             translation.activate(lang)\n1923.             return UpdateCacheMiddleware(get_response)(request)\n1924. \n1925.         # cache with non empty request.GET\n1926.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'other\': \'true\'})\n1927.         request._cache_update_cache = True\n1928. \n1929.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1930.         # first access, cache must return None\n1931.         self.assertIsNone(get_cache_data)\n1932.         content = \'Check for cache with QUERY_STRING\'\n1933. \n1934.         def get_response(req):\n1935.             return HttpResponse(content)\n1936. \n1937.         UpdateCacheMiddleware(get_response)(request)\n1938.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1939.         # cache must return content\n1940.         self.assertIsNotNone(get_cache_data)\n1941.         self.assertEqual(get_cache_data.content, content.encode())\n1942.         # different QUERY_STRING, cache must be empty\n1943.         request = self.factory.get(self.path, {\'foo\': \'bar\', \'somethingelse\': \'true\'})\n1944.         request._cache_update_cache = True\n1945.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1946.         self.assertIsNone(get_cache_data)\n1947. \n1948.         # i18n tests\n1949.         en_message = "Hello world!"\n1950.         es_message = "Hola mundo!"\n1951. \n1952.         request = self.factory.get(self.path)\n1953.         request._cache_update_cache = True\n1954.         set_cache(request, \'en\', en_message)\n1955.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1956.         # The cache can be recovered\n1957.         self.assertIsNotNone(get_cache_data)\n1958.         self.assertEqual(get_cache_data.content, en_message.encode())\n1959.         # change the session language and set content\n1960.         request = self.factory.get(self.path)\n1961.         request._cache_update_cache = True\n1962.         set_cache(request, \'es\', es_message)\n1963.         # change again the language\n1964.         translation.activate(\'en\')\n1965.         # retrieve the content from cache\n1966.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1967.         self.assertEqual(get_cache_data.content, en_message.encode())\n1968.         # change again the language\n1969.         translation.activate(\'es\')\n1970.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1971.         self.assertEqual(get_cache_data.content, es_message.encode())\n1972.         # reset the language\n1973.         translation.deactivate()\n1974. \n1975.     @override_settings(\n1976.         CACHE_MIDDLEWARE_KEY_PREFIX="test",\n1977.         CACHE_MIDDLEWARE_SECONDS=60,\n1978.     )\n1979.     def test_middleware_doesnt_cache_streaming_response(self):\n1980.         request = self.factory.get(self.path)\n1981.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1982.         self.assertIsNone(get_cache_data)\n1983. \n1984.         def get_stream_response(req):\n1985.             return StreamingHttpResponse([\'Check for cache with streaming content.\'])\n1986. \n1987.         UpdateCacheMiddleware(get_stream_response)(request)\n1988. \n1989.         get_cache_data = FetchFromCacheMiddleware(empty_response).process_request(request)\n1990.         self.assertIsNone(get_cache_data)\n1991. \n1992. \n1993. @override_settings(\n1994.     CACHES={\n1995.         \'default\': {\n1996.             \'BACKEND\': \'django.core.cache.backends.locmem.LocMemCache\',\n1997.             \'KEY_PREFIX\': \'cacheprefix\'\n1998.         },\n1999.     },\n2000. )\n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-06 14:26:59,724 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file', 'arguments': '{"relative_path": "tests/cache/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'8448acb9-bd82-40f9-b6a7-88305fa45629': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 34823, 'candidates_token_count': 13, 'total_token_count': 42621, 'prompt_tokens_details': [{'modality': 1, 'token_count': 34823}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 7785, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -95.33527080829327, 'model_name': 'gemini-2.5-pro'} id='run--b43b4ffd-f68e-4f93-9ff8-31881f236184-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'tests/cache/tests.py'}, 'id': '8448acb9-bd82-40f9-b6a7-88305fa45629', 'type': 'tool_call'}] usage_metadata={'input_tokens': 34823, 'output_tokens': 13, 'total_tokens': 42621, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 7785}}
2025-10-06 14:27:08,039 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nimport time\n\nfrom django.core import management\nfrom django.core.cache import cache\nfrom django.db import connection\nfrom django.test import TransactionTestCase, override_settings\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n        \'LOCATION\': \'test_cache_table_cull_bug\',\n        \'OPTIONS\': {\n            \'MAX_ENTRIES\': 2,\n        },\n    },\n})\nclass DBCacheCullBugTest(TransactionTestCase):\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        super().setUp()\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def tearDown(self):\n        super().tearDown()\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\n            cursor.execute(f\'DROP TABLE {table_name}\')\n\n    def test_cull_with_only_expired_entries(self):\n        """\n        _cull() fails with a TypeError if all entries have expired before\n        culling.\n        """\n        # Fill the cache with entries that will expire. MAX_ENTRIES is 2.\n        cache.set(\'key1\', 1, timeout=1)\n        cache.set(\'key2\', 2, timeout=1)\n\n        # Wait for them to expire.\n        time.sleep(2)\n\n        # This call to set() will trigger a cull. Since all entries have\n        # expired, the cull query will return no rows, causing\n        # fetchone() to return None and leading to the TypeError.\n        # With the fix, this should not raise an exception.\n        cache.set(\'key3\', 3)\n\n        # The minimal assertion is that the key was set successfully.\n        self.assertEqual(cache.get(\'key3\'), 3)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 42339, 'candidates_token_count': 446, 'total_token_count': 42785, 'cached_content_token_count': 33900, 'prompt_tokens_details': [{'modality': 1, 'token_count': 50122}], 'cache_tokens_details': [{'modality': 1, 'token_count': 33900}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 446}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.004353914292938506, 'model_name': 'gemini-2.5-pro'} id='run--403cf6d8-8867-47ad-9023-0a57905d890a-0' usage_metadata={'input_tokens': 42339, 'output_tokens': 446, 'total_tokens': 42785, 'input_token_details': {'cache_read': 33900}}
2025-10-06 14:27:25,966 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "import time\\n\\nfrom django.core import management\\nfrom django.core.cache import cache\\nfrom django.db import connection\\nfrom django.test import TransactionTestCase, override_settings\\n\\n\\n@override_settings(CACHES={\\n    \'default\': {\\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\\n        \'LOCATION\': \'test_cache_table_cull_bug\',\\n        \'OPTIONS\': {\\n            \'MAX_ENTRIES\': 2,\\n        },\\n    },\\n})\\nclass DBCacheCullBugTest(TransactionTestCase):\\n    available_apps = [\'cache\']\\n\\n    def setUp(self):\\n        super().setUp()\\n        management.call_command(\'createcachetable\', verbosity=0)\\n\\n    def tearDown(self):\\n        super().tearDown()\\n        with connection.cursor() as cursor:\\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\\n            cursor.execute(f\'DROP TABLE {table_name}\')\\n\\n    def test_cull_with_only_expired_entries(self):\\n        \\"\\"\\"\\n        _cull() fails with a TypeError if all entries have expired before\\n        culling.\\n        \\"\\"\\"\\n        # Fill the cache with entries that will expire. MAX_ENTRIES is 2.\\n        cache.set(\'key1\', 1, timeout=1)\\n        cache.set(\'key2\', 2, timeout=1)\\n\\n        # Wait for them to expire.\\n        time.sleep(2)\\n\\n        # This call to set() will trigger a cull. Since all entries have\\n        # expired, the cull query will return no rows, causing\\n        # fetchone() to return None and leading to the TypeError.\\n        # With the fix, this should not raise an exception.\\n        cache.set(\'key3\', 3)\\n\\n        # The minimal assertion is that the key was set successfully.\\n        self.assertEqual(cache.get(\'key3\'), 3)\\n", "relative_path": "tests/cache/test_db_cache_cull.py"}'}, '__gemini_function_call_thought_signatures__': {'f076d9ad-5c1d-4637-81f9-6a33777b097a': 'Ct8hAR/MhbZ8zQ+i4nBByM+WCLl2QXRDBX4HQP5/rTWnU72/Ei3WR04FbFXmVoSsn3DGfte+pxWinyeFCE9VDpfozDiLwZtz+dfTJv8wVY2z4U/lrn8N7KP7inm2Ilt/tlR/EcRMG2YLoLZyQrOcXch6TxLRqexGjEfi4W7+2GcUP+I926h+CeZReRp8u77uI6dHNAyFeTUjWle2CisuVh8Aictu2S5dgLTsZHXQEnszIAczrIMybY8EZJTjgQOYeVNUB9eq9WkdgQskfyOC6g4r+aSLulXlfiFoJBC7AGQGM7ugSi62SVY6K7F5SodW6gPdaWd5c/eyfMthuTxy6b914eg68VDWxcE/ofvQzH4W65O1ovp9aN9W8KD3i4S3FGcXaWl6qoa2IOoJskBzCwT2+carLGBPWrh8eMzvrBVkMeBpWPnUNqsdHt0OK/G8RnCYOCFQUFLVWwQuf2qFCCrht9hKkvRytZCjANzJO27Av/yxzlLRB5iXwxbjS8w/Vrhe6GdHjWXWBLRRBRSO+asXl0zmUr6F75P6KMFLoB00jMlSroyxwrmo9lJCkdz6GVHP97TsGoqJNOHws2vCl01YcADNTLkU7QRZimavR/q45s9+EZL+PFY58Xt5raXrsGdEvtxKzfOroKj7YrHeL21CIYfDF1rXPZy74i0QE9EinXwh89fBlGW61HXDGvtLIeQw/KmYdb+/vAzLo/Dddf7Y7flI8DeybXGYyu+Cb1yWW+av+uRnB3I/VWauLk5fNGMnatxUrrHs03junzANzkf8qIkas/uNZ1RwSq1w7wbWs6jqMe2egBBVY9XXaWFVqYZZzOz0BGliK3NUECABeXB3mrZ7hJmwJLF8VMITi+Z3N9rD9hKEFBIS/tpaqYv7hNcbKD+d60XuOY4OhOzviqL9S3UBm9OIntCGJPgAok0AUOieQsLIvvjU3qh0lLvs5xu3BQkmseT8A1xFC5rOBfA5tNG7RfNC7QIRRc4rBceYAqEPXPNpI6Rn4yqa2/VcImZkGcpj8EcLNCkOojMGqG01vL9HlNxgOoJoGvj9kxQi/AvN4t7iB+waV2SPTVQmJjgC5TFw1c5q8fVccht6drFv3i3zGdlleQ3ClwzekBZz9Z70RSeyGtX3AEAR2shuJbZDXUrUZoB7UgnckcQHEuajM6V90jITmAd4Ehvjzon/MkZfBbZWEyR/quBg8F69SCUv64MGIj9YYhlgKUbMOIy4CcA0zbnqDcvkbJfDR9ftN+tRSnBrp4NIZLaGn3yLEXSMchFgZKCkpn8XTGngqXDKAjYTQfpF1EUTEmHyNj9/qywM3Tg5HQtEVr9sGeDc1mhp12Zi/Id0fYXw6SbAtzpROFjuVSlxb+mfHCzYwpvHbsvU1+JmIriqjdeiouB6l3CuGLxp229iNFsjcfTzzKBL9m+qksyi6nBn4B7wgCpHyo6aO6Ct+11DmcKUM+Tb0Z6Kqu8MsRCgc9w99sqCQPc2EO+pdLf8qd8NujAPy+Gy/sHJA00rze6pas2cxPvCiDJoXM6OPWshgVPaBOF0Zwnr0bxDqcqR8kFv+nRNn42tthgZWRjaRPhxBXn3wizfWhm72CfwWdWVhBR9FbUKM9jeqt6Jh1PwqMGMEQCaIzZWulADbwWmwskvTkQKYC2wXsNi1BS68nXTS/xeHWpRsqGXSt77jj4I4EERkJjCEYjjWEhCD7kcUoY8ElLPz+pjTly7+PF6vGINPzGLCk+QXX5LJDtiqfxGfnZQ43dtFXQawNvXnfEgxZRkB6bKqqelbr70xQbcp5pesKKsNkEgREPwaJ0JFQ8Dvt4R5aWJm7IDj9PLMQwlYmmnXwqEh0mvp77QuHaPyZI+pRLVzLO0GUaL6pqD6YPUaDO4wB7d2WrGYz325iFzHZ9TaQIYWnXLUlLrUfotnO5No5HkX3RiZt7Kw6eFJG1a0A2h3Kx4exKGARXEN3Qfd0sRAQfn9FCZYAvOxqmU7TR+jmO6MHhV0Rq6EQdRkc9VfTqxdH6grq8YM0FO6KahNRiju3xNTnbEVn6Tan1hv/a6wV2QZza0a6XEZ8q5GwSV8ZZr6FCDo5al2xwNfsOEcvo7plcjwgvp8R/cwo/DIregd8bhi6Wvg0reJ2VUF64WIpTpO1+AnswACp4w0ziNIKf9MFZttWfAYt66coIbIEum/oiI2Ygk1lY7vGatq8oo8Q6hRWPvI8Dop39/UCRY8RI/DYpu9MbfJEvm2eMTamlVsh2pKVyuc5KfK522zE/sBiuKdMfksIWJitVBfkcQcKP2W6h5Sx0eGDBmGutMxUPjFKaEa9rF2YgX3E2DRjuaig9Mw1cKBLw9CbFECBdcEi0WZlR9Ce8TU/BejC8lTZz664Z/e2KkHkYxkprt/V6rvR8vDZ6FjUqgPEkX2npgF3ND0oiQAC+cyfWysGnlst8asBURxi6pOYQx1E2lIFVcyJTsr1sJ9uj1WDv5sfGbkwTtpKillm60gLx+25lmzOiCt3tVW69Y73+y044G7767ItRlUUE81sijbiUOrF5yRin77jdXUFf0IQgwW5z0ef4Pz5/0gALaEy1TMopjpim5L3NDn34E0dVsC0h2gA7IuaqnpnVaZva1RN3IjgiggUVdDHyTBFxTiiYyxMb+ikQOh3N7uw1i4+/HBZ33tbhV+Oymk7QFqXj8dDj0im+WP4NELGZ9GYk/4IBHGaIEJomM8/tN95bkW1M9QjzoHn/FTeptcor+zSWuWu92sO122CwDgbgmDx9v8WdL0GiEkplg0Y27KOpB6EcrZb3jp/omRTqMB4RP+/la91JW2F0K0c+spi33CLeLTRR5LLvj/2uBqY8jbiTAgRAFQ7SW6cPzyct72N7z8yCuiNUOJM2qGMAK+/hjyCPO0hB7Ox6JawSUB+q6hSU2HFUgRO4j9qzryg3nxCWwg90Z7oOoaTMsPbYgNx6NfWCY1CGvphQoivPZAWEnkNzVcvquY0gCiDLqR2ewmVnxQYIfnR/YS5Q7eIEaZFd7B/l7/5B4r04JZx/cjkX9NOtnQYODzuiz6HZfu6OazfQJ4Uur/fkUwSMlNAnaogbSHSCS6OdFoER9RyWR8X50wYT014g8goTZK04a+wDa1iTLJjKYqIkqpmp7EpFHAhZfnls6Cmtqy/9fQxfLKoow6PDFUSq52EqBbHl2S/vu6rUo1FeNlJ5iv5KDimtVFpNtlpwqTKuxfKi+JbhUOXfcgiqGE/SPFmEhk6SRtbbiRQ3syX3LJzv3s6folMeUP3d+9amvHsY15hViUFmdyFUBtGt/RCewkMp2YoY7+e1AgKN4XEK73/xObx3mNF+VhhC4BMz962zYVAw0mHwCfba79W+fZsyuO0Y7ikgF0fDjoKhEpVIt6fFbvzBKpxY1XFJxBjlBQMdNlEOB4HOzmH8DOj0JMimoSo1cNcP0ZpweSiFpW2J/ZXlk+OTUdC5ekaNJk8lkrQmJb7p1L9Y2H/Oc/picpzIqZIuinVnd4glTJdNjvGFLl5LwFFC4oqAO1mVEvJ02TWzOUO6bVWEgxb6erTcJtJKzQsevnP3hjEuhzLvryC4PjQCuJPlDTpHrI6zIsXlMzeaCS6/8LXEuR9g+zeyzkM2nlI5ZOqhHqPrOQprIpATnb4LsbXduO/s4fkbAXStEpgoIxmQxDZKmgt4reSLG8j3GtZahvTBR86721hUl79vwNG0HDZhImlO57E14ugy6WRJ+COyi+bLufpyXako9Z1LgF5tRp5b7Mg33t33/+3jpRzSAwhwWX3tpMXfPLqDAJUNsPLCX/tHa1/5l7rjVnSWNAwDyhXTblQY5SKYu7AdSqmRYUeJPwFe48yoTnp1SlcVWUlQXdEl8EjnGH+NX8dBP01tPP9TrvGRJ+r+8lJ4P7xz+0LEnQutY5ZOAIS4pnBzBv5HtqKLUAV2ScjJrZVALnVyM27My8VNa8nU18YW+XG8zHwKMgv/I5KnyBNUpmU1Z1iI8Idb2+uCne3vEoNLQdGWvFlojWK8FZxzquVVCRB8diY9snMyoiznfF4qx3Cj1coYRD23XPg7npOyIhy4gZRtv3RbyDL4f+5yTUdojJ/KO6NkrB/Yah4hGjGqLflP6LQBXXiZ0Ti2PLi/1ORLUWXKS2XOjrptU3Sb5fabEm+4kYVy/SgFObti9tIZU6+pJUYK4l8A04l9u3Zqj9BaN1jtIlNaEoqkmBp1o10gNMA8H+zoGmTQ4GGpU7V92eotmai762iH2KLXuMTC9gMYkQdVXTPS29+nftqDP6fulDvrrVtamrbDJvfynniy1dQUJrJ8+81WWqMeOrRoKzEzW3D8uzGwKWJKo87vv7LOSUVUrnfHri27vzPZNr/q5C1ScmE+OgjlH6H6X3nV5VOB4WGtxvuNTONNUzZLKIVEoIbsfP8HuAoDCtg+KFARrksxVmx+6bC27P/uF51SW8o1nVLbEMZ18niaKYiTYGYTZnWbBwpTDXAhJy/KC/VTcUJw+aP8I7rE1JnwQr0sJt2fJS3mEh9lXaFGaf52HhmNsMxcXc9CC6agn1DWFYdXNk8X4NJgBvXSD/5RZXOO9llRj2iB2v4zjNCY8MpdHX7sbdkWWsB2FHZpqdTb8k04PcEXpXVj92rNFHnU5Md/+TNL35yphlCOtxexgl/vce+51pLpbmB3xZLyv1OBls807KeVhdX/hBM8yiS2t4ckp3bwtPNm/PllqSENwI1CFM/WbE1nuJvAD/p/aWaeNXxuBrI+swjNqckGiYcZK5EykxsSlwEoJufHjBhjwQnoyDuGhhxsQndqrwHFwcy6eX3Mjynxw9nKe8p3rEnT8/RpU1FIJ+FQO4vlLVvIilX4Vn/4ar2q/A8EleGznG1Wi48cLWDmzEHGmGAVRAHuUvLV9qTT5qQGQvakV5XErmGPMNdNntBLrf3JHMM8KkSHxONeGv5atIrJICz1L9NeiYBkyBJJ9x14s1k//WcRXxFLX3HaWLAUtVnHpqr4PmVIAs7Xl/GVoTgqs0lMLCpERK/eSnpqpd2Vbw/f3WnlcVzE6WJyJhYWyUOKQmvso4LAGAmU7rI79VTUf4HHO1MNlVV/BSWaH2xe2j658Sx1pUhVJXIZQS0WLBlG8yW5KmiSLFVbHI8++I/PJ0hjdyqOwZT9h3znVtX7Uf2cF2MZxbbQAenLa3HJDKKRZeoBlhU5hpqaFtl3smfCafOZSRz2YDIKz8UOuZ72qWug+BkTAwgntoVfsKIPDwZPRrFnAzvpYxu51YDOm12Ts6HQ8t4gdl1qHboQe8ENigFYG+2W0sXrk6aHhPf7X1S00TWYc7bYnrYC/NUHwjPeNDw55vHXglKyvqJDWAVuaETWOT69FgRlthdA0LllQ4E4Zm9Sa5RgmGAi3HIQ3iERiJRhOa2qz16jhXGAl3v6D7YjqDacuXbMqREupUDlxiKCAMrhZFDH2U650sEaX26IIPo5/hU4uMi7huM00lEPdbc5gwdYqgS/oJQW7EPlkG+Jk8HwMCJkiri+/wff1vM/cjTbut1fsi04NBcQoMxqS96/KwmD0gNdRMbaH9lcii+S35gdBNxzgndsFkfsBTITTYP1++dIz2HHvuO39bW7r/2sBSezk20oeE/Mk8xFz5jzwnRDlwn+X6xikS5kANmwhWIadsa14MQNNI5fYeS6WUsZKr+vJiOROD+W+NZEq++6qPODCMbfCnDMAOwMrKuu7cNf/9Mnry1b8GF02bMF8JqG0dLxQRJFTARdYKtY='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 54361, 'candidates_token_count': 462, 'total_token_count': 56097, 'prompt_tokens_details': [{'modality': 1, 'token_count': 54361}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 462}], 'thoughts_token_count': 1274, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2542874555051069, 'model_name': 'gemini-2.5-pro'} id='run--dc959b25-24aa-4d9c-8e03-94a2aad25491-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'import time\n\nfrom django.core import management\nfrom django.core.cache import cache\nfrom django.db import connection\nfrom django.test import TransactionTestCase, override_settings\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n        \'LOCATION\': \'test_cache_table_cull_bug\',\n        \'OPTIONS\': {\n            \'MAX_ENTRIES\': 2,\n        },\n    },\n})\nclass DBCacheCullBugTest(TransactionTestCase):\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        super().setUp()\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def tearDown(self):\n        super().tearDown()\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\n            cursor.execute(f\'DROP TABLE {table_name}\')\n\n    def test_cull_with_only_expired_entries(self):\n        """\n        _cull() fails with a TypeError if all entries have expired before\n        culling.\n        """\n        # Fill the cache with entries that will expire. MAX_ENTRIES is 2.\n        cache.set(\'key1\', 1, timeout=1)\n        cache.set(\'key2\', 2, timeout=1)\n\n        # Wait for them to expire.\n        time.sleep(2)\n\n        # This call to set() will trigger a cull. Since all entries have\n        # expired, the cull query will return no rows, causing\n        # fetchone() to return None and leading to the TypeError.\n        # With the fix, this should not raise an exception.\n        cache.set(\'key3\', 3)\n\n        # The minimal assertion is that the key was set successfully.\n        self.assertEqual(cache.get(\'key3\'), 3)\n', 'relative_path': 'tests/cache/test_db_cache_cull.py'}, 'id': 'f076d9ad-5c1d-4637-81f9-6a33777b097a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 54361, 'output_tokens': 462, 'total_tokens': 56097, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1274}}
2025-10-06 14:27:27,643 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='tests/cache/test_db_cache_cull.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 54846, 'candidates_token_count': 13, 'total_token_count': 54859, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56118}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1214221908281055e-05, 'model_name': 'gemini-2.5-pro'} id='run--b7e9e755-bed2-4953-9459-639d8241c2f2-0' usage_metadata={'input_tokens': 54846, 'output_tokens': 13, 'total_tokens': 54859, 'input_token_details': {'cache_read': 0}}
2025-10-06 14:27:27,791 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/tests/cache/test_db_cache_cull.py b/tests/cache/test_db_cache_cull.py
new file mode 100644
index 0000000000..e23bd63c98
--- /dev/null
+++ b/tests/cache/test_db_cache_cull.py
@@ -0,0 +1,50 @@
+import time
+
+from django.core import management
+from django.core.cache import cache
+from django.db import connection
+from django.test import TransactionTestCase, override_settings
+
+
+@override_settings(CACHES={
+    'default': {
+        'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
+        'LOCATION': 'test_cache_table_cull_bug',
+        'OPTIONS': {
+            'MAX_ENTRIES': 2,
+        },
+    },
+})
+class DBCacheCullBugTest(TransactionTestCase):
+    available_apps = ['cache']
+
+    def setUp(self):
+        super().setUp()
+        management.call_command('createcachetable', verbosity=0)
+
+    def tearDown(self):
+        super().tearDown()
+        with connection.cursor() as cursor:
+            table_name = connection.ops.quote_name('test_cache_table_cull_bug')
+            cursor.execute(f'DROP TABLE {table_name}')
+
+    def test_cull_with_only_expired_entries(self):
+        """
+        _cull() fails with a TypeError if all entries have expired before
+        culling.
+        """
+        # Fill the cache with entries that will expire. MAX_ENTRIES is 2.
+        cache.set('key1', 1, timeout=1)
+        cache.set('key2', 2, timeout=1)
+
+        # Wait for them to expire.
+        time.sleep(2)
+
+        # This call to set() will trigger a cull. Since all entries have
+        # expired, the cull query will return no rows, causing
+        # fetchone() to return None and leading to the TypeError.
+        # With the fix, this should not raise an exception.
+        cache.set('key3', 3)
+
+        # The minimal assertion is that the key was set successfully.
+        self.assertEqual(cache.get('key3'), 3)

2025-10-06 14:27:27,791 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 14:27:27,838 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 14:27:27,838 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 14:27:28,377 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:27:28,377 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 27c09043da Refs #31670 -- Renamed whitelist argument and attribute of EmailValidator.

2025-10-06 14:27:28,377 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 14:27:28,478 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:27:28,478 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:27:28,479 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 14:27:28,479 - thread-139660780025408.app.docker.base_container - INFO - Creating directory tests/cache in the container
2025-10-06 14:27:28,479 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p tests/cache
2025-10-06 14:27:28,579 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:27:28,579 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:27:28,580 - thread-139660780025408.app.docker.base_container - INFO - Updating tests/cache/test_db_cache_cull.py in the container
2025-10-06 14:27:28,582 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 14:28:00,601 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls"}'}, '__gemini_function_call_thought_signatures__': {'1364d763-83bf-4d67-b90d-2f8fa0ae2b51': 'CsQFAR/MhbaY6U8uwwvZS6aLli61vLZidAxMd7BW6etGhAdfRFg7xEO/DpaiQu54DIqJgpn3ehWEj9M/U6gYAHSWgse5mOmJRz24J2jtsGzaY6pxL9fzIaoXZ7kMYKbkVPY/Uj1vVN2q2vHyf4dG+BJIBGOgKoKZw79Cm7tJwZ6n3/n39VkG1q8pd/dIhCcT5SZaUao7FuTmDBo5ntmKAAl6lQQ2GkokyozBAI7R96CH8yCageLcxLfR4deAWxzVSZflcRW83r4PU18xxOFGTnVcqg+HOvsQ9fuZ0B6BY29VXzU3eY4GytDZYZXSrmZZy6OSBB7fgpJiV1+/nSfcS8F+KlQI8Wq8abmj69QHj7dC2XaQAPXPUxMIlmcaFUPvL7aqemgNHGnsbLNB0nL/K8StcuPOu0oK+56hRV2Csi0v8hQMod/oLgUZI7wNCob7XUaYH+AJ1kYYQ7+f8GUwejdRL42skhL0DJ7s72wVTx1kTH99KSApto0LJXLlin29pHUjMlhZjliet4Uff0jRS8X4Zs/TM9Bdkj5UKpmL4I7uf/5ASMLRkPfhnGD/ZrkxiLgNGQ4Zy0jNCGdlOJ7bG8YVOzPRJfAAn+STKvHoVsGp1jqrrTBlJx0Jb+xm9Y+st6PJWoU6fkkfD8lwC5xeo9fFRLCAf+ULd4b17LHhGHa8azU/nbSoDoljO9W1vNH/gG5vjkF73UrnU2tKFedLPUIRPtMtVnbDCCghzbA+AptKGYfeBW6sFwL69Y3dJCtXsROMFzdxEX0R/YdXoSW/KxVPZWSbCzRQwA3ithLYxg4oJsvA3C26ZWQLR2EI7WhDROUdbXmAPOfbQlbShQxDK2bwzWr4W2bYlsF59Oe+T6rdliRcjZ4guFCnJImsMWx0tV4HPhsKC3EbT9YYsYL4Nd+HNjwAzGiH6sIQ6jbzxb0Af5TlZQU+'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 753, 'candidates_token_count': 5, 'total_token_count': 936, 'prompt_tokens_details': [{'modality': 1, 'token_count': 753}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 5}], 'thoughts_token_count': 178, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -45.125186157226565, 'model_name': 'gemini-2.5-pro'} id='run--81ed9254-cf06-498b-bed1-59743739076e-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls'}, 'id': '1364d763-83bf-4d67-b90d-2f8fa0ae2b51', 'type': 'tool_call'}] usage_metadata={'input_tokens': 753, 'output_tokens': 5, 'total_tokens': 936, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 178}}
2025-10-06 14:28:00,602 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls
2025-10-06 14:28:00,703 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:28:00,703 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

AUTHORS		  docs		js_tests	package.json  setup.py
CONTRIBUTING.rst  extras	LICENSE		README.rst    tests
django		  Gruntfile.js	LICENSE.python	scripts       tox.ini
Django.egg-info   INSTALL	MANIFEST.in	setup.cfg

2025-10-06 14:28:13,686 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls tests"}'}, '__gemini_function_call_thought_signatures__': {'4f03ccf7-c74d-4f85-a4d0-b9b7af6960b6': 'CoACAR/MhbarhzuY8ee9aju6309ardJ8WxNEbsy7WOYb0B1lblG3Bqks3AuKZfDOuZl3X9upl2cZVWuqOUC4/sUIwPLfoU7ioltmoeDEp4pQURiMkBzisiNrzaxObcrb9rkAwCH/vddVILb5gUg54OB2G5XK9AkIunL3nVffXLd/f4bcOnYFZFGh1YoYTDxE08X0WeDf5fcyvjN91vnH8SB5NguqQ9lkjGi8YmcjHf/SvKQH3/mD9YpiS9gzF0ibcaK5uwxyBVH58qVlnIHKC2UMzC1YgwKN7lJV0zFdeTkzDlYs4XC4V+75+h9LymGiyLPRZ7/A6b7ppCs3e6uX+V+mFw=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 831, 'candidates_token_count': 6, 'total_token_count': 931, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1007}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 6}], 'thoughts_token_count': 94, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -14.481143951416016, 'model_name': 'gemini-2.5-pro'} id='run--7e4ad1a9-63ae-43f8-aed4-d0c298a6b8d0-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls tests'}, 'id': '4f03ccf7-c74d-4f85-a4d0-b9b7af6960b6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 831, 'output_tokens': 6, 'total_tokens': 931, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 94}}
2025-10-06 14:28:13,688 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls tests
2025-10-06 14:28:13,788 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:28:13,788 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

absolute_url_overrides	     m2o_recursive
admin_autodiscover	     mail
admin_changelist	     managers_regress
admin_checks		     many_to_many
admin_custom_urls	     many_to_one
admin_default_site	     many_to_one_null
admin_docs		     max_lengths
admin_filters		     messages_tests
admin_inlines		     middleware
admin_ordering		     middleware_exceptions
admin_registration	     migrate_signals
admin_scripts		     migrations
admin_utils		     migrations2
admin_views		     migration_test_data_persistence
admin_widgets		     modeladmin
aggregation		     model_enums
aggregation_regress	     model_fields
annotations		     model_forms
app_loading		     model_formsets
apps			     model_formsets_regress
asgi			     model_indexes
async			     model_inheritance
auth_tests		     model_inheritance_regress
backends		     model_meta
base			     model_options
bash_completion		     model_package
basic			     model_regress
builtin_server		     multiple_database
bulk_create		     mutually_referential
cache			     nested_foreign_keys
check_framework		     no_models
conditional_processing	     null_fk
constraints		     null_fk_ordering
contenttypes_tests	     null_queries
context_processors	     one_to_one
csrf_tests		     ordering
custom_columns		     order_with_respect_to
custom_lookups		     or_lookups
custom_managers		     pagination
custom_methods		     postgres_tests
custom_migration_operations  prefetch_related
custom_pk		     project_template
datatypes		     properties
dates			     proxy_model_inheritance
datetimes		     proxy_models
db_functions		     queries
dbshell			     queryset_pickle
db_typecasts		     raw_query
db_utils		     README.rst
decorators		     redirects_tests
defer			     requests
defer_regress		     requirements
delete			     reserved_names
delete_regress		     resolve_url
deprecation		     responses
dispatch		     reverse_lookup
distinct_on_fields	     runtests.py
empty			     save_delete_hooks
empty_models		     schema
expressions		     select_for_update
expressions_case	     select_related
expressions_window	     select_related_onetoone
extra_regress		     select_related_regress
field_deconstruction	     serializers
field_defaults		     servers
field_subclassing	     sessions_tests
files			     settings_tests
file_storage		     shell
file_uploads		     shortcuts
filtered_relation	     signals
fixtures		     signed_cookies_tests
fixtures_model_package	     signing
fixtures_regress	     sitemaps_tests
flatpages_tests		     sites_framework
force_insert_update	     sites_tests
foreign_object		     staticfiles_tests
forms_tests		     str
from_db_value		     string_lookup
generic_inline_admin	     swappable_models
generic_relations	     syndication_tests
generic_relations_regress    template_backends
generic_views		     template_loader
get_earliest_or_latest	     templates
get_object_or_404	     template_tests
get_or_create		     test_client
gis_tests		     test_client_regress
handlers		     test_exceptions
httpwrappers		     test_runner
humanize_tests		     test_runner_apps
i18n			     test_sqlite.py
import_error_package	     test_utils
indexes			     timezones
inline_formsets		     transaction_hooks
inspectdb		     transactions
introspection		     unmanaged_models
invalid_models_tests	     update
known_related_objects	     update_only_fields
logging_tests		     urlpatterns
lookup			     urlpatterns_reverse
m2m_and_m2o		     urls.py
m2m_intermediary	     user_commands
m2m_multiple		     utils_tests
m2m_recursive		     validation
m2m_regress		     validators
m2m_signals		     version
m2m_through		     view_tests
m2m_through_regress	     wsgi

2025-10-06 14:28:24,795 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py --help"}'}, '__gemini_function_call_thought_signatures__': {'37398a0b-959f-44a1-8313-fee6f4cd57aa': 'Co4BAR/Mhbb7io4qlToF4av13df8eQzYeCWs3vPYJ3vOvb7hg3j2Sh4JYs5tqRhbi/NZPci2rKq7kRg0I5+hG+SwFdzOUp5KP21WKVxemjV6TTQ2vbm9NJi3U8DYvb46nuR0k8DYsy6AuIrsQw8iVNVumbUfhPav8JzHc0CZiECHrMJzseZ2ir7nGsXQIEUMLw=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1847, 'candidates_token_count': 13, 'total_token_count': 2039, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2082}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 179, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -6.001778235802283, 'model_name': 'gemini-2.5-pro'} id='run--6fcd8c11-efe6-4829-83ac-1721a132f9d8-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py --help'}, 'id': '37398a0b-959f-44a1-8313-fee6f4cd57aa', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1847, 'output_tokens': 13, 'total_tokens': 2039, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 179}}
2025-10-06 14:28:24,796 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py --help
2025-10-06 14:28:25,223 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:28:25,224 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Kp

usage: runtests.py [-h] [-v {0,1,2,3}] [--noinput] [--failfast] [--keepdb]
                   [--settings SETTINGS] [--bisect BISECT] [--pair PAIR]
                   [--reverse] [--selenium BROWSERS] [--headless]
                   [--selenium-hub SELENIUM_HUB]
                   [--external-host EXTERNAL_HOST] [--debug-sql]
                   [--parallel [N]] [--tag TAGS] [--exclude-tag EXCLUDE_TAGS]
                   [--start-after START_AFTER] [--start-at START_AT] [--pdb]
                   [-b]
                   [module [module ...]]

Run the Django test suite.

positional arguments:
  module                Optional path(s) to test modules; e.g. "i18n" or
                        "i18n.tests.TranslationTests.test_lazy_objects".

optional arguments:
  -h, --help            show this help message and exit
  -v {0,1,2,3}, --verbosity {0,1,2,3}
                        Verbosity level; 0=minimal output, 1=normal output,
                        2=all output
  --noinput             Tells Django to NOT prompt the user for input of any
                        kind.
  --failfast            Tells Django to stop running the test suite after
                        first failed test.
  --keepdb              Tells Django to preserve the test database between
                        runs.
  --settings SETTINGS   Python path to settings module, e.g.
                        "myproject.settings". If this isn't provided, either
                        the DJANGO_SETTINGS_MODULE environment variable or
                        "test_sqlite" will be used.
  --bisect BISECT       Bisect the test suite to discover a test that causes a
                        test failure when combined with the named test.
  --pair PAIR           Run the test suite in pairs with the named test to
                        find problem pairs.
  --reverse             Sort test suites and test cases in opposite order to
                        debug test side effects not apparent with normal
                        execution lineup.
  --selenium BROWSERS   A comma-separated list of browsers to run the Selenium
                        tests against.
  --headless            Run selenium tests in headless mode, if the browser
                        supports the option.
  --selenium-hub SELENIUM_HUB
                        A URL for a selenium hub instance to use in
                        combination with --selenium.
  --external-host EXTERNAL_HOST
                        The external host that can be reached by the selenium
                        hub instance when running Selenium tests via Selenium
                        Hub.
  --debug-sql           Turn on the SQL query logger within tests.
  --parallel [N]        Run tests using up to N parallel processes.
  --tag TAGS            Run only tests with the specified tags. Can be used
                        multiple times.
  --exclude-tag EXCLUDE_TAGS
                        Do not run tests with the specified tag. Can be used
                        multiple times.
  --start-after START_AFTER
                        Run tests starting after the specified top-level
                        module.
  --start-at START_AT   Run tests starting at the specified top-level module.
  --pdb                 Runs the PDB debugger on error or failure.
  -b, --buffer          Discard output of passing tests.

2025-10-06 14:28:27,576 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py cache.test_db_cache_cull"}'}, '__gemini_function_call_thought_signatures__': {'2996aba6-9628-41e9-8891-f299b9f8b0b7': 'CpoCAR/MhbZRx8LnTA4A6e2cyGYwIIwgWM+XkVXKn2xJhN/cNXcr4xCdDH7M6N5mwPJeeif/KQsiH7spzIMl5saYRREtBxY2lxX4YnWAc88B6VlIGqpluzDD+70UHyOkZABPiPnKOxv/EnzzjFA5gKQqLKGCxq0IWbtwJItpZnZk4ub7p1Pfx8HCHFSTU8YeS7pRxuHktNuRLBkWbJVg3APmtKxh8B1TgViEy9QHZRw/rJeLX1pRUjqZxpyRLjIeb5INqyUZyvuEVxrn7Icgn7qbJzIFLTXmjgNgDjEZBgJHe0BJ8gDJitJX2lYvHIyu9apo48OnKyekLeFZx8iiasJ2POoIy33IFUVqWccDrr5M1JIRd7T7T80eLuS5'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2854, 'candidates_token_count': 20, 'total_token_count': 2946, 'cached_content_token_count': 1456, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3121}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1456}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 20}], 'thoughts_token_count': 72}, 'finish_reason': 'STOP', 'avg_logprobs': -0.24779255390167237, 'model_name': 'gemini-2.5-pro'} id='run--17b27840-51a1-4180-a739-15d9ace940ff-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py cache.test_db_cache_cull'}, 'id': '2996aba6-9628-41e9-8891-f299b9f8b0b7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2854, 'output_tokens': 20, 'total_tokens': 2946, 'input_token_details': {'cache_read': 1456}, 'output_token_details': {'reasoning': 72}}
2025-10-06 14:28:27,579 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py cache.test_db_cache_cull
2025-10-06 14:28:30,046 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:28:30,046 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Testing against Django installed in '/testbed/django' with up to 8 processes
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.
----------------------------------------------------------------------
Ran 1 test in 2.007s

OK
Destroying test database for alias 'default'...

2025-10-06 14:28:31,830 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content="I have executed the test file `tests/cache/test_db_cache_cull.py` as you requested. Here is the output:\n\n```\nTesting against Django installed in '/testbed/django' with up to 8 processes\nCreating test database for alias 'default'...\nSystem check identified no issues (0 silenced).\n.\n----------------------------------------------------------------------\nRan 1 test in 2.007s\n\nOK\nDestroying test database for alias 'default'...\n```" additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2949, 'candidates_token_count': 104, 'total_token_count': 3070, 'cached_content_token_count': 2927, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3286}], 'cache_tokens_details': [{'modality': 1, 'token_count': 2927}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 104}], 'thoughts_token_count': 17}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0359045542203463, 'model_name': 'gemini-2.5-pro'} id='run--b21ef671-6f17-45e8-9c4e-c4d4b5db25e1-0' usage_metadata={'input_tokens': 2949, 'output_tokens': 104, 'total_tokens': 3070, 'input_token_details': {'cache_read': 2927}, 'output_token_details': {'reasoning': 17}}
2025-10-06 14:28:58,222 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log="Testing against Django installed in '/testbed/django' with up to 8 processes\nCreating test database for alias 'default'...\nSystem check identified no issues (0 silenced).\n.\n----------------------------------------------------------------------\nRan 1 test in 2.007s\n\nOK\nDestroying test database for alias 'default'...\n\nTest passes but should fail since the bug is not fixed. The test is intended to trigger a 'TypeError: 'NoneType' object is not subscriptable' error within the `_cull` method of the database cache backend, as described in the issue. However, the test completed successfully, indicating it did not trigger the bug." reproduced_bug_commands=['python runtests.py cache.DBCacheCullBugTest']
2025-10-06 14:28:58,223 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-10-06 14:28:58,223 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-10-06 14:28:58,223 - thread-139660780025408.app.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-10-06 14:28:58,276 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content="Your previous test case failed to reproduce the bug. Here is the failure log:\nTesting against Django installed in '/testbed/django' with up to 8 processes\nCreating test database for alias 'default'...\nSystem check identified no issues (0 silenced).\n.\n----------------------------------------------------------------------\nRan 1 test in 2.007s\n\nOK\nDestroying test database for alias 'default'...\n\nTest passes but should fail since the bug is not fixed. The test is intended to trigger a 'TypeError: 'NoneType' object is not subscriptable' error within the `_cull` method of the database cache backend, as described in the issue. However, the test completed successfully, indicating it did not trigger the bug.\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n" additional_kwargs={} response_metadata={}
2025-10-06 14:30:08,138 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='It appears the previous test failed to reproduce the bug because my understanding of the culling mechanism was incorrect. The expiration of entries was a red herring.\n\nThe root cause of the `TypeError` is a specific edge case in the culling logic that can be deterministically triggered by setting `CULL_FREQUENCY` to 1. Here\'s the breakdown:\n\n1.  The `_base_set` method triggers a cull if the total number of rows in the cache table (`T`) exceeds `MAX_ENTRIES` (`M`).\n2.  The `_cull` method then calculates an offset for a SQL query. This offset is calculated as `offset = int(U / F)`, where `U` is the number of *unexpired* entries and `F` is the `CULL_FREQUENCY`.\n3.  The bug occurs when this `offset` is greater than or equal to the total number of rows (`T`) in the table at the time the query is executed. In this situation, the query returns no rows, `fetchone()` returns `None`, and accessing `fetchone()[0]` raises the `TypeError`.\n4.  By setting `CULL_FREQUENCY` to 1 (`F=1`), we can force a state where `offset >= T`. If we have `T` unexpired entries, the offset becomes `int(T / 1) = T`. A query with `OFFSET T` on a table with `T` rows will find nothing.\n\nThe following revised test case sets up this exact scenario (`MAX_ENTRIES = 2`, `CULL_FREQUENCY = 1`) and performs a sequence of `cache.set()` calls to deterministically trigger the bug.\n\n```python\nfrom django.core import management\nfrom django.core.cache import cache\nfrom django.db import connection\nfrom django.test import TransactionTestCase, override_settings\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n        \'LOCATION\': \'test_cache_table_cull_bug\',\n        \'OPTIONS\': {\n            \'MAX_ENTRIES\': 2,\n            \'CULL_FREQUENCY\': 1,\n        },\n    },\n})\nclass DBCacheCullBugTest(TransactionTestCase):\n    """\n    Tests for a TypeError in the database cache backend\'s _cull method.\n    """\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        super().setUp()\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def tearDown(self):\n        super().tearDown()\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\n            cursor.execute(f\'DROP TABLE {table_name}\')\n\n    def test_cull_with_cull_frequency_of_one(self):\n        """\n        _cull() fails with a TypeError when CULL_FREQUENCY is 1 and the cache\n        is full.\n        """\n        # With MAX_ENTRIES = 2, these three calls fill the cache just enough\n        # so the next call to set() will trigger a cull.\n        cache.set(\'key1\', 1)\n        cache.set(\'key2\', 1)\n        cache.set(\'key3\', 1)\n        # At this point, the table has 3 rows.\n\n        # This fourth call to set() triggers the bug.\n        # 1. _base_set() sees 3 rows, which is > MAX_ENTRIES (2), so it calls _cull().\n        # 2. _cull() counts 3 unexpired entries.\n        # 3. The offset for the culling query is calculated as int(3 / 1) = 3.\n        # 4. The culling query runs with OFFSET 3 on a table with 3 rows,\n        #    returning no results.\n        # 5. cursor.fetchone() returns None, and accessing fetchone()[0] raises\n        #    a TypeError.\n        cache.set(\'key4\', 1)\n\n        # This assertion is the minimal check. It will only be reached if the\n        # bug is fixed and the cache.set() call above does not crash.\n        self.assertEqual(cache.get(\'key4\'), 1)\n\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 42969, 'candidates_token_count': 967, 'total_token_count': 50163, 'cached_content_token_count': 49856, 'prompt_tokens_details': [{'modality': 1, 'token_count': 50752}], 'cache_tokens_details': [{'modality': 1, 'token_count': 49856}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 967}], 'thoughts_token_count': 6227}, 'finish_reason': 'STOP', 'avg_logprobs': -1.029097800664103, 'model_name': 'gemini-2.5-pro'} id='run--f103d38b-64c2-4ff3-b022-d5a6880e6e16-0' usage_metadata={'input_tokens': 42969, 'output_tokens': 967, 'total_tokens': 50163, 'input_token_details': {'cache_read': 49856}, 'output_token_details': {'reasoning': 6227}}
2025-10-06 14:30:26,609 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from django.core import management\\nfrom django.core.cache import cache\\nfrom django.db import connection\\nfrom django.test import TransactionTestCase, override_settings\\n\\n\\n@override_settings(CACHES={\\n    \'default\': {\\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\\n        \'LOCATION\': \'test_cache_table_cull_bug\',\\n        \'OPTIONS\': {\\n            \'MAX_ENTRIES\': 2,\\n            \'CULL_FREQUENCY\': 1,\\n        },\\n    },\\n})\\nclass DBCacheCullBugTest(TransactionTestCase):\\n    \\"\\"\\"\\n    Tests for a TypeError in the database cache backend\'s _cull method.\\n    \\"\\"\\"\\n    available_apps = [\'cache\']\\n\\n    def setUp(self):\\n        super().setUp()\\n        management.call_command(\'createcachetable\', verbosity=0)\\n\\n    def tearDown(self):\\n        super().tearDown()\\n        with connection.cursor() as cursor:\\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\\n            cursor.execute(f\'DROP TABLE {table_name}\')\\n\\n    def test_cull_with_cull_frequency_of_one(self):\\n        \\"\\"\\"\\n        _cull() fails with a TypeError when CULL_FREQUENCY is 1 and the cache\\n        is full.\\n        \\"\\"\\"\\n        # With MAX_ENTRIES = 2, these three calls fill the cache just enough\\n        # so the next call to set() will trigger a cull.\\n        cache.set(\'key1\', 1)\\n        cache.set(\'key2\', 1)\\n        cache.set(\'key3\', 1)\\n        # At this point, the table has 3 rows.\\n\\n        # This fourth call to set() triggers the bug.\\n        # 1. _base_set() sees 3 rows, which is > MAX_ENTRIES (2), so it calls _cull().\\n        # 2. _cull() counts 3 unexpired entries.\\n        # 3. The offset for the culling query is calculated as int(3 / 1) = 3.\\n        # 4. The culling query runs with OFFSET 3 on a table with 3 rows,\\n        #    returning no results.\\n        # 5. cursor.fetchone() returns None, and accessing fetchone()[0] raises\\n        #    a TypeError.\\n        cache.set(\'key4\', 1)\\n\\n        # This assertion is the minimal check. It will only be reached if the\\n        # bug is fixed and the cache.set() call above does not crash.\\n        self.assertEqual(cache.get(\'key4\'), 1)\\n", "relative_path": "tests/cache/test_db_cache_cull_bug.py"}'}, '__gemini_function_call_thought_signatures__': {'cf2e0688-0745-4970-9df3-e5abcfb9ed4c': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 54882, 'candidates_token_count': 626, 'total_token_count': 57276, 'prompt_tokens_details': [{'modality': 1, 'token_count': 54882}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 626}], 'thoughts_token_count': 1768, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.25621715216590957, 'model_name': 'gemini-2.5-pro'} id='run--802d9beb-1ac3-4c6f-9221-b9541a23d938-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'from django.core import management\nfrom django.core.cache import cache\nfrom django.db import connection\nfrom django.test import TransactionTestCase, override_settings\n\n\n@override_settings(CACHES={\n    \'default\': {\n        \'BACKEND\': \'django.core.cache.backends.db.DatabaseCache\',\n        \'LOCATION\': \'test_cache_table_cull_bug\',\n        \'OPTIONS\': {\n            \'MAX_ENTRIES\': 2,\n            \'CULL_FREQUENCY\': 1,\n        },\n    },\n})\nclass DBCacheCullBugTest(TransactionTestCase):\n    """\n    Tests for a TypeError in the database cache backend\'s _cull method.\n    """\n    available_apps = [\'cache\']\n\n    def setUp(self):\n        super().setUp()\n        management.call_command(\'createcachetable\', verbosity=0)\n\n    def tearDown(self):\n        super().tearDown()\n        with connection.cursor() as cursor:\n            table_name = connection.ops.quote_name(\'test_cache_table_cull_bug\')\n            cursor.execute(f\'DROP TABLE {table_name}\')\n\n    def test_cull_with_cull_frequency_of_one(self):\n        """\n        _cull() fails with a TypeError when CULL_FREQUENCY is 1 and the cache\n        is full.\n        """\n        # With MAX_ENTRIES = 2, these three calls fill the cache just enough\n        # so the next call to set() will trigger a cull.\n        cache.set(\'key1\', 1)\n        cache.set(\'key2\', 1)\n        cache.set(\'key3\', 1)\n        # At this point, the table has 3 rows.\n\n        # This fourth call to set() triggers the bug.\n        # 1. _base_set() sees 3 rows, which is > MAX_ENTRIES (2), so it calls _cull().\n        # 2. _cull() counts 3 unexpired entries.\n        # 3. The offset for the culling query is calculated as int(3 / 1) = 3.\n        # 4. The culling query runs with OFFSET 3 on a table with 3 rows,\n        #    returning no results.\n        # 5. cursor.fetchone() returns None, and accessing fetchone()[0] raises\n        #    a TypeError.\n        cache.set(\'key4\', 1)\n\n        # This assertion is the minimal check. It will only be reached if the\n        # bug is fixed and the cache.set() call above does not crash.\n        self.assertEqual(cache.get(\'key4\'), 1)\n', 'relative_path': 'tests/cache/test_db_cache_cull_bug.py'}, 'id': 'cf2e0688-0745-4970-9df3-e5abcfb9ed4c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 54882, 'output_tokens': 626, 'total_tokens': 57276, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1768}}
2025-10-06 14:30:28,046 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='tests/cache/test_db_cache_cull_bug.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 55533, 'candidates_token_count': 15, 'total_token_count': 55548, 'cached_content_token_count': 54486, 'prompt_tokens_details': [{'modality': 1, 'token_count': 57299}], 'cache_tokens_details': [{'modality': 1, 'token_count': 54486}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 15}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -3.524600761011243e-05, 'model_name': 'gemini-2.5-pro'} id='run--8c414d7a-7d87-4906-b16c-969e74e032a4-0' usage_metadata={'input_tokens': 55533, 'output_tokens': 15, 'total_tokens': 55548, 'input_token_details': {'cache_read': 54486}}
2025-10-06 14:30:28,083 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/tests/cache/test_db_cache_cull_bug.py b/tests/cache/test_db_cache_cull_bug.py
new file mode 100644
index 0000000000..f3e077c30d
--- /dev/null
+++ b/tests/cache/test_db_cache_cull_bug.py
@@ -0,0 +1,57 @@
+from django.core import management
+from django.core.cache import cache
+from django.db import connection
+from django.test import TransactionTestCase, override_settings
+
+
+@override_settings(CACHES={
+    'default': {
+        'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
+        'LOCATION': 'test_cache_table_cull_bug',
+        'OPTIONS': {
+            'MAX_ENTRIES': 2,
+            'CULL_FREQUENCY': 1,
+        },
+    },
+})
+class DBCacheCullBugTest(TransactionTestCase):
+    """
+    Tests for a TypeError in the database cache backend's _cull method.
+    """
+    available_apps = ['cache']
+
+    def setUp(self):
+        super().setUp()
+        management.call_command('createcachetable', verbosity=0)
+
+    def tearDown(self):
+        super().tearDown()
+        with connection.cursor() as cursor:
+            table_name = connection.ops.quote_name('test_cache_table_cull_bug')
+            cursor.execute(f'DROP TABLE {table_name}')
+
+    def test_cull_with_cull_frequency_of_one(self):
+        """
+        _cull() fails with a TypeError when CULL_FREQUENCY is 1 and the cache
+        is full.
+        """
+        # With MAX_ENTRIES = 2, these three calls fill the cache just enough
+        # so the next call to set() will trigger a cull.
+        cache.set('key1', 1)
+        cache.set('key2', 1)
+        cache.set('key3', 1)
+        # At this point, the table has 3 rows.
+
+        # This fourth call to set() triggers the bug.
+        # 1. _base_set() sees 3 rows, which is > MAX_ENTRIES (2), so it calls _cull().
+        # 2. _cull() counts 3 unexpired entries.
+        # 3. The offset for the culling query is calculated as int(3 / 1) = 3.
+        # 4. The culling query runs with OFFSET 3 on a table with 3 rows,
+        #    returning no results.
+        # 5. cursor.fetchone() returns None, and accessing fetchone()[0] raises
+        #    a TypeError.
+        cache.set('key4', 1)
+
+        # This assertion is the minimal check. It will only be reached if the
+        # bug is fixed and the cache.set() call above does not crash.
+        self.assertEqual(cache.get('key4'), 1)

2025-10-06 14:30:28,084 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 14:30:28,119 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 14:30:28,119 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 14:30:28,369 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:30:28,369 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 27c09043da Refs #31670 -- Renamed whitelist argument and attribute of EmailValidator.

2025-10-06 14:30:28,369 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 14:30:28,470 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:30:28,470 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Removing tests/cache/test_db_cache_cull.py

2025-10-06 14:30:28,470 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 14:30:28,470 - thread-139660780025408.app.docker.base_container - INFO - Creating directory tests/cache in the container
2025-10-06 14:30:28,470 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p tests/cache
2025-10-06 14:30:28,571 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:30:28,571 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 14:30:28,571 - thread-139660780025408.app.docker.base_container - INFO - Updating tests/cache/test_db_cache_cull_bug.py in the container
2025-10-06 14:30:28,573 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 14:30:36,696 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python runtests.py cache.test_db_cache_cull_bug"}'}, '__gemini_function_call_thought_signatures__': {'69135b35-d8b1-4561-ac69-b5b69209e961': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 755, 'candidates_token_count': 20, 'total_token_count': 1553, 'prompt_tokens_details': [{'modality': 1, 'token_count': 755}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 20}], 'thoughts_token_count': 778, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -4.840155410766601, 'model_name': 'gemini-2.5-pro'} id='run--d95b5a6e-8558-4b17-b96c-edd0525ed3fe-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python runtests.py cache.test_db_cache_cull_bug'}, 'id': '69135b35-d8b1-4561-ac69-b5b69209e961', 'type': 'tool_call'}] usage_metadata={'input_tokens': 755, 'output_tokens': 20, 'total_tokens': 1553, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 778}}
2025-10-06 14:30:36,698 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python runtests.py cache.test_db_cache_cull_bug
2025-10-06 14:30:36,798 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 2
2025-10-06 14:30:36,799 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

python: can't open file 'runtests.py': [Errno 2] No such file or directory

2025-10-06 14:30:38,549 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls"}'}, '__gemini_function_call_thought_signatures__': {'8a4fe942-c21c-4df7-9cba-0644858d210e': 'CpcCAR/MhbZDDbZvV0K/knCRpZhJNgw7L27uZ7UtCxxPQfSLqbjCE1GbZis3xAdpkwE1nbTr1ItqYGVIagwFegiQHWMDoG8Nw33MIohD2QRKu6qQdhsNHuF3wJht9o0V1Q4hAgXcmxFyh+dGI4PH3mpDMx+Jw2PNfnrPsXLvOny7v4nnJSDkZQK0QmX6Hw5oPYc6h/DJk9jeWbTb3NP8jkVNwxyVPW7yinm8Ou1EfsVWlbWP4k/XKpT4Yz16B31xEQUIDEUfSrI9oAAYEIE0AVfeU41SD9cECp11pDPIMK7WSUMTECHydzi6YAfinkFrPqQgy+Rz7z2b9Z1HrJI3PgyomVESy/ruTVx7+YIK3BxM3PVTIHZuoQUD'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 805, 'candidates_token_count': 5, 'total_token_count': 878, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1581}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 5}], 'thoughts_token_count': 68, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.5340758323669434, 'model_name': 'gemini-2.5-pro'} id='run--e5308103-e12f-4438-811d-0f218a8a78c2-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls'}, 'id': '8a4fe942-c21c-4df7-9cba-0644858d210e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 805, 'output_tokens': 5, 'total_tokens': 878, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 68}}
2025-10-06 14:30:38,551 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls
2025-10-06 14:30:38,652 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:30:38,652 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

AUTHORS		  docs		js_tests	package.json  setup.py
CONTRIBUTING.rst  extras	LICENSE		README.rst    tests
django		  Gruntfile.js	LICENSE.python	scripts       tox.ini
Django.egg-info   INSTALL	MANIFEST.in	setup.cfg

2025-10-06 14:30:40,163 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "cat tox.ini"}'}, '__gemini_function_call_thought_signatures__': {'ac3df2ff-ca0f-4219-b716-dc5db5b772da': 'CuIBAR/MhbZqfGvF5yHE5MUFBrGKl6/7BWtBv5Rj2N9jWDCFHQBT8M8cqBeWX1rmfHgk+S60i0gvvWMkSPOsByhuBkXnrErO7XRrH70zqbC8Nz0RZXE9jpoDjufOup0/hhtYGRFDW4D6C+sPQb1waXth9Z3amiWMBR1zFCUmzEfNElXFmpvbCfW797bMlMg+MYNt62TrmQhTS1YPUtsOw54qH6b4Iv1nMI4gS45baZm7yb3f5P6X6Lk0Z3WT1yxGbzMIgIro4Tcm7ivhehjQG/r+4sEX317i8JW6F1YmxLShVepGUQ=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 883, 'candidates_token_count': 8, 'total_token_count': 949, 'cached_content_token_count': 1554, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1725}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1554}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 8}], 'thoughts_token_count': 58}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4872581958770752, 'model_name': 'gemini-2.5-pro'} id='run--82a08660-f00e-4e4a-9b34-5390d98a7471-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat tox.ini'}, 'id': 'ac3df2ff-ca0f-4219-b716-dc5db5b772da', 'type': 'tool_call'}] usage_metadata={'input_tokens': 883, 'output_tokens': 8, 'total_tokens': 949, 'input_token_details': {'cache_read': 1554}, 'output_token_details': {'reasoning': 58}}
2025-10-06 14:30:40,165 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: cat tox.ini
2025-10-06 14:30:40,265 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 14:30:40,266 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

# Tox (https://tox.readthedocs.io/) is a tool for running tests in multiple
# virtualenvs. This configuration file helps to run the test suite on all
# supported Python versions. To use it, "python -m pip install tox" and
# then run "tox" from this directory.

[tox]
skipsdist = true
envlist =
    py3
    flake8
    docs
    isort

# Add environment to use the default python3 installation
[testenv:py3]
basepython = python3

[testenv]
usedevelop = true
# OBJC_DISABLE_INITIALIZE_FORK_SAFETY fixes hung tests for MacOS users. (#30806)
passenv = DJANGO_SETTINGS_MODULE PYTHONPATH HOME DISPLAY OBJC_DISABLE_INITIALIZE_FORK_SAFETY
setenv =
    PYTHONDONTWRITEBYTECODE=1
deps =
    py{3,36,37,38}: -rtests/requirements/py3.txt
    postgres: -rtests/requirements/postgres.txt
    mysql: -rtests/requirements/mysql.txt
    oracle: -rtests/requirements/oracle.txt
changedir = tests
commands =
    {envpython} runtests.py {posargs}

[testenv:flake8]
basepython = python3
usedevelop = false
deps = flake8
changedir = {toxinidir}
commands = flake8 .

[testenv:docs]
basepython = python3
usedevelop = false
whitelist_externals =
    make
deps =
    Sphinx
    pyenchant
    sphinxcontrib-spelling
changedir = docs
commands =
    make spelling

[testenv:isort]
basepython = python3
usedevelop = false
deps = isort
changedir = {toxinidir}
commands = isort --recursive --check-only --diff django tests scripts

[testenv:javascript]
usedevelop = false
deps =
changedir = {toxinidir}
whitelist_externals = npm
commands =
    npm install
    npm test

2025-10-06 14:30:42,107 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py cache.test_db_cache_cull_bug"}'}, '__gemini_function_call_thought_signatures__': {'eacc2f11-d4f7-44c1-9036-1bb55bc6552e': 'CrsCAR/Mhbach8RQ9DGitw19MO17YDpkBa5D1aPxzlDnu4SUCDXHno9PHXaTpshpgipXexuxAiKLbDsBxd5Bfigl961154HdPIKWVZfgqUldegjsaSk00Oj34fwLbQBuDRsyQ/lwGnM/qQroxi+6GHpj4HqHWOwAMnveuwyl9JNMnkui2SapFNU7UG9ZtfGC0ze7PTC8abpE3I/BSn3Owl1u4rO4IleWGCGs6Sx7XAQ9aDNlBIpDZqrlw5ZiCFUB/9Uao+XXk8x3AYYyfU/SgkDHqY8CNwIHSjwKv4QRrRF9uzjKgP3V9BN7fzw6weO6r8QmJ2OMihr1Dr1XuopP2WewWpvW7QJcKHWcBp/lub0MOYM2mnSIpMLsng+k8Ewu5XA3PrLCA8BKBJCefVObxax1tAGkBn9pPq1bWK0K'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1371, 'candidates_token_count': 22, 'total_token_count': 1485, 'cached_content_token_count': 1598, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2269}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1598}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 22}], 'thoughts_token_count': 92}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1805713501843539, 'model_name': 'gemini-2.5-pro'} id='run--c0d170cd-72fc-4873-a929-71b850b47b75-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py cache.test_db_cache_cull_bug'}, 'id': 'eacc2f11-d4f7-44c1-9036-1bb55bc6552e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1371, 'output_tokens': 22, 'total_tokens': 1485, 'input_token_details': {'cache_read': 1598}, 'output_token_details': {'reasoning': 92}}
2025-10-06 14:30:42,109 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py cache.test_db_cache_cull_bug
2025-10-06 14:30:42,474 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 14:30:42,475 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Testing against Django installed in '/testbed/django' with up to 8 processes
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
E
======================================================================
ERROR: test_cull_with_cull_frequency_of_one (cache.test_db_cache_cull_bug.DBCacheCullBugTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/cache/test_db_cache_cull_bug.py", line 53, in test_cull_with_cull_frequency_of_one
    cache.set('key4', 1)
  File "/testbed/django/core/cache/backends/db.py", line 100, in set
    self._base_set('set', key, value, timeout)
  File "/testbed/django/core/cache/backends/db.py", line 132, in _base_set
    self._cull(db, cursor, now)
  File "/testbed/django/core/cache/backends/db.py", line 272, in _cull
    [cursor.fetchone()[0]])
TypeError: 'NoneType' object is not subscriptable

----------------------------------------------------------------------
Ran 1 test in 0.004s

FAILED (errors=1)
Destroying test database for alias 'default'...

2025-10-06 14:30:44,440 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='I have successfully reproduced the bug. Here is the output of the test command:\n' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py cache.test_db_cache_cull_bug"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1717, 'candidates_token_count': 39, 'total_token_count': 1825, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2705}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 39}], 'thoughts_token_count': 69, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16831120466574645, 'model_name': 'gemini-2.5-pro'} id='run--aee41a9f-98ae-4ef3-a53d-5e58cd211f12-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py cache.test_db_cache_cull_bug'}, 'id': '98730212-efe7-4282-b9d5-4ebdfab60444', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1717, 'output_tokens': 39, 'total_tokens': 1825, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 69}}
2025-10-06 14:30:44,442 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py cache.test_db_cache_cull_bug
2025-10-06 14:30:44,807 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 14:30:44,807 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Testing against Django installed in '/testbed/django' with up to 8 processes
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
E
======================================================================
ERROR: test_cull_with_cull_frequency_of_one (cache.test_db_cache_cull_bug.DBCacheCullBugTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/cache/test_db_cache_cull_bug.py", line 53, in test_cull_with_cull_frequency_of_one
    cache.set('key4', 1)
  File "/testbed/django/core/cache/backends/db.py", line 100, in set
    self._base_set('set', key, value, timeout)
  File "/testbed/django/core/cache/backends/db.py", line 132, in _base_set
    self._cull(db, cursor, now)
  File "/testbed/django/core/cache/backends/db.py", line 272, in _cull
    [cursor.fetchone()[0]])
TypeError: 'NoneType' object is not subscriptable

----------------------------------------------------------------------
Ran 1 test in 0.004s

FAILED (errors=1)
Destroying test database for alias 'default'...

2025-10-06 14:30:49,066 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='I have executed the test file `tests/cache/test_db_cache_cull_bug.py` and reproduced the bug. Here is the output:\n\n```\nTesting against Django installed in \'/testbed/django\' with up to 8 processes\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nE\n======================================================================\nERROR: test_cull_with_cull_frequency_of_one (cache.test_db_cache_cull_bug.DBCacheCullBugTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/cache/test_db_cache_cull_bug.py", line 53, in test_cull_with_cull_frequency_of_one\n    cache.set(\'key4\', 1)\n  File "/testbed/django/core/cache/backends/db.py", line 100, in set\n    self._base_set(\'set\', key, value, timeout)\n  File "/testbed/django/core/cache/backends/db.py", line 132, in _base_set\n    self._cull(db, cursor, now)\n  File "/testbed/django/core/cache/backends/db.py", line 272, in _cull\n    [cursor.fetchone()[0]])\nTypeError: \'NoneType\' object is not subscriptable\n\n----------------------------------------------------------------------\nRan 1 test in 0.004s\n\nFAILED (errors=1)\nDestroying test database for alias \'default\'...\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2080, 'candidates_token_count': 356, 'total_token_count': 2496, 'cached_content_token_count': 1632, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3068}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1632}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 356}], 'thoughts_token_count': 60}, 'finish_reason': 'STOP', 'avg_logprobs': -0.025544879141818272, 'model_name': 'gemini-2.5-pro'} id='run--cd2688b1-0204-4170-96f8-0851b6b370de-0' usage_metadata={'input_tokens': 2080, 'output_tokens': 356, 'total_tokens': 2496, 'input_token_details': {'cache_read': 1632}, 'output_token_details': {'reasoning': 60}}
2025-10-06 14:31:03,718 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='Testing against Django installed in \'/testbed/django\' with up to 8 processes\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nE\n======================================================================\nERROR: test_cull_with_cull_frequency_of_one (cache.test_db_cache_cull_bug.DBCacheCullBugTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/cache/test_db_cache_cull_bug.py", line 53, in test_cull_with_cull_frequency_of_one\n    cache.set(\'key4\', 1)\n  File "/testbed/django/core/cache/backends/db.py", line 100, in set\n    self._base_set(\'set\', key, value, timeout)\n  File "/testbed/django/core/cache/backends/db.py", line 132, in _base_set\n    self._cull(db, cursor, now)\n  File "/testbed/django/core/cache/backends/db.py", line 272, in _cull\n    [cursor.fetchone()[0]])\nTypeError: \'NoneType\' object is not subscriptable\n\n----------------------------------------------------------------------\nRan 1 test in 0.004s\n\nFAILED (errors=1)\nDestroying test database for alias \'default\'...\n' reproduced_bug_commands=['python tests/runtests.py cache.test_db_cache_cull_bug']
2025-10-06 14:31:03,719 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 14:31:03,719 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 14:31:03,819 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
