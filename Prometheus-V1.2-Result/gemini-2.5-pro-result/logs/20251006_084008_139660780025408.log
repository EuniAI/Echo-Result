2025-10-06 08:40:08,898 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmp665ojpli/matplotlib
2025-10-06 08:40:08,898 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 08:40:08,898 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.matplotlib_1776_matplotlib-24627:v1
2025-10-06 08:41:50,531 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_8f1b62262a
2025-10-06 08:41:50,536 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_8f1b62262a
2025-10-06 08:42:01,571 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 08:42:01,715 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 08:42:01,716 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 08:42:01,842 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:42:01,842 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 08:42:01,842 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 08:42:01,967 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:42:01,967 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 08:42:01,967 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 08:42:37,892 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:42:37,892 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
  Installing build dependencies ... [?25l- \ | / - done
[?25h  Checking if build backend supports build_editable ... [?25ldone
[?25h  Getting requirements to build editable ... [?25l- \ | done
[?25h  Preparing editable metadata (pyproject.toml) ... [?25l- \ done
[?25hRequirement already satisfied: contourpy>=1.0.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (1.1.0)
Requirement already satisfied: cycler>=0.10 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (0.11.0)
Requirement already satisfied: fonttools>=4.22.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (4.42.1)
Requirement already satisfied: kiwisolver>=1.0.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (1.4.5)
Requirement already satisfied: numpy>=1.19 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (1.25.2)
Requirement already satisfied: packaging>=20.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (23.1)
Requirement already satisfied: pillow>=6.2.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (10.0.0)
Requirement already satisfied: pyparsing>=2.3.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (3.0.9)
Requirement already satisfied: python-dateutil>=2.7 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (2.8.2)
Requirement already satisfied: setuptools_scm>=7 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from matplotlib==3.7.0.dev864+g9d22ab09d) (7.1.0)
Requirement already satisfied: six>=1.5 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from python-dateutil>=2.7->matplotlib==3.7.0.dev864+g9d22ab09d) (1.16.0)
Requirement already satisfied: setuptools in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from setuptools_scm>=7->matplotlib==3.7.0.dev864+g9d22ab09d) (68.1.2)
Requirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from setuptools_scm>=7->matplotlib==3.7.0.dev864+g9d22ab09d) (4.7.1)
Building wheels for collected packages: matplotlib
  Building editable for matplotlib (pyproject.toml) ... [?25l- \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - \ | / - done
[?25h  Created wheel for matplotlib: filename=matplotlib-3.7.0.dev864+g9d22ab09d-0.editable-cp311-cp311-linux_x86_64.whl size=23686 sha256=4719bf0626963b86bc2cddd2a4f5519a1b40f0531cb7a132fd55b1068f099474
  Stored in directory: /tmp/pip-ephem-wheel-cache-pmb4pvp3/wheels/49/5f/4f/01b7d31ea6ddac9643da788242d33e5fd3467d95d17b032c6b
Successfully built matplotlib
Installing collected packages: matplotlib
  Attempting uninstall: matplotlib
    Found existing installation: matplotlib 3.7.0.dev864+g9d22ab09d5
    Uninstalling matplotlib-3.7.0.dev864+g9d22ab09d5:
      Successfully uninstalled matplotlib-3.7.0.dev864+g9d22ab09d5
Successfully installed matplotlib-3.7.0.dev864+g9d22ab09d
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-06 08:42:37,937 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 08:42:37,937 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 08:42:37,938 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\ncla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists\n\nIssue description: \nmpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.\n\n```\nIn [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)\nNone\n\nIn [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)\nAxes(0.125,0.11;0.775x0.77)\n```\n\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 08:42:44,998 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified that the issue is related to the `cla()` and `clf()` methods not unsetting the `.axes` and `.figure` attributes of artists. I will now search for relevant test cases in `test_axes.py` and `test_figure.py` to find examples of how this functionality is currently tested. My search will focus on tests that involve clearing axes or figures and then asserting the state of the artists that were attached to them.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": ".cla(", "basename": "test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 22003, 'candidates_token_count': 121, 'total_token_count': 22667, 'prompt_tokens_details': [{'modality': 1, 'token_count': 22003}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 121}], 'thoughts_token_count': 543, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.47433755417500645, 'model_name': 'gemini-2.5-pro'} id='run--36c7f684-00f2-4e29-836c-9f319af57653-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': '.cla(', 'basename': 'test_axes.py'}, 'id': 'ed6a62d7-ae5c-45fd-b527-f458cfe01a24', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22003, 'output_tokens': 121, 'total_tokens': 22667, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 543}}
2025-10-06 08:42:49,158 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified three test cases in `test_axes.py` that use the `cla()` method, which is directly related to the issue. I will now read the entire `test_axes.py` file to get the full context of these tests, including imports and any helper functions. This will help me select the most relevant test cases to return to the user.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 23568, 'candidates_token_count': 101, 'total_token_count': 23922, 'cached_content_token_count': 21631, 'prompt_tokens_details': [{'modality': 1, 'token_count': 23568}], 'cache_tokens_details': [{'modality': 1, 'token_count': 21631}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 101}], 'thoughts_token_count': 253}, 'finish_reason': 'STOP', 'avg_logprobs': -0.541718322451752, 'model_name': 'gemini-2.5-pro'} id='run--38369f42-f0b5-4c08-82b0-8c6f369afb95-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_axes.py'}, 'id': '81ad2919-a472-468f-8aa9-98d3853479da', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23568, 'output_tokens': 101, 'total_tokens': 23922, 'input_token_details': {'cache_read': 21631}, 'output_token_details': {'reasoning': 253}}
2025-10-06 08:42:51,405 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have reviewed the `test_axes.py` file and found several test cases that use `cla()`. The most relevant ones appear to be `test_twinx_cla`, `test_inverted_cla`, and `test_subclass_clear_cla`. These tests check the state of the axes after `cla()` is called, which is similar to the bug report. I will now look for tests related to `clf()` in `test_figure.py` to see if there are any relevant tests there.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": ".clf(", "basename": "test_figure.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31596, 'candidates_token_count': 134, 'total_token_count': 31730, 'cached_content_token_count': 21677, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31596}], 'cache_tokens_details': [{'modality': 1, 'token_count': 21677}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 134}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11928204636075604, 'model_name': 'gemini-2.5-pro'} id='run--61477115-c3f4-4391-9a4c-74c88c011a5a-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': '.clf(', 'basename': 'test_figure.py'}, 'id': 'd4bca1a4-d0ff-4e12-99ce-4db9db796499', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31596, 'output_tokens': 134, 'total_tokens': 31730, 'input_token_details': {'cache_read': 21677}}
2025-10-06 08:42:53,519 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I see that there are no specific tests for `clf()` in `test_figure.py` that are relevant to the issue. I will now select the 5 most relevant test cases from `test_axes.py` and `test_figure.py` that I have found so far. The tests I have selected demonstrate how `cla()` and `clf()` are currently tested, and they provide a good starting point for writing a new test that addresses the bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_figure.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31760, 'candidates_token_count': 121, 'total_token_count': 31881, 'cached_content_token_count': 31504, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31760}], 'cache_tokens_details': [{'modality': 1, 'token_count': 31504}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 121}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1316609027957128, 'model_name': 'gemini-2.5-pro'} id='run--ddd9aa8e-4ed8-40c4-afc0-7c62c7fc6077-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_figure.py'}, 'id': '6fe391bb-2fea-433d-98b1-5bbc91ad1ce5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31760, 'output_tokens': 121, 'total_tokens': 31881, 'input_token_details': {'cache_read': 31504}}
2025-10-06 08:43:12,849 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content=['I have reviewed `test_figure.py` and found a relevant test, `test_clf_keyword`, which checks that an existing figure is cleared when `clear=True` is passed to `plt.figure()` or `plt.subplots()`. This is relevant to the reported bug because it demonstrates how the clearing of a figure is currently tested. I will now present the 5 most relevant tests that I have found. The other four tests are from `test_axes.py` and are `test_twinx_cla`, `test_inverted_cla`, `test_subclass_clear_cla`, and `test_axes_remove`. These tests are relevant because they show how the `cla()` method is used and tested in a variety of situations, including with twinned axes, inverted axes, and subclasses of `Axes`. They also demonstrate how to check that an artist has been removed from an axes.', "I have identified and selected five relevant test cases that demonstrate functionality similar to the reported bug. The search focused on tests within `test_axes.py` and `test_figure.py` that involve clearing axes or figures and asserting the state of artists. The selected tests showcase how `cla()` and `clf()` are currently tested, providing a solid foundation for creating a new test to address the issue of `.axes` and `.figure` attributes not being unset.\n\n- `test_clf_keyword` from `lib/matplotlib/tests/test_figure.py`\n- `test_twinx_cla` from `lib/matplotlib/tests/test_axes.py`\n- `test_inverted_cla` from `lib/matplotlib/tests/test_axes.py`\n- `test_subclass_clear_cla` from `lib/matplotlib/tests/test_axes.py`\n- `test_axes_remove` from `lib/matplotlib/tests/test_figure.py`\n\nThese test cases provide comprehensive coverage of the existing testing practices for similar functionality, including necessary imports, test setup, and assertions.\n\n### Test Case 1/5\n**File:** `lib/matplotlib/tests/test_figure.py`\n```python\nimport copy\nfrom datetime import datetime\nimport io\nfrom pathlib import Path\nimport pickle\nimport platform\nfrom threading import Timer\nfrom types import SimpleNamespace\nimport warnings\n\nimport numpy as np\nimport pytest\nfrom PIL import Image\n\nimport matplotlib as mpl\nfrom matplotlib import gridspec\nfrom matplotlib.testing.decorators import image_comparison, check_figures_equal\nfrom matplotlib.axes import Axes\nfrom matplotlib.figure import Figure, FigureBase\nfrom matplotlib.layout_engine import (ConstrainedLayoutEngine,\n                                      TightLayoutEngine,\n                                      PlaceHolderLayoutEngine)\nfrom matplotlib.ticker import AutoMinorLocator, FixedFormatter, ScalarFormatter\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\n\n\ndef test_clf_keyword():\n    # test if existing figure is cleared with figure() and subplots()\n    text1 = 'A fancy plot'\n    text2 = 'Really fancy!'\n\n    fig0 = plt.figure(num=1)\n    fig0.suptitle(text1)\n    assert [t.get_text() for t in fig0.texts] == [text1]\n\n    fig1 = plt.figure(num=1, clear=False)\n    fig1.text(0.5, 0.5, text2)\n    assert fig0 is fig1\n    assert [t.get_text() for t in fig1.texts] == [text1, text2]\n\n    fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n    assert fig0 is fig2\n    assert [t.get_text() for t in fig2.texts] == []\n\n```\n\n### Test Case 2/5\n**File:** `lib/matplotlib/tests/test_axes.py`\n```python\nimport contextlib\nfrom collections import namedtuple\nimport datetime\nfrom decimal import Decimal\nfrom functools import partial\nimport inspect\nimport io\nfrom itertools import product\nimport platform\nfrom types import SimpleNamespace\n\nimport dateutil.tz\n\nimport numpy as np\nfrom numpy import ma\nfrom cycler import cycler\nimport pytest\n\nimport matplotlib\nimport matplotlib as mpl\nfrom matplotlib import rc_context\nfrom matplotlib._api import MatplotlibDeprecationWarning\nimport matplotlib.colors as mcolors\nimport matplotlib.dates as mdates\nfrom matplotlib.figure import Figure\nfrom matplotlib.axes import Axes\nimport matplotlib.font_manager as mfont_manager\nimport matplotlib.markers as mmarkers\nimport matplotlib.patches as mpatches\nimport matplotlib.path as mpath\nfrom matplotlib.projections.geo import HammerAxes\nfrom matplotlib.projections.polar import PolarAxes\nimport matplotlib.pyplot as plt\nimport matplotlib.text as mtext\nimport matplotlib.ticker as mticker\nimport matplotlib.transforms as mtransforms\nimport mpl_toolkits.axisartist as AA\nfrom numpy.testing import (\n    assert_allclose, assert_array_equal, assert_array_almost_equal)\nfrom matplotlib.testing.decorators import (\n    image_comparison, check_figures_equal, remove_ticks_and_titles)\n\n\ndef test_twinx_cla():\n    fig, ax = plt.subplots()\n    ax2 = ax.twinx()\n    ax3 = ax2.twiny()\n    plt.draw()\n    assert not ax2.xaxis.get_visible()\n    assert not ax2.patch.get_visible()\n    ax2.cla()\n    ax3.cla()\n\n    assert not ax2.xaxis.get_visible()\n    assert not ax2.patch.get_visible()\n    assert ax2.yaxis.get_visible()\n\n    assert ax3.xaxis.get_visible()\n    assert not ax3.patch.get_visible()\n    assert not ax3.yaxis.get_visible()\n\n    assert ax.xaxis.get_visible()\n    assert ax.patch.get_visible()\n    assert ax.yaxis.get_visible()\n\n```\n\n### Test Case 3/5\n**File:** `lib/matplotlib/tests/test_axes.py`\n```python\nimport contextlib\nfrom collections import namedtuple\nimport datetime\nfrom decimal import Decimal\nfrom functools import partial\nimport inspect\nimport io\nfrom itertools import product\nimport platform\nfrom types import SimpleNamespace\n\nimport dateutil.tz\n\nimport numpy as np\nfrom numpy import ma\nfrom cycler import cycler\nimport pytest\n\nimport matplotlib\nimport matplotlib as mpl\nfrom matplotlib import rc_context\nfrom matplotlib._api import MatplotlibDeprecationWarning\nimport matplotlib.colors as mcolors\nimport matplotlib.dates as mdates\nfrom matplotlib.figure import Figure\nfrom matplotlib.axes import Axes\nimport matplotlib.font_manager as mfont_manager\nimport matplotlib.markers as mmarkers\nimport matplotlib.patches as mpatches\nimport matplotlib.path as mpath\nfrom matplotlib.projections.geo import HammerAxes\nfrom matplotlib.projections.polar import PolarAxes\nimport matplotlib.pyplot as plt\nimport matplotlib.text as mtext\nimport matplotlib.ticker as mticker\nimport matplotlib.transforms as mtransforms\nimport mpl_toolkits.axisartist as AA\nfrom numpy.testing import (\n    assert_allclose, assert_array_equal, assert_array_almost_equal)\nfrom matplotlib.testing.decorators import (\n    image_comparison, check_figures_equal, remove_ticks_and_titles)\n\n\ndef test_inverted_cla():\n    # GitHub PR #5450. Setting autoscale should reset\n    # axes to be non-inverted.\n    # plotting an image, then 1d graph, axis is now down\n    fig = plt.figure(0)\n    ax = fig.gca()\n    # 1. test that a new axis is not inverted per default\n    assert not ax.xaxis_inverted()\n    assert not ax.yaxis_inverted()\n    img = np.random.random((100, 100))\n    ax.imshow(img)\n    # 2. test that a image axis is inverted\n    assert not ax.xaxis_inverted()\n    assert ax.yaxis_inverted()\n    # 3. test that clearing and plotting a line, axes are\n    # not inverted\n    ax.cla()\n    x = np.linspace(0, 2*np.pi, 100)\n    ax.plot(x, np.cos(x))\n    assert not ax.xaxis_inverted()\n    assert not ax.yaxis_inverted()\n\n    # 4. autoscaling should not bring back axes to normal\n    ax.cla()\n    ax.imshow(img)\n    plt.autoscale()\n    assert not ax.xaxis_inverted()\n    assert ax.yaxis_inverted()\n\n    for ax in fig.axes:\n        ax.remove()\n    # 5. two shared axes. Inverting the leader axis should invert the shared\n    # axes; clearing the leader axis should bring axes in shared\n    # axes back to normal.\n    ax0 = plt.subplot(211)\n    ax1 = plt.subplot(212, sharey=ax0)\n    ax0.yaxis.set_inverted(True)\n    assert ax1.yaxis_inverted()\n    ax1.plot(x, np.cos(x))\n    ax0.cla()\n    assert not ax1.yaxis_inverted()\n    ax1.cla()\n    # 6. clearing the follower should not touch limits\n    ax0.imshow(img)\n    ax1.plot(x, np.cos(x))\n    ax1.cla()\n    assert ax.yaxis_inverted()\n\n    # clean up\n    plt.close(fig)\n\n```\n\n### Test Case 4/5\n**File:** `lib/matplotlib/tests/test_axes.py`\n```python\nimport contextlib\nfrom collections import namedtuple\nimport datetime\nfrom decimal import Decimal\nfrom functools import partial\nimport inspect\nimport io\nfrom itertools import product\nimport platform\nfrom types import SimpleNamespace\n\nimport dateutil.tz\n\nimport numpy as np\nfrom numpy import ma\nfrom cycler import cycler\nimport pytest\n\nimport matplotlib\nimport matplotlib as mpl\nfrom matplotlib import rc_context\nfrom matplotlib._api import MatplotlibDeprecationWarning\nimport matplotlib.colors as mcolors\nimport matplotlib.dates as mdates\nfrom matplotlib.figure import Figure\nfrom matplotlib.axes import Axes\nimport matplotlib.font_manager as mfont_manager\nimport matplotlib.markers as mmarkers\nimport matplotlib.patches as mpatches\nimport matplotlib.path as mpath\nfrom matplotlib.projections.geo import HammerAxes\nfrom matplotlib.projections.polar import PolarAxes\nimport matplotlib.pyplot as plt\nimport matplotlib.text as mtext\nimport matplotlib.ticker as mticker\nimport matplotlib.transforms as mtransforms\nimport mpl_toolkits.axisartist as AA\nfrom numpy.testing import (\n    assert_allclose, assert_array_equal, assert_array_almost_equal)\nfrom matplotlib.testing.decorators import (\n    image_comparison, check_figures_equal, remove_ticks_and_titles)\n\n\ndef test_subclass_clear_cla():\n    # Ensure that subclasses of Axes call cla/clear correctly.\n    # Note, we cannot use mocking here as we want to be sure that the\n    # superclass fallback does not recurse.\n\n    with pytest.warns(PendingDeprecationWarning,\n                      match='Overriding `Axes.cla`'):\n        class ClaAxes(Axes):\n            def cla(self):\n                nonlocal called\n                called = True\n\n    with pytest.warns(PendingDeprecationWarning,\n                      match='Overriding `Axes.cla`'):\n        class ClaSuperAxes(Axes):\n            def cla(self):\n                nonlocal called\n                called = True\n                super().cla()\n\n    class SubClaAxes(ClaAxes):\n        pass\n\n    class ClearAxes(Axes):\n        def clear(self):\n            nonlocal called\n            called = True\n\n    class ClearSuperAxes(Axes):\n        def clear(self):\n            nonlocal called\n            called = True\n            super().clear()\n\n    class SubClearAxes(ClearAxes):\n        pass\n\n    fig = Figure()\n    for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n                       ClearAxes, ClearSuperAxes, SubClearAxes]:\n        called = False\n        ax = axes_class(fig, [0, 0, 1, 1])\n        # Axes.__init__ has already called clear (which aliases to cla or is in\n        # the subclass).\n        assert called\n\n        called = False\n        ax.cla()\n        assert called\n```\n\n### Test Case 5/5\n**File:** `lib/matplotlib/tests/test_figure.py`\n```python\nimport copy\nfrom datetime import datetime\nimport io\nfrom pathlib import Path\nimport pickle\nimport platform\nfrom threading import Timer\nfrom types import SimpleNamespace\nimport warnings\n\nimport numpy as np\nimport pytest\nfrom PIL import Image\n\nimport matplotlib as mpl\nfrom matplotlib import gridspec\nfrom matplotlib.testing.decorators import image_comparison, check_figures_equal\nfrom matplotlib.axes import Axes\nfrom matplotlib.figure import Figure, FigureBase\nfrom matplotlib.layout_engine import (ConstrainedLayoutEngine,\n                                      TightLayoutEngine,\n                                      PlaceHolderLayoutEngine)\nfrom matplotlib.ticker import AutoMinorLocator, FixedFormatter, ScalarFormatter\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\n\n\ndef test_axes_remove():\n    fig, axs = plt.subplots(2, 2)\n    axs[-1, -1].remove()\n    for ax in axs.ravel()[:-1]:\n        assert ax in fig.axes\n    assert axs[-1, -1] not in fig.axes\n    assert len(fig.axes) == 3\n```"] additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 1811, 'end_index': 2222, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 2126, 'end_index': 2600, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 2603, 'end_index': 3146, 'uri': 'https://github.com/matplotlib/matplotlib', 'title': '', 'license_': ''}, {'start_index': 3237, 'end_index': 3576, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 3514, 'end_index': 3960, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 3900, 'end_index': 4250, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 4141, 'end_index': 4488, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 4493, 'end_index': 5032, 'uri': 'https://github.com/matplotlib/matplotlib', 'title': '', 'license_': ''}, {'start_index': 5119, 'end_index': 5458, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 5396, 'end_index': 5842, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 5782, 'end_index': 6132, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 6023, 'end_index': 6370, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 6375, 'end_index': 7273, 'uri': 'https://github.com/matplotlib/matplotlib', 'title': '', 'license_': ''}, {'start_index': 7133, 'end_index': 7574, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 7588, 'end_index': 7894, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 7979, 'end_index': 8318, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 8256, 'end_index': 8702, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 8642, 'end_index': 8992, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 8883, 'end_index': 9230, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 9235, 'end_index': 10661, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 10743, 'end_index': 11154, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}, {'start_index': 11058, 'end_index': 11532, 'uri': 'https://github.com/Steffie254/fraud1', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 39797, 'candidates_token_count': 3091, 'total_token_count': 42888, 'cached_content_token_count': 31593, 'prompt_tokens_details': [{'modality': 1, 'token_count': 39797}], 'cache_tokens_details': [{'modality': 1, 'token_count': 31593}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 3091}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.019084614482522976, 'model_name': 'gemini-2.5-pro'} id='run--45520649-0bac-40ca-99eb-003fe912b741-0' usage_metadata={'input_tokens': 39797, 'output_tokens': 3091, 'total_tokens': 42888, 'input_token_details': {'cache_read': 31593}}
2025-10-06 08:43:12,850 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 08:43:12,850 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_axes.py
Line number range: 490 - 538
Content:
def test_subclass_clear_cla():
    # Ensure that subclasses of Axes call cla/clear correctly.
    # Note, we cannot use mocking here as we want to be sure that the
    # superclass fallback does not recurse.

    with pytest.warns(PendingDeprecationWarning,
                      match='Overriding `Axes.cla`'):
        class ClaAxes(Axes):
            def cla(self):
                nonlocal called
                called = True

    with pytest.warns(PendingDeprecationWarning,
                      match='Overriding `Axes.cla`'):
        class ClaSuperAxes(Axes):
            def cla(self):
                nonlocal called
                called = True
                super().cla()

    class SubClaAxes(ClaAxes):
        pass

    class ClearAxes(Axes):
        def clear(self):
            nonlocal called
            called = True

    class ClearSuperAxes(Axes):
        def clear(self):
            nonlocal called
            called = True
            super().clear()

    class SubClearAxes(ClearAxes):
        pass

    fig = Figure()
    for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,
                       ClearAxes, ClearSuperAxes, SubClearAxes]:
        called = False
        ax = axes_class(fig, [0, 0, 1, 1])
        # Axes.__init__ has already called clear (which aliases to cla or is in
        # the subclass).
        assert called

        called = False
        ax.cla()
        assert called

File: lib/matplotlib/tests/test_axes.py
Line number range: 1 - 500
Content:
1. import contextlib
2. from collections import namedtuple
3. import datetime
4. from decimal import Decimal
5. from functools import partial
6. import inspect
7. import io
8. from itertools import product
9. import platform
10. from types import SimpleNamespace
11. 
12. import dateutil.tz
13. 
14. import numpy as np
15. from numpy import ma
16. from cycler import cycler
17. import pytest
18. 
19. import matplotlib
20. import matplotlib as mpl
21. from matplotlib import rc_context
22. from matplotlib._api import MatplotlibDeprecationWarning
23. import matplotlib.colors as mcolors
24. import matplotlib.dates as mdates
25. from matplotlib.figure import Figure
26. from matplotlib.axes import Axes
27. import matplotlib.font_manager as mfont_manager
28. import matplotlib.markers as mmarkers
29. import matplotlib.patches as mpatches
30. import matplotlib.path as mpath
31. from matplotlib.projections.geo import HammerAxes
32. from matplotlib.projections.polar import PolarAxes
33. import matplotlib.pyplot as plt
34. import matplotlib.text as mtext
35. import matplotlib.ticker as mticker
36. import matplotlib.transforms as mtransforms
37. import mpl_toolkits.axisartist as AA
38. from numpy.testing import (
39.     assert_allclose, assert_array_equal, assert_array_almost_equal)
40. from matplotlib.testing.decorators import (
41.     image_comparison, check_figures_equal, remove_ticks_and_titles)
42. 
43. # Note: Some test cases are run twice: once normally and once with labeled data
44. #       These two must be defined in the same test function or need to have
45. #       different baseline images to prevent race conditions when pytest runs
46. #       the tests with multiple threads.
47. 
48. 
49. @check_figures_equal(extensions=["png"])
50. def test_invisible_axes(fig_test, fig_ref):
51.     ax = fig_test.subplots()
52.     ax.set_visible(False)
53. 
54. 
55. def test_get_labels():
56.     fig, ax = plt.subplots()
57.     ax.set_xlabel('x label')
58.     ax.set_ylabel('y label')
59.     assert ax.get_xlabel() == 'x label'
60.     assert ax.get_ylabel() == 'y label'
61. 
62. 
63. def test_repr():
64.     fig, ax = plt.subplots()
65.     ax.set_label('label')
66.     ax.set_title('title')
67.     ax.set_xlabel('x')
68.     ax.set_ylabel('y')
69.     assert repr(ax) == (
70.         "<Axes: "
71.         "label='label', title={'center': 'title'}, xlabel='x', ylabel='y'>")
72. 
73. 
74. @check_figures_equal()
75. def test_label_loc_vertical(fig_test, fig_ref):
76.     ax = fig_test.subplots()
77.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
78.     ax.legend()
79.     ax.set_ylabel('Y Label', loc='top')
80.     ax.set_xlabel('X Label', loc='right')
81.     cbar = fig_test.colorbar(sc)
82.     cbar.set_label("Z Label", loc='top')
83. 
84.     ax = fig_ref.subplots()
85.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
86.     ax.legend()
87.     ax.set_ylabel('Y Label', y=1, ha='right')
88.     ax.set_xlabel('X Label', x=1, ha='right')
89.     cbar = fig_ref.colorbar(sc)
90.     cbar.set_label("Z Label", y=1, ha='right')
91. 
92. 
93. @check_figures_equal()
94. def test_label_loc_horizontal(fig_test, fig_ref):
95.     ax = fig_test.subplots()
96.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
97.     ax.legend()
98.     ax.set_ylabel('Y Label', loc='bottom')
99.     ax.set_xlabel('X Label', loc='left')
100.     cbar = fig_test.colorbar(sc, orientation='horizontal')
101.     cbar.set_label("Z Label", loc='left')
102. 
103.     ax = fig_ref.subplots()
104.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
105.     ax.legend()
106.     ax.set_ylabel('Y Label', y=0, ha='left')
107.     ax.set_xlabel('X Label', x=0, ha='left')
108.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
109.     cbar.set_label("Z Label", x=0, ha='left')
110. 
111. 
112. @check_figures_equal()
113. def test_label_loc_rc(fig_test, fig_ref):
114.     with matplotlib.rc_context({"xaxis.labellocation": "right",
115.                                 "yaxis.labellocation": "top"}):
116.         ax = fig_test.subplots()
117.         sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
118.         ax.legend()
119.         ax.set_ylabel('Y Label')
120.         ax.set_xlabel('X Label')
121.         cbar = fig_test.colorbar(sc, orientation='horizontal')
122.         cbar.set_label("Z Label")
123. 
124.     ax = fig_ref.subplots()
125.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
126.     ax.legend()
127.     ax.set_ylabel('Y Label', y=1, ha='right')
128.     ax.set_xlabel('X Label', x=1, ha='right')
129.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
130.     cbar.set_label("Z Label", x=1, ha='right')
131. 
132. 
133. def test_label_shift():
134.     fig, ax = plt.subplots()
135. 
136.     # Test label re-centering on x-axis
137.     ax.set_xlabel("Test label", loc="left")
138.     ax.set_xlabel("Test label", loc="center")
139.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
140.     ax.set_xlabel("Test label", loc="right")
141.     assert ax.xaxis.get_label().get_horizontalalignment() == "right"
142.     ax.set_xlabel("Test label", loc="center")
143.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
144. 
145.     # Test label re-centering on y-axis
146.     ax.set_ylabel("Test label", loc="top")
147.     ax.set_ylabel("Test label", loc="center")
148.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
149.     ax.set_ylabel("Test label", loc="bottom")
150.     assert ax.yaxis.get_label().get_horizontalalignment() == "left"
151.     ax.set_ylabel("Test label", loc="center")
152.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
153. 
154. 
155. @check_figures_equal(extensions=["png"])
156. def test_acorr(fig_test, fig_ref):
157.     np.random.seed(19680801)
158.     Nx = 512
159.     x = np.random.normal(0, 1, Nx).cumsum()
160.     maxlags = Nx-1
161. 
162.     ax_test = fig_test.subplots()
163.     ax_test.acorr(x, maxlags=maxlags)
164. 
165.     ax_ref = fig_ref.subplots()
166.     # Normalized autocorrelation
167.     norm_auto_corr = np.correlate(x, x, mode="full")/np.dot(x, x)
168.     lags = np.arange(-maxlags, maxlags+1)
169.     norm_auto_corr = norm_auto_corr[Nx-1-maxlags:Nx+maxlags]
170.     ax_ref.vlines(lags, [0], norm_auto_corr)
171.     ax_ref.axhline(y=0, xmin=0, xmax=1)
172. 
173. 
174. @check_figures_equal(extensions=["png"])
175. def test_spy(fig_test, fig_ref):
176.     np.random.seed(19680801)
177.     a = np.ones(32 * 32)
178.     a[:16 * 32] = 0
179.     np.random.shuffle(a)
180.     a = a.reshape((32, 32))
181. 
182.     axs_test = fig_test.subplots(2)
183.     axs_test[0].spy(a)
184.     axs_test[1].spy(a, marker=".", origin="lower")
185. 
186.     axs_ref = fig_ref.subplots(2)
187.     axs_ref[0].imshow(a, cmap="gray_r", interpolation="nearest")
188.     axs_ref[0].xaxis.tick_top()
189.     axs_ref[1].plot(*np.nonzero(a)[::-1], ".", markersize=10)
190.     axs_ref[1].set(
191.         aspect=1, xlim=axs_ref[0].get_xlim(), ylim=axs_ref[0].get_ylim()[::-1])
192.     for ax in axs_ref:
193.         ax.xaxis.set_ticks_position("both")
194. 
195. 
196. def test_spy_invalid_kwargs():
197.     fig, ax = plt.subplots()
198.     for unsupported_kw in [{'interpolation': 'nearest'},
199.                            {'marker': 'o', 'linestyle': 'solid'}]:
200.         with pytest.raises(TypeError):
201.             ax.spy(np.eye(3, 3), **unsupported_kw)
202. 
203. 
204. @check_figures_equal(extensions=["png"])
205. def test_matshow(fig_test, fig_ref):
206.     mpl.style.use("mpl20")
207.     a = np.random.rand(32, 32)
208.     fig_test.add_subplot().matshow(a)
209.     ax_ref = fig_ref.add_subplot()
210.     ax_ref.imshow(a)
211.     ax_ref.xaxis.tick_top()
212.     ax_ref.xaxis.set_ticks_position('both')
213. 
214. 
215. @image_comparison(['formatter_ticker_001',
216.                    'formatter_ticker_002',
217.                    'formatter_ticker_003',
218.                    'formatter_ticker_004',
219.                    'formatter_ticker_005',
220.                    ])
221. def test_formatter_ticker():
222.     import matplotlib.testing.jpl_units as units
223.     units.register()
224. 
225.     # This should affect the tick size.  (Tests issue #543)
226.     matplotlib.rcParams['lines.markeredgewidth'] = 30
227. 
228.     # This essentially test to see if user specified labels get overwritten
229.     # by the auto labeler functionality of the axes.
230.     xdata = [x*units.sec for x in range(10)]
231.     ydata1 = [(1.5*y - 0.5)*units.km for y in range(10)]
232.     ydata2 = [(1.75*y - 1.0)*units.km for y in range(10)]
233. 
234.     ax = plt.figure().subplots()
235.     ax.set_xlabel("x-label 001")
236. 
237.     ax = plt.figure().subplots()
238.     ax.set_xlabel("x-label 001")
239.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
240. 
241.     ax = plt.figure().subplots()
242.     ax.set_xlabel("x-label 001")
243.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
244.     ax.set_xlabel("x-label 003")
245. 
246.     ax = plt.figure().subplots()
247.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
248.     ax.plot(xdata, ydata2, color='green', xunits="hour")
249.     ax.set_xlabel("x-label 004")
250. 
251.     # See SF bug 2846058
252.     # https://sourceforge.net/tracker/?func=detail&aid=2846058&group_id=80706&atid=560720
253.     ax = plt.figure().subplots()
254.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
255.     ax.plot(xdata, ydata2, color='green', xunits="hour")
256.     ax.set_xlabel("x-label 005")
257.     ax.autoscale_view()
258. 
259. 
260. def test_funcformatter_auto_formatter():
261.     def _formfunc(x, pos):
262.         return ''
263. 
264.     ax = plt.figure().subplots()
265. 
266.     assert ax.xaxis.isDefault_majfmt
267.     assert ax.xaxis.isDefault_minfmt
268.     assert ax.yaxis.isDefault_majfmt
269.     assert ax.yaxis.isDefault_minfmt
270. 
271.     ax.xaxis.set_major_formatter(_formfunc)
272. 
273.     assert not ax.xaxis.isDefault_majfmt
274.     assert ax.xaxis.isDefault_minfmt
275.     assert ax.yaxis.isDefault_majfmt
276.     assert ax.yaxis.isDefault_minfmt
277. 
278.     targ_funcformatter = mticker.FuncFormatter(_formfunc)
279. 
280.     assert isinstance(ax.xaxis.get_major_formatter(),
281.                       mticker.FuncFormatter)
282. 
283.     assert ax.xaxis.get_major_formatter().func == targ_funcformatter.func
284. 
285. 
286. def test_strmethodformatter_auto_formatter():
287.     formstr = '{x}_{pos}'
288. 
289.     ax = plt.figure().subplots()
290. 
291.     assert ax.xaxis.isDefault_majfmt
292.     assert ax.xaxis.isDefault_minfmt
293.     assert ax.yaxis.isDefault_majfmt
294.     assert ax.yaxis.isDefault_minfmt
295. 
296.     ax.yaxis.set_minor_formatter(formstr)
297. 
298.     assert ax.xaxis.isDefault_majfmt
299.     assert ax.xaxis.isDefault_minfmt
300.     assert ax.yaxis.isDefault_majfmt
301.     assert not ax.yaxis.isDefault_minfmt
302. 
303.     targ_strformatter = mticker.StrMethodFormatter(formstr)
304. 
305.     assert isinstance(ax.yaxis.get_minor_formatter(),
306.                       mticker.StrMethodFormatter)
307. 
308.     assert ax.yaxis.get_minor_formatter().fmt == targ_strformatter.fmt
309. 
310. 
311. @image_comparison(["twin_axis_locators_formatters"])
312. def test_twin_axis_locators_formatters():
313.     vals = np.linspace(0, 1, num=5, endpoint=True)
314.     locs = np.sin(np.pi * vals / 2.0)
315. 
316.     majl = plt.FixedLocator(locs)
317.     minl = plt.FixedLocator([0.1, 0.2, 0.3])
318. 
319.     fig = plt.figure()
320.     ax1 = fig.add_subplot(1, 1, 1)
321.     ax1.plot([0.1, 100], [0, 1])
322.     ax1.yaxis.set_major_locator(majl)
323.     ax1.yaxis.set_minor_locator(minl)
324.     ax1.yaxis.set_major_formatter(plt.FormatStrFormatter('%08.2lf'))
325.     ax1.yaxis.set_minor_formatter(plt.FixedFormatter(['tricks', 'mind',
326.                                                       'jedi']))
327. 
328.     ax1.xaxis.set_major_locator(plt.LinearLocator())
329.     ax1.xaxis.set_minor_locator(plt.FixedLocator([15, 35, 55, 75]))
330.     ax1.xaxis.set_major_formatter(plt.FormatStrFormatter('%05.2lf'))
331.     ax1.xaxis.set_minor_formatter(plt.FixedFormatter(['c', '3', 'p', 'o']))
332.     ax1.twiny()
333.     ax1.twinx()
334. 
335. 
336. def test_twinx_cla():
337.     fig, ax = plt.subplots()
338.     ax2 = ax.twinx()
339.     ax3 = ax2.twiny()
340.     plt.draw()
341.     assert not ax2.xaxis.get_visible()
342.     assert not ax2.patch.get_visible()
343.     ax2.cla()
344.     ax3.cla()
345. 
346.     assert not ax2.xaxis.get_visible()
347.     assert not ax2.patch.get_visible()
348.     assert ax2.yaxis.get_visible()
349. 
350.     assert ax3.xaxis.get_visible()
351.     assert not ax3.patch.get_visible()
352.     assert not ax3.yaxis.get_visible()
353. 
354.     assert ax.xaxis.get_visible()
355.     assert ax.patch.get_visible()
356.     assert ax.yaxis.get_visible()
357. 
358. 
359. @pytest.mark.parametrize('twin', ('x', 'y'))
360. @check_figures_equal(extensions=['png'], tol=0.19)
361. def test_twin_logscale(fig_test, fig_ref, twin):
362.     twin_func = f'twin{twin}'  # test twinx or twiny
363.     set_scale = f'set_{twin}scale'
364.     x = np.arange(1, 100)
365. 
366.     # Change scale after twinning.
367.     ax_test = fig_test.add_subplot(2, 1, 1)
368.     ax_twin = getattr(ax_test, twin_func)()
369.     getattr(ax_test, set_scale)('log')
370.     ax_twin.plot(x, x)
371. 
372.     # Twin after changing scale.
373.     ax_test = fig_test.add_subplot(2, 1, 2)
374.     getattr(ax_test, set_scale)('log')
375.     ax_twin = getattr(ax_test, twin_func)()
376.     ax_twin.plot(x, x)
377. 
378.     for i in [1, 2]:
379.         ax_ref = fig_ref.add_subplot(2, 1, i)
380.         getattr(ax_ref, set_scale)('log')
381.         ax_ref.plot(x, x)
382. 
383.         # This is a hack because twinned Axes double-draw the frame.
384.         # Remove this when that is fixed.
385.         Path = matplotlib.path.Path
386.         fig_ref.add_artist(
387.             matplotlib.patches.PathPatch(
388.                 Path([[0, 0], [0, 1],
389.                       [0, 1], [1, 1],
390.                       [1, 1], [1, 0],
391.                       [1, 0], [0, 0]],
392.                      [Path.MOVETO, Path.LINETO] * 4),
393.                 transform=ax_ref.transAxes,
394.                 facecolor='none',
395.                 edgecolor=mpl.rcParams['axes.edgecolor'],
396.                 linewidth=mpl.rcParams['axes.linewidth'],
397.                 capstyle='projecting'))
398. 
399.     remove_ticks_and_titles(fig_test)
400.     remove_ticks_and_titles(fig_ref)
401. 
402. 
403. @image_comparison(['twin_autoscale.png'])
404. def test_twinx_axis_scales():
405.     x = np.array([0, 0.5, 1])
406.     y = 0.5 * x
407.     x2 = np.array([0, 1, 2])
408.     y2 = 2 * x2
409. 
410.     fig = plt.figure()
411.     ax = fig.add_axes((0, 0, 1, 1), autoscalex_on=False, autoscaley_on=False)
412.     ax.plot(x, y, color='blue', lw=10)
413. 
414.     ax2 = plt.twinx(ax)
415.     ax2.plot(x2, y2, 'r--', lw=5)
416. 
417.     ax.margins(0, 0)
418.     ax2.margins(0, 0)
419. 
420. 
421. def test_twin_inherit_autoscale_setting():
422.     fig, ax = plt.subplots()
423.     ax_x_on = ax.twinx()
424.     ax.set_autoscalex_on(False)
425.     ax_x_off = ax.twinx()
426. 
427.     assert ax_x_on.get_autoscalex_on()
428.     assert not ax_x_off.get_autoscalex_on()
429. 
430.     ax_y_on = ax.twiny()
431.     ax.set_autoscaley_on(False)
432.     ax_y_off = ax.twiny()
433. 
434.     assert ax_y_on.get_autoscaley_on()
435.     assert not ax_y_off.get_autoscaley_on()
436. 
437. 
438. def test_inverted_cla():
439.     # GitHub PR #5450. Setting autoscale should reset
440.     # axes to be non-inverted.
441.     # plotting an image, then 1d graph, axis is now down
442.     fig = plt.figure(0)
443.     ax = fig.gca()
444.     # 1. test that a new axis is not inverted per default
445.     assert not ax.xaxis_inverted()
446.     assert not ax.yaxis_inverted()
447.     img = np.random.random((100, 100))
448.     ax.imshow(img)
449.     # 2. test that a image axis is inverted
450.     assert not ax.xaxis_inverted()
451.     assert ax.yaxis_inverted()
452.     # 3. test that clearing and plotting a line, axes are
453.     # not inverted
454.     ax.cla()
455.     x = np.linspace(0, 2*np.pi, 100)
456.     ax.plot(x, np.cos(x))
457.     assert not ax.xaxis_inverted()
458.     assert not ax.yaxis_inverted()
459. 
460.     # 4. autoscaling should not bring back axes to normal
461.     ax.cla()
462.     ax.imshow(img)
463.     plt.autoscale()
464.     assert not ax.xaxis_inverted()
465.     assert ax.yaxis_inverted()
466. 
467.     for ax in fig.axes:
468.         ax.remove()
469.     # 5. two shared axes. Inverting the leader axis should invert the shared
470.     # axes; clearing the leader axis should bring axes in shared
471.     # axes back to normal.
472.     ax0 = plt.subplot(211)
473.     ax1 = plt.subplot(212, sharey=ax0)
474.     ax0.yaxis.set_inverted(True)
475.     assert ax1.yaxis_inverted()
476.     ax1.plot(x, np.cos(x))
477.     ax0.cla()
478.     assert not ax1.yaxis_inverted()
479.     ax1.cla()
480.     # 6. clearing the follower should not touch limits
481.     ax0.imshow(img)
482.     ax1.plot(x, np.cos(x))
483.     ax1.cla()
484.     assert ax.yaxis_inverted()
485. 
486.     # clean up
487.     plt.close(fig)
488. 
489. 
490. def test_subclass_clear_cla():
491.     # Ensure that subclasses of Axes call cla/clear correctly.
492.     # Note, we cannot use mocking here as we want to be sure that the
493.     # superclass fallback does not recurse.
494. 
495.     with pytest.warns(PendingDeprecationWarning,
496.                       match='Overriding `Axes.cla`'):
497.         class ClaAxes(Axes):
498.             def cla(self):
499.                 nonlocal called
500.                 called = True

File: lib/matplotlib/tests/test_figure.py
Line number range: 1 - 500
Content:
1. import copy
2. from datetime import datetime
3. import io
4. from pathlib import Path
5. import pickle
6. import platform
7. from threading import Timer
8. from types import SimpleNamespace
9. import warnings
10. 
11. import numpy as np
12. import pytest
13. from PIL import Image
14. 
15. import matplotlib as mpl
16. from matplotlib import gridspec
17. from matplotlib.testing.decorators import image_comparison, check_figures_equal
18. from matplotlib.axes import Axes
19. from matplotlib.figure import Figure, FigureBase
20. from matplotlib.layout_engine import (ConstrainedLayoutEngine,
21.                                       TightLayoutEngine,
22.                                       PlaceHolderLayoutEngine)
23. from matplotlib.ticker import AutoMinorLocator, FixedFormatter, ScalarFormatter
24. import matplotlib.pyplot as plt
25. import matplotlib.dates as mdates
26. 
27. 
28. @image_comparison(['figure_align_labels'], extensions=['png', 'svg'],
29.                   tol=0 if platform.machine() == 'x86_64' else 0.01)
30. def test_align_labels():
31.     fig = plt.figure(layout='tight')
32.     gs = gridspec.GridSpec(3, 3)
33. 
34.     ax = fig.add_subplot(gs[0, :2])
35.     ax.plot(np.arange(0, 1e6, 1000))
36.     ax.set_ylabel('Ylabel0 0')
37.     ax = fig.add_subplot(gs[0, -1])
38.     ax.plot(np.arange(0, 1e4, 100))
39. 
40.     for i in range(3):
41.         ax = fig.add_subplot(gs[1, i])
42.         ax.set_ylabel('YLabel1 %d' % i)
43.         ax.set_xlabel('XLabel1 %d' % i)
44.         if i in [0, 2]:
45.             ax.xaxis.set_label_position("top")
46.             ax.xaxis.tick_top()
47.         if i == 0:
48.             for tick in ax.get_xticklabels():
49.                 tick.set_rotation(90)
50.         if i == 2:
51.             ax.yaxis.set_label_position("right")
52.             ax.yaxis.tick_right()
53. 
54.     for i in range(3):
55.         ax = fig.add_subplot(gs[2, i])
56.         ax.set_xlabel(f'XLabel2 {i}')
57.         ax.set_ylabel(f'YLabel2 {i}')
58. 
59.         if i == 2:
60.             ax.plot(np.arange(0, 1e4, 10))
61.             ax.yaxis.set_label_position("right")
62.             ax.yaxis.tick_right()
63.             for tick in ax.get_xticklabels():
64.                 tick.set_rotation(90)
65. 
66.     fig.align_labels()
67. 
68. 
69. def test_align_labels_stray_axes():
70.     fig, axs = plt.subplots(2, 2)
71.     for nn, ax in enumerate(axs.flat):
72.         ax.set_xlabel('Boo')
73.         ax.set_xlabel('Who')
74.         ax.plot(np.arange(4)**nn, np.arange(4)**nn)
75.     fig.align_ylabels()
76.     fig.align_xlabels()
77.     fig.draw_without_rendering()
78.     xn = np.zeros(4)
79.     yn = np.zeros(4)
80.     for nn, ax in enumerate(axs.flat):
81.         yn[nn] = ax.xaxis.label.get_position()[1]
82.         xn[nn] = ax.yaxis.label.get_position()[0]
83.     np.testing.assert_allclose(xn[:2], xn[2:])
84.     np.testing.assert_allclose(yn[::2], yn[1::2])
85. 
86.     fig, axs = plt.subplots(2, 2, constrained_layout=True)
87.     for nn, ax in enumerate(axs.flat):
88.         ax.set_xlabel('Boo')
89.         ax.set_xlabel('Who')
90.         pc = ax.pcolormesh(np.random.randn(10, 10))
91.     fig.colorbar(pc, ax=ax)
92.     fig.align_ylabels()
93.     fig.align_xlabels()
94.     fig.draw_without_rendering()
95.     xn = np.zeros(4)
96.     yn = np.zeros(4)
97.     for nn, ax in enumerate(axs.flat):
98.         yn[nn] = ax.xaxis.label.get_position()[1]
99.         xn[nn] = ax.yaxis.label.get_position()[0]
100.     np.testing.assert_allclose(xn[:2], xn[2:])
101.     np.testing.assert_allclose(yn[::2], yn[1::2])
102. 
103. 
104. def test_figure_label():
105.     # pyplot figure creation, selection, and closing with label/number/instance
106.     plt.close('all')
107.     fig_today = plt.figure('today')
108.     plt.figure(3)
109.     plt.figure('tomorrow')
110.     plt.figure()
111.     plt.figure(0)
112.     plt.figure(1)
113.     plt.figure(3)
114.     assert plt.get_fignums() == [0, 1, 3, 4, 5]
115.     assert plt.get_figlabels() == ['', 'today', '', 'tomorrow', '']
116.     plt.close(10)
117.     plt.close()
118.     plt.close(5)
119.     plt.close('tomorrow')
120.     assert plt.get_fignums() == [0, 1]
121.     assert plt.get_figlabels() == ['', 'today']
122.     plt.figure(fig_today)
123.     assert plt.gcf() == fig_today
124.     with pytest.raises(ValueError):
125.         plt.figure(Figure())
126. 
127. 
128. def test_fignum_exists():
129.     # pyplot figure creation, selection and closing with fignum_exists
130.     plt.figure('one')
131.     plt.figure(2)
132.     plt.figure('three')
133.     plt.figure()
134.     assert plt.fignum_exists('one')
135.     assert plt.fignum_exists(2)
136.     assert plt.fignum_exists('three')
137.     assert plt.fignum_exists(4)
138.     plt.close('one')
139.     plt.close(4)
140.     assert not plt.fignum_exists('one')
141.     assert not plt.fignum_exists(4)
142. 
143. 
144. def test_clf_keyword():
145.     # test if existing figure is cleared with figure() and subplots()
146.     text1 = 'A fancy plot'
147.     text2 = 'Really fancy!'
148. 
149.     fig0 = plt.figure(num=1)
150.     fig0.suptitle(text1)
151.     assert [t.get_text() for t in fig0.texts] == [text1]
152. 
153.     fig1 = plt.figure(num=1, clear=False)
154.     fig1.text(0.5, 0.5, text2)
155.     assert fig0 is fig1
156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]
157. 
158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)
159.     assert fig0 is fig2
160.     assert [t.get_text() for t in fig2.texts] == []
161. 
162. 
163. @image_comparison(['figure_today'])
164. def test_figure():
165.     # named figure support
166.     fig = plt.figure('today')
167.     ax = fig.add_subplot()
168.     ax.set_title(fig.get_label())
169.     ax.plot(np.arange(5))
170.     # plot red line in a different figure.
171.     plt.figure('tomorrow')
172.     plt.plot([0, 1], [1, 0], 'r')
173.     # Return to the original; make sure the red line is not there.
174.     plt.figure('today')
175.     plt.close('tomorrow')
176. 
177. 
178. @image_comparison(['figure_legend'])
179. def test_figure_legend():
180.     fig, axs = plt.subplots(2)
181.     axs[0].plot([0, 1], [1, 0], label='x', color='g')
182.     axs[0].plot([0, 1], [0, 1], label='y', color='r')
183.     axs[0].plot([0, 1], [0.5, 0.5], label='y', color='k')
184. 
185.     axs[1].plot([0, 1], [1, 0], label='_y', color='r')
186.     axs[1].plot([0, 1], [0, 1], label='z', color='b')
187.     fig.legend()
188. 
189. 
190. def test_gca():
191.     fig = plt.figure()
192. 
193.     # test that gca() picks up Axes created via add_axes()
194.     ax0 = fig.add_axes([0, 0, 1, 1])
195.     assert fig.gca() is ax0
196. 
197.     # test that gca() picks up Axes created via add_subplot()
198.     ax1 = fig.add_subplot(111)
199.     assert fig.gca() is ax1
200. 
201.     # add_axes on an existing Axes should not change stored order, but will
202.     # make it current.
203.     fig.add_axes(ax0)
204.     assert fig.axes == [ax0, ax1]
205.     assert fig.gca() is ax0
206. 
207.     # sca() should not change stored order of Axes, which is order added.
208.     fig.sca(ax0)
209.     assert fig.axes == [ax0, ax1]
210. 
211.     # add_subplot on an existing Axes should not change stored order, but will
212.     # make it current.
213.     fig.add_subplot(ax1)
214.     assert fig.axes == [ax0, ax1]
215.     assert fig.gca() is ax1
216. 
217. 
218. def test_add_subplot_subclass():
219.     fig = plt.figure()
220.     fig.add_subplot(axes_class=Axes)
221.     with pytest.raises(ValueError):
222.         fig.add_subplot(axes_class=Axes, projection="3d")
223.     with pytest.raises(ValueError):
224.         fig.add_subplot(axes_class=Axes, polar=True)
225.     with pytest.raises(ValueError):
226.         fig.add_subplot(projection="3d", polar=True)
227.     with pytest.raises(TypeError):
228.         fig.add_subplot(projection=42)
229. 
230. 
231. def test_add_subplot_invalid():
232.     fig = plt.figure()
233.     with pytest.raises(ValueError,
234.                        match='Number of columns must be a positive integer'):
235.         fig.add_subplot(2, 0, 1)
236.     with pytest.raises(ValueError,
237.                        match='Number of rows must be a positive integer'):
238.         fig.add_subplot(0, 2, 1)
239.     with pytest.raises(ValueError, match='num must be 1 <= num <= 4'):
240.         fig.add_subplot(2, 2, 0)
241.     with pytest.raises(ValueError, match='num must be 1 <= num <= 4'):
242.         fig.add_subplot(2, 2, 5)
243. 
244.     with pytest.raises(ValueError, match='must be a three-digit integer'):
245.         fig.add_subplot(42)
246.     with pytest.raises(ValueError, match='must be a three-digit integer'):
247.         fig.add_subplot(1000)
248. 
249.     with pytest.raises(TypeError, match='takes 1 or 3 positional arguments '
250.                                         'but 2 were given'):
251.         fig.add_subplot(2, 2)
252.     with pytest.raises(TypeError, match='takes 1 or 3 positional arguments '
253.                                         'but 4 were given'):
254.         fig.add_subplot(1, 2, 3, 4)
255.     with pytest.raises(ValueError,
256.                        match="Number of rows must be a positive integer, "
257.                              "not '2'"):
258.         fig.add_subplot('2', 2, 1)
259.     with pytest.raises(ValueError,
260.                        match='Number of columns must be a positive integer, '
261.                              'not 2.0'):
262.         fig.add_subplot(2, 2.0, 1)
263.     _, ax = plt.subplots()
264.     with pytest.raises(ValueError,
265.                        match='The Axes must have been created in the '
266.                              'present figure'):
267.         fig.add_subplot(ax)
268. 
269. 
270. @image_comparison(['figure_suptitle'])
271. def test_suptitle():
272.     fig, _ = plt.subplots()
273.     fig.suptitle('hello', color='r')
274.     fig.suptitle('title', color='g', rotation=30)
275. 
276. 
277. def test_suptitle_fontproperties():
278.     fig, ax = plt.subplots()
279.     fps = mpl.font_manager.FontProperties(size='large', weight='bold')
280.     txt = fig.suptitle('fontprops title', fontproperties=fps)
281.     assert txt.get_fontsize() == fps.get_size_in_points()
282.     assert txt.get_weight() == fps.get_weight()
283. 
284. 
285. @image_comparison(['alpha_background'],
286.                   # only test png and svg. The PDF output appears correct,
287.                   # but Ghostscript does not preserve the background color.
288.                   extensions=['png', 'svg'],
289.                   savefig_kwarg={'facecolor': (0, 1, 0.4),
290.                                  'edgecolor': 'none'})
291. def test_alpha():
292.     # We want an image which has a background color and an alpha of 0.4.
293.     fig = plt.figure(figsize=[2, 1])
294.     fig.set_facecolor((0, 1, 0.4))
295.     fig.patch.set_alpha(0.4)
296.     fig.patches.append(mpl.patches.CirclePolygon(
297.         [20, 20], radius=15, alpha=0.6, facecolor='red'))
298. 
299. 
300. def test_too_many_figures():
301.     with pytest.warns(RuntimeWarning):
302.         for i in range(mpl.rcParams['figure.max_open_warning'] + 1):
303.             plt.figure()
304. 
305. 
306. def test_iterability_axes_argument():
307. 
308.     # This is a regression test for matplotlib/matplotlib#3196. If one of the
309.     # arguments returned by _as_mpl_axes defines __getitem__ but is not
310.     # iterable, this would raise an exception. This is because we check
311.     # whether the arguments are iterable, and if so we try and convert them
312.     # to a tuple. However, the ``iterable`` function returns True if
313.     # __getitem__ is present, but some classes can define __getitem__ without
314.     # being iterable. The tuple conversion is now done in a try...except in
315.     # case it fails.
316. 
317.     class MyAxes(Axes):
318.         def __init__(self, *args, myclass=None, **kwargs):
319.             Axes.__init__(self, *args, **kwargs)
320. 
321.     class MyClass:
322. 
323.         def __getitem__(self, item):
324.             if item != 'a':
325.                 raise ValueError("item should be a")
326. 
327.         def _as_mpl_axes(self):
328.             return MyAxes, {'myclass': self}
329. 
330.     fig = plt.figure()
331.     fig.add_subplot(1, 1, 1, projection=MyClass())
332.     plt.close(fig)
333. 
334. 
335. def test_set_fig_size():
336.     fig = plt.figure()
337. 
338.     # check figwidth
339.     fig.set_figwidth(5)
340.     assert fig.get_figwidth() == 5
341. 
342.     # check figheight
343.     fig.set_figheight(1)
344.     assert fig.get_figheight() == 1
345. 
346.     # check using set_size_inches
347.     fig.set_size_inches(2, 4)
348.     assert fig.get_figwidth() == 2
349.     assert fig.get_figheight() == 4
350. 
351.     # check using tuple to first argument
352.     fig.set_size_inches((1, 3))
353.     assert fig.get_figwidth() == 1
354.     assert fig.get_figheight() == 3
355. 
356. 
357. def test_axes_remove():
358.     fig, axs = plt.subplots(2, 2)
359.     axs[-1, -1].remove()
360.     for ax in axs.ravel()[:-1]:
361.         assert ax in fig.axes
362.     assert axs[-1, -1] not in fig.axes
363.     assert len(fig.axes) == 3
364. 
365. 
366. def test_figaspect():
367.     w, h = plt.figaspect(np.float64(2) / np.float64(1))
368.     assert h / w == 2
369.     w, h = plt.figaspect(2)
370.     assert h / w == 2
371.     w, h = plt.figaspect(np.zeros((1, 2)))
372.     assert h / w == 0.5
373.     w, h = plt.figaspect(np.zeros((2, 2)))
374.     assert h / w == 1
375. 
376. 
377. @pytest.mark.parametrize('which', ['both', 'major', 'minor'])
378. def test_autofmt_xdate(which):
379.     date = ['3 Jan 2013', '4 Jan 2013', '5 Jan 2013', '6 Jan 2013',
380.             '7 Jan 2013', '8 Jan 2013', '9 Jan 2013', '10 Jan 2013',
381.             '11 Jan 2013', '12 Jan 2013', '13 Jan 2013', '14 Jan 2013']
382. 
383.     time = ['16:44:00', '16:45:00', '16:46:00', '16:47:00', '16:48:00',
384.             '16:49:00', '16:51:00', '16:52:00', '16:53:00', '16:55:00',
385.             '16:56:00', '16:57:00']
386. 
387.     angle = 60
388.     minors = [1, 2, 3, 4, 5, 6, 7]
389. 
390.     x = mdates.datestr2num(date)
391.     y = mdates.datestr2num(time)
392. 
393.     fig, ax = plt.subplots()
394. 
395.     ax.plot(x, y)
396.     ax.yaxis_date()
397.     ax.xaxis_date()
398. 
399.     ax.xaxis.set_minor_locator(AutoMinorLocator(2))
400.     with warnings.catch_warnings():
401.         warnings.filterwarnings(
402.             'ignore',
403.             'FixedFormatter should only be used together with FixedLocator')
404.         ax.xaxis.set_minor_formatter(FixedFormatter(minors))
405. 
406.     fig.autofmt_xdate(0.2, angle, 'right', which)
407. 
408.     if which in ('both', 'major'):
409.         for label in fig.axes[0].get_xticklabels(False, 'major'):
410.             assert int(label.get_rotation()) == angle
411. 
412.     if which in ('both', 'minor'):
413.         for label in fig.axes[0].get_xticklabels(True, 'minor'):
414.             assert int(label.get_rotation()) == angle
415. 
416. 
417. @mpl.style.context('default')
418. def test_change_dpi():
419.     fig = plt.figure(figsize=(4, 4))
420.     fig.draw_without_rendering()
421.     assert fig.canvas.renderer.height == 400
422.     assert fig.canvas.renderer.width == 400
423.     fig.dpi = 50
424.     fig.draw_without_rendering()
425.     assert fig.canvas.renderer.height == 200
426.     assert fig.canvas.renderer.width == 200
427. 
428. 
429. @pytest.mark.parametrize('width, height', [
430.     (1, np.nan),
431.     (-1, 1),
432.     (np.inf, 1)
433. ])
434. def test_invalid_figure_size(width, height):
435.     with pytest.raises(ValueError):
436.         plt.figure(figsize=(width, height))
437. 
438.     fig = plt.figure()
439.     with pytest.raises(ValueError):
440.         fig.set_size_inches(width, height)
441. 
442. 
443. def test_invalid_figure_add_axes():
444.     fig = plt.figure()
445.     with pytest.raises(TypeError,
446.                        match="missing 1 required positional argument: 'rect'"):
447.         fig.add_axes()
448. 
449.     with pytest.raises(ValueError):
450.         fig.add_axes((.1, .1, .5, np.nan))
451. 
452.     with pytest.raises(TypeError, match="multiple values for argument 'rect'"):
453.         fig.add_axes([0, 0, 1, 1], rect=[0, 0, 1, 1])
454. 
455.     _, ax = plt.subplots()
456.     with pytest.raises(ValueError,
457.                        match="The Axes must have been created in the present "
458.                              "figure"):
459.         fig.add_axes(ax)
460. 
461. 
462. def test_subplots_shareax_loglabels():
463.     fig, axs = plt.subplots(2, 2, sharex=True, sharey=True, squeeze=False)
464.     for ax in axs.flat:
465.         ax.plot([10, 20, 30], [10, 20, 30])
466. 
467.     ax.set_yscale("log")
468.     ax.set_xscale("log")
469. 
470.     for ax in axs[0, :]:
471.         assert 0 == len(ax.xaxis.get_ticklabels(which='both'))
472. 
473.     for ax in axs[1, :]:
474.         assert 0 < len(ax.xaxis.get_ticklabels(which='both'))
475. 
476.     for ax in axs[:, 1]:
477.         assert 0 == len(ax.yaxis.get_ticklabels(which='both'))
478. 
479.     for ax in axs[:, 0]:
480.         assert 0 < len(ax.yaxis.get_ticklabels(which='both'))
481. 
482. 
483. def test_savefig():
484.     fig = plt.figure()
485.     msg = r"savefig\(\) takes 2 positional arguments but 3 were given"
486.     with pytest.raises(TypeError, match=msg):
487.         fig.savefig("fname1.png", "fname2.png")
488. 
489. 
490. def test_savefig_warns():
491.     fig = plt.figure()
492.     for format in ['png', 'pdf', 'svg', 'tif', 'jpg']:
493.         with pytest.raises(TypeError):
494.             fig.savefig(io.BytesIO(), format=format, non_existent_kwarg=True)
495. 
496. 
497. def test_savefig_backend():
498.     fig = plt.figure()
499.     # Intentionally use an invalid module name.
500.     with pytest.raises(ModuleNotFoundError, match="No module named '@absent'"):


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 08:44:23,596 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="This test is highly relevant because it directly calls `cla()` on an axis and then asserts that the state of the axis (specifically, its inverted status) is reset to the default. This mirrors the bug report's scenario where `cla()` is expected to reset an artist's state (its `.axes` attribute) but fails to do so. It demonstrates the pattern of 'plot -> cla -> assert state'.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=438, end_line=488), ContextOutput(reasoning='This test is relevant as it examines the side effects of calling `cla()` on an `Axes` object, in this case a twinned axis. It asserts that properties like the visibility of the axis patch and labels are correctly reset after `cla()` is called. This is analogous to the bug, which is about `cla()` failing to correctly reset the properties of the artists it contains.', relative_path='lib/matplotlib/tests/test_axes.py', start_line=336, end_line=358), ContextOutput(reasoning='This test is relevant to the `clf()` part of the issue title. It tests that clearing a figure via `plt.subplots(clear=True)` removes artists (specifically `Figure.texts`). This is a direct parallel to the bug report, where `cla()` is expected to remove artists from the axes and update their state accordingly. This test confirms the expected behavior for a clearing operation at the figure level.', relative_path='lib/matplotlib/tests/test_figure.py', start_line=144, end_line=161), ContextOutput(reasoning="The bug report contrasts the behavior of `cla()` with `artist.remove()`. This test case, while testing `ax.remove()` instead of `artist.remove()`, is conceptually similar. It tests the removal of a child object (an `Axes`) from its parent (a `Figure`) and asserts that the parent's list of children is correctly updated. This is analogous to an artist being deparented from its `Axes`.", relative_path='lib/matplotlib/tests/test_figure.py', start_line=357, end_line=364), ContextOutput(reasoning="This test is relevant because it focuses on the machinery of `cla()` and `clear()` in `Axes` subclasses. It ensures that these methods are being called correctly, which is a prerequisite for them behaving correctly. While it doesn't test the state of artists within the axes, it provides an example of how the `cla` method itself is tested, which is pertinent to a bug in `cla`'s behavior.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=490, end_line=538)]
2025-10-06 08:44:23,599 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='lib/matplotlib/tests/test_axes.py', content='438. def test_inverted_cla():\n439.     # GitHub PR #5450. Setting autoscale should reset\n440.     # axes to be non-inverted.\n441.     # plotting an image, then 1d graph, axis is now down\n442.     fig = plt.figure(0)\n443.     ax = fig.gca()\n444.     # 1. test that a new axis is not inverted per default\n445.     assert not ax.xaxis_inverted()\n446.     assert not ax.yaxis_inverted()\n447.     img = np.random.random((100, 100))\n448.     ax.imshow(img)\n449.     # 2. test that a image axis is inverted\n450.     assert not ax.xaxis_inverted()\n451.     assert ax.yaxis_inverted()\n452.     # 3. test that clearing and plotting a line, axes are\n453.     # not inverted\n454.     ax.cla()\n455.     x = np.linspace(0, 2*np.pi, 100)\n456.     ax.plot(x, np.cos(x))\n457.     assert not ax.xaxis_inverted()\n458.     assert not ax.yaxis_inverted()\n459. \n460.     # 4. autoscaling should not bring back axes to normal\n461.     ax.cla()\n462.     ax.imshow(img)\n463.     plt.autoscale()\n464.     assert not ax.xaxis_inverted()\n465.     assert ax.yaxis_inverted()\n466. \n467.     for ax in fig.axes:\n468.         ax.remove()\n469.     # 5. two shared axes. Inverting the leader axis should invert the shared\n470.     # axes; clearing the leader axis should bring axes in shared\n471.     # axes back to normal.\n472.     ax0 = plt.subplot(211)\n473.     ax1 = plt.subplot(212, sharey=ax0)\n474.     ax0.yaxis.set_inverted(True)\n475.     assert ax1.yaxis_inverted()\n476.     ax1.plot(x, np.cos(x))\n477.     ax0.cla()\n478.     assert not ax1.yaxis_inverted()\n479.     ax1.cla()\n480.     # 6. clearing the follower should not touch limits\n481.     ax0.imshow(img)\n482.     ax1.plot(x, np.cos(x))\n483.     ax1.cla()\n484.     assert ax.yaxis_inverted()\n485. \n486.     # clean up\n487.     plt.close(fig)\n488. ', start_line_number=438, end_line_number=488), Context(relative_path='lib/matplotlib/tests/test_axes.py', content='336. def test_twinx_cla():\n337.     fig, ax = plt.subplots()\n338.     ax2 = ax.twinx()\n339.     ax3 = ax2.twiny()\n340.     plt.draw()\n341.     assert not ax2.xaxis.get_visible()\n342.     assert not ax2.patch.get_visible()\n343.     ax2.cla()\n344.     ax3.cla()\n345. \n346.     assert not ax2.xaxis.get_visible()\n347.     assert not ax2.patch.get_visible()\n348.     assert ax2.yaxis.get_visible()\n349. \n350.     assert ax3.xaxis.get_visible()\n351.     assert not ax3.patch.get_visible()\n352.     assert not ax3.yaxis.get_visible()\n353. \n354.     assert ax.xaxis.get_visible()\n355.     assert ax.patch.get_visible()\n356.     assert ax.yaxis.get_visible()\n357. \n358. ', start_line_number=336, end_line_number=358), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="144. def test_clf_keyword():\n145.     # test if existing figure is cleared with figure() and subplots()\n146.     text1 = 'A fancy plot'\n147.     text2 = 'Really fancy!'\n148. \n149.     fig0 = plt.figure(num=1)\n150.     fig0.suptitle(text1)\n151.     assert [t.get_text() for t in fig0.texts] == [text1]\n152. \n153.     fig1 = plt.figure(num=1, clear=False)\n154.     fig1.text(0.5, 0.5, text2)\n155.     assert fig0 is fig1\n156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]\n157. \n158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n159.     assert fig0 is fig2\n160.     assert [t.get_text() for t in fig2.texts] == []\n161. ", start_line_number=144, end_line_number=161), Context(relative_path='lib/matplotlib/tests/test_figure.py', content='357. def test_axes_remove():\n358.     fig, axs = plt.subplots(2, 2)\n359.     axs[-1, -1].remove()\n360.     for ax in axs.ravel()[:-1]:\n361.         assert ax in fig.axes\n362.     assert axs[-1, -1] not in fig.axes\n363.     assert len(fig.axes) == 3\n364. ', start_line_number=357, end_line_number=364), Context(relative_path='lib/matplotlib/tests/test_axes.py', content="490. def test_subclass_clear_cla():\n491.     # Ensure that subclasses of Axes call cla/clear correctly.\n492.     # Note, we cannot use mocking here as we want to be sure that the\n493.     # superclass fallback does not recurse.\n494. \n495.     with pytest.warns(PendingDeprecationWarning,\n496.                       match='Overriding `Axes.cla`'):\n497.         class ClaAxes(Axes):\n498.             def cla(self):\n499.                 nonlocal called\n500.                 called = True\n501. \n502.     with pytest.warns(PendingDeprecationWarning,\n503.                       match='Overriding `Axes.cla`'):\n504.         class ClaSuperAxes(Axes):\n505.             def cla(self):\n506.                 nonlocal called\n507.                 called = True\n508.                 super().cla()\n509. \n510.     class SubClaAxes(ClaAxes):\n511.         pass\n512. \n513.     class ClearAxes(Axes):\n514.         def clear(self):\n515.             nonlocal called\n516.             called = True\n517. \n518.     class ClearSuperAxes(Axes):\n519.         def clear(self):\n520.             nonlocal called\n521.             called = True\n522.             super().clear()\n523. \n524.     class SubClearAxes(ClearAxes):\n525.         pass\n526. \n527.     fig = Figure()\n528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:\n530.         called = False\n531.         ax = axes_class(fig, [0, 0, 1, 1])\n532.         # Axes.__init__ has already called clear (which aliases to cla or is in\n533.         # the subclass).\n534.         assert called\n535. \n536.         called = False\n537.         ax.cla()\n538.         assert called", start_line_number=490, end_line_number=538)]
2025-10-06 08:44:23,599 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 08:44:23,599 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   └── deploy-docs.sh
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildsdist.yml
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       └── tests.yml
├── .lgtm.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   └── codespell-ignore-words.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── markers
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   └── function.rst
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23573-AL.rst
|   |   |   |   ├── 23579-AL.rst
|   |   |   |   ├── 23710-ES.rst
|   |   |   |   ├── 24062-tb.rst
|   |   |   |   ├── 24132-GL.rst
|   |   |   |   ├── 24189-JB.rst
|   |   |   |   └── 24570-GL.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23449-SS.rst
|   |   |   |   ├── 23720-RS.rst
|   |   |   |   ├── 23735-ES.rst
|   |   |   |   ├── 23824-OG.rst
|   |   |   |   ├── 24000-TH.rst
|   |   |   |   ├── 24013-TH.rst
|   |   |   |   ├── 24088-JMK.rst
|   |   |   |   ├── 24140-AL.rst
|   |   |   |   ├── 24144-AL.rst
|   |   |   |   ├── 24198-AL.rst
|   |   |   |   ├── 24208-AL.rst
|   |   |   |   ├── 24220-AL.rst
|   |   |   |   ├── 24221-AL.rst
|   |   |   |   ├── 24224-OG.rst
|   |   |   |   ├── 24240-OG.rst
|   |   |   |   ├── 24305-AL.rst
|   |   |   |   ├── 24455-AL.rst
|   |   |   |   └── 24577-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23683-AL.rst
|   |   |   |   └── 24257-AL.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24125-OG.rst
|   |   |       ├── 24128-OG.rst
|   |   |       ├── 24129-OG.rst
|   |   |       ├── 24251-OG.rst
|   |   |       ├── 24253-OG.rst
|   |   |       ├── 24257-AL.rst
|   |   |       ├── 24355-OG.rst
|   |   |       ├── 24356-OG.rst
|   |   |       └── 24624-AL.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.6.0.rst
|   |   ├── projections_api.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── textpath_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contributing.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── documenting_mpl.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── maintainer_workflow.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── explain
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── fonts.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   ├── performance.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_pane_color_rcparams.rst
|       |   ├── 3d_plot_aspects_adjustable_keyword.rst
|       |   ├── 3d_plot_pan_zoom.rst
|       |   ├── README.rst
|       |   ├── bar_label_formatting.rst
|       |   ├── colorbar_has_location_argument.rst
|       |   ├── imshow_extent_units.rst
|       |   ├── polar_errorbar_caps.rst
|       |   ├── rgba_pcolormesh.rst
|       |   ├── shade_poly3dcollection.rst
|       |   ├── show_source_links_directive_option.rst
|       |   ├── styles_from_packages.rst
|       |   └── view_current_axis_format.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   └── whats_new_3.6.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── examples
|   ├── README.txt
|   ├── animation
|   |   ├── README.txt
|   |   ├── animate_decay.py
|   |   ├── animated_histogram.py
|   |   ├── animation_demo.py
|   |   ├── bayes_update.py
|   |   ├── double_pendulum.py
|   |   ├── dynamic_image.py
|   |   ├── frame_grabbing_sgskip.py
|   |   ├── multiple_axes.py
|   |   ├── pause_resume.py
|   |   ├── rain.py
|   |   ├── random_walk.py
|   |   ├── simple_anim.py
|   |   ├── simple_scatter.py
|   |   ├── strip_chart.py
|   |   └── unchained.py
|   ├── axes_grid1
|   |   ├── README.txt
|   |   ├── demo_anchored_direction_arrows.py
|   |   ├── demo_axes_divider.py
|   |   ├── demo_axes_grid.py
|   |   ├── demo_axes_grid2.py
|   |   ├── demo_axes_hbox_divider.py
|   |   ├── demo_axes_rgb.py
|   |   ├── demo_colorbar_of_inset_axes.py
|   |   ├── demo_colorbar_with_axes_divider.py
|   |   ├── demo_colorbar_with_inset_locator.py
|   |   ├── demo_edge_colorbar.py
|   |   ├── demo_fixed_size_axes.py
|   |   ├── demo_imagegrid_aspect.py
|   |   ├── inset_locator_demo.py
|   |   ├── inset_locator_demo2.py
|   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   ├── parasite_simple.py
|   |   ├── parasite_simple2.py
|   |   ├── scatter_hist_locatable_axes.py
|   |   ├── simple_anchored_artists.py
|   |   ├── simple_axes_divider1.py
|   |   ├── simple_axes_divider3.py
|   |   ├── simple_axesgrid.py
|   |   ├── simple_axesgrid2.py
|   |   ├── simple_axisline4.py
|   |   └── simple_colorbar.py
|   ├── axisartist
|   |   ├── README.txt
|   |   ├── axis_direction.py
|   |   ├── demo_axis_direction.py
|   |   ├── demo_axisline_style.py
|   |   ├── demo_curvelinear_grid.py
|   |   ├── demo_curvelinear_grid2.py
|   |   ├── demo_floating_axes.py
|   |   ├── demo_floating_axis.py
|   |   ├── demo_parasite_axes.py
|   |   ├── demo_parasite_axes2.py
|   |   ├── demo_ticklabel_alignment.py
|   |   ├── demo_ticklabel_direction.py
|   |   ├── simple_axis_direction01.py
|   |   ├── simple_axis_direction03.py
|   |   ├── simple_axis_pad.py
|   |   ├── simple_axisartist1.py
|   |   ├── simple_axisline.py
|   |   └── simple_axisline3.py
|   ├── color
|   |   ├── README.txt
|   |   ├── color_by_yvalue.py
|   |   ├── color_cycle_default.py
|   |   ├── color_demo.py
|   |   ├── colorbar_basics.py
|   |   ├── colormap_reference.py
|   |   ├── custom_cmap.py
|   |   └── named_colors.py
|   ├── event_handling
|   |   ├── README.txt
|   |   ├── close_event.py
|   |   ├── coords_demo.py
|   |   ├── cursor_demo.py
|   |   ├── data_browser.py
|   |   ├── figure_axes_enter_leave.py
|   |   ├── ginput_manual_clabel_sgskip.py
|   |   ├── image_slices_viewer.py
|   |   ├── keypress_demo.py
|   |   ├── lasso_demo.py
|   |   ├── legend_picking.py
|   |   ├── looking_glass.py
|   |   ├── path_editor.py
|   |   ├── pick_event_demo.py
|   |   ├── pick_event_demo2.py
|   |   ├── poly_editor.py
|   |   ├── pong_sgskip.py
|   |   ├── resample.py
|   |   ├── timers.py
|   |   ├── trifinder_event_demo.py
|   |   ├── viewlims.py
|   |   └── zoom_window.py
|   ├── images_contours_and_fields
|   |   ├── README.txt
|   |   ├── affine_image.py
|   |   ├── barb_demo.py
|   |   ├── barcode_demo.py
|   |   ├── colormap_interactive_adjustment.py
|   |   ├── colormap_normalizations.py
|   |   ├── colormap_normalizations_symlognorm.py
|   |   ├── contour_corner_mask.py
|   |   ├── contour_demo.py
|   |   ├── contour_image.py
|   |   ├── contour_label_demo.py
|   |   ├── contourf_demo.py
|   |   ├── contourf_hatching.py
|   |   ├── contourf_log.py
|   |   ├── contours_in_optimization_demo.py
|   |   ├── demo_bboximage.py
|   |   ├── figimage_demo.py
|   |   ├── image_annotated_heatmap.py
|   |   ├── image_antialiasing.py
|   |   ├── image_clip_path.py
|   |   ├── image_demo.py
|   |   ├── image_masked.py
|   |   ├── image_nonuniform.py
|   |   ├── image_transparency_blend.py
|   |   ├── image_zcoord.py
|   |   ├── interpolation_methods.py
|   |   ├── irregulardatagrid.py
|   |   ├── layer_images.py
|   |   ├── matshow.py
|   |   ├── multi_image.py
|   |   ├── pcolor_demo.py
|   |   ├── pcolormesh_grids.py
|   |   ├── pcolormesh_levels.py
|   |   ├── plot_streamplot.py
|   |   ├── quadmesh_demo.py
|   |   ├── quiver_demo.py
|   |   ├── quiver_simple_demo.py
|   |   ├── shading_example.py
|   |   ├── specgram_demo.py
|   |   ├── spy_demos.py
|   |   ├── tricontour_demo.py
|   |   ├── tricontour_smooth_delaunay.py
|   |   ├── tricontour_smooth_user.py
|   |   ├── trigradient_demo.py
|   |   ├── triinterp_demo.py
|   |   ├── tripcolor_demo.py
|   |   ├── triplot_demo.py
|   |   └── watermark_image.py
|   ├── lines_bars_and_markers
|   |   ├── README.txt
|   |   ├── bar_colors.py
|   |   ├── bar_label_demo.py
|   |   ├── bar_stacked.py
|   |   ├── barchart.py
|   |   ├── barh.py
|   |   ├── broken_barh.py
|   |   ├── capstyle.py
|   |   ├── categorical_variables.py
|   |   ├── cohere.py
|   |   ├── csd_demo.py
|   |   ├── curve_error_band.py
|   |   ├── errorbar_limits_simple.py
|   |   ├── errorbar_subsample.py
|   |   ├── eventcollection_demo.py
|   |   ├── eventplot_demo.py
|   |   ├── fill.py
|   |   ├── fill_between_alpha.py
|   |   ├── fill_between_demo.py
|   |   ├── fill_betweenx_demo.py
|   |   ├── filled_step.py
|   |   ├── gradient_bar.py
|   |   ├── hat_graph.py
|   |   ├── horizontal_barchart_distribution.py
|   |   ├── joinstyle.py
|   |   ├── line_demo_dash_control.py
|   |   ├── lines_with_ticks_demo.py
|   |   ├── linestyles.py
|   |   ├── marker_reference.py
|   |   ├── markevery_demo.py
|   |   ├── masked_demo.py
|   |   ├── multicolored_line.py
|   |   ├── multivariate_marker_plot.py
|   |   ├── psd_demo.py
|   |   ├── scatter_custom_symbol.py
|   |   ├── scatter_demo2.py
|   |   ├── scatter_hist.py
|   |   ├── scatter_masked.py
|   |   ├── scatter_star_poly.py
|   |   ├── scatter_with_legend.py
|   |   ├── simple_plot.py
|   |   ├── span_regions.py
|   |   ├── spectrum_demo.py
|   |   ├── stackplot_demo.py
|   |   ├── stairs_demo.py
|   |   ├── stem_plot.py
|   |   ├── step_demo.py
|   |   ├── timeline.py
|   |   ├── vline_hline_demo.py
|   |   └── xcorr_acorr_demo.py
|   ├── misc
|   |   ├── README.txt
|   |   ├── anchored_artists.py
|   |   ├── bbox_intersect.py
|   |   ├── contour_manual.py
|   |   ├── coords_report.py
|   |   ├── custom_projection.py
|   |   ├── customize_rc.py
|   |   ├── demo_agg_filter.py
|   |   ├── demo_ribbon_box.py
|   |   ├── fig_x.py
|   |   ├── fill_spiral.py
|   |   ├── findobj_demo.py
|   |   ├── font_indexing.py
|   |   ├── ftface_props.py
|   |   ├── histogram_path.py
|   |   ├── hyperlinks_sgskip.py
|   |   ├── image_thumbnail_sgskip.py
|   |   ├── keyword_plotting.py
|   |   ├── logos2.py
|   |   ├── multipage_pdf.py
|   |   ├── multiprocess_sgskip.py
|   |   ├── packed_bubbles.py
|   |   ├── patheffect_demo.py
|   |   ├── print_stdout_sgskip.py
|   |   ├── rasterization_demo.py
|   |   ├── set_and_get.py
|   |   ├── svg_filter_line.py
|   |   ├── svg_filter_pie.py
|   |   ├── table_demo.py
|   |   ├── tickedstroke_demo.py
|   |   ├── transoffset.py
|   |   └── zorder_demo.py
|   ├── mplot3d
|   |   ├── 2dcollections3d.py
|   |   ├── 3d_bars.py
|   |   ├── README.txt
|   |   ├── bars3d.py
|   |   ├── box3d.py
|   |   ├── contour3d.py
|   |   ├── contour3d_2.py
|   |   ├── contour3d_3.py
|   |   ├── contourf3d.py
|   |   ├── contourf3d_2.py
|   |   ├── custom_shaded_3d_surface.py
|   |   ├── errorbar3d.py
|   |   ├── hist3d.py
|   |   ├── lines3d.py
|   |   ├── lorenz_attractor.py
|   |   ├── mixed_subplots.py
|   |   ├── offset.py
|   |   ├── pathpatch3d.py
|   |   ├── polys3d.py
|   |   ├── projections.py
|   |   ├── quiver3d.py
|   |   ├── rotate_axes3d_sgskip.py
|   |   ├── scatter3d.py
|   |   ├── stem3d_demo.py
|   |   ├── subplot3d.py
|   |   ├── surface3d.py
|   |   ├── surface3d_2.py
|   |   ├── surface3d_3.py
|   |   ├── surface3d_radial.py
|   |   ├── text3d.py
|   |   ├── tricontour3d.py
|   |   ├── tricontourf3d.py
|   |   ├── trisurf3d.py
|   |   ├── trisurf3d_2.py
|   |   ├── view_planes_3d.py
|   |   ├── voxels.py
|   |   ├── voxels_numpy_logo.py
|   |   ├── voxels_rgb.py
|   |   ├── voxels_torus.py
|   |   ├── wire3d.py
|   |   ├── wire3d_animation_sgskip.py
|   |   └── wire3d_zero_stride.py
|   ├── pie_and_polar_charts
|   |   ├── README.txt
|   |   ├── bar_of_pie.py
|   |   ├── nested_pie.py
|   |   ├── pie_and_donut_labels.py
|   |   ├── pie_demo2.py
|   |   ├── pie_features.py
|   |   ├── polar_bar.py
|   |   ├── polar_demo.py
|   |   ├── polar_error_caps.py
|   |   ├── polar_legend.py
|   |   └── polar_scatter.py
|   ├── pyplots
|   |   ├── README.txt
|   |   ├── axline.py
|   |   ├── pyplot_mathtext.py
|   |   ├── pyplot_simple.py
|   |   ├── pyplot_text.py
|   |   ├── pyplot_three.py
|   |   └── pyplot_two_subplots.py
|   ├── scales
|   |   ├── README.txt
|   |   ├── asinh_demo.py
|   |   ├── aspect_loglog.py
|   |   ├── custom_scale.py
|   |   ├── log_bar.py
|   |   ├── log_demo.py
|   |   ├── logit_demo.py
|   |   ├── power_norm.py
|   |   ├── scales.py
|   |   ├── semilogx_demo.py
|   |   └── symlog_demo.py
|   ├── shapes_and_collections
|   |   ├── README.txt
|   |   ├── arrow_guide.py
|   |   ├── artist_reference.py
|   |   ├── collections.py
|   |   ├── compound_path.py
|   |   ├── dolphin.py
|   |   ├── donut.py
|   |   ├── ellipse_collection.py
|   |   ├── ellipse_demo.py
|   |   ├── fancybox_demo.py
|   |   ├── hatch_demo.py
|   |   ├── hatch_style_reference.py
|   |   ├── line_collection.py
|   |   ├── patch_collection.py
|   |   ├── path_patch.py
|   |   ├── quad_bezier.py
|   |   └── scatter.py
|   ├── showcase
|   |   ├── README.txt
|   |   ├── anatomy.py
|   |   ├── firefox.py
|   |   ├── integral.py
|   |   ├── mandelbrot.py
|   |   ├── stock_prices.py
|   |   └── xkcd.py
|   ├── specialty_plots
|   |   ├── README.txt
|   |   ├── advanced_hillshading.py
|   |   ├── anscombe.py
|   |   ├── hinton_demo.py
|   |   ├── leftventricle_bulleye.py
|   |   ├── mri_demo.py
|   |   ├── mri_with_eeg.py
|   |   ├── radar_chart.py
|   |   ├── sankey_basics.py
|   |   ├── sankey_links.py
|   |   ├── sankey_rankine.py
|   |   ├── skewt.py
|   |   └── topographic_hillshading.py
|   ├── spines
|   |   ├── README.txt
|   |   ├── centered_spines_with_arrows.py
|   |   ├── multiple_yaxis_with_spines.py
|   |   ├── spine_placement_demo.py
|   |   ├── spines.py
|   |   └── spines_dropped.py
|   ├── statistics
|   |   ├── README.txt
|   |   ├── barchart_demo.py
|   |   ├── boxplot.py
|   |   ├── boxplot_color.py
|   |   ├── boxplot_demo.py
|   |   ├── boxplot_vs_violin.py
|   |   ├── bxp.py
|   |   ├── confidence_ellipse.py
|   |   ├── customized_violin.py
|   |   ├── errorbar.py
|   |   ├── errorbar_features.py
|   |   ├── errorbar_limits.py
|   |   ├── errorbars_and_boxes.py
|   |   ├── hexbin_demo.py
|   |   ├── hist.py
|   |   ├── histogram_cumulative.py
|   |   ├── histogram_features.py
|   |   ├── histogram_histtypes.py
|   |   ├── histogram_multihist.py
|   |   ├── multiple_histograms_side_by_side.py
|   |   ├── time_series_histogram.py
|   |   └── violinplot.py
|   ├── style_sheets
|   |   ├── README.txt
|   |   ├── bmh.py
|   |   ├── dark_background.py
|   |   ├── fivethirtyeight.py
|   |   ├── ggplot.py
|   |   ├── grayscale.py
|   |   ├── plot_solarizedlight2.py
|   |   └── style_sheets_reference.py
|   ├── subplots_axes_and_figures
|   |   ├── README.txt
|   |   ├── align_labels_demo.py
|   |   ├── auto_subplots_adjust.py
|   |   ├── axes_box_aspect.py
|   |   ├── axes_demo.py
|   |   ├── axes_margins.py
|   |   ├── axes_props.py
|   |   ├── axes_zoom_effect.py
|   |   ├── axhspan_demo.py
|   |   ├── axis_equal_demo.py
|   |   ├── axis_labels_demo.py
|   |   ├── broken_axis.py
|   |   ├── colorbar_placement.py
|   |   ├── custom_figure_class.py
|   |   ├── demo_constrained_layout.py
|   |   ├── demo_tight_layout.py
|   |   ├── fahrenheit_celsius_scales.py
|   |   ├── figure_size_units.py
|   |   ├── figure_title.py
|   |   ├── ganged_plots.py
|   |   ├── geo_demo.py
|   |   ├── gridspec_and_subplots.py
|   |   ├── gridspec_multicolumn.py
|   |   ├── gridspec_nested.py
|   |   ├── invert_axes.py
|   |   ├── multiple_figs_demo.py
|   |   ├── secondary_axis.py
|   |   ├── share_axis_lims_views.py
|   |   ├── shared_axis_demo.py
|   |   ├── subfigures.py
|   |   ├── subplot.py
|   |   ├── subplots_adjust.py
|   |   ├── subplots_demo.py
|   |   ├── two_scales.py
|   |   └── zoom_inset_axes.py
|   ├── text_labels_and_annotations
|   |   ├── README.txt
|   |   ├── accented_text.py
|   |   ├── align_ylabels.py
|   |   ├── angle_annotation.py
|   |   ├── angles_on_bracket_arrows.py
|   |   ├── annotate_transform.py
|   |   ├── annotation_basic.py
|   |   ├── annotation_demo.py
|   |   ├── annotation_polar.py
|   |   ├── arrow_demo.py
|   |   ├── autowrap.py
|   |   ├── custom_legends.py
|   |   ├── date.py
|   |   ├── demo_annotation_box.py
|   |   ├── demo_text_path.py
|   |   ├── demo_text_rotation_mode.py
|   |   ├── dfrac_demo.py
|   |   ├── engineering_formatter.py
|   |   ├── fancyarrow_demo.py
|   |   ├── fancytextbox_demo.py
|   |   ├── figlegend_demo.py
|   |   ├── font_family_rc.py
|   |   ├── font_file.py
|   |   ├── font_table.py
|   |   ├── fonts_demo.py
|   |   ├── fonts_demo_kw.py
|   |   ├── label_subplots.py
|   |   ├── legend.py
|   |   ├── legend_demo.py
|   |   ├── line_with_text.py
|   |   ├── mathtext_asarray.py
|   |   ├── mathtext_demo.py
|   |   ├── mathtext_examples.py
|   |   ├── mathtext_fontfamily_example.py
|   |   ├── multiline.py
|   |   ├── placing_text_boxes.py
|   |   ├── rainbow_text.py
|   |   ├── stix_fonts_demo.py
|   |   ├── tex_demo.py
|   |   ├── text_alignment.py
|   |   ├── text_commands.py
|   |   ├── text_fontdict.py
|   |   ├── text_rotation_relative_to_line.py
|   |   ├── titles_demo.py
|   |   ├── unicode_minus.py
|   |   ├── usetex_baseline_test.py
|   |   ├── usetex_fonteffects.py
|   |   └── watermark_text.py
|   ├── ticks
|   |   ├── README.txt
|   |   ├── auto_ticks.py
|   |   ├── centered_ticklabels.py
|   |   ├── colorbar_tick_labelling_demo.py
|   |   ├── custom_ticker1.py
|   |   ├── date_concise_formatter.py
|   |   ├── date_demo_convert.py
|   |   ├── date_demo_rrule.py
|   |   ├── date_formatters_locators.py
|   |   ├── date_index_formatter.py
|   |   ├── date_precision_and_epochs.py
|   |   ├── dollar_ticks.py
|   |   ├── fig_axes_customize_simple.py
|   |   ├── major_minor_demo.py
|   |   ├── scalarformatter.py
|   |   ├── tick-formatters.py
|   |   ├── tick-locators.py
|   |   ├── tick_label_right.py
|   |   ├── tick_labels_from_values.py
|   |   ├── tick_xlabel_top.py
|   |   ├── ticklabels_rotation.py
|   |   └── ticks_too_many.py
|   ├── units
|   |   ├── README.txt
|   |   ├── annotate_with_units.py
|   |   ├── artist_tests.py
|   |   ├── bar_demo2.py
|   |   ├── bar_unit_demo.py
|   |   ├── basic_units.py
|   |   ├── ellipse_with_units.py
|   |   ├── evans_test.py
|   |   ├── radian_demo.py
|   |   ├── units_sample.py
|   |   └── units_scatter.py
|   ├── user_interfaces
|   |   ├── README.txt
|   |   ├── canvasagg.py
|   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   ├── embedding_in_gtk3_sgskip.py
|   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   ├── embedding_in_gtk4_sgskip.py
|   |   ├── embedding_in_qt_sgskip.py
|   |   ├── embedding_in_tk_sgskip.py
|   |   ├── embedding_in_wx2_sgskip.py
|   |   ├── embedding_in_wx3_sgskip.py
|   |   ├── embedding_in_wx4_sgskip.py
|   |   ├── embedding_in_wx5_sgskip.py
|   |   ├── embedding_webagg_sgskip.py
|   |   ├── fourier_demo_wx_sgskip.py
|   |   ├── gtk3_spreadsheet_sgskip.py
|   |   ├── gtk4_spreadsheet_sgskip.py
|   |   ├── mathtext_wx_sgskip.py
|   |   ├── mpl_with_glade3_sgskip.py
|   |   ├── pylab_with_gtk3_sgskip.py
|   |   ├── pylab_with_gtk4_sgskip.py
|   |   ├── svg_histogram_sgskip.py
|   |   ├── svg_tooltip_sgskip.py
|   |   ├── toolmanager_sgskip.py
|   |   ├── web_application_server_sgskip.py
|   |   └── wxcursor_demo_sgskip.py
|   ├── userdemo
|   |   ├── README.txt
|   |   ├── anchored_box04.py
|   |   ├── annotate_explain.py
|   |   ├── annotate_simple01.py
|   |   ├── annotate_simple02.py
|   |   ├── annotate_simple03.py
|   |   ├── annotate_simple04.py
|   |   ├── annotate_simple_coord01.py
|   |   ├── annotate_simple_coord02.py
|   |   ├── annotate_simple_coord03.py
|   |   ├── annotate_text_arrow.py
|   |   ├── connect_simple01.py
|   |   ├── connectionstyle_demo.py
|   |   ├── custom_boxstyle01.py
|   |   ├── demo_gridspec01.py
|   |   ├── demo_gridspec03.py
|   |   ├── demo_gridspec06.py
|   |   ├── pgf_fonts.py
|   |   ├── pgf_preamble_sgskip.py
|   |   ├── pgf_texsystem.py
|   |   ├── simple_annotate01.py
|   |   ├── simple_legend01.py
|   |   └── simple_legend02.py
|   └── widgets
|       ├── README.txt
|       ├── annotated_cursor.py
|       ├── buttons.py
|       ├── check_buttons.py
|       ├── cursor.py
|       ├── lasso_selector_demo_sgskip.py
|       ├── menu.py
|       ├── mouse_cursor.py
|       ├── multicursor.py
|       ├── polygon_selector_demo.py
|       ├── polygon_selector_simple.py
|       ├── radio_buttons.py
|       ├── range_slider.py
|       ├── rectangle_selector.py
|       ├── slider_demo.py
|       ├── slider_snap_demo.py
|       ├── span_selector.py
|       └── textbox.py
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── afm.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── css
|   |   |       └── js
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook
|   |   |   └── __init__.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── docstring.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── fontconfig_pattern.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── tight_bbox.py
|   |   ├── tight_layout.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── type1font.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── __init__.py
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           └── test_axes3d.py
|   └── pylab.py
├── plot_types
|   ├── 3D
|   |   ├── README.rst
|   |   ├── scatter3d_simple.py
|   |   ├── surface3d_simple.py
|   |   ├── trisurf3d_simple.py
|   |   ├── voxels_simple.py
|   |   └── wire3d_simple.py
|   ├── README.rst
|   ├── arrays
|   |   ├── README.rst
|   |   ├── barbs.py
|   |   ├── contour.py
|   |   ├── contourf.py
|   |   ├── imshow.py
|   |   ├── pcolormesh.py
|   |   ├── quiver.py
|   |   └── streamplot.py
|   ├── basic
|   |   ├── README.rst
|   |   ├── bar.py
|   |   ├── fill_between.py
|   |   ├── plot.py
|   |   ├── scatter_plot.py
|   |   ├── stackplot.py
|   |   ├── stem.py
|   |   └── step.py
|   ├── stats
|   |   ├── README.rst
|   |   ├── boxplot_plot.py
|   |   ├── errorbar_plot.py
|   |   ├── eventplot.py
|   |   ├── hexbin.py
|   |   ├── hist2d.py
|   |   ├── hist_plot.py
|   |   ├── pie.py
|   |   └── violin.py
|   └── unstructured
|       ├── README.rst
|       ├── tricontour.py
|       ├── tricontourf.py
|       ├── tripcolor.py
|       └── triplot.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       └── minver.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
├── tests.py
├── tools
|   ├── README.txt
|   ├── boilerplate.py
|   ├── cache_zenodo_svg.py
|   ├── create_DejaVuDisplay.sh
|   ├── embed_js.py
|   ├── gh_api.py
|   ├── github_stats.py
|   ├── make_icons.py
|   ├── memleak.py
|   ├── run_examples.py
|   ├── subset.py
|   ├── triage_tests.py
|   └── visualize_tests.py
└── tutorials
    ├── README.txt
    ├── advanced
    |   ├── README.txt
    |   ├── blitting.py
    |   ├── path_tutorial.py
    |   ├── patheffects_guide.py
    |   └── transforms_tutorial.py
    ├── colors
    |   ├── README.txt
    |   ├── colorbar_only.py
    |   ├── colormap-manipulation.py
    |   ├── colormapnorms.py
    |   ├── colormaps.py
    |   └── colors.py
    ├── intermediate
    |   ├── README.txt
    |   ├── arranging_axes.py
    |   ├── artists.py
    |   ├── autoscale.py
    |   ├── color_cycle.py
    |   ├── constrainedlayout_guide.py
    |   ├── imshow_extent.py
    |   ├── legend_guide.py
    |   └── tight_layout_guide.py
    ├── introductory
    |   ├── README.txt
    |   ├── animation_tutorial.py
    |   ├── customizing.py
    |   ├── images.py
    |   ├── lifecycle.py
    |   ├── pyplot.py
    |   └── quick_start.py
    ├── provisional
    |   ├── README.txt
    |   └── mosaic.py
    ├── text
    |   ├── README.txt
    |   ├── annotations.py
    |   ├── mathtext.py
    |   ├── pgf.py
    |   ├── text_intro.py
    |   ├── text_props.py
    |   └── usetex.py
    └── toolkits
        ├── README.txt
        ├── axes_grid.py
        ├── axisartist.py
        └── mplot3d.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_axes.py
Line number range: 438 - 488
Content:
438. def test_inverted_cla():
439.     # GitHub PR #5450. Setting autoscale should reset
440.     # axes to be non-inverted.
441.     # plotting an image, then 1d graph, axis is now down
442.     fig = plt.figure(0)
443.     ax = fig.gca()
444.     # 1. test that a new axis is not inverted per default
445.     assert not ax.xaxis_inverted()
446.     assert not ax.yaxis_inverted()
447.     img = np.random.random((100, 100))
448.     ax.imshow(img)
449.     # 2. test that a image axis is inverted
450.     assert not ax.xaxis_inverted()
451.     assert ax.yaxis_inverted()
452.     # 3. test that clearing and plotting a line, axes are
453.     # not inverted
454.     ax.cla()
455.     x = np.linspace(0, 2*np.pi, 100)
456.     ax.plot(x, np.cos(x))
457.     assert not ax.xaxis_inverted()
458.     assert not ax.yaxis_inverted()
459. 
460.     # 4. autoscaling should not bring back axes to normal
461.     ax.cla()
462.     ax.imshow(img)
463.     plt.autoscale()
464.     assert not ax.xaxis_inverted()
465.     assert ax.yaxis_inverted()
466. 
467.     for ax in fig.axes:
468.         ax.remove()
469.     # 5. two shared axes. Inverting the leader axis should invert the shared
470.     # axes; clearing the leader axis should bring axes in shared
471.     # axes back to normal.
472.     ax0 = plt.subplot(211)
473.     ax1 = plt.subplot(212, sharey=ax0)
474.     ax0.yaxis.set_inverted(True)
475.     assert ax1.yaxis_inverted()
476.     ax1.plot(x, np.cos(x))
477.     ax0.cla()
478.     assert not ax1.yaxis_inverted()
479.     ax1.cla()
480.     # 6. clearing the follower should not touch limits
481.     ax0.imshow(img)
482.     ax1.plot(x, np.cos(x))
483.     ax1.cla()
484.     assert ax.yaxis_inverted()
485. 
486.     # clean up
487.     plt.close(fig)
488. 


File: lib/matplotlib/tests/test_axes.py
Line number range: 336 - 358
Content:
336. def test_twinx_cla():
337.     fig, ax = plt.subplots()
338.     ax2 = ax.twinx()
339.     ax3 = ax2.twiny()
340.     plt.draw()
341.     assert not ax2.xaxis.get_visible()
342.     assert not ax2.patch.get_visible()
343.     ax2.cla()
344.     ax3.cla()
345. 
346.     assert not ax2.xaxis.get_visible()
347.     assert not ax2.patch.get_visible()
348.     assert ax2.yaxis.get_visible()
349. 
350.     assert ax3.xaxis.get_visible()
351.     assert not ax3.patch.get_visible()
352.     assert not ax3.yaxis.get_visible()
353. 
354.     assert ax.xaxis.get_visible()
355.     assert ax.patch.get_visible()
356.     assert ax.yaxis.get_visible()
357. 
358. 


File: lib/matplotlib/tests/test_figure.py
Line number range: 144 - 161
Content:
144. def test_clf_keyword():
145.     # test if existing figure is cleared with figure() and subplots()
146.     text1 = 'A fancy plot'
147.     text2 = 'Really fancy!'
148. 
149.     fig0 = plt.figure(num=1)
150.     fig0.suptitle(text1)
151.     assert [t.get_text() for t in fig0.texts] == [text1]
152. 
153.     fig1 = plt.figure(num=1, clear=False)
154.     fig1.text(0.5, 0.5, text2)
155.     assert fig0 is fig1
156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]
157. 
158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)
159.     assert fig0 is fig2
160.     assert [t.get_text() for t in fig2.texts] == []
161. 


File: lib/matplotlib/tests/test_figure.py
Line number range: 357 - 364
Content:
357. def test_axes_remove():
358.     fig, axs = plt.subplots(2, 2)
359.     axs[-1, -1].remove()
360.     for ax in axs.ravel()[:-1]:
361.         assert ax in fig.axes
362.     assert axs[-1, -1] not in fig.axes
363.     assert len(fig.axes) == 3
364. 


File: lib/matplotlib/tests/test_axes.py
Line number range: 490 - 538
Content:
490. def test_subclass_clear_cla():
491.     # Ensure that subclasses of Axes call cla/clear correctly.
492.     # Note, we cannot use mocking here as we want to be sure that the
493.     # superclass fallback does not recurse.
494. 
495.     with pytest.warns(PendingDeprecationWarning,
496.                       match='Overriding `Axes.cla`'):
497.         class ClaAxes(Axes):
498.             def cla(self):
499.                 nonlocal called
500.                 called = True
501. 
502.     with pytest.warns(PendingDeprecationWarning,
503.                       match='Overriding `Axes.cla`'):
504.         class ClaSuperAxes(Axes):
505.             def cla(self):
506.                 nonlocal called
507.                 called = True
508.                 super().cla()
509. 
510.     class SubClaAxes(ClaAxes):
511.         pass
512. 
513.     class ClearAxes(Axes):
514.         def clear(self):
515.             nonlocal called
516.             called = True
517. 
518.     class ClearSuperAxes(Axes):
519.         def clear(self):
520.             nonlocal called
521.             called = True
522.             super().clear()
523. 
524.     class SubClearAxes(ClearAxes):
525.         pass
526. 
527.     fig = Figure()
528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,
529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:
530.         called = False
531.         ax = axes_class(fig, [0, 0, 1, 1])
532.         # Axes.__init__ has already called clear (which aliases to cla or is in
533.         # the subclass).
534.         assert called
535. 
536.         called = False
537.         ax.cla()
538.         assert called

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 08:44:46,315 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find 5 test cases related to a bug where `cla()` and `clf()` do not unset the `.axes` and `.figure` attributes of artists. The provided context contains tests for `cla()` and `clf()`, but they do not check the state of the artists that were removed. For example, `test_inverted_cla` and `test_twinx_cla` check the state of the axes, not the artists. `test_clf_keyword` checks if the figure's text list is empty but does not check the attributes of the removed text artists. `test_axes_remove` is about removing an axes from a figure, not an artist. `test_subclass_clear_cla` is about the method dispatch of `cla`. Therefore, the provided context is insufficient as it does not contain any test that verifies the `.axes` or `.figure` attribute of an artist after `cla()` or `clf()` is called. I need to find tests that are more specific to the bug report." refined_query="Find test cases that verify the state of an Artist's `.axes` and `.figure` attributes after being removed from an Axes or Figure. This should include tests for `artist.remove()`, `axes.cla()`, and `figure.clf()`."
2025-10-06 08:44:48,905 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I will search for test cases that verify an artist's `.axes` and `.figure` attributes after removal. My search will include tests for `artist.remove()`, `axes.cla()`, and `figure.clf()` to ensure the artist is properly cleared from the axes and figure." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21173, 'candidates_token_count': 75, 'total_token_count': 21368, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21173}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 75}], 'thoughts_token_count': 120, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2063201904296875, 'model_name': 'gemini-2.5-pro'} id='run--c517d332-a11d-4756-a497-4e808077eb5c-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_artist.py'}, 'id': 'b0abf499-983d-4bf8-bd0e-2bc9fb1481d5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21173, 'output_tokens': 75, 'total_tokens': 21368, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 120}}
2025-10-06 08:44:51,220 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I located the `test_artist.py` file and will now search within it for tests related to `remove`, `cla`, and `clf`, starting with a search for "test_artist_removal".' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "test_artist_removal", "basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21306, 'candidates_token_count': 72, 'total_token_count': 21443, 'cached_content_token_count': 19670, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21306}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19670}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 72}], 'thoughts_token_count': 65}, 'finish_reason': 'STOP', 'avg_logprobs': -0.17068713241153294, 'model_name': 'gemini-2.5-pro'} id='run--6a8a65e6-aa4e-4cb6-ad42-e847d4574b7c-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'test_artist_removal', 'basename': 'test_artist.py'}, 'id': 'a76f053e-b1db-4cf6-9897-518a471e3bb4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21306, 'output_tokens': 72, 'total_tokens': 21443, 'input_token_details': {'cache_read': 19670}, 'output_token_details': {'reasoning': 65}}
2025-10-06 08:45:00,262 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I could not find the specific test "test_artist_removal". I will now broaden my search to look for any functions within `test_artist.py` to identify relevant tests.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_basename', 'arguments': '{"type": "function_definition", "basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21408, 'candidates_token_count': 65, 'total_token_count': 22157, 'cached_content_token_count': 19643, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21408}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19643}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 65}], 'thoughts_token_count': 684}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0819036630483774, 'model_name': 'gemini-2.5-pro'} id='run--02308c43-00d0-4724-8299-fa7040afe51c-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_basename', 'args': {'type': 'function_definition', 'basename': 'test_artist.py'}, 'id': 'd9c8adbb-34c8-442e-bb45-e5e58857a5ca', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21408, 'output_tokens': 65, 'total_tokens': 22157, 'input_token_details': {'cache_read': 19643}, 'output_token_details': {'reasoning': 684}}
2025-10-06 08:45:03,149 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I\'ve reviewed the functions in `test_artist.py` and none appear to directly address the state of an artist after removal. To find the relevant tests, I will now search for the term "remove" within the file, which should help locate tests covering `artist.remove()`, `axes.cla()`, or `figure.clf()`.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "remove", "basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 22490, 'candidates_token_count': 98, 'total_token_count': 22666, 'cached_content_token_count': 19559, 'prompt_tokens_details': [{'modality': 1, 'token_count': 22490}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19559}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 98}], 'thoughts_token_count': 78}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15168743717427158, 'model_name': 'gemini-2.5-pro'} id='run--1425779c-1044-439c-96c1-0b814d5bb079-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'remove', 'basename': 'test_artist.py'}, 'id': '2135d757-e233-41fc-bee9-3a3c2c87dcb2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22490, 'output_tokens': 98, 'total_tokens': 22666, 'input_token_details': {'cache_read': 19559}, 'output_token_details': {'reasoning': 78}}
2025-10-06 08:45:09,967 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I have found a `test_remove` function in `lib/matplotlib/tests/test_artist.py` that directly verifies that an artist's `.axes` and `.figure` attributes are set to `None` after the artist is removed. This test covers the `artist.remove()` case. I will now investigate how `axes.cla()` and `figure.clf()` are tested to ensure they also properly clear these artist attributes." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "cla()", "basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24457, 'candidates_token_count': 117, 'total_token_count': 25225, 'cached_content_token_count': 21447, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24457}], 'cache_tokens_details': [{'modality': 1, 'token_count': 21447}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 117}], 'thoughts_token_count': 651}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3120809049687834, 'model_name': 'gemini-2.5-pro'} id='run--ff42f263-9b83-494b-bcb6-25bed3df9f51-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'cla()', 'basename': 'test_artist.py'}, 'id': 'f2e3d1c7-42d8-4743-a1be-f8b2a64d2c63', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24457, 'output_tokens': 117, 'total_tokens': 25225, 'input_token_details': {'cache_read': 21447}, 'output_token_details': {'reasoning': 651}}
2025-10-06 08:45:11,701 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I could not find any tests in `test_artist.py` that explicitly call `cla()`. It's possible the tests for `axes.cla()` and `figure.clf()` are located in a different test file. I'll search for `test_axes.py` to see if I can find the relevant tests there." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24604, 'candidates_token_count': 85, 'total_token_count': 24689, 'cached_content_token_count': 23372, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24604}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23372}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09993277157054228, 'model_name': 'gemini-2.5-pro'} id='run--71e10d4e-d940-4895-a5b8-4c7b6a95e0dd-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_axes.py'}, 'id': 'c6f69e68-d49e-441d-86fe-13075245e288', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24604, 'output_tokens': 85, 'total_tokens': 24689, 'input_token_details': {'cache_read': 23372}}
2025-10-06 08:45:13,229 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I've found the `test_axes.py` file. Now I will search for tests within this file that are related to `cla()` to see how artist removal is handled." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "cla()", "basename": "test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24747, 'candidates_token_count': 64, 'total_token_count': 24811, 'cached_content_token_count': 23344, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24747}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23344}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 64}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10512950271368027, 'model_name': 'gemini-2.5-pro'} id='run--6b11c743-7d68-436c-a6f7-59181a414d33-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'cla()', 'basename': 'test_axes.py'}, 'id': '5fb5069c-a11c-4b5c-894a-60701f33fb14', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24747, 'output_tokens': 64, 'total_tokens': 24811, 'input_token_details': {'cache_read': 23344}}
2025-10-06 08:45:15,646 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I've examined the search results for `cla()` in `test_axes.py`, and while they test various aspects of `cla()`, they do not explicitly verify the state of an artist's `.axes` and `.figure` attributes after the call. However, the `test_remove` function in `test_artist.py` does provide a direct confirmation for `artist.remove()`. Given this, I will now look for tests related to `clf()` in `test_figure.py` to complete my search." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_figure.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26255, 'candidates_token_count': 125, 'total_token_count': 26380, 'cached_content_token_count': 23299, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26255}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23299}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 125}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15630140686035157, 'model_name': 'gemini-2.5-pro'} id='run--7ccfca99-0c47-43df-a369-cfe13e1fdd1f-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_figure.py'}, 'id': '9e257e07-cfb8-4755-95e8-3df2be34394f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26255, 'output_tokens': 125, 'total_tokens': 26380, 'input_token_details': {'cache_read': 23299}}
2025-10-06 08:45:16,974 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have found `test_figure.py` and will now search for tests related to `clf()` within it.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "clf()", "basename": "test_figure.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26438, 'candidates_token_count': 50, 'total_token_count': 26488, 'cached_content_token_count': 25215, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26438}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25215}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 50}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11979256629943848, 'model_name': 'gemini-2.5-pro'} id='run--150ab33c-b14a-4454-9d55-59129b3425c9-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'clf()', 'basename': 'test_figure.py'}, 'id': '91898956-fe78-4d63-933e-e4344320f307', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26438, 'output_tokens': 50, 'total_tokens': 26488, 'input_token_details': {'cache_read': 25215}}
2025-10-06 08:45:18,487 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I could not find any tests in `test_figure.py` that explicitly call `clf()`. I will now broaden my search to look for any use of the string "clf" within the file to see if I can find any relevant tests.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "clf", "basename": "test_figure.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26518, 'candidates_token_count': 76, 'total_token_count': 26594, 'cached_content_token_count': 25187, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26518}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25187}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 76}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12064455684862639, 'model_name': 'gemini-2.5-pro'} id='run--f1761833-6eda-42b4-9a5d-b0d186cfdf8e-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'clf', 'basename': 'test_figure.py'}, 'id': '69494738-0b9f-487a-9bba-1aa6cdceeaf6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26518, 'output_tokens': 76, 'total_tokens': 26594, 'input_token_details': {'cache_read': 25187}}
2025-10-06 08:45:27,310 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I have completed my search for test cases that verify the state of an artist's `.axes` and `.figure` attributes after removal.\n\nFirst, I located `test_remove` in `lib/matplotlib/tests/test_artist.py`, which directly confirms that an artist's `.axes` and `.figure` attributes are set to `None` after `artist.remove()` is called. I then investigated `axes.cla()` and `figure.clf()`. While I didn't find explicit checks for the artist's attributes in the tests for `cla()` in `lib/matplotlib/tests/test_axes.py`, I did find the `test_figure_clear` function in `lib/matplotlib/tests/test_figure.py`. This test is parameterized to cover `clf()` and verifies that the axes (and thus the artists within them) are removed from the figure." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 28107, 'candidates_token_count': 187, 'total_token_count': 28981, 'cached_content_token_count': 25181, 'prompt_tokens_details': [{'modality': 1, 'token_count': 28107}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25181}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 187}], 'thoughts_token_count': 687}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4406438817314923, 'model_name': 'gemini-2.5-pro'} id='run--752797ea-e7b4-4ce2-8081-2eb214439269-0' usage_metadata={'input_tokens': 28107, 'output_tokens': 187, 'total_tokens': 28981, 'input_token_details': {'cache_read': 25181}, 'output_token_details': {'reasoning': 687}}
2025-10-06 08:45:27,311 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 08:45:27,312 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Find test cases that verify the state of an Artist's `.axes` and `.figure` attributes after being removed from an Axes or Figure. This should include tests for `artist.remove()`, `axes.cla()`, and `figure.clf()`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_artist.py
Line number range: 238 - 240
Content:
def test_properties():
    ln = mlines.Line2D([], [])
    ln.properties()  # Check that no warning is emitted.

File: lib/matplotlib/tests/test_artist.py
Line number range: 294 - 298
Content:
def test_artist_inspector_get_aliases():
    # test the correct format and type of get_aliases method
    ai = martist.ArtistInspector(mlines.Line2D)
    aliases = ai.get_aliases()
    assert aliases["linewidth"] == {"lw"}

File: lib/matplotlib/tests/test_artist.py
Line number range: 261 - 268
Content:
def test_None_zorder():
    fig, ax = plt.subplots()
    ln, = ax.plot(range(5), zorder=None)
    assert ln.get_zorder() == mlines.Line2D.zorder
    ln.set_zorder(123456)
    assert ln.get_zorder() == 123456
    ln.set_zorder(None)
    assert ln.get_zorder() == mlines.Line2D.zorder

File: lib/matplotlib/tests/test_artist.py
Line number range: 145 - 159
Content:
def test_cull_markers():
    x = np.random.random(20000)
    y = np.random.random(20000)

    fig, ax = plt.subplots()
    ax.plot(x, y, 'k.')
    ax.set_xlim(2, 3)

    pdf = io.BytesIO()
    fig.savefig(pdf, format="pdf")
    assert len(pdf.getvalue()) < 8000

    svg = io.BytesIO()
    fig.savefig(svg, format="svg")
    assert len(svg.getvalue()) < 20000

File: lib/matplotlib/tests/test_artist.py
Line number range: 363 - 376
Content:
def test_set_is_overwritten():
    """set() defined in Artist subclasses should not be overwritten."""
    class MyArtist3(martist.Artist):

        def set(self, **kwargs):
            """Not overwritten."""

    assert not hasattr(MyArtist3.set, '_autogenerated_signature')
    assert MyArtist3.set.__doc__ == "Not overwritten."

    class MyArtist4(MyArtist3):
        pass

    assert MyArtist4.set is MyArtist3.set

File: lib/matplotlib/tests/test_artist.py
Line number range: 327 - 342
Content:
def test_callbacks():
    def func(artist):
        func.counter += 1

    func.counter = 0

    art = martist.Artist()
    oid = art.add_callback(func)
    assert func.counter == 0
    art.pchanged()  # must call the callback
    assert func.counter == 1
    art.set_zorder(10)  # setting a property must also call the callback
    assert func.counter == 2
    art.remove_callback(oid)
    art.pchanged()  # must not call the callback anymore
    assert func.counter == 2

File: lib/matplotlib/tests/test_artist.py
Line number range: 188 - 214
Content:
def test_remove():
    fig, ax = plt.subplots()
    im = ax.imshow(np.arange(36).reshape(6, 6))
    ln, = ax.plot(range(5))

    assert fig.stale
    assert ax.stale

    fig.canvas.draw()
    assert not fig.stale
    assert not ax.stale
    assert not ln.stale

    assert im in ax._mouseover_set
    assert ln not in ax._mouseover_set
    assert im.axes is ax

    im.remove()
    ln.remove()

    for art in [im, ln]:
        assert art.axes is None
        assert art.figure is None

    assert im not in ax._mouseover_set
    assert fig.stale
    assert ax.stale

File: lib/matplotlib/tests/test_artist.py
Line number range: 162 - 185
Content:
@image_comparison(['hatching'], remove_text=True, style='default')
def test_hatching():
    fig, ax = plt.subplots(1, 1)

    # Default hatch color.
    rect1 = mpatches.Rectangle((0, 0), 3, 4, hatch='/')
    ax.add_patch(rect1)

    rect2 = mcollections.RegularPolyCollection(
        4, sizes=[16000], offsets=[(1.5, 6.5)], offset_transform=ax.transData,
        hatch='/')
    ax.add_collection(rect2)

    # Ensure edge color is not applied to hatching.
    rect3 = mpatches.Rectangle((4, 0), 3, 4, hatch='/', edgecolor='C1')
    ax.add_patch(rect3)

    rect4 = mcollections.RegularPolyCollection(
        4, sizes=[16000], offsets=[(5.5, 6.5)], offset_transform=ax.transData,
        hatch='/', edgecolor='C1')
    ax.add_collection(rect4)

    ax.set_xlim(0, 7)
    ax.set_ylim(0, 9)

File: lib/matplotlib/tests/test_artist.py
Line number range: 217 - 235
Content:
@image_comparison(["default_edges.png"], remove_text=True, style='default')
def test_default_edges():
    # Remove this line when this test image is regenerated.
    plt.rcParams['text.kerning_factor'] = 6

    fig, [[ax1, ax2], [ax3, ax4]] = plt.subplots(2, 2)

    ax1.plot(np.arange(10), np.arange(10), 'x',
             np.arange(10) + 1, np.arange(10), 'o')
    ax2.bar(np.arange(10), np.arange(10), align='edge')
    ax3.text(0, 0, "BOX", size=24, bbox=dict(boxstyle='sawtooth'))
    ax3.set_xlim((-1, 1))
    ax3.set_ylim((-1, 1))
    pp1 = mpatches.PathPatch(
        mpath.Path([(0, 0), (1, 0), (1, 1), (0, 0)],
                   [mpath.Path.MOVETO, mpath.Path.CURVE3,
                    mpath.Path.CURVE3, mpath.Path.CLOSEPOLY]),
        fc="none", transform=ax4.transData)
    ax4.add_patch(pp1)

File: lib/matplotlib/tests/test_artist.py
Line number range: 98 - 123
Content:
@image_comparison(["clip_path_clipping"], remove_text=True)
def test_clipping():
    exterior = mpath.Path.unit_rectangle().deepcopy()
    exterior.vertices *= 4
    exterior.vertices -= 2
    interior = mpath.Path.unit_circle().deepcopy()
    interior.vertices = interior.vertices[::-1]
    clip_path = mpath.Path.make_compound_path(exterior, interior)

    star = mpath.Path.unit_regular_star(6).deepcopy()
    star.vertices *= 2.6

    fig, (ax1, ax2) = plt.subplots(1, 2, sharex=True, sharey=True)

    col = mcollections.PathCollection([star], lw=5, edgecolor='blue',
                                      facecolor='red', alpha=0.7, hatch='*')
    col.set_clip_path(clip_path, ax1.transData)
    ax1.add_collection(col)

    patch = mpatches.PathPatch(star, lw=5, edgecolor='blue', facecolor='red',
                               alpha=0.7, hatch='*')
    patch.set_clip_path(clip_path, ax2.transData)
    ax2.add_patch(patch)

    ax1.set_xlim([-3, 3])
    ax1.set_ylim([-3, 3])

File: lib/matplotlib/tests/test_axes.py
Line number range: 336 - 356
Content:
def test_twinx_cla():
    fig, ax = plt.subplots()
    ax2 = ax.twinx()
    ax3 = ax2.twiny()
    plt.draw()
    assert not ax2.xaxis.get_visible()
    assert not ax2.patch.get_visible()
    ax2.cla()
    ax3.cla()

    assert not ax2.xaxis.get_visible()
    assert not ax2.patch.get_visible()
    assert ax2.yaxis.get_visible()

    assert ax3.xaxis.get_visible()
    assert not ax3.patch.get_visible()
    assert not ax3.yaxis.get_visible()

    assert ax.xaxis.get_visible()
    assert ax.patch.get_visible()
    assert ax.yaxis.get_visible()

File: lib/matplotlib/tests/test_axes.py
Line number range: 490 - 538
Content:
def test_subclass_clear_cla():
    # Ensure that subclasses of Axes call cla/clear correctly.
    # Note, we cannot use mocking here as we want to be sure that the
    # superclass fallback does not recurse.

    with pytest.warns(PendingDeprecationWarning,
                      match='Overriding `Axes.cla`'):
        class ClaAxes(Axes):
            def cla(self):
                nonlocal called
                called = True

    with pytest.warns(PendingDeprecationWarning,
                      match='Overriding `Axes.cla`'):
        class ClaSuperAxes(Axes):
            def cla(self):
                nonlocal called
                called = True
                super().cla()

    class SubClaAxes(ClaAxes):
        pass

    class ClearAxes(Axes):
        def clear(self):
            nonlocal called
            called = True

    class ClearSuperAxes(Axes):
        def clear(self):
            nonlocal called
            called = True
            super().clear()

    class SubClearAxes(ClearAxes):
        pass

    fig = Figure()
    for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,
                       ClearAxes, ClearSuperAxes, SubClearAxes]:
        called = False
        ax = axes_class(fig, [0, 0, 1, 1])
        # Axes.__init__ has already called clear (which aliases to cla or is in
        # the subclass).
        assert called

        called = False
        ax.cla()
        assert called

File: lib/matplotlib/tests/test_axes.py
Line number range: 438 - 487
Content:
def test_inverted_cla():
    # GitHub PR #5450. Setting autoscale should reset
    # axes to be non-inverted.
    # plotting an image, then 1d graph, axis is now down
    fig = plt.figure(0)
    ax = fig.gca()
    # 1. test that a new axis is not inverted per default
    assert not ax.xaxis_inverted()
    assert not ax.yaxis_inverted()
    img = np.random.random((100, 100))
    ax.imshow(img)
    # 2. test that a image axis is inverted
    assert not ax.xaxis_inverted()
    assert ax.yaxis_inverted()
    # 3. test that clearing and plotting a line, axes are
    # not inverted
    ax.cla()
    x = np.linspace(0, 2*np.pi, 100)
    ax.plot(x, np.cos(x))
    assert not ax.xaxis_inverted()
    assert not ax.yaxis_inverted()

    # 4. autoscaling should not bring back axes to normal
    ax.cla()
    ax.imshow(img)
    plt.autoscale()
    assert not ax.xaxis_inverted()
    assert ax.yaxis_inverted()

    for ax in fig.axes:
        ax.remove()
    # 5. two shared axes. Inverting the leader axis should invert the shared
    # axes; clearing the leader axis should bring axes in shared
    # axes back to normal.
    ax0 = plt.subplot(211)
    ax1 = plt.subplot(212, sharey=ax0)
    ax0.yaxis.set_inverted(True)
    assert ax1.yaxis_inverted()
    ax1.plot(x, np.cos(x))
    ax0.cla()
    assert not ax1.yaxis_inverted()
    ax1.cla()
    # 6. clearing the follower should not touch limits
    ax0.imshow(img)
    ax1.plot(x, np.cos(x))
    ax1.cla()
    assert ax.yaxis_inverted()

    # clean up
    plt.close(fig)

File: lib/matplotlib/tests/test_figure.py
Line number range: 772 - 775
Content:
def test_clf_not_redefined():
    for klass in FigureBase.__subclasses__():
        # check that subclasses do not get redefined in our Figure subclasses
        assert 'clf' not in klass.__dict__

File: lib/matplotlib/tests/test_figure.py
Line number range: 144 - 160
Content:
def test_clf_keyword():
    # test if existing figure is cleared with figure() and subplots()
    text1 = 'A fancy plot'
    text2 = 'Really fancy!'

    fig0 = plt.figure(num=1)
    fig0.suptitle(text1)
    assert [t.get_text() for t in fig0.texts] == [text1]

    fig1 = plt.figure(num=1, clear=False)
    fig1.text(0.5, 0.5, text2)
    assert fig0 is fig1
    assert [t.get_text() for t in fig1.texts] == [text1, text2]

    fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)
    assert fig0 is fig2
    assert [t.get_text() for t in fig2.texts] == []

File: lib/matplotlib/tests/test_figure.py
Line number range: 690 - 769
Content:
@pytest.mark.parametrize('clear_meth', ['clear', 'clf'])
def test_figure_clear(clear_meth):
    # we test the following figure clearing scenarios:
    fig = plt.figure()

    # a) an empty figure
    fig.clear()
    assert fig.axes == []

    # b) a figure with a single unnested axes
    ax = fig.add_subplot(111)
    getattr(fig, clear_meth)()
    assert fig.axes == []

    # c) a figure multiple unnested axes
    axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]
    getattr(fig, clear_meth)()
    assert fig.axes == []

    # d) a figure with a subfigure
    gs = fig.add_gridspec(ncols=2, nrows=1)
    subfig = fig.add_subfigure(gs[0])
    subaxes = subfig.add_subplot(111)
    getattr(fig, clear_meth)()
    assert subfig not in fig.subfigs
    assert fig.axes == []

    # e) a figure with a subfigure and a subplot
    subfig = fig.add_subfigure(gs[0])
    subaxes = subfig.add_subplot(111)
    mainaxes = fig.add_subplot(gs[1])

    # e.1) removing just the axes leaves the subplot
    mainaxes.remove()
    assert fig.axes == [subaxes]

    # e.2) removing just the subaxes leaves the subplot
    # and subfigure
    mainaxes = fig.add_subplot(gs[1])
    subaxes.remove()
    assert fig.axes == [mainaxes]
    assert subfig in fig.subfigs

    # e.3) clearing the subfigure leaves the subplot
    subaxes = subfig.add_subplot(111)
    assert mainaxes in fig.axes
    assert subaxes in fig.axes
    getattr(subfig, clear_meth)()
    assert subfig in fig.subfigs
    assert subaxes not in subfig.axes
    assert subaxes not in fig.axes
    assert mainaxes in fig.axes

    # e.4) clearing the whole thing
    subaxes = subfig.add_subplot(111)
    getattr(fig, clear_meth)()
    assert fig.axes == []
    assert fig.subfigs == []

    # f) multiple subfigures
    subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]
    subaxes = [sfig.add_subplot(111) for sfig in subfigs]
    assert all(ax in fig.axes for ax in subaxes)
    assert all(sfig in fig.subfigs for sfig in subfigs)

    # f.1) clearing only one subfigure
    getattr(subfigs[0], clear_meth)()
    assert subaxes[0] not in fig.axes
    assert subaxes[1] in fig.axes
    assert subfigs[1] in fig.subfigs

    # f.2) clearing the whole thing
    getattr(subfigs[1], clear_meth)()
    subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]
    subaxes = [sfig.add_subplot(111) for sfig in subfigs]
    assert all(ax in fig.axes for ax in subaxes)
    assert all(sfig in fig.subfigs for sfig in subfigs)
    getattr(fig, clear_meth)()
    assert fig.subfigs == []
    assert fig.axes == []


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 08:46:13,014 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to find test cases that verify the state of an Artist's `.axes` and `.figure` attributes after being removed.\n   - The query specifically mentions `artist.remove()`.\n2. Extended relevance:\n   - This test case directly implements the required functionality.\n   - It adds artists to an axes, calls `artist.remove()` on them, and then explicitly asserts that `art.axes is None` and `art.figure is None`.\n   - This is a perfect match for the behavior described in the user's query and bug report.", relative_path='lib/matplotlib/tests/test_artist.py', start_line=188, end_line=214), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's refined query asks for test cases related to `figure.clf()`.\n   - The user wants to verify the state of artists after a clearing operation.\n2. Extended relevance:\n   - This test is parameterized to test both `figure.clear()` and `figure.clf()`.\n   - It covers multiple scenarios of clearing a figure, including figures with axes, and subfigures.\n   - It asserts that the `axes` list of the figure is empty after the clear operation. This is a critical check for the container's state, which is directly related to the bug where child artists are not being correctly updated when their parent axes is removed from the figure.", relative_path='lib/matplotlib/tests/test_figure.py', start_line=690, end_line=769), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's bug report is specifically about `axes.cla()` not unsetting the `.axes` attribute of an artist.\n   - The user is looking for tests that demonstrate similar functionality.\n2. Extended relevance:\n   - This test case demonstrates the usage of `ax.cla()` to clear an axes and reset its properties.\n   - It adds an artist (`imshow`), then calls `cla()`, then adds another artist (`plot`), and asserts that the axes properties (in this case, `inverted`) are correctly updated.\n   - This provides a strong pattern for writing a test for the reported bug: add an artist, call `cla()`, and then assert the state of the cleared artist.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=438, end_line=487), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is interested in tests that clear a figure and verify the state of its contents.\n   - The query mentions `clf()` and clearing operations in general.\n2. Extended relevance:\n   - This test case checks the `clear=True` keyword argument of `plt.subplots()`, which is another way to clear a figure.\n   - It asserts that the figure's list of text artists is empty after the clear operation (`[t.get_text() for t in fig2.texts] == []`).\n   - This is analogous to the user's issue, where artists on an axes should be deparented. It shows a test verifying that child elements are removed from a container after it's cleared.", relative_path='lib/matplotlib/tests/test_figure.py', start_line=144, end_line=160), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user's bug report is about `axes.cla()`.\n   - The user is looking for existing test cases that test functionality related to `cla()`.\n2. Extended relevance:\n   - This test case specifically checks the behavior of `ax.cla()` in the context of twinned axes.\n   - It asserts that various properties of the axes (e.g., `xaxis.get_visible()`, `patch.get_visible()`) are correctly set after `cla()` is called.\n   - This provides another example of a test that verifies the state of an `Axes` object after it has been cleared, which is relevant to the user's problem of verifying state changes after a `cla()` call.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=336, end_line=356)]
2025-10-06 08:46:13,015 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='lib/matplotlib/tests/test_axes.py', content='438. def test_inverted_cla():\n439.     # GitHub PR #5450. Setting autoscale should reset\n440.     # axes to be non-inverted.\n441.     # plotting an image, then 1d graph, axis is now down\n442.     fig = plt.figure(0)\n443.     ax = fig.gca()\n444.     # 1. test that a new axis is not inverted per default\n445.     assert not ax.xaxis_inverted()\n446.     assert not ax.yaxis_inverted()\n447.     img = np.random.random((100, 100))\n448.     ax.imshow(img)\n449.     # 2. test that a image axis is inverted\n450.     assert not ax.xaxis_inverted()\n451.     assert ax.yaxis_inverted()\n452.     # 3. test that clearing and plotting a line, axes are\n453.     # not inverted\n454.     ax.cla()\n455.     x = np.linspace(0, 2*np.pi, 100)\n456.     ax.plot(x, np.cos(x))\n457.     assert not ax.xaxis_inverted()\n458.     assert not ax.yaxis_inverted()\n459. \n460.     # 4. autoscaling should not bring back axes to normal\n461.     ax.cla()\n462.     ax.imshow(img)\n463.     plt.autoscale()\n464.     assert not ax.xaxis_inverted()\n465.     assert ax.yaxis_inverted()\n466. \n467.     for ax in fig.axes:\n468.         ax.remove()\n469.     # 5. two shared axes. Inverting the leader axis should invert the shared\n470.     # axes; clearing the leader axis should bring axes in shared\n471.     # axes back to normal.\n472.     ax0 = plt.subplot(211)\n473.     ax1 = plt.subplot(212, sharey=ax0)\n474.     ax0.yaxis.set_inverted(True)\n475.     assert ax1.yaxis_inverted()\n476.     ax1.plot(x, np.cos(x))\n477.     ax0.cla()\n478.     assert not ax1.yaxis_inverted()\n479.     ax1.cla()\n480.     # 6. clearing the follower should not touch limits\n481.     ax0.imshow(img)\n482.     ax1.plot(x, np.cos(x))\n483.     ax1.cla()\n484.     assert ax.yaxis_inverted()\n485. \n486.     # clean up\n487.     plt.close(fig)\n488. ', start_line_number=438, end_line_number=488), Context(relative_path='lib/matplotlib/tests/test_axes.py', content='336. def test_twinx_cla():\n337.     fig, ax = plt.subplots()\n338.     ax2 = ax.twinx()\n339.     ax3 = ax2.twiny()\n340.     plt.draw()\n341.     assert not ax2.xaxis.get_visible()\n342.     assert not ax2.patch.get_visible()\n343.     ax2.cla()\n344.     ax3.cla()\n345. \n346.     assert not ax2.xaxis.get_visible()\n347.     assert not ax2.patch.get_visible()\n348.     assert ax2.yaxis.get_visible()\n349. \n350.     assert ax3.xaxis.get_visible()\n351.     assert not ax3.patch.get_visible()\n352.     assert not ax3.yaxis.get_visible()\n353. \n354.     assert ax.xaxis.get_visible()\n355.     assert ax.patch.get_visible()\n356.     assert ax.yaxis.get_visible()\n357. \n358. ', start_line_number=336, end_line_number=358), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="144. def test_clf_keyword():\n145.     # test if existing figure is cleared with figure() and subplots()\n146.     text1 = 'A fancy plot'\n147.     text2 = 'Really fancy!'\n148. \n149.     fig0 = plt.figure(num=1)\n150.     fig0.suptitle(text1)\n151.     assert [t.get_text() for t in fig0.texts] == [text1]\n152. \n153.     fig1 = plt.figure(num=1, clear=False)\n154.     fig1.text(0.5, 0.5, text2)\n155.     assert fig0 is fig1\n156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]\n157. \n158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n159.     assert fig0 is fig2\n160.     assert [t.get_text() for t in fig2.texts] == []\n161. ", start_line_number=144, end_line_number=161), Context(relative_path='lib/matplotlib/tests/test_figure.py', content='357. def test_axes_remove():\n358.     fig, axs = plt.subplots(2, 2)\n359.     axs[-1, -1].remove()\n360.     for ax in axs.ravel()[:-1]:\n361.         assert ax in fig.axes\n362.     assert axs[-1, -1] not in fig.axes\n363.     assert len(fig.axes) == 3\n364. ', start_line_number=357, end_line_number=364), Context(relative_path='lib/matplotlib/tests/test_axes.py', content="490. def test_subclass_clear_cla():\n491.     # Ensure that subclasses of Axes call cla/clear correctly.\n492.     # Note, we cannot use mocking here as we want to be sure that the\n493.     # superclass fallback does not recurse.\n494. \n495.     with pytest.warns(PendingDeprecationWarning,\n496.                       match='Overriding `Axes.cla`'):\n497.         class ClaAxes(Axes):\n498.             def cla(self):\n499.                 nonlocal called\n500.                 called = True\n501. \n502.     with pytest.warns(PendingDeprecationWarning,\n503.                       match='Overriding `Axes.cla`'):\n504.         class ClaSuperAxes(Axes):\n505.             def cla(self):\n506.                 nonlocal called\n507.                 called = True\n508.                 super().cla()\n509. \n510.     class SubClaAxes(ClaAxes):\n511.         pass\n512. \n513.     class ClearAxes(Axes):\n514.         def clear(self):\n515.             nonlocal called\n516.             called = True\n517. \n518.     class ClearSuperAxes(Axes):\n519.         def clear(self):\n520.             nonlocal called\n521.             called = True\n522.             super().clear()\n523. \n524.     class SubClearAxes(ClearAxes):\n525.         pass\n526. \n527.     fig = Figure()\n528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:\n530.         called = False\n531.         ax = axes_class(fig, [0, 0, 1, 1])\n532.         # Axes.__init__ has already called clear (which aliases to cla or is in\n533.         # the subclass).\n534.         assert called\n535. \n536.         called = False\n537.         ax.cla()\n538.         assert called", start_line_number=490, end_line_number=538), Context(relative_path='lib/matplotlib/tests/test_artist.py', content='188. def test_remove():\n189.     fig, ax = plt.subplots()\n190.     im = ax.imshow(np.arange(36).reshape(6, 6))\n191.     ln, = ax.plot(range(5))\n192. \n193.     assert fig.stale\n194.     assert ax.stale\n195. \n196.     fig.canvas.draw()\n197.     assert not fig.stale\n198.     assert not ax.stale\n199.     assert not ln.stale\n200. \n201.     assert im in ax._mouseover_set\n202.     assert ln not in ax._mouseover_set\n203.     assert im.axes is ax\n204. \n205.     im.remove()\n206.     ln.remove()\n207. \n208.     for art in [im, ln]:\n209.         assert art.axes is None\n210.         assert art.figure is None\n211. \n212.     assert im not in ax._mouseover_set\n213.     assert fig.stale\n214.     assert ax.stale', start_line_number=188, end_line_number=214), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="690. @pytest.mark.parametrize('clear_meth', ['clear', 'clf'])\n691. def test_figure_clear(clear_meth):\n692.     # we test the following figure clearing scenarios:\n693.     fig = plt.figure()\n694. \n695.     # a) an empty figure\n696.     fig.clear()\n697.     assert fig.axes == []\n698. \n699.     # b) a figure with a single unnested axes\n700.     ax = fig.add_subplot(111)\n701.     getattr(fig, clear_meth)()\n702.     assert fig.axes == []\n703. \n704.     # c) a figure multiple unnested axes\n705.     axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]\n706.     getattr(fig, clear_meth)()\n707.     assert fig.axes == []\n708. \n709.     # d) a figure with a subfigure\n710.     gs = fig.add_gridspec(ncols=2, nrows=1)\n711.     subfig = fig.add_subfigure(gs[0])\n712.     subaxes = subfig.add_subplot(111)\n713.     getattr(fig, clear_meth)()\n714.     assert subfig not in fig.subfigs\n715.     assert fig.axes == []\n716. \n717.     # e) a figure with a subfigure and a subplot\n718.     subfig = fig.add_subfigure(gs[0])\n719.     subaxes = subfig.add_subplot(111)\n720.     mainaxes = fig.add_subplot(gs[1])\n721. \n722.     # e.1) removing just the axes leaves the subplot\n723.     mainaxes.remove()\n724.     assert fig.axes == [subaxes]\n725. \n726.     # e.2) removing just the subaxes leaves the subplot\n727.     # and subfigure\n728.     mainaxes = fig.add_subplot(gs[1])\n729.     subaxes.remove()\n730.     assert fig.axes == [mainaxes]\n731.     assert subfig in fig.subfigs\n732. \n733.     # e.3) clearing the subfigure leaves the subplot\n734.     subaxes = subfig.add_subplot(111)\n735.     assert mainaxes in fig.axes\n736.     assert subaxes in fig.axes\n737.     getattr(subfig, clear_meth)()\n738.     assert subfig in fig.subfigs\n739.     assert subaxes not in subfig.axes\n740.     assert subaxes not in fig.axes\n741.     assert mainaxes in fig.axes\n742. \n743.     # e.4) clearing the whole thing\n744.     subaxes = subfig.add_subplot(111)\n745.     getattr(fig, clear_meth)()\n746.     assert fig.axes == []\n747.     assert fig.subfigs == []\n748. \n749.     # f) multiple subfigures\n750.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n751.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n752.     assert all(ax in fig.axes for ax in subaxes)\n753.     assert all(sfig in fig.subfigs for sfig in subfigs)\n754. \n755.     # f.1) clearing only one subfigure\n756.     getattr(subfigs[0], clear_meth)()\n757.     assert subaxes[0] not in fig.axes\n758.     assert subaxes[1] in fig.axes\n759.     assert subfigs[1] in fig.subfigs\n760. \n761.     # f.2) clearing the whole thing\n762.     getattr(subfigs[1], clear_meth)()\n763.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n764.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n765.     assert all(ax in fig.axes for ax in subaxes)\n766.     assert all(sfig in fig.subfigs for sfig in subfigs)\n767.     getattr(fig, clear_meth)()\n768.     assert fig.subfigs == []\n769.     assert fig.axes == []", start_line_number=690, end_line_number=769)]
2025-10-06 08:46:13,016 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 08:46:13,016 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   └── deploy-docs.sh
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildsdist.yml
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       └── tests.yml
├── .lgtm.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   └── codespell-ignore-words.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── markers
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   └── function.rst
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23573-AL.rst
|   |   |   |   ├── 23579-AL.rst
|   |   |   |   ├── 23710-ES.rst
|   |   |   |   ├── 24062-tb.rst
|   |   |   |   ├── 24132-GL.rst
|   |   |   |   ├── 24189-JB.rst
|   |   |   |   └── 24570-GL.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23449-SS.rst
|   |   |   |   ├── 23720-RS.rst
|   |   |   |   ├── 23735-ES.rst
|   |   |   |   ├── 23824-OG.rst
|   |   |   |   ├── 24000-TH.rst
|   |   |   |   ├── 24013-TH.rst
|   |   |   |   ├── 24088-JMK.rst
|   |   |   |   ├── 24140-AL.rst
|   |   |   |   ├── 24144-AL.rst
|   |   |   |   ├── 24198-AL.rst
|   |   |   |   ├── 24208-AL.rst
|   |   |   |   ├── 24220-AL.rst
|   |   |   |   ├── 24221-AL.rst
|   |   |   |   ├── 24224-OG.rst
|   |   |   |   ├── 24240-OG.rst
|   |   |   |   ├── 24305-AL.rst
|   |   |   |   ├── 24455-AL.rst
|   |   |   |   └── 24577-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23683-AL.rst
|   |   |   |   └── 24257-AL.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24125-OG.rst
|   |   |       ├── 24128-OG.rst
|   |   |       ├── 24129-OG.rst
|   |   |       ├── 24251-OG.rst
|   |   |       ├── 24253-OG.rst
|   |   |       ├── 24257-AL.rst
|   |   |       ├── 24355-OG.rst
|   |   |       ├── 24356-OG.rst
|   |   |       └── 24624-AL.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.6.0.rst
|   |   ├── projections_api.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── textpath_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contributing.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── documenting_mpl.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── maintainer_workflow.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── explain
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── fonts.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   ├── performance.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_pane_color_rcparams.rst
|       |   ├── 3d_plot_aspects_adjustable_keyword.rst
|       |   ├── 3d_plot_pan_zoom.rst
|       |   ├── README.rst
|       |   ├── bar_label_formatting.rst
|       |   ├── colorbar_has_location_argument.rst
|       |   ├── imshow_extent_units.rst
|       |   ├── polar_errorbar_caps.rst
|       |   ├── rgba_pcolormesh.rst
|       |   ├── shade_poly3dcollection.rst
|       |   ├── show_source_links_directive_option.rst
|       |   ├── styles_from_packages.rst
|       |   └── view_current_axis_format.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   └── whats_new_3.6.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── examples
|   ├── README.txt
|   ├── animation
|   |   ├── README.txt
|   |   ├── animate_decay.py
|   |   ├── animated_histogram.py
|   |   ├── animation_demo.py
|   |   ├── bayes_update.py
|   |   ├── double_pendulum.py
|   |   ├── dynamic_image.py
|   |   ├── frame_grabbing_sgskip.py
|   |   ├── multiple_axes.py
|   |   ├── pause_resume.py
|   |   ├── rain.py
|   |   ├── random_walk.py
|   |   ├── simple_anim.py
|   |   ├── simple_scatter.py
|   |   ├── strip_chart.py
|   |   └── unchained.py
|   ├── axes_grid1
|   |   ├── README.txt
|   |   ├── demo_anchored_direction_arrows.py
|   |   ├── demo_axes_divider.py
|   |   ├── demo_axes_grid.py
|   |   ├── demo_axes_grid2.py
|   |   ├── demo_axes_hbox_divider.py
|   |   ├── demo_axes_rgb.py
|   |   ├── demo_colorbar_of_inset_axes.py
|   |   ├── demo_colorbar_with_axes_divider.py
|   |   ├── demo_colorbar_with_inset_locator.py
|   |   ├── demo_edge_colorbar.py
|   |   ├── demo_fixed_size_axes.py
|   |   ├── demo_imagegrid_aspect.py
|   |   ├── inset_locator_demo.py
|   |   ├── inset_locator_demo2.py
|   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   ├── parasite_simple.py
|   |   ├── parasite_simple2.py
|   |   ├── scatter_hist_locatable_axes.py
|   |   ├── simple_anchored_artists.py
|   |   ├── simple_axes_divider1.py
|   |   ├── simple_axes_divider3.py
|   |   ├── simple_axesgrid.py
|   |   ├── simple_axesgrid2.py
|   |   ├── simple_axisline4.py
|   |   └── simple_colorbar.py
|   ├── axisartist
|   |   ├── README.txt
|   |   ├── axis_direction.py
|   |   ├── demo_axis_direction.py
|   |   ├── demo_axisline_style.py
|   |   ├── demo_curvelinear_grid.py
|   |   ├── demo_curvelinear_grid2.py
|   |   ├── demo_floating_axes.py
|   |   ├── demo_floating_axis.py
|   |   ├── demo_parasite_axes.py
|   |   ├── demo_parasite_axes2.py
|   |   ├── demo_ticklabel_alignment.py
|   |   ├── demo_ticklabel_direction.py
|   |   ├── simple_axis_direction01.py
|   |   ├── simple_axis_direction03.py
|   |   ├── simple_axis_pad.py
|   |   ├── simple_axisartist1.py
|   |   ├── simple_axisline.py
|   |   └── simple_axisline3.py
|   ├── color
|   |   ├── README.txt
|   |   ├── color_by_yvalue.py
|   |   ├── color_cycle_default.py
|   |   ├── color_demo.py
|   |   ├── colorbar_basics.py
|   |   ├── colormap_reference.py
|   |   ├── custom_cmap.py
|   |   └── named_colors.py
|   ├── event_handling
|   |   ├── README.txt
|   |   ├── close_event.py
|   |   ├── coords_demo.py
|   |   ├── cursor_demo.py
|   |   ├── data_browser.py
|   |   ├── figure_axes_enter_leave.py
|   |   ├── ginput_manual_clabel_sgskip.py
|   |   ├── image_slices_viewer.py
|   |   ├── keypress_demo.py
|   |   ├── lasso_demo.py
|   |   ├── legend_picking.py
|   |   ├── looking_glass.py
|   |   ├── path_editor.py
|   |   ├── pick_event_demo.py
|   |   ├── pick_event_demo2.py
|   |   ├── poly_editor.py
|   |   ├── pong_sgskip.py
|   |   ├── resample.py
|   |   ├── timers.py
|   |   ├── trifinder_event_demo.py
|   |   ├── viewlims.py
|   |   └── zoom_window.py
|   ├── images_contours_and_fields
|   |   ├── README.txt
|   |   ├── affine_image.py
|   |   ├── barb_demo.py
|   |   ├── barcode_demo.py
|   |   ├── colormap_interactive_adjustment.py
|   |   ├── colormap_normalizations.py
|   |   ├── colormap_normalizations_symlognorm.py
|   |   ├── contour_corner_mask.py
|   |   ├── contour_demo.py
|   |   ├── contour_image.py
|   |   ├── contour_label_demo.py
|   |   ├── contourf_demo.py
|   |   ├── contourf_hatching.py
|   |   ├── contourf_log.py
|   |   ├── contours_in_optimization_demo.py
|   |   ├── demo_bboximage.py
|   |   ├── figimage_demo.py
|   |   ├── image_annotated_heatmap.py
|   |   ├── image_antialiasing.py
|   |   ├── image_clip_path.py
|   |   ├── image_demo.py
|   |   ├── image_masked.py
|   |   ├── image_nonuniform.py
|   |   ├── image_transparency_blend.py
|   |   ├── image_zcoord.py
|   |   ├── interpolation_methods.py
|   |   ├── irregulardatagrid.py
|   |   ├── layer_images.py
|   |   ├── matshow.py
|   |   ├── multi_image.py
|   |   ├── pcolor_demo.py
|   |   ├── pcolormesh_grids.py
|   |   ├── pcolormesh_levels.py
|   |   ├── plot_streamplot.py
|   |   ├── quadmesh_demo.py
|   |   ├── quiver_demo.py
|   |   ├── quiver_simple_demo.py
|   |   ├── shading_example.py
|   |   ├── specgram_demo.py
|   |   ├── spy_demos.py
|   |   ├── tricontour_demo.py
|   |   ├── tricontour_smooth_delaunay.py
|   |   ├── tricontour_smooth_user.py
|   |   ├── trigradient_demo.py
|   |   ├── triinterp_demo.py
|   |   ├── tripcolor_demo.py
|   |   ├── triplot_demo.py
|   |   └── watermark_image.py
|   ├── lines_bars_and_markers
|   |   ├── README.txt
|   |   ├── bar_colors.py
|   |   ├── bar_label_demo.py
|   |   ├── bar_stacked.py
|   |   ├── barchart.py
|   |   ├── barh.py
|   |   ├── broken_barh.py
|   |   ├── capstyle.py
|   |   ├── categorical_variables.py
|   |   ├── cohere.py
|   |   ├── csd_demo.py
|   |   ├── curve_error_band.py
|   |   ├── errorbar_limits_simple.py
|   |   ├── errorbar_subsample.py
|   |   ├── eventcollection_demo.py
|   |   ├── eventplot_demo.py
|   |   ├── fill.py
|   |   ├── fill_between_alpha.py
|   |   ├── fill_between_demo.py
|   |   ├── fill_betweenx_demo.py
|   |   ├── filled_step.py
|   |   ├── gradient_bar.py
|   |   ├── hat_graph.py
|   |   ├── horizontal_barchart_distribution.py
|   |   ├── joinstyle.py
|   |   ├── line_demo_dash_control.py
|   |   ├── lines_with_ticks_demo.py
|   |   ├── linestyles.py
|   |   ├── marker_reference.py
|   |   ├── markevery_demo.py
|   |   ├── masked_demo.py
|   |   ├── multicolored_line.py
|   |   ├── multivariate_marker_plot.py
|   |   ├── psd_demo.py
|   |   ├── scatter_custom_symbol.py
|   |   ├── scatter_demo2.py
|   |   ├── scatter_hist.py
|   |   ├── scatter_masked.py
|   |   ├── scatter_star_poly.py
|   |   ├── scatter_with_legend.py
|   |   ├── simple_plot.py
|   |   ├── span_regions.py
|   |   ├── spectrum_demo.py
|   |   ├── stackplot_demo.py
|   |   ├── stairs_demo.py
|   |   ├── stem_plot.py
|   |   ├── step_demo.py
|   |   ├── timeline.py
|   |   ├── vline_hline_demo.py
|   |   └── xcorr_acorr_demo.py
|   ├── misc
|   |   ├── README.txt
|   |   ├── anchored_artists.py
|   |   ├── bbox_intersect.py
|   |   ├── contour_manual.py
|   |   ├── coords_report.py
|   |   ├── custom_projection.py
|   |   ├── customize_rc.py
|   |   ├── demo_agg_filter.py
|   |   ├── demo_ribbon_box.py
|   |   ├── fig_x.py
|   |   ├── fill_spiral.py
|   |   ├── findobj_demo.py
|   |   ├── font_indexing.py
|   |   ├── ftface_props.py
|   |   ├── histogram_path.py
|   |   ├── hyperlinks_sgskip.py
|   |   ├── image_thumbnail_sgskip.py
|   |   ├── keyword_plotting.py
|   |   ├── logos2.py
|   |   ├── multipage_pdf.py
|   |   ├── multiprocess_sgskip.py
|   |   ├── packed_bubbles.py
|   |   ├── patheffect_demo.py
|   |   ├── print_stdout_sgskip.py
|   |   ├── rasterization_demo.py
|   |   ├── set_and_get.py
|   |   ├── svg_filter_line.py
|   |   ├── svg_filter_pie.py
|   |   ├── table_demo.py
|   |   ├── tickedstroke_demo.py
|   |   ├── transoffset.py
|   |   └── zorder_demo.py
|   ├── mplot3d
|   |   ├── 2dcollections3d.py
|   |   ├── 3d_bars.py
|   |   ├── README.txt
|   |   ├── bars3d.py
|   |   ├── box3d.py
|   |   ├── contour3d.py
|   |   ├── contour3d_2.py
|   |   ├── contour3d_3.py
|   |   ├── contourf3d.py
|   |   ├── contourf3d_2.py
|   |   ├── custom_shaded_3d_surface.py
|   |   ├── errorbar3d.py
|   |   ├── hist3d.py
|   |   ├── lines3d.py
|   |   ├── lorenz_attractor.py
|   |   ├── mixed_subplots.py
|   |   ├── offset.py
|   |   ├── pathpatch3d.py
|   |   ├── polys3d.py
|   |   ├── projections.py
|   |   ├── quiver3d.py
|   |   ├── rotate_axes3d_sgskip.py
|   |   ├── scatter3d.py
|   |   ├── stem3d_demo.py
|   |   ├── subplot3d.py
|   |   ├── surface3d.py
|   |   ├── surface3d_2.py
|   |   ├── surface3d_3.py
|   |   ├── surface3d_radial.py
|   |   ├── text3d.py
|   |   ├── tricontour3d.py
|   |   ├── tricontourf3d.py
|   |   ├── trisurf3d.py
|   |   ├── trisurf3d_2.py
|   |   ├── view_planes_3d.py
|   |   ├── voxels.py
|   |   ├── voxels_numpy_logo.py
|   |   ├── voxels_rgb.py
|   |   ├── voxels_torus.py
|   |   ├── wire3d.py
|   |   ├── wire3d_animation_sgskip.py
|   |   └── wire3d_zero_stride.py
|   ├── pie_and_polar_charts
|   |   ├── README.txt
|   |   ├── bar_of_pie.py
|   |   ├── nested_pie.py
|   |   ├── pie_and_donut_labels.py
|   |   ├── pie_demo2.py
|   |   ├── pie_features.py
|   |   ├── polar_bar.py
|   |   ├── polar_demo.py
|   |   ├── polar_error_caps.py
|   |   ├── polar_legend.py
|   |   └── polar_scatter.py
|   ├── pyplots
|   |   ├── README.txt
|   |   ├── axline.py
|   |   ├── pyplot_mathtext.py
|   |   ├── pyplot_simple.py
|   |   ├── pyplot_text.py
|   |   ├── pyplot_three.py
|   |   └── pyplot_two_subplots.py
|   ├── scales
|   |   ├── README.txt
|   |   ├── asinh_demo.py
|   |   ├── aspect_loglog.py
|   |   ├── custom_scale.py
|   |   ├── log_bar.py
|   |   ├── log_demo.py
|   |   ├── logit_demo.py
|   |   ├── power_norm.py
|   |   ├── scales.py
|   |   ├── semilogx_demo.py
|   |   └── symlog_demo.py
|   ├── shapes_and_collections
|   |   ├── README.txt
|   |   ├── arrow_guide.py
|   |   ├── artist_reference.py
|   |   ├── collections.py
|   |   ├── compound_path.py
|   |   ├── dolphin.py
|   |   ├── donut.py
|   |   ├── ellipse_collection.py
|   |   ├── ellipse_demo.py
|   |   ├── fancybox_demo.py
|   |   ├── hatch_demo.py
|   |   ├── hatch_style_reference.py
|   |   ├── line_collection.py
|   |   ├── patch_collection.py
|   |   ├── path_patch.py
|   |   ├── quad_bezier.py
|   |   └── scatter.py
|   ├── showcase
|   |   ├── README.txt
|   |   ├── anatomy.py
|   |   ├── firefox.py
|   |   ├── integral.py
|   |   ├── mandelbrot.py
|   |   ├── stock_prices.py
|   |   └── xkcd.py
|   ├── specialty_plots
|   |   ├── README.txt
|   |   ├── advanced_hillshading.py
|   |   ├── anscombe.py
|   |   ├── hinton_demo.py
|   |   ├── leftventricle_bulleye.py
|   |   ├── mri_demo.py
|   |   ├── mri_with_eeg.py
|   |   ├── radar_chart.py
|   |   ├── sankey_basics.py
|   |   ├── sankey_links.py
|   |   ├── sankey_rankine.py
|   |   ├── skewt.py
|   |   └── topographic_hillshading.py
|   ├── spines
|   |   ├── README.txt
|   |   ├── centered_spines_with_arrows.py
|   |   ├── multiple_yaxis_with_spines.py
|   |   ├── spine_placement_demo.py
|   |   ├── spines.py
|   |   └── spines_dropped.py
|   ├── statistics
|   |   ├── README.txt
|   |   ├── barchart_demo.py
|   |   ├── boxplot.py
|   |   ├── boxplot_color.py
|   |   ├── boxplot_demo.py
|   |   ├── boxplot_vs_violin.py
|   |   ├── bxp.py
|   |   ├── confidence_ellipse.py
|   |   ├── customized_violin.py
|   |   ├── errorbar.py
|   |   ├── errorbar_features.py
|   |   ├── errorbar_limits.py
|   |   ├── errorbars_and_boxes.py
|   |   ├── hexbin_demo.py
|   |   ├── hist.py
|   |   ├── histogram_cumulative.py
|   |   ├── histogram_features.py
|   |   ├── histogram_histtypes.py
|   |   ├── histogram_multihist.py
|   |   ├── multiple_histograms_side_by_side.py
|   |   ├── time_series_histogram.py
|   |   └── violinplot.py
|   ├── style_sheets
|   |   ├── README.txt
|   |   ├── bmh.py
|   |   ├── dark_background.py
|   |   ├── fivethirtyeight.py
|   |   ├── ggplot.py
|   |   ├── grayscale.py
|   |   ├── plot_solarizedlight2.py
|   |   └── style_sheets_reference.py
|   ├── subplots_axes_and_figures
|   |   ├── README.txt
|   |   ├── align_labels_demo.py
|   |   ├── auto_subplots_adjust.py
|   |   ├── axes_box_aspect.py
|   |   ├── axes_demo.py
|   |   ├── axes_margins.py
|   |   ├── axes_props.py
|   |   ├── axes_zoom_effect.py
|   |   ├── axhspan_demo.py
|   |   ├── axis_equal_demo.py
|   |   ├── axis_labels_demo.py
|   |   ├── broken_axis.py
|   |   ├── colorbar_placement.py
|   |   ├── custom_figure_class.py
|   |   ├── demo_constrained_layout.py
|   |   ├── demo_tight_layout.py
|   |   ├── fahrenheit_celsius_scales.py
|   |   ├── figure_size_units.py
|   |   ├── figure_title.py
|   |   ├── ganged_plots.py
|   |   ├── geo_demo.py
|   |   ├── gridspec_and_subplots.py
|   |   ├── gridspec_multicolumn.py
|   |   ├── gridspec_nested.py
|   |   ├── invert_axes.py
|   |   ├── multiple_figs_demo.py
|   |   ├── secondary_axis.py
|   |   ├── share_axis_lims_views.py
|   |   ├── shared_axis_demo.py
|   |   ├── subfigures.py
|   |   ├── subplot.py
|   |   ├── subplots_adjust.py
|   |   ├── subplots_demo.py
|   |   ├── two_scales.py
|   |   └── zoom_inset_axes.py
|   ├── text_labels_and_annotations
|   |   ├── README.txt
|   |   ├── accented_text.py
|   |   ├── align_ylabels.py
|   |   ├── angle_annotation.py
|   |   ├── angles_on_bracket_arrows.py
|   |   ├── annotate_transform.py
|   |   ├── annotation_basic.py
|   |   ├── annotation_demo.py
|   |   ├── annotation_polar.py
|   |   ├── arrow_demo.py
|   |   ├── autowrap.py
|   |   ├── custom_legends.py
|   |   ├── date.py
|   |   ├── demo_annotation_box.py
|   |   ├── demo_text_path.py
|   |   ├── demo_text_rotation_mode.py
|   |   ├── dfrac_demo.py
|   |   ├── engineering_formatter.py
|   |   ├── fancyarrow_demo.py
|   |   ├── fancytextbox_demo.py
|   |   ├── figlegend_demo.py
|   |   ├── font_family_rc.py
|   |   ├── font_file.py
|   |   ├── font_table.py
|   |   ├── fonts_demo.py
|   |   ├── fonts_demo_kw.py
|   |   ├── label_subplots.py
|   |   ├── legend.py
|   |   ├── legend_demo.py
|   |   ├── line_with_text.py
|   |   ├── mathtext_asarray.py
|   |   ├── mathtext_demo.py
|   |   ├── mathtext_examples.py
|   |   ├── mathtext_fontfamily_example.py
|   |   ├── multiline.py
|   |   ├── placing_text_boxes.py
|   |   ├── rainbow_text.py
|   |   ├── stix_fonts_demo.py
|   |   ├── tex_demo.py
|   |   ├── text_alignment.py
|   |   ├── text_commands.py
|   |   ├── text_fontdict.py
|   |   ├── text_rotation_relative_to_line.py
|   |   ├── titles_demo.py
|   |   ├── unicode_minus.py
|   |   ├── usetex_baseline_test.py
|   |   ├── usetex_fonteffects.py
|   |   └── watermark_text.py
|   ├── ticks
|   |   ├── README.txt
|   |   ├── auto_ticks.py
|   |   ├── centered_ticklabels.py
|   |   ├── colorbar_tick_labelling_demo.py
|   |   ├── custom_ticker1.py
|   |   ├── date_concise_formatter.py
|   |   ├── date_demo_convert.py
|   |   ├── date_demo_rrule.py
|   |   ├── date_formatters_locators.py
|   |   ├── date_index_formatter.py
|   |   ├── date_precision_and_epochs.py
|   |   ├── dollar_ticks.py
|   |   ├── fig_axes_customize_simple.py
|   |   ├── major_minor_demo.py
|   |   ├── scalarformatter.py
|   |   ├── tick-formatters.py
|   |   ├── tick-locators.py
|   |   ├── tick_label_right.py
|   |   ├── tick_labels_from_values.py
|   |   ├── tick_xlabel_top.py
|   |   ├── ticklabels_rotation.py
|   |   └── ticks_too_many.py
|   ├── units
|   |   ├── README.txt
|   |   ├── annotate_with_units.py
|   |   ├── artist_tests.py
|   |   ├── bar_demo2.py
|   |   ├── bar_unit_demo.py
|   |   ├── basic_units.py
|   |   ├── ellipse_with_units.py
|   |   ├── evans_test.py
|   |   ├── radian_demo.py
|   |   ├── units_sample.py
|   |   └── units_scatter.py
|   ├── user_interfaces
|   |   ├── README.txt
|   |   ├── canvasagg.py
|   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   ├── embedding_in_gtk3_sgskip.py
|   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   ├── embedding_in_gtk4_sgskip.py
|   |   ├── embedding_in_qt_sgskip.py
|   |   ├── embedding_in_tk_sgskip.py
|   |   ├── embedding_in_wx2_sgskip.py
|   |   ├── embedding_in_wx3_sgskip.py
|   |   ├── embedding_in_wx4_sgskip.py
|   |   ├── embedding_in_wx5_sgskip.py
|   |   ├── embedding_webagg_sgskip.py
|   |   ├── fourier_demo_wx_sgskip.py
|   |   ├── gtk3_spreadsheet_sgskip.py
|   |   ├── gtk4_spreadsheet_sgskip.py
|   |   ├── mathtext_wx_sgskip.py
|   |   ├── mpl_with_glade3_sgskip.py
|   |   ├── pylab_with_gtk3_sgskip.py
|   |   ├── pylab_with_gtk4_sgskip.py
|   |   ├── svg_histogram_sgskip.py
|   |   ├── svg_tooltip_sgskip.py
|   |   ├── toolmanager_sgskip.py
|   |   ├── web_application_server_sgskip.py
|   |   └── wxcursor_demo_sgskip.py
|   ├── userdemo
|   |   ├── README.txt
|   |   ├── anchored_box04.py
|   |   ├── annotate_explain.py
|   |   ├── annotate_simple01.py
|   |   ├── annotate_simple02.py
|   |   ├── annotate_simple03.py
|   |   ├── annotate_simple04.py
|   |   ├── annotate_simple_coord01.py
|   |   ├── annotate_simple_coord02.py
|   |   ├── annotate_simple_coord03.py
|   |   ├── annotate_text_arrow.py
|   |   ├── connect_simple01.py
|   |   ├── connectionstyle_demo.py
|   |   ├── custom_boxstyle01.py
|   |   ├── demo_gridspec01.py
|   |   ├── demo_gridspec03.py
|   |   ├── demo_gridspec06.py
|   |   ├── pgf_fonts.py
|   |   ├── pgf_preamble_sgskip.py
|   |   ├── pgf_texsystem.py
|   |   ├── simple_annotate01.py
|   |   ├── simple_legend01.py
|   |   └── simple_legend02.py
|   └── widgets
|       ├── README.txt
|       ├── annotated_cursor.py
|       ├── buttons.py
|       ├── check_buttons.py
|       ├── cursor.py
|       ├── lasso_selector_demo_sgskip.py
|       ├── menu.py
|       ├── mouse_cursor.py
|       ├── multicursor.py
|       ├── polygon_selector_demo.py
|       ├── polygon_selector_simple.py
|       ├── radio_buttons.py
|       ├── range_slider.py
|       ├── rectangle_selector.py
|       ├── slider_demo.py
|       ├── slider_snap_demo.py
|       ├── span_selector.py
|       └── textbox.py
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── afm.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── css
|   |   |       └── js
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook
|   |   |   └── __init__.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── docstring.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── fontconfig_pattern.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── tight_bbox.py
|   |   ├── tight_layout.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── type1font.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── __init__.py
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           └── test_axes3d.py
|   └── pylab.py
├── plot_types
|   ├── 3D
|   |   ├── README.rst
|   |   ├── scatter3d_simple.py
|   |   ├── surface3d_simple.py
|   |   ├── trisurf3d_simple.py
|   |   ├── voxels_simple.py
|   |   └── wire3d_simple.py
|   ├── README.rst
|   ├── arrays
|   |   ├── README.rst
|   |   ├── barbs.py
|   |   ├── contour.py
|   |   ├── contourf.py
|   |   ├── imshow.py
|   |   ├── pcolormesh.py
|   |   ├── quiver.py
|   |   └── streamplot.py
|   ├── basic
|   |   ├── README.rst
|   |   ├── bar.py
|   |   ├── fill_between.py
|   |   ├── plot.py
|   |   ├── scatter_plot.py
|   |   ├── stackplot.py
|   |   ├── stem.py
|   |   └── step.py
|   ├── stats
|   |   ├── README.rst
|   |   ├── boxplot_plot.py
|   |   ├── errorbar_plot.py
|   |   ├── eventplot.py
|   |   ├── hexbin.py
|   |   ├── hist2d.py
|   |   ├── hist_plot.py
|   |   ├── pie.py
|   |   └── violin.py
|   └── unstructured
|       ├── README.rst
|       ├── tricontour.py
|       ├── tricontourf.py
|       ├── tripcolor.py
|       └── triplot.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       └── minver.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
├── tests.py
├── tools
|   ├── README.txt
|   ├── boilerplate.py
|   ├── cache_zenodo_svg.py
|   ├── create_DejaVuDisplay.sh
|   ├── embed_js.py
|   ├── gh_api.py
|   ├── github_stats.py
|   ├── make_icons.py
|   ├── memleak.py
|   ├── run_examples.py
|   ├── subset.py
|   ├── triage_tests.py
|   └── visualize_tests.py
└── tutorials
    ├── README.txt
    ├── advanced
    |   ├── README.txt
    |   ├── blitting.py
    |   ├── path_tutorial.py
    |   ├── patheffects_guide.py
    |   └── transforms_tutorial.py
    ├── colors
    |   ├── README.txt
    |   ├── colorbar_only.py
    |   ├── colormap-manipulation.py
    |   ├── colormapnorms.py
    |   ├── colormaps.py
    |   └── colors.py
    ├── intermediate
    |   ├── README.txt
    |   ├── arranging_axes.py
    |   ├── artists.py
    |   ├── autoscale.py
    |   ├── color_cycle.py
    |   ├── constrainedlayout_guide.py
    |   ├── imshow_extent.py
    |   ├── legend_guide.py
    |   └── tight_layout_guide.py
    ├── introductory
    |   ├── README.txt
    |   ├── animation_tutorial.py
    |   ├── customizing.py
    |   ├── images.py
    |   ├── lifecycle.py
    |   ├── pyplot.py
    |   └── quick_start.py
    ├── provisional
    |   ├── README.txt
    |   └── mosaic.py
    ├── text
    |   ├── README.txt
    |   ├── annotations.py
    |   ├── mathtext.py
    |   ├── pgf.py
    |   ├── text_intro.py
    |   ├── text_props.py
    |   └── usetex.py
    └── toolkits
        ├── README.txt
        ├── axes_grid.py
        ├── axisartist.py
        └── mplot3d.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_axes.py
Line number range: 438 - 488
Content:
438. def test_inverted_cla():
439.     # GitHub PR #5450. Setting autoscale should reset
440.     # axes to be non-inverted.
441.     # plotting an image, then 1d graph, axis is now down
442.     fig = plt.figure(0)
443.     ax = fig.gca()
444.     # 1. test that a new axis is not inverted per default
445.     assert not ax.xaxis_inverted()
446.     assert not ax.yaxis_inverted()
447.     img = np.random.random((100, 100))
448.     ax.imshow(img)
449.     # 2. test that a image axis is inverted
450.     assert not ax.xaxis_inverted()
451.     assert ax.yaxis_inverted()
452.     # 3. test that clearing and plotting a line, axes are
453.     # not inverted
454.     ax.cla()
455.     x = np.linspace(0, 2*np.pi, 100)
456.     ax.plot(x, np.cos(x))
457.     assert not ax.xaxis_inverted()
458.     assert not ax.yaxis_inverted()
459. 
460.     # 4. autoscaling should not bring back axes to normal
461.     ax.cla()
462.     ax.imshow(img)
463.     plt.autoscale()
464.     assert not ax.xaxis_inverted()
465.     assert ax.yaxis_inverted()
466. 
467.     for ax in fig.axes:
468.         ax.remove()
469.     # 5. two shared axes. Inverting the leader axis should invert the shared
470.     # axes; clearing the leader axis should bring axes in shared
471.     # axes back to normal.
472.     ax0 = plt.subplot(211)
473.     ax1 = plt.subplot(212, sharey=ax0)
474.     ax0.yaxis.set_inverted(True)
475.     assert ax1.yaxis_inverted()
476.     ax1.plot(x, np.cos(x))
477.     ax0.cla()
478.     assert not ax1.yaxis_inverted()
479.     ax1.cla()
480.     # 6. clearing the follower should not touch limits
481.     ax0.imshow(img)
482.     ax1.plot(x, np.cos(x))
483.     ax1.cla()
484.     assert ax.yaxis_inverted()
485. 
486.     # clean up
487.     plt.close(fig)
488. 


File: lib/matplotlib/tests/test_axes.py
Line number range: 336 - 358
Content:
336. def test_twinx_cla():
337.     fig, ax = plt.subplots()
338.     ax2 = ax.twinx()
339.     ax3 = ax2.twiny()
340.     plt.draw()
341.     assert not ax2.xaxis.get_visible()
342.     assert not ax2.patch.get_visible()
343.     ax2.cla()
344.     ax3.cla()
345. 
346.     assert not ax2.xaxis.get_visible()
347.     assert not ax2.patch.get_visible()
348.     assert ax2.yaxis.get_visible()
349. 
350.     assert ax3.xaxis.get_visible()
351.     assert not ax3.patch.get_visible()
352.     assert not ax3.yaxis.get_visible()
353. 
354.     assert ax.xaxis.get_visible()
355.     assert ax.patch.get_visible()
356.     assert ax.yaxis.get_visible()
357. 
358. 


File: lib/matplotlib/tests/test_figure.py
Line number range: 144 - 161
Content:
144. def test_clf_keyword():
145.     # test if existing figure is cleared with figure() and subplots()
146.     text1 = 'A fancy plot'
147.     text2 = 'Really fancy!'
148. 
149.     fig0 = plt.figure(num=1)
150.     fig0.suptitle(text1)
151.     assert [t.get_text() for t in fig0.texts] == [text1]
152. 
153.     fig1 = plt.figure(num=1, clear=False)
154.     fig1.text(0.5, 0.5, text2)
155.     assert fig0 is fig1
156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]
157. 
158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)
159.     assert fig0 is fig2
160.     assert [t.get_text() for t in fig2.texts] == []
161. 


File: lib/matplotlib/tests/test_figure.py
Line number range: 357 - 364
Content:
357. def test_axes_remove():
358.     fig, axs = plt.subplots(2, 2)
359.     axs[-1, -1].remove()
360.     for ax in axs.ravel()[:-1]:
361.         assert ax in fig.axes
362.     assert axs[-1, -1] not in fig.axes
363.     assert len(fig.axes) == 3
364. 


File: lib/matplotlib/tests/test_axes.py
Line number range: 490 - 538
Content:
490. def test_subclass_clear_cla():
491.     # Ensure that subclasses of Axes call cla/clear correctly.
492.     # Note, we cannot use mocking here as we want to be sure that the
493.     # superclass fallback does not recurse.
494. 
495.     with pytest.warns(PendingDeprecationWarning,
496.                       match='Overriding `Axes.cla`'):
497.         class ClaAxes(Axes):
498.             def cla(self):
499.                 nonlocal called
500.                 called = True
501. 
502.     with pytest.warns(PendingDeprecationWarning,
503.                       match='Overriding `Axes.cla`'):
504.         class ClaSuperAxes(Axes):
505.             def cla(self):
506.                 nonlocal called
507.                 called = True
508.                 super().cla()
509. 
510.     class SubClaAxes(ClaAxes):
511.         pass
512. 
513.     class ClearAxes(Axes):
514.         def clear(self):
515.             nonlocal called
516.             called = True
517. 
518.     class ClearSuperAxes(Axes):
519.         def clear(self):
520.             nonlocal called
521.             called = True
522.             super().clear()
523. 
524.     class SubClearAxes(ClearAxes):
525.         pass
526. 
527.     fig = Figure()
528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,
529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:
530.         called = False
531.         ax = axes_class(fig, [0, 0, 1, 1])
532.         # Axes.__init__ has already called clear (which aliases to cla or is in
533.         # the subclass).
534.         assert called
535. 
536.         called = False
537.         ax.cla()
538.         assert called


File: lib/matplotlib/tests/test_artist.py
Line number range: 188 - 214
Content:
188. def test_remove():
189.     fig, ax = plt.subplots()
190.     im = ax.imshow(np.arange(36).reshape(6, 6))
191.     ln, = ax.plot(range(5))
192. 
193.     assert fig.stale
194.     assert ax.stale
195. 
196.     fig.canvas.draw()
197.     assert not fig.stale
198.     assert not ax.stale
199.     assert not ln.stale
200. 
201.     assert im in ax._mouseover_set
202.     assert ln not in ax._mouseover_set
203.     assert im.axes is ax
204. 
205.     im.remove()
206.     ln.remove()
207. 
208.     for art in [im, ln]:
209.         assert art.axes is None
210.         assert art.figure is None
211. 
212.     assert im not in ax._mouseover_set
213.     assert fig.stale
214.     assert ax.stale


File: lib/matplotlib/tests/test_figure.py
Line number range: 690 - 769
Content:
690. @pytest.mark.parametrize('clear_meth', ['clear', 'clf'])
691. def test_figure_clear(clear_meth):
692.     # we test the following figure clearing scenarios:
693.     fig = plt.figure()
694. 
695.     # a) an empty figure
696.     fig.clear()
697.     assert fig.axes == []
698. 
699.     # b) a figure with a single unnested axes
700.     ax = fig.add_subplot(111)
701.     getattr(fig, clear_meth)()
702.     assert fig.axes == []
703. 
704.     # c) a figure multiple unnested axes
705.     axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]
706.     getattr(fig, clear_meth)()
707.     assert fig.axes == []
708. 
709.     # d) a figure with a subfigure
710.     gs = fig.add_gridspec(ncols=2, nrows=1)
711.     subfig = fig.add_subfigure(gs[0])
712.     subaxes = subfig.add_subplot(111)
713.     getattr(fig, clear_meth)()
714.     assert subfig not in fig.subfigs
715.     assert fig.axes == []
716. 
717.     # e) a figure with a subfigure and a subplot
718.     subfig = fig.add_subfigure(gs[0])
719.     subaxes = subfig.add_subplot(111)
720.     mainaxes = fig.add_subplot(gs[1])
721. 
722.     # e.1) removing just the axes leaves the subplot
723.     mainaxes.remove()
724.     assert fig.axes == [subaxes]
725. 
726.     # e.2) removing just the subaxes leaves the subplot
727.     # and subfigure
728.     mainaxes = fig.add_subplot(gs[1])
729.     subaxes.remove()
730.     assert fig.axes == [mainaxes]
731.     assert subfig in fig.subfigs
732. 
733.     # e.3) clearing the subfigure leaves the subplot
734.     subaxes = subfig.add_subplot(111)
735.     assert mainaxes in fig.axes
736.     assert subaxes in fig.axes
737.     getattr(subfig, clear_meth)()
738.     assert subfig in fig.subfigs
739.     assert subaxes not in subfig.axes
740.     assert subaxes not in fig.axes
741.     assert mainaxes in fig.axes
742. 
743.     # e.4) clearing the whole thing
744.     subaxes = subfig.add_subplot(111)
745.     getattr(fig, clear_meth)()
746.     assert fig.axes == []
747.     assert fig.subfigs == []
748. 
749.     # f) multiple subfigures
750.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]
751.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]
752.     assert all(ax in fig.axes for ax in subaxes)
753.     assert all(sfig in fig.subfigs for sfig in subfigs)
754. 
755.     # f.1) clearing only one subfigure
756.     getattr(subfigs[0], clear_meth)()
757.     assert subaxes[0] not in fig.axes
758.     assert subaxes[1] in fig.axes
759.     assert subfigs[1] in fig.subfigs
760. 
761.     # f.2) clearing the whole thing
762.     getattr(subfigs[1], clear_meth)()
763.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]
764.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]
765.     assert all(ax in fig.axes for ax in subaxes)
766.     assert all(sfig in fig.subfigs for sfig in subfigs)
767.     getattr(fig, clear_meth)()
768.     assert fig.subfigs == []
769.     assert fig.axes == []

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 08:46:47,560 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="1. The user's query is about a bug where `cla()` and `clf()` do not unset the `.axes` and `.figure` attributes of artists.\n2. The ideal test case would create an artist, call `cla()` or `clf()`, and then assert that the artist's `.axes` attribute is `None`.\n3. The provided context includes `test_artist.py:test_remove`, which is highly relevant as it shows the correct behavior for an artist's `remove()` method, where the `.axes` attribute is unset.\n4. The other test snippets from `test_axes.py` and `test_figure.py` are related to `cla()` and `clf()` but they test other aspects, like axis inversion or visibility, and do not check the state of the artists after clearing.\n5. To find 5 truly relevant test cases that demonstrate functionality similar to the bug, more context from the test files that cover `Axes` and `Figure` manipulation is necessary. Specifically, I need to examine other tests within `test_axes.py` and `test_figure.py` to see if there are any that, even if not directly testing for this bug, involve adding artists and then clearing the axes or figure." refined_query='Please provide the full source code for the test files `lib/matplotlib/tests/test_axes.py`, `lib/matplotlib/tests/test_figure.py`, and `lib/matplotlib/tests/test_artist.py`. This will allow for a more thorough search for test cases related to clearing axes and figures and observing the effect on the artists within them.'
2025-10-06 08:46:51,000 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_artist.py"}'}, '__gemini_function_call_thought_signatures__': {'d2fae088-d2d6-4f00-b87e-d2fe15a3d392': 'CucHAR/MhbbCmknRLwEfXQc7YdXVexATJKmdzokbZC6bTZzQD2DI74pYw/dhk54jb+JLKJIFFuGgUpedUGMgRDMY66oYyyQIM71Ez8CvWxeA3tYp3r1AHZVRu5WTLyTOKYxL6SUG0O6ogSpYA3SFoK1uHUOb8vhOl8pSQaE6UlaVYxEyeWIMpV5BNQ0hMhRPbtEOHYDSD76MPbNqhuuYmya5Xj8/NegndCryHo944J8AAXEWOoMxIUjTVFkq9Y5XCP09FRHKJoOdi9d2E1kOJ/L7LPTPxC8ETqLXTTAuyPwQei0JGhm2Zx3bLYCd+S1aj8iNvU5sG0r5JBKUfTyG8FqhOGdxTls0qXPHHrPL2tIALDQk1Qiq4cq+7Y8YDsBH99/3o1xTpfPUHfErF0qkDw52XkVncqdGTXzqPNExt50jbep21R+liBmyx5kp2nlMte7Yz3WpsPrd1pAUpoDqTme/HFWVnh7QzAqv3+C9495UaXu5tnrsL2Q9k8LevfsHVfPt3CF43fKPx7LOpt1phyLDzn5i/SYHeUtEPnDc36oyZGPaXtut21qtbdbJlzpYdp8TG1EPb2F+o9u/p5qS6Jyx8lGhf5OEHbDws+Mj3n3OfpA0xzPyq1R1H/y5nCjYDeT1rIvm2ChvjkpkGuWjgbTkBO2o8Wi+5pRW8NfjAfhBwmNNO/0JuoJTwPyeWqkUl8uW6eNeF51uJPP1y4UD063IDAsPIF++Qpha87Nus/niyo6JLLceH4vSSTcDKUT5EuQjXZT/w822XsB22tHJCFdHfbbHKN+A/U/Q/jjR9rupCdCGmmM2El21pEzhgQ98TXK03W/8RgDkTjhhw8nG7DrSuth/LdmDLfCCG+Wcx8IShh35gtFGOS3OBTwpEAnE09TZLVObMqAamKJlKCnQdZAA0OdettEvguXMyC/mPjdysub2Q0EbTeob68E2PpjMuHc6E3cntfrvT2mB8yIXK6g1UkBEVg9V8P5d6rH8SX0lSIuRCIHYvRpNp4uZx01sJIa8L4ZPcZgFAv0gvxPuAiTGC00MWUx1kNWzK6OK9L/Y5wRRSF2/sYwrbV+afgrvQMhgxoHMY+l71Hkmpp+ooJQFcoi1n1MQ2PmxjYVVJ4WOPjmqszOdZckDIgz4Jj//D2AXpCkPtpe2tCDQv8nCo0W8GOiUgPrSztlENMuzQ45XGEx6fXAoqV7N/OX8CalRFkV0JbOxRtt0rMn/JtZzuhom2fYAnb2xT/e95A2JCZuLPsrBKh4wGpdDCNgLFHVDNy5PP5UvO3P1d/r5pHbcY5hvqmwekweFlOoJ3+zeeGgZvO+juKNQoNZL'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21197, 'candidates_token_count': 75, 'total_token_count': 21572, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21197}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 75}], 'thoughts_token_count': 300, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06583295186360677, 'model_name': 'gemini-2.5-pro'} id='run--cd02e2eb-e17b-4e69-9e63-8ca14181a9eb-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_axes.py'}, 'id': 'd2fae088-d2d6-4f00-b87e-d2fe15a3d392', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_figure.py'}, 'id': '48cfa5aa-69a6-41a5-9950-37a7d174e57f', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_artist.py'}, 'id': '00c5e634-86ff-4786-8501-3803108c32af', 'type': 'tool_call'}] usage_metadata={'input_tokens': 21197, 'output_tokens': 75, 'total_tokens': 21572, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 300}}
2025-10-06 08:46:52,879 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full source code for the three requested test files: `lib/matplotlib/tests/test_axes.py`, `lib/matplotlib/tests/test_figure.py`, and `lib/matplotlib/tests/test_artist.py`. You can now use this information for your analysis of test cases related to clearing axes and figures.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 45052, 'candidates_token_count': 73, 'total_token_count': 45125, 'cached_content_token_count': 19806, 'prompt_tokens_details': [{'modality': 1, 'token_count': 45350}], 'cache_tokens_details': [{'modality': 1, 'token_count': 19806}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 73}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.029622825857711164, 'model_name': 'gemini-2.5-pro'} id='run--559f4cae-1733-4676-ae9c-9d56d1e63a54-0' usage_metadata={'input_tokens': 45052, 'output_tokens': 73, 'total_tokens': 45125, 'input_token_details': {'cache_read': 19806}}
2025-10-06 08:46:52,879 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 08:46:52,880 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
cla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists

Issue description: 
mpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.

```
In [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)
None

In [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)
Axes(0.125,0.11;0.775x0.77)
```


Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full source code for the test files `lib/matplotlib/tests/test_axes.py`, `lib/matplotlib/tests/test_figure.py`, and `lib/matplotlib/tests/test_artist.py`. This will allow for a more thorough search for test cases related to clearing axes and figures and observing the effect on the artists within them.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_axes.py
Line number range: 1 - 500
Content:
1. import contextlib
2. from collections import namedtuple
3. import datetime
4. from decimal import Decimal
5. from functools import partial
6. import inspect
7. import io
8. from itertools import product
9. import platform
10. from types import SimpleNamespace
11. 
12. import dateutil.tz
13. 
14. import numpy as np
15. from numpy import ma
16. from cycler import cycler
17. import pytest
18. 
19. import matplotlib
20. import matplotlib as mpl
21. from matplotlib import rc_context
22. from matplotlib._api import MatplotlibDeprecationWarning
23. import matplotlib.colors as mcolors
24. import matplotlib.dates as mdates
25. from matplotlib.figure import Figure
26. from matplotlib.axes import Axes
27. import matplotlib.font_manager as mfont_manager
28. import matplotlib.markers as mmarkers
29. import matplotlib.patches as mpatches
30. import matplotlib.path as mpath
31. from matplotlib.projections.geo import HammerAxes
32. from matplotlib.projections.polar import PolarAxes
33. import matplotlib.pyplot as plt
34. import matplotlib.text as mtext
35. import matplotlib.ticker as mticker
36. import matplotlib.transforms as mtransforms
37. import mpl_toolkits.axisartist as AA
38. from numpy.testing import (
39.     assert_allclose, assert_array_equal, assert_array_almost_equal)
40. from matplotlib.testing.decorators import (
41.     image_comparison, check_figures_equal, remove_ticks_and_titles)
42. 
43. # Note: Some test cases are run twice: once normally and once with labeled data
44. #       These two must be defined in the same test function or need to have
45. #       different baseline images to prevent race conditions when pytest runs
46. #       the tests with multiple threads.
47. 
48. 
49. @check_figures_equal(extensions=["png"])
50. def test_invisible_axes(fig_test, fig_ref):
51.     ax = fig_test.subplots()
52.     ax.set_visible(False)
53. 
54. 
55. def test_get_labels():
56.     fig, ax = plt.subplots()
57.     ax.set_xlabel('x label')
58.     ax.set_ylabel('y label')
59.     assert ax.get_xlabel() == 'x label'
60.     assert ax.get_ylabel() == 'y label'
61. 
62. 
63. def test_repr():
64.     fig, ax = plt.subplots()
65.     ax.set_label('label')
66.     ax.set_title('title')
67.     ax.set_xlabel('x')
68.     ax.set_ylabel('y')
69.     assert repr(ax) == (
70.         "<Axes: "
71.         "label='label', title={'center': 'title'}, xlabel='x', ylabel='y'>")
72. 
73. 
74. @check_figures_equal()
75. def test_label_loc_vertical(fig_test, fig_ref):
76.     ax = fig_test.subplots()
77.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
78.     ax.legend()
79.     ax.set_ylabel('Y Label', loc='top')
80.     ax.set_xlabel('X Label', loc='right')
81.     cbar = fig_test.colorbar(sc)
82.     cbar.set_label("Z Label", loc='top')
83. 
84.     ax = fig_ref.subplots()
85.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
86.     ax.legend()
87.     ax.set_ylabel('Y Label', y=1, ha='right')
88.     ax.set_xlabel('X Label', x=1, ha='right')
89.     cbar = fig_ref.colorbar(sc)
90.     cbar.set_label("Z Label", y=1, ha='right')
91. 
92. 
93. @check_figures_equal()
94. def test_label_loc_horizontal(fig_test, fig_ref):
95.     ax = fig_test.subplots()
96.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
97.     ax.legend()
98.     ax.set_ylabel('Y Label', loc='bottom')
99.     ax.set_xlabel('X Label', loc='left')
100.     cbar = fig_test.colorbar(sc, orientation='horizontal')
101.     cbar.set_label("Z Label", loc='left')
102. 
103.     ax = fig_ref.subplots()
104.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
105.     ax.legend()
106.     ax.set_ylabel('Y Label', y=0, ha='left')
107.     ax.set_xlabel('X Label', x=0, ha='left')
108.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
109.     cbar.set_label("Z Label", x=0, ha='left')
110. 
111. 
112. @check_figures_equal()
113. def test_label_loc_rc(fig_test, fig_ref):
114.     with matplotlib.rc_context({"xaxis.labellocation": "right",
115.                                 "yaxis.labellocation": "top"}):
116.         ax = fig_test.subplots()
117.         sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
118.         ax.legend()
119.         ax.set_ylabel('Y Label')
120.         ax.set_xlabel('X Label')
121.         cbar = fig_test.colorbar(sc, orientation='horizontal')
122.         cbar.set_label("Z Label")
123. 
124.     ax = fig_ref.subplots()
125.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
126.     ax.legend()
127.     ax.set_ylabel('Y Label', y=1, ha='right')
128.     ax.set_xlabel('X Label', x=1, ha='right')
129.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
130.     cbar.set_label("Z Label", x=1, ha='right')
131. 
132. 
133. def test_label_shift():
134.     fig, ax = plt.subplots()
135. 
136.     # Test label re-centering on x-axis
137.     ax.set_xlabel("Test label", loc="left")
138.     ax.set_xlabel("Test label", loc="center")
139.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
140.     ax.set_xlabel("Test label", loc="right")
141.     assert ax.xaxis.get_label().get_horizontalalignment() == "right"
142.     ax.set_xlabel("Test label", loc="center")
143.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
144. 
145.     # Test label re-centering on y-axis
146.     ax.set_ylabel("Test label", loc="top")
147.     ax.set_ylabel("Test label", loc="center")
148.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
149.     ax.set_ylabel("Test label", loc="bottom")
150.     assert ax.yaxis.get_label().get_horizontalalignment() == "left"
151.     ax.set_ylabel("Test label", loc="center")
152.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
153. 
154. 
155. @check_figures_equal(extensions=["png"])
156. def test_acorr(fig_test, fig_ref):
157.     np.random.seed(19680801)
158.     Nx = 512
159.     x = np.random.normal(0, 1, Nx).cumsum()
160.     maxlags = Nx-1
161. 
162.     ax_test = fig_test.subplots()
163.     ax_test.acorr(x, maxlags=maxlags)
164. 
165.     ax_ref = fig_ref.subplots()
166.     # Normalized autocorrelation
167.     norm_auto_corr = np.correlate(x, x, mode="full")/np.dot(x, x)
168.     lags = np.arange(-maxlags, maxlags+1)
169.     norm_auto_corr = norm_auto_corr[Nx-1-maxlags:Nx+maxlags]
170.     ax_ref.vlines(lags, [0], norm_auto_corr)
171.     ax_ref.axhline(y=0, xmin=0, xmax=1)
172. 
173. 
174. @check_figures_equal(extensions=["png"])
175. def test_spy(fig_test, fig_ref):
176.     np.random.seed(19680801)
177.     a = np.ones(32 * 32)
178.     a[:16 * 32] = 0
179.     np.random.shuffle(a)
180.     a = a.reshape((32, 32))
181. 
182.     axs_test = fig_test.subplots(2)
183.     axs_test[0].spy(a)
184.     axs_test[1].spy(a, marker=".", origin="lower")
185. 
186.     axs_ref = fig_ref.subplots(2)
187.     axs_ref[0].imshow(a, cmap="gray_r", interpolation="nearest")
188.     axs_ref[0].xaxis.tick_top()
189.     axs_ref[1].plot(*np.nonzero(a)[::-1], ".", markersize=10)
190.     axs_ref[1].set(
191.         aspect=1, xlim=axs_ref[0].get_xlim(), ylim=axs_ref[0].get_ylim()[::-1])
192.     for ax in axs_ref:
193.         ax.xaxis.set_ticks_position("both")
194. 
195. 
196. def test_spy_invalid_kwargs():
197.     fig, ax = plt.subplots()
198.     for unsupported_kw in [{'interpolation': 'nearest'},
199.                            {'marker': 'o', 'linestyle': 'solid'}]:
200.         with pytest.raises(TypeError):
201.             ax.spy(np.eye(3, 3), **unsupported_kw)
202. 
203. 
204. @check_figures_equal(extensions=["png"])
205. def test_matshow(fig_test, fig_ref):
206.     mpl.style.use("mpl20")
207.     a = np.random.rand(32, 32)
208.     fig_test.add_subplot().matshow(a)
209.     ax_ref = fig_ref.add_subplot()
210.     ax_ref.imshow(a)
211.     ax_ref.xaxis.tick_top()
212.     ax_ref.xaxis.set_ticks_position('both')
213. 
214. 
215. @image_comparison(['formatter_ticker_001',
216.                    'formatter_ticker_002',
217.                    'formatter_ticker_003',
218.                    'formatter_ticker_004',
219.                    'formatter_ticker_005',
220.                    ])
221. def test_formatter_ticker():
222.     import matplotlib.testing.jpl_units as units
223.     units.register()
224. 
225.     # This should affect the tick size.  (Tests issue #543)
226.     matplotlib.rcParams['lines.markeredgewidth'] = 30
227. 
228.     # This essentially test to see if user specified labels get overwritten
229.     # by the auto labeler functionality of the axes.
230.     xdata = [x*units.sec for x in range(10)]
231.     ydata1 = [(1.5*y - 0.5)*units.km for y in range(10)]
232.     ydata2 = [(1.75*y - 1.0)*units.km for y in range(10)]
233. 
234.     ax = plt.figure().subplots()
235.     ax.set_xlabel("x-label 001")
236. 
237.     ax = plt.figure().subplots()
238.     ax.set_xlabel("x-label 001")
239.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
240. 
241.     ax = plt.figure().subplots()
242.     ax.set_xlabel("x-label 001")
243.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
244.     ax.set_xlabel("x-label 003")
245. 
246.     ax = plt.figure().subplots()
247.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
248.     ax.plot(xdata, ydata2, color='green', xunits="hour")
249.     ax.set_xlabel("x-label 004")
250. 
251.     # See SF bug 2846058
252.     # https://sourceforge.net/tracker/?func=detail&aid=2846058&group_id=80706&atid=560720
253.     ax = plt.figure().subplots()
254.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
255.     ax.plot(xdata, ydata2, color='green', xunits="hour")
256.     ax.set_xlabel("x-label 005")
257.     ax.autoscale_view()
258. 
259. 
260. def test_funcformatter_auto_formatter():
261.     def _formfunc(x, pos):
262.         return ''
263. 
264.     ax = plt.figure().subplots()
265. 
266.     assert ax.xaxis.isDefault_majfmt
267.     assert ax.xaxis.isDefault_minfmt
268.     assert ax.yaxis.isDefault_majfmt
269.     assert ax.yaxis.isDefault_minfmt
270. 
271.     ax.xaxis.set_major_formatter(_formfunc)
272. 
273.     assert not ax.xaxis.isDefault_majfmt
274.     assert ax.xaxis.isDefault_minfmt
275.     assert ax.yaxis.isDefault_majfmt
276.     assert ax.yaxis.isDefault_minfmt
277. 
278.     targ_funcformatter = mticker.FuncFormatter(_formfunc)
279. 
280.     assert isinstance(ax.xaxis.get_major_formatter(),
281.                       mticker.FuncFormatter)
282. 
283.     assert ax.xaxis.get_major_formatter().func == targ_funcformatter.func
284. 
285. 
286. def test_strmethodformatter_auto_formatter():
287.     formstr = '{x}_{pos}'
288. 
289.     ax = plt.figure().subplots()
290. 
291.     assert ax.xaxis.isDefault_majfmt
292.     assert ax.xaxis.isDefault_minfmt
293.     assert ax.yaxis.isDefault_majfmt
294.     assert ax.yaxis.isDefault_minfmt
295. 
296.     ax.yaxis.set_minor_formatter(formstr)
297. 
298.     assert ax.xaxis.isDefault_majfmt
299.     assert ax.xaxis.isDefault_minfmt
300.     assert ax.yaxis.isDefault_majfmt
301.     assert not ax.yaxis.isDefault_minfmt
302. 
303.     targ_strformatter = mticker.StrMethodFormatter(formstr)
304. 
305.     assert isinstance(ax.yaxis.get_minor_formatter(),
306.                       mticker.StrMethodFormatter)
307. 
308.     assert ax.yaxis.get_minor_formatter().fmt == targ_strformatter.fmt
309. 
310. 
311. @image_comparison(["twin_axis_locators_formatters"])
312. def test_twin_axis_locators_formatters():
313.     vals = np.linspace(0, 1, num=5, endpoint=True)
314.     locs = np.sin(np.pi * vals / 2.0)
315. 
316.     majl = plt.FixedLocator(locs)
317.     minl = plt.FixedLocator([0.1, 0.2, 0.3])
318. 
319.     fig = plt.figure()
320.     ax1 = fig.add_subplot(1, 1, 1)
321.     ax1.plot([0.1, 100], [0, 1])
322.     ax1.yaxis.set_major_locator(majl)
323.     ax1.yaxis.set_minor_locator(minl)
324.     ax1.yaxis.set_major_formatter(plt.FormatStrFormatter('%08.2lf'))
325.     ax1.yaxis.set_minor_formatter(plt.FixedFormatter(['tricks', 'mind',
326.                                                       'jedi']))
327. 
328.     ax1.xaxis.set_major_locator(plt.LinearLocator())
329.     ax1.xaxis.set_minor_locator(plt.FixedLocator([15, 35, 55, 75]))
330.     ax1.xaxis.set_major_formatter(plt.FormatStrFormatter('%05.2lf'))
331.     ax1.xaxis.set_minor_formatter(plt.FixedFormatter(['c', '3', 'p', 'o']))
332.     ax1.twiny()
333.     ax1.twinx()
334. 
335. 
336. def test_twinx_cla():
337.     fig, ax = plt.subplots()
338.     ax2 = ax.twinx()
339.     ax3 = ax2.twiny()
340.     plt.draw()
341.     assert not ax2.xaxis.get_visible()
342.     assert not ax2.patch.get_visible()
343.     ax2.cla()
344.     ax3.cla()
345. 
346.     assert not ax2.xaxis.get_visible()
347.     assert not ax2.patch.get_visible()
348.     assert ax2.yaxis.get_visible()
349. 
350.     assert ax3.xaxis.get_visible()
351.     assert not ax3.patch.get_visible()
352.     assert not ax3.yaxis.get_visible()
353. 
354.     assert ax.xaxis.get_visible()
355.     assert ax.patch.get_visible()
356.     assert ax.yaxis.get_visible()
357. 
358. 
359. @pytest.mark.parametrize('twin', ('x', 'y'))
360. @check_figures_equal(extensions=['png'], tol=0.19)
361. def test_twin_logscale(fig_test, fig_ref, twin):
362.     twin_func = f'twin{twin}'  # test twinx or twiny
363.     set_scale = f'set_{twin}scale'
364.     x = np.arange(1, 100)
365. 
366.     # Change scale after twinning.
367.     ax_test = fig_test.add_subplot(2, 1, 1)
368.     ax_twin = getattr(ax_test, twin_func)()
369.     getattr(ax_test, set_scale)('log')
370.     ax_twin.plot(x, x)
371. 
372.     # Twin after changing scale.
373.     ax_test = fig_test.add_subplot(2, 1, 2)
374.     getattr(ax_test, set_scale)('log')
375.     ax_twin = getattr(ax_test, twin_func)()
376.     ax_twin.plot(x, x)
377. 
378.     for i in [1, 2]:
379.         ax_ref = fig_ref.add_subplot(2, 1, i)
380.         getattr(ax_ref, set_scale)('log')
381.         ax_ref.plot(x, x)
382. 
383.         # This is a hack because twinned Axes double-draw the frame.
384.         # Remove this when that is fixed.
385.         Path = matplotlib.path.Path
386.         fig_ref.add_artist(
387.             matplotlib.patches.PathPatch(
388.                 Path([[0, 0], [0, 1],
389.                       [0, 1], [1, 1],
390.                       [1, 1], [1, 0],
391.                       [1, 0], [0, 0]],
392.                      [Path.MOVETO, Path.LINETO] * 4),
393.                 transform=ax_ref.transAxes,
394.                 facecolor='none',
395.                 edgecolor=mpl.rcParams['axes.edgecolor'],
396.                 linewidth=mpl.rcParams['axes.linewidth'],
397.                 capstyle='projecting'))
398. 
399.     remove_ticks_and_titles(fig_test)
400.     remove_ticks_and_titles(fig_ref)
401. 
402. 
403. @image_comparison(['twin_autoscale.png'])
404. def test_twinx_axis_scales():
405.     x = np.array([0, 0.5, 1])
406.     y = 0.5 * x
407.     x2 = np.array([0, 1, 2])
408.     y2 = 2 * x2
409. 
410.     fig = plt.figure()
411.     ax = fig.add_axes((0, 0, 1, 1), autoscalex_on=False, autoscaley_on=False)
412.     ax.plot(x, y, color='blue', lw=10)
413. 
414.     ax2 = plt.twinx(ax)
415.     ax2.plot(x2, y2, 'r--', lw=5)
416. 
417.     ax.margins(0, 0)
418.     ax2.margins(0, 0)
419. 
420. 
421. def test_twin_inherit_autoscale_setting():
422.     fig, ax = plt.subplots()
423.     ax_x_on = ax.twinx()
424.     ax.set_autoscalex_on(False)
425.     ax_x_off = ax.twinx()
426. 
427.     assert ax_x_on.get_autoscalex_on()
428.     assert not ax_x_off.get_autoscalex_on()
429. 
430.     ax_y_on = ax.twiny()
431.     ax.set_autoscaley_on(False)
432.     ax_y_off = ax.twiny()
433. 
434.     assert ax_y_on.get_autoscaley_on()
435.     assert not ax_y_off.get_autoscaley_on()
436. 
437. 
438. def test_inverted_cla():
439.     # GitHub PR #5450. Setting autoscale should reset
440.     # axes to be non-inverted.
441.     # plotting an image, then 1d graph, axis is now down
442.     fig = plt.figure(0)
443.     ax = fig.gca()
444.     # 1. test that a new axis is not inverted per default
445.     assert not ax.xaxis_inverted()
446.     assert not ax.yaxis_inverted()
447.     img = np.random.random((100, 100))
448.     ax.imshow(img)
449.     # 2. test that a image axis is inverted
450.     assert not ax.xaxis_inverted()
451.     assert ax.yaxis_inverted()
452.     # 3. test that clearing and plotting a line, axes are
453.     # not inverted
454.     ax.cla()
455.     x = np.linspace(0, 2*np.pi, 100)
456.     ax.plot(x, np.cos(x))
457.     assert not ax.xaxis_inverted()
458.     assert not ax.yaxis_inverted()
459. 
460.     # 4. autoscaling should not bring back axes to normal
461.     ax.cla()
462.     ax.imshow(img)
463.     plt.autoscale()
464.     assert not ax.xaxis_inverted()
465.     assert ax.yaxis_inverted()
466. 
467.     for ax in fig.axes:
468.         ax.remove()
469.     # 5. two shared axes. Inverting the leader axis should invert the shared
470.     # axes; clearing the leader axis should bring axes in shared
471.     # axes back to normal.
472.     ax0 = plt.subplot(211)
473.     ax1 = plt.subplot(212, sharey=ax0)
474.     ax0.yaxis.set_inverted(True)
475.     assert ax1.yaxis_inverted()
476.     ax1.plot(x, np.cos(x))
477.     ax0.cla()
478.     assert not ax1.yaxis_inverted()
479.     ax1.cla()
480.     # 6. clearing the follower should not touch limits
481.     ax0.imshow(img)
482.     ax1.plot(x, np.cos(x))
483.     ax1.cla()
484.     assert ax.yaxis_inverted()
485. 
486.     # clean up
487.     plt.close(fig)
488. 
489. 
490. def test_subclass_clear_cla():
491.     # Ensure that subclasses of Axes call cla/clear correctly.
492.     # Note, we cannot use mocking here as we want to be sure that the
493.     # superclass fallback does not recurse.
494. 
495.     with pytest.warns(PendingDeprecationWarning,
496.                       match='Overriding `Axes.cla`'):
497.         class ClaAxes(Axes):
498.             def cla(self):
499.                 nonlocal called
500.                 called = True

File: lib/matplotlib/tests/test_figure.py
Line number range: 1 - 500
Content:
1. import copy
2. from datetime import datetime
3. import io
4. from pathlib import Path
5. import pickle
6. import platform
7. from threading import Timer
8. from types import SimpleNamespace
9. import warnings
10. 
11. import numpy as np
12. import pytest
13. from PIL import Image
14. 
15. import matplotlib as mpl
16. from matplotlib import gridspec
17. from matplotlib.testing.decorators import image_comparison, check_figures_equal
18. from matplotlib.axes import Axes
19. from matplotlib.figure import Figure, FigureBase
20. from matplotlib.layout_engine import (ConstrainedLayoutEngine,
21.                                       TightLayoutEngine,
22.                                       PlaceHolderLayoutEngine)
23. from matplotlib.ticker import AutoMinorLocator, FixedFormatter, ScalarFormatter
24. import matplotlib.pyplot as plt
25. import matplotlib.dates as mdates
26. 
27. 
28. @image_comparison(['figure_align_labels'], extensions=['png', 'svg'],
29.                   tol=0 if platform.machine() == 'x86_64' else 0.01)
30. def test_align_labels():
31.     fig = plt.figure(layout='tight')
32.     gs = gridspec.GridSpec(3, 3)
33. 
34.     ax = fig.add_subplot(gs[0, :2])
35.     ax.plot(np.arange(0, 1e6, 1000))
36.     ax.set_ylabel('Ylabel0 0')
37.     ax = fig.add_subplot(gs[0, -1])
38.     ax.plot(np.arange(0, 1e4, 100))
39. 
40.     for i in range(3):
41.         ax = fig.add_subplot(gs[1, i])
42.         ax.set_ylabel('YLabel1 %d' % i)
43.         ax.set_xlabel('XLabel1 %d' % i)
44.         if i in [0, 2]:
45.             ax.xaxis.set_label_position("top")
46.             ax.xaxis.tick_top()
47.         if i == 0:
48.             for tick in ax.get_xticklabels():
49.                 tick.set_rotation(90)
50.         if i == 2:
51.             ax.yaxis.set_label_position("right")
52.             ax.yaxis.tick_right()
53. 
54.     for i in range(3):
55.         ax = fig.add_subplot(gs[2, i])
56.         ax.set_xlabel(f'XLabel2 {i}')
57.         ax.set_ylabel(f'YLabel2 {i}')
58. 
59.         if i == 2:
60.             ax.plot(np.arange(0, 1e4, 10))
61.             ax.yaxis.set_label_position("right")
62.             ax.yaxis.tick_right()
63.             for tick in ax.get_xticklabels():
64.                 tick.set_rotation(90)
65. 
66.     fig.align_labels()
67. 
68. 
69. def test_align_labels_stray_axes():
70.     fig, axs = plt.subplots(2, 2)
71.     for nn, ax in enumerate(axs.flat):
72.         ax.set_xlabel('Boo')
73.         ax.set_xlabel('Who')
74.         ax.plot(np.arange(4)**nn, np.arange(4)**nn)
75.     fig.align_ylabels()
76.     fig.align_xlabels()
77.     fig.draw_without_rendering()
78.     xn = np.zeros(4)
79.     yn = np.zeros(4)
80.     for nn, ax in enumerate(axs.flat):
81.         yn[nn] = ax.xaxis.label.get_position()[1]
82.         xn[nn] = ax.yaxis.label.get_position()[0]
83.     np.testing.assert_allclose(xn[:2], xn[2:])
84.     np.testing.assert_allclose(yn[::2], yn[1::2])
85. 
86.     fig, axs = plt.subplots(2, 2, constrained_layout=True)
87.     for nn, ax in enumerate(axs.flat):
88.         ax.set_xlabel('Boo')
89.         ax.set_xlabel('Who')
90.         pc = ax.pcolormesh(np.random.randn(10, 10))
91.     fig.colorbar(pc, ax=ax)
92.     fig.align_ylabels()
93.     fig.align_xlabels()
94.     fig.draw_without_rendering()
95.     xn = np.zeros(4)
96.     yn = np.zeros(4)
97.     for nn, ax in enumerate(axs.flat):
98.         yn[nn] = ax.xaxis.label.get_position()[1]
99.         xn[nn] = ax.yaxis.label.get_position()[0]
100.     np.testing.assert_allclose(xn[:2], xn[2:])
101.     np.testing.assert_allclose(yn[::2], yn[1::2])
102. 
103. 
104. def test_figure_label():
105.     # pyplot figure creation, selection, and closing with label/number/instance
106.     plt.close('all')
107.     fig_today = plt.figure('today')
108.     plt.figure(3)
109.     plt.figure('tomorrow')
110.     plt.figure()
111.     plt.figure(0)
112.     plt.figure(1)
113.     plt.figure(3)
114.     assert plt.get_fignums() == [0, 1, 3, 4, 5]
115.     assert plt.get_figlabels() == ['', 'today', '', 'tomorrow', '']
116.     plt.close(10)
117.     plt.close()
118.     plt.close(5)
119.     plt.close('tomorrow')
120.     assert plt.get_fignums() == [0, 1]
121.     assert plt.get_figlabels() == ['', 'today']
122.     plt.figure(fig_today)
123.     assert plt.gcf() == fig_today
124.     with pytest.raises(ValueError):
125.         plt.figure(Figure())
126. 
127. 
128. def test_fignum_exists():
129.     # pyplot figure creation, selection and closing with fignum_exists
130.     plt.figure('one')
131.     plt.figure(2)
132.     plt.figure('three')
133.     plt.figure()
134.     assert plt.fignum_exists('one')
135.     assert plt.fignum_exists(2)
136.     assert plt.fignum_exists('three')
137.     assert plt.fignum_exists(4)
138.     plt.close('one')
139.     plt.close(4)
140.     assert not plt.fignum_exists('one')
141.     assert not plt.fignum_exists(4)
142. 
143. 
144. def test_clf_keyword():
145.     # test if existing figure is cleared with figure() and subplots()
146.     text1 = 'A fancy plot'
147.     text2 = 'Really fancy!'
148. 
149.     fig0 = plt.figure(num=1)
150.     fig0.suptitle(text1)
151.     assert [t.get_text() for t in fig0.texts] == [text1]
152. 
153.     fig1 = plt.figure(num=1, clear=False)
154.     fig1.text(0.5, 0.5, text2)
155.     assert fig0 is fig1
156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]
157. 
158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)
159.     assert fig0 is fig2
160.     assert [t.get_text() for t in fig2.texts] == []
161. 
162. 
163. @image_comparison(['figure_today'])
164. def test_figure():
165.     # named figure support
166.     fig = plt.figure('today')
167.     ax = fig.add_subplot()
168.     ax.set_title(fig.get_label())
169.     ax.plot(np.arange(5))
170.     # plot red line in a different figure.
171.     plt.figure('tomorrow')
172.     plt.plot([0, 1], [1, 0], 'r')
173.     # Return to the original; make sure the red line is not there.
174.     plt.figure('today')
175.     plt.close('tomorrow')
176. 
177. 
178. @image_comparison(['figure_legend'])
179. def test_figure_legend():
180.     fig, axs = plt.subplots(2)
181.     axs[0].plot([0, 1], [1, 0], label='x', color='g')
182.     axs[0].plot([0, 1], [0, 1], label='y', color='r')
183.     axs[0].plot([0, 1], [0.5, 0.5], label='y', color='k')
184. 
185.     axs[1].plot([0, 1], [1, 0], label='_y', color='r')
186.     axs[1].plot([0, 1], [0, 1], label='z', color='b')
187.     fig.legend()
188. 
189. 
190. def test_gca():
191.     fig = plt.figure()
192. 
193.     # test that gca() picks up Axes created via add_axes()
194.     ax0 = fig.add_axes([0, 0, 1, 1])
195.     assert fig.gca() is ax0
196. 
197.     # test that gca() picks up Axes created via add_subplot()
198.     ax1 = fig.add_subplot(111)
199.     assert fig.gca() is ax1
200. 
201.     # add_axes on an existing Axes should not change stored order, but will
202.     # make it current.
203.     fig.add_axes(ax0)
204.     assert fig.axes == [ax0, ax1]
205.     assert fig.gca() is ax0
206. 
207.     # sca() should not change stored order of Axes, which is order added.
208.     fig.sca(ax0)
209.     assert fig.axes == [ax0, ax1]
210. 
211.     # add_subplot on an existing Axes should not change stored order, but will
212.     # make it current.
213.     fig.add_subplot(ax1)
214.     assert fig.axes == [ax0, ax1]
215.     assert fig.gca() is ax1
216. 
217. 
218. def test_add_subplot_subclass():
219.     fig = plt.figure()
220.     fig.add_subplot(axes_class=Axes)
221.     with pytest.raises(ValueError):
222.         fig.add_subplot(axes_class=Axes, projection="3d")
223.     with pytest.raises(ValueError):
224.         fig.add_subplot(axes_class=Axes, polar=True)
225.     with pytest.raises(ValueError):
226.         fig.add_subplot(projection="3d", polar=True)
227.     with pytest.raises(TypeError):
228.         fig.add_subplot(projection=42)
229. 
230. 
231. def test_add_subplot_invalid():
232.     fig = plt.figure()
233.     with pytest.raises(ValueError,
234.                        match='Number of columns must be a positive integer'):
235.         fig.add_subplot(2, 0, 1)
236.     with pytest.raises(ValueError,
237.                        match='Number of rows must be a positive integer'):
238.         fig.add_subplot(0, 2, 1)
239.     with pytest.raises(ValueError, match='num must be 1 <= num <= 4'):
240.         fig.add_subplot(2, 2, 0)
241.     with pytest.raises(ValueError, match='num must be 1 <= num <= 4'):
242.         fig.add_subplot(2, 2, 5)
243. 
244.     with pytest.raises(ValueError, match='must be a three-digit integer'):
245.         fig.add_subplot(42)
246.     with pytest.raises(ValueError, match='must be a three-digit integer'):
247.         fig.add_subplot(1000)
248. 
249.     with pytest.raises(TypeError, match='takes 1 or 3 positional arguments '
250.                                         'but 2 were given'):
251.         fig.add_subplot(2, 2)
252.     with pytest.raises(TypeError, match='takes 1 or 3 positional arguments '
253.                                         'but 4 were given'):
254.         fig.add_subplot(1, 2, 3, 4)
255.     with pytest.raises(ValueError,
256.                        match="Number of rows must be a positive integer, "
257.                              "not '2'"):
258.         fig.add_subplot('2', 2, 1)
259.     with pytest.raises(ValueError,
260.                        match='Number of columns must be a positive integer, '
261.                              'not 2.0'):
262.         fig.add_subplot(2, 2.0, 1)
263.     _, ax = plt.subplots()
264.     with pytest.raises(ValueError,
265.                        match='The Axes must have been created in the '
266.                              'present figure'):
267.         fig.add_subplot(ax)
268. 
269. 
270. @image_comparison(['figure_suptitle'])
271. def test_suptitle():
272.     fig, _ = plt.subplots()
273.     fig.suptitle('hello', color='r')
274.     fig.suptitle('title', color='g', rotation=30)
275. 
276. 
277. def test_suptitle_fontproperties():
278.     fig, ax = plt.subplots()
279.     fps = mpl.font_manager.FontProperties(size='large', weight='bold')
280.     txt = fig.suptitle('fontprops title', fontproperties=fps)
281.     assert txt.get_fontsize() == fps.get_size_in_points()
282.     assert txt.get_weight() == fps.get_weight()
283. 
284. 
285. @image_comparison(['alpha_background'],
286.                   # only test png and svg. The PDF output appears correct,
287.                   # but Ghostscript does not preserve the background color.
288.                   extensions=['png', 'svg'],
289.                   savefig_kwarg={'facecolor': (0, 1, 0.4),
290.                                  'edgecolor': 'none'})
291. def test_alpha():
292.     # We want an image which has a background color and an alpha of 0.4.
293.     fig = plt.figure(figsize=[2, 1])
294.     fig.set_facecolor((0, 1, 0.4))
295.     fig.patch.set_alpha(0.4)
296.     fig.patches.append(mpl.patches.CirclePolygon(
297.         [20, 20], radius=15, alpha=0.6, facecolor='red'))
298. 
299. 
300. def test_too_many_figures():
301.     with pytest.warns(RuntimeWarning):
302.         for i in range(mpl.rcParams['figure.max_open_warning'] + 1):
303.             plt.figure()
304. 
305. 
306. def test_iterability_axes_argument():
307. 
308.     # This is a regression test for matplotlib/matplotlib#3196. If one of the
309.     # arguments returned by _as_mpl_axes defines __getitem__ but is not
310.     # iterable, this would raise an exception. This is because we check
311.     # whether the arguments are iterable, and if so we try and convert them
312.     # to a tuple. However, the ``iterable`` function returns True if
313.     # __getitem__ is present, but some classes can define __getitem__ without
314.     # being iterable. The tuple conversion is now done in a try...except in
315.     # case it fails.
316. 
317.     class MyAxes(Axes):
318.         def __init__(self, *args, myclass=None, **kwargs):
319.             Axes.__init__(self, *args, **kwargs)
320. 
321.     class MyClass:
322. 
323.         def __getitem__(self, item):
324.             if item != 'a':
325.                 raise ValueError("item should be a")
326. 
327.         def _as_mpl_axes(self):
328.             return MyAxes, {'myclass': self}
329. 
330.     fig = plt.figure()
331.     fig.add_subplot(1, 1, 1, projection=MyClass())
332.     plt.close(fig)
333. 
334. 
335. def test_set_fig_size():
336.     fig = plt.figure()
337. 
338.     # check figwidth
339.     fig.set_figwidth(5)
340.     assert fig.get_figwidth() == 5
341. 
342.     # check figheight
343.     fig.set_figheight(1)
344.     assert fig.get_figheight() == 1
345. 
346.     # check using set_size_inches
347.     fig.set_size_inches(2, 4)
348.     assert fig.get_figwidth() == 2
349.     assert fig.get_figheight() == 4
350. 
351.     # check using tuple to first argument
352.     fig.set_size_inches((1, 3))
353.     assert fig.get_figwidth() == 1
354.     assert fig.get_figheight() == 3
355. 
356. 
357. def test_axes_remove():
358.     fig, axs = plt.subplots(2, 2)
359.     axs[-1, -1].remove()
360.     for ax in axs.ravel()[:-1]:
361.         assert ax in fig.axes
362.     assert axs[-1, -1] not in fig.axes
363.     assert len(fig.axes) == 3
364. 
365. 
366. def test_figaspect():
367.     w, h = plt.figaspect(np.float64(2) / np.float64(1))
368.     assert h / w == 2
369.     w, h = plt.figaspect(2)
370.     assert h / w == 2
371.     w, h = plt.figaspect(np.zeros((1, 2)))
372.     assert h / w == 0.5
373.     w, h = plt.figaspect(np.zeros((2, 2)))
374.     assert h / w == 1
375. 
376. 
377. @pytest.mark.parametrize('which', ['both', 'major', 'minor'])
378. def test_autofmt_xdate(which):
379.     date = ['3 Jan 2013', '4 Jan 2013', '5 Jan 2013', '6 Jan 2013',
380.             '7 Jan 2013', '8 Jan 2013', '9 Jan 2013', '10 Jan 2013',
381.             '11 Jan 2013', '12 Jan 2013', '13 Jan 2013', '14 Jan 2013']
382. 
383.     time = ['16:44:00', '16:45:00', '16:46:00', '16:47:00', '16:48:00',
384.             '16:49:00', '16:51:00', '16:52:00', '16:53:00', '16:55:00',
385.             '16:56:00', '16:57:00']
386. 
387.     angle = 60
388.     minors = [1, 2, 3, 4, 5, 6, 7]
389. 
390.     x = mdates.datestr2num(date)
391.     y = mdates.datestr2num(time)
392. 
393.     fig, ax = plt.subplots()
394. 
395.     ax.plot(x, y)
396.     ax.yaxis_date()
397.     ax.xaxis_date()
398. 
399.     ax.xaxis.set_minor_locator(AutoMinorLocator(2))
400.     with warnings.catch_warnings():
401.         warnings.filterwarnings(
402.             'ignore',
403.             'FixedFormatter should only be used together with FixedLocator')
404.         ax.xaxis.set_minor_formatter(FixedFormatter(minors))
405. 
406.     fig.autofmt_xdate(0.2, angle, 'right', which)
407. 
408.     if which in ('both', 'major'):
409.         for label in fig.axes[0].get_xticklabels(False, 'major'):
410.             assert int(label.get_rotation()) == angle
411. 
412.     if which in ('both', 'minor'):
413.         for label in fig.axes[0].get_xticklabels(True, 'minor'):
414.             assert int(label.get_rotation()) == angle
415. 
416. 
417. @mpl.style.context('default')
418. def test_change_dpi():
419.     fig = plt.figure(figsize=(4, 4))
420.     fig.draw_without_rendering()
421.     assert fig.canvas.renderer.height == 400
422.     assert fig.canvas.renderer.width == 400
423.     fig.dpi = 50
424.     fig.draw_without_rendering()
425.     assert fig.canvas.renderer.height == 200
426.     assert fig.canvas.renderer.width == 200
427. 
428. 
429. @pytest.mark.parametrize('width, height', [
430.     (1, np.nan),
431.     (-1, 1),
432.     (np.inf, 1)
433. ])
434. def test_invalid_figure_size(width, height):
435.     with pytest.raises(ValueError):
436.         plt.figure(figsize=(width, height))
437. 
438.     fig = plt.figure()
439.     with pytest.raises(ValueError):
440.         fig.set_size_inches(width, height)
441. 
442. 
443. def test_invalid_figure_add_axes():
444.     fig = plt.figure()
445.     with pytest.raises(TypeError,
446.                        match="missing 1 required positional argument: 'rect'"):
447.         fig.add_axes()
448. 
449.     with pytest.raises(ValueError):
450.         fig.add_axes((.1, .1, .5, np.nan))
451. 
452.     with pytest.raises(TypeError, match="multiple values for argument 'rect'"):
453.         fig.add_axes([0, 0, 1, 1], rect=[0, 0, 1, 1])
454. 
455.     _, ax = plt.subplots()
456.     with pytest.raises(ValueError,
457.                        match="The Axes must have been created in the present "
458.                              "figure"):
459.         fig.add_axes(ax)
460. 
461. 
462. def test_subplots_shareax_loglabels():
463.     fig, axs = plt.subplots(2, 2, sharex=True, sharey=True, squeeze=False)
464.     for ax in axs.flat:
465.         ax.plot([10, 20, 30], [10, 20, 30])
466. 
467.     ax.set_yscale("log")
468.     ax.set_xscale("log")
469. 
470.     for ax in axs[0, :]:
471.         assert 0 == len(ax.xaxis.get_ticklabels(which='both'))
472. 
473.     for ax in axs[1, :]:
474.         assert 0 < len(ax.xaxis.get_ticklabels(which='both'))
475. 
476.     for ax in axs[:, 1]:
477.         assert 0 == len(ax.yaxis.get_ticklabels(which='both'))
478. 
479.     for ax in axs[:, 0]:
480.         assert 0 < len(ax.yaxis.get_ticklabels(which='both'))
481. 
482. 
483. def test_savefig():
484.     fig = plt.figure()
485.     msg = r"savefig\(\) takes 2 positional arguments but 3 were given"
486.     with pytest.raises(TypeError, match=msg):
487.         fig.savefig("fname1.png", "fname2.png")
488. 
489. 
490. def test_savefig_warns():
491.     fig = plt.figure()
492.     for format in ['png', 'pdf', 'svg', 'tif', 'jpg']:
493.         with pytest.raises(TypeError):
494.             fig.savefig(io.BytesIO(), format=format, non_existent_kwarg=True)
495. 
496. 
497. def test_savefig_backend():
498.     fig = plt.figure()
499.     # Intentionally use an invalid module name.
500.     with pytest.raises(ModuleNotFoundError, match="No module named '@absent'"):

File: lib/matplotlib/tests/test_artist.py
Line number range: 1 - 500
Content:
1. import io
2. from itertools import chain
3. 
4. import numpy as np
5. 
6. import pytest
7. 
8. import matplotlib.colors as mcolors
9. import matplotlib.pyplot as plt
10. import matplotlib.patches as mpatches
11. import matplotlib.lines as mlines
12. import matplotlib.path as mpath
13. import matplotlib.transforms as mtransforms
14. import matplotlib.collections as mcollections
15. import matplotlib.artist as martist
16. import matplotlib as mpl
17. from matplotlib.testing.decorators import check_figures_equal, image_comparison
18. 
19. 
20. def test_patch_transform_of_none():
21.     # tests the behaviour of patches added to an Axes with various transform
22.     # specifications
23. 
24.     ax = plt.axes()
25.     ax.set_xlim([1, 3])
26.     ax.set_ylim([1, 3])
27. 
28.     # Draw an ellipse over data coord (2, 2) by specifying device coords.
29.     xy_data = (2, 2)
30.     xy_pix = ax.transData.transform(xy_data)
31. 
32.     # Not providing a transform of None puts the ellipse in data coordinates .
33.     e = mpatches.Ellipse(xy_data, width=1, height=1, fc='yellow', alpha=0.5)
34.     ax.add_patch(e)
35.     assert e._transform == ax.transData
36. 
37.     # Providing a transform of None puts the ellipse in device coordinates.
38.     e = mpatches.Ellipse(xy_pix, width=120, height=120, fc='coral',
39.                          transform=None, alpha=0.5)
40.     assert e.is_transform_set()
41.     ax.add_patch(e)
42.     assert isinstance(e._transform, mtransforms.IdentityTransform)
43. 
44.     # Providing an IdentityTransform puts the ellipse in device coordinates.
45.     e = mpatches.Ellipse(xy_pix, width=100, height=100,
46.                          transform=mtransforms.IdentityTransform(), alpha=0.5)
47.     ax.add_patch(e)
48.     assert isinstance(e._transform, mtransforms.IdentityTransform)
49. 
50.     # Not providing a transform, and then subsequently "get_transform" should
51.     # not mean that "is_transform_set".
52.     e = mpatches.Ellipse(xy_pix, width=120, height=120, fc='coral',
53.                          alpha=0.5)
54.     intermediate_transform = e.get_transform()
55.     assert not e.is_transform_set()
56.     ax.add_patch(e)
57.     assert e.get_transform() != intermediate_transform
58.     assert e.is_transform_set()
59.     assert e._transform == ax.transData
60. 
61. 
62. def test_collection_transform_of_none():
63.     # tests the behaviour of collections added to an Axes with various
64.     # transform specifications
65. 
66.     ax = plt.axes()
67.     ax.set_xlim([1, 3])
68.     ax.set_ylim([1, 3])
69. 
70.     # draw an ellipse over data coord (2, 2) by specifying device coords
71.     xy_data = (2, 2)
72.     xy_pix = ax.transData.transform(xy_data)
73. 
74.     # not providing a transform of None puts the ellipse in data coordinates
75.     e = mpatches.Ellipse(xy_data, width=1, height=1)
76.     c = mcollections.PatchCollection([e], facecolor='yellow', alpha=0.5)
77.     ax.add_collection(c)
78.     # the collection should be in data coordinates
79.     assert c.get_offset_transform() + c.get_transform() == ax.transData
80. 
81.     # providing a transform of None puts the ellipse in device coordinates
82.     e = mpatches.Ellipse(xy_pix, width=120, height=120)
83.     c = mcollections.PatchCollection([e], facecolor='coral',
84.                                      alpha=0.5)
85.     c.set_transform(None)
86.     ax.add_collection(c)
87.     assert isinstance(c.get_transform(), mtransforms.IdentityTransform)
88. 
89.     # providing an IdentityTransform puts the ellipse in device coordinates
90.     e = mpatches.Ellipse(xy_pix, width=100, height=100)
91.     c = mcollections.PatchCollection([e],
92.                                      transform=mtransforms.IdentityTransform(),
93.                                      alpha=0.5)
94.     ax.add_collection(c)
95.     assert isinstance(c.get_offset_transform(), mtransforms.IdentityTransform)
96. 
97. 
98. @image_comparison(["clip_path_clipping"], remove_text=True)
99. def test_clipping():
100.     exterior = mpath.Path.unit_rectangle().deepcopy()
101.     exterior.vertices *= 4
102.     exterior.vertices -= 2
103.     interior = mpath.Path.unit_circle().deepcopy()
104.     interior.vertices = interior.vertices[::-1]
105.     clip_path = mpath.Path.make_compound_path(exterior, interior)
106. 
107.     star = mpath.Path.unit_regular_star(6).deepcopy()
108.     star.vertices *= 2.6
109. 
110.     fig, (ax1, ax2) = plt.subplots(1, 2, sharex=True, sharey=True)
111. 
112.     col = mcollections.PathCollection([star], lw=5, edgecolor='blue',
113.                                       facecolor='red', alpha=0.7, hatch='*')
114.     col.set_clip_path(clip_path, ax1.transData)
115.     ax1.add_collection(col)
116. 
117.     patch = mpatches.PathPatch(star, lw=5, edgecolor='blue', facecolor='red',
118.                                alpha=0.7, hatch='*')
119.     patch.set_clip_path(clip_path, ax2.transData)
120.     ax2.add_patch(patch)
121. 
122.     ax1.set_xlim([-3, 3])
123.     ax1.set_ylim([-3, 3])
124. 
125. 
126. @check_figures_equal(extensions=['png'])
127. def test_clipping_zoom(fig_test, fig_ref):
128.     # This test places the Axes and sets its limits such that the clip path is
129.     # outside the figure entirely. This should not break the clip path.
130.     ax_test = fig_test.add_axes([0, 0, 1, 1])
131.     l, = ax_test.plot([-3, 3], [-3, 3])
132.     # Explicit Path instead of a Rectangle uses clip path processing, instead
133.     # of a clip box optimization.
134.     p = mpath.Path([[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]])
135.     p = mpatches.PathPatch(p, transform=ax_test.transData)
136.     l.set_clip_path(p)
137. 
138.     ax_ref = fig_ref.add_axes([0, 0, 1, 1])
139.     ax_ref.plot([-3, 3], [-3, 3])
140. 
141.     ax_ref.set(xlim=(0.5, 0.75), ylim=(0.5, 0.75))
142.     ax_test.set(xlim=(0.5, 0.75), ylim=(0.5, 0.75))
143. 
144. 
145. def test_cull_markers():
146.     x = np.random.random(20000)
147.     y = np.random.random(20000)
148. 
149.     fig, ax = plt.subplots()
150.     ax.plot(x, y, 'k.')
151.     ax.set_xlim(2, 3)
152. 
153.     pdf = io.BytesIO()
154.     fig.savefig(pdf, format="pdf")
155.     assert len(pdf.getvalue()) < 8000
156. 
157.     svg = io.BytesIO()
158.     fig.savefig(svg, format="svg")
159.     assert len(svg.getvalue()) < 20000
160. 
161. 
162. @image_comparison(['hatching'], remove_text=True, style='default')
163. def test_hatching():
164.     fig, ax = plt.subplots(1, 1)
165. 
166.     # Default hatch color.
167.     rect1 = mpatches.Rectangle((0, 0), 3, 4, hatch='/')
168.     ax.add_patch(rect1)
169. 
170.     rect2 = mcollections.RegularPolyCollection(
171.         4, sizes=[16000], offsets=[(1.5, 6.5)], offset_transform=ax.transData,
172.         hatch='/')
173.     ax.add_collection(rect2)
174. 
175.     # Ensure edge color is not applied to hatching.
176.     rect3 = mpatches.Rectangle((4, 0), 3, 4, hatch='/', edgecolor='C1')
177.     ax.add_patch(rect3)
178. 
179.     rect4 = mcollections.RegularPolyCollection(
180.         4, sizes=[16000], offsets=[(5.5, 6.5)], offset_transform=ax.transData,
181.         hatch='/', edgecolor='C1')
182.     ax.add_collection(rect4)
183. 
184.     ax.set_xlim(0, 7)
185.     ax.set_ylim(0, 9)
186. 
187. 
188. def test_remove():
189.     fig, ax = plt.subplots()
190.     im = ax.imshow(np.arange(36).reshape(6, 6))
191.     ln, = ax.plot(range(5))
192. 
193.     assert fig.stale
194.     assert ax.stale
195. 
196.     fig.canvas.draw()
197.     assert not fig.stale
198.     assert not ax.stale
199.     assert not ln.stale
200. 
201.     assert im in ax._mouseover_set
202.     assert ln not in ax._mouseover_set
203.     assert im.axes is ax
204. 
205.     im.remove()
206.     ln.remove()
207. 
208.     for art in [im, ln]:
209.         assert art.axes is None
210.         assert art.figure is None
211. 
212.     assert im not in ax._mouseover_set
213.     assert fig.stale
214.     assert ax.stale
215. 
216. 
217. @image_comparison(["default_edges.png"], remove_text=True, style='default')
218. def test_default_edges():
219.     # Remove this line when this test image is regenerated.
220.     plt.rcParams['text.kerning_factor'] = 6
221. 
222.     fig, [[ax1, ax2], [ax3, ax4]] = plt.subplots(2, 2)
223. 
224.     ax1.plot(np.arange(10), np.arange(10), 'x',
225.              np.arange(10) + 1, np.arange(10), 'o')
226.     ax2.bar(np.arange(10), np.arange(10), align='edge')
227.     ax3.text(0, 0, "BOX", size=24, bbox=dict(boxstyle='sawtooth'))
228.     ax3.set_xlim((-1, 1))
229.     ax3.set_ylim((-1, 1))
230.     pp1 = mpatches.PathPatch(
231.         mpath.Path([(0, 0), (1, 0), (1, 1), (0, 0)],
232.                    [mpath.Path.MOVETO, mpath.Path.CURVE3,
233.                     mpath.Path.CURVE3, mpath.Path.CLOSEPOLY]),
234.         fc="none", transform=ax4.transData)
235.     ax4.add_patch(pp1)
236. 
237. 
238. def test_properties():
239.     ln = mlines.Line2D([], [])
240.     ln.properties()  # Check that no warning is emitted.
241. 
242. 
243. def test_setp():
244.     # Check empty list
245.     plt.setp([])
246.     plt.setp([[]])
247. 
248.     # Check arbitrary iterables
249.     fig, ax = plt.subplots()
250.     lines1 = ax.plot(range(3))
251.     lines2 = ax.plot(range(3))
252.     martist.setp(chain(lines1, lines2), 'lw', 5)
253.     plt.setp(ax.spines.values(), color='green')
254. 
255.     # Check *file* argument
256.     sio = io.StringIO()
257.     plt.setp(lines1, 'zorder', file=sio)
258.     assert sio.getvalue() == '  zorder: float\n'
259. 
260. 
261. def test_None_zorder():
262.     fig, ax = plt.subplots()
263.     ln, = ax.plot(range(5), zorder=None)
264.     assert ln.get_zorder() == mlines.Line2D.zorder
265.     ln.set_zorder(123456)
266.     assert ln.get_zorder() == 123456
267.     ln.set_zorder(None)
268.     assert ln.get_zorder() == mlines.Line2D.zorder
269. 
270. 
271. @pytest.mark.parametrize('accept_clause, expected', [
272.     ('', 'unknown'),
273.     ("ACCEPTS: [ '-' | '--' | '-.' ]", "[ '-' | '--' | '-.' ]"),
274.     ('ACCEPTS: Some description.', 'Some description.'),
275.     ('.. ACCEPTS: Some description.', 'Some description.'),
276.     ('arg : int', 'int'),
277.     ('*arg : int', 'int'),
278.     ('arg : int\nACCEPTS: Something else.', 'Something else. '),
279. ])
280. def test_artist_inspector_get_valid_values(accept_clause, expected):
281.     class TestArtist(martist.Artist):
282.         def set_f(self, arg):
283.             pass
284. 
285.     TestArtist.set_f.__doc__ = """
286.     Some text.
287. 
288.     %s
289.     """ % accept_clause
290.     valid_values = martist.ArtistInspector(TestArtist).get_valid_values('f')
291.     assert valid_values == expected
292. 
293. 
294. def test_artist_inspector_get_aliases():
295.     # test the correct format and type of get_aliases method
296.     ai = martist.ArtistInspector(mlines.Line2D)
297.     aliases = ai.get_aliases()
298.     assert aliases["linewidth"] == {"lw"}
299. 
300. 
301. def test_set_alpha():
302.     art = martist.Artist()
303.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
304.         art.set_alpha('string')
305.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
306.         art.set_alpha([1, 2, 3])
307.     with pytest.raises(ValueError, match="outside 0-1 range"):
308.         art.set_alpha(1.1)
309.     with pytest.raises(ValueError, match="outside 0-1 range"):
310.         art.set_alpha(np.nan)
311. 
312. 
313. def test_set_alpha_for_array():
314.     art = martist.Artist()
315.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
316.         art._set_alpha_for_array('string')
317.     with pytest.raises(ValueError, match="outside 0-1 range"):
318.         art._set_alpha_for_array(1.1)
319.     with pytest.raises(ValueError, match="outside 0-1 range"):
320.         art._set_alpha_for_array(np.nan)
321.     with pytest.raises(ValueError, match="alpha must be between 0 and 1"):
322.         art._set_alpha_for_array([0.5, 1.1])
323.     with pytest.raises(ValueError, match="alpha must be between 0 and 1"):
324.         art._set_alpha_for_array([0.5, np.nan])
325. 
326. 
327. def test_callbacks():
328.     def func(artist):
329.         func.counter += 1
330. 
331.     func.counter = 0
332. 
333.     art = martist.Artist()
334.     oid = art.add_callback(func)
335.     assert func.counter == 0
336.     art.pchanged()  # must call the callback
337.     assert func.counter == 1
338.     art.set_zorder(10)  # setting a property must also call the callback
339.     assert func.counter == 2
340.     art.remove_callback(oid)
341.     art.pchanged()  # must not call the callback anymore
342.     assert func.counter == 2
343. 
344. 
345. def test_set_signature():
346.     """Test autogenerated ``set()`` for Artist subclasses."""
347.     class MyArtist1(martist.Artist):
348.         def set_myparam1(self, val):
349.             pass
350. 
351.     assert hasattr(MyArtist1.set, '_autogenerated_signature')
352.     assert 'myparam1' in MyArtist1.set.__doc__
353. 
354.     class MyArtist2(MyArtist1):
355.         def set_myparam2(self, val):
356.             pass
357. 
358.     assert hasattr(MyArtist2.set, '_autogenerated_signature')
359.     assert 'myparam1' in MyArtist2.set.__doc__
360.     assert 'myparam2' in MyArtist2.set.__doc__
361. 
362. 
363. def test_set_is_overwritten():
364.     """set() defined in Artist subclasses should not be overwritten."""
365.     class MyArtist3(martist.Artist):
366. 
367.         def set(self, **kwargs):
368.             """Not overwritten."""
369. 
370.     assert not hasattr(MyArtist3.set, '_autogenerated_signature')
371.     assert MyArtist3.set.__doc__ == "Not overwritten."
372. 
373.     class MyArtist4(MyArtist3):
374.         pass
375. 
376.     assert MyArtist4.set is MyArtist3.set
377. 
378. 
379. def test_format_cursor_data_BoundaryNorm():
380.     """Test if cursor data is correct when using BoundaryNorm."""
381.     X = np.empty((3, 3))
382.     X[0, 0] = 0.9
383.     X[0, 1] = 0.99
384.     X[0, 2] = 0.999
385.     X[1, 0] = -1
386.     X[1, 1] = 0
387.     X[1, 2] = 1
388.     X[2, 0] = 0.09
389.     X[2, 1] = 0.009
390.     X[2, 2] = 0.0009
391. 
392.     # map range -1..1 to 0..256 in 0.1 steps
393.     fig, ax = plt.subplots()
394.     fig.suptitle("-1..1 to 0..256 in 0.1")
395.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 20), 256)
396.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)
397. 
398.     labels_list = [
399.         "[0.9]",
400.         "[1.]",
401.         "[1.]",
402.         "[-1.0]",
403.         "[0.0]",
404.         "[1.0]",
405.         "[0.09]",
406.         "[0.009]",
407.         "[0.0009]",
408.     ]
409.     for v, label in zip(X.flat, labels_list):
410.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.1))
411.         assert img.format_cursor_data(v) == label
412. 
413.     plt.close()
414. 
415.     # map range -1..1 to 0..256 in 0.01 steps
416.     fig, ax = plt.subplots()
417.     fig.suptitle("-1..1 to 0..256 in 0.01")
418.     cmap = mpl.colormaps['RdBu_r'].resampled(200)
419.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 200), 200)
420.     img = ax.imshow(X, cmap=cmap, norm=norm)
421. 
422.     labels_list = [
423.         "[0.90]",
424.         "[0.99]",
425.         "[1.0]",
426.         "[-1.00]",
427.         "[0.00]",
428.         "[1.00]",
429.         "[0.09]",
430.         "[0.009]",
431.         "[0.0009]",
432.     ]
433.     for v, label in zip(X.flat, labels_list):
434.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.01))
435.         assert img.format_cursor_data(v) == label
436. 
437.     plt.close()
438. 
439.     # map range -1..1 to 0..256 in 0.01 steps
440.     fig, ax = plt.subplots()
441.     fig.suptitle("-1..1 to 0..256 in 0.001")
442.     cmap = mpl.colormaps['RdBu_r'].resampled(2000)
443.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 2000), 2000)
444.     img = ax.imshow(X, cmap=cmap, norm=norm)
445. 
446.     labels_list = [
447.         "[0.900]",
448.         "[0.990]",
449.         "[0.999]",
450.         "[-1.000]",
451.         "[0.000]",
452.         "[1.000]",
453.         "[0.090]",
454.         "[0.009]",
455.         "[0.0009]",
456.     ]
457.     for v, label in zip(X.flat, labels_list):
458.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.001))
459.         assert img.format_cursor_data(v) == label
460. 
461.     plt.close()
462. 
463.     # different testing data set with
464.     # out of bounds values for 0..1 range
465.     X = np.empty((7, 1))
466.     X[0] = -1.0
467.     X[1] = 0.0
468.     X[2] = 0.1
469.     X[3] = 0.5
470.     X[4] = 0.9
471.     X[5] = 1.0
472.     X[6] = 2.0
473. 
474.     labels_list = [
475.         "[-1.0]",
476.         "[0.0]",
477.         "[0.1]",
478.         "[0.5]",
479.         "[0.9]",
480.         "[1.0]",
481.         "[2.0]",
482.     ]
483. 
484.     fig, ax = plt.subplots()
485.     fig.suptitle("noclip, neither")
486.     norm = mcolors.BoundaryNorm(
487.         np.linspace(0, 1, 4, endpoint=True), 256, clip=False, extend='neither')
488.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)
489.     for v, label in zip(X.flat, labels_list):
490.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.33))
491.         assert img.format_cursor_data(v) == label
492. 
493.     plt.close()
494. 
495.     fig, ax = plt.subplots()
496.     fig.suptitle("noclip, min")
497.     norm = mcolors.BoundaryNorm(
498.         np.linspace(0, 1, 4, endpoint=True), 256, clip=False, extend='min')
499.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)
500.     for v, label in zip(X.flat, labels_list):


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 08:47:56,549 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to find test cases related to clearing axes (`cla()`) and the effect on artists within them.\n   - The bug report contrasts the behavior of `artist.remove()` with `axes.cla()`.\n   - This test case, `test_remove`, directly demonstrates the expected behavior for `artist.remove()`.\n\n2. Extended relevance:\n   - It explicitly asserts that after removal, `art.axes` and `art.figure` are `None`.\n   - This is the baseline correct behavior that `cla()` is failing to replicate, making it the most relevant test case for understanding the bug's context.", relative_path='lib/matplotlib/tests/test_artist.py', start_line=188, end_line=215), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is investigating a bug related to `cla()` (clear axes).\n   - This test case, `test_clf_keyword`, deals with clearing a figure, which is a closely related, higher-level operation.\n\n2. Extended relevance:\n   - It shows that using `clear=True` when creating subplots on an existing figure removes old artists (like a `suptitle`).\n   - This is analogous to how `cla()` should behave for an axes, reinforcing the principle that 'clear' operations should deparent child artists.", relative_path='lib/matplotlib/tests/test_figure.py', start_line=144, end_line=161), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is looking for tests involving `cla()` to understand a bug where artists are not deparented.\n   - This test, `test_inverted_cla`, uses `ax.cla()` in a scenario very similar to the bug report: it plots an image (`imshow`), then calls `cla()`, then plots something else.\n\n2. Extended relevance:\n   - While it doesn't assert the state of the artist after clearing, it's a prime example of a test where such an assertion could be added to reproduce the bug.\n   - It demonstrates a standard use case for `cla()`: resetting an axes to draw something new.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=438, end_line=488), ContextOutput(reasoning="1. Query requirement analysis:\n   - The query is about the effects of `cla()`.\n   - This test case, `test_twinx_cla`, specifically tests the state of an axes after `cla()` is called.\n\n2. Extended relevance:\n   - It asserts that after `cla()`, the visibility of the axes' patch and spines are correctly reset.\n   - This supports the expectation that `cla()` is a hard reset method, which strengthens the argument that it should also be resetting the parent-child relationship with its artists.", relative_path='lib/matplotlib/tests/test_axes.py', start_line=336, end_line=357), ContextOutput(reasoning="1. Query requirement analysis:\n   - The bug is about an artist's `.axes` attribute not being unset, which is a failure to 'deparent' the artist from the axes.\n   - This test case, `test_axes_remove`, demonstrates the 'deparenting' concept at the Figure-Axes level.\n\n2. Extended relevance:\n   - It shows an `Axes` instance being removed from a `Figure` and asserts that the `ax` is no longer in the `fig.axes` list.\n   - This provides a useful analogy for the expected behavior at the Axes-Artist level, where `cla()` should remove artists from the `ax.artists` list and unset the artist's `.axes` attribute.", relative_path='lib/matplotlib/tests/test_figure.py', start_line=357, end_line=364)]
2025-10-06 08:47:56,551 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='lib/matplotlib/tests/test_axes.py', content='438. def test_inverted_cla():\n439.     # GitHub PR #5450. Setting autoscale should reset\n440.     # axes to be non-inverted.\n441.     # plotting an image, then 1d graph, axis is now down\n442.     fig = plt.figure(0)\n443.     ax = fig.gca()\n444.     # 1. test that a new axis is not inverted per default\n445.     assert not ax.xaxis_inverted()\n446.     assert not ax.yaxis_inverted()\n447.     img = np.random.random((100, 100))\n448.     ax.imshow(img)\n449.     # 2. test that a image axis is inverted\n450.     assert not ax.xaxis_inverted()\n451.     assert ax.yaxis_inverted()\n452.     # 3. test that clearing and plotting a line, axes are\n453.     # not inverted\n454.     ax.cla()\n455.     x = np.linspace(0, 2*np.pi, 100)\n456.     ax.plot(x, np.cos(x))\n457.     assert not ax.xaxis_inverted()\n458.     assert not ax.yaxis_inverted()\n459. \n460.     # 4. autoscaling should not bring back axes to normal\n461.     ax.cla()\n462.     ax.imshow(img)\n463.     plt.autoscale()\n464.     assert not ax.xaxis_inverted()\n465.     assert ax.yaxis_inverted()\n466. \n467.     for ax in fig.axes:\n468.         ax.remove()\n469.     # 5. two shared axes. Inverting the leader axis should invert the shared\n470.     # axes; clearing the leader axis should bring axes in shared\n471.     # axes back to normal.\n472.     ax0 = plt.subplot(211)\n473.     ax1 = plt.subplot(212, sharey=ax0)\n474.     ax0.yaxis.set_inverted(True)\n475.     assert ax1.yaxis_inverted()\n476.     ax1.plot(x, np.cos(x))\n477.     ax0.cla()\n478.     assert not ax1.yaxis_inverted()\n479.     ax1.cla()\n480.     # 6. clearing the follower should not touch limits\n481.     ax0.imshow(img)\n482.     ax1.plot(x, np.cos(x))\n483.     ax1.cla()\n484.     assert ax.yaxis_inverted()\n485. \n486.     # clean up\n487.     plt.close(fig)\n488. ', start_line_number=438, end_line_number=488), Context(relative_path='lib/matplotlib/tests/test_axes.py', content='336. def test_twinx_cla():\n337.     fig, ax = plt.subplots()\n338.     ax2 = ax.twinx()\n339.     ax3 = ax2.twiny()\n340.     plt.draw()\n341.     assert not ax2.xaxis.get_visible()\n342.     assert not ax2.patch.get_visible()\n343.     ax2.cla()\n344.     ax3.cla()\n345. \n346.     assert not ax2.xaxis.get_visible()\n347.     assert not ax2.patch.get_visible()\n348.     assert ax2.yaxis.get_visible()\n349. \n350.     assert ax3.xaxis.get_visible()\n351.     assert not ax3.patch.get_visible()\n352.     assert not ax3.yaxis.get_visible()\n353. \n354.     assert ax.xaxis.get_visible()\n355.     assert ax.patch.get_visible()\n356.     assert ax.yaxis.get_visible()\n357. \n358. ', start_line_number=336, end_line_number=358), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="144. def test_clf_keyword():\n145.     # test if existing figure is cleared with figure() and subplots()\n146.     text1 = 'A fancy plot'\n147.     text2 = 'Really fancy!'\n148. \n149.     fig0 = plt.figure(num=1)\n150.     fig0.suptitle(text1)\n151.     assert [t.get_text() for t in fig0.texts] == [text1]\n152. \n153.     fig1 = plt.figure(num=1, clear=False)\n154.     fig1.text(0.5, 0.5, text2)\n155.     assert fig0 is fig1\n156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]\n157. \n158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n159.     assert fig0 is fig2\n160.     assert [t.get_text() for t in fig2.texts] == []\n161. ", start_line_number=144, end_line_number=161), Context(relative_path='lib/matplotlib/tests/test_figure.py', content='357. def test_axes_remove():\n358.     fig, axs = plt.subplots(2, 2)\n359.     axs[-1, -1].remove()\n360.     for ax in axs.ravel()[:-1]:\n361.         assert ax in fig.axes\n362.     assert axs[-1, -1] not in fig.axes\n363.     assert len(fig.axes) == 3\n364. ', start_line_number=357, end_line_number=364), Context(relative_path='lib/matplotlib/tests/test_axes.py', content="490. def test_subclass_clear_cla():\n491.     # Ensure that subclasses of Axes call cla/clear correctly.\n492.     # Note, we cannot use mocking here as we want to be sure that the\n493.     # superclass fallback does not recurse.\n494. \n495.     with pytest.warns(PendingDeprecationWarning,\n496.                       match='Overriding `Axes.cla`'):\n497.         class ClaAxes(Axes):\n498.             def cla(self):\n499.                 nonlocal called\n500.                 called = True\n501. \n502.     with pytest.warns(PendingDeprecationWarning,\n503.                       match='Overriding `Axes.cla`'):\n504.         class ClaSuperAxes(Axes):\n505.             def cla(self):\n506.                 nonlocal called\n507.                 called = True\n508.                 super().cla()\n509. \n510.     class SubClaAxes(ClaAxes):\n511.         pass\n512. \n513.     class ClearAxes(Axes):\n514.         def clear(self):\n515.             nonlocal called\n516.             called = True\n517. \n518.     class ClearSuperAxes(Axes):\n519.         def clear(self):\n520.             nonlocal called\n521.             called = True\n522.             super().clear()\n523. \n524.     class SubClearAxes(ClearAxes):\n525.         pass\n526. \n527.     fig = Figure()\n528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:\n530.         called = False\n531.         ax = axes_class(fig, [0, 0, 1, 1])\n532.         # Axes.__init__ has already called clear (which aliases to cla or is in\n533.         # the subclass).\n534.         assert called\n535. \n536.         called = False\n537.         ax.cla()\n538.         assert called", start_line_number=490, end_line_number=538), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="690. @pytest.mark.parametrize('clear_meth', ['clear', 'clf'])\n691. def test_figure_clear(clear_meth):\n692.     # we test the following figure clearing scenarios:\n693.     fig = plt.figure()\n694. \n695.     # a) an empty figure\n696.     fig.clear()\n697.     assert fig.axes == []\n698. \n699.     # b) a figure with a single unnested axes\n700.     ax = fig.add_subplot(111)\n701.     getattr(fig, clear_meth)()\n702.     assert fig.axes == []\n703. \n704.     # c) a figure multiple unnested axes\n705.     axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]\n706.     getattr(fig, clear_meth)()\n707.     assert fig.axes == []\n708. \n709.     # d) a figure with a subfigure\n710.     gs = fig.add_gridspec(ncols=2, nrows=1)\n711.     subfig = fig.add_subfigure(gs[0])\n712.     subaxes = subfig.add_subplot(111)\n713.     getattr(fig, clear_meth)()\n714.     assert subfig not in fig.subfigs\n715.     assert fig.axes == []\n716. \n717.     # e) a figure with a subfigure and a subplot\n718.     subfig = fig.add_subfigure(gs[0])\n719.     subaxes = subfig.add_subplot(111)\n720.     mainaxes = fig.add_subplot(gs[1])\n721. \n722.     # e.1) removing just the axes leaves the subplot\n723.     mainaxes.remove()\n724.     assert fig.axes == [subaxes]\n725. \n726.     # e.2) removing just the subaxes leaves the subplot\n727.     # and subfigure\n728.     mainaxes = fig.add_subplot(gs[1])\n729.     subaxes.remove()\n730.     assert fig.axes == [mainaxes]\n731.     assert subfig in fig.subfigs\n732. \n733.     # e.3) clearing the subfigure leaves the subplot\n734.     subaxes = subfig.add_subplot(111)\n735.     assert mainaxes in fig.axes\n736.     assert subaxes in fig.axes\n737.     getattr(subfig, clear_meth)()\n738.     assert subfig in fig.subfigs\n739.     assert subaxes not in subfig.axes\n740.     assert subaxes not in fig.axes\n741.     assert mainaxes in fig.axes\n742. \n743.     # e.4) clearing the whole thing\n744.     subaxes = subfig.add_subplot(111)\n745.     getattr(fig, clear_meth)()\n746.     assert fig.axes == []\n747.     assert fig.subfigs == []\n748. \n749.     # f) multiple subfigures\n750.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n751.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n752.     assert all(ax in fig.axes for ax in subaxes)\n753.     assert all(sfig in fig.subfigs for sfig in subfigs)\n754. \n755.     # f.1) clearing only one subfigure\n756.     getattr(subfigs[0], clear_meth)()\n757.     assert subaxes[0] not in fig.axes\n758.     assert subaxes[1] in fig.axes\n759.     assert subfigs[1] in fig.subfigs\n760. \n761.     # f.2) clearing the whole thing\n762.     getattr(subfigs[1], clear_meth)()\n763.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n764.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n765.     assert all(ax in fig.axes for ax in subaxes)\n766.     assert all(sfig in fig.subfigs for sfig in subfigs)\n767.     getattr(fig, clear_meth)()\n768.     assert fig.subfigs == []\n769.     assert fig.axes == []", start_line_number=690, end_line_number=769), Context(relative_path='lib/matplotlib/tests/test_artist.py', content='188. def test_remove():\n189.     fig, ax = plt.subplots()\n190.     im = ax.imshow(np.arange(36).reshape(6, 6))\n191.     ln, = ax.plot(range(5))\n192. \n193.     assert fig.stale\n194.     assert ax.stale\n195. \n196.     fig.canvas.draw()\n197.     assert not fig.stale\n198.     assert not ax.stale\n199.     assert not ln.stale\n200. \n201.     assert im in ax._mouseover_set\n202.     assert ln not in ax._mouseover_set\n203.     assert im.axes is ax\n204. \n205.     im.remove()\n206.     ln.remove()\n207. \n208.     for art in [im, ln]:\n209.         assert art.axes is None\n210.         assert art.figure is None\n211. \n212.     assert im not in ax._mouseover_set\n213.     assert fig.stale\n214.     assert ax.stale\n215. ', start_line_number=188, end_line_number=215)]
2025-10-06 08:47:56,552 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 08:47:56,552 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-10-06 08:47:56,552 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='lib/matplotlib/tests/test_axes.py', content='438. def test_inverted_cla():\n439.     # GitHub PR #5450. Setting autoscale should reset\n440.     # axes to be non-inverted.\n441.     # plotting an image, then 1d graph, axis is now down\n442.     fig = plt.figure(0)\n443.     ax = fig.gca()\n444.     # 1. test that a new axis is not inverted per default\n445.     assert not ax.xaxis_inverted()\n446.     assert not ax.yaxis_inverted()\n447.     img = np.random.random((100, 100))\n448.     ax.imshow(img)\n449.     # 2. test that a image axis is inverted\n450.     assert not ax.xaxis_inverted()\n451.     assert ax.yaxis_inverted()\n452.     # 3. test that clearing and plotting a line, axes are\n453.     # not inverted\n454.     ax.cla()\n455.     x = np.linspace(0, 2*np.pi, 100)\n456.     ax.plot(x, np.cos(x))\n457.     assert not ax.xaxis_inverted()\n458.     assert not ax.yaxis_inverted()\n459. \n460.     # 4. autoscaling should not bring back axes to normal\n461.     ax.cla()\n462.     ax.imshow(img)\n463.     plt.autoscale()\n464.     assert not ax.xaxis_inverted()\n465.     assert ax.yaxis_inverted()\n466. \n467.     for ax in fig.axes:\n468.         ax.remove()\n469.     # 5. two shared axes. Inverting the leader axis should invert the shared\n470.     # axes; clearing the leader axis should bring axes in shared\n471.     # axes back to normal.\n472.     ax0 = plt.subplot(211)\n473.     ax1 = plt.subplot(212, sharey=ax0)\n474.     ax0.yaxis.set_inverted(True)\n475.     assert ax1.yaxis_inverted()\n476.     ax1.plot(x, np.cos(x))\n477.     ax0.cla()\n478.     assert not ax1.yaxis_inverted()\n479.     ax1.cla()\n480.     # 6. clearing the follower should not touch limits\n481.     ax0.imshow(img)\n482.     ax1.plot(x, np.cos(x))\n483.     ax1.cla()\n484.     assert ax.yaxis_inverted()\n485. \n486.     # clean up\n487.     plt.close(fig)\n488. ', start_line_number=438, end_line_number=488), Context(relative_path='lib/matplotlib/tests/test_axes.py', content='336. def test_twinx_cla():\n337.     fig, ax = plt.subplots()\n338.     ax2 = ax.twinx()\n339.     ax3 = ax2.twiny()\n340.     plt.draw()\n341.     assert not ax2.xaxis.get_visible()\n342.     assert not ax2.patch.get_visible()\n343.     ax2.cla()\n344.     ax3.cla()\n345. \n346.     assert not ax2.xaxis.get_visible()\n347.     assert not ax2.patch.get_visible()\n348.     assert ax2.yaxis.get_visible()\n349. \n350.     assert ax3.xaxis.get_visible()\n351.     assert not ax3.patch.get_visible()\n352.     assert not ax3.yaxis.get_visible()\n353. \n354.     assert ax.xaxis.get_visible()\n355.     assert ax.patch.get_visible()\n356.     assert ax.yaxis.get_visible()\n357. \n358. ', start_line_number=336, end_line_number=358), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="144. def test_clf_keyword():\n145.     # test if existing figure is cleared with figure() and subplots()\n146.     text1 = 'A fancy plot'\n147.     text2 = 'Really fancy!'\n148. \n149.     fig0 = plt.figure(num=1)\n150.     fig0.suptitle(text1)\n151.     assert [t.get_text() for t in fig0.texts] == [text1]\n152. \n153.     fig1 = plt.figure(num=1, clear=False)\n154.     fig1.text(0.5, 0.5, text2)\n155.     assert fig0 is fig1\n156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]\n157. \n158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n159.     assert fig0 is fig2\n160.     assert [t.get_text() for t in fig2.texts] == []\n161. ", start_line_number=144, end_line_number=161), Context(relative_path='lib/matplotlib/tests/test_figure.py', content='357. def test_axes_remove():\n358.     fig, axs = plt.subplots(2, 2)\n359.     axs[-1, -1].remove()\n360.     for ax in axs.ravel()[:-1]:\n361.         assert ax in fig.axes\n362.     assert axs[-1, -1] not in fig.axes\n363.     assert len(fig.axes) == 3\n364. ', start_line_number=357, end_line_number=364), Context(relative_path='lib/matplotlib/tests/test_axes.py', content="490. def test_subclass_clear_cla():\n491.     # Ensure that subclasses of Axes call cla/clear correctly.\n492.     # Note, we cannot use mocking here as we want to be sure that the\n493.     # superclass fallback does not recurse.\n494. \n495.     with pytest.warns(PendingDeprecationWarning,\n496.                       match='Overriding `Axes.cla`'):\n497.         class ClaAxes(Axes):\n498.             def cla(self):\n499.                 nonlocal called\n500.                 called = True\n501. \n502.     with pytest.warns(PendingDeprecationWarning,\n503.                       match='Overriding `Axes.cla`'):\n504.         class ClaSuperAxes(Axes):\n505.             def cla(self):\n506.                 nonlocal called\n507.                 called = True\n508.                 super().cla()\n509. \n510.     class SubClaAxes(ClaAxes):\n511.         pass\n512. \n513.     class ClearAxes(Axes):\n514.         def clear(self):\n515.             nonlocal called\n516.             called = True\n517. \n518.     class ClearSuperAxes(Axes):\n519.         def clear(self):\n520.             nonlocal called\n521.             called = True\n522.             super().clear()\n523. \n524.     class SubClearAxes(ClearAxes):\n525.         pass\n526. \n527.     fig = Figure()\n528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:\n530.         called = False\n531.         ax = axes_class(fig, [0, 0, 1, 1])\n532.         # Axes.__init__ has already called clear (which aliases to cla or is in\n533.         # the subclass).\n534.         assert called\n535. \n536.         called = False\n537.         ax.cla()\n538.         assert called", start_line_number=490, end_line_number=538), Context(relative_path='lib/matplotlib/tests/test_figure.py', content="690. @pytest.mark.parametrize('clear_meth', ['clear', 'clf'])\n691. def test_figure_clear(clear_meth):\n692.     # we test the following figure clearing scenarios:\n693.     fig = plt.figure()\n694. \n695.     # a) an empty figure\n696.     fig.clear()\n697.     assert fig.axes == []\n698. \n699.     # b) a figure with a single unnested axes\n700.     ax = fig.add_subplot(111)\n701.     getattr(fig, clear_meth)()\n702.     assert fig.axes == []\n703. \n704.     # c) a figure multiple unnested axes\n705.     axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]\n706.     getattr(fig, clear_meth)()\n707.     assert fig.axes == []\n708. \n709.     # d) a figure with a subfigure\n710.     gs = fig.add_gridspec(ncols=2, nrows=1)\n711.     subfig = fig.add_subfigure(gs[0])\n712.     subaxes = subfig.add_subplot(111)\n713.     getattr(fig, clear_meth)()\n714.     assert subfig not in fig.subfigs\n715.     assert fig.axes == []\n716. \n717.     # e) a figure with a subfigure and a subplot\n718.     subfig = fig.add_subfigure(gs[0])\n719.     subaxes = subfig.add_subplot(111)\n720.     mainaxes = fig.add_subplot(gs[1])\n721. \n722.     # e.1) removing just the axes leaves the subplot\n723.     mainaxes.remove()\n724.     assert fig.axes == [subaxes]\n725. \n726.     # e.2) removing just the subaxes leaves the subplot\n727.     # and subfigure\n728.     mainaxes = fig.add_subplot(gs[1])\n729.     subaxes.remove()\n730.     assert fig.axes == [mainaxes]\n731.     assert subfig in fig.subfigs\n732. \n733.     # e.3) clearing the subfigure leaves the subplot\n734.     subaxes = subfig.add_subplot(111)\n735.     assert mainaxes in fig.axes\n736.     assert subaxes in fig.axes\n737.     getattr(subfig, clear_meth)()\n738.     assert subfig in fig.subfigs\n739.     assert subaxes not in subfig.axes\n740.     assert subaxes not in fig.axes\n741.     assert mainaxes in fig.axes\n742. \n743.     # e.4) clearing the whole thing\n744.     subaxes = subfig.add_subplot(111)\n745.     getattr(fig, clear_meth)()\n746.     assert fig.axes == []\n747.     assert fig.subfigs == []\n748. \n749.     # f) multiple subfigures\n750.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n751.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n752.     assert all(ax in fig.axes for ax in subaxes)\n753.     assert all(sfig in fig.subfigs for sfig in subfigs)\n754. \n755.     # f.1) clearing only one subfigure\n756.     getattr(subfigs[0], clear_meth)()\n757.     assert subaxes[0] not in fig.axes\n758.     assert subaxes[1] in fig.axes\n759.     assert subfigs[1] in fig.subfigs\n760. \n761.     # f.2) clearing the whole thing\n762.     getattr(subfigs[1], clear_meth)()\n763.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n764.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n765.     assert all(ax in fig.axes for ax in subaxes)\n766.     assert all(sfig in fig.subfigs for sfig in subfigs)\n767.     getattr(fig, clear_meth)()\n768.     assert fig.subfigs == []\n769.     assert fig.axes == []", start_line_number=690, end_line_number=769), Context(relative_path='lib/matplotlib/tests/test_artist.py', content='188. def test_remove():\n189.     fig, ax = plt.subplots()\n190.     im = ax.imshow(np.arange(36).reshape(6, 6))\n191.     ln, = ax.plot(range(5))\n192. \n193.     assert fig.stale\n194.     assert ax.stale\n195. \n196.     fig.canvas.draw()\n197.     assert not fig.stale\n198.     assert not ax.stale\n199.     assert not ln.stale\n200. \n201.     assert im in ax._mouseover_set\n202.     assert ln not in ax._mouseover_set\n203.     assert im.axes is ax\n204. \n205.     im.remove()\n206.     ln.remove()\n207. \n208.     for art in [im, ln]:\n209.         assert art.axes is None\n210.         assert art.figure is None\n211. \n212.     assert im not in ax._mouseover_set\n213.     assert fig.stale\n214.     assert ax.stale\n215. ', start_line_number=188, end_line_number=215)]
2025-10-06 08:47:56,553 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content="Issue title:\ncla(), clf() should unset the `.axes` and `.figure` attributes of deparented artists\n\nIssue description: \nmpl2.0b3: Removing an artist from its axes unsets its `.axes` attribute, but clearing the axes does not do so.\n\n```\nIn [11]: f, a = plt.subplots(); l, = a.plot([1, 2]); l.remove(); print(l.axes)\nNone\n\nIn [12]: f, a = plt.subplots(); l, = a.plot([1, 2]); a.cla(); print(l.axes)\nAxes(0.125,0.11;0.775x0.77)\n```\n\n\nIssue comments:\n\n\nBug reproducing context:\nFile: lib/matplotlib/tests/test_axes.py\nLine number range: 438 - 488\nContent:\n438. def test_inverted_cla():\n439.     # GitHub PR #5450. Setting autoscale should reset\n440.     # axes to be non-inverted.\n441.     # plotting an image, then 1d graph, axis is now down\n442.     fig = plt.figure(0)\n443.     ax = fig.gca()\n444.     # 1. test that a new axis is not inverted per default\n445.     assert not ax.xaxis_inverted()\n446.     assert not ax.yaxis_inverted()\n447.     img = np.random.random((100, 100))\n448.     ax.imshow(img)\n449.     # 2. test that a image axis is inverted\n450.     assert not ax.xaxis_inverted()\n451.     assert ax.yaxis_inverted()\n452.     # 3. test that clearing and plotting a line, axes are\n453.     # not inverted\n454.     ax.cla()\n455.     x = np.linspace(0, 2*np.pi, 100)\n456.     ax.plot(x, np.cos(x))\n457.     assert not ax.xaxis_inverted()\n458.     assert not ax.yaxis_inverted()\n459. \n460.     # 4. autoscaling should not bring back axes to normal\n461.     ax.cla()\n462.     ax.imshow(img)\n463.     plt.autoscale()\n464.     assert not ax.xaxis_inverted()\n465.     assert ax.yaxis_inverted()\n466. \n467.     for ax in fig.axes:\n468.         ax.remove()\n469.     # 5. two shared axes. Inverting the leader axis should invert the shared\n470.     # axes; clearing the leader axis should bring axes in shared\n471.     # axes back to normal.\n472.     ax0 = plt.subplot(211)\n473.     ax1 = plt.subplot(212, sharey=ax0)\n474.     ax0.yaxis.set_inverted(True)\n475.     assert ax1.yaxis_inverted()\n476.     ax1.plot(x, np.cos(x))\n477.     ax0.cla()\n478.     assert not ax1.yaxis_inverted()\n479.     ax1.cla()\n480.     # 6. clearing the follower should not touch limits\n481.     ax0.imshow(img)\n482.     ax1.plot(x, np.cos(x))\n483.     ax1.cla()\n484.     assert ax.yaxis_inverted()\n485. \n486.     # clean up\n487.     plt.close(fig)\n488. \n\n\nFile: lib/matplotlib/tests/test_axes.py\nLine number range: 336 - 358\nContent:\n336. def test_twinx_cla():\n337.     fig, ax = plt.subplots()\n338.     ax2 = ax.twinx()\n339.     ax3 = ax2.twiny()\n340.     plt.draw()\n341.     assert not ax2.xaxis.get_visible()\n342.     assert not ax2.patch.get_visible()\n343.     ax2.cla()\n344.     ax3.cla()\n345. \n346.     assert not ax2.xaxis.get_visible()\n347.     assert not ax2.patch.get_visible()\n348.     assert ax2.yaxis.get_visible()\n349. \n350.     assert ax3.xaxis.get_visible()\n351.     assert not ax3.patch.get_visible()\n352.     assert not ax3.yaxis.get_visible()\n353. \n354.     assert ax.xaxis.get_visible()\n355.     assert ax.patch.get_visible()\n356.     assert ax.yaxis.get_visible()\n357. \n358. \n\n\nFile: lib/matplotlib/tests/test_figure.py\nLine number range: 144 - 161\nContent:\n144. def test_clf_keyword():\n145.     # test if existing figure is cleared with figure() and subplots()\n146.     text1 = 'A fancy plot'\n147.     text2 = 'Really fancy!'\n148. \n149.     fig0 = plt.figure(num=1)\n150.     fig0.suptitle(text1)\n151.     assert [t.get_text() for t in fig0.texts] == [text1]\n152. \n153.     fig1 = plt.figure(num=1, clear=False)\n154.     fig1.text(0.5, 0.5, text2)\n155.     assert fig0 is fig1\n156.     assert [t.get_text() for t in fig1.texts] == [text1, text2]\n157. \n158.     fig2, ax2 = plt.subplots(2, 1, num=1, clear=True)\n159.     assert fig0 is fig2\n160.     assert [t.get_text() for t in fig2.texts] == []\n161. \n\n\nFile: lib/matplotlib/tests/test_figure.py\nLine number range: 357 - 364\nContent:\n357. def test_axes_remove():\n358.     fig, axs = plt.subplots(2, 2)\n359.     axs[-1, -1].remove()\n360.     for ax in axs.ravel()[:-1]:\n361.         assert ax in fig.axes\n362.     assert axs[-1, -1] not in fig.axes\n363.     assert len(fig.axes) == 3\n364. \n\n\nFile: lib/matplotlib/tests/test_axes.py\nLine number range: 490 - 538\nContent:\n490. def test_subclass_clear_cla():\n491.     # Ensure that subclasses of Axes call cla/clear correctly.\n492.     # Note, we cannot use mocking here as we want to be sure that the\n493.     # superclass fallback does not recurse.\n494. \n495.     with pytest.warns(PendingDeprecationWarning,\n496.                       match='Overriding `Axes.cla`'):\n497.         class ClaAxes(Axes):\n498.             def cla(self):\n499.                 nonlocal called\n500.                 called = True\n501. \n502.     with pytest.warns(PendingDeprecationWarning,\n503.                       match='Overriding `Axes.cla`'):\n504.         class ClaSuperAxes(Axes):\n505.             def cla(self):\n506.                 nonlocal called\n507.                 called = True\n508.                 super().cla()\n509. \n510.     class SubClaAxes(ClaAxes):\n511.         pass\n512. \n513.     class ClearAxes(Axes):\n514.         def clear(self):\n515.             nonlocal called\n516.             called = True\n517. \n518.     class ClearSuperAxes(Axes):\n519.         def clear(self):\n520.             nonlocal called\n521.             called = True\n522.             super().clear()\n523. \n524.     class SubClearAxes(ClearAxes):\n525.         pass\n526. \n527.     fig = Figure()\n528.     for axes_class in [ClaAxes, ClaSuperAxes, SubClaAxes,\n529.                        ClearAxes, ClearSuperAxes, SubClearAxes]:\n530.         called = False\n531.         ax = axes_class(fig, [0, 0, 1, 1])\n532.         # Axes.__init__ has already called clear (which aliases to cla or is in\n533.         # the subclass).\n534.         assert called\n535. \n536.         called = False\n537.         ax.cla()\n538.         assert called\n\n\nFile: lib/matplotlib/tests/test_figure.py\nLine number range: 690 - 769\nContent:\n690. @pytest.mark.parametrize('clear_meth', ['clear', 'clf'])\n691. def test_figure_clear(clear_meth):\n692.     # we test the following figure clearing scenarios:\n693.     fig = plt.figure()\n694. \n695.     # a) an empty figure\n696.     fig.clear()\n697.     assert fig.axes == []\n698. \n699.     # b) a figure with a single unnested axes\n700.     ax = fig.add_subplot(111)\n701.     getattr(fig, clear_meth)()\n702.     assert fig.axes == []\n703. \n704.     # c) a figure multiple unnested axes\n705.     axes = [fig.add_subplot(2, 1, i+1) for i in range(2)]\n706.     getattr(fig, clear_meth)()\n707.     assert fig.axes == []\n708. \n709.     # d) a figure with a subfigure\n710.     gs = fig.add_gridspec(ncols=2, nrows=1)\n711.     subfig = fig.add_subfigure(gs[0])\n712.     subaxes = subfig.add_subplot(111)\n713.     getattr(fig, clear_meth)()\n714.     assert subfig not in fig.subfigs\n715.     assert fig.axes == []\n716. \n717.     # e) a figure with a subfigure and a subplot\n718.     subfig = fig.add_subfigure(gs[0])\n719.     subaxes = subfig.add_subplot(111)\n720.     mainaxes = fig.add_subplot(gs[1])\n721. \n722.     # e.1) removing just the axes leaves the subplot\n723.     mainaxes.remove()\n724.     assert fig.axes == [subaxes]\n725. \n726.     # e.2) removing just the subaxes leaves the subplot\n727.     # and subfigure\n728.     mainaxes = fig.add_subplot(gs[1])\n729.     subaxes.remove()\n730.     assert fig.axes == [mainaxes]\n731.     assert subfig in fig.subfigs\n732. \n733.     # e.3) clearing the subfigure leaves the subplot\n734.     subaxes = subfig.add_subplot(111)\n735.     assert mainaxes in fig.axes\n736.     assert subaxes in fig.axes\n737.     getattr(subfig, clear_meth)()\n738.     assert subfig in fig.subfigs\n739.     assert subaxes not in subfig.axes\n740.     assert subaxes not in fig.axes\n741.     assert mainaxes in fig.axes\n742. \n743.     # e.4) clearing the whole thing\n744.     subaxes = subfig.add_subplot(111)\n745.     getattr(fig, clear_meth)()\n746.     assert fig.axes == []\n747.     assert fig.subfigs == []\n748. \n749.     # f) multiple subfigures\n750.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n751.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n752.     assert all(ax in fig.axes for ax in subaxes)\n753.     assert all(sfig in fig.subfigs for sfig in subfigs)\n754. \n755.     # f.1) clearing only one subfigure\n756.     getattr(subfigs[0], clear_meth)()\n757.     assert subaxes[0] not in fig.axes\n758.     assert subaxes[1] in fig.axes\n759.     assert subfigs[1] in fig.subfigs\n760. \n761.     # f.2) clearing the whole thing\n762.     getattr(subfigs[1], clear_meth)()\n763.     subfigs = [fig.add_subfigure(gs[i]) for i in [0, 1]]\n764.     subaxes = [sfig.add_subplot(111) for sfig in subfigs]\n765.     assert all(ax in fig.axes for ax in subaxes)\n766.     assert all(sfig in fig.subfigs for sfig in subfigs)\n767.     getattr(fig, clear_meth)()\n768.     assert fig.subfigs == []\n769.     assert fig.axes == []\n\n\nFile: lib/matplotlib/tests/test_artist.py\nLine number range: 188 - 215\nContent:\n188. def test_remove():\n189.     fig, ax = plt.subplots()\n190.     im = ax.imshow(np.arange(36).reshape(6, 6))\n191.     ln, = ax.plot(range(5))\n192. \n193.     assert fig.stale\n194.     assert ax.stale\n195. \n196.     fig.canvas.draw()\n197.     assert not fig.stale\n198.     assert not ax.stale\n199.     assert not ln.stale\n200. \n201.     assert im in ax._mouseover_set\n202.     assert ln not in ax._mouseover_set\n203.     assert im.axes is ax\n204. \n205.     im.remove()\n206.     ln.remove()\n207. \n208.     for art in [im, ln]:\n209.         assert art.axes is None\n210.         assert art.figure is None\n211. \n212.     assert im not in ax._mouseover_set\n213.     assert fig.stale\n214.     assert ax.stale\n215. \n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n" additional_kwargs={} response_metadata={}
2025-10-06 08:48:36,703 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nimport matplotlib.pyplot as plt\nfrom matplotlib.figure import Figure\n\n\ndef test_cla_unsets_artist_parents():\n    """\n    Check that clearing an axes unsets the .axes and .figure attributes on the\n    artists that are removed, matching the behavior of artist.remove().\n    """\n    fig, ax = plt.subplots()\n    line, = ax.plot([1, 2])\n    ax.cla()\n    assert line.axes is None\n    assert line.figure is None\n\n\ndef test_clf_unsets_artist_parents():\n    """\n    Check that clearing a figure unsets the .axes and .figure attributes on\n    the artists that are removed, matching the behavior of artist.remove().\n    """\n    fig, ax = plt.subplots()\n    line, = ax.plot([1, 2])\n    fig.clf()\n    assert line.axes is None\n    assert line.figure is None\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 4777, 'candidates_token_count': 214, 'total_token_count': 9285, 'prompt_tokens_details': [{'modality': 1, 'token_count': 4777}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 214}], 'thoughts_token_count': 4294, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -2.8736498110762265, 'model_name': 'gemini-2.5-pro'} id='run--a949263a-8f0f-4f26-85d1-a8e9d093890d-0' usage_metadata={'input_tokens': 4777, 'output_tokens': 214, 'total_tokens': 9285, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 4294}}
2025-10-06 08:48:52,741 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "import matplotlib.pyplot as plt\\nfrom matplotlib.figure import Figure\\n\\n\\ndef test_cla_unsets_artist_parents():\\n    \\"\\"\\"\\n    Check that clearing an axes unsets the .axes and .figure attributes on the\\n    artists that are removed, matching the behavior of artist.remove().\\n    \\"\\"\\"\\n    fig, ax = plt.subplots()\\n    line, = ax.plot([1, 2])\\n    ax.cla()\\n    assert line.axes is None\\n    assert line.figure is None\\n\\n\\ndef test_clf_unsets_artist_parents():\\n    \\"\\"\\"\\n    Check that clearing a figure unsets the .axes and .figure attributes on\\n    the artists that are removed, matching the behavior of artist.remove().\\n    \\"\\"\\"\\n    fig, ax = plt.subplots()\\n    line, = ax.plot([1, 2])\\n    fig.clf()\\n    assert line.axes is None\\n    assert line.figure is None\\n", "relative_path": "lib/matplotlib/tests/test_artist_lifecycle.py"}'}, '__gemini_function_call_thought_signatures__': {'f9e1b069-72bc-4918-88a6-59eca8dd451c': 'CqsjAR/MhbaaAOhbmfs2VIZOxPgc12wWCl8eBD9PNShjt7WeOGw+8izaPuhvff8hr3CCvAzPzDGx9SDlaoMPCTkDH0FAO4xHNNLCiNzWSOb+QQrVOZxlTKDYECrfGwkf3n9Q4v75roahUo4GzY3rrQ/Od2HRSjAMZxRPPeO1Pa1n93gEg2Zgn20w2g6PHEukhuAsVnWg/obppd2E4Vx1t2FXojOKfgy3znsggNKH83E/9KRGjQ0l2F58V2crgkGaqwi5j351OvaTU4QSmz5UYOMwAkZyFeoYRkZqsKOSVxvRh+6E3wFUEDfEkZwkMIFcmAgf7L5WYoMsQ6gQgWByXN5Afk7GO472p35ZVF2weqcJMLwSho7Bv/TLMu3m++TuJcGIVaVvbmJekAPLAts1YUMlPCUN8NsvT/rk9BKLf8LAjkp/oY3NZ0OdRsIJq1nvgGucOrq+msWN0uuoNQlFuGs7eKtqk9p+Bbh8ULsuvOlUbcgtdeKx8/p7hGZOSUYKuG990wbNDmIAk2O+lffJhuhxEfDMIjn80q5JvBNMNAKDwMEPGZiCQDTvYmVUPyh5SKdLOMmgN3gEXeROymmMDLjVG9Pmmlc33kf5MUw+qZAEQ68xuj6gvO4wh1ZsDnQQfhQwBkQp1+cwUuQMpHqKYkN1rx8btyIM0FjF7Y3Q7TmkW6x/fOc7MZnC7K1Zq4JJudsmpsqoaX+g+LIWmRMa+p7jEhPsAp51CdzOQFLujcmOKHFHR7wmSLo2wpIrw9936l4wofI8o6Q/S2YTN8Gxpvg/e83sU415pJbeTAx1fdi8Yf05YOryaxZ1OUSFOG2Rctfe7Uz9+QcsjXJUY/NAbhLSzGYxudkRsNmVwTDUwIQeCIGij211/BdZOR3PNX86kdjukFtcQ7QlWmcn9NHr9Vl1OUAvl+zGaumIttryCgnwfj+EdduqFsknM3jP4Zf0t1ZuBkW5y6RV1ALgGdHbE4DWSvpOssT0+TlSfFRECL8HqbeTS5019OuBf2yRmk0XjGWLIWhyCX/c4KaVRf/Fs5L1EqtOKN0Ekk2+4ZXHavQQ+Z85Y85f3Jhlhl2P33Ttj+C+xr3VD37VXaL2CGfFn74Xznj7CDXnLw76SAQ7kAlV+tFWjctf7yWokf29Wze15cYOGFxuBEzwbCVwGZfuhFwnKN125X0TVu6m7XsA7mm7Hw4YRVOyx0zW4FoQYO2RfVx638/Yua6BXAwzIoI7I9tdEdTypLcZOvL43wS0KdGiI76MmH9wJHSP53OvxTtzzqQ14XhGISzo1MfycpxoK5gxdc63j7nlK5wPsElJzqQ/SEkBp/ceomOPENYRb0HwOhxxsCLd+H0iiGX5YUPVcXE2klumQHLLLGUNf4rIz+/r7IE067nYITGvRFURL2Y/GHmQBNb9g/pB+hVpQMwas5SW65vB0p/DpTKpuIanhIneHSqMiVizmCOvu2wcyZwiJSKbq1f1m89VaSCxAzh2OA0oKa1B2tCM8ZuG00Cg5H1dsKABz3qBObvaRvYbBBdvuwES2ozzz7qIz0NsFpn7BoiU1+GZv4V8yr/yUCjF1LYBSb4+Y38DRhZ+azSqglzrTv1TN83A+U9bcL2oHAriPxGRk3hCa8EXdtVxKHTxOgRD15ECjkc4H9dk5MADoV4WbqG3O24P3hAQdH/KBw1pf0XWaGb5xVdcybAQiwtzj8DVqlahQ+XPmRvpzuMlVYuWrwllUdmN7qbQ8cQqg7+cTNTrrBYlFUBZeeKQ72wTo0i7t8u1PsFEU4rv3YD3XEK+iK6wCk0OyndrMQiIa/4dv0N18n+7a98RhbKEQFBtBf3kyv++ITWt+M81hXBZsSInTqAs8KZk6JSIuv5H+vRXN04+dUrv/jRyHoOrrLqE45YD/bshkWit5UZAz5x8bT5ePEs03inRD6doNj14Dy3/lEIWHWyIBtDkpKLMmEgbHttue2FYKv+g7QHBgJaamgj0eTUdES675sPLn+nw5nbFiF5W5FHtCwbp2lA3FamfNRhIMhNdPNfp6EAfMGH8wvZ/0ylGXx412pOJwCeeszdPCppoXVn748pZoohvG7ewTxqbygAg6U9mVtmGr8xt7+2/FSO0eRG3uHUylNfyQdykk8P/UmFOKSsCLaIPFRYRNn8/xvJfKtyDRTfllys+XMG2SmgBgJw5BAphmO5Pvy4xW2h//zfThNRWGSrik9ZImC+qKJM7um4iX8o70LiUHETfGl5GTY7olP/qu/1R++Mx3VoAENb8BctR1yfcZ1MGXDh1Mzmct/rodczNEcov/6ke4molYZFtGhVtH5ZGVQKyeszud9iqGBWLOMcHinNIIhFJrHGNM6WZ74wAdt3V9SBV+GEJ/pAhEjslpmMIXI3LWhfm95UOMX/6HMcWSvKddvvcpX5icKSreysAvfM+8VYmfBA9SOXx3mNFj6EDkeG2uQZXdBs1NGUX19Bq+PDiIhqdQ7U/xg4chSceHH9ZWTHWwAZrY/tDgfEFUuLFQQCiB4f2TnrrcGa/trKj0EPARSHF52Qj2heti/ytuSdQu4se39aV0Zg8fsS+EQXCj2N0zGIV6NtjngGrEbnMG7CJxVRVH4wDoBl/k0MlUXzdAWwP6sWL16MoJlqyYr0LGFzaLhsIFIVlT9ftyjGrELHoLRHV5ERRvemJ0WVD8VTEPw5ENtKfic03D6ug4ubLENrF2dfw9DJtY4bOPIxSS4UWY8OhMlmwD0SPNwKV2QRzjTauZpUuzT7aNOE3eVmZ7+ZdU6BEyhrW+7DLwbMscsc9JuTOnmdNlG/5Ugny6elS8L09Z0c7jlg7znG0c8i8PlTQktbSaEVZ3KTNZFfw9h01faBLXe0jJJpV8w2zOxNVTumhGPZpSp2yfSzLoeigvt6HwJdq4OJHD2qg4ynfdhIMkw0hfxOSLRCdsgWiej/rDphd73pOo2sGHPxNsWPTYxzPv+SpozqU9V7gVS9OkovFXOMpg2YUoFbxunBwnDOMPDBW1+fpGvqwiM2aE2kw/h7/o3596UhawvgxjSMMaJvMp/v4+d2nC93Y9B3B/Wg9wGbt62UVjKkwQ8e0T01/cI/PfjZD52bi4Ef7UB9e+4BWKWqwdmEgvAOlLBvZ4mSbwfkuYBlbmIgDHrwhuEf1VfpXo/vM6wIXlrDyYjzVsZwdy9+XcBFXOHuRv42B/YiYGczJwUihHb+e9/oX5g4D9m3cVopeV8X22+/Fg7Ndg2L3RuGjUJ7CjNbYT6tDzsZ/Db4th3wRjAVyLRhYHhLe7JDrTKIMclJiW72j2tYa7qnYvtEHLZfnIuKvJXftK5wX+imjp1LBtloORZYCrjkbdkxI9qy/GLn58KVcz98YxHN+xuoD6uxAphOqIP2lUKfOYHH0QXtRGtRJL+mfkL3gxFnX2q7QWKR+u5kvGh712VB1E8NmQxBovUnjWJ5SqmarlsJwATg5+Guf7aPvHIMqlbNsDLVEFM5n0M92On/qVjjuZDch/XAy4zlbMGt9gM3dymDiFFLFpJh9ZAghWU5+hxRUNDyouTPcK+1luLw5pniActjRnbyBK1Mycjj+3CQa5AuzauBYlbRzz9r89wBObwvqaA7vfC81UKeaTU/JtkGNSEPOSr5P/vR8/PYS+lpCFZmb1g1ey1Fr+1y9pH/M4f9mik+dtVHTAR+CXvjstssdjck1VT/Fcoh2PgFT2qr/PrONa7GXMxakjA+NBe99+RcNI0PBGpXuQQVG2evN2UrZl7bOGVPOHgG8Ii0E68XOhLxs1RjjA3nEw375g/OXWngBjrl+ZAH+w0+RqwRAxSWYuEiQRz3BcSQ6BEE77vzKz9KTy9mkJ65XotW+KZuejOEH9PuKtTA/XmvhiAwhH0CQ4Z4FbrRRbKOCw5IzMx9QDLjay3F2e7wiq39jTT01eFALBxBKjb1FFNzcb6gKUtDc4FY4k4J+2KZeunYaNFuv/KJbt4ID0o+gyNAFWAF+EWAtsKvlgpD44gKWS3aCAWtoI7GfE1fuSG8CpuMX4bLRyNy8BSLVBJh3Iw6RvPmfIeRIUkM6VLJBqLIhiMOV4Gu99F4lXTvZyq+T2l4UmpEaA1rs3xQl4rdL+DtT0yyC4MXcQjD+srb199+18s9FLxlZGlKs2piZCurjfT8ROj0ogDzYxPuQmitvCpZHq6noaKMww5UmYdZ1Kf0vwwuNolVQur9BPVIaijw1raoZYKAQ89PUUHDSKJUq5FY19pbbfY0LPRtkdtyN9iDr2e32lNxVnOorTXWy++cOpD/Mb25jiMIUnAJmFu/uqj4gmiz14VVl/fTpWIlw1W+roEOR5gWlIc8wEZ/g2A6SVYFZpbfNzNwEOwyHZz1bVKJdWYbDddi9W3TSIgEcEUSPgoaglx0Yqexbs+whtMBgznMD8Fy9DS5bCLV1UTqknmE2h1uC4nTaK5UMrWUo8R5607bIABacIy80LFr0CCqt3jwQqftCa5w6nuDSCcpS9oLV3MzsvSh8e1McooX4qRFothLJD1Ceg+mr58URStPGLsknOH4IZFbI8Xe0TSzd88dfocc8Mr4opoImOjozuITLoMlKqKis/XuNHQAPusJ8zTHDkqka6oyW0PVYYt4QUCU/sVPtJO9Ca1IxsbQvB3jsUOKMAZ1SZ61AygoiEERL0ztG3lzTokC5hmWu1L737gaUQaiDEQmkB9Q4TM5kXvxqZHiNtITc50Xb0THAzyw/DM1B7s/LRzwIOEt3JBtIO3aQUNn6XrSI5fnXeIAmGZu8L4oMCN28uSsAM4PPBsIek2jfVwN6WeEcoIbLhAG3d39lGtFEf3gWytLPuSZtqhklN8vu/qelGy7KUr+m3kddo4CXx+XLT1jwU8WOf+S/YGYarrWW8FNbn1ppleqUgnnytgIqHTP0B3V6tcy5ZoIIsbiE3JlAHSYwjuNACzd3BzfLxLjHZRBa/t2J7da7o60LiAbhpz9QygVnVGLk7H2oSQtm3Cp2BifFvCsqAPKavBLnnfyleO94zfDCeU2fsgKFV2/b/eKEENXUH2fFs+s6k/RNZZxxvr1q5zTj5JI5JgDf/SaBNGUb86jfXT5J9ODVIeCXgAhe9vtwk/EOKMNPehaQm89MGGhvupj+1ID1bgKFjJEPAeF+A1wZ6O3RJtcoITi2dMYwxAyw4xvsn+nkDX5D1hSRT1yrhK4vK5eOktdrchKUqrmRJV/7lNAeZMvQw88CEyjK6jjTnmiq+qS0JBU18RsF6icYjv7xW5LJYnFSQCjirk8RqkhocNSjzaTo+CgaXh3KMxHC09qgWK7Rf1zAWresJrE0OhJHeuWNjcLZ7oNu7SI442Pk9usn9usP095ipHcW4l2iDmg/kinqhQ/d6fPaXGnDUke2EErj9u02ASIVChT7hiTytwWy/VQP/0VOShfhzARolTYEZUj6ShEZrD7XH8MXtwt5hnA9cnBdTDgO7XAsv8Ihbp6FqSjTHD18yZhwQtvs0SYKNp7ysFYPAZaH9lCz7mRO+F3xIohCh7fBDgLnG1FNJYl+LMMHkPoqeAxiXbPVCuyW2dupEyXKaOSVf+B8bRdDG8+dKWiITBlTJZGpt6KAOCAyQu850n2uyslPK4T7iSImt6h/evBBSPevRNekrAPpbIQESDLRFof1Rs/yZDXt+KsoCafi4eK/01umceZiCo8ytRMmVueT5Gso9AFf5B5HmqhTbDdlUYuN5hFQDke0DYrZVeid8ETYBYO2FZ9JoIZuG8m+Piy5fTOfCYfgp/RmOX7w6/VH6NuNiJDpyuZXeiHKXKaqM/S3SM3ZELQCnvNpXE03iAO9HAVMBIs+PEtDwnifSgjSEHRQlYG8uVf1lQ/mn6ahTrE2CNuhXaTrdCZkfiD1aUDHpsGX1HZHc+O/jJuLnw0AXoYxsja1jmEB36I8aKGsKBE/R9Rd0kNyJjpOdRQ0t63aCxzXY+7+HqA9X7712kt3rYc+Jssw5aw/kat7LLPIg8I7EWVUsboniI+28u8wRoCy8ZvuanWLujOqmldTm4qt6fMsndo='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19627, 'candidates_token_count': 230, 'total_token_count': 21081, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19627}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 230}], 'thoughts_token_count': 1224, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8871164736540421, 'model_name': 'gemini-2.5-pro'} id='run--48525054-1eed-4d8b-b9aa-b19f2e3ff574-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'import matplotlib.pyplot as plt\nfrom matplotlib.figure import Figure\n\n\ndef test_cla_unsets_artist_parents():\n    """\n    Check that clearing an axes unsets the .axes and .figure attributes on the\n    artists that are removed, matching the behavior of artist.remove().\n    """\n    fig, ax = plt.subplots()\n    line, = ax.plot([1, 2])\n    ax.cla()\n    assert line.axes is None\n    assert line.figure is None\n\n\ndef test_clf_unsets_artist_parents():\n    """\n    Check that clearing a figure unsets the .axes and .figure attributes on\n    the artists that are removed, matching the behavior of artist.remove().\n    """\n    fig, ax = plt.subplots()\n    line, = ax.plot([1, 2])\n    fig.clf()\n    assert line.axes is None\n    assert line.figure is None\n', 'relative_path': 'lib/matplotlib/tests/test_artist_lifecycle.py'}, 'id': 'f9e1b069-72bc-4918-88a6-59eca8dd451c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19627, 'output_tokens': 230, 'total_tokens': 21081, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1224}}
2025-10-06 08:48:59,831 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='lib/matplotlib/tests/test_artist_lifecycle.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19880, 'candidates_token_count': 13, 'total_token_count': 19893, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21102}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -2.444210650327687e-05, 'model_name': 'gemini-2.5-pro'} id='run--aa899b12-633b-40c6-b95c-83df5c53f422-0' usage_metadata={'input_tokens': 19880, 'output_tokens': 13, 'total_tokens': 19893, 'input_token_details': {'cache_read': 0}}
2025-10-06 08:49:00,215 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/lib/matplotlib/tests/test_artist_lifecycle.py b/lib/matplotlib/tests/test_artist_lifecycle.py
new file mode 100644
index 0000000000..82c641fcb8
--- /dev/null
+++ b/lib/matplotlib/tests/test_artist_lifecycle.py
@@ -0,0 +1,26 @@
+import matplotlib.pyplot as plt
+from matplotlib.figure import Figure
+
+
+def test_cla_unsets_artist_parents():
+    """
+    Check that clearing an axes unsets the .axes and .figure attributes on the
+    artists that are removed, matching the behavior of artist.remove().
+    """
+    fig, ax = plt.subplots()
+    line, = ax.plot([1, 2])
+    ax.cla()
+    assert line.axes is None
+    assert line.figure is None
+
+
+def test_clf_unsets_artist_parents():
+    """
+    Check that clearing a figure unsets the .axes and .figure attributes on
+    the artists that are removed, matching the behavior of artist.remove().
+    """
+    fig, ax = plt.subplots()
+    line, = ax.plot([1, 2])
+    fig.clf()
+    assert line.axes is None
+    assert line.figure is None

2025-10-06 08:49:00,216 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 08:49:00,236 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 08:49:00,236 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 08:49:00,336 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:49:00,336 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 9d22ab09d5 Merge pull request #24634 from anntzer/ac

2025-10-06 08:49:00,336 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 08:49:00,437 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:49:00,437 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 08:49:00,437 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 08:49:00,437 - thread-139660780025408.app.docker.base_container - INFO - Creating directory lib/matplotlib/tests in the container
2025-10-06 08:49:00,437 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p lib/matplotlib/tests
2025-10-06 08:49:00,538 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:49:00,538 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 08:49:00,538 - thread-139660780025408.app.docker.base_container - INFO - Updating lib/matplotlib/tests/test_artist_lifecycle.py in the container
2025-10-06 08:49:00,541 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 08:49:02,002 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F"}'}, '__gemini_function_call_thought_signatures__': {'36016eeb-bf22-4ce2-8a39-30aa4f161e25': 'CtwCAR/MhbYHrIOYKVRmd0AmMQUjU9da9twwezAMJ/V1P4LI0h8xf0TCZAeNeb987xLKLGhy7a/6Pq1d6PmFA2qJjVHClPeBPK8T0u3uowfDlKQsYP+OqHLr6fx2DZoTf0yu/U3EjEc9suopt8m30SGTGLDEwkNMi+/x1zPrLNyH6Wj43rGEjx4jNTxquoefjBEH6g/MEcKhuZOqY0tSo4p3kdz5B4JsfJ4LXHeRTTAb/Mc5E8KngZ1ldq5knRdx7kapQn7g8dpvwOfXesMvfy5WPOCBHtxslFJV0msJsZTfVwORRd3im486HPRDtwbqd395f7QjKCy2Z9jSoPab6srgwqU5AQT+PfXsh4FQ46rZDVo38gSO2mhaEH9ygNclaqcCcmMdjhUrg2tbUB4AR9pDX3SXfwKqFOTu3Fi0cn0ru3P2UjNaNoowZykSk4hbJzfcfeyAArXsVNFnVWNm'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 378, 'candidates_token_count': 7, 'total_token_count': 462, 'prompt_tokens_details': [{'modality': 1, 'token_count': 378}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7}], 'thoughts_token_count': 77, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6500159672328404, 'model_name': 'gemini-2.5-pro'} id='run--99fcc151-c231-4047-b4dd-8b934a8b8be2-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F'}, 'id': '36016eeb-bf22-4ce2-8a39-30aa4f161e25', 'type': 'tool_call'}] usage_metadata={'input_tokens': 378, 'output_tokens': 7, 'total_tokens': 462, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 77}}
2025-10-06 08:49:02,004 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F
2025-10-06 08:49:02,104 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 08:49:02,104 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

CITATION.bib	     build/		    plot_types/     tests.py*
CODE_OF_CONDUCT.md   ci/		    pyproject.toml  tmp/
INSTALL.rst	     doc/		    pytest.ini	    tools/
LICENSE/	     environment.yml	    requirements/   tox.ini
README.md	     examples/		    setup.cfg	    tutorials/
SECURITY.md	     extern/		    setup.py
__pycache__/	     lib/		    setupext.py
azure-pipelines.yml  mplsetup.cfg.template  src/

2025-10-06 08:49:04,013 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "pytest lib/matplotlib/tests/test_artist_lifecycle.py"}'}, '__gemini_function_call_thought_signatures__': {'4d6ec4c7-04ef-4c73-a9c1-2690dec79e50': 'Cu8DAR/MhbbdPNgHT/YGxpcU3CHOtOS0ZG9F6drevjqsRcXB4gr9Jox/cQ7koIop8MJEciT2d7G+7vZ9W+JNyfeuDur+GYlYfnn17qt8vYC516Em/DwVK4ZlUTXwPi52qSi/gYNG18mExHC3HJQB64hZlU8zcbrpP0yhRAhhhPm+zB5F4NxABghP36ShfZ2sV+2naw4CiASB4XRFlZorAdzFFKuH05mv/2pVkZZoRVlDCDHL04ZwLOU7pKQ6OHe3QfJie+D3SigL271nZ0M08EoOiJ1mcTpMvWuBssbtzaSNLjg48h3GHc4PbPzyMJZbnA/suHWk7jzzwP8epsjckETumxj6avV+ZQXqpw9Ei1bqxbhgo9DDNt7cI0Et5YAhdRIVHYiCyZZdqJDomqBJkoyg6VGqbH/+ZoTNgyDGGhadzi26tuWiRy/NjnOvmNCyMd+P2Ar4DtRsuobWE3Rxj/HdNpwALNVSnpFey6uiNI6sE6NQL66rbzqP1T6eeWaCflz6MJjFbUZ6UfPHgEfJboN4UC+C6q1EvJkMO/T16aPvEvYQIfLt3WfU/GtlA33mR0yas5QVQMTVAvUXYsIwtwri+DEU/n3AqxVKWz4Zns2F4VCOLzWkxJsk6RtA++CFQGBJDx7uGPfGn+rYGPyH73Hb'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 526, 'candidates_token_count': 18, 'total_token_count': 670, 'prompt_tokens_details': [{'modality': 1, 'token_count': 601}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 18}], 'thoughts_token_count': 126, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.46021827061971027, 'model_name': 'gemini-2.5-pro'} id='run--566910e1-c216-4072-91db-6cd854c48118-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'pytest lib/matplotlib/tests/test_artist_lifecycle.py'}, 'id': '4d6ec4c7-04ef-4c73-a9c1-2690dec79e50', 'type': 'tool_call'}] usage_metadata={'input_tokens': 526, 'output_tokens': 18, 'total_tokens': 670, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 126}}
2025-10-06 08:49:04,014 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: pytest lib/matplotlib/tests/test_artist_lifecycle.py
2025-10-06 08:49:06,201 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 08:49:06,201 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
pytest lib/matplotlib/tests/test
t_artist_lifecycle.py

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.11.11, pytest-8.3.4, pluggy-1.5.0
rootdir: /testbed
configfile: pytest.ini
plugins: cov-6.0.0, xdist-3.6.1, rerunfailures-15.0, timeout-2.3.1
[1mcollecting ... [0m[1m
collecting 2 items                                                             [0m[1m
collected 2 items                                                              [0m

lib/matplotlib/tests/test_artist_lifecycle.py [31mF[0m[31mF[0m[31m                         [100%][0m

=================================== FAILURES ===================================
[31m[1m________________________ test_cla_unsets_artist_parents ________________________[0m

    [0m[94mdef[39;49;00m[90m [39;49;00m[92mtest_cla_unsets_artist_parents[39;49;00m():[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    Check that clearing an axes unsets the .axes and .figure attributes on the[39;49;00m
    [33m    artists that are removed, matching the behavior of artist.remove().[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        fig, ax = plt.subplots()[90m[39;49;00m
        line, = ax.plot([[94m1[39;49;00m, [94m2[39;49;00m])[90m[39;49;00m
        ax.cla()[90m[39;49;00m
>       [94massert[39;49;00m line.axes [95mis[39;49;00m [94mNone[39;49;00m[90m[39;49;00m
[1m[31mE       assert <Axes: > is None[0m
[1m[31mE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b54d3d410>.axes[0m

[1m[31mlib/matplotlib/tests/test_artist_lifecycle.py[0m:13: AssertionError
[31m[1m________________________ test_clf_unsets_artist_parents ________________________[0m

    [0m[94mdef[39;49;00m[90m [39;49;00m[92mtest_clf_unsets_artist_parents[39;49;00m():[90m[39;49;00m
    [90m    [39;49;00m[33m"""[39;49;00m
    [33m    Check that clearing a figure unsets the .axes and .figure attributes on[39;49;00m
    [33m    the artists that are removed, matching the behavior of artist.remove().[39;49;00m
    [33m    """[39;49;00m[90m[39;49;00m
        fig, ax = plt.subplots()[90m[39;49;00m
        line, = ax.plot([[94m1[39;49;00m, [94m2[39;49;00m])[90m[39;49;00m
        fig.clf()[90m[39;49;00m
>       [94massert[39;49;00m line.axes [95mis[39;49;00m [94mNone[39;49;00m[90m[39;49;00m
[1m[31mE       assert <Axes: > is None[0m
[1m[31mE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b549063d0>.axes[0m

[1m[31mlib/matplotlib/tests/test_artist_lifecycle.py[0m:25: AssertionError
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m lib/matplotlib/tests/test_artist_lifecycle.py::[1mtest_cla_unsets_artist_parents[0m - assert <Axes: > is None
[31mFAILED[0m lib/matplotlib/tests/test_artist_lifecycle.py::[1mtest_clf_unsets_artist_parents[0m - assert <Axes: > is None
[31m============================== [31m[1m2 failed[0m[31m in 1.73s[0m[31m ===============================[0m

2025-10-06 08:49:12,548 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='pytest lib/matplotlib/tests/test_artist_lifecycle.py\n\n============================= test session starts ==============================\nplatform linux -- Python 3.11.11, pytest-8.3.4, pluggy-1.5.0\nrootdir: /testbed\nconfigfile: pytest.ini\nplugins: cov-6.0.0, xdist-3.6.1, rerunfailures-15.0, timeout-2.3.1\ncollecting ... \ncollecting 2 items                                                             \ncollected 2 items                                                              \n\nlib/matplotlib/tests/test_artist_lifecycle.py FF                         [100%]\n\n=================================== FAILURES ===================================\n________________________ test_cla_unsets_artist_parents ________________________\n\n    def test_cla_unsets_artist_parents():\n        """\n        Check that clearing an axes unsets the .axes and .figure attributes on the\n        artists that are removed, matching the behavior of artist.remove().\n        """\n        fig, ax = plt.subplots()\n        line, = ax.plot([1, 2])\n        ax.cla()\n>       assert line.axes is None\nE       assert <Axes: > is None\nE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b54d3d410>.axes\n\nlib/matplotlib/tests/test_artist_lifecycle.py:13: AssertionError\n________________________ test_clf_unsets_artist_parents ________________________\n\n    def test_clf_unsets_artist_parents():\n        """\n        Check that clearing a figure unsets the .axes and .figure attributes on\n        the artists that are removed, matching the behavior of artist.remove().\n        """\n        fig, ax = plt.subplots()\n        line, = ax.plot([1, 2])\n        fig.clf()\n>       assert line.axes is None\nE       assert <Axes: > is None\nE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b549063d0>.axes\n\nlib/matplotlib/tests/test_artist_lifecycle.py:25: AssertionError\n=========================== short test summary info ============================\nFAILED lib/matplotlib/tests/test_artist_lifecycle.py::test_cla_unsets_artist_parents - assert <Axes: > is None\nFAILED lib/matplotlib/tests/test_artist_lifecycle.py::test_clf_unsets_artist_parents - assert <Axes: > is None\n============================== 2 failed in 1.73s ===============================' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2022, 'candidates_token_count': 595, 'total_token_count': 2644, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2221}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 595}], 'thoughts_token_count': 27, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.006758058371664095, 'model_name': 'gemini-2.5-pro'} id='run--750a5bc7-4984-4064-b22c-bfaf026851ed-0' usage_metadata={'input_tokens': 2022, 'output_tokens': 595, 'total_tokens': 2644, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 27}}
2025-10-06 08:49:27,330 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='pytest lib/matplotlib/tests/test\nt_artist_lifecycle.py\n\n============================= test session starts ==============================\nplatform linux -- Python 3.11.11, pytest-8.3.4, pluggy-1.5.0\nrootdir: /testbed\nconfigfile: pytest.ini\nplugins: cov-6.0.0, xdist-3.6.1, rerunfailures-15.0, timeout-2.3.1\n\ncollecting ... \n\ncollecting 2 items                                                             \n\ncollected 2 items                                                              \n\nlib/matplotlib/tests/test_artist_lifecycle.py FF                         [100%]\n\n=================================== FAILURES ===================================\n________________________ test_cla_unsets_artist_parents ________________________\n\n    def test_cla_unsets_artist_parents():\n        """\n        Check that clearing an axes unsets the .axes and .figure attributes on the\n        artists that are removed, matching the behavior of artist.remove().\n        """\n        fig, ax = plt.subplots()\n        line, = ax.plot([1, 2])\n        ax.cla()\n>       assert line.axes is None\nE       assert <Axes: > is None\nE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b54d3d410>.axes\n\nlib/matplotlib/tests/test_artist_lifecycle.py:13: AssertionError\n________________________ test_clf_unsets_artist_parents ________________________\n\n    def test_clf_unsets_artist_parents():\n        """\n        Check that clearing a figure unsets the .axes and .figure attributes on\n        the artists that are removed, matching the behavior of artist.remove().\n        """\n        fig, ax = plt.subplots()\n        line, = ax.plot([1, 2])\n        fig.clf()\n>       assert line.axes is None\nE       assert <Axes: > is None\nE        +  where <Axes: > = <matplotlib.lines.Line2D object at 0x7f7b549063d0>.axes\n\nlib/matplotlib/tests/test_artist_lifecycle.py:25: AssertionError\n=========================== short test summary info ============================\nFAILED lib/matplotlib/tests/test_artist_lifecycle.py::test_cla_unsets_artist_parents - assert <Axes: > is None\nFAILED lib/matplotlib/tests/test_artist_lifecycle.py::test_clf_unsets_artist_parents - assert <Axes: > is None\n============================== 2 failed in 1.73s ===============================' reproduced_bug_commands=['pytest lib/matplotlib/tests/test_artist_lifecycle.py']
2025-10-06 08:49:27,331 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 08:49:27,331 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 08:49:27,431 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
