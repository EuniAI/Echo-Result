2025-10-06 07:26:13,136 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmpm8j6lewe/django
2025-10-06 07:26:13,136 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 07:26:13,137 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.django_1776_django-12774:v1
2025-10-06 07:26:38,530 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_afc30fe4e8
2025-10-06 07:26:38,535 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_afc30fe4e8
2025-10-06 07:26:39,553 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 07:26:39,744 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 07:26:39,745 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 07:26:39,869 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:39,869 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:26:39,869 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 07:26:39,993 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:39,993 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:26:39,993 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen && locale-gen
2025-10-06 07:26:41,323 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:41,323 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
sed -i '/en_US.UTF-8/s/^# //g' /
/etc/locale.gen && locale-gen

Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.

2025-10-06 07:26:41,323 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANG=en_US.UTF-8
2025-10-06 07:26:41,424 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:41,424 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:26:41,424 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LANGUAGE=en_US:en
2025-10-06 07:26:41,525 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:41,525 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:26:41,525 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: export LC_ALL=en_US.UTF-8
2025-10-06 07:26:41,626 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:41,626 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:26:41,626 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 07:26:42,808 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:26:42,808 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
Requirement already satisfied: asgiref>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (3.4.1)
Requirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (2024.2)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (0.4.4)
Requirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2->Django==3.1) (4.1.1)
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 3.1
    Uninstalling Django-3.1:
      Successfully uninstalled Django-3.1
  Running setup.py develop for Django
Successfully installed Django-3.1
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv[0m

2025-10-06 07:26:42,866 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 07:26:42,867 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 07:26:42,867 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\nAllow QuerySet.in_bulk() for fields with total UniqueConstraints.\n\nIssue description: \nDescription\n\t\nIf a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.\nConsider:\nclass Article(models.Model):\n\tslug = models.CharField(max_length=255)\n\t\n\tclass Meta:\n\t\tconstraints = [\n\t\t\tmodels.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")\n\t\t]\n>>> Article.objects.in_bulk(field_name="slug")\nTraceback (most recent call last):\n File "/usr/local/lib/python3.8/code.py", line 90, in runcode\n\texec(code, self.locals)\n File "<console>", line 1, in <module>\n File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method\n\treturn getattr(self.get_queryset(), name)(*args, **kwargs)\n File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk\n\traise ValueError("in_bulk()\'s field_name must be a unique field but %r isn\'t." % field_name)\nValueError: in_bulk()\'s field_name must be a unique field but \'slug\' isn\'t.\nIt should be pretty simple to fix this and I have a patch if accepted.\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:26:57,948 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "in_bulk", "relative_path": "tests/queries/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'b2dc3c90-0454-4d96-b976-39158577a68a': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56116, 'candidates_token_count': 33, 'total_token_count': 57724, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56116}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 1575, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -7.558963660037879, 'model_name': 'gemini-2.5-pro'} id='run--b6a2225b-bb7b-464d-8a9f-a33ab3194e4a-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'in_bulk', 'relative_path': 'tests/queries/tests.py'}, 'id': 'b2dc3c90-0454-4d96-b976-39158577a68a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 56116, 'output_tokens': 33, 'total_tokens': 57724, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1575}}
2025-10-06 07:27:02,835 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "in_bulk", "basename": "tests.py"}'}, '__gemini_function_call_thought_signatures__': {'7fba41b5-638a-4452-ab4e-0fb7dbc5abfc': 'Cq4KAR/MhbYYp1U0MAoHl6VfcNTKThX0bQHU5xRHSu1HeIp53cwuey2Qh9XNqtDaFBOTPlt2qDJ8Gj1ha5gMN3onue1V349EDqugPpRNM4pN0HnFfa1USyIlc+/UXqZbKwilSxnTruI/EEESH7Q47hZkcbMSrGecYIymsUuA6ccuYkv1416fXbjK5+eG8woBhTuKlHV2yCaYRJhxkCvlJnAixkIzwzLpt+yTxHqKuGjVrp1cJb6HRjuupygcSTJFOyLgRoiyvR1KosD10LDaH7QeGp0GB7iA2FvJZM/7SLIAtRapOICgh4Wcc6YkIga+o9jPew6Xz48SMVsbbMwaIaXcVPaNKkowGjpZk8nXPzz97Kq9hTjkZ5uDvg1OOllXkGit1PENAV88uSXQs1/2QDDJxvAoA2JQi2L/s+m4XxZOuEh00K6di43dGs4O1MiTy+0cjz/v1CpkDkj4TgOkuzeqKXyVMCtxtxz4oeaUH1NavOwntPLedU4gnl0BeJCpadHjVThhRvAg03Kj425I3KDLtq3rw0H2OYlcmBP1OSVWG6xvnyQRW6OePYIZ7P+z87dZApu9E4yI5IT6BeWg33JaADi8NHWGtDE4xKyUFyD/7A7VpzP0ctInBPhJb2vh43d7mMZo7Y5B9ceAQm3HDgcELJp9FB1hukUdwHDZ47rUZu9mPKBu5EY/B7u8OS5TCwpWqsAw61gUbN7IVNO4B8nf2NSlbjJkHHYl1tO0mhDipVvwHqLhXfwc+vpzbXjSezuX9qpuQv7Kf/jMD9HMfCDXL59dJZ8byBLv8pZUwUgVM8+tzSsRIq8w/602fCwVn9NTfQbMdOU/8djiadwMoCsn9zl9fGvArnVkWAKAaBAXCbO3xiKyrMYsFv6irhi8YbNlj39HThlwDG6MTI4OAhCb7fOzK5BREHDpPeXRz8m8h9jKcUwVpeRJE5TmDAs9Vr+cP2yfKydAA6Wv0Wol8SFiko5nvXM+VaKlBMNcNuttimnM47ip2VxgNzkJIcKcWuRHVb+eSiFxVBvYPWnkQj24xceZu9ZukG+ZVpNJQ2KEG19HzbqRVp89ecJl8U54gBdvGuYhk6f/QgaEwJEdXUhzQCOCHVWgbYZBvtlxJ1Qmv/YP05sKieeemYpRVy3M7ncwON9dGC0KN2ZQkjv/Rtfh0L+O1gMxdhaN1gr8kA3LY9JXzhGgikTzwZLpgZV9/ELji/Iqy/6EYOXbalX9wUuL8+KHCFK/+NrS9KeEOGUcDjEfF2zTyp+1DvvooJezcK+FHJYLV8MR4xTrPtT31e3qm7UIzBEyYR6yBOGF7EVSuV/DMeFaWM2wT3lp6ojzi1O1yrAfKFK5h9RtILbyaaNFjBTg7mL/5P8J7yToeRxN1Z+6gWo7zyQKfOzyewYMXXYyA8ulHBaKp1gMS7v893mKVtY1b1sYNxwTA7fJ8yr87pNirJ3CY2szNo2dN7bdnufzpRGedLabHS9r0kfsfHJi1Iuax9B3IOD5Uv6RjG6ShDFADMkAIke9s5s05+SisbmNZQhQKqTppo+x36mKhznZkaXDxKEX800h5owlVIidEN6x3mOizoc7ir1ikxqOB9TR4cBWd2LZBsMRE5h8P1LmM2sUrbi2pMmw648Srk/4gALdsM+S/YuYAAiPdV4c+TB5cv6s91fyN9p5GsRTBmn9uG8dx2uOgpLsn/P6HuicR7ZxJRfauXrErk/IoPZPGxcs4x4OVAZRpCIxj7lXzkgiBC8xa87yoa8XN607Pngw'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56181, 'candidates_token_count': 25, 'total_token_count': 56578, 'cached_content_token_count': 54244, 'prompt_tokens_details': [{'modality': 1, 'token_count': 57753}], 'cache_tokens_details': [{'modality': 1, 'token_count': 54244}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 372}, 'finish_reason': 'STOP', 'avg_logprobs': -1.3262873840332032, 'model_name': 'gemini-2.5-pro'} id='run--b043c020-acf5-48ed-ae48-6bec22879d02-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'in_bulk', 'basename': 'tests.py'}, 'id': '7fba41b5-638a-4452-ab4e-0fb7dbc5abfc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 56181, 'output_tokens': 25, 'total_tokens': 56578, 'input_token_details': {'cache_read': 54244}, 'output_token_details': {'reasoning': 372}}
2025-10-06 07:27:11,743 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/lookup/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'d436fb02-c81d-4130-8a01-f451499eae40': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 75569, 'candidates_token_count': 21, 'total_token_count': 76336, 'prompt_tokens_details': [{'modality': 1, 'token_count': 77511}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 746, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -3.1937081473214284, 'model_name': 'gemini-2.5-pro'} id='run--a886732d-f38a-4c3b-ae0c-f08c10448638-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/lookup/tests.py'}, 'id': 'd436fb02-c81d-4130-8a01-f451499eae40', 'type': 'tool_call'}] usage_metadata={'input_tokens': 75569, 'output_tokens': 21, 'total_tokens': 76336, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 746}}
2025-10-06 07:27:14,955 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/lookup/tests.py", "end_line": 1000.0}'}, '__gemini_function_call_thought_signatures__': {'d198850d-b119-4fc0-ac90-97198746f9ec': 'CowCAR/Mhbb0WKVNlc6Yzzm7H3hHChqMopse4P4sqQguMSdLkd0I6ucTH1RaR2v/2kmlKKtr29TKyC5MhQEdgPG8jTAM1jiyzSPhqhoZjfk26nScqF6Tvjve1c0VKS7DP6X0HB5uG7G0ZgMEeHs3vQ9rJX2oy1fzKUt1yqknnMbmrn3aZwOSSKthp3P/WMQnSUkwE5m/Mgizy5wOm8Ow6JjTvckC8+UFG8X8AojMTa69V74kPYLnPRhYqJfV2nmOrcyEZJoyDqqfsrchEyNmViDFkxbqje2wZkzk8OK/elJHueaT9N4CySJKfeJY4Y8kbCK6Q91Lpu0/LCJwJCsFbYlyJcebERNcfJrbImjXUw=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 85190, 'candidates_token_count': 27, 'total_token_count': 85298, 'cached_content_token_count': 75378, 'prompt_tokens_details': [{'modality': 1, 'token_count': 87876}], 'cache_tokens_details': [{'modality': 1, 'token_count': 75378}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 81}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3307152854071723, 'model_name': 'gemini-2.5-pro'} id='run--ac217609-ddfd-4a86-b980-0f5bbc5a7f33-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/lookup/tests.py', 'end_line': 1000.0}, 'id': 'd198850d-b119-4fc0-ac90-97198746f9ec', 'type': 'tool_call'}] usage_metadata={'input_tokens': 85190, 'output_tokens': 27, 'total_tokens': 85298, 'input_token_details': {'cache_read': 75378}, 'output_token_details': {'reasoning': 81}}
2025-10-06 07:27:17,437 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/custom_pk/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'1a79bb64-ff6a-4c02-8875-83a3141a6cf5': 'Cs0BAR/MhbaYpe7SGMBMmUi6iD4fEKYh3tlq/h582eVcKEGUj8/qz56sN5bFpllC881UVB9BZhBygv9JWQzwfeirs99JdJ37gsVgMAwG3uOosjdPGZQ5Li1gBLTulQo2glfnyMtaMsc7Gfk498MvyWNOlez4Qhc970C1lNfny18kpi76zj+K4v+TB0VaS78pK/gcY49lk286HHwo3+31TR1AKkby5smzmKk+U/WzvKM9c9s8IAeLx5mMTnNEg42pSukE2DDsmN2xvZxoaV4G2w=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 93945, 'candidates_token_count': 23, 'total_token_count': 94026, 'cached_content_token_count': 87084, 'prompt_tokens_details': [{'modality': 1, 'token_count': 96710}], 'cache_tokens_details': [{'modality': 1, 'token_count': 87084}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 58}, 'finish_reason': 'STOP', 'avg_logprobs': -0.236465018728505, 'model_name': 'gemini-2.5-pro'} id='run--b09e3531-6138-43fd-8d33-c09c8bf53d95-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/custom_pk/tests.py'}, 'id': '1a79bb64-ff6a-4c02-8875-83a3141a6cf5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 93945, 'output_tokens': 23, 'total_tokens': 94026, 'input_token_details': {'cache_read': 87084}, 'output_token_details': {'reasoning': 58}}
2025-10-06 07:27:19,626 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/prefetch_related/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'fdaf3f21-961a-49b7-ab77-1ada6b75160c': 'CooBAR/MhbY5wOGV10I1K5gZ0qJhmAjVWGjmfCfBKri7tTeaOFabbeLi7rkC1YzaYqSITm8Sm3FRiLdrsSGwkPg2WJRgPlIheOG9Bv7PQzo18s47pOYAh7jYey7yzEa6kih9NNCKTEK9XhYLVlNHSgz4lP7RrF6Ka3s1S0BnyiUInRNVC8LHIQT2AZGS'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 97013, 'candidates_token_count': 23, 'total_token_count': 97071, 'cached_content_token_count': 94978, 'prompt_tokens_details': [{'modality': 1, 'token_count': 99834}], 'cache_tokens_details': [{'modality': 1, 'token_count': 94978}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 35}, 'finish_reason': 'STOP', 'avg_logprobs': -0.05703412968179454, 'model_name': 'gemini-2.5-pro'} id='run--8db67ea5-bebc-4026-9d10-37b7276774ea-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/prefetch_related/tests.py'}, 'id': 'fdaf3f21-961a-49b7-ab77-1ada6b75160c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 97013, 'output_tokens': 23, 'total_tokens': 97071, 'input_token_details': {'cache_read': 94978}, 'output_token_details': {'reasoning': 35}}
2025-10-06 07:27:22,762 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/prefetch_related/tests.py", "end_line": 1300.0}'}, '__gemini_function_call_thought_signatures__': {'10281b51-5a6f-4de0-8ba6-8b464e26f9b1': 'CoECAR/Mhba5uzOe8dhjDYQBtFpzJtvK+OovRWGROassCJLlvoO13GGVlqOEo6jsTkrsdfSuguEM1N/Knf6UrPHhci4g5FVMVdTFArj/7OelOE20E5XwWQrQAt6kRIVuH9YE6imA5YgZg/b6vI9dKrt9zSgT8uGgEx+7lB6NgwFiZf8YjdFKJTv0w6shZqS9TrrcvkiyDXhZvoBaisJCJptjnrN3iUMA7i437UWDnk//AIjOdGCeIYySxOvvye4YP0C9ZH9wuXPcVP4YUc1UcFrEZp90lV09Kem2A6mPexa85Aj3A96lX2OFrHU6EK/vAQfXSmhMhAz/88d+Q5teR1pobmA='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 105333, 'candidates_token_count': 29, 'total_token_count': 105440, 'cached_content_token_count': 99028, 'prompt_tokens_details': [{'modality': 1, 'token_count': 108187}], 'cache_tokens_details': [{'modality': 1, 'token_count': 99028}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 78}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07930676690463362, 'model_name': 'gemini-2.5-pro'} id='run--b88e3f31-25c7-40cf-baac-8df346876263-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/prefetch_related/tests.py', 'end_line': 1300.0}, 'id': '10281b51-5a6f-4de0-8ba6-8b464e26f9b1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 105333, 'output_tokens': 29, 'total_tokens': 105440, 'input_token_details': {'cache_read': 99028}, 'output_token_details': {'reasoning': 78}}
2025-10-06 07:27:55,037 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have gathered five existing test cases that are relevant to the reported bug. I started by searching for `in_bulk` in the test files and found several interesting cases. I prioritized tests that deal with unique fields and the `field_name` argument of `in_bulk`, as these are most relevant to the issue. I have included the full test methods, along with all necessary imports and setup methods, to ensure they are complete and self-contained.\n\n# Test Case 1\nThis test case is the most relevant to the bug report. It checks that a `ValueError` is raised when `in_bulk` is called on a field that is not unique. This is the same error that the user is reporting, and this test can be adapted to check for `UniqueConstraint` as well.\n\n```python\n# File: tests/lookup/tests.py\nimport collections.abc\nfrom datetime import datetime\nfrom math import ceil\nfrom operator import attrgetter\n\nfrom django.core.exceptions import FieldError\nfrom django.db import connection\nfrom django.db.models import Exists, Max, OuterRef\nfrom django.db.models.functions import Substr\nfrom django.test import TestCase, skipUnlessDBFeature\nfrom django.utils.deprecation import RemovedInDjango40Warning\n\nfrom .models import (\n    Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n)\n\n\nclass LookupTests(TestCase):\n\n    @classmethod\n    def setUpTestData(cls):\n        # Create a few Authors.\n        cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n        cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n        # Create a few Articles.\n        cls.a1 = Article.objects.create(\n            headline=\'Article 1\',\n            pub_date=datetime(2005, 7, 26),\n            author=cls.au1,\n            slug=\'a1\',\n        )\n        cls.a2 = Article.objects.create(\n            headline=\'Article 2\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a2\',\n        )\n        cls.a3 = Article.objects.create(\n            headline=\'Article 3\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a3\',\n        )\n        cls.a4 = Article.objects.create(\n            headline=\'Article 4\',\n            pub_date=datetime(2005, 7, 28),\n            author=cls.au1,\n            slug=\'a4\',\n        )\n        cls.a5 = Article.objects.create(\n            headline=\'Article 5\',\n            pub_date=datetime(2005, 8, 1, 9, 0),\n            author=cls.au2,\n            slug=\'a5\',\n        )\n        cls.a6 = Article.objects.create(\n            headline=\'Article 6\',\n            pub_date=datetime(2005, 8, 1, 8, 0),\n            author=cls.au2,\n            slug=\'a6\',\n        )\n        cls.a7 = Article.objects.create(\n            headline=\'Article 7\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au2,\n            slug=\'a7\',\n        )\n        # Create a few Tags.\n        cls.t1 = Tag.objects.create(name=\'Tag 1\')\n        cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n        cls.t2 = Tag.objects.create(name=\'Tag 2\')\n        cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n        cls.t3 = Tag.objects.create(name=\'Tag 3\')\n        cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n\n    def test_in_bulk_non_unique_field(self):\n        msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n        with self.assertRaisesMessage(ValueError, msg):\n            Article.objects.in_bulk([self.au1], field_name=\'author\')\n\n```\n\n# Test Case 2\nThis test case demonstrates the correct usage of `in_bulk` with the `field_name` parameter on a field that has `unique=True`. This is a good example of the expected behavior.\n\n```python\n# File: tests/lookup/tests.py\nimport collections.abc\nfrom datetime import datetime\nfrom math import ceil\nfrom operator import attrgetter\n\nfrom django.core.exceptions import FieldError\nfrom django.db import connection\nfrom django.db.models import Exists, Max, OuterRef\nfrom django.db.models.functions import Substr\nfrom django.test import TestCase, skipUnlessDBFeature\nfrom django.utils.deprecation import RemovedInDjango40Warning\n\nfrom .models import (\n    Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n)\n\n\nclass LookupTests(TestCase):\n\n    @classmethod\n    def setUpTestData(cls):\n        # Create a few Authors.\n        cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n        cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n        # Create a few Articles.\n        cls.a1 = Article.objects.create(\n            headline=\'Article 1\',\n            pub_date=datetime(2005, 7, 26),\n            author=cls.au1,\n            slug=\'a1\',\n        )\n        cls.a2 = Article.objects.create(\n            headline=\'Article 2\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a2\',\n        )\n        cls.a3 = Article.objects.create(\n            headline=\'Article 3\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a3\',\n        )\n        cls.a4 = Article.objects.create(\n            headline=\'Article 4\',\n            pub_date=datetime(2005, 7, 28),\n            author=cls.au1,\n            slug=\'a4\',\n        )\n        cls.a5 = Article.objects.create(\n            headline=\'Article 5\',\n            pub_date=datetime(2005, 8, 1, 9, 0),\n            author=cls.au2,\n            slug=\'a5\',\n        )\n        cls.a6 = Article.objects.create(\n            headline=\'Article 6\',\n            pub_date=datetime(2005, 8, 1, 8, 0),\n            author=cls.au2,\n            slug=\'a6\',\n        )\n        cls.a7 = Article.objects.create(\n            headline=\'Article 7\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au2,\n            slug=\'a7\',\n        )\n        # Create a few Tags.\n        cls.t1 = Tag.objects.create(name=\'Tag 1\')\n        cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n        cls.t2 = Tag.objects.create(name=\'Tag 2\')\n        cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n        cls.t3 = Tag.objects.create(name=\'Tag 3\')\n        cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n\n    def test_in_bulk_with_field(self):\n        self.assertEqual(\n            Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name=\'slug\'),\n            {\n                self.a1.slug: self.a1,\n                self.a2.slug: self.a2,\n                self.a3.slug: self.a3,\n            }\n        )\n```\n\n# Test Case 3\nThis is a basic test case for `in_bulk` that uses the primary key. It\'s a good starting point to understand the basic functionality of `in_bulk`.\n\n```python\n# File: tests/lookup/tests.py\nimport collections.abc\nfrom datetime import datetime\nfrom math import ceil\nfrom operator import attrgetter\n\nfrom django.core.exceptions import FieldError\nfrom django.db import connection\nfrom django.db.models import Exists, Max, OuterRef\nfrom django.db.models.functions import Substr\nfrom django.test import TestCase, skipUnlessDBFeature\nfrom django.utils.deprecation import RemovedInDjango40Warning\n\nfrom .models import (\n    Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n)\n\n\nclass LookupTests(TestCase):\n\n    @classmethod\n    def setUpTestData(cls):\n        # Create a few Authors.\n        cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n        cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n        # Create a few Articles.\n        cls.a1 = Article.objects.create(\n            headline=\'Article 1\',\n            pub_date=datetime(2005, 7, 26),\n            author=cls.au1,\n            slug=\'a1\',\n        )\n        cls.a2 = Article.objects.create(\n            headline=\'Article 2\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a2\',\n        )\n        cls.a3 = Article.objects.create(\n            headline=\'Article 3\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au1,\n            slug=\'a3\',\n        )\n        cls.a4 = Article.objects.create(\n            headline=\'Article 4\',\n            pub_date=datetime(2005, 7, 28),\n            author=cls.au1,\n            slug=\'a4\',\n        )\n        cls.a5 = Article.objects.create(\n            headline=\'Article 5\',\n            pub_date=datetime(2005, 8, 1, 9, 0),\n            author=cls.au2,\n            slug=\'a5\',\n        )\n        cls.a6 = Article.objects.create(\n            headline=\'Article 6\',\n            pub_date=datetime(2005, 8, 1, 8, 0),\n            author=cls.au2,\n            slug=\'a6\',\n        )\n        cls.a7 = Article.objects.create(\n            headline=\'Article 7\',\n            pub_date=datetime(2005, 7, 27),\n            author=cls.au2,\n            slug=\'a7\',\n        )\n        # Create a few Tags.\n        cls.t1 = Tag.objects.create(name=\'Tag 1\')\n        cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n        cls.t2 = Tag.objects.create(name=\'Tag 2\')\n        cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n        cls.t3 = Tag.objects.create(name=\'Tag 3\')\n        cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n\n    def test_in_bulk(self):\n        # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n        arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n        self.assertEqual(arts[self.a1.id], self.a1)\n        self.assertEqual(arts[self.a2.id], self.a2)\n        self.assertEqual(\n            Article.objects.in_bulk(),\n            {\n                self.a1.id: self.a1,\n                self.a2.id: self.a2,\n                self.a3.id: self.a3,\n                self.a4.id: self.a4,\n                self.a5.id: self.a5,\n                self.a6.id: self.a6,\n                self.a7.id: self.a7,\n            }\n        )\n        self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n        self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n        self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n        self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n        self.assertEqual(Article.objects.in_bulk([1000]), {})\n        self.assertEqual(Article.objects.in_bulk([]), {})\n        self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n        self.assertEqual(Article.objects.in_bulk(iter([])), {})\n        with self.assertRaises(TypeError):\n            Article.objects.in_bulk(headline__startswith=\'Blah\')\n```\n\n# Test Case 4\nThis test case shows that `in_bulk` works correctly with custom primary keys. This is relevant as it demonstrates that `in_bulk` is not hardcoded to only work with the default `id` field and can handle other unique fields.\n\n```python\n# File: tests/custom_pk/tests.py\nfrom django.db import IntegrityError, transaction\nfrom django.test import TestCase, skipIfDBFeature\n\nfrom .models import Bar, Business, Employee, Foo\n\n\nclass BasicCustomPKTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        cls.dan = Employee.objects.create(\n            employee_code=123, first_name="Dan", last_name="Jones",\n        )\n        cls.fran = Employee.objects.create(\n            employee_code=456, first_name="Fran", last_name="Bones",\n        )\n        cls.business = Business.objects.create(name="Sears")\n        cls.business.employees.add(cls.dan, cls.fran)\n\n    def test_in_bulk(self):\n        """\n        Custom pks work with in_bulk, both for integer and non-integer types\n        """\n        emps = Employee.objects.in_bulk([123, 456])\n        self.assertEqual(emps[123], self.dan)\n\n        self.assertEqual(Business.objects.in_bulk(["Sears"]), {\n            "Sears": self.business,\n        })\n```\n\n# Test Case 5\nThis test case shows `in_bulk` used in conjunction with `prefetch_related`. While not directly related to the `UniqueConstraint` issue, it demonstrates a more complex usage of `in_bulk` and is useful for understanding its behavior in different scenarios.\n\n```python\n# File: tests/prefetch_related/tests.py\nfrom unittest import mock\n\nfrom django.contrib.contenttypes.models import ContentType\nfrom django.core.exceptions import ObjectDoesNotExist\nfrom django.db import connection\nfrom django.db.models import Prefetch, QuerySet, prefetch_related_objects\nfrom django.db.models.query import get_prefetcher\nfrom django.db.models.sql import Query\nfrom django.test import TestCase, override_settings\nfrom django.test.utils import CaptureQueriesContext\n\nfrom .models import (\n    Article, Author, Author2, AuthorAddress, AuthorWithAge, Bio, Book,\n    Bookmark, BookReview, BookWithYear, Comment, Department, Employee,\n    FavoriteAuthors, House, LessonEntry, ModelIterableSubclass, Person,\n    Qualification, Reader, Room, TaggedItem, Teacher, WordEntry,\n)\n\n\nclass NullableTest(TestCase):\n\n    @classmethod\n    def setUpTestData(cls):\n        boss = Employee.objects.create(name="Peter")\n        Employee.objects.create(name="Joe", boss=boss)\n        Employee.objects.create(name="Angela", boss=boss)\n\n    def test_in_bulk(self):\n        """\n        In-bulk does correctly prefetch objects by not using .iterator()\n        directly.\n        """\n        boss1 = Employee.objects.create(name="Peter")\n        boss2 = Employee.objects.create(name="Jack")\n        with self.assertNumQueries(2):\n            # Prefetch is done and it does not cause any errors.\n            bulk = Employee.objects.prefetch_related(\'serfs\').in_bulk([boss1.pk, boss2.pk])\n            for b in bulk.values():\n                list(b.serfs.all())\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 2992, 'end_index': 5055, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 5869, 'end_index': 7932, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 8784, 'end_index': 10847, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 10839, 'end_index': 11218, 'uri': 'https://gitlab.tubit.tu-berlin.de/dlevin/django/blob/343162410f9270012e4fdd8396d542b39cc63269/tests/lookup/tests.py', 'title': '', 'license_': ''}, {'start_index': 11042, 'end_index': 11625, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 11491, 'end_index': 12108, 'uri': 'https://gitlab.tubit.tu-berlin.de/dlevin/django/blob/343162410f9270012e4fdd8396d542b39cc63269/tests/lookup/tests.py', 'title': '', 'license_': ''}, {'start_index': 12514, 'end_index': 13118, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 13111, 'end_index': 13427, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 14068, 'end_index': 14329, 'uri': 'https://github.com/zc-andy/DbMgrSystem', 'title': '', 'license_': ''}, {'start_index': 14279, 'end_index': 14519, 'uri': 'https://github.com/django/django', 'title': '', 'license_': ''}, {'start_index': 14881, 'end_index': 15201, 'uri': 'https://github.com/django/django', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 120051, 'candidates_token_count': 4109, 'total_token_count': 124694, 'cached_content_token_count': 107180, 'prompt_tokens_details': [{'modality': 1, 'token_count': 122981}], 'cache_tokens_details': [{'modality': 1, 'token_count': 107180}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 4109}], 'thoughts_token_count': 534}, 'finish_reason': 'STOP', 'avg_logprobs': -0.021570262783604778, 'model_name': 'gemini-2.5-pro'} id='run--95e841b5-b4ff-473a-85e3-307be7d4fef4-0' usage_metadata={'input_tokens': 120051, 'output_tokens': 4109, 'total_tokens': 124694, 'input_token_details': {'cache_read': 107180}, 'output_token_details': {'reasoning': 534}}
2025-10-06 07:27:55,038 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 07:27:55,039 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/basic/tests.py
Line number range: 560 - 618
Content:
class ManagerTest(SimpleTestCase):
    QUERYSET_PROXY_METHODS = [
        'none',
        'count',
        'dates',
        'datetimes',
        'distinct',
        'extra',
        'get',
        'get_or_create',
        'update_or_create',
        'create',
        'bulk_create',
        'bulk_update',
        'filter',
        'aggregate',
        'annotate',
        'complex_filter',
        'exclude',
        'in_bulk',
        'iterator',
        'earliest',
        'latest',
        'first',
        'last',
        'order_by',
        'select_for_update',
        'select_related',
        'prefetch_related',
        'values',
        'values_list',
        'update',
        'reverse',
        'defer',
        'only',
        'using',
        'exists',
        'explain',
        '_insert',
        '_update',
        'raw',
        'union',
        'intersection',
        'difference',
    ]

    def test_manager_methods(self):
        """
        This test ensures that the correct set of methods from `QuerySet`
        are copied onto `Manager`.

        It's particularly useful to prevent accidentally leaking new methods
        into `Manager`. New `QuerySet` methods that should also be copied onto
        `Manager` will need to be added to `ManagerTest.QUERYSET_PROXY_METHODS`.
        """
        self.assertEqual(
            sorted(BaseManager._get_queryset_methods(models.QuerySet)),
            sorted(self.QUERYSET_PROXY_METHODS),
        )

File: tests/or_lookups/tests.py
Line number range: 10 - 240
Content:
class OrLookupsTests(TestCase):

    @classmethod
    def setUpTestData(cls):
        cls.a1 = Article.objects.create(
            headline='Hello', pub_date=datetime(2005, 11, 27)
        ).pk
        cls.a2 = Article.objects.create(
            headline='Goodbye', pub_date=datetime(2005, 11, 28)
        ).pk
        cls.a3 = Article.objects.create(
            headline='Hello and goodbye', pub_date=datetime(2005, 11, 29)
        ).pk

    def test_filter_or(self):
        self.assertQuerysetEqual(
            (
                Article.objects.filter(headline__startswith='Hello') |
                Article.objects.filter(headline__startswith='Goodbye')
            ), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

        self.assertQuerysetEqual(
            Article.objects.filter(headline__contains='Hello') | Article.objects.filter(headline__contains='bye'), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

        self.assertQuerysetEqual(
            Article.objects.filter(headline__iexact='Hello') | Article.objects.filter(headline__contains='ood'), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

        self.assertQuerysetEqual(
            Article.objects.filter(Q(headline__startswith='Hello') | Q(headline__startswith='Goodbye')), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

    def test_stages(self):
        # You can shorten this syntax with code like the following,  which is
        # especially useful if building the query in stages:
        articles = Article.objects.all()
        self.assertQuerysetEqual(
            articles.filter(headline__startswith='Hello') & articles.filter(headline__startswith='Goodbye'),
            []
        )
        self.assertQuerysetEqual(
            articles.filter(headline__startswith='Hello') & articles.filter(headline__contains='bye'), [
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

    def test_pk_q(self):
        self.assertQuerysetEqual(
            Article.objects.filter(Q(pk=self.a1) | Q(pk=self.a2)), [
                'Hello',
                'Goodbye'
            ],
            attrgetter("headline")
        )

        self.assertQuerysetEqual(
            Article.objects.filter(Q(pk=self.a1) | Q(pk=self.a2) | Q(pk=self.a3)), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

    def test_pk_in(self):
        self.assertQuerysetEqual(
            Article.objects.filter(pk__in=[self.a1, self.a2, self.a3]), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

        self.assertQuerysetEqual(
            Article.objects.filter(pk__in=(self.a1, self.a2, self.a3)), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

        self.assertQuerysetEqual(
            Article.objects.filter(pk__in=[self.a1, self.a2, self.a3, 40000]), [
                'Hello',
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

    def test_q_repr(self):
        or_expr = Q(baz=Article(headline="Foö"))
        self.assertEqual(repr(or_expr), "<Q: (AND: ('baz', <Article: Foö>))>")
        negated_or = ~Q(baz=Article(headline="Foö"))
        self.assertEqual(repr(negated_or), "<Q: (NOT (AND: ('baz', <Article: Foö>)))>")

    def test_q_negated(self):
        # Q objects can be negated
        self.assertQuerysetEqual(
            Article.objects.filter(Q(pk=self.a1) | ~Q(pk=self.a2)), [
                'Hello',
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )

        self.assertQuerysetEqual(
            Article.objects.filter(~Q(pk=self.a1) & ~Q(pk=self.a2)), [
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )
        # This allows for more complex queries than filter() and exclude()
        # alone would allow
        self.assertQuerysetEqual(
            Article.objects.filter(Q(pk=self.a1) & (~Q(pk=self.a2) | Q(pk=self.a3))), [
                'Hello'
            ],
            attrgetter("headline"),
        )

    def test_complex_filter(self):
        # The 'complex_filter' method supports framework features such as
        # 'limit_choices_to' which normally take a single dictionary of lookup
        # arguments but need to support arbitrary queries via Q objects too.
        self.assertQuerysetEqual(
            Article.objects.complex_filter({'pk': self.a1}), [
                'Hello'
            ],
            attrgetter("headline"),
        )

        self.assertQuerysetEqual(
            Article.objects.complex_filter(Q(pk=self.a1) | Q(pk=self.a2)), [
                'Hello',
                'Goodbye'
            ],
            attrgetter("headline"),
        )

    def test_empty_in(self):
        # Passing "in" an empty list returns no results ...
        self.assertQuerysetEqual(
            Article.objects.filter(pk__in=[]),
            []
        )
        # ... but can return results if we OR it with another query.
        self.assertQuerysetEqual(
            Article.objects.filter(Q(pk__in=[]) | Q(headline__icontains='goodbye')), [
                'Goodbye',
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

    def test_q_and(self):
        # Q arg objects are ANDed
        self.assertQuerysetEqual(
            Article.objects.filter(Q(headline__startswith='Hello'), Q(headline__contains='bye')), [
                'Hello and goodbye'
            ],
            attrgetter("headline")
        )
        # Q arg AND order is irrelevant
        self.assertQuerysetEqual(
            Article.objects.filter(Q(headline__contains='bye'), headline__startswith='Hello'), [
                'Hello and goodbye'
            ],
            attrgetter("headline"),
        )

        self.assertQuerysetEqual(
            Article.objects.filter(Q(headline__startswith='Hello') & Q(headline__startswith='Goodbye')),
            []
        )

    def test_q_exclude(self):
        self.assertQuerysetEqual(
            Article.objects.exclude(Q(headline__startswith='Hello')), [
                'Goodbye'
            ],
            attrgetter("headline")
        )

    def test_other_arg_queries(self):
        # Try some arg queries with operations other than filter.
        self.assertEqual(
            Article.objects.get(Q(headline__startswith='Hello'), Q(headline__contains='bye')).headline,
            'Hello and goodbye'
        )

        self.assertEqual(
            Article.objects.filter(Q(headline__startswith='Hello') | Q(headline__contains='bye')).count(),
            3
        )

        self.assertSequenceEqual(
            Article.objects.filter(Q(headline__startswith='Hello'), Q(headline__contains='bye')).values(), [
                {"headline": "Hello and goodbye", "id": self.a3, "pub_date": datetime(2005, 11, 29)},
            ],
        )

        self.assertEqual(
            Article.objects.filter(Q(headline__startswith='Hello')).in_bulk([self.a1, self.a2]),
            {self.a1: Article.objects.get(pk=self.a1)}
        )

File: tests/lookup/tests.py
Line number range: 18 - 992
Content:
class LookupTests(TestCase):

    @classmethod
    def setUpTestData(cls):
        # Create a few Authors.
        cls.au1 = Author.objects.create(name='Author 1', alias='a1')
        cls.au2 = Author.objects.create(name='Author 2', alias='a2')
        # Create a few Articles.
        cls.a1 = Article.objects.create(
            headline='Article 1',
            pub_date=datetime(2005, 7, 26),
            author=cls.au1,
            slug='a1',
        )
        cls.a2 = Article.objects.create(
            headline='Article 2',
            pub_date=datetime(2005, 7, 27),
            author=cls.au1,
            slug='a2',
        )
        cls.a3 = Article.objects.create(
            headline='Article 3',
            pub_date=datetime(2005, 7, 27),
            author=cls.au1,
            slug='a3',
        )
        cls.a4 = Article.objects.create(
            headline='Article 4',
            pub_date=datetime(2005, 7, 28),
            author=cls.au1,
            slug='a4',
        )
        cls.a5 = Article.objects.create(
            headline='Article 5',
            pub_date=datetime(2005, 8, 1, 9, 0),
            author=cls.au2,
            slug='a5',
        )
        cls.a6 = Article.objects.create(
            headline='Article 6',
            pub_date=datetime(2005, 8, 1, 8, 0),
            author=cls.au2,
            slug='a6',
        )
        cls.a7 = Article.objects.create(
            headline='Article 7',
            pub_date=datetime(2005, 7, 27),
            author=cls.au2,
            slug='a7',
        )
        # Create a few Tags.
        cls.t1 = Tag.objects.create(name='Tag 1')
        cls.t1.articles.add(cls.a1, cls.a2, cls.a3)
        cls.t2 = Tag.objects.create(name='Tag 2')
        cls.t2.articles.add(cls.a3, cls.a4, cls.a5)
        cls.t3 = Tag.objects.create(name='Tag 3')
        cls.t3.articles.add(cls.a5, cls.a6, cls.a7)

    def test_exists(self):
        # We can use .exists() to check that there are some
        self.assertTrue(Article.objects.exists())
        for a in Article.objects.all():
            a.delete()
        # There should be none now!
        self.assertFalse(Article.objects.exists())

    def test_lookup_int_as_str(self):
        # Integer value can be queried using string
        self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),
                                 ['<Article: Article 1>'])

    @skipUnlessDBFeature('supports_date_lookup_using_string')
    def test_lookup_date_as_str(self):
        # A date lookup can be performed using a string search
        self.assertQuerysetEqual(
            Article.objects.filter(pub_date__startswith='2005'),
            [
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )

    def test_iterator(self):
        # Each QuerySet gets iterator(), which is a generator that "lazily"
        # returns results using database-level iteration.
        self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)

        self.assertQuerysetEqual(
            Article.objects.iterator(),
            [
                'Article 5',
                'Article 6',
                'Article 4',
                'Article 2',
                'Article 3',
                'Article 7',
                'Article 1',
            ],
            transform=attrgetter('headline')
        )
        # iterator() can be used on any QuerySet.
        self.assertQuerysetEqual(
            Article.objects.filter(headline__endswith='4').iterator(),
            ['Article 4'],
            transform=attrgetter('headline'))

    def test_count(self):
        # count() returns the number of objects matching search criteria.
        self.assertEqual(Article.objects.count(), 7)
        self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)
        self.assertEqual(Article.objects.filter(headline__startswith='Blah blah').count(), 0)

        # count() should respect sliced query sets.
        articles = Article.objects.all()
        self.assertEqual(articles.count(), 7)
        self.assertEqual(articles[:4].count(), 4)
        self.assertEqual(articles[1:100].count(), 6)
        self.assertEqual(articles[10:100].count(), 0)

        # Date and date/time lookups can also be done with strings.
        self.assertEqual(Article.objects.filter(pub_date__exact='2005-07-27 00:00:00').count(), 3)

    def test_in_bulk(self):
        # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.
        arts = Article.objects.in_bulk([self.a1.id, self.a2.id])
        self.assertEqual(arts[self.a1.id], self.a1)
        self.assertEqual(arts[self.a2.id], self.a2)
        self.assertEqual(
            Article.objects.in_bulk(),
            {
                self.a1.id: self.a1,
                self.a2.id: self.a2,
                self.a3.id: self.a3,
                self.a4.id: self.a4,
                self.a5.id: self.a5,
                self.a6.id: self.a6,
                self.a7.id: self.a7,
            }
        )
        self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})
        self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})
        self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})
        self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})
        self.assertEqual(Article.objects.in_bulk([1000]), {})
        self.assertEqual(Article.objects.in_bulk([]), {})
        self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})
        self.assertEqual(Article.objects.in_bulk(iter([])), {})
        with self.assertRaises(TypeError):
            Article.objects.in_bulk(headline__startswith='Blah')

    def test_in_bulk_lots_of_ids(self):
        test_range = 2000
        max_query_params = connection.features.max_query_params
        expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1
        Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])
        authors = {author.pk: author for author in Author.objects.all()}
        with self.assertNumQueries(expected_num_queries):
            self.assertEqual(Author.objects.in_bulk(authors), authors)

    def test_in_bulk_with_field(self):
        self.assertEqual(
            Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),
            {
                self.a1.slug: self.a1,
                self.a2.slug: self.a2,
                self.a3.slug: self.a3,
            }
        )

    def test_in_bulk_non_unique_field(self):
        msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
        with self.assertRaisesMessage(ValueError, msg):
            Article.objects.in_bulk([self.au1], field_name='author')

    def test_values(self):
        # values() returns a list of dictionaries instead of object instances --
        # and you can specify which fields you want to retrieve.
        self.assertSequenceEqual(
            Article.objects.values('headline'),
            [
                {'headline': 'Article 5'},
                {'headline': 'Article 6'},
                {'headline': 'Article 4'},
                {'headline': 'Article 2'},
                {'headline': 'Article 3'},
                {'headline': 'Article 7'},
                {'headline': 'Article 1'},
            ],
        )
        self.assertSequenceEqual(
            Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).values('id'),
            [{'id': self.a2.id}, {'id': self.a3.id}, {'id': self.a7.id}],
        )
        self.assertSequenceEqual(
            Article.objects.values('id', 'headline'),
            [
                {'id': self.a5.id, 'headline': 'Article 5'},
                {'id': self.a6.id, 'headline': 'Article 6'},
                {'id': self.a4.id, 'headline': 'Article 4'},
                {'id': self.a2.id, 'headline': 'Article 2'},
                {'id': self.a3.id, 'headline': 'Article 3'},
                {'id': self.a7.id, 'headline': 'Article 7'},
                {'id': self.a1.id, 'headline': 'Article 1'},
            ],
        )
        # You can use values() with iterator() for memory savings,
        # because iterator() uses database-level iteration.
        self.assertSequenceEqual(
            list(Article.objects.values('id', 'headline').iterator()),
            [
                {'headline': 'Article 5', 'id': self.a5.id},
                {'headline': 'Article 6', 'id': self.a6.id},
                {'headline': 'Article 4', 'id': self.a4.id},
                {'headline': 'Article 2', 'id': self.a2.id},
                {'headline': 'Article 3', 'id': self.a3.id},
                {'headline': 'Article 7', 'id': self.a7.id},
                {'headline': 'Article 1', 'id': self.a1.id},
            ],
        )
        # The values() method works with "extra" fields specified in extra(select).
        self.assertSequenceEqual(
            Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_one'),
            [
                {'id': self.a5.id, 'id_plus_one': self.a5.id + 1},
                {'id': self.a6.id, 'id_plus_one': self.a6.id + 1},
                {'id': self.a4.id, 'id_plus_one': self.a4.id + 1},
                {'id': self.a2.id, 'id_plus_one': self.a2.id + 1},
                {'id': self.a3.id, 'id_plus_one': self.a3.id + 1},
                {'id': self.a7.id, 'id_plus_one': self.a7.id + 1},
                {'id': self.a1.id, 'id_plus_one': self.a1.id + 1},
            ],
        )
        data = {
            'id_plus_one': 'id+1',
            'id_plus_two': 'id+2',
            'id_plus_three': 'id+3',
            'id_plus_four': 'id+4',
            'id_plus_five': 'id+5',
            'id_plus_six': 'id+6',
            'id_plus_seven': 'id+7',
            'id_plus_eight': 'id+8',
        }
        self.assertSequenceEqual(
            Article.objects.filter(id=self.a1.id).extra(select=data).values(*data),
            [{
                'id_plus_one': self.a1.id + 1,
                'id_plus_two': self.a1.id + 2,
                'id_plus_three': self.a1.id + 3,
                'id_plus_four': self.a1.id + 4,
                'id_plus_five': self.a1.id + 5,
                'id_plus_six': self.a1.id + 6,
                'id_plus_seven': self.a1.id + 7,
                'id_plus_eight': self.a1.id + 8,
            }],
        )
        # You can specify fields from forward and reverse relations, just like filter().
        self.assertSequenceEqual(
            Article.objects.values('headline', 'author__name'),
            [
                {'headline': self.a5.headline, 'author__name': self.au2.name},
                {'headline': self.a6.headline, 'author__name': self.au2.name},
                {'headline': self.a4.headline, 'author__name': self.au1.name},
                {'headline': self.a2.headline, 'author__name': self.au1.name},
                {'headline': self.a3.headline, 'author__name': self.au1.name},
                {'headline': self.a7.headline, 'author__name': self.au2.name},
                {'headline': self.a1.headline, 'author__name': self.au1.name},
            ],
        )
        self.assertSequenceEqual(
            Author.objects.values('name', 'article__headline').order_by('name', 'article__headline'),
            [
                {'name': self.au1.name, 'article__headline': self.a1.headline},
                {'name': self.au1.name, 'article__headline': self.a2.headline},
                {'name': self.au1.name, 'article__headline': self.a3.headline},
                {'name': self.au1.name, 'article__headline': self.a4.headline},
                {'name': self.au2.name, 'article__headline': self.a5.headline},
                {'name': self.au2.name, 'article__headline': self.a6.headline},
                {'name': self.au2.name, 'article__headline': self.a7.headline},
            ],
        )
        self.assertSequenceEqual(
            (
                Author.objects
                .values('name', 'article__headline', 'article__tag__name')
                .order_by('name', 'article__headline', 'article__tag__name')
            ),
            [
                {'name': self.au1.name, 'article__headline': self.a1.headline, 'article__tag__name': self.t1.name},
                {'name': self.au1.name, 'article__headline': self.a2.headline, 'article__tag__name': self.t1.name},
                {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t1.name},
                {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t2.name},
                {'name': self.au1.name, 'article__headline': self.a4.headline, 'article__tag__name': self.t2.name},
                {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t2.name},
                {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t3.name},
                {'name': self.au2.name, 'article__headline': self.a6.headline, 'article__tag__name': self.t3.name},
                {'name': self.au2.name, 'article__headline': self.a7.headline, 'article__tag__name': self.t3.name},
            ],
        )
        # However, an exception FieldDoesNotExist will be thrown if you specify
        # a nonexistent field name in values() (a field that is neither in the
        # model nor in extra(select)).
        msg = (
            "Cannot resolve keyword 'id_plus_two' into field. Choices are: "
            "author, author_id, headline, id, id_plus_one, pub_date, slug, tag"
        )
        with self.assertRaisesMessage(FieldError, msg):
            Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_two')
        # If you don't specify field names to values(), all are returned.
        self.assertSequenceEqual(
            Article.objects.filter(id=self.a5.id).values(),
            [{
                'id': self.a5.id,
                'author_id': self.au2.id,
                'headline': 'Article 5',
                'pub_date': datetime(2005, 8, 1, 9, 0),
                'slug': 'a5',
            }],
        )

    def test_values_list(self):
        # values_list() is similar to values(), except that the results are
        # returned as a list of tuples, rather than a list of dictionaries.
        # Within each tuple, the order of the elements is the same as the order
        # of fields in the values_list() call.
        self.assertSequenceEqual(
            Article.objects.values_list('headline'),
            [
                ('Article 5',),
                ('Article 6',),
                ('Article 4',),
                ('Article 2',),
                ('Article 3',),
                ('Article 7',),
                ('Article 1',),
            ],
        )
        self.assertSequenceEqual(
            Article.objects.values_list('id').order_by('id'),
            [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
        )
        self.assertSequenceEqual(
            Article.objects.values_list('id', flat=True).order_by('id'),
            [self.a1.id, self.a2.id, self.a3.id, self.a4.id, self.a5.id, self.a6.id, self.a7.id],
        )
        self.assertSequenceEqual(
            Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id'),
            [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
        )
        self.assertSequenceEqual(
            Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id_plus_one', 'id'),
            [
                (self.a1.id + 1, self.a1.id),
                (self.a2.id + 1, self.a2.id),
                (self.a3.id + 1, self.a3.id),
                (self.a4.id + 1, self.a4.id),
                (self.a5.id + 1, self.a5.id),
                (self.a6.id + 1, self.a6.id),
                (self.a7.id + 1, self.a7.id)
            ],
        )
        self.assertSequenceEqual(
            Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id', 'id_plus_one'),
            [
                (self.a1.id, self.a1.id + 1),
                (self.a2.id, self.a2.id + 1),
                (self.a3.id, self.a3.id + 1),
                (self.a4.id, self.a4.id + 1),
                (self.a5.id, self.a5.id + 1),
                (self.a6.id, self.a6.id + 1),
                (self.a7.id, self.a7.id + 1)
            ],
        )
        args = ('name', 'article__headline', 'article__tag__name')
        self.assertSequenceEqual(
            Author.objects.values_list(*args).order_by(*args),
            [
                (self.au1.name, self.a1.headline, self.t1.name),
                (self.au1.name, self.a2.headline, self.t1.name),
                (self.au1.name, self.a3.headline, self.t1.name),
                (self.au1.name, self.a3.headline, self.t2.name),
                (self.au1.name, self.a4.headline, self.t2.name),
                (self.au2.name, self.a5.headline, self.t2.name),
                (self.au2.name, self.a5.headline, self.t3.name),
                (self.au2.name, self.a6.headline, self.t3.name),
                (self.au2.name, self.a7.headline, self.t3.name),
            ],
        )
        with self.assertRaises(TypeError):
            Article.objects.values_list('id', 'headline', flat=True)

    def test_get_next_previous_by(self):
        # Every DateField and DateTimeField creates get_next_by_FOO() and
        # get_previous_by_FOO() methods. In the case of identical date values,
        # these methods will use the ID as a fallback check. This guarantees
        # that no records are skipped or duplicated.
        self.assertEqual(repr(self.a1.get_next_by_pub_date()), '<Article: Article 2>')
        self.assertEqual(repr(self.a2.get_next_by_pub_date()), '<Article: Article 3>')
        self.assertEqual(repr(self.a2.get_next_by_pub_date(headline__endswith='6')), '<Article: Article 6>')
        self.assertEqual(repr(self.a3.get_next_by_pub_date()), '<Article: Article 7>')
        self.assertEqual(repr(self.a4.get_next_by_pub_date()), '<Article: Article 6>')
        with self.assertRaises(Article.DoesNotExist):
            self.a5.get_next_by_pub_date()
        self.assertEqual(repr(self.a6.get_next_by_pub_date()), '<Article: Article 5>')
        self.assertEqual(repr(self.a7.get_next_by_pub_date()), '<Article: Article 4>')

        self.assertEqual(repr(self.a7.get_previous_by_pub_date()), '<Article: Article 3>')
        self.assertEqual(repr(self.a6.get_previous_by_pub_date()), '<Article: Article 4>')
        self.assertEqual(repr(self.a5.get_previous_by_pub_date()), '<Article: Article 6>')
        self.assertEqual(repr(self.a4.get_previous_by_pub_date()), '<Article: Article 7>')
        self.assertEqual(repr(self.a3.get_previous_by_pub_date()), '<Article: Article 2>')
        self.assertEqual(repr(self.a2.get_previous_by_pub_date()), '<Article: Article 1>')

    def test_escaping(self):
        # Underscores, percent signs and backslashes have special meaning in the
        # underlying SQL code, but Django handles the quoting of them automatically.
        Article.objects.create(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20))

        self.assertQuerysetEqual(
            Article.objects.filter(headline__startswith='Article'),
            [
                '<Article: Article_ with underscore>',
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__startswith='Article_'),
            ['<Article: Article_ with underscore>']
        )
        Article.objects.create(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21))
        self.assertQuerysetEqual(
            Article.objects.filter(headline__startswith='Article'),
            [
                '<Article: Article% with percent sign>',
                '<Article: Article_ with underscore>',
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__startswith='Article%'),
            ['<Article: Article% with percent sign>']
        )
        Article.objects.create(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22))
        self.assertQuerysetEqual(
            Article.objects.filter(headline__contains='\\'),
            [r'<Article: Article with \ backslash>']
        )

    def test_exclude(self):
        Article.objects.bulk_create([
            Article(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20)),
            Article(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21)),
            Article(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22)),
        ])
        # exclude() is the opposite of filter() when doing lookups:
        self.assertQuerysetEqual(
            Article.objects.filter(headline__contains='Article').exclude(headline__contains='with'),
            [
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.exclude(headline__startswith="Article_"),
            [
                '<Article: Article with \\ backslash>',
                '<Article: Article% with percent sign>',
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.exclude(headline="Article 7"),
            [
                '<Article: Article with \\ backslash>',
                '<Article: Article% with percent sign>',
                '<Article: Article_ with underscore>',
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 1>',
            ]
        )

    def test_none(self):
        # none() returns a QuerySet that behaves like any other QuerySet object
        self.assertQuerysetEqual(Article.objects.none(), [])
        self.assertQuerysetEqual(Article.objects.none().filter(headline__startswith='Article'), [])
        self.assertQuerysetEqual(Article.objects.filter(headline__startswith='Article').none(), [])
        self.assertEqual(Article.objects.none().count(), 0)
        self.assertEqual(Article.objects.none().update(headline="This should not take effect"), 0)
        self.assertQuerysetEqual(Article.objects.none().iterator(), [])

    def test_in(self):
        # using __in with an empty list should return an empty query set
        self.assertQuerysetEqual(Article.objects.filter(id__in=[]), [])
        self.assertQuerysetEqual(
            Article.objects.exclude(id__in=[]),
            [
                '<Article: Article 5>',
                '<Article: Article 6>',
                '<Article: Article 4>',
                '<Article: Article 2>',
                '<Article: Article 3>',
                '<Article: Article 7>',
                '<Article: Article 1>',
            ]
        )

    def test_in_different_database(self):
        with self.assertRaisesMessage(
            ValueError,
            "Subqueries aren't allowed across different databases. Force the "
            "inner query to be evaluated using `list(inner_query)`."
        ):
            list(Article.objects.filter(id__in=Article.objects.using('other').all()))

    def test_in_keeps_value_ordering(self):
        query = Article.objects.filter(slug__in=['a%d' % i for i in range(1, 8)]).values('pk').query
        self.assertIn(' IN (a1, a2, a3, a4, a5, a6, a7) ', str(query))

    def test_error_messages(self):
        # Programming errors are pointed out with nice error messages
        with self.assertRaisesMessage(
            FieldError,
            "Cannot resolve keyword 'pub_date_year' into field. Choices are: "
            "author, author_id, headline, id, pub_date, slug, tag"
        ):
            Article.objects.filter(pub_date_year='2005').count()

    def test_unsupported_lookups(self):
        with self.assertRaisesMessage(
            FieldError,
            "Unsupported lookup 'starts' for CharField or join on the field "
            "not permitted, perhaps you meant startswith or istartswith?"
        ):
            Article.objects.filter(headline__starts='Article')

        with self.assertRaisesMessage(
            FieldError,
            "Unsupported lookup 'is_null' for DateTimeField or join on the field "
            "not permitted, perhaps you meant isnull?"
        ):
            Article.objects.filter(pub_date__is_null=True)

        with self.assertRaisesMessage(
            FieldError,
            "Unsupported lookup 'gobbledygook' for DateTimeField or join on the field "
            "not permitted."
        ):
            Article.objects.filter(pub_date__gobbledygook='blahblah')

    def test_relation_nested_lookup_error(self):
        # An invalid nested lookup on a related field raises a useful error.
        msg = 'Related Field got invalid lookup: editor'
        with self.assertRaisesMessage(FieldError, msg):
            Article.objects.filter(author__editor__name='James')
        msg = 'Related Field got invalid lookup: foo'
        with self.assertRaisesMessage(FieldError, msg):
            Tag.objects.filter(articles__foo='bar')

    def test_regex(self):
        # Create some articles with a bit more interesting headlines for testing field lookups:
        for a in Article.objects.all():
            a.delete()
        now = datetime.now()
        Article.objects.bulk_create([
            Article(pub_date=now, headline='f'),
            Article(pub_date=now, headline='fo'),
            Article(pub_date=now, headline='foo'),
            Article(pub_date=now, headline='fooo'),
            Article(pub_date=now, headline='hey-Foo'),
            Article(pub_date=now, headline='bar'),
            Article(pub_date=now, headline='AbBa'),
            Article(pub_date=now, headline='baz'),
            Article(pub_date=now, headline='baxZ'),
        ])
        # zero-or-more
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'fo*'),
            ['<Article: f>', '<Article: fo>', '<Article: foo>', '<Article: fooo>']
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__iregex=r'fo*'),
            [
                '<Article: f>',
                '<Article: fo>',
                '<Article: foo>',
                '<Article: fooo>',
                '<Article: hey-Foo>',
            ]
        )
        # one-or-more
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'fo+'),
            ['<Article: fo>', '<Article: foo>', '<Article: fooo>']
        )
        # wildcard
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'fooo?'),
            ['<Article: foo>', '<Article: fooo>']
        )
        # leading anchor
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'^b'),
            ['<Article: bar>', '<Article: baxZ>', '<Article: baz>']
        )
        self.assertQuerysetEqual(Article.objects.filter(headline__iregex=r'^a'), ['<Article: AbBa>'])
        # trailing anchor
        self.assertQuerysetEqual(Article.objects.filter(headline__regex=r'z$'), ['<Article: baz>'])
        self.assertQuerysetEqual(
            Article.objects.filter(headline__iregex=r'z$'),
            ['<Article: baxZ>', '<Article: baz>']
        )
        # character sets
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'ba[rz]'),
            ['<Article: bar>', '<Article: baz>']
        )
        self.assertQuerysetEqual(Article.objects.filter(headline__regex=r'ba.[RxZ]'), ['<Article: baxZ>'])
        self.assertQuerysetEqual(
            Article.objects.filter(headline__iregex=r'ba[RxZ]'),
            ['<Article: bar>', '<Article: baxZ>', '<Article: baz>']
        )

        # and more articles:
        Article.objects.bulk_create([
            Article(pub_date=now, headline='foobar'),
            Article(pub_date=now, headline='foobaz'),
            Article(pub_date=now, headline='ooF'),
            Article(pub_date=now, headline='foobarbaz'),
            Article(pub_date=now, headline='zoocarfaz'),
            Article(pub_date=now, headline='barfoobaz'),
            Article(pub_date=now, headline='bazbaRFOO'),
        ])

        # alternation
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'oo(f|b)'),
            [
                '<Article: barfoobaz>',
                '<Article: foobar>',
                '<Article: foobarbaz>',
                '<Article: foobaz>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__iregex=r'oo(f|b)'),
            [
                '<Article: barfoobaz>',
                '<Article: foobar>',
                '<Article: foobarbaz>',
                '<Article: foobaz>',
                '<Article: ooF>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'^foo(f|b)'),
            ['<Article: foobar>', '<Article: foobarbaz>', '<Article: foobaz>']
        )

        # greedy matching
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'b.*az'),
            [
                '<Article: barfoobaz>',
                '<Article: baz>',
                '<Article: bazbaRFOO>',
                '<Article: foobarbaz>',
                '<Article: foobaz>',
            ]
        )
        self.assertQuerysetEqual(
            Article.objects.filter(headline__iregex=r'b.*ar'),
            [
                '<Article: bar>',
                '<Article: barfoobaz>',
                '<Article: bazbaRFOO>',
                '<Article: foobar>',
                '<Article: foobarbaz>',
            ]
        )

    @skipUnlessDBFeature('supports_regex_backreferencing')
    def test_regex_backreferencing(self):
        # grouping and backreferences
        now = datetime.now()
        Article.objects.bulk_create([
            Article(pub_date=now, headline='foobar'),
            Article(pub_date=now, headline='foobaz'),
            Article(pub_date=now, headline='ooF'),
            Article(pub_date=now, headline='foobarbaz'),
            Article(pub_date=now, headline='zoocarfaz'),
            Article(pub_date=now, headline='barfoobaz'),
            Article(pub_date=now, headline='bazbaRFOO'),
        ])
        self.assertQuerysetEqual(
            Article.objects.filter(headline__regex=r'b(.).*b\1'),
            ['<Article: barfoobaz>', '<Article: bazbaRFOO>', '<Article: foobarbaz>']
        )

    def test_regex_null(self):
        """
        A regex lookup does not fail on null/None values
        """
        Season.objects.create(year=2012, gt=None)
        self.assertQuerysetEqual(Season.objects.filter(gt__regex=r'^$'), [])

    def test_regex_non_string(self):
        """
        A regex lookup does not fail on non-string fields
        """
        Season.objects.create(year=2013, gt=444)
        self.assertQuerysetEqual(Season.objects.filter(gt__regex=r'^444$'), ['<Season: 2013>'])

    def test_regex_non_ascii(self):
        """
        A regex lookup does not trip on non-ASCII characters.
        """
        Player.objects.create(name='\u2660')
        Player.objects.get(name__regex='\u2660')

    def test_nonfield_lookups(self):
        """
        A lookup query containing non-fields raises the proper exception.
        """
        msg = "Unsupported lookup 'blahblah' for CharField or join on the field not permitted."
        with self.assertRaisesMessage(FieldError, msg):
            Article.objects.filter(headline__blahblah=99)
        with self.assertRaisesMessage(FieldError, msg):
            Article.objects.filter(headline__blahblah__exact=99)
        msg = (
            "Cannot resolve keyword 'blahblah' into field. Choices are: "
            "author, author_id, headline, id, pub_date, slug, tag"
        )
        with self.assertRaisesMessage(FieldError, msg):
            Article.objects.filter(blahblah=99)

    def test_lookup_collision(self):
        """
        Genuine field names don't collide with built-in lookup types
        ('year', 'gt', 'range', 'in' etc.) (#11670).
        """
        # 'gt' is used as a code number for the year, e.g. 111=>2009.
        season_2009 = Season.objects.create(year=2009, gt=111)
        season_2009.games.create(home="Houston Astros", away="St. Louis Cardinals")
        season_2010 = Season.objects.create(year=2010, gt=222)
        season_2010.games.create(home="Houston Astros", away="Chicago Cubs")
        season_2010.games.create(home="Houston Astros", away="Milwaukee Brewers")
        season_2010.games.create(home="Houston Astros", away="St. Louis Cardinals")
        season_2011 = Season.objects.create(year=2011, gt=333)
        season_2011.games.create(home="Houston Astros", away="St. Louis Cardinals")
        season_2011.games.create(home="Houston Astros", away="Milwaukee Brewers")
        hunter_pence = Player.objects.create(name="Hunter Pence")
        hunter_pence.games.set(Game.objects.filter(season__year__in=[2009, 2010]))
        pudge = Player.objects.create(name="Ivan Rodriquez")
        pudge.games.set(Game.objects.filter(season__year=2009))
        pedro_feliz = Player.objects.create(name="Pedro Feliz")
        pedro_feliz.games.set(Game.objects.filter(season__year__in=[2011]))
        johnson = Player.objects.create(name="Johnson")
        johnson.games.set(Game.objects.filter(season__year__in=[2011]))

        # Games in 2010
        self.assertEqual(Game.objects.filter(season__year=2010).count(), 3)
        self.assertEqual(Game.objects.filter(season__year__exact=2010).count(), 3)
        self.assertEqual(Game.objects.filter(season__gt=222).count(), 3)
        self.assertEqual(Game.objects.filter(season__gt__exact=222).count(), 3)

        # Games in 2011
        self.assertEqual(Game.objects.filter(season__year=2011).count(), 2)
        self.assertEqual(Game.objects.filter(season__year__exact=2011).count(), 2)
        self.assertEqual(Game.objects.filter(season__gt=333).count(), 2)
        self.assertEqual(Game.objects.filter(season__gt__exact=333).count(), 2)
        self.assertEqual(Game.objects.filter(season__year__gt=2010).count(), 2)
        self.assertEqual(Game.objects.filter(season__gt__gt=222).count(), 2)

        # Games played in 2010 and 2011
        self.assertEqual(Game.objects.filter(season__year__in=[2010, 2011]).count(), 5)
        self.assertEqual(Game.objects.filter(season__year__gt=2009).count(), 5)
        self.assertEqual(Game.objects.filter(season__gt__in=[222, 333]).count(), 5)
        self.assertEqual(Game.objects.filter(season__gt__gt=111).count(), 5)

        # Players who played in 2009
        self.assertEqual(Player.objects.filter(games__season__year=2009).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__year__exact=2009).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__gt=111).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__gt__exact=111).distinct().count(), 2)

        # Players who played in 2010
        self.assertEqual(Player.objects.filter(games__season__year=2010).distinct().count(), 1)
        self.assertEqual(Player.objects.filter(games__season__year__exact=2010).distinct().count(), 1)
        self.assertEqual(Player.objects.filter(games__season__gt=222).distinct().count(), 1)
        self.assertEqual(Player.objects.filter(games__season__gt__exact=222).distinct().count(), 1)

        # Players who played in 2011
        self.assertEqual(Player.objects.filter(games__season__year=2011).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__year__exact=2011).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__gt=333).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__year__gt=2010).distinct().count(), 2)
        self.assertEqual(Player.objects.filter(games__season__gt__gt=222).distinct().count(), 2)

    def test_chain_date_time_lookups(self):
        self.assertQuerysetEqual(
            Article.objects.filter(pub_date__month__gt=7),
            ['<Article: Article 5>', '<Article: Article 6>'],
            ordered=False
        )
        self.assertQuerysetEqual(
            Article.objects.filter(pub_date__day__gte=27),
            ['<Article: Article 2>', '<Article: Article 3>',
             '<Article: Article 4>', '<Article: Article 7>'],
            ordered=False
        )
        self.assertQuerysetEqual(
            Article.objects.filter(pub_date__hour__lt=8),
            ['<Article: Article 1>', '<Article: Article 2>',
             '<Article: Article 3>', '<Article: Article 4>',
             '<Article: Article 7>'],
            ordered=False
        )
        self.assertQuerysetEqual(
            Article.objects.filter(pub_date__minute__lte=0),
            ['<Article: Article 1>', '<Article: Article 2>',
             '<Article: Article 3>', '<Article: Article 4>',
             '<Article: Article 5>', '<Article: Article 6>',
             '<Article: Article 7>'],
            ordered=False
        )

    def test_exact_none_transform(self):
        """Transforms are used for __exact=None."""
        Season.objects.create(year=1, nulled_text_field='not null')
        self.assertFalse(Season.objects.filter(nulled_text_field__isnull=True))
        self.assertTrue(Season.objects.filter(nulled_text_field__nulled__isnull=True))
        self.assertTrue(Season.objects.filter(nulled_text_field__nulled__exact=None))
        self.assertTrue(Season.objects.filter(nulled_text_field__nulled=None))

    def test_exact_sliced_queryset_limit_one(self):
        self.assertCountEqual(
            Article.objects.filter(author=Author.objects.all()[:1]),
            [self.a1, self.a2, self.a3, self.a4]
        )

    def test_exact_sliced_queryset_limit_one_offset(self):
        self.assertCountEqual(
            Article.objects.filter(author=Author.objects.all()[1:2]),
            [self.a5, self.a6, self.a7]
        )

    def test_exact_sliced_queryset_not_limited_to_one(self):
        msg = (
            'The QuerySet value for an exact lookup must be limited to one '
            'result using slicing.'
        )
        with self.assertRaisesMessage(ValueError, msg):
            list(Article.objects.filter(author=Author.objects.all()[:2]))
        with self.assertRaisesMessage(ValueError, msg):
            list(Article.objects.filter(author=Author.objects.all()[1:]))

    def test_custom_field_none_rhs(self):
        """
        __exact=value is transformed to __isnull=True if Field.get_prep_value()
        converts value to None.
        """
        season = Season.objects.create(year=2012, nulled_text_field=None)
        self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field__isnull=True))
        self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field=''))

    def test_pattern_lookups_with_substr(self):
        a = Author.objects.create(name='John Smith', alias='Johx')
        b = Author.objects.create(name='Rhonda Simpson', alias='sonx')
        tests = (
            ('startswith', [a]),
            ('istartswith', [a]),
            ('contains', [a, b]),
            ('icontains', [a, b]),
            ('endswith', [b]),
            ('iendswith', [b]),
        )
        for lookup, result in tests:
            with self.subTest(lookup=lookup):
                authors = Author.objects.filter(**{'name__%s' % lookup: Substr('alias', 1, 3)})
                self.assertCountEqual(authors, result)

    def test_custom_lookup_none_rhs(self):
        """Lookup.can_use_none_as_rhs=True allows None as a lookup value."""
        season = Season.objects.create(year=2012, nulled_text_field=None)
        query = Season.objects.get_queryset().query
        field = query.model._meta.get_field('nulled_text_field')
        self.assertIsInstance(query.build_lookup(['isnull_none_rhs'], field, None), IsNullWithNoneAsRHS)
        self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field__isnull_none_rhs=True))

    def test_exact_exists(self):
        qs = Article.objects.filter(pk=OuterRef('pk'))
        seasons = Season.objects.annotate(
            pk_exists=Exists(qs),
        ).filter(
            pk_exists=Exists(qs),
        )
        self.assertCountEqual(seasons, Season.objects.all())

    def test_nested_outerref_lhs(self):
        tag = Tag.objects.create(name=self.au1.alias)
        tag.articles.add(self.a1)
        qs = Tag.objects.annotate(
            has_author_alias_match=Exists(
                Article.objects.annotate(
                    author_exists=Exists(
                        Author.objects.filter(alias=OuterRef(OuterRef('name')))
                    ),
                ).filter(author_exists=True)
            ),
        )
        self.assertEqual(qs.get(has_author_alias_match=True), tag)

    def test_exact_query_rhs_with_selected_columns(self):
        newest_author = Author.objects.create(name='Author 2')
        authors_max_ids = Author.objects.filter(
            name='Author 2',
        ).values(
            'name',
        ).annotate(
            max_id=Max('id'),
        ).values('max_id')
        authors = Author.objects.filter(id=authors_max_ids[:1])
        self.assertEqual(authors.get(), newest_author)

    def test_isnull_non_boolean_value(self):
        # These tests will catch ValueError in Django 4.0 when using
        # non-boolean values for an isnull lookup becomes forbidden.
        # msg = (
        #     'The QuerySet value for an isnull lookup must be True or False.'
        # )
        msg = (
            'Using a non-boolean value for an isnull lookup is deprecated, '
            'use True or False instead.'
        )
        tests = [
            Author.objects.filter(alias__isnull=1),
            Article.objects.filter(author__isnull=1),
            Season.objects.filter(games__isnull=1),
            Freebie.objects.filter(stock__isnull=1),
        ]
        for qs in tests:
            with self.subTest(qs=qs):
                with self.assertWarnsMessage(RemovedInDjango40Warning, msg):
                    qs.exists()

File: tests/lookup/tests.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. from datetime import datetime
3. from math import ceil
4. from operator import attrgetter
5. 
6. from django.core.exceptions import FieldError
7. from django.db import connection
8. from django.db.models import Exists, Max, OuterRef
9. from django.db.models.functions import Substr
10. from django.test import TestCase, skipUnlessDBFeature
11. from django.utils.deprecation import RemovedInDjango40Warning
12. 
13. from .models import (
14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,
15. )
16. 
17. 
18. class LookupTests(TestCase):
19. 
20.     @classmethod
21.     def setUpTestData(cls):
22.         # Create a few Authors.
23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')
24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')
25.         # Create a few Articles.
26.         cls.a1 = Article.objects.create(
27.             headline='Article 1',
28.             pub_date=datetime(2005, 7, 26),
29.             author=cls.au1,
30.             slug='a1',
31.         )
32.         cls.a2 = Article.objects.create(
33.             headline='Article 2',
34.             pub_date=datetime(2005, 7, 27),
35.             author=cls.au1,
36.             slug='a2',
37.         )
38.         cls.a3 = Article.objects.create(
39.             headline='Article 3',
40.             pub_date=datetime(2005, 7, 27),
41.             author=cls.au1,
42.             slug='a3',
43.         )
44.         cls.a4 = Article.objects.create(
45.             headline='Article 4',
46.             pub_date=datetime(2005, 7, 28),
47.             author=cls.au1,
48.             slug='a4',
49.         )
50.         cls.a5 = Article.objects.create(
51.             headline='Article 5',
52.             pub_date=datetime(2005, 8, 1, 9, 0),
53.             author=cls.au2,
54.             slug='a5',
55.         )
56.         cls.a6 = Article.objects.create(
57.             headline='Article 6',
58.             pub_date=datetime(2005, 8, 1, 8, 0),
59.             author=cls.au2,
60.             slug='a6',
61.         )
62.         cls.a7 = Article.objects.create(
63.             headline='Article 7',
64.             pub_date=datetime(2005, 7, 27),
65.             author=cls.au2,
66.             slug='a7',
67.         )
68.         # Create a few Tags.
69.         cls.t1 = Tag.objects.create(name='Tag 1')
70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)
71.         cls.t2 = Tag.objects.create(name='Tag 2')
72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)
73.         cls.t3 = Tag.objects.create(name='Tag 3')
74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)
75. 
76.     def test_exists(self):
77.         # We can use .exists() to check that there are some
78.         self.assertTrue(Article.objects.exists())
79.         for a in Article.objects.all():
80.             a.delete()
81.         # There should be none now!
82.         self.assertFalse(Article.objects.exists())
83. 
84.     def test_lookup_int_as_str(self):
85.         # Integer value can be queried using string
86.         self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),
87.                                  ['<Article: Article 1>'])
88. 
89.     @skipUnlessDBFeature('supports_date_lookup_using_string')
90.     def test_lookup_date_as_str(self):
91.         # A date lookup can be performed using a string search
92.         self.assertQuerysetEqual(
93.             Article.objects.filter(pub_date__startswith='2005'),
94.             [
95.                 '<Article: Article 5>',
96.                 '<Article: Article 6>',
97.                 '<Article: Article 4>',
98.                 '<Article: Article 2>',
99.                 '<Article: Article 3>',
100.                 '<Article: Article 7>',
101.                 '<Article: Article 1>',
102.             ]
103.         )
104. 
105.     def test_iterator(self):
106.         # Each QuerySet gets iterator(), which is a generator that "lazily"
107.         # returns results using database-level iteration.
108.         self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)
109. 
110.         self.assertQuerysetEqual(
111.             Article.objects.iterator(),
112.             [
113.                 'Article 5',
114.                 'Article 6',
115.                 'Article 4',
116.                 'Article 2',
117.                 'Article 3',
118.                 'Article 7',
119.                 'Article 1',
120.             ],
121.             transform=attrgetter('headline')
122.         )
123.         # iterator() can be used on any QuerySet.
124.         self.assertQuerysetEqual(
125.             Article.objects.filter(headline__endswith='4').iterator(),
126.             ['Article 4'],
127.             transform=attrgetter('headline'))
128. 
129.     def test_count(self):
130.         # count() returns the number of objects matching search criteria.
131.         self.assertEqual(Article.objects.count(), 7)
132.         self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)
133.         self.assertEqual(Article.objects.filter(headline__startswith='Blah blah').count(), 0)
134. 
135.         # count() should respect sliced query sets.
136.         articles = Article.objects.all()
137.         self.assertEqual(articles.count(), 7)
138.         self.assertEqual(articles[:4].count(), 4)
139.         self.assertEqual(articles[1:100].count(), 6)
140.         self.assertEqual(articles[10:100].count(), 0)
141. 
142.         # Date and date/time lookups can also be done with strings.
143.         self.assertEqual(Article.objects.filter(pub_date__exact='2005-07-27 00:00:00').count(), 3)
144. 
145.     def test_in_bulk(self):
146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.
147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])
148.         self.assertEqual(arts[self.a1.id], self.a1)
149.         self.assertEqual(arts[self.a2.id], self.a2)
150.         self.assertEqual(
151.             Article.objects.in_bulk(),
152.             {
153.                 self.a1.id: self.a1,
154.                 self.a2.id: self.a2,
155.                 self.a3.id: self.a3,
156.                 self.a4.id: self.a4,
157.                 self.a5.id: self.a5,
158.                 self.a6.id: self.a6,
159.                 self.a7.id: self.a7,
160.             }
161.         )
162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})
163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})
164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})
165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})
166.         self.assertEqual(Article.objects.in_bulk([1000]), {})
167.         self.assertEqual(Article.objects.in_bulk([]), {})
168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})
169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})
170.         with self.assertRaises(TypeError):
171.             Article.objects.in_bulk(headline__startswith='Blah')
172. 
173.     def test_in_bulk_lots_of_ids(self):
174.         test_range = 2000
175.         max_query_params = connection.features.max_query_params
176.         expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1
177.         Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])
178.         authors = {author.pk: author for author in Author.objects.all()}
179.         with self.assertNumQueries(expected_num_queries):
180.             self.assertEqual(Author.objects.in_bulk(authors), authors)
181. 
182.     def test_in_bulk_with_field(self):
183.         self.assertEqual(
184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),
185.             {
186.                 self.a1.slug: self.a1,
187.                 self.a2.slug: self.a2,
188.                 self.a3.slug: self.a3,
189.             }
190.         )
191. 
192.     def test_in_bulk_non_unique_field(self):
193.         msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
194.         with self.assertRaisesMessage(ValueError, msg):
195.             Article.objects.in_bulk([self.au1], field_name='author')
196. 
197.     def test_values(self):
198.         # values() returns a list of dictionaries instead of object instances --
199.         # and you can specify which fields you want to retrieve.
200.         self.assertSequenceEqual(
201.             Article.objects.values('headline'),
202.             [
203.                 {'headline': 'Article 5'},
204.                 {'headline': 'Article 6'},
205.                 {'headline': 'Article 4'},
206.                 {'headline': 'Article 2'},
207.                 {'headline': 'Article 3'},
208.                 {'headline': 'Article 7'},
209.                 {'headline': 'Article 1'},
210.             ],
211.         )
212.         self.assertSequenceEqual(
213.             Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).values('id'),
214.             [{'id': self.a2.id}, {'id': self.a3.id}, {'id': self.a7.id}],
215.         )
216.         self.assertSequenceEqual(
217.             Article.objects.values('id', 'headline'),
218.             [
219.                 {'id': self.a5.id, 'headline': 'Article 5'},
220.                 {'id': self.a6.id, 'headline': 'Article 6'},
221.                 {'id': self.a4.id, 'headline': 'Article 4'},
222.                 {'id': self.a2.id, 'headline': 'Article 2'},
223.                 {'id': self.a3.id, 'headline': 'Article 3'},
224.                 {'id': self.a7.id, 'headline': 'Article 7'},
225.                 {'id': self.a1.id, 'headline': 'Article 1'},
226.             ],
227.         )
228.         # You can use values() with iterator() for memory savings,
229.         # because iterator() uses database-level iteration.
230.         self.assertSequenceEqual(
231.             list(Article.objects.values('id', 'headline').iterator()),
232.             [
233.                 {'headline': 'Article 5', 'id': self.a5.id},
234.                 {'headline': 'Article 6', 'id': self.a6.id},
235.                 {'headline': 'Article 4', 'id': self.a4.id},
236.                 {'headline': 'Article 2', 'id': self.a2.id},
237.                 {'headline': 'Article 3', 'id': self.a3.id},
238.                 {'headline': 'Article 7', 'id': self.a7.id},
239.                 {'headline': 'Article 1', 'id': self.a1.id},
240.             ],
241.         )
242.         # The values() method works with "extra" fields specified in extra(select).
243.         self.assertSequenceEqual(
244.             Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_one'),
245.             [
246.                 {'id': self.a5.id, 'id_plus_one': self.a5.id + 1},
247.                 {'id': self.a6.id, 'id_plus_one': self.a6.id + 1},
248.                 {'id': self.a4.id, 'id_plus_one': self.a4.id + 1},
249.                 {'id': self.a2.id, 'id_plus_one': self.a2.id + 1},
250.                 {'id': self.a3.id, 'id_plus_one': self.a3.id + 1},
251.                 {'id': self.a7.id, 'id_plus_one': self.a7.id + 1},
252.                 {'id': self.a1.id, 'id_plus_one': self.a1.id + 1},
253.             ],
254.         )
255.         data = {
256.             'id_plus_one': 'id+1',
257.             'id_plus_two': 'id+2',
258.             'id_plus_three': 'id+3',
259.             'id_plus_four': 'id+4',
260.             'id_plus_five': 'id+5',
261.             'id_plus_six': 'id+6',
262.             'id_plus_seven': 'id+7',
263.             'id_plus_eight': 'id+8',
264.         }
265.         self.assertSequenceEqual(
266.             Article.objects.filter(id=self.a1.id).extra(select=data).values(*data),
267.             [{
268.                 'id_plus_one': self.a1.id + 1,
269.                 'id_plus_two': self.a1.id + 2,
270.                 'id_plus_three': self.a1.id + 3,
271.                 'id_plus_four': self.a1.id + 4,
272.                 'id_plus_five': self.a1.id + 5,
273.                 'id_plus_six': self.a1.id + 6,
274.                 'id_plus_seven': self.a1.id + 7,
275.                 'id_plus_eight': self.a1.id + 8,
276.             }],
277.         )
278.         # You can specify fields from forward and reverse relations, just like filter().
279.         self.assertSequenceEqual(
280.             Article.objects.values('headline', 'author__name'),
281.             [
282.                 {'headline': self.a5.headline, 'author__name': self.au2.name},
283.                 {'headline': self.a6.headline, 'author__name': self.au2.name},
284.                 {'headline': self.a4.headline, 'author__name': self.au1.name},
285.                 {'headline': self.a2.headline, 'author__name': self.au1.name},
286.                 {'headline': self.a3.headline, 'author__name': self.au1.name},
287.                 {'headline': self.a7.headline, 'author__name': self.au2.name},
288.                 {'headline': self.a1.headline, 'author__name': self.au1.name},
289.             ],
290.         )
291.         self.assertSequenceEqual(
292.             Author.objects.values('name', 'article__headline').order_by('name', 'article__headline'),
293.             [
294.                 {'name': self.au1.name, 'article__headline': self.a1.headline},
295.                 {'name': self.au1.name, 'article__headline': self.a2.headline},
296.                 {'name': self.au1.name, 'article__headline': self.a3.headline},
297.                 {'name': self.au1.name, 'article__headline': self.a4.headline},
298.                 {'name': self.au2.name, 'article__headline': self.a5.headline},
299.                 {'name': self.au2.name, 'article__headline': self.a6.headline},
300.                 {'name': self.au2.name, 'article__headline': self.a7.headline},
301.             ],
302.         )
303.         self.assertSequenceEqual(
304.             (
305.                 Author.objects
306.                 .values('name', 'article__headline', 'article__tag__name')
307.                 .order_by('name', 'article__headline', 'article__tag__name')
308.             ),
309.             [
310.                 {'name': self.au1.name, 'article__headline': self.a1.headline, 'article__tag__name': self.t1.name},
311.                 {'name': self.au1.name, 'article__headline': self.a2.headline, 'article__tag__name': self.t1.name},
312.                 {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t1.name},
313.                 {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t2.name},
314.                 {'name': self.au1.name, 'article__headline': self.a4.headline, 'article__tag__name': self.t2.name},
315.                 {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t2.name},
316.                 {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t3.name},
317.                 {'name': self.au2.name, 'article__headline': self.a6.headline, 'article__tag__name': self.t3.name},
318.                 {'name': self.au2.name, 'article__headline': self.a7.headline, 'article__tag__name': self.t3.name},
319.             ],
320.         )
321.         # However, an exception FieldDoesNotExist will be thrown if you specify
322.         # a nonexistent field name in values() (a field that is neither in the
323.         # model nor in extra(select)).
324.         msg = (
325.             "Cannot resolve keyword 'id_plus_two' into field. Choices are: "
326.             "author, author_id, headline, id, id_plus_one, pub_date, slug, tag"
327.         )
328.         with self.assertRaisesMessage(FieldError, msg):
329.             Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_two')
330.         # If you don't specify field names to values(), all are returned.
331.         self.assertSequenceEqual(
332.             Article.objects.filter(id=self.a5.id).values(),
333.             [{
334.                 'id': self.a5.id,
335.                 'author_id': self.au2.id,
336.                 'headline': 'Article 5',
337.                 'pub_date': datetime(2005, 8, 1, 9, 0),
338.                 'slug': 'a5',
339.             }],
340.         )
341. 
342.     def test_values_list(self):
343.         # values_list() is similar to values(), except that the results are
344.         # returned as a list of tuples, rather than a list of dictionaries.
345.         # Within each tuple, the order of the elements is the same as the order
346.         # of fields in the values_list() call.
347.         self.assertSequenceEqual(
348.             Article.objects.values_list('headline'),
349.             [
350.                 ('Article 5',),
351.                 ('Article 6',),
352.                 ('Article 4',),
353.                 ('Article 2',),
354.                 ('Article 3',),
355.                 ('Article 7',),
356.                 ('Article 1',),
357.             ],
358.         )
359.         self.assertSequenceEqual(
360.             Article.objects.values_list('id').order_by('id'),
361.             [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
362.         )
363.         self.assertSequenceEqual(
364.             Article.objects.values_list('id', flat=True).order_by('id'),
365.             [self.a1.id, self.a2.id, self.a3.id, self.a4.id, self.a5.id, self.a6.id, self.a7.id],
366.         )
367.         self.assertSequenceEqual(
368.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id'),
369.             [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
370.         )
371.         self.assertSequenceEqual(
372.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id_plus_one', 'id'),
373.             [
374.                 (self.a1.id + 1, self.a1.id),
375.                 (self.a2.id + 1, self.a2.id),
376.                 (self.a3.id + 1, self.a3.id),
377.                 (self.a4.id + 1, self.a4.id),
378.                 (self.a5.id + 1, self.a5.id),
379.                 (self.a6.id + 1, self.a6.id),
380.                 (self.a7.id + 1, self.a7.id)
381.             ],
382.         )
383.         self.assertSequenceEqual(
384.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id', 'id_plus_one'),
385.             [
386.                 (self.a1.id, self.a1.id + 1),
387.                 (self.a2.id, self.a2.id + 1),
388.                 (self.a3.id, self.a3.id + 1),
389.                 (self.a4.id, self.a4.id + 1),
390.                 (self.a5.id, self.a5.id + 1),
391.                 (self.a6.id, self.a6.id + 1),
392.                 (self.a7.id, self.a7.id + 1)
393.             ],
394.         )
395.         args = ('name', 'article__headline', 'article__tag__name')
396.         self.assertSequenceEqual(
397.             Author.objects.values_list(*args).order_by(*args),
398.             [
399.                 (self.au1.name, self.a1.headline, self.t1.name),
400.                 (self.au1.name, self.a2.headline, self.t1.name),
401.                 (self.au1.name, self.a3.headline, self.t1.name),
402.                 (self.au1.name, self.a3.headline, self.t2.name),
403.                 (self.au1.name, self.a4.headline, self.t2.name),
404.                 (self.au2.name, self.a5.headline, self.t2.name),
405.                 (self.au2.name, self.a5.headline, self.t3.name),
406.                 (self.au2.name, self.a6.headline, self.t3.name),
407.                 (self.au2.name, self.a7.headline, self.t3.name),
408.             ],
409.         )
410.         with self.assertRaises(TypeError):
411.             Article.objects.values_list('id', 'headline', flat=True)
412. 
413.     def test_get_next_previous_by(self):
414.         # Every DateField and DateTimeField creates get_next_by_FOO() and
415.         # get_previous_by_FOO() methods. In the case of identical date values,
416.         # these methods will use the ID as a fallback check. This guarantees
417.         # that no records are skipped or duplicated.
418.         self.assertEqual(repr(self.a1.get_next_by_pub_date()), '<Article: Article 2>')
419.         self.assertEqual(repr(self.a2.get_next_by_pub_date()), '<Article: Article 3>')
420.         self.assertEqual(repr(self.a2.get_next_by_pub_date(headline__endswith='6')), '<Article: Article 6>')
421.         self.assertEqual(repr(self.a3.get_next_by_pub_date()), '<Article: Article 7>')
422.         self.assertEqual(repr(self.a4.get_next_by_pub_date()), '<Article: Article 6>')
423.         with self.assertRaises(Article.DoesNotExist):
424.             self.a5.get_next_by_pub_date()
425.         self.assertEqual(repr(self.a6.get_next_by_pub_date()), '<Article: Article 5>')
426.         self.assertEqual(repr(self.a7.get_next_by_pub_date()), '<Article: Article 4>')
427. 
428.         self.assertEqual(repr(self.a7.get_previous_by_pub_date()), '<Article: Article 3>')
429.         self.assertEqual(repr(self.a6.get_previous_by_pub_date()), '<Article: Article 4>')
430.         self.assertEqual(repr(self.a5.get_previous_by_pub_date()), '<Article: Article 6>')
431.         self.assertEqual(repr(self.a4.get_previous_by_pub_date()), '<Article: Article 7>')
432.         self.assertEqual(repr(self.a3.get_previous_by_pub_date()), '<Article: Article 2>')
433.         self.assertEqual(repr(self.a2.get_previous_by_pub_date()), '<Article: Article 1>')
434. 
435.     def test_escaping(self):
436.         # Underscores, percent signs and backslashes have special meaning in the
437.         # underlying SQL code, but Django handles the quoting of them automatically.
438.         Article.objects.create(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20))
439. 
440.         self.assertQuerysetEqual(
441.             Article.objects.filter(headline__startswith='Article'),
442.             [
443.                 '<Article: Article_ with underscore>',
444.                 '<Article: Article 5>',
445.                 '<Article: Article 6>',
446.                 '<Article: Article 4>',
447.                 '<Article: Article 2>',
448.                 '<Article: Article 3>',
449.                 '<Article: Article 7>',
450.                 '<Article: Article 1>',
451.             ]
452.         )
453.         self.assertQuerysetEqual(
454.             Article.objects.filter(headline__startswith='Article_'),
455.             ['<Article: Article_ with underscore>']
456.         )
457.         Article.objects.create(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21))
458.         self.assertQuerysetEqual(
459.             Article.objects.filter(headline__startswith='Article'),
460.             [
461.                 '<Article: Article% with percent sign>',
462.                 '<Article: Article_ with underscore>',
463.                 '<Article: Article 5>',
464.                 '<Article: Article 6>',
465.                 '<Article: Article 4>',
466.                 '<Article: Article 2>',
467.                 '<Article: Article 3>',
468.                 '<Article: Article 7>',
469.                 '<Article: Article 1>',
470.             ]
471.         )
472.         self.assertQuerysetEqual(
473.             Article.objects.filter(headline__startswith='Article%'),
474.             ['<Article: Article% with percent sign>']
475.         )
476.         Article.objects.create(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22))
477.         self.assertQuerysetEqual(
478.             Article.objects.filter(headline__contains='\\'),
479.             [r'<Article: Article with \ backslash>']
480.         )
481. 
482.     def test_exclude(self):
483.         Article.objects.bulk_create([
484.             Article(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20)),
485.             Article(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21)),
486.             Article(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22)),
487.         ])
488.         # exclude() is the opposite of filter() when doing lookups:
489.         self.assertQuerysetEqual(
490.             Article.objects.filter(headline__contains='Article').exclude(headline__contains='with'),
491.             [
492.                 '<Article: Article 5>',
493.                 '<Article: Article 6>',
494.                 '<Article: Article 4>',
495.                 '<Article: Article 2>',
496.                 '<Article: Article 3>',
497.                 '<Article: Article 7>',
498.                 '<Article: Article 1>',
499.             ]
500.         )

File: tests/lookup/tests.py
Line number range: 501 - 1000
Content:
501.         self.assertQuerysetEqual(
502.             Article.objects.exclude(headline__startswith="Article_"),
503.             [
504.                 '<Article: Article with \\ backslash>',
505.                 '<Article: Article% with percent sign>',
506.                 '<Article: Article 5>',
507.                 '<Article: Article 6>',
508.                 '<Article: Article 4>',
509.                 '<Article: Article 2>',
510.                 '<Article: Article 3>',
511.                 '<Article: Article 7>',
512.                 '<Article: Article 1>',
513.             ]
514.         )
515.         self.assertQuerysetEqual(
516.             Article.objects.exclude(headline="Article 7"),
517.             [
518.                 '<Article: Article with \\ backslash>',
519.                 '<Article: Article% with percent sign>',
520.                 '<Article: Article_ with underscore>',
521.                 '<Article: Article 5>',
522.                 '<Article: Article 6>',
523.                 '<Article: Article 4>',
524.                 '<Article: Article 2>',
525.                 '<Article: Article 3>',
526.                 '<Article: Article 1>',
527.             ]
528.         )
529. 
530.     def test_none(self):
531.         # none() returns a QuerySet that behaves like any other QuerySet object
532.         self.assertQuerysetEqual(Article.objects.none(), [])
533.         self.assertQuerysetEqual(Article.objects.none().filter(headline__startswith='Article'), [])
534.         self.assertQuerysetEqual(Article.objects.filter(headline__startswith='Article').none(), [])
535.         self.assertEqual(Article.objects.none().count(), 0)
536.         self.assertEqual(Article.objects.none().update(headline="This should not take effect"), 0)
537.         self.assertQuerysetEqual(Article.objects.none().iterator(), [])
538. 
539.     def test_in(self):
540.         # using __in with an empty list should return an empty query set
541.         self.assertQuerysetEqual(Article.objects.filter(id__in=[]), [])
542.         self.assertQuerysetEqual(
543.             Article.objects.exclude(id__in=[]),
544.             [
545.                 '<Article: Article 5>',
546.                 '<Article: Article 6>',
547.                 '<Article: Article 4>',
548.                 '<Article: Article 2>',
549.                 '<Article: Article 3>',
550.                 '<Article: Article 7>',
551.                 '<Article: Article 1>',
552.             ]
553.         )
554. 
555.     def test_in_different_database(self):
556.         with self.assertRaisesMessage(
557.             ValueError,
558.             "Subqueries aren't allowed across different databases. Force the "
559.             "inner query to be evaluated using `list(inner_query)`."
560.         ):
561.             list(Article.objects.filter(id__in=Article.objects.using('other').all()))
562. 
563.     def test_in_keeps_value_ordering(self):
564.         query = Article.objects.filter(slug__in=['a%d' % i for i in range(1, 8)]).values('pk').query
565.         self.assertIn(' IN (a1, a2, a3, a4, a5, a6, a7) ', str(query))
566. 
567.     def test_error_messages(self):
568.         # Programming errors are pointed out with nice error messages
569.         with self.assertRaisesMessage(
570.             FieldError,
571.             "Cannot resolve keyword 'pub_date_year' into field. Choices are: "
572.             "author, author_id, headline, id, pub_date, slug, tag"
573.         ):
574.             Article.objects.filter(pub_date_year='2005').count()
575. 
576.     def test_unsupported_lookups(self):
577.         with self.assertRaisesMessage(
578.             FieldError,
579.             "Unsupported lookup 'starts' for CharField or join on the field "
580.             "not permitted, perhaps you meant startswith or istartswith?"
581.         ):
582.             Article.objects.filter(headline__starts='Article')
583. 
584.         with self.assertRaisesMessage(
585.             FieldError,
586.             "Unsupported lookup 'is_null' for DateTimeField or join on the field "
587.             "not permitted, perhaps you meant isnull?"
588.         ):
589.             Article.objects.filter(pub_date__is_null=True)
590. 
591.         with self.assertRaisesMessage(
592.             FieldError,
593.             "Unsupported lookup 'gobbledygook' for DateTimeField or join on the field "
594.             "not permitted."
595.         ):
596.             Article.objects.filter(pub_date__gobbledygook='blahblah')
597. 
598.     def test_relation_nested_lookup_error(self):
599.         # An invalid nested lookup on a related field raises a useful error.
600.         msg = 'Related Field got invalid lookup: editor'
601.         with self.assertRaisesMessage(FieldError, msg):
602.             Article.objects.filter(author__editor__name='James')
603.         msg = 'Related Field got invalid lookup: foo'
604.         with self.assertRaisesMessage(FieldError, msg):
605.             Tag.objects.filter(articles__foo='bar')
606. 
607.     def test_regex(self):
608.         # Create some articles with a bit more interesting headlines for testing field lookups:
609.         for a in Article.objects.all():
610.             a.delete()
611.         now = datetime.now()
612.         Article.objects.bulk_create([
613.             Article(pub_date=now, headline='f'),
614.             Article(pub_date=now, headline='fo'),
615.             Article(pub_date=now, headline='foo'),
616.             Article(pub_date=now, headline='fooo'),
617.             Article(pub_date=now, headline='hey-Foo'),
618.             Article(pub_date=now, headline='bar'),
619.             Article(pub_date=now, headline='AbBa'),
620.             Article(pub_date=now, headline='baz'),
621.             Article(pub_date=now, headline='baxZ'),
622.         ])
623.         # zero-or-more
624.         self.assertQuerysetEqual(
625.             Article.objects.filter(headline__regex=r'fo*'),
626.             ['<Article: f>', '<Article: fo>', '<Article: foo>', '<Article: fooo>']
627.         )
628.         self.assertQuerysetEqual(
629.             Article.objects.filter(headline__iregex=r'fo*'),
630.             [
631.                 '<Article: f>',
632.                 '<Article: fo>',
633.                 '<Article: foo>',
634.                 '<Article: fooo>',
635.                 '<Article: hey-Foo>',
636.             ]
637.         )
638.         # one-or-more
639.         self.assertQuerysetEqual(
640.             Article.objects.filter(headline__regex=r'fo+'),
641.             ['<Article: fo>', '<Article: foo>', '<Article: fooo>']
642.         )
643.         # wildcard
644.         self.assertQuerysetEqual(
645.             Article.objects.filter(headline__regex=r'fooo?'),
646.             ['<Article: foo>', '<Article: fooo>']
647.         )
648.         # leading anchor
649.         self.assertQuerysetEqual(
650.             Article.objects.filter(headline__regex=r'^b'),
651.             ['<Article: bar>', '<Article: baxZ>', '<Article: baz>']
652.         )
653.         self.assertQuerysetEqual(Article.objects.filter(headline__iregex=r'^a'), ['<Article: AbBa>'])
654.         # trailing anchor
655.         self.assertQuerysetEqual(Article.objects.filter(headline__regex=r'z$'), ['<Article: baz>'])
656.         self.assertQuerysetEqual(
657.             Article.objects.filter(headline__iregex=r'z$'),
658.             ['<Article: baxZ>', '<Article: baz>']
659.         )
660.         # character sets
661.         self.assertQuerysetEqual(
662.             Article.objects.filter(headline__regex=r'ba[rz]'),
663.             ['<Article: bar>', '<Article: baz>']
664.         )
665.         self.assertQuerysetEqual(Article.objects.filter(headline__regex=r'ba.[RxZ]'), ['<Article: baxZ>'])
666.         self.assertQuerysetEqual(
667.             Article.objects.filter(headline__iregex=r'ba[RxZ]'),
668.             ['<Article: bar>', '<Article: baxZ>', '<Article: baz>']
669.         )
670. 
671.         # and more articles:
672.         Article.objects.bulk_create([
673.             Article(pub_date=now, headline='foobar'),
674.             Article(pub_date=now, headline='foobaz'),
675.             Article(pub_date=now, headline='ooF'),
676.             Article(pub_date=now, headline='foobarbaz'),
677.             Article(pub_date=now, headline='zoocarfaz'),
678.             Article(pub_date=now, headline='barfoobaz'),
679.             Article(pub_date=now, headline='bazbaRFOO'),
680.         ])
681. 
682.         # alternation
683.         self.assertQuerysetEqual(
684.             Article.objects.filter(headline__regex=r'oo(f|b)'),
685.             [
686.                 '<Article: barfoobaz>',
687.                 '<Article: foobar>',
688.                 '<Article: foobarbaz>',
689.                 '<Article: foobaz>',
690.             ]
691.         )
692.         self.assertQuerysetEqual(
693.             Article.objects.filter(headline__iregex=r'oo(f|b)'),
694.             [
695.                 '<Article: barfoobaz>',
696.                 '<Article: foobar>',
697.                 '<Article: foobarbaz>',
698.                 '<Article: foobaz>',
699.                 '<Article: ooF>',
700.             ]
701.         )
702.         self.assertQuerysetEqual(
703.             Article.objects.filter(headline__regex=r'^foo(f|b)'),
704.             ['<Article: foobar>', '<Article: foobarbaz>', '<Article: foobaz>']
705.         )
706. 
707.         # greedy matching
708.         self.assertQuerysetEqual(
709.             Article.objects.filter(headline__regex=r'b.*az'),
710.             [
711.                 '<Article: barfoobaz>',
712.                 '<Article: baz>',
713.                 '<Article: bazbaRFOO>',
714.                 '<Article: foobarbaz>',
715.                 '<Article: foobaz>',
716.             ]
717.         )
718.         self.assertQuerysetEqual(
719.             Article.objects.filter(headline__iregex=r'b.*ar'),
720.             [
721.                 '<Article: bar>',
722.                 '<Article: barfoobaz>',
723.                 '<Article: bazbaRFOO>',
724.                 '<Article: foobar>',
725.                 '<Article: foobarbaz>',
726.             ]
727.         )
728. 
729.     @skipUnlessDBFeature('supports_regex_backreferencing')
730.     def test_regex_backreferencing(self):
731.         # grouping and backreferences
732.         now = datetime.now()
733.         Article.objects.bulk_create([
734.             Article(pub_date=now, headline='foobar'),
735.             Article(pub_date=now, headline='foobaz'),
736.             Article(pub_date=now, headline='ooF'),
737.             Article(pub_date=now, headline='foobarbaz'),
738.             Article(pub_date=now, headline='zoocarfaz'),
739.             Article(pub_date=now, headline='barfoobaz'),
740.             Article(pub_date=now, headline='bazbaRFOO'),
741.         ])
742.         self.assertQuerysetEqual(
743.             Article.objects.filter(headline__regex=r'b(.).*b\1'),
744.             ['<Article: barfoobaz>', '<Article: bazbaRFOO>', '<Article: foobarbaz>']
745.         )
746. 
747.     def test_regex_null(self):
748.         """
749.         A regex lookup does not fail on null/None values
750.         """
751.         Season.objects.create(year=2012, gt=None)
752.         self.assertQuerysetEqual(Season.objects.filter(gt__regex=r'^$'), [])
753. 
754.     def test_regex_non_string(self):
755.         """
756.         A regex lookup does not fail on non-string fields
757.         """
758.         Season.objects.create(year=2013, gt=444)
759.         self.assertQuerysetEqual(Season.objects.filter(gt__regex=r'^444$'), ['<Season: 2013>'])
760. 
761.     def test_regex_non_ascii(self):
762.         """
763.         A regex lookup does not trip on non-ASCII characters.
764.         """
765.         Player.objects.create(name='\u2660')
766.         Player.objects.get(name__regex='\u2660')
767. 
768.     def test_nonfield_lookups(self):
769.         """
770.         A lookup query containing non-fields raises the proper exception.
771.         """
772.         msg = "Unsupported lookup 'blahblah' for CharField or join on the field not permitted."
773.         with self.assertRaisesMessage(FieldError, msg):
774.             Article.objects.filter(headline__blahblah=99)
775.         with self.assertRaisesMessage(FieldError, msg):
776.             Article.objects.filter(headline__blahblah__exact=99)
777.         msg = (
778.             "Cannot resolve keyword 'blahblah' into field. Choices are: "
779.             "author, author_id, headline, id, pub_date, slug, tag"
780.         )
781.         with self.assertRaisesMessage(FieldError, msg):
782.             Article.objects.filter(blahblah=99)
783. 
784.     def test_lookup_collision(self):
785.         """
786.         Genuine field names don't collide with built-in lookup types
787.         ('year', 'gt', 'range', 'in' etc.) (#11670).
788.         """
789.         # 'gt' is used as a code number for the year, e.g. 111=>2009.
790.         season_2009 = Season.objects.create(year=2009, gt=111)
791.         season_2009.games.create(home="Houston Astros", away="St. Louis Cardinals")
792.         season_2010 = Season.objects.create(year=2010, gt=222)
793.         season_2010.games.create(home="Houston Astros", away="Chicago Cubs")
794.         season_2010.games.create(home="Houston Astros", away="Milwaukee Brewers")
795.         season_2010.games.create(home="Houston Astros", away="St. Louis Cardinals")
796.         season_2011 = Season.objects.create(year=2011, gt=333)
797.         season_2011.games.create(home="Houston Astros", away="St. Louis Cardinals")
798.         season_2011.games.create(home="Houston Astros", away="Milwaukee Brewers")
799.         hunter_pence = Player.objects.create(name="Hunter Pence")
800.         hunter_pence.games.set(Game.objects.filter(season__year__in=[2009, 2010]))
801.         pudge = Player.objects.create(name="Ivan Rodriquez")
802.         pudge.games.set(Game.objects.filter(season__year=2009))
803.         pedro_feliz = Player.objects.create(name="Pedro Feliz")
804.         pedro_feliz.games.set(Game.objects.filter(season__year__in=[2011]))
805.         johnson = Player.objects.create(name="Johnson")
806.         johnson.games.set(Game.objects.filter(season__year__in=[2011]))
807. 
808.         # Games in 2010
809.         self.assertEqual(Game.objects.filter(season__year=2010).count(), 3)
810.         self.assertEqual(Game.objects.filter(season__year__exact=2010).count(), 3)
811.         self.assertEqual(Game.objects.filter(season__gt=222).count(), 3)
812.         self.assertEqual(Game.objects.filter(season__gt__exact=222).count(), 3)
813. 
814.         # Games in 2011
815.         self.assertEqual(Game.objects.filter(season__year=2011).count(), 2)
816.         self.assertEqual(Game.objects.filter(season__year__exact=2011).count(), 2)
817.         self.assertEqual(Game.objects.filter(season__gt=333).count(), 2)
818.         self.assertEqual(Game.objects.filter(season__gt__exact=333).count(), 2)
819.         self.assertEqual(Game.objects.filter(season__year__gt=2010).count(), 2)
820.         self.assertEqual(Game.objects.filter(season__gt__gt=222).count(), 2)
821. 
822.         # Games played in 2010 and 2011
823.         self.assertEqual(Game.objects.filter(season__year__in=[2010, 2011]).count(), 5)
824.         self.assertEqual(Game.objects.filter(season__year__gt=2009).count(), 5)
825.         self.assertEqual(Game.objects.filter(season__gt__in=[222, 333]).count(), 5)
826.         self.assertEqual(Game.objects.filter(season__gt__gt=111).count(), 5)
827. 
828.         # Players who played in 2009
829.         self.assertEqual(Player.objects.filter(games__season__year=2009).distinct().count(), 2)
830.         self.assertEqual(Player.objects.filter(games__season__year__exact=2009).distinct().count(), 2)
831.         self.assertEqual(Player.objects.filter(games__season__gt=111).distinct().count(), 2)
832.         self.assertEqual(Player.objects.filter(games__season__gt__exact=111).distinct().count(), 2)
833. 
834.         # Players who played in 2010
835.         self.assertEqual(Player.objects.filter(games__season__year=2010).distinct().count(), 1)
836.         self.assertEqual(Player.objects.filter(games__season__year__exact=2010).distinct().count(), 1)
837.         self.assertEqual(Player.objects.filter(games__season__gt=222).distinct().count(), 1)
838.         self.assertEqual(Player.objects.filter(games__season__gt__exact=222).distinct().count(), 1)
839. 
840.         # Players who played in 2011
841.         self.assertEqual(Player.objects.filter(games__season__year=2011).distinct().count(), 2)
842.         self.assertEqual(Player.objects.filter(games__season__year__exact=2011).distinct().count(), 2)
843.         self.assertEqual(Player.objects.filter(games__season__gt=333).distinct().count(), 2)
844.         self.assertEqual(Player.objects.filter(games__season__year__gt=2010).distinct().count(), 2)
845.         self.assertEqual(Player.objects.filter(games__season__gt__gt=222).distinct().count(), 2)
846. 
847.     def test_chain_date_time_lookups(self):
848.         self.assertQuerysetEqual(
849.             Article.objects.filter(pub_date__month__gt=7),
850.             ['<Article: Article 5>', '<Article: Article 6>'],
851.             ordered=False
852.         )
853.         self.assertQuerysetEqual(
854.             Article.objects.filter(pub_date__day__gte=27),
855.             ['<Article: Article 2>', '<Article: Article 3>',
856.              '<Article: Article 4>', '<Article: Article 7>'],
857.             ordered=False
858.         )
859.         self.assertQuerysetEqual(
860.             Article.objects.filter(pub_date__hour__lt=8),
861.             ['<Article: Article 1>', '<Article: Article 2>',
862.              '<Article: Article 3>', '<Article: Article 4>',
863.              '<Article: Article 7>'],
864.             ordered=False
865.         )
866.         self.assertQuerysetEqual(
867.             Article.objects.filter(pub_date__minute__lte=0),
868.             ['<Article: Article 1>', '<Article: Article 2>',
869.              '<Article: Article 3>', '<Article: Article 4>',
870.              '<Article: Article 5>', '<Article: Article 6>',
871.              '<Article: Article 7>'],
872.             ordered=False
873.         )
874. 
875.     def test_exact_none_transform(self):
876.         """Transforms are used for __exact=None."""
877.         Season.objects.create(year=1, nulled_text_field='not null')
878.         self.assertFalse(Season.objects.filter(nulled_text_field__isnull=True))
879.         self.assertTrue(Season.objects.filter(nulled_text_field__nulled__isnull=True))
880.         self.assertTrue(Season.objects.filter(nulled_text_field__nulled__exact=None))
881.         self.assertTrue(Season.objects.filter(nulled_text_field__nulled=None))
882. 
883.     def test_exact_sliced_queryset_limit_one(self):
884.         self.assertCountEqual(
885.             Article.objects.filter(author=Author.objects.all()[:1]),
886.             [self.a1, self.a2, self.a3, self.a4]
887.         )
888. 
889.     def test_exact_sliced_queryset_limit_one_offset(self):
890.         self.assertCountEqual(
891.             Article.objects.filter(author=Author.objects.all()[1:2]),
892.             [self.a5, self.a6, self.a7]
893.         )
894. 
895.     def test_exact_sliced_queryset_not_limited_to_one(self):
896.         msg = (
897.             'The QuerySet value for an exact lookup must be limited to one '
898.             'result using slicing.'
899.         )
900.         with self.assertRaisesMessage(ValueError, msg):
901.             list(Article.objects.filter(author=Author.objects.all()[:2]))
902.         with self.assertRaisesMessage(ValueError, msg):
903.             list(Article.objects.filter(author=Author.objects.all()[1:]))
904. 
905.     def test_custom_field_none_rhs(self):
906.         """
907.         __exact=value is transformed to __isnull=True if Field.get_prep_value()
908.         converts value to None.
909.         """
910.         season = Season.objects.create(year=2012, nulled_text_field=None)
911.         self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field__isnull=True))
912.         self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field=''))
913. 
914.     def test_pattern_lookups_with_substr(self):
915.         a = Author.objects.create(name='John Smith', alias='Johx')
916.         b = Author.objects.create(name='Rhonda Simpson', alias='sonx')
917.         tests = (
918.             ('startswith', [a]),
919.             ('istartswith', [a]),
920.             ('contains', [a, b]),
921.             ('icontains', [a, b]),
922.             ('endswith', [b]),
923.             ('iendswith', [b]),
924.         )
925.         for lookup, result in tests:
926.             with self.subTest(lookup=lookup):
927.                 authors = Author.objects.filter(**{'name__%s' % lookup: Substr('alias', 1, 3)})
928.                 self.assertCountEqual(authors, result)
929. 
930.     def test_custom_lookup_none_rhs(self):
931.         """Lookup.can_use_none_as_rhs=True allows None as a lookup value."""
932.         season = Season.objects.create(year=2012, nulled_text_field=None)
933.         query = Season.objects.get_queryset().query
934.         field = query.model._meta.get_field('nulled_text_field')
935.         self.assertIsInstance(query.build_lookup(['isnull_none_rhs'], field, None), IsNullWithNoneAsRHS)
936.         self.assertTrue(Season.objects.filter(pk=season.pk, nulled_text_field__isnull_none_rhs=True))
937. 
938.     def test_exact_exists(self):
939.         qs = Article.objects.filter(pk=OuterRef('pk'))
940.         seasons = Season.objects.annotate(
941.             pk_exists=Exists(qs),
942.         ).filter(
943.             pk_exists=Exists(qs),
944.         )
945.         self.assertCountEqual(seasons, Season.objects.all())
946. 
947.     def test_nested_outerref_lhs(self):
948.         tag = Tag.objects.create(name=self.au1.alias)
949.         tag.articles.add(self.a1)
950.         qs = Tag.objects.annotate(
951.             has_author_alias_match=Exists(
952.                 Article.objects.annotate(
953.                     author_exists=Exists(
954.                         Author.objects.filter(alias=OuterRef(OuterRef('name')))
955.                     ),
956.                 ).filter(author_exists=True)
957.             ),
958.         )
959.         self.assertEqual(qs.get(has_author_alias_match=True), tag)
960. 
961.     def test_exact_query_rhs_with_selected_columns(self):
962.         newest_author = Author.objects.create(name='Author 2')
963.         authors_max_ids = Author.objects.filter(
964.             name='Author 2',
965.         ).values(
966.             'name',
967.         ).annotate(
968.             max_id=Max('id'),
969.         ).values('max_id')
970.         authors = Author.objects.filter(id=authors_max_ids[:1])
971.         self.assertEqual(authors.get(), newest_author)
972. 
973.     def test_isnull_non_boolean_value(self):
974.         # These tests will catch ValueError in Django 4.0 when using
975.         # non-boolean values for an isnull lookup becomes forbidden.
976.         # msg = (
977.         #     'The QuerySet value for an isnull lookup must be True or False.'
978.         # )
979.         msg = (
980.             'Using a non-boolean value for an isnull lookup is deprecated, '
981.             'use True or False instead.'
982.         )
983.         tests = [
984.             Author.objects.filter(alias__isnull=1),
985.             Article.objects.filter(author__isnull=1),
986.             Season.objects.filter(games__isnull=1),
987.             Freebie.objects.filter(stock__isnull=1),
988.         ]
989.         for qs in tests:
990.             with self.subTest(qs=qs):
991.                 with self.assertWarnsMessage(RemovedInDjango40Warning, msg):
992.                     qs.exists()

File: tests/custom_pk/tests.py
Line number range: 1 - 232
Content:
1. from django.db import IntegrityError, transaction
2. from django.test import TestCase, skipIfDBFeature
3. 
4. from .models import Bar, Business, Employee, Foo
5. 
6. 
7. class BasicCustomPKTests(TestCase):
8.     @classmethod
9.     def setUpTestData(cls):
10.         cls.dan = Employee.objects.create(
11.             employee_code=123, first_name="Dan", last_name="Jones",
12.         )
13.         cls.fran = Employee.objects.create(
14.             employee_code=456, first_name="Fran", last_name="Bones",
15.         )
16.         cls.business = Business.objects.create(name="Sears")
17.         cls.business.employees.add(cls.dan, cls.fran)
18. 
19.     def test_querysets(self):
20.         """
21.         Both pk and custom attribute_name can be used in filter and friends
22.         """
23.         self.assertQuerysetEqual(
24.             Employee.objects.filter(pk=123), [
25.                 "Dan Jones",
26.             ],
27.             str
28.         )
29. 
30.         self.assertQuerysetEqual(
31.             Employee.objects.filter(employee_code=123), [
32.                 "Dan Jones",
33.             ],
34.             str
35.         )
36. 
37.         self.assertQuerysetEqual(
38.             Employee.objects.filter(pk__in=[123, 456]), [
39.                 "Fran Bones",
40.                 "Dan Jones",
41.             ],
42.             str
43.         )
44. 
45.         self.assertQuerysetEqual(
46.             Employee.objects.all(), [
47.                 "Fran Bones",
48.                 "Dan Jones",
49.             ],
50.             str
51.         )
52. 
53.         self.assertQuerysetEqual(
54.             Business.objects.filter(name="Sears"), [
55.                 "Sears"
56.             ],
57.             lambda b: b.name
58.         )
59.         self.assertQuerysetEqual(
60.             Business.objects.filter(pk="Sears"), [
61.                 "Sears",
62.             ],
63.             lambda b: b.name
64.         )
65. 
66.     def test_querysets_related_name(self):
67.         """
68.         Custom pk doesn't affect related_name based lookups
69.         """
70.         self.assertQuerysetEqual(
71.             self.business.employees.all(), [
72.                 "Fran Bones",
73.                 "Dan Jones",
74.             ],
75.             str
76.         )
77.         self.assertQuerysetEqual(
78.             self.fran.business_set.all(), [
79.                 "Sears",
80.             ],
81.             lambda b: b.name
82.         )
83. 
84.     def test_querysets_relational(self):
85.         """
86.         Queries across tables, involving primary key
87.         """
88.         self.assertQuerysetEqual(
89.             Employee.objects.filter(business__name="Sears"), [
90.                 "Fran Bones",
91.                 "Dan Jones",
92.             ],
93.             str,
94.         )
95.         self.assertQuerysetEqual(
96.             Employee.objects.filter(business__pk="Sears"), [
97.                 "Fran Bones",
98.                 "Dan Jones",
99.             ],
100.             str,
101.         )
102. 
103.         self.assertQuerysetEqual(
104.             Business.objects.filter(employees__employee_code=123), [
105.                 "Sears",
106.             ],
107.             lambda b: b.name
108.         )
109.         self.assertQuerysetEqual(
110.             Business.objects.filter(employees__pk=123), [
111.                 "Sears",
112.             ],
113.             lambda b: b.name,
114.         )
115. 
116.         self.assertQuerysetEqual(
117.             Business.objects.filter(employees__first_name__startswith="Fran"), [
118.                 "Sears",
119.             ],
120.             lambda b: b.name
121.         )
122. 
123.     def test_get(self):
124.         """
125.         Get can accept pk or the real attribute name
126.         """
127.         self.assertEqual(Employee.objects.get(pk=123), self.dan)
128.         self.assertEqual(Employee.objects.get(pk=456), self.fran)
129. 
130.         with self.assertRaises(Employee.DoesNotExist):
131.             Employee.objects.get(pk=42)
132. 
133.         # Use the name of the primary key, rather than pk.
134.         self.assertEqual(Employee.objects.get(employee_code=123), self.dan)
135. 
136.     def test_pk_attributes(self):
137.         """
138.         pk and attribute name are available on the model
139.         No default id attribute is added
140.         """
141.         # pk can be used as a substitute for the primary key.
142.         # The primary key can be accessed via the pk property on the model.
143.         e = Employee.objects.get(pk=123)
144.         self.assertEqual(e.pk, 123)
145.         # Or we can use the real attribute name for the primary key:
146.         self.assertEqual(e.employee_code, 123)
147. 
148.         with self.assertRaisesMessage(AttributeError, "'Employee' object has no attribute 'id'"):
149.             e.id
150. 
151.     def test_in_bulk(self):
152.         """
153.         Custom pks work with in_bulk, both for integer and non-integer types
154.         """
155.         emps = Employee.objects.in_bulk([123, 456])
156.         self.assertEqual(emps[123], self.dan)
157. 
158.         self.assertEqual(Business.objects.in_bulk(["Sears"]), {
159.             "Sears": self.business,
160.         })
161. 
162.     def test_save(self):
163.         """
164.         custom pks do not affect save
165.         """
166.         fran = Employee.objects.get(pk=456)
167.         fran.last_name = "Jones"
168.         fran.save()
169. 
170.         self.assertQuerysetEqual(
171.             Employee.objects.filter(last_name="Jones"), [
172.                 "Dan Jones",
173.                 "Fran Jones",
174.             ],
175.             str
176.         )
177. 
178. 
179. class CustomPKTests(TestCase):
180.     def test_custom_pk_create(self):
181.         """
182.         New objects can be created both with pk and the custom name
183.         """
184.         Employee.objects.create(employee_code=1234, first_name="Foo", last_name="Bar")
185.         Employee.objects.create(pk=1235, first_name="Foo", last_name="Baz")
186.         Business.objects.create(name="Bears")
187.         Business.objects.create(pk="Tears")
188. 
189.     def test_unicode_pk(self):
190.         # Primary key may be Unicode string.
191.         Business.objects.create(name='jaźń')
192. 
193.     def test_unique_pk(self):
194.         # The primary key must also obviously be unique, so trying to create a
195.         # new object with the same primary key will fail.
196.         Employee.objects.create(
197.             employee_code=123, first_name="Frank", last_name="Jones"
198.         )
199.         with self.assertRaises(IntegrityError):
200.             with transaction.atomic():
201.                 Employee.objects.create(employee_code=123, first_name="Fred", last_name="Jones")
202. 
203.     def test_zero_non_autoincrement_pk(self):
204.         Employee.objects.create(
205.             employee_code=0, first_name="Frank", last_name="Jones"
206.         )
207.         employee = Employee.objects.get(pk=0)
208.         self.assertEqual(employee.employee_code, 0)
209. 
210.     def test_custom_field_pk(self):
211.         # Regression for #10785 -- Custom fields can be used for primary keys.
212.         new_bar = Bar.objects.create()
213.         new_foo = Foo.objects.create(bar=new_bar)
214. 
215.         f = Foo.objects.get(bar=new_bar.pk)
216.         self.assertEqual(f, new_foo)
217.         self.assertEqual(f.bar, new_bar)
218. 
219.         f = Foo.objects.get(bar=new_bar)
220.         self.assertEqual(f, new_foo),
221.         self.assertEqual(f.bar, new_bar)
222. 
223.     # SQLite lets objects be saved with an empty primary key, even though an
224.     # integer is expected. So we can't check for an error being raised in that
225.     # case for SQLite. Remove it from the suite for this next bit.
226.     @skipIfDBFeature('supports_unspecified_pk')
227.     def test_required_pk(self):
228.         # The primary key must be specified, so an error is raised if you
229.         # try to create an object without it.
230.         with self.assertRaises(IntegrityError):
231.             with transaction.atomic():
232.                 Employee.objects.create(first_name="Tom", last_name="Smith")

File: tests/prefetch_related/tests.py
Line number range: 1 - 500
Content:
1. from unittest import mock
2. 
3. from django.contrib.contenttypes.models import ContentType
4. from django.core.exceptions import ObjectDoesNotExist
5. from django.db import connection
6. from django.db.models import Prefetch, QuerySet, prefetch_related_objects
7. from django.db.models.query import get_prefetcher
8. from django.db.models.sql import Query
9. from django.test import TestCase, override_settings
10. from django.test.utils import CaptureQueriesContext
11. 
12. from .models import (
13.     Article, Author, Author2, AuthorAddress, AuthorWithAge, Bio, Book,
14.     Bookmark, BookReview, BookWithYear, Comment, Department, Employee,
15.     FavoriteAuthors, House, LessonEntry, ModelIterableSubclass, Person,
16.     Qualification, Reader, Room, TaggedItem, Teacher, WordEntry,
17. )
18. 
19. 
20. class TestDataMixin:
21.     @classmethod
22.     def setUpTestData(cls):
23.         cls.book1 = Book.objects.create(title='Poems')
24.         cls.book2 = Book.objects.create(title='Jane Eyre')
25.         cls.book3 = Book.objects.create(title='Wuthering Heights')
26.         cls.book4 = Book.objects.create(title='Sense and Sensibility')
27. 
28.         cls.author1 = Author.objects.create(name='Charlotte', first_book=cls.book1)
29.         cls.author2 = Author.objects.create(name='Anne', first_book=cls.book1)
30.         cls.author3 = Author.objects.create(name='Emily', first_book=cls.book1)
31.         cls.author4 = Author.objects.create(name='Jane', first_book=cls.book4)
32. 
33.         cls.book1.authors.add(cls.author1, cls.author2, cls.author3)
34.         cls.book2.authors.add(cls.author1)
35.         cls.book3.authors.add(cls.author3)
36.         cls.book4.authors.add(cls.author4)
37. 
38.         cls.reader1 = Reader.objects.create(name='Amy')
39.         cls.reader2 = Reader.objects.create(name='Belinda')
40. 
41.         cls.reader1.books_read.add(cls.book1, cls.book4)
42.         cls.reader2.books_read.add(cls.book2, cls.book4)
43. 
44. 
45. class PrefetchRelatedTests(TestDataMixin, TestCase):
46.     def assertWhereContains(self, sql, needle):
47.         where_idx = sql.index('WHERE')
48.         self.assertEqual(
49.             sql.count(str(needle), where_idx), 1,
50.             msg="WHERE clause doesn't contain %s, actual SQL: %s" % (needle, sql[where_idx:])
51.         )
52. 
53.     def test_m2m_forward(self):
54.         with self.assertNumQueries(2):
55.             lists = [list(b.authors.all()) for b in Book.objects.prefetch_related('authors')]
56. 
57.         normal_lists = [list(b.authors.all()) for b in Book.objects.all()]
58.         self.assertEqual(lists, normal_lists)
59. 
60.     def test_m2m_reverse(self):
61.         with self.assertNumQueries(2):
62.             lists = [list(a.books.all()) for a in Author.objects.prefetch_related('books')]
63. 
64.         normal_lists = [list(a.books.all()) for a in Author.objects.all()]
65.         self.assertEqual(lists, normal_lists)
66. 
67.     def test_foreignkey_forward(self):
68.         with self.assertNumQueries(2):
69.             books = [a.first_book for a in Author.objects.prefetch_related('first_book')]
70. 
71.         normal_books = [a.first_book for a in Author.objects.all()]
72.         self.assertEqual(books, normal_books)
73. 
74.     def test_foreignkey_reverse(self):
75.         with self.assertNumQueries(2):
76.             [list(b.first_time_authors.all())
77.              for b in Book.objects.prefetch_related('first_time_authors')]
78. 
79.         self.assertQuerysetEqual(self.book2.authors.all(), ["<Author: Charlotte>"])
80. 
81.     def test_onetoone_reverse_no_match(self):
82.         # Regression for #17439
83.         with self.assertNumQueries(2):
84.             book = Book.objects.prefetch_related('bookwithyear').all()[0]
85.         with self.assertNumQueries(0):
86.             with self.assertRaises(BookWithYear.DoesNotExist):
87.                 book.bookwithyear
88. 
89.     def test_onetoone_reverse_with_to_field_pk(self):
90.         """
91.         A model (Bio) with a OneToOneField primary key (author) that references
92.         a non-pk field (name) on the related model (Author) is prefetchable.
93.         """
94.         Bio.objects.bulk_create([
95.             Bio(author=self.author1),
96.             Bio(author=self.author2),
97.             Bio(author=self.author3),
98.         ])
99.         authors = Author.objects.filter(
100.             name__in=[self.author1, self.author2, self.author3],
101.         ).prefetch_related('bio')
102.         with self.assertNumQueries(2):
103.             for author in authors:
104.                 self.assertEqual(author.name, author.bio.author.name)
105. 
106.     def test_survives_clone(self):
107.         with self.assertNumQueries(2):
108.             [list(b.first_time_authors.all())
109.              for b in Book.objects.prefetch_related('first_time_authors').exclude(id=1000)]
110. 
111.     def test_len(self):
112.         with self.assertNumQueries(2):
113.             qs = Book.objects.prefetch_related('first_time_authors')
114.             len(qs)
115.             [list(b.first_time_authors.all()) for b in qs]
116. 
117.     def test_bool(self):
118.         with self.assertNumQueries(2):
119.             qs = Book.objects.prefetch_related('first_time_authors')
120.             bool(qs)
121.             [list(b.first_time_authors.all()) for b in qs]
122. 
123.     def test_count(self):
124.         with self.assertNumQueries(2):
125.             qs = Book.objects.prefetch_related('first_time_authors')
126.             [b.first_time_authors.count() for b in qs]
127. 
128.     def test_exists(self):
129.         with self.assertNumQueries(2):
130.             qs = Book.objects.prefetch_related('first_time_authors')
131.             [b.first_time_authors.exists() for b in qs]
132. 
133.     def test_in_and_prefetch_related(self):
134.         """
135.         Regression test for #20242 - QuerySet "in" didn't work the first time
136.         when using prefetch_related. This was fixed by the removal of chunked
137.         reads from QuerySet iteration in
138.         70679243d1786e03557c28929f9762a119e3ac14.
139.         """
140.         qs = Book.objects.prefetch_related('first_time_authors')
141.         self.assertIn(qs[0], qs)
142. 
143.     def test_clear(self):
144.         with self.assertNumQueries(5):
145.             with_prefetch = Author.objects.prefetch_related('books')
146.             without_prefetch = with_prefetch.prefetch_related(None)
147.             [list(a.books.all()) for a in without_prefetch]
148. 
149.     def test_m2m_then_m2m(self):
150.         """A m2m can be followed through another m2m."""
151.         with self.assertNumQueries(3):
152.             qs = Author.objects.prefetch_related('books__read_by')
153.             lists = [[[str(r) for r in b.read_by.all()]
154.                       for b in a.books.all()]
155.                      for a in qs]
156.             self.assertEqual(lists, [
157.                 [["Amy"], ["Belinda"]],  # Charlotte - Poems, Jane Eyre
158.                 [["Amy"]],                # Anne - Poems
159.                 [["Amy"], []],            # Emily - Poems, Wuthering Heights
160.                 [["Amy", "Belinda"]],    # Jane - Sense and Sense
161.             ])
162. 
163.     def test_overriding_prefetch(self):
164.         with self.assertNumQueries(3):
165.             qs = Author.objects.prefetch_related('books', 'books__read_by')
166.             lists = [[[str(r) for r in b.read_by.all()]
167.                       for b in a.books.all()]
168.                      for a in qs]
169.             self.assertEqual(lists, [
170.                 [["Amy"], ["Belinda"]],  # Charlotte - Poems, Jane Eyre
171.                 [["Amy"]],                # Anne - Poems
172.                 [["Amy"], []],            # Emily - Poems, Wuthering Heights
173.                 [["Amy", "Belinda"]],    # Jane - Sense and Sense
174.             ])
175.         with self.assertNumQueries(3):
176.             qs = Author.objects.prefetch_related('books__read_by', 'books')
177.             lists = [[[str(r) for r in b.read_by.all()]
178.                       for b in a.books.all()]
179.                      for a in qs]
180.             self.assertEqual(lists, [
181.                 [["Amy"], ["Belinda"]],  # Charlotte - Poems, Jane Eyre
182.                 [["Amy"]],                # Anne - Poems
183.                 [["Amy"], []],            # Emily - Poems, Wuthering Heights
184.                 [["Amy", "Belinda"]],    # Jane - Sense and Sense
185.             ])
186. 
187.     def test_get(self):
188.         """
189.         Objects retrieved with .get() get the prefetch behavior.
190.         """
191.         # Need a double
192.         with self.assertNumQueries(3):
193.             author = Author.objects.prefetch_related('books__read_by').get(name="Charlotte")
194.             lists = [[str(r) for r in b.read_by.all()] for b in author.books.all()]
195.             self.assertEqual(lists, [["Amy"], ["Belinda"]])  # Poems, Jane Eyre
196. 
197.     def test_foreign_key_then_m2m(self):
198.         """
199.         A m2m relation can be followed after a relation like ForeignKey that
200.         doesn't have many objects.
201.         """
202.         with self.assertNumQueries(2):
203.             qs = Author.objects.select_related('first_book').prefetch_related('first_book__read_by')
204.             lists = [[str(r) for r in a.first_book.read_by.all()]
205.                      for a in qs]
206.             self.assertEqual(lists, [["Amy"], ["Amy"], ["Amy"], ["Amy", "Belinda"]])
207. 
208.     def test_reverse_one_to_one_then_m2m(self):
209.         """
210.         A m2m relation can be followed after going through the select_related
211.         reverse of an o2o.
212.         """
213.         qs = Author.objects.prefetch_related('bio__books').select_related('bio')
214. 
215.         with self.assertNumQueries(1):
216.             list(qs.all())
217. 
218.         Bio.objects.create(author=self.author1)
219.         with self.assertNumQueries(2):
220.             list(qs.all())
221. 
222.     def test_attribute_error(self):
223.         qs = Reader.objects.all().prefetch_related('books_read__xyz')
224.         msg = (
225.             "Cannot find 'xyz' on Book object, 'books_read__xyz' "
226.             "is an invalid parameter to prefetch_related()"
227.         )
228.         with self.assertRaisesMessage(AttributeError, msg) as cm:
229.             list(qs)
230. 
231.         self.assertIn('prefetch_related', str(cm.exception))
232. 
233.     def test_invalid_final_lookup(self):
234.         qs = Book.objects.prefetch_related('authors__name')
235.         msg = (
236.             "'authors__name' does not resolve to an item that supports "
237.             "prefetching - this is an invalid parameter to prefetch_related()."
238.         )
239.         with self.assertRaisesMessage(ValueError, msg) as cm:
240.             list(qs)
241. 
242.         self.assertIn('prefetch_related', str(cm.exception))
243.         self.assertIn("name", str(cm.exception))
244. 
245.     def test_prefetch_eq(self):
246.         prefetch_1 = Prefetch('authors', queryset=Author.objects.all())
247.         prefetch_2 = Prefetch('books', queryset=Book.objects.all())
248.         self.assertEqual(prefetch_1, prefetch_1)
249.         self.assertEqual(prefetch_1, mock.ANY)
250.         self.assertNotEqual(prefetch_1, prefetch_2)
251. 
252.     def test_forward_m2m_to_attr_conflict(self):
253.         msg = 'to_attr=authors conflicts with a field on the Book model.'
254.         authors = Author.objects.all()
255.         with self.assertRaisesMessage(ValueError, msg):
256.             list(Book.objects.prefetch_related(
257.                 Prefetch('authors', queryset=authors, to_attr='authors'),
258.             ))
259.         # Without the ValueError, an author was deleted due to the implicit
260.         # save of the relation assignment.
261.         self.assertEqual(self.book1.authors.count(), 3)
262. 
263.     def test_reverse_m2m_to_attr_conflict(self):
264.         msg = 'to_attr=books conflicts with a field on the Author model.'
265.         poems = Book.objects.filter(title='Poems')
266.         with self.assertRaisesMessage(ValueError, msg):
267.             list(Author.objects.prefetch_related(
268.                 Prefetch('books', queryset=poems, to_attr='books'),
269.             ))
270.         # Without the ValueError, a book was deleted due to the implicit
271.         # save of reverse relation assignment.
272.         self.assertEqual(self.author1.books.count(), 2)
273. 
274.     def test_m2m_then_reverse_fk_object_ids(self):
275.         with CaptureQueriesContext(connection) as queries:
276.             list(Book.objects.prefetch_related('authors__addresses'))
277. 
278.         sql = queries[-1]['sql']
279.         self.assertWhereContains(sql, self.author1.name)
280. 
281.     def test_m2m_then_m2m_object_ids(self):
282.         with CaptureQueriesContext(connection) as queries:
283.             list(Book.objects.prefetch_related('authors__favorite_authors'))
284. 
285.         sql = queries[-1]['sql']
286.         self.assertWhereContains(sql, self.author1.name)
287. 
288.     def test_m2m_then_reverse_one_to_one_object_ids(self):
289.         with CaptureQueriesContext(connection) as queries:
290.             list(Book.objects.prefetch_related('authors__authorwithage'))
291. 
292.         sql = queries[-1]['sql']
293.         self.assertWhereContains(sql, self.author1.id)
294. 
295.     def test_filter_deferred(self):
296.         """
297.         Related filtering of prefetched querysets is deferred until necessary.
298.         """
299.         add_q = Query.add_q
300.         with mock.patch.object(
301.             Query,
302.             'add_q',
303.             autospec=True,
304.             side_effect=lambda self, q: add_q(self, q),
305.         ) as add_q_mock:
306.             list(Book.objects.prefetch_related('authors'))
307.             self.assertEqual(add_q_mock.call_count, 1)
308. 
309. 
310. class RawQuerySetTests(TestDataMixin, TestCase):
311.     def test_basic(self):
312.         with self.assertNumQueries(2):
313.             books = Book.objects.raw(
314.                 "SELECT * FROM prefetch_related_book WHERE id = %s",
315.                 (self.book1.id,)
316.             ).prefetch_related('authors')
317.             book1 = list(books)[0]
318. 
319.         with self.assertNumQueries(0):
320.             self.assertCountEqual(book1.authors.all(), [self.author1, self.author2, self.author3])
321. 
322.     def test_prefetch_before_raw(self):
323.         with self.assertNumQueries(2):
324.             books = Book.objects.prefetch_related('authors').raw(
325.                 "SELECT * FROM prefetch_related_book WHERE id = %s",
326.                 (self.book1.id,)
327.             )
328.             book1 = list(books)[0]
329. 
330.         with self.assertNumQueries(0):
331.             self.assertCountEqual(book1.authors.all(), [self.author1, self.author2, self.author3])
332. 
333.     def test_clear(self):
334.         with self.assertNumQueries(5):
335.             with_prefetch = Author.objects.raw(
336.                 "SELECT * FROM prefetch_related_author"
337.             ).prefetch_related('books')
338.             without_prefetch = with_prefetch.prefetch_related(None)
339.             [list(a.books.all()) for a in without_prefetch]
340. 
341. 
342. class CustomPrefetchTests(TestCase):
343.     @classmethod
344.     def traverse_qs(cls, obj_iter, path):
345.         """
346.         Helper method that returns a list containing a list of the objects in the
347.         obj_iter. Then for each object in the obj_iter, the path will be
348.         recursively travelled and the found objects are added to the return value.
349.         """
350.         ret_val = []
351. 
352.         if hasattr(obj_iter, 'all'):
353.             obj_iter = obj_iter.all()
354. 
355.         try:
356.             iter(obj_iter)
357.         except TypeError:
358.             obj_iter = [obj_iter]
359. 
360.         for obj in obj_iter:
361.             rel_objs = []
362.             for part in path:
363.                 if not part:
364.                     continue
365.                 try:
366.                     related = getattr(obj, part[0])
367.                 except ObjectDoesNotExist:
368.                     continue
369.                 if related is not None:
370.                     rel_objs.extend(cls.traverse_qs(related, [part[1:]]))
371.             ret_val.append((obj, rel_objs))
372.         return ret_val
373. 
374.     @classmethod
375.     def setUpTestData(cls):
376.         cls.person1 = Person.objects.create(name='Joe')
377.         cls.person2 = Person.objects.create(name='Mary')
378. 
379.         # Set main_room for each house before creating the next one for
380.         # databases where supports_nullable_unique_constraints is False.
381. 
382.         cls.house1 = House.objects.create(name='House 1', address='123 Main St', owner=cls.person1)
383.         cls.room1_1 = Room.objects.create(name='Dining room', house=cls.house1)
384.         cls.room1_2 = Room.objects.create(name='Lounge', house=cls.house1)
385.         cls.room1_3 = Room.objects.create(name='Kitchen', house=cls.house1)
386.         cls.house1.main_room = cls.room1_1
387.         cls.house1.save()
388.         cls.person1.houses.add(cls.house1)
389. 
390.         cls.house2 = House.objects.create(name='House 2', address='45 Side St', owner=cls.person1)
391.         cls.room2_1 = Room.objects.create(name='Dining room', house=cls.house2)
392.         cls.room2_2 = Room.objects.create(name='Lounge', house=cls.house2)
393.         cls.room2_3 = Room.objects.create(name='Kitchen', house=cls.house2)
394.         cls.house2.main_room = cls.room2_1
395.         cls.house2.save()
396.         cls.person1.houses.add(cls.house2)
397. 
398.         cls.house3 = House.objects.create(name='House 3', address='6 Downing St', owner=cls.person2)
399.         cls.room3_1 = Room.objects.create(name='Dining room', house=cls.house3)
400.         cls.room3_2 = Room.objects.create(name='Lounge', house=cls.house3)
401.         cls.room3_3 = Room.objects.create(name='Kitchen', house=cls.house3)
402.         cls.house3.main_room = cls.room3_1
403.         cls.house3.save()
404.         cls.person2.houses.add(cls.house3)
405. 
406.         cls.house4 = House.objects.create(name='house 4', address="7 Regents St", owner=cls.person2)
407.         cls.room4_1 = Room.objects.create(name='Dining room', house=cls.house4)
408.         cls.room4_2 = Room.objects.create(name='Lounge', house=cls.house4)
409.         cls.room4_3 = Room.objects.create(name='Kitchen', house=cls.house4)
410.         cls.house4.main_room = cls.room4_1
411.         cls.house4.save()
412.         cls.person2.houses.add(cls.house4)
413. 
414.     def test_traverse_qs(self):
415.         qs = Person.objects.prefetch_related('houses')
416.         related_objs_normal = [list(p.houses.all()) for p in qs],
417.         related_objs_from_traverse = [[inner[0] for inner in o[1]]
418.                                       for o in self.traverse_qs(qs, [['houses']])]
419.         self.assertEqual(related_objs_normal, (related_objs_from_traverse,))
420. 
421.     def test_ambiguous(self):
422.         # Ambiguous: Lookup was already seen with a different queryset.
423.         msg = (
424.             "'houses' lookup was already seen with a different queryset. You "
425.             "may need to adjust the ordering of your lookups."
426.         )
427.         # lookup.queryset shouldn't be evaluated.
428.         with self.assertNumQueries(3):
429.             with self.assertRaisesMessage(ValueError, msg):
430.                 self.traverse_qs(
431.                     Person.objects.prefetch_related(
432.                         'houses__rooms',
433.                         Prefetch('houses', queryset=House.objects.all()),
434.                     ),
435.                     [['houses', 'rooms']],
436.                 )
437. 
438.         # Ambiguous: Lookup houses_lst doesn't yet exist when performing houses_lst__rooms.
439.         msg = (
440.             "Cannot find 'houses_lst' on Person object, 'houses_lst__rooms' is "
441.             "an invalid parameter to prefetch_related()"
442.         )
443.         with self.assertRaisesMessage(AttributeError, msg):
444.             self.traverse_qs(
445.                 Person.objects.prefetch_related(
446.                     'houses_lst__rooms',
447.                     Prefetch('houses', queryset=House.objects.all(), to_attr='houses_lst')
448.                 ),
449.                 [['houses', 'rooms']]
450.             )
451. 
452.         # Not ambiguous.
453.         self.traverse_qs(
454.             Person.objects.prefetch_related('houses__rooms', 'houses'),
455.             [['houses', 'rooms']]
456.         )
457. 
458.         self.traverse_qs(
459.             Person.objects.prefetch_related(
460.                 'houses__rooms',
461.                 Prefetch('houses', queryset=House.objects.all(), to_attr='houses_lst')
462.             ),
463.             [['houses', 'rooms']]
464.         )
465. 
466.     def test_m2m(self):
467.         # Control lookups.
468.         with self.assertNumQueries(2):
469.             lst1 = self.traverse_qs(
470.                 Person.objects.prefetch_related('houses'),
471.                 [['houses']]
472.             )
473. 
474.         # Test lookups.
475.         with self.assertNumQueries(2):
476.             lst2 = self.traverse_qs(
477.                 Person.objects.prefetch_related(Prefetch('houses')),
478.                 [['houses']]
479.             )
480.         self.assertEqual(lst1, lst2)
481.         with self.assertNumQueries(2):
482.             lst2 = self.traverse_qs(
483.                 Person.objects.prefetch_related(Prefetch('houses', to_attr='houses_lst')),
484.                 [['houses_lst']]
485.             )
486.         self.assertEqual(lst1, lst2)
487. 
488.     def test_reverse_m2m(self):
489.         # Control lookups.
490.         with self.assertNumQueries(2):
491.             lst1 = self.traverse_qs(
492.                 House.objects.prefetch_related('occupants'),
493.                 [['occupants']]
494.             )
495. 
496.         # Test lookups.
497.         with self.assertNumQueries(2):
498.             lst2 = self.traverse_qs(
499.                 House.objects.prefetch_related(Prefetch('occupants')),
500.                 [['occupants']]

File: tests/prefetch_related/tests.py
Line number range: 501 - 1300
Content:
501.             )
502.         self.assertEqual(lst1, lst2)
503.         with self.assertNumQueries(2):
504.             lst2 = self.traverse_qs(
505.                 House.objects.prefetch_related(Prefetch('occupants', to_attr='occupants_lst')),
506.                 [['occupants_lst']]
507.             )
508.         self.assertEqual(lst1, lst2)
509. 
510.     def test_m2m_through_fk(self):
511.         # Control lookups.
512.         with self.assertNumQueries(3):
513.             lst1 = self.traverse_qs(
514.                 Room.objects.prefetch_related('house__occupants'),
515.                 [['house', 'occupants']]
516.             )
517. 
518.         # Test lookups.
519.         with self.assertNumQueries(3):
520.             lst2 = self.traverse_qs(
521.                 Room.objects.prefetch_related(Prefetch('house__occupants')),
522.                 [['house', 'occupants']]
523.             )
524.         self.assertEqual(lst1, lst2)
525.         with self.assertNumQueries(3):
526.             lst2 = self.traverse_qs(
527.                 Room.objects.prefetch_related(Prefetch('house__occupants', to_attr='occupants_lst')),
528.                 [['house', 'occupants_lst']]
529.             )
530.         self.assertEqual(lst1, lst2)
531. 
532.     def test_m2m_through_gfk(self):
533.         TaggedItem.objects.create(tag="houses", content_object=self.house1)
534.         TaggedItem.objects.create(tag="houses", content_object=self.house2)
535. 
536.         # Control lookups.
537.         with self.assertNumQueries(3):
538.             lst1 = self.traverse_qs(
539.                 TaggedItem.objects.filter(tag='houses').prefetch_related('content_object__rooms'),
540.                 [['content_object', 'rooms']]
541.             )
542. 
543.         # Test lookups.
544.         with self.assertNumQueries(3):
545.             lst2 = self.traverse_qs(
546.                 TaggedItem.objects.prefetch_related(
547.                     Prefetch('content_object'),
548.                     Prefetch('content_object__rooms', to_attr='rooms_lst')
549.                 ),
550.                 [['content_object', 'rooms_lst']]
551.             )
552.         self.assertEqual(lst1, lst2)
553. 
554.     def test_o2m_through_m2m(self):
555.         # Control lookups.
556.         with self.assertNumQueries(3):
557.             lst1 = self.traverse_qs(
558.                 Person.objects.prefetch_related('houses', 'houses__rooms'),
559.                 [['houses', 'rooms']]
560.             )
561. 
562.         # Test lookups.
563.         with self.assertNumQueries(3):
564.             lst2 = self.traverse_qs(
565.                 Person.objects.prefetch_related(Prefetch('houses'), 'houses__rooms'),
566.                 [['houses', 'rooms']]
567.             )
568.         self.assertEqual(lst1, lst2)
569.         with self.assertNumQueries(3):
570.             lst2 = self.traverse_qs(
571.                 Person.objects.prefetch_related(Prefetch('houses'), Prefetch('houses__rooms')),
572.                 [['houses', 'rooms']]
573.             )
574.         self.assertEqual(lst1, lst2)
575.         with self.assertNumQueries(3):
576.             lst2 = self.traverse_qs(
577.                 Person.objects.prefetch_related(Prefetch('houses', to_attr='houses_lst'), 'houses_lst__rooms'),
578.                 [['houses_lst', 'rooms']]
579.             )
580.         self.assertEqual(lst1, lst2)
581.         with self.assertNumQueries(3):
582.             lst2 = self.traverse_qs(
583.                 Person.objects.prefetch_related(
584.                     Prefetch('houses', to_attr='houses_lst'),
585.                     Prefetch('houses_lst__rooms', to_attr='rooms_lst')
586.                 ),
587.                 [['houses_lst', 'rooms_lst']]
588.             )
589.         self.assertEqual(lst1, lst2)
590. 
591.     def test_generic_rel(self):
592.         bookmark = Bookmark.objects.create(url='http://www.djangoproject.com/')
593.         TaggedItem.objects.create(content_object=bookmark, tag='django')
594.         TaggedItem.objects.create(content_object=bookmark, favorite=bookmark, tag='python')
595. 
596.         # Control lookups.
597.         with self.assertNumQueries(4):
598.             lst1 = self.traverse_qs(
599.                 Bookmark.objects.prefetch_related('tags', 'tags__content_object', 'favorite_tags'),
600.                 [['tags', 'content_object'], ['favorite_tags']]
601.             )
602. 
603.         # Test lookups.
604.         with self.assertNumQueries(4):
605.             lst2 = self.traverse_qs(
606.                 Bookmark.objects.prefetch_related(
607.                     Prefetch('tags', to_attr='tags_lst'),
608.                     Prefetch('tags_lst__content_object'),
609.                     Prefetch('favorite_tags'),
610.                 ),
611.                 [['tags_lst', 'content_object'], ['favorite_tags']]
612.             )
613.         self.assertEqual(lst1, lst2)
614. 
615.     def test_traverse_single_item_property(self):
616.         # Control lookups.
617.         with self.assertNumQueries(5):
618.             lst1 = self.traverse_qs(
619.                 Person.objects.prefetch_related(
620.                     'houses__rooms',
621.                     'primary_house__occupants__houses',
622.                 ),
623.                 [['primary_house', 'occupants', 'houses']]
624.             )
625. 
626.         # Test lookups.
627.         with self.assertNumQueries(5):
628.             lst2 = self.traverse_qs(
629.                 Person.objects.prefetch_related(
630.                     'houses__rooms',
631.                     Prefetch('primary_house__occupants', to_attr='occupants_lst'),
632.                     'primary_house__occupants_lst__houses',
633.                 ),
634.                 [['primary_house', 'occupants_lst', 'houses']]
635.             )
636.         self.assertEqual(lst1, lst2)
637. 
638.     def test_traverse_multiple_items_property(self):
639.         # Control lookups.
640.         with self.assertNumQueries(4):
641.             lst1 = self.traverse_qs(
642.                 Person.objects.prefetch_related(
643.                     'houses',
644.                     'all_houses__occupants__houses',
645.                 ),
646.                 [['all_houses', 'occupants', 'houses']]
647.             )
648. 
649.         # Test lookups.
650.         with self.assertNumQueries(4):
651.             lst2 = self.traverse_qs(
652.                 Person.objects.prefetch_related(
653.                     'houses',
654.                     Prefetch('all_houses__occupants', to_attr='occupants_lst'),
655.                     'all_houses__occupants_lst__houses',
656.                 ),
657.                 [['all_houses', 'occupants_lst', 'houses']]
658.             )
659.         self.assertEqual(lst1, lst2)
660. 
661.     def test_custom_qs(self):
662.         # Test basic.
663.         with self.assertNumQueries(2):
664.             lst1 = list(Person.objects.prefetch_related('houses'))
665.         with self.assertNumQueries(2):
666.             lst2 = list(Person.objects.prefetch_related(
667.                 Prefetch('houses', queryset=House.objects.all(), to_attr='houses_lst')))
668.         self.assertEqual(
669.             self.traverse_qs(lst1, [['houses']]),
670.             self.traverse_qs(lst2, [['houses_lst']])
671.         )
672. 
673.         # Test queryset filtering.
674.         with self.assertNumQueries(2):
675.             lst2 = list(
676.                 Person.objects.prefetch_related(
677.                     Prefetch(
678.                         'houses',
679.                         queryset=House.objects.filter(pk__in=[self.house1.pk, self.house3.pk]),
680.                         to_attr='houses_lst',
681.                     )
682.                 )
683.             )
684.         self.assertEqual(len(lst2[0].houses_lst), 1)
685.         self.assertEqual(lst2[0].houses_lst[0], self.house1)
686.         self.assertEqual(len(lst2[1].houses_lst), 1)
687.         self.assertEqual(lst2[1].houses_lst[0], self.house3)
688. 
689.         # Test flattened.
690.         with self.assertNumQueries(3):
691.             lst1 = list(Person.objects.prefetch_related('houses__rooms'))
692.         with self.assertNumQueries(3):
693.             lst2 = list(Person.objects.prefetch_related(
694.                 Prefetch('houses__rooms', queryset=Room.objects.all(), to_attr='rooms_lst')))
695.         self.assertEqual(
696.             self.traverse_qs(lst1, [['houses', 'rooms']]),
697.             self.traverse_qs(lst2, [['houses', 'rooms_lst']])
698.         )
699. 
700.         # Test inner select_related.
701.         with self.assertNumQueries(3):
702.             lst1 = list(Person.objects.prefetch_related('houses__owner'))
703.         with self.assertNumQueries(2):
704.             lst2 = list(Person.objects.prefetch_related(
705.                 Prefetch('houses', queryset=House.objects.select_related('owner'))))
706.         self.assertEqual(
707.             self.traverse_qs(lst1, [['houses', 'owner']]),
708.             self.traverse_qs(lst2, [['houses', 'owner']])
709.         )
710. 
711.         # Test inner prefetch.
712.         inner_rooms_qs = Room.objects.filter(pk__in=[self.room1_1.pk, self.room1_2.pk])
713.         houses_qs_prf = House.objects.prefetch_related(
714.             Prefetch('rooms', queryset=inner_rooms_qs, to_attr='rooms_lst'))
715.         with self.assertNumQueries(4):
716.             lst2 = list(Person.objects.prefetch_related(
717.                 Prefetch('houses', queryset=houses_qs_prf.filter(pk=self.house1.pk), to_attr='houses_lst'),
718.                 Prefetch('houses_lst__rooms_lst__main_room_of')
719.             ))
720. 
721.         self.assertEqual(len(lst2[0].houses_lst[0].rooms_lst), 2)
722.         self.assertEqual(lst2[0].houses_lst[0].rooms_lst[0], self.room1_1)
723.         self.assertEqual(lst2[0].houses_lst[0].rooms_lst[1], self.room1_2)
724.         self.assertEqual(lst2[0].houses_lst[0].rooms_lst[0].main_room_of, self.house1)
725.         self.assertEqual(len(lst2[1].houses_lst), 0)
726. 
727.         # Test ForwardManyToOneDescriptor.
728.         houses = House.objects.select_related('owner')
729.         with self.assertNumQueries(6):
730.             rooms = Room.objects.all().prefetch_related('house')
731.             lst1 = self.traverse_qs(rooms, [['house', 'owner']])
732.         with self.assertNumQueries(2):
733.             rooms = Room.objects.all().prefetch_related(Prefetch('house', queryset=houses.all()))
734.             lst2 = self.traverse_qs(rooms, [['house', 'owner']])
735.         self.assertEqual(lst1, lst2)
736.         with self.assertNumQueries(2):
737.             houses = House.objects.select_related('owner')
738.             rooms = Room.objects.all().prefetch_related(Prefetch('house', queryset=houses.all(), to_attr='house_attr'))
739.             lst2 = self.traverse_qs(rooms, [['house_attr', 'owner']])
740.         self.assertEqual(lst1, lst2)
741.         room = Room.objects.all().prefetch_related(
742.             Prefetch('house', queryset=houses.filter(address='DoesNotExist'))
743.         ).first()
744.         with self.assertRaises(ObjectDoesNotExist):
745.             getattr(room, 'house')
746.         room = Room.objects.all().prefetch_related(
747.             Prefetch('house', queryset=houses.filter(address='DoesNotExist'), to_attr='house_attr')
748.         ).first()
749.         self.assertIsNone(room.house_attr)
750.         rooms = Room.objects.all().prefetch_related(Prefetch('house', queryset=House.objects.only('name')))
751.         with self.assertNumQueries(2):
752.             getattr(rooms.first().house, 'name')
753.         with self.assertNumQueries(3):
754.             getattr(rooms.first().house, 'address')
755. 
756.         # Test ReverseOneToOneDescriptor.
757.         houses = House.objects.select_related('owner')
758.         with self.assertNumQueries(6):
759.             rooms = Room.objects.all().prefetch_related('main_room_of')
760.             lst1 = self.traverse_qs(rooms, [['main_room_of', 'owner']])
761.         with self.assertNumQueries(2):
762.             rooms = Room.objects.all().prefetch_related(Prefetch('main_room_of', queryset=houses.all()))
763.             lst2 = self.traverse_qs(rooms, [['main_room_of', 'owner']])
764.         self.assertEqual(lst1, lst2)
765.         with self.assertNumQueries(2):
766.             rooms = list(
767.                 Room.objects.all().prefetch_related(
768.                     Prefetch('main_room_of', queryset=houses.all(), to_attr='main_room_of_attr')
769.                 )
770.             )
771.             lst2 = self.traverse_qs(rooms, [['main_room_of_attr', 'owner']])
772.         self.assertEqual(lst1, lst2)
773.         room = Room.objects.filter(main_room_of__isnull=False).prefetch_related(
774.             Prefetch('main_room_of', queryset=houses.filter(address='DoesNotExist'))
775.         ).first()
776.         with self.assertRaises(ObjectDoesNotExist):
777.             getattr(room, 'main_room_of')
778.         room = Room.objects.filter(main_room_of__isnull=False).prefetch_related(
779.             Prefetch('main_room_of', queryset=houses.filter(address='DoesNotExist'), to_attr='main_room_of_attr')
780.         ).first()
781.         self.assertIsNone(room.main_room_of_attr)
782. 
783.         # The custom queryset filters should be applied to the queryset
784.         # instance returned by the manager.
785.         person = Person.objects.prefetch_related(
786.             Prefetch('houses', queryset=House.objects.filter(name='House 1')),
787.         ).get(pk=self.person1.pk)
788.         self.assertEqual(
789.             list(person.houses.all()),
790.             list(person.houses.all().all()),
791.         )
792. 
793.     def test_nested_prefetch_related_are_not_overwritten(self):
794.         # Regression test for #24873
795.         houses_2 = House.objects.prefetch_related(Prefetch('rooms'))
796.         persons = Person.objects.prefetch_related(Prefetch('houses', queryset=houses_2))
797.         houses = House.objects.prefetch_related(Prefetch('occupants', queryset=persons))
798.         list(houses)  # queryset must be evaluated once to reproduce the bug.
799.         self.assertEqual(
800.             houses.all()[0].occupants.all()[0].houses.all()[1].rooms.all()[0],
801.             self.room2_1
802.         )
803. 
804.     def test_nested_prefetch_related_with_duplicate_prefetcher(self):
805.         """
806.         Nested prefetches whose name clashes with descriptor names
807.         (Person.houses here) are allowed.
808.         """
809.         occupants = Person.objects.prefetch_related(
810.             Prefetch('houses', to_attr='some_attr_name'),
811.             Prefetch('houses', queryset=House.objects.prefetch_related('main_room')),
812.         )
813.         houses = House.objects.prefetch_related(Prefetch('occupants', queryset=occupants))
814.         with self.assertNumQueries(5):
815.             self.traverse_qs(list(houses), [['occupants', 'houses', 'main_room']])
816. 
817.     def test_values_queryset(self):
818.         msg = 'Prefetch querysets cannot use raw(), values(), and values_list().'
819.         with self.assertRaisesMessage(ValueError, msg):
820.             Prefetch('houses', House.objects.values('pk'))
821.         with self.assertRaisesMessage(ValueError, msg):
822.             Prefetch('houses', House.objects.values_list('pk'))
823.         # That error doesn't affect managers with custom ModelIterable subclasses
824.         self.assertIs(Teacher.objects_custom.all()._iterable_class, ModelIterableSubclass)
825.         Prefetch('teachers', Teacher.objects_custom.all())
826. 
827.     def test_raw_queryset(self):
828.         msg = 'Prefetch querysets cannot use raw(), values(), and values_list().'
829.         with self.assertRaisesMessage(ValueError, msg):
830.             Prefetch('houses', House.objects.raw('select pk from house'))
831. 
832.     def test_to_attr_doesnt_cache_through_attr_as_list(self):
833.         house = House.objects.prefetch_related(
834.             Prefetch('rooms', queryset=Room.objects.all(), to_attr='to_rooms'),
835.         ).get(pk=self.house3.pk)
836.         self.assertIsInstance(house.rooms.all(), QuerySet)
837. 
838.     def test_to_attr_cached_property(self):
839.         persons = Person.objects.prefetch_related(
840.             Prefetch('houses', House.objects.all(), to_attr='cached_all_houses'),
841.         )
842.         for person in persons:
843.             # To bypass caching at the related descriptor level, don't use
844.             # person.houses.all() here.
845.             all_houses = list(House.objects.filter(occupants=person))
846.             with self.assertNumQueries(0):
847.                 self.assertEqual(person.cached_all_houses, all_houses)
848. 
849.     def test_filter_deferred(self):
850.         """
851.         Related filtering of prefetched querysets is deferred until necessary.
852.         """
853.         add_q = Query.add_q
854.         with mock.patch.object(
855.             Query,
856.             'add_q',
857.             autospec=True,
858.             side_effect=lambda self, q: add_q(self, q),
859.         ) as add_q_mock:
860.             list(House.objects.prefetch_related(
861.                 Prefetch('occupants', queryset=Person.objects.all())
862.             ))
863.             self.assertEqual(add_q_mock.call_count, 1)
864. 
865. 
866. class DefaultManagerTests(TestCase):
867. 
868.     def setUp(self):
869.         self.qual1 = Qualification.objects.create(name="BA")
870.         self.qual2 = Qualification.objects.create(name="BSci")
871.         self.qual3 = Qualification.objects.create(name="MA")
872.         self.qual4 = Qualification.objects.create(name="PhD")
873. 
874.         self.teacher1 = Teacher.objects.create(name="Mr Cleese")
875.         self.teacher2 = Teacher.objects.create(name="Mr Idle")
876.         self.teacher3 = Teacher.objects.create(name="Mr Chapman")
877. 
878.         self.teacher1.qualifications.add(self.qual1, self.qual2, self.qual3, self.qual4)
879.         self.teacher2.qualifications.add(self.qual1)
880.         self.teacher3.qualifications.add(self.qual2)
881. 
882.         self.dept1 = Department.objects.create(name="English")
883.         self.dept2 = Department.objects.create(name="Physics")
884. 
885.         self.dept1.teachers.add(self.teacher1, self.teacher2)
886.         self.dept2.teachers.add(self.teacher1, self.teacher3)
887. 
888.     def test_m2m_then_m2m(self):
889.         with self.assertNumQueries(3):
890.             # When we prefetch the teachers, and force the query, we don't want
891.             # the default manager on teachers to immediately get all the related
892.             # qualifications, since this will do one query per teacher.
893.             qs = Department.objects.prefetch_related('teachers')
894.             depts = "".join("%s department: %s\n" %
895.                             (dept.name, ", ".join(str(t) for t in dept.teachers.all()))
896.                             for dept in qs)
897. 
898.             self.assertEqual(depts,
899.                              "English department: Mr Cleese (BA, BSci, MA, PhD), Mr Idle (BA)\n"
900.                              "Physics department: Mr Cleese (BA, BSci, MA, PhD), Mr Chapman (BSci)\n")
901. 
902. 
903. class GenericRelationTests(TestCase):
904. 
905.     @classmethod
906.     def setUpTestData(cls):
907.         book1 = Book.objects.create(title="Winnie the Pooh")
908.         book2 = Book.objects.create(title="Do you like green eggs and spam?")
909.         book3 = Book.objects.create(title="Three Men In A Boat")
910. 
911.         reader1 = Reader.objects.create(name="me")
912.         reader2 = Reader.objects.create(name="you")
913.         reader3 = Reader.objects.create(name="someone")
914. 
915.         book1.read_by.add(reader1, reader2)
916.         book2.read_by.add(reader2)
917.         book3.read_by.add(reader3)
918. 
919.         cls.book1, cls.book2, cls.book3 = book1, book2, book3
920.         cls.reader1, cls.reader2, cls.reader3 = reader1, reader2, reader3
921. 
922.     def test_prefetch_GFK(self):
923.         TaggedItem.objects.create(tag="awesome", content_object=self.book1)
924.         TaggedItem.objects.create(tag="great", content_object=self.reader1)
925.         TaggedItem.objects.create(tag="outstanding", content_object=self.book2)
926.         TaggedItem.objects.create(tag="amazing", content_object=self.reader3)
927. 
928.         # 1 for TaggedItem table, 1 for Book table, 1 for Reader table
929.         with self.assertNumQueries(3):
930.             qs = TaggedItem.objects.prefetch_related('content_object')
931.             list(qs)
932. 
933.     def test_prefetch_GFK_nonint_pk(self):
934.         Comment.objects.create(comment="awesome", content_object=self.book1)
935. 
936.         # 1 for Comment table, 1 for Book table
937.         with self.assertNumQueries(2):
938.             qs = Comment.objects.prefetch_related('content_object')
939.             [c.content_object for c in qs]
940. 
941.     def test_prefetch_GFK_uuid_pk(self):
942.         article = Article.objects.create(name='Django')
943.         Comment.objects.create(comment='awesome', content_object_uuid=article)
944.         qs = Comment.objects.prefetch_related('content_object_uuid')
945.         self.assertEqual([c.content_object_uuid for c in qs], [article])
946. 
947.     def test_prefetch_GFK_fk_pk(self):
948.         book = Book.objects.create(title='Poems')
949.         book_with_year = BookWithYear.objects.create(book=book, published_year=2019)
950.         Comment.objects.create(comment='awesome', content_object=book_with_year)
951.         qs = Comment.objects.prefetch_related('content_object')
952.         self.assertEqual([c.content_object for c in qs], [book_with_year])
953. 
954.     def test_traverse_GFK(self):
955.         """
956.         A 'content_object' can be traversed with prefetch_related() and
957.         get to related objects on the other side (assuming it is suitably
958.         filtered)
959.         """
960.         TaggedItem.objects.create(tag="awesome", content_object=self.book1)
961.         TaggedItem.objects.create(tag="awesome", content_object=self.book2)
962.         TaggedItem.objects.create(tag="awesome", content_object=self.book3)
963.         TaggedItem.objects.create(tag="awesome", content_object=self.reader1)
964.         TaggedItem.objects.create(tag="awesome", content_object=self.reader2)
965. 
966.         ct = ContentType.objects.get_for_model(Book)
967. 
968.         # We get 3 queries - 1 for main query, 1 for content_objects since they
969.         # all use the same table, and 1 for the 'read_by' relation.
970.         with self.assertNumQueries(3):
971.             # If we limit to books, we know that they will have 'read_by'
972.             # attributes, so the following makes sense:
973.             qs = TaggedItem.objects.filter(content_type=ct, tag='awesome').prefetch_related('content_object__read_by')
974.             readers_of_awesome_books = {r.name for tag in qs
975.                                         for r in tag.content_object.read_by.all()}
976.             self.assertEqual(readers_of_awesome_books, {"me", "you", "someone"})
977. 
978.     def test_nullable_GFK(self):
979.         TaggedItem.objects.create(tag="awesome", content_object=self.book1,
980.                                   created_by=self.reader1)
981.         TaggedItem.objects.create(tag="great", content_object=self.book2)
982.         TaggedItem.objects.create(tag="rubbish", content_object=self.book3)
983. 
984.         with self.assertNumQueries(2):
985.             result = [t.created_by for t in TaggedItem.objects.prefetch_related('created_by')]
986. 
987.         self.assertEqual(result,
988.                          [t.created_by for t in TaggedItem.objects.all()])
989. 
990.     def test_generic_relation(self):
991.         bookmark = Bookmark.objects.create(url='http://www.djangoproject.com/')
992.         TaggedItem.objects.create(content_object=bookmark, tag='django')
993.         TaggedItem.objects.create(content_object=bookmark, tag='python')
994. 
995.         with self.assertNumQueries(2):
996.             tags = [t.tag for b in Bookmark.objects.prefetch_related('tags')
997.                     for t in b.tags.all()]
998.             self.assertEqual(sorted(tags), ["django", "python"])
999. 
1000.     def test_charfield_GFK(self):
1001.         b = Bookmark.objects.create(url='http://www.djangoproject.com/')
1002.         TaggedItem.objects.create(content_object=b, tag='django')
1003.         TaggedItem.objects.create(content_object=b, favorite=b, tag='python')
1004. 
1005.         with self.assertNumQueries(3):
1006.             bookmark = Bookmark.objects.filter(pk=b.pk).prefetch_related('tags', 'favorite_tags')[0]
1007.             self.assertEqual(sorted(i.tag for i in bookmark.tags.all()), ["django", "python"])
1008.             self.assertEqual([i.tag for i in bookmark.favorite_tags.all()], ["python"])
1009. 
1010.     def test_custom_queryset(self):
1011.         bookmark = Bookmark.objects.create(url='http://www.djangoproject.com/')
1012.         django_tag = TaggedItem.objects.create(content_object=bookmark, tag='django')
1013.         TaggedItem.objects.create(content_object=bookmark, tag='python')
1014. 
1015.         with self.assertNumQueries(2):
1016.             bookmark = Bookmark.objects.prefetch_related(
1017.                 Prefetch('tags', TaggedItem.objects.filter(tag='django')),
1018.             ).get()
1019. 
1020.         with self.assertNumQueries(0):
1021.             self.assertEqual(list(bookmark.tags.all()), [django_tag])
1022. 
1023.         # The custom queryset filters should be applied to the queryset
1024.         # instance returned by the manager.
1025.         self.assertEqual(list(bookmark.tags.all()), list(bookmark.tags.all().all()))
1026. 
1027. 
1028. class MultiTableInheritanceTest(TestCase):
1029. 
1030.     @classmethod
1031.     def setUpTestData(cls):
1032.         cls.book1 = BookWithYear.objects.create(title='Poems', published_year=2010)
1033.         cls.book2 = BookWithYear.objects.create(title='More poems', published_year=2011)
1034.         cls.author1 = AuthorWithAge.objects.create(name='Jane', first_book=cls.book1, age=50)
1035.         cls.author2 = AuthorWithAge.objects.create(name='Tom', first_book=cls.book1, age=49)
1036.         cls.author3 = AuthorWithAge.objects.create(name='Robert', first_book=cls.book2, age=48)
1037.         cls.author_address = AuthorAddress.objects.create(author=cls.author1, address='SomeStreet 1')
1038.         cls.book2.aged_authors.add(cls.author2, cls.author3)
1039.         cls.br1 = BookReview.objects.create(book=cls.book1, notes='review book1')
1040.         cls.br2 = BookReview.objects.create(book=cls.book2, notes='review book2')
1041. 
1042.     def test_foreignkey(self):
1043.         with self.assertNumQueries(2):
1044.             qs = AuthorWithAge.objects.prefetch_related('addresses')
1045.             addresses = [[str(address) for address in obj.addresses.all()] for obj in qs]
1046.         self.assertEqual(addresses, [[str(self.author_address)], [], []])
1047. 
1048.     def test_foreignkey_to_inherited(self):
1049.         with self.assertNumQueries(2):
1050.             qs = BookReview.objects.prefetch_related('book')
1051.             titles = [obj.book.title for obj in qs]
1052.         self.assertEqual(titles, ["Poems", "More poems"])
1053. 
1054.     def test_m2m_to_inheriting_model(self):
1055.         qs = AuthorWithAge.objects.prefetch_related('books_with_year')
1056.         with self.assertNumQueries(2):
1057.             lst = [[str(book) for book in author.books_with_year.all()] for author in qs]
1058.         qs = AuthorWithAge.objects.all()
1059.         lst2 = [[str(book) for book in author.books_with_year.all()] for author in qs]
1060.         self.assertEqual(lst, lst2)
1061. 
1062.         qs = BookWithYear.objects.prefetch_related('aged_authors')
1063.         with self.assertNumQueries(2):
1064.             lst = [[str(author) for author in book.aged_authors.all()] for book in qs]
1065.         qs = BookWithYear.objects.all()
1066.         lst2 = [[str(author) for author in book.aged_authors.all()] for book in qs]
1067.         self.assertEqual(lst, lst2)
1068. 
1069.     def test_parent_link_prefetch(self):
1070.         with self.assertNumQueries(2):
1071.             [a.author for a in AuthorWithAge.objects.prefetch_related('author')]
1072. 
1073.     @override_settings(DEBUG=True)
1074.     def test_child_link_prefetch(self):
1075.         with self.assertNumQueries(2):
1076.             authors = [a.authorwithage for a in Author.objects.prefetch_related('authorwithage')]
1077. 
1078.         # Regression for #18090: the prefetching query must include an IN clause.
1079.         # Note that on Oracle the table name is upper case in the generated SQL,
1080.         # thus the .lower() call.
1081.         self.assertIn('authorwithage', connection.queries[-1]['sql'].lower())
1082.         self.assertIn(' IN ', connection.queries[-1]['sql'])
1083. 
1084.         self.assertEqual(authors, [a.authorwithage for a in Author.objects.all()])
1085. 
1086. 
1087. class ForeignKeyToFieldTest(TestCase):
1088. 
1089.     @classmethod
1090.     def setUpTestData(cls):
1091.         cls.book = Book.objects.create(title='Poems')
1092.         cls.author1 = Author.objects.create(name='Jane', first_book=cls.book)
1093.         cls.author2 = Author.objects.create(name='Tom', first_book=cls.book)
1094.         cls.author3 = Author.objects.create(name='Robert', first_book=cls.book)
1095.         cls.author_address = AuthorAddress.objects.create(author=cls.author1, address='SomeStreet 1')
1096.         FavoriteAuthors.objects.create(author=cls.author1, likes_author=cls.author2)
1097.         FavoriteAuthors.objects.create(author=cls.author2, likes_author=cls.author3)
1098.         FavoriteAuthors.objects.create(author=cls.author3, likes_author=cls.author1)
1099. 
1100.     def test_foreignkey(self):
1101.         with self.assertNumQueries(2):
1102.             qs = Author.objects.prefetch_related('addresses')
1103.             addresses = [[str(address) for address in obj.addresses.all()]
1104.                          for obj in qs]
1105.         self.assertEqual(addresses, [[str(self.author_address)], [], []])
1106. 
1107.     def test_m2m(self):
1108.         with self.assertNumQueries(3):
1109.             qs = Author.objects.all().prefetch_related('favorite_authors', 'favors_me')
1110.             favorites = [(
1111.                 [str(i_like) for i_like in author.favorite_authors.all()],
1112.                 [str(likes_me) for likes_me in author.favors_me.all()]
1113.             ) for author in qs]
1114.             self.assertEqual(
1115.                 favorites,
1116.                 [
1117.                     ([str(self.author2)], [str(self.author3)]),
1118.                     ([str(self.author3)], [str(self.author1)]),
1119.                     ([str(self.author1)], [str(self.author2)])
1120.                 ]
1121.             )
1122. 
1123. 
1124. class LookupOrderingTest(TestCase):
1125.     """
1126.     Test cases that demonstrate that ordering of lookups is important, and
1127.     ensure it is preserved.
1128.     """
1129. 
1130.     def setUp(self):
1131.         self.person1 = Person.objects.create(name="Joe")
1132.         self.person2 = Person.objects.create(name="Mary")
1133. 
1134.         # Set main_room for each house before creating the next one for
1135.         # databases where supports_nullable_unique_constraints is False.
1136. 
1137.         self.house1 = House.objects.create(address="123 Main St")
1138.         self.room1_1 = Room.objects.create(name="Dining room", house=self.house1)
1139.         self.room1_2 = Room.objects.create(name="Lounge", house=self.house1)
1140.         self.room1_3 = Room.objects.create(name="Kitchen", house=self.house1)
1141.         self.house1.main_room = self.room1_1
1142.         self.house1.save()
1143.         self.person1.houses.add(self.house1)
1144. 
1145.         self.house2 = House.objects.create(address="45 Side St")
1146.         self.room2_1 = Room.objects.create(name="Dining room", house=self.house2)
1147.         self.room2_2 = Room.objects.create(name="Lounge", house=self.house2)
1148.         self.house2.main_room = self.room2_1
1149.         self.house2.save()
1150.         self.person1.houses.add(self.house2)
1151. 
1152.         self.house3 = House.objects.create(address="6 Downing St")
1153.         self.room3_1 = Room.objects.create(name="Dining room", house=self.house3)
1154.         self.room3_2 = Room.objects.create(name="Lounge", house=self.house3)
1155.         self.room3_3 = Room.objects.create(name="Kitchen", house=self.house3)
1156.         self.house3.main_room = self.room3_1
1157.         self.house3.save()
1158.         self.person2.houses.add(self.house3)
1159. 
1160.         self.house4 = House.objects.create(address="7 Regents St")
1161.         self.room4_1 = Room.objects.create(name="Dining room", house=self.house4)
1162.         self.room4_2 = Room.objects.create(name="Lounge", house=self.house4)
1163.         self.house4.main_room = self.room4_1
1164.         self.house4.save()
1165.         self.person2.houses.add(self.house4)
1166. 
1167.     def test_order(self):
1168.         with self.assertNumQueries(4):
1169.             # The following two queries must be done in the same order as written,
1170.             # otherwise 'primary_house' will cause non-prefetched lookups
1171.             qs = Person.objects.prefetch_related('houses__rooms',
1172.                                                  'primary_house__occupants')
1173.             [list(p.primary_house.occupants.all()) for p in qs]
1174. 
1175. 
1176. class NullableTest(TestCase):
1177. 
1178.     @classmethod
1179.     def setUpTestData(cls):
1180.         boss = Employee.objects.create(name="Peter")
1181.         Employee.objects.create(name="Joe", boss=boss)
1182.         Employee.objects.create(name="Angela", boss=boss)
1183. 
1184.     def test_traverse_nullable(self):
1185.         # Because we use select_related() for 'boss', it doesn't need to be
1186.         # prefetched, but we can still traverse it although it contains some nulls
1187.         with self.assertNumQueries(2):
1188.             qs = Employee.objects.select_related('boss').prefetch_related('boss__serfs')
1189.             co_serfs = [list(e.boss.serfs.all()) if e.boss is not None else []
1190.                         for e in qs]
1191. 
1192.         qs2 = Employee.objects.select_related('boss')
1193.         co_serfs2 = [list(e.boss.serfs.all()) if e.boss is not None else [] for e in qs2]
1194. 
1195.         self.assertEqual(co_serfs, co_serfs2)
1196. 
1197.     def test_prefetch_nullable(self):
1198.         # One for main employee, one for boss, one for serfs
1199.         with self.assertNumQueries(3):
1200.             qs = Employee.objects.prefetch_related('boss__serfs')
1201.             co_serfs = [list(e.boss.serfs.all()) if e.boss is not None else []
1202.                         for e in qs]
1203. 
1204.         qs2 = Employee.objects.all()
1205.         co_serfs2 = [list(e.boss.serfs.all()) if e.boss is not None else [] for e in qs2]
1206. 
1207.         self.assertEqual(co_serfs, co_serfs2)
1208. 
1209.     def test_in_bulk(self):
1210.         """
1211.         In-bulk does correctly prefetch objects by not using .iterator()
1212.         directly.
1213.         """
1214.         boss1 = Employee.objects.create(name="Peter")
1215.         boss2 = Employee.objects.create(name="Jack")
1216.         with self.assertNumQueries(2):
1217.             # Prefetch is done and it does not cause any errors.
1218.             bulk = Employee.objects.prefetch_related('serfs').in_bulk([boss1.pk, boss2.pk])
1219.             for b in bulk.values():
1220.                 list(b.serfs.all())
1221. 
1222. 
1223. class MultiDbTests(TestCase):
1224.     databases = {'default', 'other'}
1225. 
1226.     def test_using_is_honored_m2m(self):
1227.         B = Book.objects.using('other')
1228.         A = Author.objects.using('other')
1229.         book1 = B.create(title="Poems")
1230.         book2 = B.create(title="Jane Eyre")
1231.         book3 = B.create(title="Wuthering Heights")
1232.         book4 = B.create(title="Sense and Sensibility")
1233. 
1234.         author1 = A.create(name="Charlotte", first_book=book1)
1235.         author2 = A.create(name="Anne", first_book=book1)
1236.         author3 = A.create(name="Emily", first_book=book1)
1237.         author4 = A.create(name="Jane", first_book=book4)
1238. 
1239.         book1.authors.add(author1, author2, author3)
1240.         book2.authors.add(author1)
1241.         book3.authors.add(author3)
1242.         book4.authors.add(author4)
1243. 
1244.         # Forward
1245.         qs1 = B.prefetch_related('authors')
1246.         with self.assertNumQueries(2, using='other'):
1247.             books = "".join("%s (%s)\n" %
1248.                             (book.title, ", ".join(a.name for a in book.authors.all()))
1249.                             for book in qs1)
1250.         self.assertEqual(books,
1251.                          "Poems (Charlotte, Anne, Emily)\n"
1252.                          "Jane Eyre (Charlotte)\n"
1253.                          "Wuthering Heights (Emily)\n"
1254.                          "Sense and Sensibility (Jane)\n")
1255. 
1256.         # Reverse
1257.         qs2 = A.prefetch_related('books')
1258.         with self.assertNumQueries(2, using='other'):
1259.             authors = "".join("%s: %s\n" %
1260.                               (author.name, ", ".join(b.title for b in author.books.all()))
1261.                               for author in qs2)
1262.         self.assertEqual(authors,
1263.                          "Charlotte: Poems, Jane Eyre\n"
1264.                          "Anne: Poems\n"
1265.                          "Emily: Poems, Wuthering Heights\n"
1266.                          "Jane: Sense and Sensibility\n")
1267. 
1268.     def test_using_is_honored_fkey(self):
1269.         B = Book.objects.using('other')
1270.         A = Author.objects.using('other')
1271.         book1 = B.create(title="Poems")
1272.         book2 = B.create(title="Sense and Sensibility")
1273. 
1274.         A.create(name="Charlotte Bronte", first_book=book1)
1275.         A.create(name="Jane Austen", first_book=book2)
1276. 
1277.         # Forward
1278.         with self.assertNumQueries(2, using='other'):
1279.             books = ", ".join(a.first_book.title for a in A.prefetch_related('first_book'))
1280.         self.assertEqual("Poems, Sense and Sensibility", books)
1281. 
1282.         # Reverse
1283.         with self.assertNumQueries(2, using='other'):
1284.             books = "".join("%s (%s)\n" %
1285.                             (b.title, ", ".join(a.name for a in b.first_time_authors.all()))
1286.                             for b in B.prefetch_related('first_time_authors'))
1287.         self.assertEqual(books,
1288.                          "Poems (Charlotte Bronte)\n"
1289.                          "Sense and Sensibility (Jane Austen)\n")
1290. 
1291.     def test_using_is_honored_inheritance(self):
1292.         B = BookWithYear.objects.using('other')
1293.         A = AuthorWithAge.objects.using('other')
1294.         book1 = B.create(title="Poems", published_year=2010)
1295.         B.create(title="More poems", published_year=2011)
1296.         A.create(name='Jane', first_book=book1, age=50)
1297.         A.create(name='Tom', first_book=book1, age=49)
1298. 
1299.         # parent link
1300.         with self.assertNumQueries(2, using='other'):


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 07:29:29,867 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='This test method `test_in_bulk_non_unique_field` is directly relevant to the bug. It asserts that a `ValueError` is raised when `in_bulk()` is called with a `field_name` that is not unique. This is the core of the issue reported by the user, where a field with `UniqueConstraint` is incorrectly considered not unique. This test shows the existing validation that needs to be extended.', relative_path='tests/lookup/tests.py', start_line=192, end_line=196), ContextOutput(reasoning="The test `test_in_bulk_with_field` is highly relevant as it demonstrates the expected successful behavior of `in_bulk()` when using a unique `field_name` ('slug'). The user's goal is to have this behavior for fields with `UniqueConstraint`. This test serves as a reference for the correct functionality that the bug is preventing.", relative_path='tests/lookup/tests.py', start_line=182, end_line=191), ContextOutput(reasoning='This context provides the `setUpTestData` method, which creates the `Article` and `Author` objects used in the `in_bulk` tests in `LookupTests`. Specifically, it creates articles with slugs and authors, which are used in `test_in_bulk_with_field` and `test_in_bulk_non_unique_field`. This setup is essential context for understanding and running the relevant test cases.', relative_path='tests/lookup/tests.py', start_line=20, end_line=75), ContextOutput(reasoning='This context provides all necessary imports for the test cases in `tests/lookup/tests.py`, including `TestCase` and the models `Article` and `Author`. These imports are required to understand and execute the `in_bulk` tests.', relative_path='tests/lookup/tests.py', start_line=1, end_line=15), ContextOutput(reasoning="This test method `test_in_bulk` demonstrates the basic usage of `in_bulk()` with a list of primary keys. It covers various scenarios like empty lists, non-existent IDs, and different iterable types for the IDs. It provides foundational knowledge about the method's behavior and is a good starting point for understanding `in_bulk`.", relative_path='tests/lookup/tests.py', start_line=145, end_line=172)]
2025-10-06 07:29:29,867 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/lookup/tests.py', content='192.     def test_in_bulk_non_unique_field(self):\n193.         msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n194.         with self.assertRaisesMessage(ValueError, msg):\n195.             Article.objects.in_bulk([self.au1], field_name=\'author\')\n196. ', start_line_number=192, end_line_number=196), Context(relative_path='tests/lookup/tests.py', content="182.     def test_in_bulk_with_field(self):\n183.         self.assertEqual(\n184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),\n185.             {\n186.                 self.a1.slug: self.a1,\n187.                 self.a2.slug: self.a2,\n188.                 self.a3.slug: self.a3,\n189.             }\n190.         )\n191. ", start_line_number=182, end_line_number=191), Context(relative_path='tests/lookup/tests.py', content="20.     @classmethod\n21.     def setUpTestData(cls):\n22.         # Create a few Authors.\n23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')\n24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')\n25.         # Create a few Articles.\n26.         cls.a1 = Article.objects.create(\n27.             headline='Article 1',\n28.             pub_date=datetime(2005, 7, 26),\n29.             author=cls.au1,\n30.             slug='a1',\n31.         )\n32.         cls.a2 = Article.objects.create(\n33.             headline='Article 2',\n34.             pub_date=datetime(2005, 7, 27),\n35.             author=cls.au1,\n36.             slug='a2',\n37.         )\n38.         cls.a3 = Article.objects.create(\n39.             headline='Article 3',\n40.             pub_date=datetime(2005, 7, 27),\n41.             author=cls.au1,\n42.             slug='a3',\n43.         )\n44.         cls.a4 = Article.objects.create(\n45.             headline='Article 4',\n46.             pub_date=datetime(2005, 7, 28),\n47.             author=cls.au1,\n48.             slug='a4',\n49.         )\n50.         cls.a5 = Article.objects.create(\n51.             headline='Article 5',\n52.             pub_date=datetime(2005, 8, 1, 9, 0),\n53.             author=cls.au2,\n54.             slug='a5',\n55.         )\n56.         cls.a6 = Article.objects.create(\n57.             headline='Article 6',\n58.             pub_date=datetime(2005, 8, 1, 8, 0),\n59.             author=cls.au2,\n60.             slug='a6',\n61.         )\n62.         cls.a7 = Article.objects.create(\n63.             headline='Article 7',\n64.             pub_date=datetime(2005, 7, 27),\n65.             author=cls.au2,\n66.             slug='a7',\n67.         )\n68.         # Create a few Tags.\n69.         cls.t1 = Tag.objects.create(name='Tag 1')\n70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n71.         cls.t2 = Tag.objects.create(name='Tag 2')\n72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n73.         cls.t3 = Tag.objects.create(name='Tag 3')\n74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n75. ", start_line_number=20, end_line_number=75), Context(relative_path='tests/lookup/tests.py', content='1. import collections.abc\n2. from datetime import datetime\n3. from math import ceil\n4. from operator import attrgetter\n5. \n6. from django.core.exceptions import FieldError\n7. from django.db import connection\n8. from django.db.models import Exists, Max, OuterRef\n9. from django.db.models.functions import Substr\n10. from django.test import TestCase, skipUnlessDBFeature\n11. from django.utils.deprecation import RemovedInDjango40Warning\n12. \n13. from .models import (\n14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n15. )', start_line_number=1, end_line_number=15), Context(relative_path='tests/lookup/tests.py', content="145.     def test_in_bulk(self):\n146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n148.         self.assertEqual(arts[self.a1.id], self.a1)\n149.         self.assertEqual(arts[self.a2.id], self.a2)\n150.         self.assertEqual(\n151.             Article.objects.in_bulk(),\n152.             {\n153.                 self.a1.id: self.a1,\n154.                 self.a2.id: self.a2,\n155.                 self.a3.id: self.a3,\n156.                 self.a4.id: self.a4,\n157.                 self.a5.id: self.a5,\n158.                 self.a6.id: self.a6,\n159.                 self.a7.id: self.a7,\n160.             }\n161.         )\n162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n166.         self.assertEqual(Article.objects.in_bulk([1000]), {})\n167.         self.assertEqual(Article.objects.in_bulk([]), {})\n168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})\n170.         with self.assertRaises(TypeError):\n171.             Article.objects.in_bulk(headline__startswith='Blah')\n172. ", start_line_number=145, end_line_number=172)]
2025-10-06 07:29:29,868 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 07:29:29,868 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   ├── pt
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── %2F.txt
    |   |   ├── file.txt
    |   |   ├── long-line.txt
    |   |   └── subdir
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   └── debug
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/lookup/tests.py
Line number range: 192 - 196
Content:
192.     def test_in_bulk_non_unique_field(self):
193.         msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
194.         with self.assertRaisesMessage(ValueError, msg):
195.             Article.objects.in_bulk([self.au1], field_name='author')
196. 


File: tests/lookup/tests.py
Line number range: 182 - 191
Content:
182.     def test_in_bulk_with_field(self):
183.         self.assertEqual(
184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),
185.             {
186.                 self.a1.slug: self.a1,
187.                 self.a2.slug: self.a2,
188.                 self.a3.slug: self.a3,
189.             }
190.         )
191. 


File: tests/lookup/tests.py
Line number range: 20 - 75
Content:
20.     @classmethod
21.     def setUpTestData(cls):
22.         # Create a few Authors.
23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')
24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')
25.         # Create a few Articles.
26.         cls.a1 = Article.objects.create(
27.             headline='Article 1',
28.             pub_date=datetime(2005, 7, 26),
29.             author=cls.au1,
30.             slug='a1',
31.         )
32.         cls.a2 = Article.objects.create(
33.             headline='Article 2',
34.             pub_date=datetime(2005, 7, 27),
35.             author=cls.au1,
36.             slug='a2',
37.         )
38.         cls.a3 = Article.objects.create(
39.             headline='Article 3',
40.             pub_date=datetime(2005, 7, 27),
41.             author=cls.au1,
42.             slug='a3',
43.         )
44.         cls.a4 = Article.objects.create(
45.             headline='Article 4',
46.             pub_date=datetime(2005, 7, 28),
47.             author=cls.au1,
48.             slug='a4',
49.         )
50.         cls.a5 = Article.objects.create(
51.             headline='Article 5',
52.             pub_date=datetime(2005, 8, 1, 9, 0),
53.             author=cls.au2,
54.             slug='a5',
55.         )
56.         cls.a6 = Article.objects.create(
57.             headline='Article 6',
58.             pub_date=datetime(2005, 8, 1, 8, 0),
59.             author=cls.au2,
60.             slug='a6',
61.         )
62.         cls.a7 = Article.objects.create(
63.             headline='Article 7',
64.             pub_date=datetime(2005, 7, 27),
65.             author=cls.au2,
66.             slug='a7',
67.         )
68.         # Create a few Tags.
69.         cls.t1 = Tag.objects.create(name='Tag 1')
70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)
71.         cls.t2 = Tag.objects.create(name='Tag 2')
72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)
73.         cls.t3 = Tag.objects.create(name='Tag 3')
74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)
75. 


File: tests/lookup/tests.py
Line number range: 1 - 15
Content:
1. import collections.abc
2. from datetime import datetime
3. from math import ceil
4. from operator import attrgetter
5. 
6. from django.core.exceptions import FieldError
7. from django.db import connection
8. from django.db.models import Exists, Max, OuterRef
9. from django.db.models.functions import Substr
10. from django.test import TestCase, skipUnlessDBFeature
11. from django.utils.deprecation import RemovedInDjango40Warning
12. 
13. from .models import (
14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,
15. )


File: tests/lookup/tests.py
Line number range: 145 - 172
Content:
145.     def test_in_bulk(self):
146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.
147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])
148.         self.assertEqual(arts[self.a1.id], self.a1)
149.         self.assertEqual(arts[self.a2.id], self.a2)
150.         self.assertEqual(
151.             Article.objects.in_bulk(),
152.             {
153.                 self.a1.id: self.a1,
154.                 self.a2.id: self.a2,
155.                 self.a3.id: self.a3,
156.                 self.a4.id: self.a4,
157.                 self.a5.id: self.a5,
158.                 self.a6.id: self.a6,
159.                 self.a7.id: self.a7,
160.             }
161.         )
162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})
163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})
164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})
165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})
166.         self.assertEqual(Article.objects.in_bulk([1000]), {})
167.         self.assertEqual(Article.objects.in_bulk([]), {})
168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})
169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})
170.         with self.assertRaises(TypeError):
171.             Article.objects.in_bulk(headline__startswith='Blah')
172. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 07:29:51,163 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning="1. The user wants to find test cases related to a bug where `QuerySet.in_bulk()` fails to recognize fields that are unique due to a `UniqueConstraint` in the model's `Meta` class.\n2. The provided context includes tests for `in_bulk()` from `tests/lookup/tests.py`, but it's missing the corresponding model definitions from `tests/lookup/models.py`. This makes it impossible to know if the fields used in the tests are unique via `unique=True` or a `UniqueConstraint`.\n3. The core of the issue is `UniqueConstraint`. The current context lacks any tests specifically for `UniqueConstraint`. To find analogous tests, it's necessary to examine how `UniqueConstraint` is tested in other parts of the Django test suite.\n4. Files such as `tests/constraints/tests.py` and `tests/validation/test_unique.py` are likely to contain relevant examples of how `UniqueConstraint` is handled, which would be very similar to the functionality required to fix the bug." refined_query='Please provide the contents of the following files:\n1. `tests/lookup/models.py`\n2. `tests/constraints/models.py`\n3. `tests/constraints/tests.py`\n4. `tests/validation/test_unique.py`'
2025-10-06 07:29:55,371 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/validation/test_unique.py"}'}, '__gemini_function_call_thought_signatures__': {'15a6326f-0eac-491e-981a-15bebf6842d8': 'Ct0DAR/MhbbDKY7+hYuka6fOWHy7WmFnYgywiohGGwFQI7n3ZVbRlHt0J1jZ07i8U13kb+J3d+UMcH2vr+dJ6tccCxHsh7ZBoCXE+oO+4cdl+Crg1pohedTASVcv9sLSJfeyI265UVGLAQVfl16fqemfa9dUltKfO0wyNmK9TYAUlcD6g+Umzsq/x8SsHlyroqEHDDtqdMTV+nfmCnXsSe9To/kbisxABLBHp+x7yk8k3GsDm+2n9uIVUrjWhPJ5JLbNqxcn4ymZaRbuhOf2OjZPmIC753bFHwNuONwG+ue3sV3/mQq/8yLtVVYWTDXX4W+wWfxs2xwT8ER9njzzvLWfbQd+cUEikz0XJP/j04FIwPdMdInT/P3G9+EfbPvzzIQSjeDlbAcGH3zqbehGAAlfNE41xNQPgyTLTaU0qw6jEzx854NntSgiaIFbqmKz7IHrbeC/oOZOS+2OY29udS+0kP5jZt14Pt1jYLzcMou4DYZqryMMnHHrLwogq8z5HqOfIi32EEKrfE32OPX1buyvGsS2LCa1q/4WzGd33gyjduPUayxl+2AFMwyzHWzKaEsq/U6cW6DMKG7Q4hgMIKrJ8iq3baNs5MPI1UZEF3QjPM1nP0tAAZiUfaHYNHPc'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 55088, 'candidates_token_count': 86, 'total_token_count': 55307, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55088}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 86}], 'thoughts_token_count': 133, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09572609080824741, 'model_name': 'gemini-2.5-pro'} id='run--1756f17b-afef-4569-ba08-9c1dce19d6ac-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/lookup/models.py'}, 'id': '15a6326f-0eac-491e-981a-15bebf6842d8', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/constraints/models.py'}, 'id': '0b4ca927-2a2d-4802-82a5-3b249f0c5716', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/constraints/tests.py'}, 'id': 'ef2f4803-f0bb-4141-ac2f-850839d95bde', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/validation/test_unique.py'}, 'id': 'ff97433e-63b6-4c1e-b0e9-5209d5cd5ced', 'type': 'tool_call'}] usage_metadata={'input_tokens': 55088, 'output_tokens': 86, 'total_tokens': 55307, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 133}}
2025-10-06 07:30:31,347 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of the four files you requested. Here they are:\n\n`tests/lookup/models.py`:\n```python\n"""\nThe lookup API\n\nThis demonstrates features of the database API.\n"""\n\nfrom django.db import models\nfrom django.db.models.lookups import IsNull\n\n\nclass Alarm(models.Model):\n    desc = models.CharField(max_length=100)\n    time = models.TimeField()\n\n    def __str__(self):\n        return \'%s (%s)\' % (self.time, self.desc)\n\n\nclass Author(models.Model):\n    name = models.CharField(max_length=100)\n    alias = models.CharField(max_length=50, null=True, blank=True)\n\n    class Meta:\n        ordering = (\'name\',)\n\n\nclass Article(models.Model):\n    headline = models.CharField(max_length=100)\n    pub_date = models.DateTimeField()\n    author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)\n    slug = models.SlugField(unique=True, blank=True, null=True)\n\n    class Meta:\n        ordering = (\'-pub_date\', \'headline\')\n\n    def __str__(self):\n        return self.headline\n\n\nclass Tag(models.Model):\n    articles = models.ManyToManyField(Article)\n    name = models.CharField(max_length=100)\n\n    class Meta:\n        ordering = (\'name\',)\n\n\nclass NulledTextField(models.TextField):\n    def get_prep_value(self, value):\n        return None if value == \'\' else value\n\n\n@NulledTextField.register_lookup\nclass NulledTransform(models.Transform):\n    lookup_name = \'nulled\'\n    template = \'NULL\'\n\n\n@NulledTextField.register_lookup\nclass IsNullWithNoneAsRHS(IsNull):\n    lookup_name = \'isnull_none_rhs\'\n    can_use_none_as_rhs = True\n\n\nclass Season(models.Model):\n    year = models.PositiveSmallIntegerField()\n    gt = models.IntegerField(null=True, blank=True)\n    nulled_text_field = NulledTextField(null=True)\n\n    def __str__(self):\n        return str(self.year)\n\n\nclass Game(models.Model):\n    season = models.ForeignKey(Season, models.CASCADE, related_name=\'games\')\n    home = models.CharField(max_length=100)\n    away = models.CharField(max_length=100)\n\n    def __str__(self):\n        return "%s at %s" % (self.away, self.home)\n\n\nclass Player(models.Model):\n    name = models.CharField(max_length=100)\n    games = models.ManyToManyField(Game, related_name=\'players\')\n\n    def __str__(self):\n        return self.name\n\n\nclass Product(models.Model):\n    name = models.CharField(max_length=80)\n    qty_target = models.DecimalField(max_digits=6, decimal_places=2)\n\n\nclass Stock(models.Model):\n    product = models.ForeignKey(Product, models.CASCADE)\n    qty_available = models.DecimalField(max_digits=6, decimal_places=2)\n\n\nclass Freebie(models.Model):\n    gift_product = models.ForeignKey(Product, models.CASCADE)\n    stock_id = models.IntegerField(blank=True, null=True)\n\n    stock = models.ForeignObject(\n        Stock,\n        from_fields=[\'stock_id\', \'gift_product\'],\n        to_fields=[\'id\', \'product\'],\n        on_delete=models.CASCADE,\n    )\n```\n\n`tests/constraints/models.py`:\n```python\nfrom django.db import models\n\n\nclass Product(models.Model):\n    price = models.IntegerField(null=True)\n    discounted_price = models.IntegerField(null=True)\n\n    class Meta:\n        required_db_features = {\n            \'supports_table_check_constraints\',\n        }\n        constraints = [\n            models.CheckConstraint(\n                check=models.Q(price__gt=models.F(\'discounted_price\')),\n                name=\'price_gt_discounted_price\',\n            ),\n            models.CheckConstraint(\n                check=models.Q(price__gt=0),\n                name=\'%(app_label)s_%(class)s_price_gt_0\',\n            ),\n            models.CheckConstraint(\n                check=models.expressions.RawSQL(\n                    \'price < %s\', (1000,), output_field=models.BooleanField()\n                ),\n                name=\'%(app_label)s_price_lt_1000_raw\',\n            ),\n            models.CheckConstraint(\n                check=models.expressions.ExpressionWrapper(\n                    models.Q(price__gt=500) | models.Q(price__lt=500),\n                    output_field=models.BooleanField()\n                ),\n                name=\'%(app_label)s_price_neq_500_wrap\',\n            ),\n        ]\n\n\nclass UniqueConstraintProduct(models.Model):\n    name = models.CharField(max_length=255)\n    color = models.CharField(max_length=32, null=True)\n\n    class Meta:\n        constraints = [\n            models.UniqueConstraint(fields=[\'name\', \'color\'], name=\'name_color_uniq\'),\n        ]\n\n\nclass UniqueConstraintConditionProduct(models.Model):\n    name = models.CharField(max_length=255)\n    color = models.CharField(max_length=32, null=True)\n\n    class Meta:\n        required_db_features = {\'supports_partial_indexes\'}\n        constraints = [\n            models.UniqueConstraint(\n                fields=[\'name\'],\n                name=\'name_without_color_uniq\',\n                condition=models.Q(color__isnull=True),\n            ),\n        ]\n\n\nclass AbstractModel(models.Model):\n    age = models.IntegerField()\n\n    class Meta:\n        abstract = True\n        required_db_features = {\n            \'supports_table_check_constraints\',\n        }\n        constraints = [\n            models.CheckConstraint(\n                check=models.Q(age__gte=18),\n                name=\'%(app_label)s_%(class)s_adult\',\n            ),\n        ]\n\n\nclass ChildModel(AbstractModel):\n    pass\n```\n\n`tests/constraints/tests.py`:\n```python\nfrom unittest import mock\n\nfrom django.core.exceptions import ValidationError\nfrom django.db import IntegrityError, connection, models\nfrom django.db.models.constraints import BaseConstraint\nfrom django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n\nfrom .models import (\n    ChildModel, Product, UniqueConstraintConditionProduct,\n    UniqueConstraintProduct,\n)\n\n\ndef get_constraints(table):\n    with connection.cursor() as cursor:\n        return connection.introspection.get_constraints(cursor, table)\n\n\nclass BaseConstraintTests(SimpleTestCase):\n    def test_constraint_sql(self):\n        c = BaseConstraint(\'name\')\n        msg = \'This method must be implemented by a subclass.\'\n        with self.assertRaisesMessage(NotImplementedError, msg):\n            c.constraint_sql(None, None)\n\n    def test_create_sql(self):\n        c = BaseConstraint(\'name\')\n        msg = \'This method must be implemented by a subclass.\'\n        with self.assertRaisesMessage(NotImplementedError, msg):\n            c.create_sql(None, None)\n\n    def test_remove_sql(self):\n        c = BaseConstraint(\'name\')\n        msg = \'This method must be implemented by a subclass.\'\n        with self.assertRaisesMessage(NotImplementedError, msg):\n            c.remove_sql(None, None)\n\n\nclass CheckConstraintTests(TestCase):\n    def test_eq(self):\n        check1 = models.Q(price__gt=models.F(\'discounted_price\'))\n        check2 = models.Q(price__lt=models.F(\'discounted_price\'))\n        self.assertEqual(\n            models.CheckConstraint(check=check1, name=\'price\'),\n            models.CheckConstraint(check=check1, name=\'price\'),\n        )\n        self.assertEqual(models.CheckConstraint(check=check1, name=\'price\'), mock.ANY)\n        self.assertNotEqual(\n            models.CheckConstraint(check=check1, name=\'price\'),\n            models.CheckConstraint(check=check1, name=\'price2\'),\n        )\n        self.assertNotEqual(\n            models.CheckConstraint(check=check1, name=\'price\'),\n            models.CheckConstraint(check=check2, name=\'price\'),\n        )\n        self.assertNotEqual(models.CheckConstraint(check=check1, name=\'price\'), 1)\n\n    def test_repr(self):\n        check = models.Q(price__gt=models.F(\'discounted_price\'))\n        name = \'price_gt_discounted_price\'\n        constraint = models.CheckConstraint(check=check, name=name)\n        self.assertEqual(\n            repr(constraint),\n            "<CheckConstraint: check=\'{}\' name=\'{}\'>".format(check, name),\n        )\n\n    def test_invalid_check_types(self):\n        msg = (\n            \'CheckConstraint.check must be a Q instance or boolean expression.\'\n        )\n        with self.assertRaisesMessage(TypeError, msg):\n            models.CheckConstraint(check=models.F(\'discounted_price\'), name=\'check\')\n\n    def test_deconstruction(self):\n        check = models.Q(price__gt=models.F(\'discounted_price\'))\n        name = \'price_gt_discounted_price\'\n        constraint = models.CheckConstraint(check=check, name=name)\n        path, args, kwargs = constraint.deconstruct()\n        self.assertEqual(path, \'django.db.models.CheckConstraint\')\n        self.assertEqual(args, ())\n        self.assertEqual(kwargs, {\'check\': check, \'name\': name})\n\n    @skipUnlessDBFeature(\'supports_table_check_constraints\')\n    def test_database_constraint(self):\n        Product.objects.create(price=10, discounted_price=5)\n        with self.assertRaises(IntegrityError):\n            Product.objects.create(price=10, discounted_price=20)\n\n    @skipUnlessDBFeature(\'supports_table_check_constraints\')\n    def test_database_constraint_expression(self):\n        Product.objects.create(price=999, discounted_price=5)\n        with self.assertRaises(IntegrityError):\n            Product.objects.create(price=1000, discounted_price=5)\n\n    @skipUnlessDBFeature(\'supports_table_check_constraints\')\n    def test_database_constraint_expressionwrapper(self):\n        Product.objects.create(price=499, discounted_price=5)\n        with self.assertRaises(IntegrityError):\n            Product.objects.create(price=500, discounted_price=5)\n\n    @skipUnlessDBFeature(\'supports_table_check_constraints\', \'can_introspect_check_constraints\')\n    def test_name(self):\n        constraints = get_constraints(Product._meta.db_table)\n        for expected_name in (\n            \'price_gt_discounted_price\',\n            \'constraints_price_lt_1000_raw\',\n            \'constraints_price_neq_500_wrap\',\n            \'constraints_product_price_gt_0\',\n        ):\n            with self.subTest(expected_name):\n                self.assertIn(expected_name, constraints)\n\n    @skipUnlessDBFeature(\'supports_table_check_constraints\', \'can_introspect_check_constraints\')\n    def test_abstract_name(self):\n        constraints = get_constraints(ChildModel._meta.db_table)\n        self.assertIn(\'constraints_childmodel_adult\', constraints)\n\n\nclass UniqueConstraintTests(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([\n            UniqueConstraintProduct(name=\'p1\', color=\'red\'),\n            UniqueConstraintProduct(name=\'p2\'),\n        ])\n\n    def test_eq(self):\n        self.assertEqual(\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n        )\n        self.assertEqual(\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n            mock.ANY,\n        )\n        self.assertNotEqual(\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique2\'),\n        )\n        self.assertNotEqual(\n            models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n            models.UniqueConstraint(fields=[\'foo\', \'baz\'], name=\'unique\'),\n        )\n        self.assertNotEqual(models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'), 1)\n\n    def test_eq_with_condition(self):\n        self.assertEqual(\n            models.UniqueConstraint(\n                fields=[\'foo\', \'bar\'], name=\'unique\',\n                condition=models.Q(foo=models.F(\'bar\'))\n            ),\n            models.UniqueConstraint(\n                fields=[\'foo\', \'bar\'], name=\'unique\',\n                condition=models.Q(foo=models.F(\'bar\'))),\n        )\n        self.assertNotEqual(\n            models.UniqueConstraint(\n                fields=[\'foo\', \'bar\'],\n                name=\'unique\',\n                condition=models.Q(foo=models.F(\'bar\'))\n            ),\n            models.UniqueConstraint(\n                fields=[\'foo\', \'bar\'],\n                name=\'unique\',\n                condition=models.Q(foo=models.F(\'baz\'))\n            ),\n        )\n\n    def test_repr(self):\n        fields = [\'foo\', \'bar\']\n        name = \'unique_fields\'\n        constraint = models.UniqueConstraint(fields=fields, name=name)\n        self.assertEqual(\n            repr(constraint),\n            "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\'>",\n        )\n\n    def test_repr_with_condition(self):\n        constraint = models.UniqueConstraint(\n            fields=[\'foo\', \'bar\'],\n            name=\'unique_fields\',\n            condition=models.Q(foo=models.F(\'bar\')),\n        )\n        self.assertEqual(\n            repr(constraint),\n            "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\' "\n            "condition=(AND: (\'foo\', F(bar)))>",\n        )\n\n    def test_deconstruction(self):\n        fields = [\'foo\', \'bar\']\n        name = \'unique_fields\'\n        constraint = models.UniqueConstraint(fields=fields, name=name)\n        path, args, kwargs = constraint.deconstruct()\n        self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n        self.assertEqual(args, ())\n        self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name})\n\n    def test_deconstruction_with_condition(self):\n        fields = [\'foo\', \'bar\']\n        name = \'unique_fields\'\n        condition = models.Q(foo=models.F(\'bar\'))\n        constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)\n        path, args, kwargs = constraint.deconstruct()\n        self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n        self.assertEqual(args, ())\n        self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name, \'condition\': condition})\n\n    def test_database_constraint(self):\n        with self.assertRaises(IntegrityError):\n            UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)\n\n    @skipUnlessDBFeature(\'supports_partial_indexes\')\n    def test_database_constraint_with_condition(self):\n        UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n        UniqueConstraintConditionProduct.objects.create(name=\'p2\')\n        with self.assertRaises(IntegrityError):\n            UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n\n    def test_model_validation(self):\n        msg = \'Unique constraint product with this Name and Color already exists.\'\n        with self.assertRaisesMessage(ValidationError, msg):\n            UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()\n\n    @skipUnlessDBFeature(\'supports_partial_indexes\')\n    def test_model_validation_with_condition(self):\n        """Partial unique constraints are ignored by Model.validate_unique()."""\n        obj1 = UniqueConstraintConditionProduct.objects.create(name=\'p1\', color=\'red\')\n        obj2 = UniqueConstraintConditionProduct.objects.create(name=\'p2\')\n        UniqueConstraintConditionProduct(name=obj1.name, color=\'blue\').validate_unique()\n        UniqueConstraintConditionProduct(name=obj2.name).validate_unique()\n\n    def test_name(self):\n        constraints = get_constraints(UniqueConstraintProduct._meta.db_table)\n        expected_name = \'name_color_uniq\'\n        self.assertIn(expected_name, constraints)\n\n    def test_condition_must_be_q(self):\n        with self.assertRaisesMessage(ValueError, \'UniqueConstraint.condition must be a Q instance.\'):\n            models.UniqueConstraint(name=\'uniq\', fields=[\'name\'], condition=\'invalid\')\n```\n\n`tests/validation/test_unique.py`:\n```python\nimport datetime\nimport unittest\n\nfrom django.apps.registry import Apps\nfrom django.core.exceptions import ValidationError\nfrom django.db import models\nfrom django.test import TestCase\n\nfrom .models import (\n    CustomPKModel, FlexibleDatePost, ModelToValidate, Post, UniqueErrorsModel,\n    UniqueFieldsModel, UniqueForDateModel, UniqueTogetherModel,\n)\n\n\nclass GetUniqueCheckTests(unittest.TestCase):\n    def test_unique_fields_get_collected(self):\n        m = UniqueFieldsModel()\n        self.assertEqual(\n            ([(UniqueFieldsModel, (\'id\',)),\n              (UniqueFieldsModel, (\'unique_charfield\',)),\n              (UniqueFieldsModel, (\'unique_integerfield\',))],\n             []),\n            m._get_unique_checks()\n        )\n\n    def test_unique_together_gets_picked_up_and_converted_to_tuple(self):\n        m = UniqueTogetherModel()\n        self.assertEqual(\n            ([(UniqueTogetherModel, (\'ifield\', \'cfield\')),\n              (UniqueTogetherModel, (\'ifield\', \'efield\')),\n              (UniqueTogetherModel, (\'id\',))],\n             []),\n            m._get_unique_checks()\n        )\n\n    def test_unique_together_normalization(self):\n        """\n        Test the Meta.unique_together normalization with different sorts of\n        objects.\n        """\n        data = {\n            \'2-tuple\': ((\'foo\', \'bar\'), ((\'foo\', \'bar\'),)),\n            \'list\': ([\'foo\', \'bar\'], ((\'foo\', \'bar\'),)),\n            \'already normalized\': (((\'foo\', \'bar\'), (\'bar\', \'baz\')),\n                                   ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n            \'set\': ({(\'foo\', \'bar\'), (\'bar\', \'baz\')},  # Ref #21469\n                    ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n        }\n\n        for unique_together, normalized in data.values():\n            class M(models.Model):\n                foo = models.IntegerField()\n                bar = models.IntegerField()\n                baz = models.IntegerField()\n\n                Meta = type(\'Meta\', (), {\n                    \'unique_together\': unique_together,\n                    \'apps\': Apps()\n                })\n\n            checks, _ = M()._get_unique_checks()\n            for t in normalized:\n                check = (M, t)\n                self.assertIn(check, checks)\n\n    def test_primary_key_is_considered_unique(self):\n        m = CustomPKModel()\n        self.assertEqual(([(CustomPKModel, (\'my_pk_field\',))], []), m._get_unique_checks())\n\n    def test_unique_for_date_gets_picked_up(self):\n        m = UniqueForDateModel()\n        self.assertEqual((\n            [(UniqueForDateModel, (\'id\',))],\n            [(UniqueForDateModel, \'date\', \'count\', \'start_date\'),\n             (UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n             (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n        ), m._get_unique_checks()\n        )\n\n    def test_unique_for_date_exclusion(self):\n        m = UniqueForDateModel()\n        self.assertEqual((\n            [(UniqueForDateModel, (\'id\',))],\n            [(UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n             (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n        ), m._get_unique_checks(exclude=\'start_date\')\n        )\n\n\nclass PerformUniqueChecksTest(TestCase):\n    def test_primary_key_unique_check_not_performed_when_adding_and_pk_not_specified(self):\n        # Regression test for #12560\n        with self.assertNumQueries(0):\n            mtv = ModelToValidate(number=10, name=\'Some Name\')\n            setattr(mtv, \'_adding\', True)\n            mtv.full_clean()\n\n    def test_primary_key_unique_check_performed_when_adding_and_pk_specified(self):\n        # Regression test for #12560\n        with self.assertNumQueries(1):\n            mtv = ModelToValidate(number=10, name=\'Some Name\', id=123)\n            setattr(mtv, \'_adding\', True)\n            mtv.full_clean()\n\n    def test_primary_key_unique_check_not_performed_when_not_adding(self):\n        # Regression test for #12132\n        with self.assertNumQueries(0):\n            mtv = ModelToValidate(number=10, name=\'Some Name\')\n            mtv.full_clean()\n\n    def test_unique_for_date(self):\n        Post.objects.create(\n            title="Django 1.0 is released", slug="Django 1.0",\n            subtitle="Finally", posted=datetime.date(2008, 9, 3),\n        )\n        p = Post(title="Django 1.0 is released", posted=datetime.date(2008, 9, 3))\n        with self.assertRaises(ValidationError) as cm:\n            p.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'title\': [\'Title must be unique for Posted date.\']})\n\n        # Should work without errors\n        p = Post(title="Work on Django 1.1 begins", posted=datetime.date(2008, 9, 3))\n        p.full_clean()\n\n        # Should work without errors\n        p = Post(title="Django 1.0 is released", posted=datetime.datetime(2008, 9, 4))\n        p.full_clean()\n\n        p = Post(slug="Django 1.0", posted=datetime.datetime(2008, 1, 1))\n        with self.assertRaises(ValidationError) as cm:\n            p.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'slug\': [\'Slug must be unique for Posted year.\']})\n\n        p = Post(subtitle="Finally", posted=datetime.datetime(2008, 9, 30))\n        with self.assertRaises(ValidationError) as cm:\n            p.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'subtitle\': [\'Subtitle must be unique for Posted month.\']})\n\n        p = Post(title="Django 1.0 is released")\n        with self.assertRaises(ValidationError) as cm:\n            p.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'posted\': [\'This field cannot be null.\']})\n\n    def test_unique_for_date_with_nullable_date(self):\n        """\n        unique_for_date/year/month checks shouldn\'t trigger when the\n        associated DateField is None.\n        """\n        FlexibleDatePost.objects.create(\n            title="Django 1.0 is released", slug="Django 1.0",\n            subtitle="Finally", posted=datetime.date(2008, 9, 3),\n        )\n        p = FlexibleDatePost(title="Django 1.0 is released")\n        p.full_clean()\n\n        p = FlexibleDatePost(slug="Django 1.0")\n        p.full_clean()\n\n        p = FlexibleDatePost(subtitle="Finally")\n        p.full_clean()\n\n    def test_unique_errors(self):\n        UniqueErrorsModel.objects.create(name=\'Some Name\', no=10)\n        m = UniqueErrorsModel(name=\'Some Name\', no=11)\n        with self.assertRaises(ValidationError) as cm:\n            m.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'name\': [\'Custom unique name message.\']})\n\n        m = UniqueErrorsModel(name=\'Some Other Name\', no=10)\n        with self.assertRaises(ValidationError) as cm:\n            m.full_clean()\n        self.assertEqual(cm.exception.message_dict, {\'no\': [\'Custom unique number message.\']})\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 339, 'end_index': 792, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 699, 'end_index': 1949, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 2281, 'end_index': 2594, 'uri': 'https://github.com/JersonVnzl/Python', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 2543, 'end_index': 3080, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 3136, 'end_index': 4461, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 4361, 'end_index': 5076, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 5070, 'end_index': 5483, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 5581, 'end_index': 5849, 'uri': 'https://github.com/django/django', 'license_': 'BeOpen', 'title': ''}, {'start_index': 5889, 'end_index': 6356, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 6346, 'end_index': 7685, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 7547, 'end_index': 7842, 'uri': 'https://github.com/django/django', 'license_': 'BeOpen', 'title': ''}, {'start_index': 7847, 'end_index': 8179, 'uri': 'https://github.com/django/django', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 8017, 'end_index': 9098, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 9015, 'end_index': 12254, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 12247, 'end_index': 12970, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 12962, 'end_index': 13881, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 13874, 'end_index': 15621, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}, {'start_index': 15764, 'end_index': 16148, 'uri': 'https://github.com/zc-andy/DbMgrSystem', 'title': '', 'license_': ''}, {'start_index': 16036, 'end_index': 16476, 'uri': 'https://github.com/django-nonrel/django-nonrel', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 16390, 'end_index': 16786, 'uri': 'https://github.com/django-nonrel/django-nonrel', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 16582, 'end_index': 18035, 'uri': 'https://github.com/zc-andy/DbMgrSystem', 'title': '', 'license_': ''}, {'start_index': 17876, 'end_index': 18827, 'uri': 'https://github.com/django-nonrel/django-nonrel', 'license_': 'BSD-3-Clause', 'title': ''}, {'start_index': 18846, 'end_index': 19737, 'uri': 'https://github.com/AppScale/gts', 'title': '', 'license_': ''}, {'start_index': 19814, 'end_index': 20331, 'uri': 'https://github.com/AppScale/gts', 'title': '', 'license_': ''}, {'start_index': 20178, 'end_index': 20545, 'uri': 'https://groups.google.com/g/django-updates/c/eN5txLtlFoc', 'title': '', 'license_': ''}, {'start_index': 20385, 'end_index': 21299, 'uri': 'https://github.com/AppScale/gts', 'title': '', 'license_': ''}, {'start_index': 21152, 'end_index': 21567, 'uri': 'https://github.com/zc-andy/DbMgrSystem', 'title': '', 'license_': ''}, {'start_index': 21495, 'end_index': 22003, 'uri': 'https://github.com/zc-andy/DbMgrSystem', 'title': '', 'license_': ''}, {'start_index': 21862, 'end_index': 22383, 'uri': 'https://github.com/AppScale/gts', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 64239, 'candidates_token_count': 6037, 'total_token_count': 70321, 'prompt_tokens_details': [{'modality': 1, 'token_count': 64370}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 6037}], 'thoughts_token_count': 45, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0013792891958128327, 'model_name': 'gemini-2.5-pro'} id='run--ba2c7874-23e4-49ce-b4f2-052f5d17c86b-0' usage_metadata={'input_tokens': 64239, 'output_tokens': 6037, 'total_tokens': 70321, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 45}}
2025-10-06 07:30:31,348 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 07:30:31,348 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the contents of the following files:
1. `tests/lookup/models.py`
2. `tests/constraints/models.py`
3. `tests/constraints/tests.py`
4. `tests/validation/test_unique.py`
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/lookup/models.py
Line number range: 1 - 110
Content:
1. """
2. The lookup API
3. 
4. This demonstrates features of the database API.
5. """
6. 
7. from django.db import models
8. from django.db.models.lookups import IsNull
9. 
10. 
11. class Alarm(models.Model):
12.     desc = models.CharField(max_length=100)
13.     time = models.TimeField()
14. 
15.     def __str__(self):
16.         return '%s (%s)' % (self.time, self.desc)
17. 
18. 
19. class Author(models.Model):
20.     name = models.CharField(max_length=100)
21.     alias = models.CharField(max_length=50, null=True, blank=True)
22. 
23.     class Meta:
24.         ordering = ('name',)
25. 
26. 
27. class Article(models.Model):
28.     headline = models.CharField(max_length=100)
29.     pub_date = models.DateTimeField()
30.     author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)
31.     slug = models.SlugField(unique=True, blank=True, null=True)
32. 
33.     class Meta:
34.         ordering = ('-pub_date', 'headline')
35. 
36.     def __str__(self):
37.         return self.headline
38. 
39. 
40. class Tag(models.Model):
41.     articles = models.ManyToManyField(Article)
42.     name = models.CharField(max_length=100)
43. 
44.     class Meta:
45.         ordering = ('name',)
46. 
47. 
48. class NulledTextField(models.TextField):
49.     def get_prep_value(self, value):
50.         return None if value == '' else value
51. 
52. 
53. @NulledTextField.register_lookup
54. class NulledTransform(models.Transform):
55.     lookup_name = 'nulled'
56.     template = 'NULL'
57. 
58. 
59. @NulledTextField.register_lookup
60. class IsNullWithNoneAsRHS(IsNull):
61.     lookup_name = 'isnull_none_rhs'
62.     can_use_none_as_rhs = True
63. 
64. 
65. class Season(models.Model):
66.     year = models.PositiveSmallIntegerField()
67.     gt = models.IntegerField(null=True, blank=True)
68.     nulled_text_field = NulledTextField(null=True)
69. 
70.     def __str__(self):
71.         return str(self.year)
72. 
73. 
74. class Game(models.Model):
75.     season = models.ForeignKey(Season, models.CASCADE, related_name='games')
76.     home = models.CharField(max_length=100)
77.     away = models.CharField(max_length=100)
78. 
79.     def __str__(self):
80.         return "%s at %s" % (self.away, self.home)
81. 
82. 
83. class Player(models.Model):
84.     name = models.CharField(max_length=100)
85.     games = models.ManyToManyField(Game, related_name='players')
86. 
87.     def __str__(self):
88.         return self.name
89. 
90. 
91. class Product(models.Model):
92.     name = models.CharField(max_length=80)
93.     qty_target = models.DecimalField(max_digits=6, decimal_places=2)
94. 
95. 
96. class Stock(models.Model):
97.     product = models.ForeignKey(Product, models.CASCADE)
98.     qty_available = models.DecimalField(max_digits=6, decimal_places=2)
99. 
100. 
101. class Freebie(models.Model):
102.     gift_product = models.ForeignKey(Product, models.CASCADE)
103.     stock_id = models.IntegerField(blank=True, null=True)
104. 
105.     stock = models.ForeignObject(
106.         Stock,
107.         from_fields=['stock_id', 'gift_product'],
108.         to_fields=['id', 'product'],
109.         on_delete=models.CASCADE,
110.     )

File: tests/constraints/models.py
Line number range: 1 - 79
Content:
1. from django.db import models
2. 
3. 
4. class Product(models.Model):
5.     price = models.IntegerField(null=True)
6.     discounted_price = models.IntegerField(null=True)
7. 
8.     class Meta:
9.         required_db_features = {
10.             'supports_table_check_constraints',
11.         }
12.         constraints = [
13.             models.CheckConstraint(
14.                 check=models.Q(price__gt=models.F('discounted_price')),
15.                 name='price_gt_discounted_price',
16.             ),
17.             models.CheckConstraint(
18.                 check=models.Q(price__gt=0),
19.                 name='%(app_label)s_%(class)s_price_gt_0',
20.             ),
21.             models.CheckConstraint(
22.                 check=models.expressions.RawSQL(
23.                     'price < %s', (1000,), output_field=models.BooleanField()
24.                 ),
25.                 name='%(app_label)s_price_lt_1000_raw',
26.             ),
27.             models.CheckConstraint(
28.                 check=models.expressions.ExpressionWrapper(
29.                     models.Q(price__gt=500) | models.Q(price__lt=500),
30.                     output_field=models.BooleanField()
31.                 ),
32.                 name='%(app_label)s_price_neq_500_wrap',
33.             ),
34.         ]
35. 
36. 
37. class UniqueConstraintProduct(models.Model):
38.     name = models.CharField(max_length=255)
39.     color = models.CharField(max_length=32, null=True)
40. 
41.     class Meta:
42.         constraints = [
43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),
44.         ]
45. 
46. 
47. class UniqueConstraintConditionProduct(models.Model):
48.     name = models.CharField(max_length=255)
49.     color = models.CharField(max_length=32, null=True)
50. 
51.     class Meta:
52.         required_db_features = {'supports_partial_indexes'}
53.         constraints = [
54.             models.UniqueConstraint(
55.                 fields=['name'],
56.                 name='name_without_color_uniq',
57.                 condition=models.Q(color__isnull=True),
58.             ),
59.         ]
60. 
61. 
62. class AbstractModel(models.Model):
63.     age = models.IntegerField()
64. 
65.     class Meta:
66.         abstract = True
67.         required_db_features = {
68.             'supports_table_check_constraints',
69.         }
70.         constraints = [
71.             models.CheckConstraint(
72.                 check=models.Q(age__gte=18),
73.                 name='%(app_label)s_%(class)s_adult',
74.             ),
75.         ]
76. 
77. 
78. class ChildModel(AbstractModel):
79.     pass

File: tests/constraints/tests.py
Line number range: 1 - 240
Content:
1. from unittest import mock
2. 
3. from django.core.exceptions import ValidationError
4. from django.db import IntegrityError, connection, models
5. from django.db.models.constraints import BaseConstraint
6. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
7. 
8. from .models import (
9.     ChildModel, Product, UniqueConstraintConditionProduct,
10.     UniqueConstraintProduct,
11. )
12. 
13. 
14. def get_constraints(table):
15.     with connection.cursor() as cursor:
16.         return connection.introspection.get_constraints(cursor, table)
17. 
18. 
19. class BaseConstraintTests(SimpleTestCase):
20.     def test_constraint_sql(self):
21.         c = BaseConstraint('name')
22.         msg = 'This method must be implemented by a subclass.'
23.         with self.assertRaisesMessage(NotImplementedError, msg):
24.             c.constraint_sql(None, None)
25. 
26.     def test_create_sql(self):
27.         c = BaseConstraint('name')
28.         msg = 'This method must be implemented by a subclass.'
29.         with self.assertRaisesMessage(NotImplementedError, msg):
30.             c.create_sql(None, None)
31. 
32.     def test_remove_sql(self):
33.         c = BaseConstraint('name')
34.         msg = 'This method must be implemented by a subclass.'
35.         with self.assertRaisesMessage(NotImplementedError, msg):
36.             c.remove_sql(None, None)
37. 
38. 
39. class CheckConstraintTests(TestCase):
40.     def test_eq(self):
41.         check1 = models.Q(price__gt=models.F('discounted_price'))
42.         check2 = models.Q(price__lt=models.F('discounted_price'))
43.         self.assertEqual(
44.             models.CheckConstraint(check=check1, name='price'),
45.             models.CheckConstraint(check=check1, name='price'),
46.         )
47.         self.assertEqual(models.CheckConstraint(check=check1, name='price'), mock.ANY)
48.         self.assertNotEqual(
49.             models.CheckConstraint(check=check1, name='price'),
50.             models.CheckConstraint(check=check1, name='price2'),
51.         )
52.         self.assertNotEqual(
53.             models.CheckConstraint(check=check1, name='price'),
54.             models.CheckConstraint(check=check2, name='price'),
55.         )
56.         self.assertNotEqual(models.CheckConstraint(check=check1, name='price'), 1)
57. 
58.     def test_repr(self):
59.         check = models.Q(price__gt=models.F('discounted_price'))
60.         name = 'price_gt_discounted_price'
61.         constraint = models.CheckConstraint(check=check, name=name)
62.         self.assertEqual(
63.             repr(constraint),
64.             "<CheckConstraint: check='{}' name='{}'>".format(check, name),
65.         )
66. 
67.     def test_invalid_check_types(self):
68.         msg = (
69.             'CheckConstraint.check must be a Q instance or boolean expression.'
70.         )
71.         with self.assertRaisesMessage(TypeError, msg):
72.             models.CheckConstraint(check=models.F('discounted_price'), name='check')
73. 
74.     def test_deconstruction(self):
75.         check = models.Q(price__gt=models.F('discounted_price'))
76.         name = 'price_gt_discounted_price'
77.         constraint = models.CheckConstraint(check=check, name=name)
78.         path, args, kwargs = constraint.deconstruct()
79.         self.assertEqual(path, 'django.db.models.CheckConstraint')
80.         self.assertEqual(args, ())
81.         self.assertEqual(kwargs, {'check': check, 'name': name})
82. 
83.     @skipUnlessDBFeature('supports_table_check_constraints')
84.     def test_database_constraint(self):
85.         Product.objects.create(price=10, discounted_price=5)
86.         with self.assertRaises(IntegrityError):
87.             Product.objects.create(price=10, discounted_price=20)
88. 
89.     @skipUnlessDBFeature('supports_table_check_constraints')
90.     def test_database_constraint_expression(self):
91.         Product.objects.create(price=999, discounted_price=5)
92.         with self.assertRaises(IntegrityError):
93.             Product.objects.create(price=1000, discounted_price=5)
94. 
95.     @skipUnlessDBFeature('supports_table_check_constraints')
96.     def test_database_constraint_expressionwrapper(self):
97.         Product.objects.create(price=499, discounted_price=5)
98.         with self.assertRaises(IntegrityError):
99.             Product.objects.create(price=500, discounted_price=5)
100. 
101.     @skipUnlessDBFeature('supports_table_check_constraints', 'can_introspect_check_constraints')
102.     def test_name(self):
103.         constraints = get_constraints(Product._meta.db_table)
104.         for expected_name in (
105.             'price_gt_discounted_price',
106.             'constraints_price_lt_1000_raw',
107.             'constraints_price_neq_500_wrap',
108.             'constraints_product_price_gt_0',
109.         ):
110.             with self.subTest(expected_name):
111.                 self.assertIn(expected_name, constraints)
112. 
113.     @skipUnlessDBFeature('supports_table_check_constraints', 'can_introspect_check_constraints')
114.     def test_abstract_name(self):
115.         constraints = get_constraints(ChildModel._meta.db_table)
116.         self.assertIn('constraints_childmodel_adult', constraints)
117. 
118. 
119. class UniqueConstraintTests(TestCase):
120.     @classmethod
121.     def setUpTestData(cls):
122.         cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([
123.             UniqueConstraintProduct(name='p1', color='red'),
124.             UniqueConstraintProduct(name='p2'),
125.         ])
126. 
127.     def test_eq(self):
128.         self.assertEqual(
129.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
130.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
131.         )
132.         self.assertEqual(
133.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
134.             mock.ANY,
135.         )
136.         self.assertNotEqual(
137.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
138.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique2'),
139.         )
140.         self.assertNotEqual(
141.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
142.             models.UniqueConstraint(fields=['foo', 'baz'], name='unique'),
143.         )
144.         self.assertNotEqual(models.UniqueConstraint(fields=['foo', 'bar'], name='unique'), 1)
145. 
146.     def test_eq_with_condition(self):
147.         self.assertEqual(
148.             models.UniqueConstraint(
149.                 fields=['foo', 'bar'], name='unique',
150.                 condition=models.Q(foo=models.F('bar'))
151.             ),
152.             models.UniqueConstraint(
153.                 fields=['foo', 'bar'], name='unique',
154.                 condition=models.Q(foo=models.F('bar'))),
155.         )
156.         self.assertNotEqual(
157.             models.UniqueConstraint(
158.                 fields=['foo', 'bar'],
159.                 name='unique',
160.                 condition=models.Q(foo=models.F('bar'))
161.             ),
162.             models.UniqueConstraint(
163.                 fields=['foo', 'bar'],
164.                 name='unique',
165.                 condition=models.Q(foo=models.F('baz'))
166.             ),
167.         )
168. 
169.     def test_repr(self):
170.         fields = ['foo', 'bar']
171.         name = 'unique_fields'
172.         constraint = models.UniqueConstraint(fields=fields, name=name)
173.         self.assertEqual(
174.             repr(constraint),
175.             "<UniqueConstraint: fields=('foo', 'bar') name='unique_fields'>",
176.         )
177. 
178.     def test_repr_with_condition(self):
179.         constraint = models.UniqueConstraint(
180.             fields=['foo', 'bar'],
181.             name='unique_fields',
182.             condition=models.Q(foo=models.F('bar')),
183.         )
184.         self.assertEqual(
185.             repr(constraint),
186.             "<UniqueConstraint: fields=('foo', 'bar') name='unique_fields' "
187.             "condition=(AND: ('foo', F(bar)))>",
188.         )
189. 
190.     def test_deconstruction(self):
191.         fields = ['foo', 'bar']
192.         name = 'unique_fields'
193.         constraint = models.UniqueConstraint(fields=fields, name=name)
194.         path, args, kwargs = constraint.deconstruct()
195.         self.assertEqual(path, 'django.db.models.UniqueConstraint')
196.         self.assertEqual(args, ())
197.         self.assertEqual(kwargs, {'fields': tuple(fields), 'name': name})
198. 
199.     def test_deconstruction_with_condition(self):
200.         fields = ['foo', 'bar']
201.         name = 'unique_fields'
202.         condition = models.Q(foo=models.F('bar'))
203.         constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)
204.         path, args, kwargs = constraint.deconstruct()
205.         self.assertEqual(path, 'django.db.models.UniqueConstraint')
206.         self.assertEqual(args, ())
207.         self.assertEqual(kwargs, {'fields': tuple(fields), 'name': name, 'condition': condition})
208. 
209.     def test_database_constraint(self):
210.         with self.assertRaises(IntegrityError):
211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)
212. 
213.     @skipUnlessDBFeature('supports_partial_indexes')
214.     def test_database_constraint_with_condition(self):
215.         UniqueConstraintConditionProduct.objects.create(name='p1')
216.         UniqueConstraintConditionProduct.objects.create(name='p2')
217.         with self.assertRaises(IntegrityError):
218.             UniqueConstraintConditionProduct.objects.create(name='p1')
219. 
220.     def test_model_validation(self):
221.         msg = 'Unique constraint product with this Name and Color already exists.'
222.         with self.assertRaisesMessage(ValidationError, msg):
223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()
224. 
225.     @skipUnlessDBFeature('supports_partial_indexes')
226.     def test_model_validation_with_condition(self):
227.         """Partial unique constraints are ignored by Model.validate_unique()."""
228.         obj1 = UniqueConstraintConditionProduct.objects.create(name='p1', color='red')
229.         obj2 = UniqueConstraintConditionProduct.objects.create(name='p2')
230.         UniqueConstraintConditionProduct(name=obj1.name, color='blue').validate_unique()
231.         UniqueConstraintConditionProduct(name=obj2.name).validate_unique()
232. 
233.     def test_name(self):
234.         constraints = get_constraints(UniqueConstraintProduct._meta.db_table)
235.         expected_name = 'name_color_uniq'
236.         self.assertIn(expected_name, constraints)
237. 
238.     def test_condition_must_be_q(self):
239.         with self.assertRaisesMessage(ValueError, 'UniqueConstraint.condition must be a Q instance.'):
240.             models.UniqueConstraint(name='uniq', fields=['name'], condition='invalid')

File: tests/validation/test_unique.py
Line number range: 1 - 172
Content:
1. import datetime
2. import unittest
3. 
4. from django.apps.registry import Apps
5. from django.core.exceptions import ValidationError
6. from django.db import models
7. from django.test import TestCase
8. 
9. from .models import (
10.     CustomPKModel, FlexibleDatePost, ModelToValidate, Post, UniqueErrorsModel,
11.     UniqueFieldsModel, UniqueForDateModel, UniqueTogetherModel,
12. )
13. 
14. 
15. class GetUniqueCheckTests(unittest.TestCase):
16.     def test_unique_fields_get_collected(self):
17.         m = UniqueFieldsModel()
18.         self.assertEqual(
19.             ([(UniqueFieldsModel, ('id',)),
20.               (UniqueFieldsModel, ('unique_charfield',)),
21.               (UniqueFieldsModel, ('unique_integerfield',))],
22.              []),
23.             m._get_unique_checks()
24.         )
25. 
26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):
27.         m = UniqueTogetherModel()
28.         self.assertEqual(
29.             ([(UniqueTogetherModel, ('ifield', 'cfield')),
30.               (UniqueTogetherModel, ('ifield', 'efield')),
31.               (UniqueTogetherModel, ('id',))],
32.              []),
33.             m._get_unique_checks()
34.         )
35. 
36.     def test_unique_together_normalization(self):
37.         """
38.         Test the Meta.unique_together normalization with different sorts of
39.         objects.
40.         """
41.         data = {
42.             '2-tuple': (('foo', 'bar'), (('foo', 'bar'),)),
43.             'list': (['foo', 'bar'], (('foo', 'bar'),)),
44.             'already normalized': ((('foo', 'bar'), ('bar', 'baz')),
45.                                    (('foo', 'bar'), ('bar', 'baz'))),
46.             'set': ({('foo', 'bar'), ('bar', 'baz')},  # Ref #21469
47.                     (('foo', 'bar'), ('bar', 'baz'))),
48.         }
49. 
50.         for unique_together, normalized in data.values():
51.             class M(models.Model):
52.                 foo = models.IntegerField()
53.                 bar = models.IntegerField()
54.                 baz = models.IntegerField()
55. 
56.                 Meta = type('Meta', (), {
57.                     'unique_together': unique_together,
58.                     'apps': Apps()
59.                 })
60. 
61.             checks, _ = M()._get_unique_checks()
62.             for t in normalized:
63.                 check = (M, t)
64.                 self.assertIn(check, checks)
65. 
66.     def test_primary_key_is_considered_unique(self):
67.         m = CustomPKModel()
68.         self.assertEqual(([(CustomPKModel, ('my_pk_field',))], []), m._get_unique_checks())
69. 
70.     def test_unique_for_date_gets_picked_up(self):
71.         m = UniqueForDateModel()
72.         self.assertEqual((
73.             [(UniqueForDateModel, ('id',))],
74.             [(UniqueForDateModel, 'date', 'count', 'start_date'),
75.              (UniqueForDateModel, 'year', 'count', 'end_date'),
76.              (UniqueForDateModel, 'month', 'order', 'end_date')]
77.         ), m._get_unique_checks()
78.         )
79. 
80.     def test_unique_for_date_exclusion(self):
81.         m = UniqueForDateModel()
82.         self.assertEqual((
83.             [(UniqueForDateModel, ('id',))],
84.             [(UniqueForDateModel, 'year', 'count', 'end_date'),
85.              (UniqueForDateModel, 'month', 'order', 'end_date')]
86.         ), m._get_unique_checks(exclude='start_date')
87.         )
88. 
89. 
90. class PerformUniqueChecksTest(TestCase):
91.     def test_primary_key_unique_check_not_performed_when_adding_and_pk_not_specified(self):
92.         # Regression test for #12560
93.         with self.assertNumQueries(0):
94.             mtv = ModelToValidate(number=10, name='Some Name')
95.             setattr(mtv, '_adding', True)
96.             mtv.full_clean()
97. 
98.     def test_primary_key_unique_check_performed_when_adding_and_pk_specified(self):
99.         # Regression test for #12560
100.         with self.assertNumQueries(1):
101.             mtv = ModelToValidate(number=10, name='Some Name', id=123)
102.             setattr(mtv, '_adding', True)
103.             mtv.full_clean()
104. 
105.     def test_primary_key_unique_check_not_performed_when_not_adding(self):
106.         # Regression test for #12132
107.         with self.assertNumQueries(0):
108.             mtv = ModelToValidate(number=10, name='Some Name')
109.             mtv.full_clean()
110. 
111.     def test_unique_for_date(self):
112.         Post.objects.create(
113.             title="Django 1.0 is released", slug="Django 1.0",
114.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
115.         )
116.         p = Post(title="Django 1.0 is released", posted=datetime.date(2008, 9, 3))
117.         with self.assertRaises(ValidationError) as cm:
118.             p.full_clean()
119.         self.assertEqual(cm.exception.message_dict, {'title': ['Title must be unique for Posted date.']})
120. 
121.         # Should work without errors
122.         p = Post(title="Work on Django 1.1 begins", posted=datetime.date(2008, 9, 3))
123.         p.full_clean()
124. 
125.         # Should work without errors
126.         p = Post(title="Django 1.0 is released", posted=datetime.datetime(2008, 9, 4))
127.         p.full_clean()
128. 
129.         p = Post(slug="Django 1.0", posted=datetime.datetime(2008, 1, 1))
130.         with self.assertRaises(ValidationError) as cm:
131.             p.full_clean()
132.         self.assertEqual(cm.exception.message_dict, {'slug': ['Slug must be unique for Posted year.']})
133. 
134.         p = Post(subtitle="Finally", posted=datetime.datetime(2008, 9, 30))
135.         with self.assertRaises(ValidationError) as cm:
136.             p.full_clean()
137.         self.assertEqual(cm.exception.message_dict, {'subtitle': ['Subtitle must be unique for Posted month.']})
138. 
139.         p = Post(title="Django 1.0 is released")
140.         with self.assertRaises(ValidationError) as cm:
141.             p.full_clean()
142.         self.assertEqual(cm.exception.message_dict, {'posted': ['This field cannot be null.']})
143. 
144.     def test_unique_for_date_with_nullable_date(self):
145.         """
146.         unique_for_date/year/month checks shouldn't trigger when the
147.         associated DateField is None.
148.         """
149.         FlexibleDatePost.objects.create(
150.             title="Django 1.0 is released", slug="Django 1.0",
151.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
152.         )
153.         p = FlexibleDatePost(title="Django 1.0 is released")
154.         p.full_clean()
155. 
156.         p = FlexibleDatePost(slug="Django 1.0")
157.         p.full_clean()
158. 
159.         p = FlexibleDatePost(subtitle="Finally")
160.         p.full_clean()
161. 
162.     def test_unique_errors(self):
163.         UniqueErrorsModel.objects.create(name='Some Name', no=10)
164.         m = UniqueErrorsModel(name='Some Name', no=11)
165.         with self.assertRaises(ValidationError) as cm:
166.             m.full_clean()
167.         self.assertEqual(cm.exception.message_dict, {'name': ['Custom unique name message.']})
168. 
169.         m = UniqueErrorsModel(name='Some Other Name', no=10)
170.         with self.assertRaises(ValidationError) as cm:
171.             m.full_clean()
172.         self.assertEqual(cm.exception.message_dict, {'no': ['Custom unique number message.']})


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 07:31:13,371 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user is reporting a bug where `in_bulk()` fails for fields that are unique due to a `UniqueConstraint`.\n   - The query asks for relevant test cases demonstrating similar functionality.\n2. Extended relevance:\n   - This context defines the `UniqueConstraintProduct` model, which uses `models.UniqueConstraint` to enforce uniqueness on the `name` and `color` fields.\n   - This model structure is directly analogous to the `Article` model described in the bug report, making it a perfect example of the scenario in question.', relative_path='tests/constraints/models.py', start_line=37, end_line=45), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to see tests related to `UniqueConstraint`.\n   - This test verifies that the `UniqueConstraint` is enforced at the database level, raising an `IntegrityError` upon violation.\n2. Extended relevance:\n   - This test confirms that the constraint is active and functional at the database layer.\n   - It's relevant because it establishes the ground truth that the field is indeed unique, which is the premise of the bug report where `in_bulk()` fails to recognize this uniqueness.", relative_path='tests/constraints/tests.py', start_line=209, end_line=212), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is interested in how `UniqueConstraint` is handled within Django.\n   - This test case demonstrates that Django's model validation layer (`validate_unique()`) correctly identifies and enforces the `UniqueConstraint`.\n2. Extended relevance:\n   - This shows that some parts of Django are aware of `UniqueConstraint` for uniqueness checks, which contrasts with the reported failure in `in_bulk()`.\n   - It provides a key piece of context, highlighting an inconsistency in how uniqueness is treated across different parts of the ORM.", relative_path='tests/constraints/tests.py', start_line=220, end_line=224), ContextOutput(reasoning="1. Query requirement analysis:\n   - The bug is about `in_bulk()` not recognizing a field's uniqueness from a `UniqueConstraint`.\n   - This test inspects the internal `_get_unique_checks()` method, which is responsible for discovering a model's unique fields.\n2. Extended relevance:\n   - This test shows the expected output for fields marked with the traditional `unique=True`.\n   - It's highly relevant because the bug likely stems from `_get_unique_checks()` (or a similar mechanism) failing to include fields from `UniqueConstraint`. This test shows the behavior that needs to be extended to fix the bug.", relative_path='tests/validation/test_unique.py', start_line=15, end_line=24), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants to understand how different types of uniqueness are tested in Django.\n   - This test shows how `_get_unique_checks()` processes `unique_together`, which is the predecessor to `UniqueConstraint`.\n2. Extended relevance:\n   - `UniqueConstraint` is the modern replacement for `unique_together`. Understanding how the older mechanism is introspected provides a blueprint for how the newer `UniqueConstraint` should be handled.\n   - This test is relevant as it demonstrates how the framework handles composite uniqueness definitions in `Meta`, which is directly related to the problem of recognizing uniqueness from `UniqueConstraint`.', relative_path='tests/validation/test_unique.py', start_line=26, end_line=34)]
2025-10-06 07:31:13,372 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/lookup/tests.py', content='192.     def test_in_bulk_non_unique_field(self):\n193.         msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n194.         with self.assertRaisesMessage(ValueError, msg):\n195.             Article.objects.in_bulk([self.au1], field_name=\'author\')\n196. ', start_line_number=192, end_line_number=196), Context(relative_path='tests/lookup/tests.py', content="182.     def test_in_bulk_with_field(self):\n183.         self.assertEqual(\n184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),\n185.             {\n186.                 self.a1.slug: self.a1,\n187.                 self.a2.slug: self.a2,\n188.                 self.a3.slug: self.a3,\n189.             }\n190.         )\n191. ", start_line_number=182, end_line_number=191), Context(relative_path='tests/lookup/tests.py', content="20.     @classmethod\n21.     def setUpTestData(cls):\n22.         # Create a few Authors.\n23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')\n24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')\n25.         # Create a few Articles.\n26.         cls.a1 = Article.objects.create(\n27.             headline='Article 1',\n28.             pub_date=datetime(2005, 7, 26),\n29.             author=cls.au1,\n30.             slug='a1',\n31.         )\n32.         cls.a2 = Article.objects.create(\n33.             headline='Article 2',\n34.             pub_date=datetime(2005, 7, 27),\n35.             author=cls.au1,\n36.             slug='a2',\n37.         )\n38.         cls.a3 = Article.objects.create(\n39.             headline='Article 3',\n40.             pub_date=datetime(2005, 7, 27),\n41.             author=cls.au1,\n42.             slug='a3',\n43.         )\n44.         cls.a4 = Article.objects.create(\n45.             headline='Article 4',\n46.             pub_date=datetime(2005, 7, 28),\n47.             author=cls.au1,\n48.             slug='a4',\n49.         )\n50.         cls.a5 = Article.objects.create(\n51.             headline='Article 5',\n52.             pub_date=datetime(2005, 8, 1, 9, 0),\n53.             author=cls.au2,\n54.             slug='a5',\n55.         )\n56.         cls.a6 = Article.objects.create(\n57.             headline='Article 6',\n58.             pub_date=datetime(2005, 8, 1, 8, 0),\n59.             author=cls.au2,\n60.             slug='a6',\n61.         )\n62.         cls.a7 = Article.objects.create(\n63.             headline='Article 7',\n64.             pub_date=datetime(2005, 7, 27),\n65.             author=cls.au2,\n66.             slug='a7',\n67.         )\n68.         # Create a few Tags.\n69.         cls.t1 = Tag.objects.create(name='Tag 1')\n70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n71.         cls.t2 = Tag.objects.create(name='Tag 2')\n72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n73.         cls.t3 = Tag.objects.create(name='Tag 3')\n74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n75. ", start_line_number=20, end_line_number=75), Context(relative_path='tests/lookup/tests.py', content='1. import collections.abc\n2. from datetime import datetime\n3. from math import ceil\n4. from operator import attrgetter\n5. \n6. from django.core.exceptions import FieldError\n7. from django.db import connection\n8. from django.db.models import Exists, Max, OuterRef\n9. from django.db.models.functions import Substr\n10. from django.test import TestCase, skipUnlessDBFeature\n11. from django.utils.deprecation import RemovedInDjango40Warning\n12. \n13. from .models import (\n14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n15. )', start_line_number=1, end_line_number=15), Context(relative_path='tests/lookup/tests.py', content="145.     def test_in_bulk(self):\n146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n148.         self.assertEqual(arts[self.a1.id], self.a1)\n149.         self.assertEqual(arts[self.a2.id], self.a2)\n150.         self.assertEqual(\n151.             Article.objects.in_bulk(),\n152.             {\n153.                 self.a1.id: self.a1,\n154.                 self.a2.id: self.a2,\n155.                 self.a3.id: self.a3,\n156.                 self.a4.id: self.a4,\n157.                 self.a5.id: self.a5,\n158.                 self.a6.id: self.a6,\n159.                 self.a7.id: self.a7,\n160.             }\n161.         )\n162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n166.         self.assertEqual(Article.objects.in_bulk([1000]), {})\n167.         self.assertEqual(Article.objects.in_bulk([]), {})\n168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})\n170.         with self.assertRaises(TypeError):\n171.             Article.objects.in_bulk(headline__startswith='Blah')\n172. ", start_line_number=145, end_line_number=172), Context(relative_path='tests/constraints/models.py', content="37. class UniqueConstraintProduct(models.Model):\n38.     name = models.CharField(max_length=255)\n39.     color = models.CharField(max_length=32, null=True)\n40. \n41.     class Meta:\n42.         constraints = [\n43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),\n44.         ]\n45. ", start_line_number=37, end_line_number=45), Context(relative_path='tests/constraints/tests.py', content='209.     def test_database_constraint(self):\n210.         with self.assertRaises(IntegrityError):\n211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)\n212. ', start_line_number=209, end_line_number=212), Context(relative_path='tests/constraints/tests.py', content="220.     def test_model_validation(self):\n221.         msg = 'Unique constraint product with this Name and Color already exists.'\n222.         with self.assertRaisesMessage(ValidationError, msg):\n223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()\n224. ", start_line_number=220, end_line_number=224), Context(relative_path='tests/validation/test_unique.py', content="15. class GetUniqueCheckTests(unittest.TestCase):\n16.     def test_unique_fields_get_collected(self):\n17.         m = UniqueFieldsModel()\n18.         self.assertEqual(\n19.             ([(UniqueFieldsModel, ('id',)),\n20.               (UniqueFieldsModel, ('unique_charfield',)),\n21.               (UniqueFieldsModel, ('unique_integerfield',))],\n22.              []),\n23.             m._get_unique_checks()\n24.         )", start_line_number=15, end_line_number=24), Context(relative_path='tests/validation/test_unique.py', content="26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):\n27.         m = UniqueTogetherModel()\n28.         self.assertEqual(\n29.             ([(UniqueTogetherModel, ('ifield', 'cfield')),\n30.               (UniqueTogetherModel, ('ifield', 'efield')),\n31.               (UniqueTogetherModel, ('id',))],\n32.              []),\n33.             m._get_unique_checks()\n34.         )", start_line_number=26, end_line_number=34)]
2025-10-06 07:31:13,372 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 07:31:13,373 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   ├── pt
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── %2F.txt
    |   |   ├── file.txt
    |   |   ├── long-line.txt
    |   |   └── subdir
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   └── debug
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/lookup/tests.py
Line number range: 192 - 196
Content:
192.     def test_in_bulk_non_unique_field(self):
193.         msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
194.         with self.assertRaisesMessage(ValueError, msg):
195.             Article.objects.in_bulk([self.au1], field_name='author')
196. 


File: tests/lookup/tests.py
Line number range: 182 - 191
Content:
182.     def test_in_bulk_with_field(self):
183.         self.assertEqual(
184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),
185.             {
186.                 self.a1.slug: self.a1,
187.                 self.a2.slug: self.a2,
188.                 self.a3.slug: self.a3,
189.             }
190.         )
191. 


File: tests/lookup/tests.py
Line number range: 20 - 75
Content:
20.     @classmethod
21.     def setUpTestData(cls):
22.         # Create a few Authors.
23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')
24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')
25.         # Create a few Articles.
26.         cls.a1 = Article.objects.create(
27.             headline='Article 1',
28.             pub_date=datetime(2005, 7, 26),
29.             author=cls.au1,
30.             slug='a1',
31.         )
32.         cls.a2 = Article.objects.create(
33.             headline='Article 2',
34.             pub_date=datetime(2005, 7, 27),
35.             author=cls.au1,
36.             slug='a2',
37.         )
38.         cls.a3 = Article.objects.create(
39.             headline='Article 3',
40.             pub_date=datetime(2005, 7, 27),
41.             author=cls.au1,
42.             slug='a3',
43.         )
44.         cls.a4 = Article.objects.create(
45.             headline='Article 4',
46.             pub_date=datetime(2005, 7, 28),
47.             author=cls.au1,
48.             slug='a4',
49.         )
50.         cls.a5 = Article.objects.create(
51.             headline='Article 5',
52.             pub_date=datetime(2005, 8, 1, 9, 0),
53.             author=cls.au2,
54.             slug='a5',
55.         )
56.         cls.a6 = Article.objects.create(
57.             headline='Article 6',
58.             pub_date=datetime(2005, 8, 1, 8, 0),
59.             author=cls.au2,
60.             slug='a6',
61.         )
62.         cls.a7 = Article.objects.create(
63.             headline='Article 7',
64.             pub_date=datetime(2005, 7, 27),
65.             author=cls.au2,
66.             slug='a7',
67.         )
68.         # Create a few Tags.
69.         cls.t1 = Tag.objects.create(name='Tag 1')
70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)
71.         cls.t2 = Tag.objects.create(name='Tag 2')
72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)
73.         cls.t3 = Tag.objects.create(name='Tag 3')
74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)
75. 


File: tests/lookup/tests.py
Line number range: 1 - 15
Content:
1. import collections.abc
2. from datetime import datetime
3. from math import ceil
4. from operator import attrgetter
5. 
6. from django.core.exceptions import FieldError
7. from django.db import connection
8. from django.db.models import Exists, Max, OuterRef
9. from django.db.models.functions import Substr
10. from django.test import TestCase, skipUnlessDBFeature
11. from django.utils.deprecation import RemovedInDjango40Warning
12. 
13. from .models import (
14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,
15. )


File: tests/lookup/tests.py
Line number range: 145 - 172
Content:
145.     def test_in_bulk(self):
146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.
147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])
148.         self.assertEqual(arts[self.a1.id], self.a1)
149.         self.assertEqual(arts[self.a2.id], self.a2)
150.         self.assertEqual(
151.             Article.objects.in_bulk(),
152.             {
153.                 self.a1.id: self.a1,
154.                 self.a2.id: self.a2,
155.                 self.a3.id: self.a3,
156.                 self.a4.id: self.a4,
157.                 self.a5.id: self.a5,
158.                 self.a6.id: self.a6,
159.                 self.a7.id: self.a7,
160.             }
161.         )
162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})
163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})
164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})
165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})
166.         self.assertEqual(Article.objects.in_bulk([1000]), {})
167.         self.assertEqual(Article.objects.in_bulk([]), {})
168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})
169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})
170.         with self.assertRaises(TypeError):
171.             Article.objects.in_bulk(headline__startswith='Blah')
172. 


File: tests/constraints/models.py
Line number range: 37 - 45
Content:
37. class UniqueConstraintProduct(models.Model):
38.     name = models.CharField(max_length=255)
39.     color = models.CharField(max_length=32, null=True)
40. 
41.     class Meta:
42.         constraints = [
43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),
44.         ]
45. 


File: tests/constraints/tests.py
Line number range: 209 - 212
Content:
209.     def test_database_constraint(self):
210.         with self.assertRaises(IntegrityError):
211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)
212. 


File: tests/constraints/tests.py
Line number range: 220 - 224
Content:
220.     def test_model_validation(self):
221.         msg = 'Unique constraint product with this Name and Color already exists.'
222.         with self.assertRaisesMessage(ValidationError, msg):
223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()
224. 


File: tests/validation/test_unique.py
Line number range: 15 - 24
Content:
15. class GetUniqueCheckTests(unittest.TestCase):
16.     def test_unique_fields_get_collected(self):
17.         m = UniqueFieldsModel()
18.         self.assertEqual(
19.             ([(UniqueFieldsModel, ('id',)),
20.               (UniqueFieldsModel, ('unique_charfield',)),
21.               (UniqueFieldsModel, ('unique_integerfield',))],
22.              []),
23.             m._get_unique_checks()
24.         )


File: tests/validation/test_unique.py
Line number range: 26 - 34
Content:
26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):
27.         m = UniqueTogetherModel()
28.         self.assertEqual(
29.             ([(UniqueTogetherModel, ('ifield', 'cfield')),
30.               (UniqueTogetherModel, ('ifield', 'efield')),
31.               (UniqueTogetherModel, ('id',))],
32.              []),
33.             m._get_unique_checks()
34.         )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 07:31:49,163 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user wants to find 5 complete and self-contained test cases related to a bug where `QuerySet.in_bulk()` fails to recognize fields with `UniqueConstraint` as unique.\n\n2. The provided context contains several highly relevant snippets that test `in_bulk()` and `UniqueConstraint` from `tests/lookup/tests.py`, `tests/constraints/tests.py`, and `tests/validation/test_unique.py`.\n\n3. However, these snippets are not complete. To provide self-contained test cases, I need the full context of each file, including imports, test class definitions, `setUpTestData` methods, and the model definitions used in the tests.\n\n4. For instance, the tests in `tests/constraints/tests.py` reference `self.p1`, which is likely defined in a setup method. The model definitions for `Article` in `tests/lookup/tests.py` and `UniqueFieldsModel` in `tests/validation/test_unique.py` are also missing from the context.\n\n5. Therefore, to assemble 5 complete test cases as requested, I require the full source code of the relevant test and model files.' refined_query='Please provide the full source code for the following files: `tests/lookup/tests.py`, `tests/lookup/models.py`, `tests/constraints/tests.py`, `tests/constraints/models.py`, `tests/validation/test_unique.py`, and `tests/validation/models.py`.'
2025-10-06 07:31:54,403 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full source code for the six files you requested. The contents of `tests/lookup/tests.py`, `tests/lookup/models.py`, `tests/constraints/tests.py`, `tests/constraints/models.py`, `tests/validation/test_unique.py`, and `tests/validation/models.py` are now available for your review.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/validation/models.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 55097, 'candidates_token_count': 209, 'total_token_count': 55438, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55097}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 209}], 'thoughts_token_count': 132, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.03293114529842395, 'model_name': 'gemini-2.5-pro'} id='run--f6211b03-b899-4798-af8b-3d8ec043de3f-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/lookup/tests.py'}, 'id': '50f878a5-e319-4f5f-a21a-18e91005386e', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/lookup/models.py'}, 'id': '4344dc55-098d-4947-b9f5-60cbeaca82c8', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/constraints/tests.py'}, 'id': '1a5abb6b-4fc3-4d8f-a359-f1e8b9e5a8bb', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/constraints/models.py'}, 'id': 'd355f0ba-0af4-4cbe-a19f-c67cb6252af8', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/validation/test_unique.py'}, 'id': 'e0b4cf48-048c-4d24-afd1-f2be9aad3992', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/validation/models.py'}, 'id': 'b1a6cfd5-0027-4db7-8a9a-9893c439801d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 55097, 'output_tokens': 209, 'total_tokens': 55438, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 132}}
2025-10-06 07:31:58,486 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full source code for the six files you requested. The contents of `tests/lookup/tests.py`, `tests/lookup/models.py`, `tests/constraints/tests.py`, `tests/constraints/models.py`, `tests/validation/test_unique.py`, and `tests/validation/models.py` are now available for your review.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 75998, 'candidates_token_count': 81, 'total_token_count': 76257, 'prompt_tokens_details': [{'modality': 1, 'token_count': 75998}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 81}], 'thoughts_token_count': 178, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2043956944971909, 'model_name': 'gemini-2.5-pro'} id='run--66cbb6fa-0d93-42a3-bebc-9188577f67c4-0' usage_metadata={'input_tokens': 75998, 'output_tokens': 81, 'total_tokens': 76257, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 178}}
2025-10-06 07:31:58,487 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 07:31:58,487 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
Allow QuerySet.in_bulk() for fields with total UniqueConstraints.

Issue description: 
Description
	
If a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.
Consider:
class Article(models.Model):
	slug = models.CharField(max_length=255)
	
	class Meta:
		constraints = [
			models.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")
		]
>>> Article.objects.in_bulk(field_name="slug")
Traceback (most recent call last):
 File "/usr/local/lib/python3.8/code.py", line 90, in runcode
	exec(code, self.locals)
 File "<console>", line 1, in <module>
 File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
	return getattr(self.get_queryset(), name)(*args, **kwargs)
 File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk
	raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.
It should be pretty simple to fix this and I have a patch if accepted.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full source code for the following files: `tests/lookup/tests.py`, `tests/lookup/models.py`, `tests/constraints/tests.py`, `tests/constraints/models.py`, `tests/validation/test_unique.py`, and `tests/validation/models.py`.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/lookup/tests.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. from datetime import datetime
3. from math import ceil
4. from operator import attrgetter
5. 
6. from django.core.exceptions import FieldError
7. from django.db import connection
8. from django.db.models import Exists, Max, OuterRef
9. from django.db.models.functions import Substr
10. from django.test import TestCase, skipUnlessDBFeature
11. from django.utils.deprecation import RemovedInDjango40Warning
12. 
13. from .models import (
14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,
15. )
16. 
17. 
18. class LookupTests(TestCase):
19. 
20.     @classmethod
21.     def setUpTestData(cls):
22.         # Create a few Authors.
23.         cls.au1 = Author.objects.create(name='Author 1', alias='a1')
24.         cls.au2 = Author.objects.create(name='Author 2', alias='a2')
25.         # Create a few Articles.
26.         cls.a1 = Article.objects.create(
27.             headline='Article 1',
28.             pub_date=datetime(2005, 7, 26),
29.             author=cls.au1,
30.             slug='a1',
31.         )
32.         cls.a2 = Article.objects.create(
33.             headline='Article 2',
34.             pub_date=datetime(2005, 7, 27),
35.             author=cls.au1,
36.             slug='a2',
37.         )
38.         cls.a3 = Article.objects.create(
39.             headline='Article 3',
40.             pub_date=datetime(2005, 7, 27),
41.             author=cls.au1,
42.             slug='a3',
43.         )
44.         cls.a4 = Article.objects.create(
45.             headline='Article 4',
46.             pub_date=datetime(2005, 7, 28),
47.             author=cls.au1,
48.             slug='a4',
49.         )
50.         cls.a5 = Article.objects.create(
51.             headline='Article 5',
52.             pub_date=datetime(2005, 8, 1, 9, 0),
53.             author=cls.au2,
54.             slug='a5',
55.         )
56.         cls.a6 = Article.objects.create(
57.             headline='Article 6',
58.             pub_date=datetime(2005, 8, 1, 8, 0),
59.             author=cls.au2,
60.             slug='a6',
61.         )
62.         cls.a7 = Article.objects.create(
63.             headline='Article 7',
64.             pub_date=datetime(2005, 7, 27),
65.             author=cls.au2,
66.             slug='a7',
67.         )
68.         # Create a few Tags.
69.         cls.t1 = Tag.objects.create(name='Tag 1')
70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)
71.         cls.t2 = Tag.objects.create(name='Tag 2')
72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)
73.         cls.t3 = Tag.objects.create(name='Tag 3')
74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)
75. 
76.     def test_exists(self):
77.         # We can use .exists() to check that there are some
78.         self.assertTrue(Article.objects.exists())
79.         for a in Article.objects.all():
80.             a.delete()
81.         # There should be none now!
82.         self.assertFalse(Article.objects.exists())
83. 
84.     def test_lookup_int_as_str(self):
85.         # Integer value can be queried using string
86.         self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),
87.                                  ['<Article: Article 1>'])
88. 
89.     @skipUnlessDBFeature('supports_date_lookup_using_string')
90.     def test_lookup_date_as_str(self):
91.         # A date lookup can be performed using a string search
92.         self.assertQuerysetEqual(
93.             Article.objects.filter(pub_date__startswith='2005'),
94.             [
95.                 '<Article: Article 5>',
96.                 '<Article: Article 6>',
97.                 '<Article: Article 4>',
98.                 '<Article: Article 2>',
99.                 '<Article: Article 3>',
100.                 '<Article: Article 7>',
101.                 '<Article: Article 1>',
102.             ]
103.         )
104. 
105.     def test_iterator(self):
106.         # Each QuerySet gets iterator(), which is a generator that "lazily"
107.         # returns results using database-level iteration.
108.         self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)
109. 
110.         self.assertQuerysetEqual(
111.             Article.objects.iterator(),
112.             [
113.                 'Article 5',
114.                 'Article 6',
115.                 'Article 4',
116.                 'Article 2',
117.                 'Article 3',
118.                 'Article 7',
119.                 'Article 1',
120.             ],
121.             transform=attrgetter('headline')
122.         )
123.         # iterator() can be used on any QuerySet.
124.         self.assertQuerysetEqual(
125.             Article.objects.filter(headline__endswith='4').iterator(),
126.             ['Article 4'],
127.             transform=attrgetter('headline'))
128. 
129.     def test_count(self):
130.         # count() returns the number of objects matching search criteria.
131.         self.assertEqual(Article.objects.count(), 7)
132.         self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)
133.         self.assertEqual(Article.objects.filter(headline__startswith='Blah blah').count(), 0)
134. 
135.         # count() should respect sliced query sets.
136.         articles = Article.objects.all()
137.         self.assertEqual(articles.count(), 7)
138.         self.assertEqual(articles[:4].count(), 4)
139.         self.assertEqual(articles[1:100].count(), 6)
140.         self.assertEqual(articles[10:100].count(), 0)
141. 
142.         # Date and date/time lookups can also be done with strings.
143.         self.assertEqual(Article.objects.filter(pub_date__exact='2005-07-27 00:00:00').count(), 3)
144. 
145.     def test_in_bulk(self):
146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.
147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])
148.         self.assertEqual(arts[self.a1.id], self.a1)
149.         self.assertEqual(arts[self.a2.id], self.a2)
150.         self.assertEqual(
151.             Article.objects.in_bulk(),
152.             {
153.                 self.a1.id: self.a1,
154.                 self.a2.id: self.a2,
155.                 self.a3.id: self.a3,
156.                 self.a4.id: self.a4,
157.                 self.a5.id: self.a5,
158.                 self.a6.id: self.a6,
159.                 self.a7.id: self.a7,
160.             }
161.         )
162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})
163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})
164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})
165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})
166.         self.assertEqual(Article.objects.in_bulk([1000]), {})
167.         self.assertEqual(Article.objects.in_bulk([]), {})
168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})
169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})
170.         with self.assertRaises(TypeError):
171.             Article.objects.in_bulk(headline__startswith='Blah')
172. 
173.     def test_in_bulk_lots_of_ids(self):
174.         test_range = 2000
175.         max_query_params = connection.features.max_query_params
176.         expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1
177.         Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])
178.         authors = {author.pk: author for author in Author.objects.all()}
179.         with self.assertNumQueries(expected_num_queries):
180.             self.assertEqual(Author.objects.in_bulk(authors), authors)
181. 
182.     def test_in_bulk_with_field(self):
183.         self.assertEqual(
184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name='slug'),
185.             {
186.                 self.a1.slug: self.a1,
187.                 self.a2.slug: self.a2,
188.                 self.a3.slug: self.a3,
189.             }
190.         )
191. 
192.     def test_in_bulk_non_unique_field(self):
193.         msg = "in_bulk()'s field_name must be a unique field but 'author' isn't."
194.         with self.assertRaisesMessage(ValueError, msg):
195.             Article.objects.in_bulk([self.au1], field_name='author')
196. 
197.     def test_values(self):
198.         # values() returns a list of dictionaries instead of object instances --
199.         # and you can specify which fields you want to retrieve.
200.         self.assertSequenceEqual(
201.             Article.objects.values('headline'),
202.             [
203.                 {'headline': 'Article 5'},
204.                 {'headline': 'Article 6'},
205.                 {'headline': 'Article 4'},
206.                 {'headline': 'Article 2'},
207.                 {'headline': 'Article 3'},
208.                 {'headline': 'Article 7'},
209.                 {'headline': 'Article 1'},
210.             ],
211.         )
212.         self.assertSequenceEqual(
213.             Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).values('id'),
214.             [{'id': self.a2.id}, {'id': self.a3.id}, {'id': self.a7.id}],
215.         )
216.         self.assertSequenceEqual(
217.             Article.objects.values('id', 'headline'),
218.             [
219.                 {'id': self.a5.id, 'headline': 'Article 5'},
220.                 {'id': self.a6.id, 'headline': 'Article 6'},
221.                 {'id': self.a4.id, 'headline': 'Article 4'},
222.                 {'id': self.a2.id, 'headline': 'Article 2'},
223.                 {'id': self.a3.id, 'headline': 'Article 3'},
224.                 {'id': self.a7.id, 'headline': 'Article 7'},
225.                 {'id': self.a1.id, 'headline': 'Article 1'},
226.             ],
227.         )
228.         # You can use values() with iterator() for memory savings,
229.         # because iterator() uses database-level iteration.
230.         self.assertSequenceEqual(
231.             list(Article.objects.values('id', 'headline').iterator()),
232.             [
233.                 {'headline': 'Article 5', 'id': self.a5.id},
234.                 {'headline': 'Article 6', 'id': self.a6.id},
235.                 {'headline': 'Article 4', 'id': self.a4.id},
236.                 {'headline': 'Article 2', 'id': self.a2.id},
237.                 {'headline': 'Article 3', 'id': self.a3.id},
238.                 {'headline': 'Article 7', 'id': self.a7.id},
239.                 {'headline': 'Article 1', 'id': self.a1.id},
240.             ],
241.         )
242.         # The values() method works with "extra" fields specified in extra(select).
243.         self.assertSequenceEqual(
244.             Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_one'),
245.             [
246.                 {'id': self.a5.id, 'id_plus_one': self.a5.id + 1},
247.                 {'id': self.a6.id, 'id_plus_one': self.a6.id + 1},
248.                 {'id': self.a4.id, 'id_plus_one': self.a4.id + 1},
249.                 {'id': self.a2.id, 'id_plus_one': self.a2.id + 1},
250.                 {'id': self.a3.id, 'id_plus_one': self.a3.id + 1},
251.                 {'id': self.a7.id, 'id_plus_one': self.a7.id + 1},
252.                 {'id': self.a1.id, 'id_plus_one': self.a1.id + 1},
253.             ],
254.         )
255.         data = {
256.             'id_plus_one': 'id+1',
257.             'id_plus_two': 'id+2',
258.             'id_plus_three': 'id+3',
259.             'id_plus_four': 'id+4',
260.             'id_plus_five': 'id+5',
261.             'id_plus_six': 'id+6',
262.             'id_plus_seven': 'id+7',
263.             'id_plus_eight': 'id+8',
264.         }
265.         self.assertSequenceEqual(
266.             Article.objects.filter(id=self.a1.id).extra(select=data).values(*data),
267.             [{
268.                 'id_plus_one': self.a1.id + 1,
269.                 'id_plus_two': self.a1.id + 2,
270.                 'id_plus_three': self.a1.id + 3,
271.                 'id_plus_four': self.a1.id + 4,
272.                 'id_plus_five': self.a1.id + 5,
273.                 'id_plus_six': self.a1.id + 6,
274.                 'id_plus_seven': self.a1.id + 7,
275.                 'id_plus_eight': self.a1.id + 8,
276.             }],
277.         )
278.         # You can specify fields from forward and reverse relations, just like filter().
279.         self.assertSequenceEqual(
280.             Article.objects.values('headline', 'author__name'),
281.             [
282.                 {'headline': self.a5.headline, 'author__name': self.au2.name},
283.                 {'headline': self.a6.headline, 'author__name': self.au2.name},
284.                 {'headline': self.a4.headline, 'author__name': self.au1.name},
285.                 {'headline': self.a2.headline, 'author__name': self.au1.name},
286.                 {'headline': self.a3.headline, 'author__name': self.au1.name},
287.                 {'headline': self.a7.headline, 'author__name': self.au2.name},
288.                 {'headline': self.a1.headline, 'author__name': self.au1.name},
289.             ],
290.         )
291.         self.assertSequenceEqual(
292.             Author.objects.values('name', 'article__headline').order_by('name', 'article__headline'),
293.             [
294.                 {'name': self.au1.name, 'article__headline': self.a1.headline},
295.                 {'name': self.au1.name, 'article__headline': self.a2.headline},
296.                 {'name': self.au1.name, 'article__headline': self.a3.headline},
297.                 {'name': self.au1.name, 'article__headline': self.a4.headline},
298.                 {'name': self.au2.name, 'article__headline': self.a5.headline},
299.                 {'name': self.au2.name, 'article__headline': self.a6.headline},
300.                 {'name': self.au2.name, 'article__headline': self.a7.headline},
301.             ],
302.         )
303.         self.assertSequenceEqual(
304.             (
305.                 Author.objects
306.                 .values('name', 'article__headline', 'article__tag__name')
307.                 .order_by('name', 'article__headline', 'article__tag__name')
308.             ),
309.             [
310.                 {'name': self.au1.name, 'article__headline': self.a1.headline, 'article__tag__name': self.t1.name},
311.                 {'name': self.au1.name, 'article__headline': self.a2.headline, 'article__tag__name': self.t1.name},
312.                 {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t1.name},
313.                 {'name': self.au1.name, 'article__headline': self.a3.headline, 'article__tag__name': self.t2.name},
314.                 {'name': self.au1.name, 'article__headline': self.a4.headline, 'article__tag__name': self.t2.name},
315.                 {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t2.name},
316.                 {'name': self.au2.name, 'article__headline': self.a5.headline, 'article__tag__name': self.t3.name},
317.                 {'name': self.au2.name, 'article__headline': self.a6.headline, 'article__tag__name': self.t3.name},
318.                 {'name': self.au2.name, 'article__headline': self.a7.headline, 'article__tag__name': self.t3.name},
319.             ],
320.         )
321.         # However, an exception FieldDoesNotExist will be thrown if you specify
322.         # a nonexistent field name in values() (a field that is neither in the
323.         # model nor in extra(select)).
324.         msg = (
325.             "Cannot resolve keyword 'id_plus_two' into field. Choices are: "
326.             "author, author_id, headline, id, id_plus_one, pub_date, slug, tag"
327.         )
328.         with self.assertRaisesMessage(FieldError, msg):
329.             Article.objects.extra(select={'id_plus_one': 'id + 1'}).values('id', 'id_plus_two')
330.         # If you don't specify field names to values(), all are returned.
331.         self.assertSequenceEqual(
332.             Article.objects.filter(id=self.a5.id).values(),
333.             [{
334.                 'id': self.a5.id,
335.                 'author_id': self.au2.id,
336.                 'headline': 'Article 5',
337.                 'pub_date': datetime(2005, 8, 1, 9, 0),
338.                 'slug': 'a5',
339.             }],
340.         )
341. 
342.     def test_values_list(self):
343.         # values_list() is similar to values(), except that the results are
344.         # returned as a list of tuples, rather than a list of dictionaries.
345.         # Within each tuple, the order of the elements is the same as the order
346.         # of fields in the values_list() call.
347.         self.assertSequenceEqual(
348.             Article.objects.values_list('headline'),
349.             [
350.                 ('Article 5',),
351.                 ('Article 6',),
352.                 ('Article 4',),
353.                 ('Article 2',),
354.                 ('Article 3',),
355.                 ('Article 7',),
356.                 ('Article 1',),
357.             ],
358.         )
359.         self.assertSequenceEqual(
360.             Article.objects.values_list('id').order_by('id'),
361.             [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
362.         )
363.         self.assertSequenceEqual(
364.             Article.objects.values_list('id', flat=True).order_by('id'),
365.             [self.a1.id, self.a2.id, self.a3.id, self.a4.id, self.a5.id, self.a6.id, self.a7.id],
366.         )
367.         self.assertSequenceEqual(
368.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id'),
369.             [(self.a1.id,), (self.a2.id,), (self.a3.id,), (self.a4.id,), (self.a5.id,), (self.a6.id,), (self.a7.id,)],
370.         )
371.         self.assertSequenceEqual(
372.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id_plus_one', 'id'),
373.             [
374.                 (self.a1.id + 1, self.a1.id),
375.                 (self.a2.id + 1, self.a2.id),
376.                 (self.a3.id + 1, self.a3.id),
377.                 (self.a4.id + 1, self.a4.id),
378.                 (self.a5.id + 1, self.a5.id),
379.                 (self.a6.id + 1, self.a6.id),
380.                 (self.a7.id + 1, self.a7.id)
381.             ],
382.         )
383.         self.assertSequenceEqual(
384.             Article.objects.extra(select={'id_plus_one': 'id+1'}).order_by('id').values_list('id', 'id_plus_one'),
385.             [
386.                 (self.a1.id, self.a1.id + 1),
387.                 (self.a2.id, self.a2.id + 1),
388.                 (self.a3.id, self.a3.id + 1),
389.                 (self.a4.id, self.a4.id + 1),
390.                 (self.a5.id, self.a5.id + 1),
391.                 (self.a6.id, self.a6.id + 1),
392.                 (self.a7.id, self.a7.id + 1)
393.             ],
394.         )
395.         args = ('name', 'article__headline', 'article__tag__name')
396.         self.assertSequenceEqual(
397.             Author.objects.values_list(*args).order_by(*args),
398.             [
399.                 (self.au1.name, self.a1.headline, self.t1.name),
400.                 (self.au1.name, self.a2.headline, self.t1.name),
401.                 (self.au1.name, self.a3.headline, self.t1.name),
402.                 (self.au1.name, self.a3.headline, self.t2.name),
403.                 (self.au1.name, self.a4.headline, self.t2.name),
404.                 (self.au2.name, self.a5.headline, self.t2.name),
405.                 (self.au2.name, self.a5.headline, self.t3.name),
406.                 (self.au2.name, self.a6.headline, self.t3.name),
407.                 (self.au2.name, self.a7.headline, self.t3.name),
408.             ],
409.         )
410.         with self.assertRaises(TypeError):
411.             Article.objects.values_list('id', 'headline', flat=True)
412. 
413.     def test_get_next_previous_by(self):
414.         # Every DateField and DateTimeField creates get_next_by_FOO() and
415.         # get_previous_by_FOO() methods. In the case of identical date values,
416.         # these methods will use the ID as a fallback check. This guarantees
417.         # that no records are skipped or duplicated.
418.         self.assertEqual(repr(self.a1.get_next_by_pub_date()), '<Article: Article 2>')
419.         self.assertEqual(repr(self.a2.get_next_by_pub_date()), '<Article: Article 3>')
420.         self.assertEqual(repr(self.a2.get_next_by_pub_date(headline__endswith='6')), '<Article: Article 6>')
421.         self.assertEqual(repr(self.a3.get_next_by_pub_date()), '<Article: Article 7>')
422.         self.assertEqual(repr(self.a4.get_next_by_pub_date()), '<Article: Article 6>')
423.         with self.assertRaises(Article.DoesNotExist):
424.             self.a5.get_next_by_pub_date()
425.         self.assertEqual(repr(self.a6.get_next_by_pub_date()), '<Article: Article 5>')
426.         self.assertEqual(repr(self.a7.get_next_by_pub_date()), '<Article: Article 4>')
427. 
428.         self.assertEqual(repr(self.a7.get_previous_by_pub_date()), '<Article: Article 3>')
429.         self.assertEqual(repr(self.a6.get_previous_by_pub_date()), '<Article: Article 4>')
430.         self.assertEqual(repr(self.a5.get_previous_by_pub_date()), '<Article: Article 6>')
431.         self.assertEqual(repr(self.a4.get_previous_by_pub_date()), '<Article: Article 7>')
432.         self.assertEqual(repr(self.a3.get_previous_by_pub_date()), '<Article: Article 2>')
433.         self.assertEqual(repr(self.a2.get_previous_by_pub_date()), '<Article: Article 1>')
434. 
435.     def test_escaping(self):
436.         # Underscores, percent signs and backslashes have special meaning in the
437.         # underlying SQL code, but Django handles the quoting of them automatically.
438.         Article.objects.create(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20))
439. 
440.         self.assertQuerysetEqual(
441.             Article.objects.filter(headline__startswith='Article'),
442.             [
443.                 '<Article: Article_ with underscore>',
444.                 '<Article: Article 5>',
445.                 '<Article: Article 6>',
446.                 '<Article: Article 4>',
447.                 '<Article: Article 2>',
448.                 '<Article: Article 3>',
449.                 '<Article: Article 7>',
450.                 '<Article: Article 1>',
451.             ]
452.         )
453.         self.assertQuerysetEqual(
454.             Article.objects.filter(headline__startswith='Article_'),
455.             ['<Article: Article_ with underscore>']
456.         )
457.         Article.objects.create(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21))
458.         self.assertQuerysetEqual(
459.             Article.objects.filter(headline__startswith='Article'),
460.             [
461.                 '<Article: Article% with percent sign>',
462.                 '<Article: Article_ with underscore>',
463.                 '<Article: Article 5>',
464.                 '<Article: Article 6>',
465.                 '<Article: Article 4>',
466.                 '<Article: Article 2>',
467.                 '<Article: Article 3>',
468.                 '<Article: Article 7>',
469.                 '<Article: Article 1>',
470.             ]
471.         )
472.         self.assertQuerysetEqual(
473.             Article.objects.filter(headline__startswith='Article%'),
474.             ['<Article: Article% with percent sign>']
475.         )
476.         Article.objects.create(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22))
477.         self.assertQuerysetEqual(
478.             Article.objects.filter(headline__contains='\\'),
479.             [r'<Article: Article with \ backslash>']
480.         )
481. 
482.     def test_exclude(self):
483.         Article.objects.bulk_create([
484.             Article(headline='Article_ with underscore', pub_date=datetime(2005, 11, 20)),
485.             Article(headline='Article% with percent sign', pub_date=datetime(2005, 11, 21)),
486.             Article(headline='Article with \\ backslash', pub_date=datetime(2005, 11, 22)),
487.         ])
488.         # exclude() is the opposite of filter() when doing lookups:
489.         self.assertQuerysetEqual(
490.             Article.objects.filter(headline__contains='Article').exclude(headline__contains='with'),
491.             [
492.                 '<Article: Article 5>',
493.                 '<Article: Article 6>',
494.                 '<Article: Article 4>',
495.                 '<Article: Article 2>',
496.                 '<Article: Article 3>',
497.                 '<Article: Article 7>',
498.                 '<Article: Article 1>',
499.             ]
500.         )

File: tests/lookup/models.py
Line number range: 1 - 110
Content:
1. """
2. The lookup API
3. 
4. This demonstrates features of the database API.
5. """
6. 
7. from django.db import models
8. from django.db.models.lookups import IsNull
9. 
10. 
11. class Alarm(models.Model):
12.     desc = models.CharField(max_length=100)
13.     time = models.TimeField()
14. 
15.     def __str__(self):
16.         return '%s (%s)' % (self.time, self.desc)
17. 
18. 
19. class Author(models.Model):
20.     name = models.CharField(max_length=100)
21.     alias = models.CharField(max_length=50, null=True, blank=True)
22. 
23.     class Meta:
24.         ordering = ('name',)
25. 
26. 
27. class Article(models.Model):
28.     headline = models.CharField(max_length=100)
29.     pub_date = models.DateTimeField()
30.     author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)
31.     slug = models.SlugField(unique=True, blank=True, null=True)
32. 
33.     class Meta:
34.         ordering = ('-pub_date', 'headline')
35. 
36.     def __str__(self):
37.         return self.headline
38. 
39. 
40. class Tag(models.Model):
41.     articles = models.ManyToManyField(Article)
42.     name = models.CharField(max_length=100)
43. 
44.     class Meta:
45.         ordering = ('name',)
46. 
47. 
48. class NulledTextField(models.TextField):
49.     def get_prep_value(self, value):
50.         return None if value == '' else value
51. 
52. 
53. @NulledTextField.register_lookup
54. class NulledTransform(models.Transform):
55.     lookup_name = 'nulled'
56.     template = 'NULL'
57. 
58. 
59. @NulledTextField.register_lookup
60. class IsNullWithNoneAsRHS(IsNull):
61.     lookup_name = 'isnull_none_rhs'
62.     can_use_none_as_rhs = True
63. 
64. 
65. class Season(models.Model):
66.     year = models.PositiveSmallIntegerField()
67.     gt = models.IntegerField(null=True, blank=True)
68.     nulled_text_field = NulledTextField(null=True)
69. 
70.     def __str__(self):
71.         return str(self.year)
72. 
73. 
74. class Game(models.Model):
75.     season = models.ForeignKey(Season, models.CASCADE, related_name='games')
76.     home = models.CharField(max_length=100)
77.     away = models.CharField(max_length=100)
78. 
79.     def __str__(self):
80.         return "%s at %s" % (self.away, self.home)
81. 
82. 
83. class Player(models.Model):
84.     name = models.CharField(max_length=100)
85.     games = models.ManyToManyField(Game, related_name='players')
86. 
87.     def __str__(self):
88.         return self.name
89. 
90. 
91. class Product(models.Model):
92.     name = models.CharField(max_length=80)
93.     qty_target = models.DecimalField(max_digits=6, decimal_places=2)
94. 
95. 
96. class Stock(models.Model):
97.     product = models.ForeignKey(Product, models.CASCADE)
98.     qty_available = models.DecimalField(max_digits=6, decimal_places=2)
99. 
100. 
101. class Freebie(models.Model):
102.     gift_product = models.ForeignKey(Product, models.CASCADE)
103.     stock_id = models.IntegerField(blank=True, null=True)
104. 
105.     stock = models.ForeignObject(
106.         Stock,
107.         from_fields=['stock_id', 'gift_product'],
108.         to_fields=['id', 'product'],
109.         on_delete=models.CASCADE,
110.     )

File: tests/constraints/tests.py
Line number range: 1 - 240
Content:
1. from unittest import mock
2. 
3. from django.core.exceptions import ValidationError
4. from django.db import IntegrityError, connection, models
5. from django.db.models.constraints import BaseConstraint
6. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
7. 
8. from .models import (
9.     ChildModel, Product, UniqueConstraintConditionProduct,
10.     UniqueConstraintProduct,
11. )
12. 
13. 
14. def get_constraints(table):
15.     with connection.cursor() as cursor:
16.         return connection.introspection.get_constraints(cursor, table)
17. 
18. 
19. class BaseConstraintTests(SimpleTestCase):
20.     def test_constraint_sql(self):
21.         c = BaseConstraint('name')
22.         msg = 'This method must be implemented by a subclass.'
23.         with self.assertRaisesMessage(NotImplementedError, msg):
24.             c.constraint_sql(None, None)
25. 
26.     def test_create_sql(self):
27.         c = BaseConstraint('name')
28.         msg = 'This method must be implemented by a subclass.'
29.         with self.assertRaisesMessage(NotImplementedError, msg):
30.             c.create_sql(None, None)
31. 
32.     def test_remove_sql(self):
33.         c = BaseConstraint('name')
34.         msg = 'This method must be implemented by a subclass.'
35.         with self.assertRaisesMessage(NotImplementedError, msg):
36.             c.remove_sql(None, None)
37. 
38. 
39. class CheckConstraintTests(TestCase):
40.     def test_eq(self):
41.         check1 = models.Q(price__gt=models.F('discounted_price'))
42.         check2 = models.Q(price__lt=models.F('discounted_price'))
43.         self.assertEqual(
44.             models.CheckConstraint(check=check1, name='price'),
45.             models.CheckConstraint(check=check1, name='price'),
46.         )
47.         self.assertEqual(models.CheckConstraint(check=check1, name='price'), mock.ANY)
48.         self.assertNotEqual(
49.             models.CheckConstraint(check=check1, name='price'),
50.             models.CheckConstraint(check=check1, name='price2'),
51.         )
52.         self.assertNotEqual(
53.             models.CheckConstraint(check=check1, name='price'),
54.             models.CheckConstraint(check=check2, name='price'),
55.         )
56.         self.assertNotEqual(models.CheckConstraint(check=check1, name='price'), 1)
57. 
58.     def test_repr(self):
59.         check = models.Q(price__gt=models.F('discounted_price'))
60.         name = 'price_gt_discounted_price'
61.         constraint = models.CheckConstraint(check=check, name=name)
62.         self.assertEqual(
63.             repr(constraint),
64.             "<CheckConstraint: check='{}' name='{}'>".format(check, name),
65.         )
66. 
67.     def test_invalid_check_types(self):
68.         msg = (
69.             'CheckConstraint.check must be a Q instance or boolean expression.'
70.         )
71.         with self.assertRaisesMessage(TypeError, msg):
72.             models.CheckConstraint(check=models.F('discounted_price'), name='check')
73. 
74.     def test_deconstruction(self):
75.         check = models.Q(price__gt=models.F('discounted_price'))
76.         name = 'price_gt_discounted_price'
77.         constraint = models.CheckConstraint(check=check, name=name)
78.         path, args, kwargs = constraint.deconstruct()
79.         self.assertEqual(path, 'django.db.models.CheckConstraint')
80.         self.assertEqual(args, ())
81.         self.assertEqual(kwargs, {'check': check, 'name': name})
82. 
83.     @skipUnlessDBFeature('supports_table_check_constraints')
84.     def test_database_constraint(self):
85.         Product.objects.create(price=10, discounted_price=5)
86.         with self.assertRaises(IntegrityError):
87.             Product.objects.create(price=10, discounted_price=20)
88. 
89.     @skipUnlessDBFeature('supports_table_check_constraints')
90.     def test_database_constraint_expression(self):
91.         Product.objects.create(price=999, discounted_price=5)
92.         with self.assertRaises(IntegrityError):
93.             Product.objects.create(price=1000, discounted_price=5)
94. 
95.     @skipUnlessDBFeature('supports_table_check_constraints')
96.     def test_database_constraint_expressionwrapper(self):
97.         Product.objects.create(price=499, discounted_price=5)
98.         with self.assertRaises(IntegrityError):
99.             Product.objects.create(price=500, discounted_price=5)
100. 
101.     @skipUnlessDBFeature('supports_table_check_constraints', 'can_introspect_check_constraints')
102.     def test_name(self):
103.         constraints = get_constraints(Product._meta.db_table)
104.         for expected_name in (
105.             'price_gt_discounted_price',
106.             'constraints_price_lt_1000_raw',
107.             'constraints_price_neq_500_wrap',
108.             'constraints_product_price_gt_0',
109.         ):
110.             with self.subTest(expected_name):
111.                 self.assertIn(expected_name, constraints)
112. 
113.     @skipUnlessDBFeature('supports_table_check_constraints', 'can_introspect_check_constraints')
114.     def test_abstract_name(self):
115.         constraints = get_constraints(ChildModel._meta.db_table)
116.         self.assertIn('constraints_childmodel_adult', constraints)
117. 
118. 
119. class UniqueConstraintTests(TestCase):
120.     @classmethod
121.     def setUpTestData(cls):
122.         cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([
123.             UniqueConstraintProduct(name='p1', color='red'),
124.             UniqueConstraintProduct(name='p2'),
125.         ])
126. 
127.     def test_eq(self):
128.         self.assertEqual(
129.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
130.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
131.         )
132.         self.assertEqual(
133.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
134.             mock.ANY,
135.         )
136.         self.assertNotEqual(
137.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
138.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique2'),
139.         )
140.         self.assertNotEqual(
141.             models.UniqueConstraint(fields=['foo', 'bar'], name='unique'),
142.             models.UniqueConstraint(fields=['foo', 'baz'], name='unique'),
143.         )
144.         self.assertNotEqual(models.UniqueConstraint(fields=['foo', 'bar'], name='unique'), 1)
145. 
146.     def test_eq_with_condition(self):
147.         self.assertEqual(
148.             models.UniqueConstraint(
149.                 fields=['foo', 'bar'], name='unique',
150.                 condition=models.Q(foo=models.F('bar'))
151.             ),
152.             models.UniqueConstraint(
153.                 fields=['foo', 'bar'], name='unique',
154.                 condition=models.Q(foo=models.F('bar'))),
155.         )
156.         self.assertNotEqual(
157.             models.UniqueConstraint(
158.                 fields=['foo', 'bar'],
159.                 name='unique',
160.                 condition=models.Q(foo=models.F('bar'))
161.             ),
162.             models.UniqueConstraint(
163.                 fields=['foo', 'bar'],
164.                 name='unique',
165.                 condition=models.Q(foo=models.F('baz'))
166.             ),
167.         )
168. 
169.     def test_repr(self):
170.         fields = ['foo', 'bar']
171.         name = 'unique_fields'
172.         constraint = models.UniqueConstraint(fields=fields, name=name)
173.         self.assertEqual(
174.             repr(constraint),
175.             "<UniqueConstraint: fields=('foo', 'bar') name='unique_fields'>",
176.         )
177. 
178.     def test_repr_with_condition(self):
179.         constraint = models.UniqueConstraint(
180.             fields=['foo', 'bar'],
181.             name='unique_fields',
182.             condition=models.Q(foo=models.F('bar')),
183.         )
184.         self.assertEqual(
185.             repr(constraint),
186.             "<UniqueConstraint: fields=('foo', 'bar') name='unique_fields' "
187.             "condition=(AND: ('foo', F(bar)))>",
188.         )
189. 
190.     def test_deconstruction(self):
191.         fields = ['foo', 'bar']
192.         name = 'unique_fields'
193.         constraint = models.UniqueConstraint(fields=fields, name=name)
194.         path, args, kwargs = constraint.deconstruct()
195.         self.assertEqual(path, 'django.db.models.UniqueConstraint')
196.         self.assertEqual(args, ())
197.         self.assertEqual(kwargs, {'fields': tuple(fields), 'name': name})
198. 
199.     def test_deconstruction_with_condition(self):
200.         fields = ['foo', 'bar']
201.         name = 'unique_fields'
202.         condition = models.Q(foo=models.F('bar'))
203.         constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)
204.         path, args, kwargs = constraint.deconstruct()
205.         self.assertEqual(path, 'django.db.models.UniqueConstraint')
206.         self.assertEqual(args, ())
207.         self.assertEqual(kwargs, {'fields': tuple(fields), 'name': name, 'condition': condition})
208. 
209.     def test_database_constraint(self):
210.         with self.assertRaises(IntegrityError):
211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)
212. 
213.     @skipUnlessDBFeature('supports_partial_indexes')
214.     def test_database_constraint_with_condition(self):
215.         UniqueConstraintConditionProduct.objects.create(name='p1')
216.         UniqueConstraintConditionProduct.objects.create(name='p2')
217.         with self.assertRaises(IntegrityError):
218.             UniqueConstraintConditionProduct.objects.create(name='p1')
219. 
220.     def test_model_validation(self):
221.         msg = 'Unique constraint product with this Name and Color already exists.'
222.         with self.assertRaisesMessage(ValidationError, msg):
223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()
224. 
225.     @skipUnlessDBFeature('supports_partial_indexes')
226.     def test_model_validation_with_condition(self):
227.         """Partial unique constraints are ignored by Model.validate_unique()."""
228.         obj1 = UniqueConstraintConditionProduct.objects.create(name='p1', color='red')
229.         obj2 = UniqueConstraintConditionProduct.objects.create(name='p2')
230.         UniqueConstraintConditionProduct(name=obj1.name, color='blue').validate_unique()
231.         UniqueConstraintConditionProduct(name=obj2.name).validate_unique()
232. 
233.     def test_name(self):
234.         constraints = get_constraints(UniqueConstraintProduct._meta.db_table)
235.         expected_name = 'name_color_uniq'
236.         self.assertIn(expected_name, constraints)
237. 
238.     def test_condition_must_be_q(self):
239.         with self.assertRaisesMessage(ValueError, 'UniqueConstraint.condition must be a Q instance.'):
240.             models.UniqueConstraint(name='uniq', fields=['name'], condition='invalid')

File: tests/constraints/models.py
Line number range: 1 - 79
Content:
1. from django.db import models
2. 
3. 
4. class Product(models.Model):
5.     price = models.IntegerField(null=True)
6.     discounted_price = models.IntegerField(null=True)
7. 
8.     class Meta:
9.         required_db_features = {
10.             'supports_table_check_constraints',
11.         }
12.         constraints = [
13.             models.CheckConstraint(
14.                 check=models.Q(price__gt=models.F('discounted_price')),
15.                 name='price_gt_discounted_price',
16.             ),
17.             models.CheckConstraint(
18.                 check=models.Q(price__gt=0),
19.                 name='%(app_label)s_%(class)s_price_gt_0',
20.             ),
21.             models.CheckConstraint(
22.                 check=models.expressions.RawSQL(
23.                     'price < %s', (1000,), output_field=models.BooleanField()
24.                 ),
25.                 name='%(app_label)s_price_lt_1000_raw',
26.             ),
27.             models.CheckConstraint(
28.                 check=models.expressions.ExpressionWrapper(
29.                     models.Q(price__gt=500) | models.Q(price__lt=500),
30.                     output_field=models.BooleanField()
31.                 ),
32.                 name='%(app_label)s_price_neq_500_wrap',
33.             ),
34.         ]
35. 
36. 
37. class UniqueConstraintProduct(models.Model):
38.     name = models.CharField(max_length=255)
39.     color = models.CharField(max_length=32, null=True)
40. 
41.     class Meta:
42.         constraints = [
43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),
44.         ]
45. 
46. 
47. class UniqueConstraintConditionProduct(models.Model):
48.     name = models.CharField(max_length=255)
49.     color = models.CharField(max_length=32, null=True)
50. 
51.     class Meta:
52.         required_db_features = {'supports_partial_indexes'}
53.         constraints = [
54.             models.UniqueConstraint(
55.                 fields=['name'],
56.                 name='name_without_color_uniq',
57.                 condition=models.Q(color__isnull=True),
58.             ),
59.         ]
60. 
61. 
62. class AbstractModel(models.Model):
63.     age = models.IntegerField()
64. 
65.     class Meta:
66.         abstract = True
67.         required_db_features = {
68.             'supports_table_check_constraints',
69.         }
70.         constraints = [
71.             models.CheckConstraint(
72.                 check=models.Q(age__gte=18),
73.                 name='%(app_label)s_%(class)s_adult',
74.             ),
75.         ]
76. 
77. 
78. class ChildModel(AbstractModel):
79.     pass

File: tests/validation/test_unique.py
Line number range: 1 - 172
Content:
1. import datetime
2. import unittest
3. 
4. from django.apps.registry import Apps
5. from django.core.exceptions import ValidationError
6. from django.db import models
7. from django.test import TestCase
8. 
9. from .models import (
10.     CustomPKModel, FlexibleDatePost, ModelToValidate, Post, UniqueErrorsModel,
11.     UniqueFieldsModel, UniqueForDateModel, UniqueTogetherModel,
12. )
13. 
14. 
15. class GetUniqueCheckTests(unittest.TestCase):
16.     def test_unique_fields_get_collected(self):
17.         m = UniqueFieldsModel()
18.         self.assertEqual(
19.             ([(UniqueFieldsModel, ('id',)),
20.               (UniqueFieldsModel, ('unique_charfield',)),
21.               (UniqueFieldsModel, ('unique_integerfield',))],
22.              []),
23.             m._get_unique_checks()
24.         )
25. 
26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):
27.         m = UniqueTogetherModel()
28.         self.assertEqual(
29.             ([(UniqueTogetherModel, ('ifield', 'cfield')),
30.               (UniqueTogetherModel, ('ifield', 'efield')),
31.               (UniqueTogetherModel, ('id',))],
32.              []),
33.             m._get_unique_checks()
34.         )
35. 
36.     def test_unique_together_normalization(self):
37.         """
38.         Test the Meta.unique_together normalization with different sorts of
39.         objects.
40.         """
41.         data = {
42.             '2-tuple': (('foo', 'bar'), (('foo', 'bar'),)),
43.             'list': (['foo', 'bar'], (('foo', 'bar'),)),
44.             'already normalized': ((('foo', 'bar'), ('bar', 'baz')),
45.                                    (('foo', 'bar'), ('bar', 'baz'))),
46.             'set': ({('foo', 'bar'), ('bar', 'baz')},  # Ref #21469
47.                     (('foo', 'bar'), ('bar', 'baz'))),
48.         }
49. 
50.         for unique_together, normalized in data.values():
51.             class M(models.Model):
52.                 foo = models.IntegerField()
53.                 bar = models.IntegerField()
54.                 baz = models.IntegerField()
55. 
56.                 Meta = type('Meta', (), {
57.                     'unique_together': unique_together,
58.                     'apps': Apps()
59.                 })
60. 
61.             checks, _ = M()._get_unique_checks()
62.             for t in normalized:
63.                 check = (M, t)
64.                 self.assertIn(check, checks)
65. 
66.     def test_primary_key_is_considered_unique(self):
67.         m = CustomPKModel()
68.         self.assertEqual(([(CustomPKModel, ('my_pk_field',))], []), m._get_unique_checks())
69. 
70.     def test_unique_for_date_gets_picked_up(self):
71.         m = UniqueForDateModel()
72.         self.assertEqual((
73.             [(UniqueForDateModel, ('id',))],
74.             [(UniqueForDateModel, 'date', 'count', 'start_date'),
75.              (UniqueForDateModel, 'year', 'count', 'end_date'),
76.              (UniqueForDateModel, 'month', 'order', 'end_date')]
77.         ), m._get_unique_checks()
78.         )
79. 
80.     def test_unique_for_date_exclusion(self):
81.         m = UniqueForDateModel()
82.         self.assertEqual((
83.             [(UniqueForDateModel, ('id',))],
84.             [(UniqueForDateModel, 'year', 'count', 'end_date'),
85.              (UniqueForDateModel, 'month', 'order', 'end_date')]
86.         ), m._get_unique_checks(exclude='start_date')
87.         )
88. 
89. 
90. class PerformUniqueChecksTest(TestCase):
91.     def test_primary_key_unique_check_not_performed_when_adding_and_pk_not_specified(self):
92.         # Regression test for #12560
93.         with self.assertNumQueries(0):
94.             mtv = ModelToValidate(number=10, name='Some Name')
95.             setattr(mtv, '_adding', True)
96.             mtv.full_clean()
97. 
98.     def test_primary_key_unique_check_performed_when_adding_and_pk_specified(self):
99.         # Regression test for #12560
100.         with self.assertNumQueries(1):
101.             mtv = ModelToValidate(number=10, name='Some Name', id=123)
102.             setattr(mtv, '_adding', True)
103.             mtv.full_clean()
104. 
105.     def test_primary_key_unique_check_not_performed_when_not_adding(self):
106.         # Regression test for #12132
107.         with self.assertNumQueries(0):
108.             mtv = ModelToValidate(number=10, name='Some Name')
109.             mtv.full_clean()
110. 
111.     def test_unique_for_date(self):
112.         Post.objects.create(
113.             title="Django 1.0 is released", slug="Django 1.0",
114.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
115.         )
116.         p = Post(title="Django 1.0 is released", posted=datetime.date(2008, 9, 3))
117.         with self.assertRaises(ValidationError) as cm:
118.             p.full_clean()
119.         self.assertEqual(cm.exception.message_dict, {'title': ['Title must be unique for Posted date.']})
120. 
121.         # Should work without errors
122.         p = Post(title="Work on Django 1.1 begins", posted=datetime.date(2008, 9, 3))
123.         p.full_clean()
124. 
125.         # Should work without errors
126.         p = Post(title="Django 1.0 is released", posted=datetime.datetime(2008, 9, 4))
127.         p.full_clean()
128. 
129.         p = Post(slug="Django 1.0", posted=datetime.datetime(2008, 1, 1))
130.         with self.assertRaises(ValidationError) as cm:
131.             p.full_clean()
132.         self.assertEqual(cm.exception.message_dict, {'slug': ['Slug must be unique for Posted year.']})
133. 
134.         p = Post(subtitle="Finally", posted=datetime.datetime(2008, 9, 30))
135.         with self.assertRaises(ValidationError) as cm:
136.             p.full_clean()
137.         self.assertEqual(cm.exception.message_dict, {'subtitle': ['Subtitle must be unique for Posted month.']})
138. 
139.         p = Post(title="Django 1.0 is released")
140.         with self.assertRaises(ValidationError) as cm:
141.             p.full_clean()
142.         self.assertEqual(cm.exception.message_dict, {'posted': ['This field cannot be null.']})
143. 
144.     def test_unique_for_date_with_nullable_date(self):
145.         """
146.         unique_for_date/year/month checks shouldn't trigger when the
147.         associated DateField is None.
148.         """
149.         FlexibleDatePost.objects.create(
150.             title="Django 1.0 is released", slug="Django 1.0",
151.             subtitle="Finally", posted=datetime.date(2008, 9, 3),
152.         )
153.         p = FlexibleDatePost(title="Django 1.0 is released")
154.         p.full_clean()
155. 
156.         p = FlexibleDatePost(slug="Django 1.0")
157.         p.full_clean()
158. 
159.         p = FlexibleDatePost(subtitle="Finally")
160.         p.full_clean()
161. 
162.     def test_unique_errors(self):
163.         UniqueErrorsModel.objects.create(name='Some Name', no=10)
164.         m = UniqueErrorsModel(name='Some Name', no=11)
165.         with self.assertRaises(ValidationError) as cm:
166.             m.full_clean()
167.         self.assertEqual(cm.exception.message_dict, {'name': ['Custom unique name message.']})
168. 
169.         m = UniqueErrorsModel(name='Some Other Name', no=10)
170.         with self.assertRaises(ValidationError) as cm:
171.             m.full_clean()
172.         self.assertEqual(cm.exception.message_dict, {'no': ['Custom unique number message.']})

File: tests/validation/models.py
Line number range: 1 - 133
Content:
1. from datetime import datetime
2. 
3. from django.core.exceptions import ValidationError
4. from django.db import models
5. 
6. 
7. def validate_answer_to_universe(value):
8.     if value != 42:
9.         raise ValidationError('This is not the answer to life, universe and everything!', code='not42')
10. 
11. 
12. class ModelToValidate(models.Model):
13.     name = models.CharField(max_length=100)
14.     created = models.DateTimeField(default=datetime.now)
15.     number = models.IntegerField(db_column='number_val')
16.     parent = models.ForeignKey(
17.         'self',
18.         models.SET_NULL,
19.         blank=True, null=True,
20.         limit_choices_to={'number': 10},
21.     )
22.     email = models.EmailField(blank=True)
23.     ufm = models.ForeignKey(
24.         'UniqueFieldsModel',
25.         models.SET_NULL,
26.         to_field='unique_charfield',
27.         blank=True, null=True,
28.     )
29.     url = models.URLField(blank=True)
30.     f_with_custom_validator = models.IntegerField(blank=True, null=True, validators=[validate_answer_to_universe])
31.     f_with_iterable_of_validators = models.IntegerField(blank=True, null=True,
32.                                                         validators=(validate_answer_to_universe,))
33.     slug = models.SlugField(blank=True)
34. 
35.     def clean(self):
36.         super().clean()
37.         if self.number == 11:
38.             raise ValidationError('Invalid number supplied!')
39. 
40. 
41. class UniqueFieldsModel(models.Model):
42.     unique_charfield = models.CharField(max_length=100, unique=True)
43.     unique_integerfield = models.IntegerField(unique=True)
44.     non_unique_field = models.IntegerField()
45. 
46. 
47. class CustomPKModel(models.Model):
48.     my_pk_field = models.CharField(max_length=100, primary_key=True)
49. 
50. 
51. class UniqueTogetherModel(models.Model):
52.     cfield = models.CharField(max_length=100)
53.     ifield = models.IntegerField()
54.     efield = models.EmailField()
55. 
56.     class Meta:
57.         unique_together = (('ifield', 'cfield',), ['ifield', 'efield'])
58. 
59. 
60. class UniqueForDateModel(models.Model):
61.     start_date = models.DateField()
62.     end_date = models.DateTimeField()
63.     count = models.IntegerField(unique_for_date="start_date", unique_for_year="end_date")
64.     order = models.IntegerField(unique_for_month="end_date")
65.     name = models.CharField(max_length=100)
66. 
67. 
68. class CustomMessagesModel(models.Model):
69.     other = models.IntegerField(blank=True, null=True)
70.     number = models.IntegerField(
71.         db_column='number_val',
72.         error_messages={'null': 'NULL', 'not42': 'AAARGH', 'not_equal': '%s != me'},
73.         validators=[validate_answer_to_universe]
74.     )
75. 
76. 
77. class Author(models.Model):
78.     name = models.CharField(max_length=100)
79. 
80. 
81. class Article(models.Model):
82.     title = models.CharField(max_length=100)
83.     author = models.ForeignKey(Author, models.CASCADE)
84.     pub_date = models.DateTimeField(blank=True)
85. 
86.     def clean(self):
87.         if self.pub_date is None:
88.             self.pub_date = datetime.now()
89. 
90. 
91. class Post(models.Model):
92.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
93.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
94.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
95.     posted = models.DateField()
96. 
97. 
98. class FlexibleDatePost(models.Model):
99.     title = models.CharField(max_length=50, unique_for_date='posted', blank=True)
100.     slug = models.CharField(max_length=50, unique_for_year='posted', blank=True)
101.     subtitle = models.CharField(max_length=50, unique_for_month='posted', blank=True)
102.     posted = models.DateField(blank=True, null=True)
103. 
104. 
105. class UniqueErrorsModel(models.Model):
106.     name = models.CharField(max_length=100, unique=True, error_messages={'unique': 'Custom unique name message.'})
107.     no = models.IntegerField(unique=True, error_messages={'unique': 'Custom unique number message.'})
108. 
109. 
110. class GenericIPAddressTestModel(models.Model):
111.     generic_ip = models.GenericIPAddressField(blank=True, null=True, unique=True)
112.     v4_ip = models.GenericIPAddressField(blank=True, null=True, protocol="ipv4")
113.     v6_ip = models.GenericIPAddressField(blank=True, null=True, protocol="ipv6")
114.     ip_verbose_name = models.GenericIPAddressField("IP Address Verbose", blank=True, null=True)
115. 
116. 
117. class GenericIPAddrUnpackUniqueTest(models.Model):
118.     generic_v4unpack_ip = models.GenericIPAddressField(null=True, blank=True, unique=True, unpack_ipv4=True)
119. 
120. 
121. # A model can't have multiple AutoFields
122. # Refs #12467.
123. assertion_error = None
124. try:
125.     class MultipleAutoFields(models.Model):
126.         auto1 = models.AutoField(primary_key=True)
127.         auto2 = models.AutoField(primary_key=True)
128. except AssertionError as exc:
129.     assertion_error = exc
130. assert str(assertion_error) == (
131.     "Model validation.MultipleAutoFields can't have more than one "
132.     "auto-generated field."
133. )


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 07:32:56,361 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='This test class is highly relevant as it contains two key tests. First, `test_in_bulk_with_field` demonstrates the expected successful execution of `in_bulk()` on a field with `unique=True`. Second, `test_in_bulk_non_unique_field` demonstrates the exact `ValueError` that the user is reporting, but for a legitimately non-unique field. This highlights the code path that is incorrectly classifying the `UniqueConstraint` field as not unique. The `setUpTestData` method provides the necessary data for these tests.', relative_path='tests/lookup/tests.py', start_line=18, end_line=196), ContextOutput(reasoning='This file defines the `Article` model used in `LookupTests`. The `slug` field is defined with `unique=True`, which is what allows `test_in_bulk_with_field` to pass. The `author` field is a `ForeignKey`, which is not unique and is used in `test_in_bulk_non_unique_field` to trigger the expected error. This model is essential for understanding the setup of the tests in `lookup/tests.py`.', relative_path='tests/lookup/models.py', start_line=19, end_line=38), ContextOutput(reasoning="This test class, specifically `test_model_validation` and `test_database_constraint`, shows that `UniqueConstraint` is correctly handled by other parts of Django's ORM, namely model validation and database integrity. This demonstrates that the framework is capable of introspecting `UniqueConstraint`, but this capability is missing from the `in_bulk()` implementation. The `setUpTestData` method sets up the data used to test the constraint.", relative_path='tests/constraints/tests.py', start_line=119, end_line=224), ContextOutput(reasoning="This file defines the `UniqueConstraintProduct` model, which is a perfect parallel to the user's example. It uses a `UniqueConstraint` in its `Meta` class to enforce uniqueness, rather than `unique=True` on the fields themselves. This is the exact model structure that triggers the bug in `in_bulk()`.", relative_path='tests/constraints/models.py', start_line=37, end_line=45), ContextOutput(reasoning='This test class, `GetUniqueCheckTests`, provides insight into how Django internally discovers unique fields on a model via the `_get_unique_checks()` method. The failure of `in_bulk()` to recognize `UniqueConstraint` likely stems from its uniqueness introspection logic. Understanding how `unique=True` and `unique_together` are discovered in this test is key to extending that logic to also cover `UniqueConstraint`.', relative_path='tests/validation/test_unique.py', start_line=15, end_line=88)]
2025-10-06 07:32:56,362 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/lookup/tests.py', content='1. import collections.abc\n2. from datetime import datetime\n3. from math import ceil\n4. from operator import attrgetter\n5. \n6. from django.core.exceptions import FieldError\n7. from django.db import connection\n8. from django.db.models import Exists, Max, OuterRef\n9. from django.db.models.functions import Substr\n10. from django.test import TestCase, skipUnlessDBFeature\n11. from django.utils.deprecation import RemovedInDjango40Warning\n12. \n13. from .models import (\n14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n15. )', start_line_number=1, end_line_number=15), Context(relative_path='tests/constraints/models.py', content="37. class UniqueConstraintProduct(models.Model):\n38.     name = models.CharField(max_length=255)\n39.     color = models.CharField(max_length=32, null=True)\n40. \n41.     class Meta:\n42.         constraints = [\n43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),\n44.         ]\n45. ", start_line_number=37, end_line_number=45), Context(relative_path='tests/lookup/tests.py', content='18. class LookupTests(TestCase):\n19. \n20.     @classmethod\n21.     def setUpTestData(cls):\n22.         # Create a few Authors.\n23.         cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n24.         cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n25.         # Create a few Articles.\n26.         cls.a1 = Article.objects.create(\n27.             headline=\'Article 1\',\n28.             pub_date=datetime(2005, 7, 26),\n29.             author=cls.au1,\n30.             slug=\'a1\',\n31.         )\n32.         cls.a2 = Article.objects.create(\n33.             headline=\'Article 2\',\n34.             pub_date=datetime(2005, 7, 27),\n35.             author=cls.au1,\n36.             slug=\'a2\',\n37.         )\n38.         cls.a3 = Article.objects.create(\n39.             headline=\'Article 3\',\n40.             pub_date=datetime(2005, 7, 27),\n41.             author=cls.au1,\n42.             slug=\'a3\',\n43.         )\n44.         cls.a4 = Article.objects.create(\n45.             headline=\'Article 4\',\n46.             pub_date=datetime(2005, 7, 28),\n47.             author=cls.au1,\n48.             slug=\'a4\',\n49.         )\n50.         cls.a5 = Article.objects.create(\n51.             headline=\'Article 5\',\n52.             pub_date=datetime(2005, 8, 1, 9, 0),\n53.             author=cls.au2,\n54.             slug=\'a5\',\n55.         )\n56.         cls.a6 = Article.objects.create(\n57.             headline=\'Article 6\',\n58.             pub_date=datetime(2005, 8, 1, 8, 0),\n59.             author=cls.au2,\n60.             slug=\'a6\',\n61.         )\n62.         cls.a7 = Article.objects.create(\n63.             headline=\'Article 7\',\n64.             pub_date=datetime(2005, 7, 27),\n65.             author=cls.au2,\n66.             slug=\'a7\',\n67.         )\n68.         # Create a few Tags.\n69.         cls.t1 = Tag.objects.create(name=\'Tag 1\')\n70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n71.         cls.t2 = Tag.objects.create(name=\'Tag 2\')\n72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n73.         cls.t3 = Tag.objects.create(name=\'Tag 3\')\n74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n75. \n76.     def test_exists(self):\n77.         # We can use .exists() to check that there are some\n78.         self.assertTrue(Article.objects.exists())\n79.         for a in Article.objects.all():\n80.             a.delete()\n81.         # There should be none now!\n82.         self.assertFalse(Article.objects.exists())\n83. \n84.     def test_lookup_int_as_str(self):\n85.         # Integer value can be queried using string\n86.         self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),\n87.                                  [\'<Article: Article 1>\'])\n88. \n89.     @skipUnlessDBFeature(\'supports_date_lookup_using_string\')\n90.     def test_lookup_date_as_str(self):\n91.         # A date lookup can be performed using a string search\n92.         self.assertQuerysetEqual(\n93.             Article.objects.filter(pub_date__startswith=\'2005\'),\n94.             [\n95.                 \'<Article: Article 5>\',\n96.                 \'<Article: Article 6>\',\n97.                 \'<Article: Article 4>\',\n98.                 \'<Article: Article 2>\',\n99.                 \'<Article: Article 3>\',\n100.                 \'<Article: Article 7>\',\n101.                 \'<Article: Article 1>\',\n102.             ]\n103.         )\n104. \n105.     def test_iterator(self):\n106.         # Each QuerySet gets iterator(), which is a generator that "lazily"\n107.         # returns results using database-level iteration.\n108.         self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)\n109. \n110.         self.assertQuerysetEqual(\n111.             Article.objects.iterator(),\n112.             [\n113.                 \'Article 5\',\n114.                 \'Article 6\',\n115.                 \'Article 4\',\n116.                 \'Article 2\',\n117.                 \'Article 3\',\n118.                 \'Article 7\',\n119.                 \'Article 1\',\n120.             ],\n121.             transform=attrgetter(\'headline\')\n122.         )\n123.         # iterator() can be used on any QuerySet.\n124.         self.assertQuerysetEqual(\n125.             Article.objects.filter(headline__endswith=\'4\').iterator(),\n126.             [\'Article 4\'],\n127.             transform=attrgetter(\'headline\'))\n128. \n129.     def test_count(self):\n130.         # count() returns the number of objects matching search criteria.\n131.         self.assertEqual(Article.objects.count(), 7)\n132.         self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)\n133.         self.assertEqual(Article.objects.filter(headline__startswith=\'Blah blah\').count(), 0)\n134. \n135.         # count() should respect sliced query sets.\n136.         articles = Article.objects.all()\n137.         self.assertEqual(articles.count(), 7)\n138.         self.assertEqual(articles[:4].count(), 4)\n139.         self.assertEqual(articles[1:100].count(), 6)\n140.         self.assertEqual(articles[10:100].count(), 0)\n141. \n142.         # Date and date/time lookups can also be done with strings.\n143.         self.assertEqual(Article.objects.filter(pub_date__exact=\'2005-07-27 00:00:00\').count(), 3)\n144. \n145.     def test_in_bulk(self):\n146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n148.         self.assertEqual(arts[self.a1.id], self.a1)\n149.         self.assertEqual(arts[self.a2.id], self.a2)\n150.         self.assertEqual(\n151.             Article.objects.in_bulk(),\n152.             {\n153.                 self.a1.id: self.a1,\n154.                 self.a2.id: self.a2,\n155.                 self.a3.id: self.a3,\n156.                 self.a4.id: self.a4,\n157.                 self.a5.id: self.a5,\n158.                 self.a6.id: self.a6,\n159.                 self.a7.id: self.a7,\n160.             }\n161.         )\n162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n166.         self.assertEqual(Article.objects.in_bulk([1000]), {})\n167.         self.assertEqual(Article.objects.in_bulk([]), {})\n168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})\n170.         with self.assertRaises(TypeError):\n171.             Article.objects.in_bulk(headline__startswith=\'Blah\')\n172. \n173.     def test_in_bulk_lots_of_ids(self):\n174.         test_range = 2000\n175.         max_query_params = connection.features.max_query_params\n176.         expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1\n177.         Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])\n178.         authors = {author.pk: author for author in Author.objects.all()}\n179.         with self.assertNumQueries(expected_num_queries):\n180.             self.assertEqual(Author.objects.in_bulk(authors), authors)\n181. \n182.     def test_in_bulk_with_field(self):\n183.         self.assertEqual(\n184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name=\'slug\'),\n185.             {\n186.                 self.a1.slug: self.a1,\n187.                 self.a2.slug: self.a2,\n188.                 self.a3.slug: self.a3,\n189.             }\n190.         )\n191. \n192.     def test_in_bulk_non_unique_field(self):\n193.         msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n194.         with self.assertRaisesMessage(ValueError, msg):\n195.             Article.objects.in_bulk([self.au1], field_name=\'author\')\n196. ', start_line_number=18, end_line_number=196), Context(relative_path='tests/lookup/models.py', content="19. class Author(models.Model):\n20.     name = models.CharField(max_length=100)\n21.     alias = models.CharField(max_length=50, null=True, blank=True)\n22. \n23.     class Meta:\n24.         ordering = ('name',)\n25. \n26. \n27. class Article(models.Model):\n28.     headline = models.CharField(max_length=100)\n29.     pub_date = models.DateTimeField()\n30.     author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)\n31.     slug = models.SlugField(unique=True, blank=True, null=True)\n32. \n33.     class Meta:\n34.         ordering = ('-pub_date', 'headline')\n35. \n36.     def __str__(self):\n37.         return self.headline\n38. ", start_line_number=19, end_line_number=38), Context(relative_path='tests/constraints/tests.py', content='119. class UniqueConstraintTests(TestCase):\n120.     @classmethod\n121.     def setUpTestData(cls):\n122.         cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([\n123.             UniqueConstraintProduct(name=\'p1\', color=\'red\'),\n124.             UniqueConstraintProduct(name=\'p2\'),\n125.         ])\n126. \n127.     def test_eq(self):\n128.         self.assertEqual(\n129.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n130.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n131.         )\n132.         self.assertEqual(\n133.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n134.             mock.ANY,\n135.         )\n136.         self.assertNotEqual(\n137.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n138.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique2\'),\n139.         )\n140.         self.assertNotEqual(\n141.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n142.             models.UniqueConstraint(fields=[\'foo\', \'baz\'], name=\'unique\'),\n143.         )\n144.         self.assertNotEqual(models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'), 1)\n145. \n146.     def test_eq_with_condition(self):\n147.         self.assertEqual(\n148.             models.UniqueConstraint(\n149.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n150.                 condition=models.Q(foo=models.F(\'bar\'))\n151.             ),\n152.             models.UniqueConstraint(\n153.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n154.                 condition=models.Q(foo=models.F(\'bar\'))),\n155.         )\n156.         self.assertNotEqual(\n157.             models.UniqueConstraint(\n158.                 fields=[\'foo\', \'bar\'],\n159.                 name=\'unique\',\n160.                 condition=models.Q(foo=models.F(\'bar\'))\n161.             ),\n162.             models.UniqueConstraint(\n163.                 fields=[\'foo\', \'bar\'],\n164.                 name=\'unique\',\n165.                 condition=models.Q(foo=models.F(\'baz\'))\n166.             ),\n167.         )\n168. \n169.     def test_repr(self):\n170.         fields = [\'foo\', \'bar\']\n171.         name = \'unique_fields\'\n172.         constraint = models.UniqueConstraint(fields=fields, name=name)\n173.         self.assertEqual(\n174.             repr(constraint),\n175.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\'>",\n176.         )\n177. \n178.     def test_repr_with_condition(self):\n179.         constraint = models.UniqueConstraint(\n180.             fields=[\'foo\', \'bar\'],\n181.             name=\'unique_fields\',\n182.             condition=models.Q(foo=models.F(\'bar\')),\n183.         )\n184.         self.assertEqual(\n185.             repr(constraint),\n186.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\' "\n187.             "condition=(AND: (\'foo\', F(bar)))>",\n188.         )\n189. \n190.     def test_deconstruction(self):\n191.         fields = [\'foo\', \'bar\']\n192.         name = \'unique_fields\'\n193.         constraint = models.UniqueConstraint(fields=fields, name=name)\n194.         path, args, kwargs = constraint.deconstruct()\n195.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n196.         self.assertEqual(args, ())\n197.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name})\n198. \n199.     def test_deconstruction_with_condition(self):\n200.         fields = [\'foo\', \'bar\']\n201.         name = \'unique_fields\'\n202.         condition = models.Q(foo=models.F(\'bar\'))\n203.         constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)\n204.         path, args, kwargs = constraint.deconstruct()\n205.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n206.         self.assertEqual(args, ())\n207.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name, \'condition\': condition})\n208. \n209.     def test_database_constraint(self):\n210.         with self.assertRaises(IntegrityError):\n211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)\n212. \n213.     @skipUnlessDBFeature(\'supports_partial_indexes\')\n214.     def test_database_constraint_with_condition(self):\n215.         UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n216.         UniqueConstraintConditionProduct.objects.create(name=\'p2\')\n217.         with self.assertRaises(IntegrityError):\n218.             UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n219. \n220.     def test_model_validation(self):\n221.         msg = \'Unique constraint product with this Name and Color already exists.\'\n222.         with self.assertRaisesMessage(ValidationError, msg):\n223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()\n224. ', start_line_number=119, end_line_number=224), Context(relative_path='tests/validation/test_unique.py', content='15. class GetUniqueCheckTests(unittest.TestCase):\n16.     def test_unique_fields_get_collected(self):\n17.         m = UniqueFieldsModel()\n18.         self.assertEqual(\n19.             ([(UniqueFieldsModel, (\'id\',)),\n20.               (UniqueFieldsModel, (\'unique_charfield\',)),\n21.               (UniqueFieldsModel, (\'unique_integerfield\',))],\n22.              []),\n23.             m._get_unique_checks()\n24.         )\n25. \n26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):\n27.         m = UniqueTogetherModel()\n28.         self.assertEqual(\n29.             ([(UniqueTogetherModel, (\'ifield\', \'cfield\')),\n30.               (UniqueTogetherModel, (\'ifield\', \'efield\')),\n31.               (UniqueTogetherModel, (\'id\',))],\n32.              []),\n33.             m._get_unique_checks()\n34.         )\n35. \n36.     def test_unique_together_normalization(self):\n37.         """\n38.         Test the Meta.unique_together normalization with different sorts of\n39.         objects.\n40.         """\n41.         data = {\n42.             \'2-tuple\': ((\'foo\', \'bar\'), ((\'foo\', \'bar\'),)),\n43.             \'list\': ([\'foo\', \'bar\'], ((\'foo\', \'bar\'),)),\n44.             \'already normalized\': (((\'foo\', \'bar\'), (\'bar\', \'baz\')),\n45.                                    ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n46.             \'set\': ({(\'foo\', \'bar\'), (\'bar\', \'baz\')},  # Ref #21469\n47.                     ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n48.         }\n49. \n50.         for unique_together, normalized in data.values():\n51.             class M(models.Model):\n52.                 foo = models.IntegerField()\n53.                 bar = models.IntegerField()\n54.                 baz = models.IntegerField()\n55. \n56.                 Meta = type(\'Meta\', (), {\n57.                     \'unique_together\': unique_together,\n58.                     \'apps\': Apps()\n59.                 })\n60. \n61.             checks, _ = M()._get_unique_checks()\n62.             for t in normalized:\n63.                 check = (M, t)\n64.                 self.assertIn(check, checks)\n65. \n66.     def test_primary_key_is_considered_unique(self):\n67.         m = CustomPKModel()\n68.         self.assertEqual(([(CustomPKModel, (\'my_pk_field\',))], []), m._get_unique_checks())\n69. \n70.     def test_unique_for_date_gets_picked_up(self):\n71.         m = UniqueForDateModel()\n72.         self.assertEqual((\n73.             [(UniqueForDateModel, (\'id\',))],\n74.             [(UniqueForDateModel, \'date\', \'count\', \'start_date\'),\n75.              (UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n76.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n77.         ), m._get_unique_checks()\n78.         )\n79. \n80.     def test_unique_for_date_exclusion(self):\n81.         m = UniqueForDateModel()\n82.         self.assertEqual((\n83.             [(UniqueForDateModel, (\'id\',))],\n84.             [(UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n85.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n86.         ), m._get_unique_checks(exclude=\'start_date\')\n87.         )\n88. ', start_line_number=15, end_line_number=88)]
2025-10-06 07:32:56,363 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 07:32:56,363 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-10-06 07:32:56,363 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='tests/lookup/tests.py', content='1. import collections.abc\n2. from datetime import datetime\n3. from math import ceil\n4. from operator import attrgetter\n5. \n6. from django.core.exceptions import FieldError\n7. from django.db import connection\n8. from django.db.models import Exists, Max, OuterRef\n9. from django.db.models.functions import Substr\n10. from django.test import TestCase, skipUnlessDBFeature\n11. from django.utils.deprecation import RemovedInDjango40Warning\n12. \n13. from .models import (\n14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n15. )', start_line_number=1, end_line_number=15), Context(relative_path='tests/constraints/models.py', content="37. class UniqueConstraintProduct(models.Model):\n38.     name = models.CharField(max_length=255)\n39.     color = models.CharField(max_length=32, null=True)\n40. \n41.     class Meta:\n42.         constraints = [\n43.             models.UniqueConstraint(fields=['name', 'color'], name='name_color_uniq'),\n44.         ]\n45. ", start_line_number=37, end_line_number=45), Context(relative_path='tests/lookup/tests.py', content='18. class LookupTests(TestCase):\n19. \n20.     @classmethod\n21.     def setUpTestData(cls):\n22.         # Create a few Authors.\n23.         cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n24.         cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n25.         # Create a few Articles.\n26.         cls.a1 = Article.objects.create(\n27.             headline=\'Article 1\',\n28.             pub_date=datetime(2005, 7, 26),\n29.             author=cls.au1,\n30.             slug=\'a1\',\n31.         )\n32.         cls.a2 = Article.objects.create(\n33.             headline=\'Article 2\',\n34.             pub_date=datetime(2005, 7, 27),\n35.             author=cls.au1,\n36.             slug=\'a2\',\n37.         )\n38.         cls.a3 = Article.objects.create(\n39.             headline=\'Article 3\',\n40.             pub_date=datetime(2005, 7, 27),\n41.             author=cls.au1,\n42.             slug=\'a3\',\n43.         )\n44.         cls.a4 = Article.objects.create(\n45.             headline=\'Article 4\',\n46.             pub_date=datetime(2005, 7, 28),\n47.             author=cls.au1,\n48.             slug=\'a4\',\n49.         )\n50.         cls.a5 = Article.objects.create(\n51.             headline=\'Article 5\',\n52.             pub_date=datetime(2005, 8, 1, 9, 0),\n53.             author=cls.au2,\n54.             slug=\'a5\',\n55.         )\n56.         cls.a6 = Article.objects.create(\n57.             headline=\'Article 6\',\n58.             pub_date=datetime(2005, 8, 1, 8, 0),\n59.             author=cls.au2,\n60.             slug=\'a6\',\n61.         )\n62.         cls.a7 = Article.objects.create(\n63.             headline=\'Article 7\',\n64.             pub_date=datetime(2005, 7, 27),\n65.             author=cls.au2,\n66.             slug=\'a7\',\n67.         )\n68.         # Create a few Tags.\n69.         cls.t1 = Tag.objects.create(name=\'Tag 1\')\n70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n71.         cls.t2 = Tag.objects.create(name=\'Tag 2\')\n72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n73.         cls.t3 = Tag.objects.create(name=\'Tag 3\')\n74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n75. \n76.     def test_exists(self):\n77.         # We can use .exists() to check that there are some\n78.         self.assertTrue(Article.objects.exists())\n79.         for a in Article.objects.all():\n80.             a.delete()\n81.         # There should be none now!\n82.         self.assertFalse(Article.objects.exists())\n83. \n84.     def test_lookup_int_as_str(self):\n85.         # Integer value can be queried using string\n86.         self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),\n87.                                  [\'<Article: Article 1>\'])\n88. \n89.     @skipUnlessDBFeature(\'supports_date_lookup_using_string\')\n90.     def test_lookup_date_as_str(self):\n91.         # A date lookup can be performed using a string search\n92.         self.assertQuerysetEqual(\n93.             Article.objects.filter(pub_date__startswith=\'2005\'),\n94.             [\n95.                 \'<Article: Article 5>\',\n96.                 \'<Article: Article 6>\',\n97.                 \'<Article: Article 4>\',\n98.                 \'<Article: Article 2>\',\n99.                 \'<Article: Article 3>\',\n100.                 \'<Article: Article 7>\',\n101.                 \'<Article: Article 1>\',\n102.             ]\n103.         )\n104. \n105.     def test_iterator(self):\n106.         # Each QuerySet gets iterator(), which is a generator that "lazily"\n107.         # returns results using database-level iteration.\n108.         self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)\n109. \n110.         self.assertQuerysetEqual(\n111.             Article.objects.iterator(),\n112.             [\n113.                 \'Article 5\',\n114.                 \'Article 6\',\n115.                 \'Article 4\',\n116.                 \'Article 2\',\n117.                 \'Article 3\',\n118.                 \'Article 7\',\n119.                 \'Article 1\',\n120.             ],\n121.             transform=attrgetter(\'headline\')\n122.         )\n123.         # iterator() can be used on any QuerySet.\n124.         self.assertQuerysetEqual(\n125.             Article.objects.filter(headline__endswith=\'4\').iterator(),\n126.             [\'Article 4\'],\n127.             transform=attrgetter(\'headline\'))\n128. \n129.     def test_count(self):\n130.         # count() returns the number of objects matching search criteria.\n131.         self.assertEqual(Article.objects.count(), 7)\n132.         self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)\n133.         self.assertEqual(Article.objects.filter(headline__startswith=\'Blah blah\').count(), 0)\n134. \n135.         # count() should respect sliced query sets.\n136.         articles = Article.objects.all()\n137.         self.assertEqual(articles.count(), 7)\n138.         self.assertEqual(articles[:4].count(), 4)\n139.         self.assertEqual(articles[1:100].count(), 6)\n140.         self.assertEqual(articles[10:100].count(), 0)\n141. \n142.         # Date and date/time lookups can also be done with strings.\n143.         self.assertEqual(Article.objects.filter(pub_date__exact=\'2005-07-27 00:00:00\').count(), 3)\n144. \n145.     def test_in_bulk(self):\n146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n148.         self.assertEqual(arts[self.a1.id], self.a1)\n149.         self.assertEqual(arts[self.a2.id], self.a2)\n150.         self.assertEqual(\n151.             Article.objects.in_bulk(),\n152.             {\n153.                 self.a1.id: self.a1,\n154.                 self.a2.id: self.a2,\n155.                 self.a3.id: self.a3,\n156.                 self.a4.id: self.a4,\n157.                 self.a5.id: self.a5,\n158.                 self.a6.id: self.a6,\n159.                 self.a7.id: self.a7,\n160.             }\n161.         )\n162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n166.         self.assertEqual(Article.objects.in_bulk([1000]), {})\n167.         self.assertEqual(Article.objects.in_bulk([]), {})\n168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})\n170.         with self.assertRaises(TypeError):\n171.             Article.objects.in_bulk(headline__startswith=\'Blah\')\n172. \n173.     def test_in_bulk_lots_of_ids(self):\n174.         test_range = 2000\n175.         max_query_params = connection.features.max_query_params\n176.         expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1\n177.         Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])\n178.         authors = {author.pk: author for author in Author.objects.all()}\n179.         with self.assertNumQueries(expected_num_queries):\n180.             self.assertEqual(Author.objects.in_bulk(authors), authors)\n181. \n182.     def test_in_bulk_with_field(self):\n183.         self.assertEqual(\n184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name=\'slug\'),\n185.             {\n186.                 self.a1.slug: self.a1,\n187.                 self.a2.slug: self.a2,\n188.                 self.a3.slug: self.a3,\n189.             }\n190.         )\n191. \n192.     def test_in_bulk_non_unique_field(self):\n193.         msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n194.         with self.assertRaisesMessage(ValueError, msg):\n195.             Article.objects.in_bulk([self.au1], field_name=\'author\')\n196. ', start_line_number=18, end_line_number=196), Context(relative_path='tests/lookup/models.py', content="19. class Author(models.Model):\n20.     name = models.CharField(max_length=100)\n21.     alias = models.CharField(max_length=50, null=True, blank=True)\n22. \n23.     class Meta:\n24.         ordering = ('name',)\n25. \n26. \n27. class Article(models.Model):\n28.     headline = models.CharField(max_length=100)\n29.     pub_date = models.DateTimeField()\n30.     author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)\n31.     slug = models.SlugField(unique=True, blank=True, null=True)\n32. \n33.     class Meta:\n34.         ordering = ('-pub_date', 'headline')\n35. \n36.     def __str__(self):\n37.         return self.headline\n38. ", start_line_number=19, end_line_number=38), Context(relative_path='tests/constraints/tests.py', content='119. class UniqueConstraintTests(TestCase):\n120.     @classmethod\n121.     def setUpTestData(cls):\n122.         cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([\n123.             UniqueConstraintProduct(name=\'p1\', color=\'red\'),\n124.             UniqueConstraintProduct(name=\'p2\'),\n125.         ])\n126. \n127.     def test_eq(self):\n128.         self.assertEqual(\n129.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n130.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n131.         )\n132.         self.assertEqual(\n133.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n134.             mock.ANY,\n135.         )\n136.         self.assertNotEqual(\n137.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n138.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique2\'),\n139.         )\n140.         self.assertNotEqual(\n141.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n142.             models.UniqueConstraint(fields=[\'foo\', \'baz\'], name=\'unique\'),\n143.         )\n144.         self.assertNotEqual(models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'), 1)\n145. \n146.     def test_eq_with_condition(self):\n147.         self.assertEqual(\n148.             models.UniqueConstraint(\n149.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n150.                 condition=models.Q(foo=models.F(\'bar\'))\n151.             ),\n152.             models.UniqueConstraint(\n153.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n154.                 condition=models.Q(foo=models.F(\'bar\'))),\n155.         )\n156.         self.assertNotEqual(\n157.             models.UniqueConstraint(\n158.                 fields=[\'foo\', \'bar\'],\n159.                 name=\'unique\',\n160.                 condition=models.Q(foo=models.F(\'bar\'))\n161.             ),\n162.             models.UniqueConstraint(\n163.                 fields=[\'foo\', \'bar\'],\n164.                 name=\'unique\',\n165.                 condition=models.Q(foo=models.F(\'baz\'))\n166.             ),\n167.         )\n168. \n169.     def test_repr(self):\n170.         fields = [\'foo\', \'bar\']\n171.         name = \'unique_fields\'\n172.         constraint = models.UniqueConstraint(fields=fields, name=name)\n173.         self.assertEqual(\n174.             repr(constraint),\n175.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\'>",\n176.         )\n177. \n178.     def test_repr_with_condition(self):\n179.         constraint = models.UniqueConstraint(\n180.             fields=[\'foo\', \'bar\'],\n181.             name=\'unique_fields\',\n182.             condition=models.Q(foo=models.F(\'bar\')),\n183.         )\n184.         self.assertEqual(\n185.             repr(constraint),\n186.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\' "\n187.             "condition=(AND: (\'foo\', F(bar)))>",\n188.         )\n189. \n190.     def test_deconstruction(self):\n191.         fields = [\'foo\', \'bar\']\n192.         name = \'unique_fields\'\n193.         constraint = models.UniqueConstraint(fields=fields, name=name)\n194.         path, args, kwargs = constraint.deconstruct()\n195.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n196.         self.assertEqual(args, ())\n197.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name})\n198. \n199.     def test_deconstruction_with_condition(self):\n200.         fields = [\'foo\', \'bar\']\n201.         name = \'unique_fields\'\n202.         condition = models.Q(foo=models.F(\'bar\'))\n203.         constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)\n204.         path, args, kwargs = constraint.deconstruct()\n205.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n206.         self.assertEqual(args, ())\n207.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name, \'condition\': condition})\n208. \n209.     def test_database_constraint(self):\n210.         with self.assertRaises(IntegrityError):\n211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)\n212. \n213.     @skipUnlessDBFeature(\'supports_partial_indexes\')\n214.     def test_database_constraint_with_condition(self):\n215.         UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n216.         UniqueConstraintConditionProduct.objects.create(name=\'p2\')\n217.         with self.assertRaises(IntegrityError):\n218.             UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n219. \n220.     def test_model_validation(self):\n221.         msg = \'Unique constraint product with this Name and Color already exists.\'\n222.         with self.assertRaisesMessage(ValidationError, msg):\n223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()\n224. ', start_line_number=119, end_line_number=224), Context(relative_path='tests/validation/test_unique.py', content='15. class GetUniqueCheckTests(unittest.TestCase):\n16.     def test_unique_fields_get_collected(self):\n17.         m = UniqueFieldsModel()\n18.         self.assertEqual(\n19.             ([(UniqueFieldsModel, (\'id\',)),\n20.               (UniqueFieldsModel, (\'unique_charfield\',)),\n21.               (UniqueFieldsModel, (\'unique_integerfield\',))],\n22.              []),\n23.             m._get_unique_checks()\n24.         )\n25. \n26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):\n27.         m = UniqueTogetherModel()\n28.         self.assertEqual(\n29.             ([(UniqueTogetherModel, (\'ifield\', \'cfield\')),\n30.               (UniqueTogetherModel, (\'ifield\', \'efield\')),\n31.               (UniqueTogetherModel, (\'id\',))],\n32.              []),\n33.             m._get_unique_checks()\n34.         )\n35. \n36.     def test_unique_together_normalization(self):\n37.         """\n38.         Test the Meta.unique_together normalization with different sorts of\n39.         objects.\n40.         """\n41.         data = {\n42.             \'2-tuple\': ((\'foo\', \'bar\'), ((\'foo\', \'bar\'),)),\n43.             \'list\': ([\'foo\', \'bar\'], ((\'foo\', \'bar\'),)),\n44.             \'already normalized\': (((\'foo\', \'bar\'), (\'bar\', \'baz\')),\n45.                                    ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n46.             \'set\': ({(\'foo\', \'bar\'), (\'bar\', \'baz\')},  # Ref #21469\n47.                     ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n48.         }\n49. \n50.         for unique_together, normalized in data.values():\n51.             class M(models.Model):\n52.                 foo = models.IntegerField()\n53.                 bar = models.IntegerField()\n54.                 baz = models.IntegerField()\n55. \n56.                 Meta = type(\'Meta\', (), {\n57.                     \'unique_together\': unique_together,\n58.                     \'apps\': Apps()\n59.                 })\n60. \n61.             checks, _ = M()._get_unique_checks()\n62.             for t in normalized:\n63.                 check = (M, t)\n64.                 self.assertIn(check, checks)\n65. \n66.     def test_primary_key_is_considered_unique(self):\n67.         m = CustomPKModel()\n68.         self.assertEqual(([(CustomPKModel, (\'my_pk_field\',))], []), m._get_unique_checks())\n69. \n70.     def test_unique_for_date_gets_picked_up(self):\n71.         m = UniqueForDateModel()\n72.         self.assertEqual((\n73.             [(UniqueForDateModel, (\'id\',))],\n74.             [(UniqueForDateModel, \'date\', \'count\', \'start_date\'),\n75.              (UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n76.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n77.         ), m._get_unique_checks()\n78.         )\n79. \n80.     def test_unique_for_date_exclusion(self):\n81.         m = UniqueForDateModel()\n82.         self.assertEqual((\n83.             [(UniqueForDateModel, (\'id\',))],\n84.             [(UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n85.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n86.         ), m._get_unique_checks(exclude=\'start_date\')\n87.         )\n88. ', start_line_number=15, end_line_number=88)]
2025-10-06 07:32:56,364 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\nAllow QuerySet.in_bulk() for fields with total UniqueConstraints.\n\nIssue description: \nDescription\n\t\nIf a field is unique by UniqueConstraint instead of unique=True running in_bulk() on that field will fail.\nConsider:\nclass Article(models.Model):\n\tslug = models.CharField(max_length=255)\n\t\n\tclass Meta:\n\t\tconstraints = [\n\t\t\tmodels.UniqueConstraint(fields=["slug"], name="%(app_label)s_%(class)s_slug_unq")\n\t\t]\n>>> Article.objects.in_bulk(field_name="slug")\nTraceback (most recent call last):\n File "/usr/local/lib/python3.8/code.py", line 90, in runcode\n\texec(code, self.locals)\n File "<console>", line 1, in <module>\n File "/app/venv/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method\n\treturn getattr(self.get_queryset(), name)(*args, **kwargs)\n File "/app/venv/lib/python3.8/site-packages/django/db/models/query.py", line 680, in in_bulk\n\traise ValueError("in_bulk()\'s field_name must be a unique field but %r isn\'t." % field_name)\nValueError: in_bulk()\'s field_name must be a unique field but \'slug\' isn\'t.\nIt should be pretty simple to fix this and I have a patch if accepted.\n\nIssue comments:\n\n\nBug reproducing context:\nFile: tests/lookup/tests.py\nLine number range: 1 - 15\nContent:\n1. import collections.abc\n2. from datetime import datetime\n3. from math import ceil\n4. from operator import attrgetter\n5. \n6. from django.core.exceptions import FieldError\n7. from django.db import connection\n8. from django.db.models import Exists, Max, OuterRef\n9. from django.db.models.functions import Substr\n10. from django.test import TestCase, skipUnlessDBFeature\n11. from django.utils.deprecation import RemovedInDjango40Warning\n12. \n13. from .models import (\n14.     Article, Author, Freebie, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n15. )\n\n\nFile: tests/constraints/models.py\nLine number range: 37 - 45\nContent:\n37. class UniqueConstraintProduct(models.Model):\n38.     name = models.CharField(max_length=255)\n39.     color = models.CharField(max_length=32, null=True)\n40. \n41.     class Meta:\n42.         constraints = [\n43.             models.UniqueConstraint(fields=[\'name\', \'color\'], name=\'name_color_uniq\'),\n44.         ]\n45. \n\n\nFile: tests/lookup/tests.py\nLine number range: 18 - 196\nContent:\n18. class LookupTests(TestCase):\n19. \n20.     @classmethod\n21.     def setUpTestData(cls):\n22.         # Create a few Authors.\n23.         cls.au1 = Author.objects.create(name=\'Author 1\', alias=\'a1\')\n24.         cls.au2 = Author.objects.create(name=\'Author 2\', alias=\'a2\')\n25.         # Create a few Articles.\n26.         cls.a1 = Article.objects.create(\n27.             headline=\'Article 1\',\n28.             pub_date=datetime(2005, 7, 26),\n29.             author=cls.au1,\n30.             slug=\'a1\',\n31.         )\n32.         cls.a2 = Article.objects.create(\n33.             headline=\'Article 2\',\n34.             pub_date=datetime(2005, 7, 27),\n35.             author=cls.au1,\n36.             slug=\'a2\',\n37.         )\n38.         cls.a3 = Article.objects.create(\n39.             headline=\'Article 3\',\n40.             pub_date=datetime(2005, 7, 27),\n41.             author=cls.au1,\n42.             slug=\'a3\',\n43.         )\n44.         cls.a4 = Article.objects.create(\n45.             headline=\'Article 4\',\n46.             pub_date=datetime(2005, 7, 28),\n47.             author=cls.au1,\n48.             slug=\'a4\',\n49.         )\n50.         cls.a5 = Article.objects.create(\n51.             headline=\'Article 5\',\n52.             pub_date=datetime(2005, 8, 1, 9, 0),\n53.             author=cls.au2,\n54.             slug=\'a5\',\n55.         )\n56.         cls.a6 = Article.objects.create(\n57.             headline=\'Article 6\',\n58.             pub_date=datetime(2005, 8, 1, 8, 0),\n59.             author=cls.au2,\n60.             slug=\'a6\',\n61.         )\n62.         cls.a7 = Article.objects.create(\n63.             headline=\'Article 7\',\n64.             pub_date=datetime(2005, 7, 27),\n65.             author=cls.au2,\n66.             slug=\'a7\',\n67.         )\n68.         # Create a few Tags.\n69.         cls.t1 = Tag.objects.create(name=\'Tag 1\')\n70.         cls.t1.articles.add(cls.a1, cls.a2, cls.a3)\n71.         cls.t2 = Tag.objects.create(name=\'Tag 2\')\n72.         cls.t2.articles.add(cls.a3, cls.a4, cls.a5)\n73.         cls.t3 = Tag.objects.create(name=\'Tag 3\')\n74.         cls.t3.articles.add(cls.a5, cls.a6, cls.a7)\n75. \n76.     def test_exists(self):\n77.         # We can use .exists() to check that there are some\n78.         self.assertTrue(Article.objects.exists())\n79.         for a in Article.objects.all():\n80.             a.delete()\n81.         # There should be none now!\n82.         self.assertFalse(Article.objects.exists())\n83. \n84.     def test_lookup_int_as_str(self):\n85.         # Integer value can be queried using string\n86.         self.assertQuerysetEqual(Article.objects.filter(id__iexact=str(self.a1.id)),\n87.                                  [\'<Article: Article 1>\'])\n88. \n89.     @skipUnlessDBFeature(\'supports_date_lookup_using_string\')\n90.     def test_lookup_date_as_str(self):\n91.         # A date lookup can be performed using a string search\n92.         self.assertQuerysetEqual(\n93.             Article.objects.filter(pub_date__startswith=\'2005\'),\n94.             [\n95.                 \'<Article: Article 5>\',\n96.                 \'<Article: Article 6>\',\n97.                 \'<Article: Article 4>\',\n98.                 \'<Article: Article 2>\',\n99.                 \'<Article: Article 3>\',\n100.                 \'<Article: Article 7>\',\n101.                 \'<Article: Article 1>\',\n102.             ]\n103.         )\n104. \n105.     def test_iterator(self):\n106.         # Each QuerySet gets iterator(), which is a generator that "lazily"\n107.         # returns results using database-level iteration.\n108.         self.assertIsInstance(Article.objects.iterator(), collections.abc.Iterator)\n109. \n110.         self.assertQuerysetEqual(\n111.             Article.objects.iterator(),\n112.             [\n113.                 \'Article 5\',\n114.                 \'Article 6\',\n115.                 \'Article 4\',\n116.                 \'Article 2\',\n117.                 \'Article 3\',\n118.                 \'Article 7\',\n119.                 \'Article 1\',\n120.             ],\n121.             transform=attrgetter(\'headline\')\n122.         )\n123.         # iterator() can be used on any QuerySet.\n124.         self.assertQuerysetEqual(\n125.             Article.objects.filter(headline__endswith=\'4\').iterator(),\n126.             [\'Article 4\'],\n127.             transform=attrgetter(\'headline\'))\n128. \n129.     def test_count(self):\n130.         # count() returns the number of objects matching search criteria.\n131.         self.assertEqual(Article.objects.count(), 7)\n132.         self.assertEqual(Article.objects.filter(pub_date__exact=datetime(2005, 7, 27)).count(), 3)\n133.         self.assertEqual(Article.objects.filter(headline__startswith=\'Blah blah\').count(), 0)\n134. \n135.         # count() should respect sliced query sets.\n136.         articles = Article.objects.all()\n137.         self.assertEqual(articles.count(), 7)\n138.         self.assertEqual(articles[:4].count(), 4)\n139.         self.assertEqual(articles[1:100].count(), 6)\n140.         self.assertEqual(articles[10:100].count(), 0)\n141. \n142.         # Date and date/time lookups can also be done with strings.\n143.         self.assertEqual(Article.objects.filter(pub_date__exact=\'2005-07-27 00:00:00\').count(), 3)\n144. \n145.     def test_in_bulk(self):\n146.         # in_bulk() takes a list of IDs and returns a dictionary mapping IDs to objects.\n147.         arts = Article.objects.in_bulk([self.a1.id, self.a2.id])\n148.         self.assertEqual(arts[self.a1.id], self.a1)\n149.         self.assertEqual(arts[self.a2.id], self.a2)\n150.         self.assertEqual(\n151.             Article.objects.in_bulk(),\n152.             {\n153.                 self.a1.id: self.a1,\n154.                 self.a2.id: self.a2,\n155.                 self.a3.id: self.a3,\n156.                 self.a4.id: self.a4,\n157.                 self.a5.id: self.a5,\n158.                 self.a6.id: self.a6,\n159.                 self.a7.id: self.a7,\n160.             }\n161.         )\n162.         self.assertEqual(Article.objects.in_bulk([self.a3.id]), {self.a3.id: self.a3})\n163.         self.assertEqual(Article.objects.in_bulk({self.a3.id}), {self.a3.id: self.a3})\n164.         self.assertEqual(Article.objects.in_bulk(frozenset([self.a3.id])), {self.a3.id: self.a3})\n165.         self.assertEqual(Article.objects.in_bulk((self.a3.id,)), {self.a3.id: self.a3})\n166.         self.assertEqual(Article.objects.in_bulk([1000]), {})\n167.         self.assertEqual(Article.objects.in_bulk([]), {})\n168.         self.assertEqual(Article.objects.in_bulk(iter([self.a1.id])), {self.a1.id: self.a1})\n169.         self.assertEqual(Article.objects.in_bulk(iter([])), {})\n170.         with self.assertRaises(TypeError):\n171.             Article.objects.in_bulk(headline__startswith=\'Blah\')\n172. \n173.     def test_in_bulk_lots_of_ids(self):\n174.         test_range = 2000\n175.         max_query_params = connection.features.max_query_params\n176.         expected_num_queries = ceil(test_range / max_query_params) if max_query_params else 1\n177.         Author.objects.bulk_create([Author() for i in range(test_range - Author.objects.count())])\n178.         authors = {author.pk: author for author in Author.objects.all()}\n179.         with self.assertNumQueries(expected_num_queries):\n180.             self.assertEqual(Author.objects.in_bulk(authors), authors)\n181. \n182.     def test_in_bulk_with_field(self):\n183.         self.assertEqual(\n184.             Article.objects.in_bulk([self.a1.slug, self.a2.slug, self.a3.slug], field_name=\'slug\'),\n185.             {\n186.                 self.a1.slug: self.a1,\n187.                 self.a2.slug: self.a2,\n188.                 self.a3.slug: self.a3,\n189.             }\n190.         )\n191. \n192.     def test_in_bulk_non_unique_field(self):\n193.         msg = "in_bulk()\'s field_name must be a unique field but \'author\' isn\'t."\n194.         with self.assertRaisesMessage(ValueError, msg):\n195.             Article.objects.in_bulk([self.au1], field_name=\'author\')\n196. \n\n\nFile: tests/lookup/models.py\nLine number range: 19 - 38\nContent:\n19. class Author(models.Model):\n20.     name = models.CharField(max_length=100)\n21.     alias = models.CharField(max_length=50, null=True, blank=True)\n22. \n23.     class Meta:\n24.         ordering = (\'name\',)\n25. \n26. \n27. class Article(models.Model):\n28.     headline = models.CharField(max_length=100)\n29.     pub_date = models.DateTimeField()\n30.     author = models.ForeignKey(Author, models.SET_NULL, blank=True, null=True)\n31.     slug = models.SlugField(unique=True, blank=True, null=True)\n32. \n33.     class Meta:\n34.         ordering = (\'-pub_date\', \'headline\')\n35. \n36.     def __str__(self):\n37.         return self.headline\n38. \n\n\nFile: tests/constraints/tests.py\nLine number range: 119 - 224\nContent:\n119. class UniqueConstraintTests(TestCase):\n120.     @classmethod\n121.     def setUpTestData(cls):\n122.         cls.p1, cls.p2 = UniqueConstraintProduct.objects.bulk_create([\n123.             UniqueConstraintProduct(name=\'p1\', color=\'red\'),\n124.             UniqueConstraintProduct(name=\'p2\'),\n125.         ])\n126. \n127.     def test_eq(self):\n128.         self.assertEqual(\n129.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n130.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n131.         )\n132.         self.assertEqual(\n133.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n134.             mock.ANY,\n135.         )\n136.         self.assertNotEqual(\n137.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n138.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique2\'),\n139.         )\n140.         self.assertNotEqual(\n141.             models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'),\n142.             models.UniqueConstraint(fields=[\'foo\', \'baz\'], name=\'unique\'),\n143.         )\n144.         self.assertNotEqual(models.UniqueConstraint(fields=[\'foo\', \'bar\'], name=\'unique\'), 1)\n145. \n146.     def test_eq_with_condition(self):\n147.         self.assertEqual(\n148.             models.UniqueConstraint(\n149.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n150.                 condition=models.Q(foo=models.F(\'bar\'))\n151.             ),\n152.             models.UniqueConstraint(\n153.                 fields=[\'foo\', \'bar\'], name=\'unique\',\n154.                 condition=models.Q(foo=models.F(\'bar\'))),\n155.         )\n156.         self.assertNotEqual(\n157.             models.UniqueConstraint(\n158.                 fields=[\'foo\', \'bar\'],\n159.                 name=\'unique\',\n160.                 condition=models.Q(foo=models.F(\'bar\'))\n161.             ),\n162.             models.UniqueConstraint(\n163.                 fields=[\'foo\', \'bar\'],\n164.                 name=\'unique\',\n165.                 condition=models.Q(foo=models.F(\'baz\'))\n166.             ),\n167.         )\n168. \n169.     def test_repr(self):\n170.         fields = [\'foo\', \'bar\']\n171.         name = \'unique_fields\'\n172.         constraint = models.UniqueConstraint(fields=fields, name=name)\n173.         self.assertEqual(\n174.             repr(constraint),\n175.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\'>",\n176.         )\n177. \n178.     def test_repr_with_condition(self):\n179.         constraint = models.UniqueConstraint(\n180.             fields=[\'foo\', \'bar\'],\n181.             name=\'unique_fields\',\n182.             condition=models.Q(foo=models.F(\'bar\')),\n183.         )\n184.         self.assertEqual(\n185.             repr(constraint),\n186.             "<UniqueConstraint: fields=(\'foo\', \'bar\') name=\'unique_fields\' "\n187.             "condition=(AND: (\'foo\', F(bar)))>",\n188.         )\n189. \n190.     def test_deconstruction(self):\n191.         fields = [\'foo\', \'bar\']\n192.         name = \'unique_fields\'\n193.         constraint = models.UniqueConstraint(fields=fields, name=name)\n194.         path, args, kwargs = constraint.deconstruct()\n195.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n196.         self.assertEqual(args, ())\n197.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name})\n198. \n199.     def test_deconstruction_with_condition(self):\n200.         fields = [\'foo\', \'bar\']\n201.         name = \'unique_fields\'\n202.         condition = models.Q(foo=models.F(\'bar\'))\n203.         constraint = models.UniqueConstraint(fields=fields, name=name, condition=condition)\n204.         path, args, kwargs = constraint.deconstruct()\n205.         self.assertEqual(path, \'django.db.models.UniqueConstraint\')\n206.         self.assertEqual(args, ())\n207.         self.assertEqual(kwargs, {\'fields\': tuple(fields), \'name\': name, \'condition\': condition})\n208. \n209.     def test_database_constraint(self):\n210.         with self.assertRaises(IntegrityError):\n211.             UniqueConstraintProduct.objects.create(name=self.p1.name, color=self.p1.color)\n212. \n213.     @skipUnlessDBFeature(\'supports_partial_indexes\')\n214.     def test_database_constraint_with_condition(self):\n215.         UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n216.         UniqueConstraintConditionProduct.objects.create(name=\'p2\')\n217.         with self.assertRaises(IntegrityError):\n218.             UniqueConstraintConditionProduct.objects.create(name=\'p1\')\n219. \n220.     def test_model_validation(self):\n221.         msg = \'Unique constraint product with this Name and Color already exists.\'\n222.         with self.assertRaisesMessage(ValidationError, msg):\n223.             UniqueConstraintProduct(name=self.p1.name, color=self.p1.color).validate_unique()\n224. \n\n\nFile: tests/validation/test_unique.py\nLine number range: 15 - 88\nContent:\n15. class GetUniqueCheckTests(unittest.TestCase):\n16.     def test_unique_fields_get_collected(self):\n17.         m = UniqueFieldsModel()\n18.         self.assertEqual(\n19.             ([(UniqueFieldsModel, (\'id\',)),\n20.               (UniqueFieldsModel, (\'unique_charfield\',)),\n21.               (UniqueFieldsModel, (\'unique_integerfield\',))],\n22.              []),\n23.             m._get_unique_checks()\n24.         )\n25. \n26.     def test_unique_together_gets_picked_up_and_converted_to_tuple(self):\n27.         m = UniqueTogetherModel()\n28.         self.assertEqual(\n29.             ([(UniqueTogetherModel, (\'ifield\', \'cfield\')),\n30.               (UniqueTogetherModel, (\'ifield\', \'efield\')),\n31.               (UniqueTogetherModel, (\'id\',))],\n32.              []),\n33.             m._get_unique_checks()\n34.         )\n35. \n36.     def test_unique_together_normalization(self):\n37.         """\n38.         Test the Meta.unique_together normalization with different sorts of\n39.         objects.\n40.         """\n41.         data = {\n42.             \'2-tuple\': ((\'foo\', \'bar\'), ((\'foo\', \'bar\'),)),\n43.             \'list\': ([\'foo\', \'bar\'], ((\'foo\', \'bar\'),)),\n44.             \'already normalized\': (((\'foo\', \'bar\'), (\'bar\', \'baz\')),\n45.                                    ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n46.             \'set\': ({(\'foo\', \'bar\'), (\'bar\', \'baz\')},  # Ref #21469\n47.                     ((\'foo\', \'bar\'), (\'bar\', \'baz\'))),\n48.         }\n49. \n50.         for unique_together, normalized in data.values():\n51.             class M(models.Model):\n52.                 foo = models.IntegerField()\n53.                 bar = models.IntegerField()\n54.                 baz = models.IntegerField()\n55. \n56.                 Meta = type(\'Meta\', (), {\n57.                     \'unique_together\': unique_together,\n58.                     \'apps\': Apps()\n59.                 })\n60. \n61.             checks, _ = M()._get_unique_checks()\n62.             for t in normalized:\n63.                 check = (M, t)\n64.                 self.assertIn(check, checks)\n65. \n66.     def test_primary_key_is_considered_unique(self):\n67.         m = CustomPKModel()\n68.         self.assertEqual(([(CustomPKModel, (\'my_pk_field\',))], []), m._get_unique_checks())\n69. \n70.     def test_unique_for_date_gets_picked_up(self):\n71.         m = UniqueForDateModel()\n72.         self.assertEqual((\n73.             [(UniqueForDateModel, (\'id\',))],\n74.             [(UniqueForDateModel, \'date\', \'count\', \'start_date\'),\n75.              (UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n76.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n77.         ), m._get_unique_checks()\n78.         )\n79. \n80.     def test_unique_for_date_exclusion(self):\n81.         m = UniqueForDateModel()\n82.         self.assertEqual((\n83.             [(UniqueForDateModel, (\'id\',))],\n84.             [(UniqueForDateModel, \'year\', \'count\', \'end_date\'),\n85.              (UniqueForDateModel, \'month\', \'order\', \'end_date\')]\n86.         ), m._get_unique_checks(exclude=\'start_date\')\n87.         )\n88. \n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-06 07:33:46,955 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file', 'arguments': '{"relative_path": "tests/lookup/models.py"}'}, '__gemini_function_call_thought_signatures__': {'4550b550-49a6-4d9e-85da-0c883a4453b3': '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'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 15809, 'end_index': 16167, 'uri': 'https://github.com/django/django', 'license_': 'Python-2.0', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 7309, 'candidates_token_count': 13, 'total_token_count': 12914, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7309}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 5592, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -61.53492149939904, 'model_name': 'gemini-2.5-pro'} id='run--e4d073fd-e40c-4d6d-ad90-40411bbe0a35-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'tests/lookup/models.py'}, 'id': '4550b550-49a6-4d9e-85da-0c883a4453b3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7309, 'output_tokens': 13, 'total_tokens': 12914, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 5592}}
2025-10-06 07:33:50,384 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nfrom django.db import models\nfrom django.test import TestCase\n\n\nclass ArticleWithSlugConstraint(models.Model):\n    headline = models.CharField(max_length=100)\n    slug = models.CharField(max_length=255)\n\n    class Meta:\n        app_label = \'lookup\'\n        constraints = [\n            models.UniqueConstraint(fields=[\'slug\'], name=\'%(app_label)s_%(class)s_slug_unq\')\n        ]\n\n    def __str__(self):\n        return self.headline\n\n\nclass InBulkUniqueConstraintTest(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        cls.a1 = ArticleWithSlugConstraint.objects.create(headline=\'Article 1\', slug=\'a1\')\n        cls.a2 = ArticleWithSlugConstraint.objects.create(headline=\'Article 2\', slug=\'a2\')\n\n    def test_in_bulk_on_field_with_unique_constraint(self):\n        """\n        in_bulk() should work on a field with a UniqueConstraint.\n        """\n        articles = ArticleWithSlugConstraint.objects.in_bulk(field_name=\'slug\')\n        self.assertEqual(articles, {\'a1\': self.a1, \'a2\': self.a2})\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8557, 'candidates_token_count': 293, 'total_token_count': 8850, 'cached_content_token_count': 5908, 'prompt_tokens_details': [{'modality': 1, 'token_count': 13452}], 'cache_tokens_details': [{'modality': 1, 'token_count': 5908}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 293}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.014137159028557788, 'model_name': 'gemini-2.5-pro'} id='run--b7f4bb06-c8de-47af-bd4e-9462b1865af6-0' usage_metadata={'input_tokens': 8557, 'output_tokens': 293, 'total_tokens': 8850, 'input_token_details': {'cache_read': 5908}}
2025-10-06 07:34:05,971 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "from django.db import models\\nfrom django.test import TestCase\\n\\n\\nclass ArticleWithSlugConstraint(models.Model):\\n    headline = models.CharField(max_length=100)\\n    slug = models.CharField(max_length=255)\\n\\n    class Meta:\\n        app_label = \'lookup\'\\n        constraints = [\\n            models.UniqueConstraint(fields=[\'slug\'], name=\'%(app_label)s_%(class)s_slug_unq\')\\n        ]\\n\\n    def __str__(self):\\n        return self.headline\\n\\n\\nclass InBulkUniqueConstraintTest(TestCase):\\n    @classmethod\\n    def setUpTestData(cls):\\n        cls.a1 = ArticleWithSlugConstraint.objects.create(headline=\'Article 1\', slug=\'a1\')\\n        cls.a2 = ArticleWithSlugConstraint.objects.create(headline=\'Article 2\', slug=\'a2\')\\n\\n    def test_in_bulk_on_field_with_unique_constraint(self):\\n        \\"\\"\\"\\n        in_bulk() should work on a field with a UniqueConstraint.\\n        \\"\\"\\"\\n        articles = ArticleWithSlugConstraint.objects.in_bulk(field_name=\'slug\')\\n        self.assertEqual(articles, {\'a1\': self.a1, \'a2\': self.a2})\\n", "relative_path": "tests/lookup/test_in_bulk_unique_constraint.py"}'}, '__gemini_function_call_thought_signatures__': {'5865cb03-27a2-4829-a33b-ed923dc62396': 'CtQoAR/MhbYTfU1qU0Q9Xeo1txs0rO+k90cypRgdX5MEtfWgZeFbeEQW6YvkPHqPLDpAmH1z948ohRZNNs0RRu3x3UTg/nxh4+RDpdrSEY0WRnyOgBEE4hfqeSx3HPJVjW2jpBQ94RF3FUWSb4JmBzv4yu8AIsH3nKRjXTuYgiSZSOs5H08Qr1ZwPYucZsDpXdRyfzfDlKm10pSmLB7oeck9Rvd+ZOUlqjpl4Y4H+7cE1ZjeFkyJp+s1EWNBMqNX8x0w08g0ZuAKh6+JUQEeCGrq6UuraNkG2etykiLj9knWBiJ9YHDzK0ohuN1lJwTVk8DlBb/P/vnBi3suPe1oDOhO+LO0PUx39FGUOSqSkLDhyaCi2T3prgeG84PS6Li6ENtS3PEKO8S0S8XPHIz3WSgQbTjuzKVFKYywlp7vnL/GFULiGq/ljhCroeuPNppCJ0VdWFzSnqNPRofudhQ0f8EYztiKPr5ahkTIRyp/HZ6sRdoU2XXVwVH2uKmuSwkQaXzqF5qlPMMGdrlreYPvWKCTitaY/646NwmD3H+ll6JP1khXXbjrJByJMBmWEY2ARoqwtgIlAZ0HwdKEVrcvu3CxV+sywWBq5yjSFj7cpRPAlXdZ78L7D95rBAnJhtNi2+0GFIEFC96oKqFTzQaD/BJzalKJ1FkQx2kXhvI/FggAVGFuOl0wBpBa6cm6fcXneehc77bvC5X940R64ezuqwxxi64kjam7GlKgRlyk/XDkPZJ7XaZJGCwuGYTy9j0k22vM+i4YSuyMDsEXEHE+nV2AFWYYF5oDw6b7PnZVL7IHUjmtCm4DvDPVAJrMroE/xQpg3a0amBg1flXmSPOfij0Y7G6jVNkPHBxECsnaMfX7rxcpUXGIFKduobsr1gc7kNzcAqtOXjpsuNdLCR8BXjbx6U85NftFGTJUDfdXS63L4c8DxGAX4jWqbv5xxz6R/St0X4PU7CUtnV6t1gSTb9mTw30oabVkAdUUPXCvsQpcjlDQWwAbqCKu8daiSJRsgWnh5wtpuLzszuoTed3lVQlKDu81fs87NibtfZN0yDUeJSDfn8kloCu4om+ey2/WgjYgV0if1iRAwDUKX6S0r1pjcNALVahhwa9CLC0mqtIRXOl921w9FMXc0aYfPDWCFLHRZv/PfxNr1u3c8PL2aGbdJ/s4gc5fdbz+dgeAVlYu+QbFSBPUiY1cifJVkQEf+LH+UPAjVVzGKZJLcmeJ4srIBC3wF9X4b1jdKonSsTrOFwt2WTggv+z85UCswyarbQDZip5/EsPxURe+hQyGzBihUPfGrlIac2zuALopYyVJTbekYYitNGvIUKHw8Yylizh/wD0j0MfstZ7ghQGYXLrTwd8OTtQOx2z3mkgrWiJbSnyFH0PDOdI84D72jJ1qh4brT8XlIGWvhsN/zNOfjow0BbzzeNk8eMg2qUnRTxw5nAp9gdIZZaofwGIuPWJ72bQMFvqzXvHgkl6A6P+sCL50c2lgwyrYu5uEkivSnM3oYUhWU1H2C6bh1Hzs0gynKhMzgb1H1RHdl0+cBX95nsBRAXC7HQnrV2a1zyKKPF96at4tywOF2sTFK/GyWcm/5XXGEZmiaLcwTxnWkcYKtt1AZ5xpvkePKO65/dYNwjYSAsaV3sJsgRdn78FCh1q3G7w7kN4gcaBihdq8vn0BE5Dj/hA84YojLJNvU3AbXIkYdYBSsYneNxeYhR/fEXCuN+2FeoZiqhIRLQKRVrWHVfzjtGZ3KuP9CCCZbd2nMB4xodAxOnAW8r42TLSxqbDjy79JwzjEMWEEQpRZwnqyXCTnu7ZNXLjuJt7zoyaV//Ra6rkgEyE73oiK8/+0rCAjXo/QRHdl/5eDYmPuCaxYiGyPHPc9CLYxg8Fq/P+i7IR07aOjoT9XsiKAjp8EzKjsn2zO6DhDLq6268ADdaK/CFJM5uOCp5BlzYGLHbLvgPQc/WpUBlxygNAoGU+gps7PBXgfBq+yxp5jVUFq1Nv5rPeu+nFa1btLU4AlU3rP/wmt3ysAS0w3dZJhwQRvtdPphVSAa5+mPuFe9hq2ZU/VMDry5PUA+GcYXyhov0d15bOXga7nR4ypRe/2kbcPDEr3IVDisLLaiTK06d4HVCOPOb6fSnOKo+2KmJOLt+QkKaoi3z4t1eYVpuqrGewKRsARMXFna3D4oW/r9Ce02WmPsC/jmj7sZPvndNxK12RUrwWQxDloRKwUHaZXnauhsfPrw6xB2wgKVV216SvdEQ6vQOc5LB9kGIQM5ms0ZHcKmlS4n/7r0T9Q07WS9neNiInVSMYPk6UgJZ3NO/cSn88QgP00nI5OuofpXOlc28W9sj9LNps/76X2p2aRUGo5bm64MOIFyXAFEDuc9pgA2o89/VGzkVvCWJyUEFdFbqocxPb0L2k97CR4i02I943dn+eM4fC5cyl5SVqjaosnWRI5gZ62bmO2BYPGtUk+0p6NxBeI6gu2RDDKUvSy3a3Y0lumEIq2q+QkvL7lyJU59zaO21dQ/wFXe5CdM18PTuyM4sQ+gCnFk5biM5nqddMt/xU32MGwuPsQkdt9zgoLhEt9J5N0mw0XNUcF9aiCrL4DfaWrGtt1apWx5TPR2InzbUrEjoMs1AtHD++ioBV2O0BgFrsbGRw51wJ4UXrLWlFtozebo9U9EGM77S/P/e83xVVYIxHlbTfrGQNZtsfD12GZTnB9U3iz8h3ZJ3B63vVYQSu465UiEFRZBWHgFu8qTPYk9nEA56bb3NrgR0yzKAbVu+UnviMEkzx792k8zNLlkQ19gKNoFcooVTcTBWs8WPaw/5h8T6cvBxTNr1Ja21OnPUYyskXFZagbcu4i8yP/2/cggyIEAM3fDcuxIKlYdmk+p0Gwy4rwcLOX/FNH8N/yDKsVBIE/7RQjWpyA8BfySCnv9/bY83hbcywXyX7LQpAXnqIoPGsA5go+hSUjlTVKHaRel8OAeo7sH0pSGEn248jrTOIQKZMtnepReAyUFkXs7IoxANmvE1/UL4fqsC2mG1IpVanXg9tZrFaiugpCkDEph1tQechcVyHMd0Jux3dYlS00ThxsiqWnJLx0cL2PhjzrQ1jZ2K6bN83u0pgXcwjjfb4tBYT3o7GKohcbB8Ip5hYeVCevEJC0NN4RTokv9p2H2IGX+1YNRteHnXMRnOXIpnFAC9uFpx/2mSlr6K3kwQ+tk2tgkTZIWWP8DOvqEdAAwxPrBJMvkc+1kgLR0+4QInCKLwzCuP7vRnMVFSSmcc1ST/oDeHiRAGKZ4pUO00tJ2oxTRrBjvlbBf55eYCxZFUJRz6oqas8Oq+0lReXeadSjpTRkeDMCc2HGcz/RhYn341AygWzz53RkOwdvLOi+Imj0FSWx1lvLHMP4f5HY9VEnLo5ETpCw+3wFa/3lOkfuChZ6tBPm2n2xOc+MevFbFDv15VqKV/hM1UQFGKFN2x2lSjfnkLjBQhDH+uJ+inc/mL05gv1jxwXvrudgYkwpwUvjQ4KMaPoS2zIAH/0GVe8YwVYV7qfnl8PACu4mMGji9D6p3Q6wRJXnVty6WCMnEE3M582S3H0RwPuqMS/t7kgmfTbRP1ZGnrTUuGIqve9Uqq6mkuKRsJHqbehScFL/VDjXcnQNXI2lMddeWZ6Dk53OR9bniDfzGdjSHxMpM+fzjnIPsd8MMohcv9WDprGa6yfF+UmOddq4GjDXawLvVIqSD6MObk5G+vKthXnGTInXGZuiZ/5IVjVf02gIAKNuJEnVdJEo8gxpm+ihsOX33R7whoVmIVM4Oa3QjqeRG707mYFljHfR27Zmo3YPyOx+ong4aK2TcePOZLdFhCqW1mPgwiRMshEbEuQlnUbHxSH7Zoc0ZfkWsPi6Yes+rPVLqm32eL2I1tgom/BNrUeLQdfFZxdyOXV65tX7yeONN8tj8E5EKHU961hGtMzPcvGPjJFU8C/ZgMoneEigZP70dek38EQPpi80Awl6+n4ef7eUhwGDsvUj2CAt23q11BCoRzoEyzhbqobhf8rBhrj3IgU46D9Ekp2itQJjWqsytfkN/9yhGLeh/tKEGtWheNKDDS8CzEFHjz06xLosjRhSvO0eyWGWPAQn4qotPFazudpYoVWlSzdAwMrZ8oxfcjbSPIe3vFB6BYE/FzbY4sX15r7pc7+q/wSmtBYupzUcr/Y3ynFbCR4VGFSw+Zpt/lbbtROvfLJYp8tWRcgweO0n0Qitd1VWMn+nzF2SfbjDQdYZgVWEmsdslm+Ays14P6pRfj0NVCSdoBpTBII6BmYRANEI5OCrVgStrCu0ZfUrRhcF1hdc89rBENPXPOfA5qfdqr1owiYrXhN4J7F19UQ+W+BOiz14Jze6jO7lRRAKPmANznmDJqSgvfFmHJjzoJZcI6qguYrTuxUc8NQ8/2WklrSVCnZpgcaHZadgqji/l7I4A8JXRE2CJs1ZMvKEB25egB4bq2AUUytaFvS5tY9jIYabrouuVWusO03lzhHb2ASP9nPjmGY7Jkf/+ejr1k0FJtfdtaOE0tI8VNZx5gKOCqwoaG5LB23QZultrbk7thiLJfW7qJjfQ+2cO+PbmQ3zxU7flT3gNrZvnQOBjN1yGJ02YPZjOFdf8PPsTcukjQr5b4cGZ0QSg/nKD7It/6gHC8484r0d5HTvrltqr4dgkkENSp/cgFCK02km9Cq4jSyRypI1piuFZyVxQ6iAZ1MJJ5OQOIVx6u0/qRTOWykSh2Z+A7X3FRY0TLnNkzS9gu4iTp4bSh77bg5n0Lv71setwvv+pwV9UKilIRaid9Pu1D5pWdukXVQuB95u1bDbu6r7Qc86AVidKOKL7U+6hJhrSSOZ6hH+Om9zt1VX4UF/RNFCm+ICaQlSaGC7slKLUbyZfhO4CVnBIk8B5ADNdz2wdA1xMA43PYEbpj01gjf8JmIQYsDVbPriOTlDuDSrieh4sLgjLDJcZbfnCimG+NZnR4uCsfUr2OLouQyFZbeAwJZ7cPsNNHJNZGOfGUl1nCJ7u+RBX6HrAK4YnSnh2CegmJpqyTsA4njjjIAUqW4bh4ZXc9E7H8xb/KQLFkTVhibJ5r71U/AKlkG+MVPlYAA2PCQrEGI1p/h1hO+tM3xkoVMUaTpv4xkwMTroatkLxEiUtVQ873wbaaEXXucI++G/U4NM5dZSRAtMbVgfMP8SToc5G2gUgIurrNzD7xTlU3PJ6D18quK/4MoyvYcaeTzyy/uZW3zx6Vgo3lmnw1wIGUGOqjZ1WxQ7+QdrjDcXbTpv7lUkDsp5uccPUOyo4CvgP+kB6Qn31ObVNCk70JUcf3QAXpIODM3sJ3ytANTbfgh8rk+D8G59pAFOYVzR6wNWk0LEF6ErpsG930NsYv1L1Wz9ds+hNktlMl/1+L56ZwOEQfj1jt5MTnR61+9mSb9cbU7UCvV0T3+kNVd9V+7Uk6R/zJqBBDjS/bcWhDWII48EDATHY3Jji2ndEZSquvH+xLvczeLuKsDGQS581SHMzgfGMrKWxeX+JlrcGGCKhrvBnpzAITHBY3KF3adAtSsvAOkcTTzBbZWcg6rUy6hs/5V379agYKU76br9B3esqg0n7At39q8jgvhsSyy2gv369+Qb/t8bSyhZu+WuvrZdR1x2LwsznI8F9mSJlaqS3mmIcEQhfVPP4gkBp4rMvFSMozHWFRBEpu+FWTcx9hy2SjKJ/COJM28NzY+SwTXYQadnsWSUwHoXixCjJjmNjzONNwbJ8Lko/FgdlFqNW+UrZluDKWnyrQSISiyEqyrtT5QSzsXqAdz3jxobQUAiZKkdEVnd8eCJ6cEREZ1QAd8LeRPaBfpQeQboLcFdJfiCvWhzpUFgmBT7AHRDnm1NEav50HMzzrWzsgSfGt8WCGbcDLWMPqAEom/iCgzkxyQKbdirM3haIp6QUE7DjBYuEPfl45Tsl77g3SsnfsxgXgDD0680BJ9iOx0dvewtK9Cvj1MdJVWa7lAUULKm8S7sCyy8UdE1DTQZbXunW4dZoYXAe/U5ub8cTS0aaYXp7T+7AfelPqCciDS2TG7lHRgh64fP2dKMZoLgBigqWdGZqvU75OedAnfn8djg3tTfOSfbu7a8xcGqywqUPxGXVEZs1vM12nxLVJZzCoBolwhzwPbHwXj0b5QefsC6RKHvW9NJzNgOAH23Sh4A+DuxEyipGGKQOWIe8/Pv6w4tb0nfWhfSJqsriFJDW2grm9Qh3hBwyFmXZ4GJwv3+dE5d4W2I2LGxQHBBxhDwJ9NrI5bMonwU0zKgK+lo0ValQumLc55BxB5Egxp+T5gYFzcNtmjsgvvpk4kK5x9GVhZ14PCzoBSkQKsKqAvNBY6hiZMby82BLSLBvyUyxyT5J882t2/MJiTJn3fdp8ac5Mjdpn4K8H1xOQ8ya3mZgRFVHcc8qoT9SYzNxqbHadUOenYtDawvYccMrFW44NPGCZdrlFg18nrGkg8Dsrl1oeoIp3Z79G6u1lFbzX5X5KGW8ptqM5kx3RRzvCz0XC0FB9+UcYTxSt9tF3vSpGW/1T5xgaC9ieHsASo+BHpClXckx8fGws0fLCOuSiEZdeiPb7G6jT7g6O++2D2uxAN5tBZrxx9xv4RxKgaiAYfkbxhiSpCY5ckbrwAEhglaIOm/MwVn/1L9oiGNPD694BzH4w1ECFRWpBsVhRYdHbN3RY8orpTyzrTpPPkWNqMF0q+ffLN3uI67gi0i5kBfStLjeUtjk3IjDP4sZaRGPENvyffAnKdEm7YrmByrlQiwbgqfcg+eDn9uyYy+YJUiy7jcCFOtOjkDIKCp9mxggLSgYyc+CbMx73EnUfGka/gDSsUFWzriNpDlvVvBEu2kOTf1Vwcpyvg4C+GhLvvN/JVdMp/w9UWB8qwtfH4glpfRn1ECRNfZYWFeEQYw8gNEOYsQRVxpuKtV5XUnjXV773TSMh0='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 53633, 'candidates_token_count': 311, 'total_token_count': 55390, 'prompt_tokens_details': [{'modality': 1, 'token_count': 53633}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 311}], 'thoughts_token_count': 1446, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5216013426949357, 'model_name': 'gemini-2.5-pro'} id='run--f07815a0-87c8-4442-a4d2-b96c8d67465c-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'from django.db import models\nfrom django.test import TestCase\n\n\nclass ArticleWithSlugConstraint(models.Model):\n    headline = models.CharField(max_length=100)\n    slug = models.CharField(max_length=255)\n\n    class Meta:\n        app_label = \'lookup\'\n        constraints = [\n            models.UniqueConstraint(fields=[\'slug\'], name=\'%(app_label)s_%(class)s_slug_unq\')\n        ]\n\n    def __str__(self):\n        return self.headline\n\n\nclass InBulkUniqueConstraintTest(TestCase):\n    @classmethod\n    def setUpTestData(cls):\n        cls.a1 = ArticleWithSlugConstraint.objects.create(headline=\'Article 1\', slug=\'a1\')\n        cls.a2 = ArticleWithSlugConstraint.objects.create(headline=\'Article 2\', slug=\'a2\')\n\n    def test_in_bulk_on_field_with_unique_constraint(self):\n        """\n        in_bulk() should work on a field with a UniqueConstraint.\n        """\n        articles = ArticleWithSlugConstraint.objects.in_bulk(field_name=\'slug\')\n        self.assertEqual(articles, {\'a1\': self.a1, \'a2\': self.a2})\n', 'relative_path': 'tests/lookup/test_in_bulk_unique_constraint.py'}, 'id': '5865cb03-27a2-4829-a33b-ed923dc62396', 'type': 'tool_call'}] usage_metadata={'input_tokens': 53633, 'output_tokens': 311, 'total_tokens': 55390, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1446}}
2025-10-06 07:34:07,117 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='tests/lookup/test_in_bulk_unique_constraint.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 53969, 'candidates_token_count': 15, 'total_token_count': 53984, 'cached_content_token_count': 52481, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55413}], 'cache_tokens_details': [{'modality': 1, 'token_count': 52481}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 15}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -3.846390851928542e-06, 'model_name': 'gemini-2.5-pro'} id='run--d7686d5c-cc21-4611-b8c9-e9fca81c1e4d-0' usage_metadata={'input_tokens': 53969, 'output_tokens': 15, 'total_tokens': 53984, 'input_token_details': {'cache_read': 52481}}
2025-10-06 07:34:07,274 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/tests/lookup/test_in_bulk_unique_constraint.py b/tests/lookup/test_in_bulk_unique_constraint.py
new file mode 100644
index 0000000000..b5c341695a
--- /dev/null
+++ b/tests/lookup/test_in_bulk_unique_constraint.py
@@ -0,0 +1,30 @@
+from django.db import models
+from django.test import TestCase
+
+
+class ArticleWithSlugConstraint(models.Model):
+    headline = models.CharField(max_length=100)
+    slug = models.CharField(max_length=255)
+
+    class Meta:
+        app_label = 'lookup'
+        constraints = [
+            models.UniqueConstraint(fields=['slug'], name='%(app_label)s_%(class)s_slug_unq')
+        ]
+
+    def __str__(self):
+        return self.headline
+
+
+class InBulkUniqueConstraintTest(TestCase):
+    @classmethod
+    def setUpTestData(cls):
+        cls.a1 = ArticleWithSlugConstraint.objects.create(headline='Article 1', slug='a1')
+        cls.a2 = ArticleWithSlugConstraint.objects.create(headline='Article 2', slug='a2')
+
+    def test_in_bulk_on_field_with_unique_constraint(self):
+        """
+        in_bulk() should work on a field with a UniqueConstraint.
+        """
+        articles = ArticleWithSlugConstraint.objects.in_bulk(field_name='slug')
+        self.assertEqual(articles, {'a1': self.a1, 'a2': self.a2})

2025-10-06 07:34:07,274 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 07:34:07,321 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 07:34:07,321 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 07:34:07,831 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:07,831 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at 67f9d076cf Avoided unnecessary recompilation of ordering clause regex in SQLCompiler.

2025-10-06 07:34:07,831 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 07:34:07,932 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:07,932 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:34:07,932 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 07:34:07,932 - thread-139660780025408.app.docker.base_container - INFO - Creating directory tests/lookup in the container
2025-10-06 07:34:07,932 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p tests/lookup
2025-10-06 07:34:08,033 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:08,033 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 07:34:08,033 - thread-139660780025408.app.docker.base_container - INFO - Updating tests/lookup/test_in_bulk_unique_constraint.py in the container
2025-10-06 07:34:08,036 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 07:34:11,690 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F"}'}, '__gemini_function_call_thought_signatures__': {'3aa615e8-1670-4ca0-bce1-562c11b4f902': 'CqMJAR/Mhbay9qhoDBx0AZyCBzqw3OVCltoYAkYsroopyoWLHUvyuMraJkUpyhmv/vdq18ZkMIXDyczS3nbo4GeLFkLFMDwUcy2FQifjyA/SgY5U4DlTlikBO+QumJDkTWk/VKtZDK+MG8J4sGJqkBJ8wXU3hzp/+jXwCNzaaB+58PCv76Yuw75UOgr8qzGVsPr2g7YF9QAqFA2tNEbLrNZ0TdZIHEZ96cNLo0FjIXfWTI808/R1GjoDnov0PEB844StbCzevBsMqkh3bGFR4K6Dz6x/8YgGmU/DPbVMmYw5rYKX8crCh2xoO1xMl1DIiyhm65bFsRxnOSGOLygnYKRZVJM+UKuFMlXO5GzZouX1br85xsc5oj53yrQUW6lB1vQGDUAZZvkw+yI1D65nsIx3VsKs/zRVvg+tC7xs6FMYOHe1RfFgMuDCDcVnF7f1WbvDLAeez3GexLzdEd15ch/XGQzkF1B+qlNfV1Wr1K28M0WhFYbOWjLsjJJv53Y74ZmftVD12/2Lr0p3ijg6u2st/HsX+wZZHQOaEOZG87fj7Z96I+hUC8E39wsWYXEA5tXLjcxme+4p4IJdeaZR0Bx7qLdxVrjQS0FRmsmwxCOUswquHbuXZZ0VvmYugvyu4OEYv6Ar3vWA6ZmVrIjJ3xuOtI8L6hrYqCB8LIVZlMMMqa47TpIEshCtlOgvoIVNm/AVwfvP9bSZeND9zK4j0BDK8Tihxx9IA1F5wAyhhrqLTsyXH736H15Br297u8hfcadud5oFlhlwgMBekqcGUGsoLkoLpFS7XZirusJDpp0p1Md1U/N44VScQWOhk6XfPBbTPk56nqU4XE5qKFQdhvogF2P3y9rUbZrcQUKY8zEbPhAgIjIY681+Us1hAAROBetl/U91g5XrpUifj5WfKtxbx3Uv9VZdUwXGBJCFyfvbG6fVZtQZCKaC1ECT38O6lRpdiSY4YW/OVMhbG+KWVZE34jm50SU1PVpJx4Vdq9G+84P9CkNOYkzU0qEvMOAW7f/RkCmVEtV8D6CgNs6j7P2gEBkwwNzlguNVDArmRV48av3ggJZOpYGYMMROa5wfQQQfrQSuK5tj4o1lWfgNCw5M1nspWf3oxGWv3auhvN9hZ0OAufRZweubxikUivGkXUyKr+xf+jUtB5uvJtGQG8xbqVANivg3DlYQ0HEu/wUAVbTR7fRnZpzW5Isai3AxlV6R1tPq8Ph22q7ViCZg00fZS0g2wcg9v1dIDAFTdC8uTgCujklpqP9/vo2zOQ5jBm2lzyj11qXf9Kuh9wyRpBVWBaaseeLvMYYc+Fq1WuasfX2n8CMxJQmjteKjX5uzf6YOfdqxAnRyzdB9FTBbHiBKAAeuafPOIq2X7GlVO1z/ktp+O7YYWrDcdk4MxCPzigCX8gJvfk3M/dY6+LjCjcJ5oWvb+De6cu9IRVe5NlXnfCf9PEeUyzDmwJl2nZxpsiS1yoaC5igMN9uQlKnhEVewBuLoj11NELITwvovhG3wvYvmhrhngE/s7ajAtGgJy3L5mx+nRAV+XPO9CGcHH5YlS/ZeEAfI2b3ruN852hFqyFEwxBE='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 584, 'candidates_token_count': 7, 'total_token_count': 886, 'prompt_tokens_details': [{'modality': 1, 'token_count': 584}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 7}], 'thoughts_token_count': 295, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -4.02188846043178, 'model_name': 'gemini-2.5-pro'} id='run--85ff6499-6229-45ea-bd50-33e2adb6b0c7-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F'}, 'id': '3aa615e8-1670-4ca0-bce1-562c11b4f902', 'type': 'tool_call'}] usage_metadata={'input_tokens': 584, 'output_tokens': 7, 'total_tokens': 886, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 295}}
2025-10-06 07:34:11,691 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F
2025-10-06 07:34:11,792 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:11,792 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

AUTHORS		  docs/		js_tests/	package.json  setup.py
CONTRIBUTING.rst  extras/	LICENSE		README.rst    tests/
django/		  Gruntfile.js	LICENSE.python	scripts/      tox.ini
Django.egg-info/  INSTALL	MANIFEST.in	setup.cfg

2025-10-06 07:34:14,340 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python -m django test tests/lookup/test_in_bulk_unique_constraint.py"}'}, '__gemini_function_call_thought_signatures__': {'592a9006-ba37-477b-8668-decfbfb5cf53': 'CtkGAR/MhbYYZOIS++PVfzQpZoQeepOGPWz+J0US/+7gk/awbJAFXa+krl+vHSTYxL6loPZwPGVklspPGWvwMMBCN1XB0KkdUVyFDGe0UBv8rYNWFD42+wACh4gho+k+9X1cRRTNUF4kBJDgeyaK+VISko7q2KWutkGXjeQJciUV3FBz9eJpzHGYLJQfdIKaEuyv+pSiBB6oueQUyqo8i6e3NfrQi6tzAcD0HG2l2MNDsfti2fEGa/IYEU9UDROxXAdTdljMKnJqi7xX5GHwmoVlAsCyWv72q7UxBdnuEfyktoPTMyDnKuy5jG2KQPFgC7yVm5au39TCgUtUhU0s53YbVziERueZiWVvEsRhXVqRwakXkRqdyUHuTQybJQdu9uXXB57AIHe8Q3Ac/ErHCpXEqUnQxEs/a/tGL/kOZMxsiLQjIp5UFq3ziauCdKhrEKZK1b5LQTZlUSQgGGJb1BbVE8XBfdVk6yTeaqSlqabkcd4doKZ4dWwNX/X4FPVU5ovzjSD99WEbtn2NmiD91xoYzpWLsqsn4QNtPUjCh06f8HFQREWpmbIC5nya9AhYGGwAF1cegcmMYq6NVgUX4/GgiMdewPmpqkPa4/toih8TJhFO6DOe5/iY+AmJ8gDBeJM31WaKzgOT0Xol4b/U5BB+64oTs/3YyiZEq3aVzQ9MYAhAyF9eMnlIH6bRXuNMkAboCiSXOwPvq806pUr+9svHfhz89R2Ujja/nTBcrbwjzvQkowBfYVMpyy02YkEc9bsNegePfFuNOxAIUss2ORRVsMKzrpeF8qjcy6fRnHQOgLqr7S1OnsqZ8zFf6nFhnadPQEkF9J18aWtivdRuqV18zMlk5IaXtuM/uYWFuvRkNSkuba6iktUp3TivGbrPFjIV21HgxGEd9vCz8Li3EOzCHPvtJxY9ow+DM5w9UF5h7exdnDzphiKmxPjstehkhXKVNb6kaJEemuXUaGXaIVbkZjkS8yyLX8A6kdoBDsEb8Ivo4o2I58+c7tNN7hYbtHSQrGnqrso9J6hTSPfd32eZy+JH/dZ3oxWdZbtPK/Q2MDJaWErnWXIVctyiwFXl7fnOjKSm0Z6UsvWHVy7UqO1v3wCQMavvVsLGUGrKsY9053P5BnzRwke8+30='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 671, 'candidates_token_count': 24, 'total_token_count': 927, 'prompt_tokens_details': [{'modality': 1, 'token_count': 964}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 24}], 'thoughts_token_count': 232, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0913830598195393, 'model_name': 'gemini-2.5-pro'} id='run--54212d42-1c0b-470e-8591-1f238b5f9069-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python -m django test tests/lookup/test_in_bulk_unique_constraint.py'}, 'id': '592a9006-ba37-477b-8668-decfbfb5cf53', 'type': 'tool_call'}] usage_metadata={'input_tokens': 671, 'output_tokens': 24, 'total_tokens': 927, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 232}}
2025-10-06 07:34:14,342 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m django test tests/lookup/test_in_bulk_unique_constraint.py
2025-10-06 07:34:14,760 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 07:34:14,760 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Traceback (most recent call last):
  File "/opt/miniconda3/envs/testbed/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/opt/miniconda3/envs/testbed/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/testbed/django/__main__.py", line 9, in <module>
    management.execute_from_command_line()
  File "/testbed/django/core/management/__init__.py", line 401, in execute_from_command_line
    utility.execute()
  File "/testbed/django/core/management/__init__.py", line 395, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/testbed/django/core/management/commands/test.py", line 23, in run_from_argv
    super().run_from_argv(argv)
  File "/testbed/django/core/management/base.py", line 322, in run_from_argv
    parser = self.create_parser(argv[0], argv[1])
  File "/testbed/django/core/management/base.py", line 296, in create_parser
    self.add_arguments(parser)
  File "/testbed/django/core/management/commands/test.py", line 44, in add_arguments
    test_runner_class = get_runner(settings, self.test_runner)
  File "/testbed/django/test/utils.py", line 302, in get_runner
    test_runner_class = test_runner_class or settings.TEST_RUNNER
  File "/testbed/django/conf/__init__.py", line 77, in __getattr__
    self._setup(name)
  File "/testbed/django/conf/__init__.py", line 62, in _setup
    % (desc, ENVIRONMENT_VARIABLE))
django.core.exceptions.ImproperlyConfigured: Requested setting TEST_RUNNER, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.

2025-10-06 07:34:32,640 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -F tests/"}'}, '__gemini_function_call_thought_signatures__': {'ee290d40-8d70-4cd1-81f4-9395dfcdebe7': 'CooHAR/MhbZN/nayPyGslSas7iiRm6uMhwB7cdBMjgCKTTmWMFpPsr+pkWz41c6Q6iNt5nEzbburIhsMw4IR6c6/SRyaVt+/wUaYy3E5jGaMS1V/mmU1FpPjIkWre7s65bhl1zoGLlvs72G6GlPfUgWGweNp2L9Z8Hss1Nxu3cn8hxt480QaAjsGUq94F94+mBozPn1PHwb3kSjr+UCGGrWUS2VbtsV45VAUdD87TluzkgwFbsqf3AN0hdaP0BeOCG2oJaPa4TDtAebQ5ly6jtByVphcINy7DsMQN+r8Ym+Wg6LpPOlZ06bwDNpY9XLMUuAX6+Bs/BgudryQZktuR8nv1/Md+ZShumS/ua3QNRbrKZHZ02nnEEOZYAks8L9V+4PHnt2iENdr1FTCcW603UXfvSgvJU2nAOd+T1JJxs+K8ybUZOwXmpPKi2myShsuZnYdP3lqAxAY5pRZsWYAUo1sEsm/hOfeJp7vR6nvbfhcncAWGpSJ3SHEM+ej9lUMWOyzi+QS3YWMJyVqUJyepNGMUc+fQN3hm3lNPSLaTsBQEmkVrRtlgiHp2UVfTkPPkT2joHe3VYghohtpYU/tIjavaF8z1EcEuKrXSG/6LUJd0/PXTk2ap0Crl+hbyWMcElkTl4NuZB5FTILJiXuW3/wUnUuhOCuoCvS3yDm3vKXBBlmTueC1UxCgXmD3bUdTyXg3rOt7KRXd8YySDxKjAQlBNSiB53yuM4vZ/cUHIS32Sn3SNhS9xlQOO1bmdbZNzInVAZ1ymhl56FRU02K99rLj/5c8vi47PRCK4Ah/s3mhrttub5e+ZXsGBSOahM8/m7HeqDy7SzYkMW6o51I+kw2T/zk7Fuy0RcRmyYDOzXtYaiO3umqTbkf+QPF2YbsrXiQIa6fH3O0SlkLfaP7OIDg00nNw22OGYyqnTE0t6JRRtYmjtj4uzjFDvyRDy8M+2stRkYEB5bsL8ZYtbSrNTizIRnES9b7AforFcc23qYSxvqcu1myX1tumEfZrHiho/PVFvxEp2wu+Vfau2kmHQfCZ+doxqidfqN14yO743vOn6UiWMZAiPlMsrqsGIaX3m4sBmQENa3zfaTOVpAFUg2pSx4Mfr3qQkCCk8oGRNorH6fuV3IB00WfaIFEGquyTYFQ7Liktexa/ScojyP4nrL+1/FYYGI40zciLHajpmfBTceIP+nOAu8XCzr/N'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 1257, 'candidates_token_count': 9, 'total_token_count': 1609, 'prompt_tokens_details': [{'modality': 1, 'token_count': 1780}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 9}], 'thoughts_token_count': 343, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -13.35538821750217, 'model_name': 'gemini-2.5-pro'} id='run--9a029ab3-9886-4ecc-8eb2-09e10393a4a1-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -F tests/'}, 'id': 'ee290d40-8d70-4cd1-81f4-9395dfcdebe7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1257, 'output_tokens': 9, 'total_tokens': 1609, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 343}}
2025-10-06 07:34:32,642 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -F tests/
2025-10-06 07:34:32,743 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:32,743 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

absolute_url_overrides/       m2o_recursive/
admin_autodiscover/	      mail/
admin_changelist/	      managers_regress/
admin_checks/		      many_to_many/
admin_custom_urls/	      many_to_one/
admin_default_site/	      many_to_one_null/
admin_docs/		      max_lengths/
admin_filters/		      messages_tests/
admin_inlines/		      middleware/
admin_ordering/		      middleware_exceptions/
admin_registration/	      migrate_signals/
admin_scripts/		      migrations/
admin_utils/		      migrations2/
admin_views/		      migration_test_data_persistence/
admin_widgets/		      modeladmin/
aggregation/		      model_enums/
aggregation_regress/	      model_fields/
annotations/		      model_forms/
app_loading/		      model_formsets/
apps/			      model_formsets_regress/
asgi/			      model_indexes/
async/			      model_inheritance/
auth_tests/		      model_inheritance_regress/
backends/		      model_meta/
base/			      model_options/
bash_completion/	      model_package/
basic/			      model_regress/
builtin_server/		      multiple_database/
bulk_create/		      mutually_referential/
cache/			      nested_foreign_keys/
check_framework/	      no_models/
conditional_processing/       null_fk/
constraints/		      null_fk_ordering/
contenttypes_tests/	      null_queries/
context_processors/	      one_to_one/
csrf_tests/		      ordering/
custom_columns/		      order_with_respect_to/
custom_lookups/		      or_lookups/
custom_managers/	      pagination/
custom_methods/		      postgres_tests/
custom_migration_operations/  prefetch_related/
custom_pk/		      project_template/
datatypes/		      properties/
dates/			      proxy_model_inheritance/
datetimes/		      proxy_models/
db_functions/		      queries/
dbshell/		      queryset_pickle/
db_typecasts/		      raw_query/
db_utils/		      README.rst
decorators/		      redirects_tests/
defer/			      requests/
defer_regress/		      requirements/
delete/			      reserved_names/
delete_regress/		      resolve_url/
deprecation/		      responses/
dispatch/		      reverse_lookup/
distinct_on_fields/	      runtests.py*
empty/			      save_delete_hooks/
empty_models/		      schema/
expressions/		      select_for_update/
expressions_case/	      select_related/
expressions_window/	      select_related_onetoone/
extra_regress/		      select_related_regress/
field_deconstruction/	      serializers/
field_defaults/		      servers/
field_subclassing/	      sessions_tests/
files/			      settings_tests/
file_storage/		      shell/
file_uploads/		      shortcuts/
filtered_relation/	      signals/
fixtures/		      signed_cookies_tests/
fixtures_model_package/       signing/
fixtures_regress/	      sitemaps_tests/
flatpages_tests/	      sites_framework/
force_insert_update/	      sites_tests/
foreign_object/		      staticfiles_tests/
forms_tests/		      str/
from_db_value/		      string_lookup/
generic_inline_admin/	      swappable_models/
generic_relations/	      syndication_tests/
generic_relations_regress/    template_backends/
generic_views/		      template_loader/
get_earliest_or_latest/       templates/
get_object_or_404/	      template_tests/
get_or_create/		      test_client/
gis_tests/		      test_client_regress/
handlers/		      test_exceptions/
httpwrappers/		      test_runner/
humanize_tests/		      test_runner_apps/
i18n/			      test_sqlite.py
import_error_package/	      test_utils/
indexes/		      timezones/
inline_formsets/	      transaction_hooks/
inspectdb/		      transactions/
introspection/		      unmanaged_models/
invalid_models_tests/	      update/
known_related_objects/	      update_only_fields/
logging_tests/		      urlpatterns/
lookup/			      urlpatterns_reverse/
m2m_and_m2o/		      urls.py
m2m_intermediary/	      user_commands/
m2m_multiple/		      utils_tests/
m2m_recursive/		      validation/
m2m_regress/		      validators/
m2m_signals/		      version/
m2m_through/		      view_tests/
m2m_through_regress/	      wsgi/

2025-10-06 07:34:34,438 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "cat tests/runtests.py"}'}, '__gemini_function_call_thought_signatures__': {'39b13a05-c2dc-440f-8dcc-2639b5dddae1': 'CtkDAR/MhbYKX+cEkYSEPanwVNwEpcvJC05q3AOpW2SymDsy2VWxtuAwXhupwQb8DcOcAf00Y5u09R9rLvA/Ol6gWCiHes4Ps98XrS+0ZcgBP/OCOrcjkUpFMVVMcvef9EduDmv6u5C/DY3mbDOwv/xk3HE8Ym7/mWHPUcLnLMi36quwcyAOXveNHABGtkUOq+dmembFiJRrDwF3XMGKgKY6evJLlOCjOIwLEkVmhU0RkE7k3KeCUuSeOupmLBCmWfZamJaRM6s1R84kAEkLmCGyZJ62EetUl9a52w4n3qCKGSmmmAYmvp4/rd8oPvq9hJX7sKWD3exW2CJGcZ0pS/gKug9yr864ih/FtEwNWWcEnqIw6dfHGjALW9SyQxcdrDn3RCFTH4zvEprxzjN9QX95kpLcsC0dCvGKl50COFVfZgjgFKbW6gOFFZJVNAIgq8Q+LaS33f4ycWwh3I1a1b6WpzMdBmVIMV5cKwbtRc3vK40zLzGtGnQE4C37F0mtPeBwEFHJaUb+wKXctpjoxGleCbyYhalCbi0pd1GQQHA2/EjA8zrJ1mVJGIaicNApYxD/w/tMnUdIRaipK9Q3DVZjD5aOSNR6y7lkeT7i/D6rHiYUV7AonL/xNSg='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2483, 'candidates_token_count': 11, 'total_token_count': 2603, 'cached_content_token_count': 1650, 'prompt_tokens_details': [{'modality': 1, 'token_count': 3223}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1650}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 11}], 'thoughts_token_count': 109}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6816049055619673, 'model_name': 'gemini-2.5-pro'} id='run--04862dcb-49e6-48e9-8730-187de0ebb391-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat tests/runtests.py'}, 'id': '39b13a05-c2dc-440f-8dcc-2639b5dddae1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2483, 'output_tokens': 11, 'total_tokens': 2603, 'input_token_details': {'cache_read': 1650}, 'output_token_details': {'reasoning': 109}}
2025-10-06 07:34:34,439 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: cat tests/runtests.py
2025-10-06 07:34:34,542 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 07:34:34,542 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

#!/usr/bin/env python
import argparse
import atexit
import copy
import os
import shutil
import socket
import subprocess
import sys
import tempfile
import warnings

try:
    import django
except ImportError as e:
    raise RuntimeError(
        'Django module not found, reference tests/README.rst for instructions.'
    ) from e
else:
    from django.apps import apps
    from django.conf import settings
    from django.db import connection, connections
    from django.test import TestCase, TransactionTestCase
    from django.test.runner import default_test_processes
    from django.test.selenium import SeleniumTestCaseBase
    from django.test.utils import get_runner
    from django.utils.deprecation import RemovedInDjango40Warning
    from django.utils.log import DEFAULT_LOGGING
    from django.utils.version import PY37

try:
    import MySQLdb
except ImportError:
    pass
else:
    # Ignore informational warnings from QuerySet.explain().
    warnings.filterwarnings('ignore', r'\(1003, *', category=MySQLdb.Warning)

# Make deprecation warnings errors to ensure no usage of deprecated features.
warnings.simplefilter("error", RemovedInDjango40Warning)
# Make resource and runtime warning errors to ensure no usage of error prone
# patterns.
warnings.simplefilter("error", ResourceWarning)
warnings.simplefilter("error", RuntimeWarning)
# Ignore known warnings in test dependencies.
warnings.filterwarnings("ignore", "'U' mode is deprecated", DeprecationWarning, module='docutils.io')

RUNTESTS_DIR = os.path.abspath(os.path.dirname(__file__))

TEMPLATE_DIR = os.path.join(RUNTESTS_DIR, 'templates')

# Create a specific subdirectory for the duration of the test suite.
TMPDIR = tempfile.mkdtemp(prefix='django_')
# Set the TMPDIR environment variable in addition to tempfile.tempdir
# so that children processes inherit it.
tempfile.tempdir = os.environ['TMPDIR'] = TMPDIR

# Removing the temporary TMPDIR.
atexit.register(shutil.rmtree, TMPDIR)


SUBDIRS_TO_SKIP = [
    'data',
    'import_error_package',
    'test_runner_apps',
]

ALWAYS_INSTALLED_APPS = [
    'django.contrib.contenttypes',
    'django.contrib.auth',
    'django.contrib.sites',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.admin.apps.SimpleAdminConfig',
    'django.contrib.staticfiles',
]

ALWAYS_MIDDLEWARE = [
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
]

# Need to add the associated contrib app to INSTALLED_APPS in some cases to
# avoid "RuntimeError: Model class X doesn't declare an explicit app_label
# and isn't in an application in INSTALLED_APPS."
CONTRIB_TESTS_TO_APPS = {
    'flatpages_tests': 'django.contrib.flatpages',
    'redirects_tests': 'django.contrib.redirects',
}


def get_test_modules():
    modules = []
    discovery_paths = [(None, RUNTESTS_DIR)]
    if connection.features.gis_enabled:
        # GIS tests are in nested apps
        discovery_paths.append(('gis_tests', os.path.join(RUNTESTS_DIR, 'gis_tests')))
    else:
        SUBDIRS_TO_SKIP.append('gis_tests')

    for modpath, dirpath in discovery_paths:
        for f in os.scandir(dirpath):
            if ('.' not in f.name and
                    os.path.basename(f.name) not in SUBDIRS_TO_SKIP and
                    not f.is_file() and
                    os.path.exists(os.path.join(f.path, '__init__.py'))):
                modules.append((modpath, f.name))
    return modules


def get_installed():
    return [app_config.name for app_config in apps.get_app_configs()]


def setup(verbosity, test_labels, parallel, start_at, start_after):
    # Reduce the given test labels to just the app module path.
    test_labels_set = set()
    for label in test_labels:
        bits = label.split('.')[:1]
        test_labels_set.add('.'.join(bits))

    if verbosity >= 1:
        msg = "Testing against Django installed in '%s'" % os.path.dirname(django.__file__)
        max_parallel = default_test_processes() if parallel == 0 else parallel
        if max_parallel > 1:
            msg += " with up to %d processes" % max_parallel
        print(msg)

    # Force declaring available_apps in TransactionTestCase for faster tests.
    def no_available_apps(self):
        raise Exception("Please define available_apps in TransactionTestCase "
                        "and its subclasses.")
    TransactionTestCase.available_apps = property(no_available_apps)
    TestCase.available_apps = None

    state = {
        'INSTALLED_APPS': settings.INSTALLED_APPS,
        'ROOT_URLCONF': getattr(settings, "ROOT_URLCONF", ""),
        'TEMPLATES': settings.TEMPLATES,
        'LANGUAGE_CODE': settings.LANGUAGE_CODE,
        'STATIC_URL': settings.STATIC_URL,
        'STATIC_ROOT': settings.STATIC_ROOT,
        'MIDDLEWARE': settings.MIDDLEWARE,
    }

    # Redirect some settings for the duration of these tests.
    settings.INSTALLED_APPS = ALWAYS_INSTALLED_APPS
    settings.ROOT_URLCONF = 'urls'
    settings.STATIC_URL = '/static/'
    settings.STATIC_ROOT = os.path.join(TMPDIR, 'static')
    settings.TEMPLATES = [{
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [TEMPLATE_DIR],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    }]
    settings.LANGUAGE_CODE = 'en'
    settings.SITE_ID = 1
    settings.MIDDLEWARE = ALWAYS_MIDDLEWARE
    settings.MIGRATION_MODULES = {
        # This lets us skip creating migrations for the test models as many of
        # them depend on one of the following contrib applications.
        'auth': None,
        'contenttypes': None,
        'sessions': None,
    }
    log_config = copy.deepcopy(DEFAULT_LOGGING)
    # Filter out non-error logging so we don't have to capture it in lots of
    # tests.
    log_config['loggers']['django']['level'] = 'ERROR'
    settings.LOGGING = log_config
    settings.SILENCED_SYSTEM_CHECKS = [
        'fields.W342',  # ForeignKey(unique=True) -> OneToOneField
    ]

    # Load all the ALWAYS_INSTALLED_APPS.
    django.setup()

    # It would be nice to put this validation earlier but it must come after
    # django.setup() so that connection.features.gis_enabled can be accessed
    # without raising AppRegistryNotReady when running gis_tests in isolation
    # on some backends (e.g. PostGIS).
    if 'gis_tests' in test_labels_set and not connection.features.gis_enabled:
        print('Aborting: A GIS database backend is required to run gis_tests.')
        sys.exit(1)

    def _module_match_label(module_label, label):
        # Exact or ancestor match.
        return module_label == label or module_label.startswith(label + '.')

    # Load all the test model apps.
    test_modules = get_test_modules()

    found_start = not (start_at or start_after)
    installed_app_names = set(get_installed())
    for modpath, module_name in test_modules:
        if modpath:
            module_label = modpath + '.' + module_name
        else:
            module_label = module_name
        if not found_start:
            if start_at and _module_match_label(module_label, start_at):
                found_start = True
            elif start_after and _module_match_label(module_label, start_after):
                found_start = True
                continue
            else:
                continue
        # if the module (or an ancestor) was named on the command line, or
        # no modules were named (i.e., run all), import
        # this module and add it to INSTALLED_APPS.
        module_found_in_labels = not test_labels or any(
            _module_match_label(module_label, label) for label in test_labels_set
        )

        if module_name in CONTRIB_TESTS_TO_APPS and module_found_in_labels:
            settings.INSTALLED_APPS.append(CONTRIB_TESTS_TO_APPS[module_name])

        if module_found_in_labels and module_label not in installed_app_names:
            if verbosity >= 2:
                print("Importing application %s" % module_name)
            settings.INSTALLED_APPS.append(module_label)

    # Add contrib.gis to INSTALLED_APPS if needed (rather than requiring
    # @override_settings(INSTALLED_APPS=...) on all test cases.
    gis = 'django.contrib.gis'
    if connection.features.gis_enabled and gis not in settings.INSTALLED_APPS:
        if verbosity >= 2:
            print("Importing application %s" % gis)
        settings.INSTALLED_APPS.append(gis)

    apps.set_installed_apps(settings.INSTALLED_APPS)

    return state


def teardown(state):
    # Restore the old settings.
    for key, value in state.items():
        setattr(settings, key, value)
    # Discard the multiprocessing.util finalizer that tries to remove a
    # temporary directory that's already removed by this script's
    # atexit.register(shutil.rmtree, TMPDIR) handler. Prevents
    # FileNotFoundError at the end of a test run (#27890).
    from multiprocessing.util import _finalizer_registry
    _finalizer_registry.pop((-100, 0), None)


def actual_test_processes(parallel):
    if parallel == 0:
        # This doesn't work before django.setup() on some databases.
        if all(conn.features.can_clone_databases for conn in connections.all()):
            return default_test_processes()
        else:
            return 1
    else:
        return parallel


class ActionSelenium(argparse.Action):
    """
    Validate the comma-separated list of requested browsers.
    """
    def __call__(self, parser, namespace, values, option_string=None):
        browsers = values.split(',')
        for browser in browsers:
            try:
                SeleniumTestCaseBase.import_webdriver(browser)
            except ImportError:
                raise argparse.ArgumentError(self, "Selenium browser specification '%s' is not valid." % browser)
        setattr(namespace, self.dest, browsers)


def django_tests(verbosity, interactive, failfast, keepdb, reverse,
                 test_labels, debug_sql, parallel, tags, exclude_tags,
                 test_name_patterns, start_at, start_after, pdb, buffer):
    state = setup(verbosity, test_labels, parallel, start_at, start_after)
    extra_tests = []

    # Run the test suite, including the extra validation tests.
    if not hasattr(settings, 'TEST_RUNNER'):
        settings.TEST_RUNNER = 'django.test.runner.DiscoverRunner'
    TestRunner = get_runner(settings)

    test_runner = TestRunner(
        verbosity=verbosity,
        interactive=interactive,
        failfast=failfast,
        keepdb=keepdb,
        reverse=reverse,
        debug_sql=debug_sql,
        parallel=actual_test_processes(parallel),
        tags=tags,
        exclude_tags=exclude_tags,
        test_name_patterns=test_name_patterns,
        pdb=pdb,
        buffer=buffer,
    )
    failures = test_runner.run_tests(
        test_labels or get_installed(),
        extra_tests=extra_tests,
    )
    teardown(state)
    return failures


def get_subprocess_args(options):
    subprocess_args = [
        sys.executable, __file__, '--settings=%s' % options.settings
    ]
    if options.failfast:
        subprocess_args.append('--failfast')
    if options.verbosity:
        subprocess_args.append('--verbosity=%s' % options.verbosity)
    if not options.interactive:
        subprocess_args.append('--noinput')
    if options.tags:
        subprocess_args.append('--tag=%s' % options.tags)
    if options.exclude_tags:
        subprocess_args.append('--exclude_tag=%s' % options.exclude_tags)
    return subprocess_args


def bisect_tests(bisection_label, options, test_labels, parallel, start_at, start_after):
    state = setup(options.verbosity, test_labels, parallel, start_at, start_after)

    test_labels = test_labels or get_installed()

    print('***** Bisecting test suite: %s' % ' '.join(test_labels))

    # Make sure the bisection point isn't in the test list
    # Also remove tests that need to be run in specific combinations
    for label in [bisection_label, 'model_inheritance_same_model_name']:
        try:
            test_labels.remove(label)
        except ValueError:
            pass

    subprocess_args = get_subprocess_args(options)

    iteration = 1
    while len(test_labels) > 1:
        midpoint = len(test_labels) // 2
        test_labels_a = test_labels[:midpoint] + [bisection_label]
        test_labels_b = test_labels[midpoint:] + [bisection_label]
        print('***** Pass %da: Running the first half of the test suite' % iteration)
        print('***** Test labels: %s' % ' '.join(test_labels_a))
        failures_a = subprocess.run(subprocess_args + test_labels_a)

        print('***** Pass %db: Running the second half of the test suite' % iteration)
        print('***** Test labels: %s' % ' '.join(test_labels_b))
        print('')
        failures_b = subprocess.run(subprocess_args + test_labels_b)

        if failures_a.returncode and not failures_b.returncode:
            print("***** Problem found in first half. Bisecting again...")
            iteration += 1
            test_labels = test_labels_a[:-1]
        elif failures_b.returncode and not failures_a.returncode:
            print("***** Problem found in second half. Bisecting again...")
            iteration += 1
            test_labels = test_labels_b[:-1]
        elif failures_a.returncode and failures_b.returncode:
            print("***** Multiple sources of failure found")
            break
        else:
            print("***** No source of failure found... try pair execution (--pair)")
            break

    if len(test_labels) == 1:
        print("***** Source of error: %s" % test_labels[0])
    teardown(state)


def paired_tests(paired_test, options, test_labels, parallel, start_at, start_after):
    state = setup(options.verbosity, test_labels, parallel, start_at, start_after)

    test_labels = test_labels or get_installed()

    print('***** Trying paired execution')

    # Make sure the constant member of the pair isn't in the test list
    # Also remove tests that need to be run in specific combinations
    for label in [paired_test, 'model_inheritance_same_model_name']:
        try:
            test_labels.remove(label)
        except ValueError:
            pass

    subprocess_args = get_subprocess_args(options)

    for i, label in enumerate(test_labels):
        print('***** %d of %d: Check test pairing with %s' % (
              i + 1, len(test_labels), label))
        failures = subprocess.call(subprocess_args + [label, paired_test])
        if failures:
            print('***** Found problem pair with %s' % label)
            return

    print('***** No problem pair found')
    teardown(state)


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Run the Django test suite.")
    parser.add_argument(
        'modules', nargs='*', metavar='module',
        help='Optional path(s) to test modules; e.g. "i18n" or '
             '"i18n.tests.TranslationTests.test_lazy_objects".',
    )
    parser.add_argument(
        '-v', '--verbosity', default=1, type=int, choices=[0, 1, 2, 3],
        help='Verbosity level; 0=minimal output, 1=normal output, 2=all output',
    )
    parser.add_argument(
        '--noinput', action='store_false', dest='interactive',
        help='Tells Django to NOT prompt the user for input of any kind.',
    )
    parser.add_argument(
        '--failfast', action='store_true',
        help='Tells Django to stop running the test suite after first failed test.',
    )
    parser.add_argument(
        '--keepdb', action='store_true',
        help='Tells Django to preserve the test database between runs.',
    )
    parser.add_argument(
        '--settings',
        help='Python path to settings module, e.g. "myproject.settings". If '
             'this isn\'t provided, either the DJANGO_SETTINGS_MODULE '
             'environment variable or "test_sqlite" will be used.',
    )
    parser.add_argument(
        '--bisect',
        help='Bisect the test suite to discover a test that causes a test '
             'failure when combined with the named test.',
    )
    parser.add_argument(
        '--pair',
        help='Run the test suite in pairs with the named test to find problem pairs.',
    )
    parser.add_argument(
        '--reverse', action='store_true',
        help='Sort test suites and test cases in opposite order to debug '
             'test side effects not apparent with normal execution lineup.',
    )
    parser.add_argument(
        '--selenium', action=ActionSelenium, metavar='BROWSERS',
        help='A comma-separated list of browsers to run the Selenium tests against.',
    )
    parser.add_argument(
        '--headless', action='store_true',
        help='Run selenium tests in headless mode, if the browser supports the option.',
    )
    parser.add_argument(
        '--selenium-hub',
        help='A URL for a selenium hub instance to use in combination with --selenium.',
    )
    parser.add_argument(
        '--external-host', default=socket.gethostname(),
        help='The external host that can be reached by the selenium hub instance when running Selenium '
             'tests via Selenium Hub.',
    )
    parser.add_argument(
        '--debug-sql', action='store_true',
        help='Turn on the SQL query logger within tests.',
    )
    parser.add_argument(
        '--parallel', nargs='?', default=0, type=int,
        const=default_test_processes(), metavar='N',
        help='Run tests using up to N parallel processes.',
    )
    parser.add_argument(
        '--tag', dest='tags', action='append',
        help='Run only tests with the specified tags. Can be used multiple times.',
    )
    parser.add_argument(
        '--exclude-tag', dest='exclude_tags', action='append',
        help='Do not run tests with the specified tag. Can be used multiple times.',
    )
    parser.add_argument(
        '--start-after', dest='start_after',
        help='Run tests starting after the specified top-level module.',
    )
    parser.add_argument(
        '--start-at', dest='start_at',
        help='Run tests starting at the specified top-level module.',
    )
    parser.add_argument(
        '--pdb', action='store_true',
        help='Runs the PDB debugger on error or failure.'
    )
    parser.add_argument(
        '-b', '--buffer', action='store_true',
        help='Discard output of passing tests.',
    )
    if PY37:
        parser.add_argument(
            '-k', dest='test_name_patterns', action='append',
            help=(
                'Only run test methods and classes matching test name pattern. '
                'Same as unittest -k option. Can be used multiple times.'
            ),
        )

    options = parser.parse_args()

    using_selenium_hub = options.selenium and options.selenium_hub
    if options.selenium_hub and not options.selenium:
        parser.error('--selenium-hub and --external-host require --selenium to be used.')
    if using_selenium_hub and not options.external_host:
        parser.error('--selenium-hub and --external-host must be used together.')

    # Allow including a trailing slash on app_labels for tab completion convenience
    options.modules = [os.path.normpath(labels) for labels in options.modules]

    mutually_exclusive_options = [options.start_at, options.start_after, options.modules]
    enabled_module_options = [bool(option) for option in mutually_exclusive_options].count(True)
    if enabled_module_options > 1:
        print('Aborting: --start-at, --start-after, and test labels are mutually exclusive.')
        sys.exit(1)
    for opt_name in ['start_at', 'start_after']:
        opt_val = getattr(options, opt_name)
        if opt_val:
            if '.' in opt_val:
                print('Aborting: --%s must be a top-level module.' % opt_name.replace('_', '-'))
                sys.exit(1)
            setattr(options, opt_name, os.path.normpath(opt_val))
    if options.settings:
        os.environ['DJANGO_SETTINGS_MODULE'] = options.settings
    else:
        os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'test_sqlite')
        options.settings = os.environ['DJANGO_SETTINGS_MODULE']

    if options.selenium:
        if not options.tags:
            options.tags = ['selenium']
        elif 'selenium' not in options.tags:
            options.tags.append('selenium')
        if options.selenium_hub:
            SeleniumTestCaseBase.selenium_hub = options.selenium_hub
            SeleniumTestCaseBase.external_host = options.external_host
        SeleniumTestCaseBase.headless = options.headless
        SeleniumTestCaseBase.browsers = options.selenium

    if options.bisect:
        bisect_tests(
            options.bisect, options, options.modules, options.parallel,
            options.start_at, options.start_after,
        )
    elif options.pair:
        paired_tests(
            options.pair, options, options.modules, options.parallel,
            options.start_at, options.start_after,
        )
    else:
        failures = django_tests(
            options.verbosity, options.interactive, options.failfast,
            options.keepdb, options.reverse, options.modules,
            options.debug_sql, options.parallel, options.tags,
            options.exclude_tags,
            getattr(options, 'test_name_patterns', None),
            options.start_at, options.start_after, options.pdb, options.buffer,
        )
        if failures:
            sys.exit(1)

2025-10-06 07:34:38,086 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py lookup.test_in_bulk_unique_constraint"}'}, '__gemini_function_call_thought_signatures__': {'88904611-cac6-4bad-9d83-2bec08a788b3': 'CpkIAR/MhbYo8wmyfs8naP17HkEFA5qqS/h1ACVCWU9V2G1LQjGP5rjjRJAJSgHO8mHNo8Rjx94neQRGnzbzJAY+xu0/wkiT/mVMhFDEGMB6hcCvoa/9oDg+rbWJ4sbnVjoFl1SkfvcwFgiyhO5VGo3igYjgWLVpNJlkEJGhtLp2F2Jw7B1IESC7MFmmkdA9mlvNLiekfN6XF4q6FkWnThWBGtZnGBW7UYRERUYJZKboNEsXD/ow0boaBDv+klWAC6m5NEF5nocC1xnoEpFo2bJ4oEzDL+OXCVY++c03UCtNsxKedlYizdfNYnFqJke8CEw0Wr3+jR54Ep4G0JezdvlN9e0uSL0XI64jl/R1BjlIiA1EcITTDgFkaQpdyBJ/+vqibWj3KZbc662tEWlMOFWS+Y2Jcuf50cPzoyZwtbEznMgnZjpOvDYmBF+tNSNJwa3k6wcj30oxTi5Ob8D0fx8YhJqVemWHM2tWCn+slCleCEqsWYyCsydDZfa95FX6GFkcEWgetYY2sn5CsqHze+F74WfTYytcJypI21Zl1R4kst4m4P72KQZdPgWPIw0V5S70XHLDGJOabIwXmFoTvn6K0RPRqx6XONZqOt68E1ERuGRyMa68ue3i0vedXq/qzel3nVH1fMWpBTXQmvCdWL+z2pIOHyqIOzP7po6moJ7MIVoHaRODYBRSyxFLIi+ZBlHLyh0379L8gSoq7ZqdbSKFajKHnc2t3H6930VTt6mE0G7zsbr4QwhPZGrT0yYh5N1z8RpvHP2eyIV4TZLP/IgTZOHxG17SAJ5GCu7lDeIGHVlnIeehy7n6B+T2kKt7ihpEs7ZhbK3iBA+pBAZZ0clFSs50cttgUeLIextoJCUs3MxDV/sU+DGfAIIdKyaHSXCudGOGe/ntQ/zXdVE8q9YDIlrfGs3DAW+8F7polAOPgln/SA7JQvyu4+9tIVFHpgneui/m+wYaZfOro97Fex8OhdFr/etQCFElKj0i3eFmuGGze+JNzP39xwpIea2NCSOV3TpZ+lNZSfYwbjTAWWymjaYtvz20LWRKN/MQoi2afZLFq+42PeSkA/RKn7GOsxWZ5jJF0cYxrgaTER1mQBPsZRJZiaLcFmp0fFh7ga4J2MVHjGMbkwzCj3oqq6h5oV8/iStfU2yc82EmbjTuWLq+Btj5VCEuFFPg/IeV7w50bUsXYN5rvzBp7jflrr3ws60ORAIAVz16TKR0mtGoG3ckZyTsVdvW3lePnvmuCyRTXaS2R4Q0Kvv2l17I/kuZeHhSHQmBwBdnS9h5EkosHunnecjAZidcQwEDh5bRZhMP7pA77alTYCYLFDI5yCNvvlf9eCtSYYdL1fcZpOwpm0Zz/dF2e7pGjtW14kLZb0Di8rT9FWLXeLpi3TY='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8348, 'candidates_token_count': 22, 'total_token_count': 8663, 'cached_content_token_count': 1770, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9195}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1770}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 22}], 'thoughts_token_count': 293}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1468406157060103, 'model_name': 'gemini-2.5-pro'} id='run--6be96810-6eb3-4b97-805d-822ba7ebf941-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py lookup.test_in_bulk_unique_constraint'}, 'id': '88904611-cac6-4bad-9d83-2bec08a788b3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8348, 'output_tokens': 22, 'total_tokens': 8663, 'input_token_details': {'cache_read': 1770}, 'output_token_details': {'reasoning': 293}}
2025-10-06 07:34:38,088 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py lookup.test_in_bulk_unique_constraint
2025-10-06 07:34:38,569 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 07:34:38,569 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Testing against Django installed in '/testbed/django' with up to 8 processes
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
E
======================================================================
ERROR: test_in_bulk_on_field_with_unique_constraint (lookup.test_in_bulk_unique_constraint.InBulkUniqueConstraintTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/lookup/test_in_bulk_unique_constraint.py", line 29, in test_in_bulk_on_field_with_unique_constraint
    articles = ArticleWithSlugConstraint.objects.in_bulk(field_name='slug')
  File "/testbed/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/testbed/django/db/models/query.py", line 693, in in_bulk
    raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
ValueError: in_bulk()'s field_name must be a unique field but 'slug' isn't.

----------------------------------------------------------------------
Ran 1 test in 0.001s

FAILED (errors=1)
Destroying test database for alias 'default'...

2025-10-06 07:34:41,738 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='I have successfully executed the test file and reproduced the bug. Here is the output:\n\nTesting against Django installed in \'/testbed/django\' with up to 8 processes\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nE\n======================================================================\nERROR: test_in_bulk_on_field_with_unique_constraint (lookup.test_in_bulk_unique_constraint.InBulkUniqueConstraintTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/lookup/test_in_bulk_unique_constraint.py", line 29, in test_in_bulk_on_field_with_unique_constraint\n    articles = ArticleWithSlugConstraint.objects.in_bulk(field_name=\'slug\')\n  File "/testbed/django/db/models/manager.py", line 85, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File "/testbed/django/db/models/query.py", line 693, in in_bulk\n    raise ValueError("in_bulk()\'s field_name must be a unique field but %r isn\'t." % field_name)\nValueError: in_bulk()\'s field_name must be a unique field but \'slug\' isn\'t.\n\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nFAILED (errors=1)\nDestroying test database for alias \'default\'...' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8700, 'candidates_token_count': 342, 'total_token_count': 9083, 'cached_content_token_count': 8882, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9838}], 'cache_tokens_details': [{'modality': 1, 'token_count': 8882}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 342}], 'thoughts_token_count': 41}, 'finish_reason': 'STOP', 'avg_logprobs': -0.016686488313284533, 'model_name': 'gemini-2.5-pro'} id='run--9c9eb9c2-982e-4435-bdc8-e41f5190430b-0' usage_metadata={'input_tokens': 8700, 'output_tokens': 342, 'total_tokens': 9083, 'input_token_details': {'cache_read': 8882}, 'output_token_details': {'reasoning': 41}}
2025-10-06 07:34:57,021 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='Testing against Django installed in \'/testbed/django\' with up to 8 processes\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nE\n======================================================================\nERROR: test_in_bulk_on_field_with_unique_constraint (lookup.test_in_bulk_unique_constraint.InBulkUniqueConstraintTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/lookup/test_in_bulk_unique_constraint.py", line 29, in test_in_bulk_on_field_with_unique_constraint\n    articles = ArticleWithSlugConstraint.objects.in_bulk(field_name=\'slug\')\n  File "/testbed/django/db/models/manager.py", line 85, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File "/testbed/django/db/models/query.py", line 693, in in_bulk\n    raise ValueError("in_bulk()\'s field_name must be a unique field but %r isn\'t." % field_name)\nValueError: in_bulk()\'s field_name must be a unique field but \'slug\' isn\'t.\n\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nFAILED (errors=1)\nDestroying test database for alias \'default\'...\n' reproduced_bug_commands=['python tests/runtests.py lookup.test_in_bulk_unique_constraint']
2025-10-06 07:34:57,022 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 07:34:57,022 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 07:34:57,122 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
