2025-10-06 00:18:40,336 - thread-139660780025408.app.docker.base_container - INFO - Created temporary project directory: /tmp/tmp1m2_u0kb/django
2025-10-06 00:18:40,336 - thread-139660780025408.app.docker.base_container - DEBUG - Using workdir: /testbed
2025-10-06 00:18:40,336 - thread-139660780025408.app.docker.base_container - INFO - Pulling docker image: swebench/sweb.eval.x86_64.django_1776_django-15022:v1
2025-10-06 00:19:06,648 - thread-139660780025408.app.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_4e265dd56f
2025-10-06 00:19:06,652 - thread-139660780025408.app.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_4e265dd56f
2025-10-06 00:19:07,695 - thread-139660780025408.app.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-10-06 00:19:07,835 - thread-139660780025408.app.docker.base_container - INFO - Persistent shell is ready
2025-10-06 00:19:07,835 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: . /opt/miniconda3/bin/activate
2025-10-06 00:19:07,969 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:19:07,969 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 00:19:07,969 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: conda activate testbed
2025-10-06 00:19:08,097 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:19:08,097 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 00:19:08,097 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python -m pip install -e .
2025-10-06 00:19:10,884 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:19:10,884 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

Obtaining file:///testbed
  Installing build dependencies ... [?25l- \ | done
[?25h  Checking if build backend supports build_editable ... [?25ldone
[?25h  Getting requirements to build editable ... [?25l- \ done
[?25h  Preparing editable metadata (pyproject.toml) ... [?25l- \ done
[?25hRequirement already satisfied: asgiref>=3.4.1 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.1.dev20211214191944) (3.8.1)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.1.dev20211214191944) (0.5.1)
Requirement already satisfied: typing-extensions>=4 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from asgiref>=3.4.1->Django==4.1.dev20211214191944) (4.12.2)
Building wheels for collected packages: Django
  Building editable for Django (pyproject.toml) ... [?25l- \ | / done
[?25h  Created wheel for Django: filename=django-4.1.dev20211214191944-0.editable-py3-none-any.whl size=26943 sha256=257247bcd93a7706f739952446621b8cd68d185a44a1a54826b36a95e02d980f
  Stored in directory: /tmp/pip-ephem-wheel-cache-63y3ryux/wheels/7d/66/67/70d1ee2124ccf21d601c352e25cdca10f611f7c8b3f9ffb9e4
Successfully built Django
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 4.1.dev20211214191944
    Uninstalling Django-4.1.dev20211214191944:
      Successfully uninstalled Django-4.1.dev20211214191944
Successfully installed Django-4.1.dev20211214191944
[33mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable.It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.[0m[33m

2025-10-06 00:19:10,944 - thread-139660780025408.app.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
Unnecessary joins in admin changelist query

Issue description: 
Description
	
Django 1.2.5
Models:
class Client(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	contact_person = models.CharField(_('contact person'), max_length=256, blank=True, null=True)
	...
class ClientOffice(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	...
	client = models.ForeignKey(Client, verbose_name=_('client'))
	...
and admin options like these:
class ClientAdmin(admin.ModelAdmin):
	search_fields = ('name', 'name2', 'contact_person', 'clientoffice__name', 'clientoffice__name2')
	...
Numbers:
>>> Client.objects.count()
10907
>>> ClientOffice.objects.count()
16952
Now, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.
The problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-10-06 00:19:10,944 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-10-06 00:19:10,945 - thread-139660780025408.app.lang_graph.nodes.context_query_message_node - DEBUG - Sending query to ContextProviderNode:
content='Issue title:\nUnnecessary joins in admin changelist query\n\nIssue description: \nDescription\n\t\nDjango 1.2.5\nModels:\nclass Client(models.Model):\n\tname = models.CharField(_(\'name\'), max_length=256)\n\tname2 = models.CharField(_(\'unofficial or obsolete name\'), max_length=256, blank=True, null=True)\n\tcontact_person = models.CharField(_(\'contact person\'), max_length=256, blank=True, null=True)\n\t...\nclass ClientOffice(models.Model):\n\tname = models.CharField(_(\'name\'), max_length=256)\n\tname2 = models.CharField(_(\'unofficial or obsolete name\'), max_length=256, blank=True, null=True)\n\t...\n\tclient = models.ForeignKey(Client, verbose_name=_(\'client\'))\n\t...\nand admin options like these:\nclass ClientAdmin(admin.ModelAdmin):\n\tsearch_fields = (\'name\', \'name2\', \'contact_person\', \'clientoffice__name\', \'clientoffice__name2\')\n\t...\nNumbers:\n>>> Client.objects.count()\n10907\n>>> ClientOffice.objects.count()\n16952\nNow, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.\nThe problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.\n\nIssue comments:\n\n\nOBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,\nincluding ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.\n\n<reasoning>\n1. Analyze bug characteristics:\n   - Core functionality being tested\n   - Input parameters and configurations\n   - Expected error conditions\n   - Environmental dependencies\n\n2. Search requirements:\n   - Required imports and dependencies\n   - Test files exercising similar functionality\n   - Mock/fixture setup patterns\n   - Assertion styles\n   - Error handling tests\n\n3. Focus areas:\n   - All necessary imports (standard library, testing frameworks, mocking utilities)\n   - Dependencies and third-party packages\n   - Test setup and teardown\n   - Mock object configuration\n   - Network/external service simulation\n   - Error condition verification\n</reasoning>\n\nREQUIREMENTS:\n- Return 5 complete, self-contained test cases most similar to bug scenario\n- Must include ALL necessary imports at the start of each test file\n- Must include full test method implementation\n- Must include ALL mock/fixture setup\n- Must include helper functions used by test\n- Must preserve exact file paths and line numbers\n\n<examples>\n<example id="database-timeout">\n<bug>\ndb.execute("SELECT * FROM users").fetchall() \nraises ConnectionTimeout when load is high\n</bug>\n\n<ideal_test_match>\n# File: tests/test_database.py\nimport pytest\nfrom unittest.mock import Mock, patch\nfrom database.exceptions import ConnectionTimeout\nfrom database.models import QueryResult\nfrom database.client import DatabaseClient\n\nclass TestDatabaseTimeout:\n    @pytest.fixture\n    def mock_db_connection(self):\n        conn = Mock()\n        conn.execute.side_effect = [\n            ConnectionTimeout("Connection timed out"),\n            QueryResult(["user1", "user2"])  # Second try succeeds\n        ]\n        return conn\n        \n    def test_handle_timeout_during_query(self, mock_db_connection):\n        # Complete test showing timeout scenario\n        # Including retry logic verification\n        # With all necessary assertions\n</ideal_test_match>\n</example>\n\n<example id="file-permission">\n<bug>\nFileProcessor(\'/root/data.txt\').process() \nfails with PermissionError\n</bug>\n\n<ideal_test_match>\n# File: tests/test_file_processor.py\nimport os\nimport pytest\nfrom unittest.mock import patch, mock_open\nfrom file_processor import FileProcessor\nfrom file_processor.exceptions import ProcessingError\n\nclass TestFilePermissions:\n    @patch(\'os.access\')\n    @patch(\'builtins.open\')\n    def test_file_permission_denied(self, mock_open, mock_access):\n        # Full test setup with mocked file system\n        # Permission denial simulation\n        # Error handling verification\n</ideal_test_match>\n</example>\n\nSearch priority:\n1. Tests of exact same functionality (including import patterns)\n2. Tests with similar error conditions\n3. Tests with comparable mocking patterns\n4. Tests demonstrating similar assertions\n\nFind the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.\n' additional_kwargs={} response_metadata={}
2025-10-06 00:19:20,941 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have initiated a search for test files that use `search_fields` within the Django test suite. This will help locate tests that cover the admin search functionality, which is at the core of the reported issue. The next step is to analyze these files to find test cases that specifically address searching on related model fields and the resulting query construction. This will allow me to identify the most relevant examples that demonstrate how Django tests this kind of functionality.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "search_fields", "basename": "tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 57343, 'candidates_token_count': 114, 'total_token_count': 58114, 'prompt_tokens_details': [{'modality': 1, 'token_count': 57343}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 114}], 'thoughts_token_count': 657, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0959407739471971, 'model_name': 'gemini-2.5-pro'} id='run--a7e16406-68ac-499a-8257-3be43ed31f81-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'search_fields', 'basename': 'tests.py'}, 'id': '378e94d0-8a6e-4752-b72c-b8f2080cd841', 'type': 'tool_call'}] usage_metadata={'input_tokens': 57343, 'output_tokens': 114, 'total_tokens': 58114, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 657}}
2025-10-06 00:19:29,002 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the search results and identified `tests/admin_changelist/tests.py` as a promising source of relevant test cases. This file appears to contain a comprehensive suite of tests for the admin changelist, including functionality related to `search_fields`, which is central to the reported issue. I will now examine the contents of this file to identify specific tests that demonstrate how searches on related model fields are handled and how the resulting queries are constructed. This will help me find the most relevant examples for the user.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_changelist/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 86003, 'candidates_token_count': 130, 'total_token_count': 86462, 'prompt_tokens_details': [{'modality': 1, 'token_count': 86003}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 329, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5015203622671274, 'model_name': 'gemini-2.5-pro'} id='run--9ed2e47b-6b8f-45ec-b08d-3b0e2db32fd0-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_changelist/tests.py'}, 'id': 'f25ebc76-715b-4010-a725-12541ac6de99', 'type': 'tool_call'}] usage_metadata={'input_tokens': 86003, 'output_tokens': 130, 'total_tokens': 86462, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 329}}
2025-10-06 00:19:58,915 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I have identified and extracted five relevant test cases from the Django test suite that demonstrate how to test the admin search functionality, particularly when dealing with related models. These tests cover scenarios involving single and multiple search terms, as well as searches over `ForeignKey` and `ManyToManyField` relationships, which are directly related to the user's reported issue. The provided test cases include all necessary imports, model definitions, and `ModelAdmin` configurations to be self-contained and runnable." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/admin_changelist/tests.py", "start_line": 520.0, "end_line": 579.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 94797, 'candidates_token_count': 124, 'total_token_count': 97325, 'cached_content_token_count': 83369, 'prompt_tokens_details': [{'modality': 1, 'token_count': 94797}], 'cache_tokens_details': [{'modality': 1, 'token_count': 83369}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 124}], 'thoughts_token_count': 2404}, 'finish_reason': 'STOP', 'avg_logprobs': -2.465813913652974, 'model_name': 'gemini-2.5-pro'} id='run--438409ca-edfb-4192-b911-ba36051f3cf9-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/admin_changelist/tests.py', 'start_line': 520.0, 'end_line': 579.0}, 'id': '73eaaba2-0d62-461b-b856-019eedb3ed0c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 94797, 'output_tokens': 124, 'total_tokens': 97325, 'input_token_details': {'cache_read': 83369}, 'output_token_details': {'reasoning': 2404}}
2025-10-06 00:20:00,708 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'usage_metadata': {'prompt_token_count': 96118, 'total_token_count': 96118, 'cached_content_token_count': 91265, 'prompt_tokens_details': [{'modality': 1, 'token_count': 96118}], 'cache_tokens_details': [{'modality': 1, 'token_count': 91265}], 'candidates_token_count': 0, 'thoughts_token_count': 0, 'candidates_tokens_details': []}, 'model_name': 'gemini-2.5-pro'} id='run--2c75e44d-404b-45aa-b702-74d533f93ae2-0' usage_metadata={'input_tokens': 96118, 'output_tokens': 0, 'total_tokens': 96118, 'input_token_details': {'cache_read': 91265}}
2025-10-06 00:20:00,708 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 00:20:00,709 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
Unnecessary joins in admin changelist query

Issue description: 
Description
	
Django 1.2.5
Models:
class Client(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	contact_person = models.CharField(_('contact person'), max_length=256, blank=True, null=True)
	...
class ClientOffice(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	...
	client = models.ForeignKey(Client, verbose_name=_('client'))
	...
and admin options like these:
class ClientAdmin(admin.ModelAdmin):
	search_fields = ('name', 'name2', 'contact_person', 'clientoffice__name', 'clientoffice__name2')
	...
Numbers:
>>> Client.objects.count()
10907
>>> ClientOffice.objects.count()
16952
Now, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.
The problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_registration/tests.py
Line number range: 19 - 90
Content:
class TestRegistration(SimpleTestCase):
    def setUp(self):
        self.site = admin.AdminSite()

    def test_bare_registration(self):
        self.site.register(Person)
        self.assertIsInstance(self.site._registry[Person], admin.ModelAdmin)
        self.site.unregister(Person)
        self.assertEqual(self.site._registry, {})

    def test_registration_with_model_admin(self):
        self.site.register(Person, NameAdmin)
        self.assertIsInstance(self.site._registry[Person], NameAdmin)
        self.site.unregister(Person)
        self.assertEqual(self.site._registry, {})

    def test_prevent_double_registration(self):
        self.site.register(Person)
        msg = "The model Person is already registered in app 'admin_registration'."
        with self.assertRaisesMessage(admin.sites.AlreadyRegistered, msg):
            self.site.register(Person)

    def test_prevent_double_registration_for_custom_admin(self):
        class PersonAdmin(admin.ModelAdmin):
            pass

        self.site.register(Person, PersonAdmin)
        msg = "The model Person is already registered with 'admin_registration.PersonAdmin'."
        with self.assertRaisesMessage(admin.sites.AlreadyRegistered, msg):
            self.site.register(Person, PersonAdmin)

    def test_unregister_unregistered_model(self):
        msg = 'The model Person is not registered'
        with self.assertRaisesMessage(admin.sites.NotRegistered, msg):
            self.site.unregister(Person)

    def test_registration_with_star_star_options(self):
        self.site.register(Person, search_fields=['name'])
        self.assertEqual(self.site._registry[Person].search_fields, ['name'])

    def test_star_star_overrides(self):
        self.site.register(Person, NameAdmin, search_fields=["name"], list_display=['__str__'])
        self.assertEqual(self.site._registry[Person].search_fields, ['name'])
        self.assertEqual(self.site._registry[Person].list_display, ['__str__'])
        self.assertTrue(self.site._registry[Person].save_on_top)

    def test_iterable_registration(self):
        self.site.register([Person, Place], search_fields=['name'])
        self.assertIsInstance(self.site._registry[Person], admin.ModelAdmin)
        self.assertEqual(self.site._registry[Person].search_fields, ['name'])
        self.assertIsInstance(self.site._registry[Place], admin.ModelAdmin)
        self.assertEqual(self.site._registry[Place].search_fields, ['name'])
        self.site.unregister([Person, Place])
        self.assertEqual(self.site._registry, {})

    def test_abstract_model(self):
        """
        Exception is raised when trying to register an abstract model.
        Refs #12004.
        """
        msg = 'The model Location is abstract, so it cannot be registered with admin.'
        with self.assertRaisesMessage(ImproperlyConfigured, msg):
            self.site.register(Location)

    def test_is_registered_model(self):
        "Checks for registered models should return true."
        self.site.register(Person)
        self.assertTrue(self.site.is_registered(Person))

    def test_is_registered_not_registered_model(self):
        "Checks for unregistered models should return false."
        self.assertFalse(self.site.is_registered(Person))

File: tests/modeladmin/tests.py
Line number range: 36 - 730
Content:
class ModelAdminTests(TestCase):

    @classmethod
    def setUpTestData(cls):
        cls.band = Band.objects.create(
            name='The Doors',
            bio='',
            sign_date=date(1965, 1, 1),
        )

    def setUp(self):
        self.site = AdminSite()

    def test_modeladmin_str(self):
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(str(ma), 'modeladmin.ModelAdmin')

    # form/fields/fieldsets interaction ##############################

    def test_default_fields(self):
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date'])
        self.assertEqual(list(ma.get_fields(request)), ['name', 'bio', 'sign_date'])
        self.assertEqual(list(ma.get_fields(request, self.band)), ['name', 'bio', 'sign_date'])
        self.assertIsNone(ma.get_exclude(request, self.band))

    def test_default_fieldsets(self):
        # fieldsets_add and fieldsets_change should return a special data structure that
        # is used in the templates. They should generate the "right thing" whether we
        # have specified a custom form, the fields argument, or nothing at all.
        #
        # Here's the default case. There are no custom form_add/form_change methods,
        # no fields argument, and no fieldsets argument.
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name', 'bio', 'sign_date']})])
        self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name', 'bio', 'sign_date']})])

    def test_get_fieldsets(self):
        # get_fieldsets() is called when figuring out form fields (#18681).
        class BandAdmin(ModelAdmin):
            def get_fieldsets(self, request, obj=None):
                return [(None, {'fields': ['name', 'bio']})]

        ma = BandAdmin(Band, self.site)
        form = ma.get_form(None)
        self.assertEqual(form._meta.fields, ['name', 'bio'])

        class InlineBandAdmin(TabularInline):
            model = Concert
            fk_name = 'main_band'
            can_delete = False

            def get_fieldsets(self, request, obj=None):
                return [(None, {'fields': ['day', 'transport']})]

        ma = InlineBandAdmin(Band, self.site)
        form = ma.get_formset(None).form
        self.assertEqual(form._meta.fields, ['day', 'transport'])

    def test_lookup_allowed_allows_nonexistent_lookup(self):
        """
        A lookup_allowed allows a parameter whose field lookup doesn't exist.
        (#21129).
        """
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)
        self.assertTrue(ma.lookup_allowed('name__nonexistent', 'test_value'))

    @isolate_apps('modeladmin')
    def test_lookup_allowed_onetoone(self):
        class Department(models.Model):
            code = models.CharField(max_length=4, unique=True)

        class Employee(models.Model):
            department = models.ForeignKey(Department, models.CASCADE, to_field="code")

        class EmployeeProfile(models.Model):
            employee = models.OneToOneField(Employee, models.CASCADE)

        class EmployeeInfo(models.Model):
            employee = models.OneToOneField(Employee, models.CASCADE)
            description = models.CharField(max_length=100)

        class EmployeeProfileAdmin(ModelAdmin):
            list_filter = [
                'employee__employeeinfo__description',
                'employee__department__code',
            ]

        ma = EmployeeProfileAdmin(EmployeeProfile, self.site)
        # Reverse OneToOneField
        self.assertIs(ma.lookup_allowed('employee__employeeinfo__description', 'test_value'), True)
        # OneToOneField and ForeignKey
        self.assertIs(ma.lookup_allowed('employee__department__code', 'test_value'), True)

    def test_field_arguments(self):
        # If fields is specified, fieldsets_add and fieldsets_change should
        # just stick the fields into a formsets structure and return it.
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)

        self.assertEqual(list(ma.get_fields(request)), ['name'])
        self.assertEqual(list(ma.get_fields(request, self.band)), ['name'])
        self.assertEqual(ma.get_fieldsets(request), [(None, {'fields': ['name']})])
        self.assertEqual(ma.get_fieldsets(request, self.band), [(None, {'fields': ['name']})])

    def test_field_arguments_restricted_on_form(self):
        # If fields or fieldsets is specified, it should exclude fields on the
        # Form class to the fields specified. This may cause errors to be
        # raised in the db layer if required model fields aren't in fields/
        # fieldsets, but that's preferable to ghost errors where a field in the
        # Form class isn't being displayed because it's not in fields/fieldsets.

        # Using `fields`.
        class BandAdmin(ModelAdmin):
            fields = ['name']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
        self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])

        # Using `fieldsets`.
        class BandAdmin(ModelAdmin):
            fieldsets = [(None, {'fields': ['name']})]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])
        self.assertEqual(list(ma.get_form(request, self.band).base_fields), ['name'])

        # Using `exclude`.
        class BandAdmin(ModelAdmin):
            exclude = ['bio']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

        # You can also pass a tuple to `exclude`.
        class BandAdmin(ModelAdmin):
            exclude = ('bio',)

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

        # Using `fields` and `exclude`.
        class BandAdmin(ModelAdmin):
            fields = ['name', 'bio']
            exclude = ['bio']

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])

    def test_custom_form_meta_exclude_with_readonly(self):
        """
        The custom ModelForm's `Meta.exclude` is respected when used in
        conjunction with `ModelAdmin.readonly_fields` and when no
        `ModelAdmin.exclude` is defined (#14496).
        """
        # With ModelAdmin
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['bio']

        class BandAdmin(ModelAdmin):
            readonly_fields = ['name']
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['sign_date'])

        # With InlineModelAdmin
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            readonly_fields = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'opening_band', 'id', 'DELETE'])

    def test_custom_formfield_override_readonly(self):
        class AdminBandForm(forms.ModelForm):
            name = forms.CharField()

            class Meta:
                exclude = ()
                model = Band

        class BandAdmin(ModelAdmin):
            form = AdminBandForm
            readonly_fields = ['name']

        ma = BandAdmin(Band, self.site)

        # `name` shouldn't appear in base_fields because it's part of
        # readonly_fields.
        self.assertEqual(
            list(ma.get_form(request).base_fields),
            ['bio', 'sign_date']
        )
        # But it should appear in get_fields()/fieldsets() so it can be
        # displayed as read-only.
        self.assertEqual(
            list(ma.get_fields(request)),
            ['bio', 'sign_date', 'name']
        )
        self.assertEqual(
            list(ma.get_fieldsets(request)),
            [(None, {'fields': ['bio', 'sign_date', 'name']})]
        )

    def test_custom_form_meta_exclude(self):
        """
        The custom ModelForm's `Meta.exclude` is overridden if
        `ModelAdmin.exclude` or `InlineModelAdmin.exclude` are defined (#14496).
        """
        # With ModelAdmin
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['bio']

        class BandAdmin(ModelAdmin):
            exclude = ['name']
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['bio', 'sign_date'])

        # With InlineModelAdmin
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            exclude = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'opening_band', 'day', 'id', 'DELETE']
        )

    def test_overriding_get_exclude(self):
        class BandAdmin(ModelAdmin):
            def get_exclude(self, request, obj=None):
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request).base_fields),
            ['bio', 'sign_date']
        )

    def test_get_exclude_overrides_exclude(self):
        class BandAdmin(ModelAdmin):
            exclude = ['bio']

            def get_exclude(self, request, obj=None):
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request).base_fields),
            ['bio', 'sign_date']
        )

    def test_get_exclude_takes_obj(self):
        class BandAdmin(ModelAdmin):
            def get_exclude(self, request, obj=None):
                if obj:
                    return ['sign_date']
                return ['name']

        self.assertEqual(
            list(BandAdmin(Band, self.site).get_form(request, self.band).base_fields),
            ['name', 'bio']
        )

    def test_custom_form_validation(self):
        # If a form is specified, it should use it allowing custom validation
        # to work properly. This won't break any of the admin widgets or media.
        class AdminBandForm(forms.ModelForm):
            delete = forms.BooleanField()

        class BandAdmin(ModelAdmin):
            form = AdminBandForm

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'bio', 'sign_date', 'delete'])
        self.assertEqual(type(ma.get_form(request).base_fields['sign_date'].widget), AdminDateWidget)

    def test_form_exclude_kwarg_override(self):
        """
        The `exclude` kwarg passed to `ModelAdmin.get_form()` overrides all
        other declarations (#8999).
        """
        class AdminBandForm(forms.ModelForm):
            class Meta:
                model = Band
                exclude = ['name']

        class BandAdmin(ModelAdmin):
            exclude = ['sign_date']
            form = AdminBandForm

            def get_form(self, request, obj=None, **kwargs):
                kwargs['exclude'] = ['bio']
                return super().get_form(request, obj, **kwargs)

        ma = BandAdmin(Band, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['name', 'sign_date'])

    def test_formset_exclude_kwarg_override(self):
        """
        The `exclude` kwarg passed to `InlineModelAdmin.get_formset()`
        overrides all other declarations (#8999).
        """
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            exclude = ['transport']
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_formset(self, request, obj=None, **kwargs):
                kwargs['exclude'] = ['opening_band']
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_formset_overriding_get_exclude_with_form_fields(self):
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                fields = ['main_band', 'opening_band', 'day', 'transport']

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_exclude(self, request, obj=None):
                return ['opening_band']

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_formset_overriding_get_exclude_with_form_exclude(self):
        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ['day']

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            fk_name = 'main_band'
            model = Concert

            def get_exclude(self, request, obj=None):
                return ['opening_band']

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['main_band', 'day', 'transport', 'id', 'DELETE']
        )

    def test_raw_id_fields_widget_override(self):
        """
        The autocomplete_fields, raw_id_fields, and radio_fields widgets may
        overridden by specifying a widget in get_formset().
        """
        class ConcertInline(TabularInline):
            model = Concert
            fk_name = 'main_band'
            raw_id_fields = ('opening_band',)

            def get_formset(self, request, obj=None, **kwargs):
                kwargs['widgets'] = {'opening_band': Select}
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        band_widget = list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields['opening_band'].widget
        # Without the override this would be ForeignKeyRawIdWidget.
        self.assertIsInstance(band_widget, Select)

    def test_queryset_override(self):
        # If the queryset of a ModelChoiceField in a custom form is overridden,
        # RelatedFieldWidgetWrapper doesn't mess that up.
        band2 = Band.objects.create(name='The Beatles', bio='', sign_date=date(1962, 1, 1))

        ma = ModelAdmin(Concert, self.site)
        form = ma.get_form(request)()

        self.assertHTMLEqual(
            str(form["main_band"]),
            '<div class="related-widget-wrapper">'
            '<select name="main_band" id="id_main_band" required>'
            '<option value="" selected>---------</option>'
            '<option value="%d">The Beatles</option>'
            '<option value="%d">The Doors</option>'
            '</select></div>' % (band2.id, self.band.id)
        )

        class AdminConcertForm(forms.ModelForm):
            def __init__(self, *args, **kwargs):
                super().__init__(*args, **kwargs)
                self.fields["main_band"].queryset = Band.objects.filter(name='The Doors')

        class ConcertAdminWithForm(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdminWithForm(Concert, self.site)
        form = ma.get_form(request)()

        self.assertHTMLEqual(
            str(form["main_band"]),
            '<div class="related-widget-wrapper">'
            '<select name="main_band" id="id_main_band" required>'
            '<option value="" selected>---------</option>'
            '<option value="%d">The Doors</option>'
            '</select></div>' % self.band.id
        )

    def test_regression_for_ticket_15820(self):
        """
        `obj` is passed from `InlineModelAdmin.get_fieldsets()` to
        `InlineModelAdmin.get_formset()`.
        """
        class CustomConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                fields = ['day']

        class ConcertInline(TabularInline):
            model = Concert
            fk_name = 'main_band'

            def get_formset(self, request, obj=None, **kwargs):
                if obj:
                    kwargs['form'] = CustomConcertForm
                return super().get_formset(request, obj, **kwargs)

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        Concert.objects.create(main_band=self.band, opening_band=self.band, day=1)
        ma = BandAdmin(Band, self.site)
        inline_instances = ma.get_inline_instances(request)
        fieldsets = list(inline_instances[0].get_fieldsets(request))
        self.assertEqual(fieldsets[0][1]['fields'], ['main_band', 'opening_band', 'day', 'transport'])
        fieldsets = list(inline_instances[0].get_fieldsets(request, inline_instances[0].model))
        self.assertEqual(fieldsets[0][1]['fields'], ['day'])

    # radio_fields behavior ###########################################

    def test_default_foreign_key_widget(self):
        # First, without any radio_fields specified, the widgets for ForeignKey
        # and fields with choices specified ought to be a basic Select widget.
        # ForeignKey widgets in the admin are wrapped with RelatedFieldWidgetWrapper so
        # they need to be handled properly when type checking. For Select fields, all of
        # the choices lists have a first entry of dashes.
        cma = ModelAdmin(Concert, self.site)
        cmafa = cma.get_form(request)

        self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['main_band'].widget.choices),
            [('', '---------'), (self.band.id, 'The Doors')])

        self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['opening_band'].widget.choices),
            [('', '---------'), (self.band.id, 'The Doors')]
        )
        self.assertEqual(type(cmafa.base_fields['day'].widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['day'].widget.choices),
            [('', '---------'), (1, 'Fri'), (2, 'Sat')]
        )
        self.assertEqual(type(cmafa.base_fields['transport'].widget), Select)
        self.assertEqual(
            list(cmafa.base_fields['transport'].widget.choices),
            [('', '---------'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')])

    def test_foreign_key_as_radio_field(self):
        # Now specify all the fields as radio_fields.  Widgets should now be
        # RadioSelect, and the choices list should have a first entry of 'None' if
        # blank=True for the model field.  Finally, the widget should have the
        # 'radiolist' attr, and 'inline' as well if the field is specified HORIZONTAL.
        class ConcertAdmin(ModelAdmin):
            radio_fields = {
                'main_band': HORIZONTAL,
                'opening_band': VERTICAL,
                'day': VERTICAL,
                'transport': HORIZONTAL,
            }

        cma = ConcertAdmin(Concert, self.site)
        cmafa = cma.get_form(request)

        self.assertEqual(type(cmafa.base_fields['main_band'].widget.widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['main_band'].widget.attrs, {'class': 'radiolist inline'})
        self.assertEqual(
            list(cmafa.base_fields['main_band'].widget.choices),
            [(self.band.id, 'The Doors')]
        )

        self.assertEqual(type(cmafa.base_fields['opening_band'].widget.widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['opening_band'].widget.attrs, {'class': 'radiolist'})
        self.assertEqual(
            list(cmafa.base_fields['opening_band'].widget.choices),
            [('', 'None'), (self.band.id, 'The Doors')]
        )
        self.assertEqual(type(cmafa.base_fields['day'].widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['day'].widget.attrs, {'class': 'radiolist'})
        self.assertEqual(list(cmafa.base_fields['day'].widget.choices), [(1, 'Fri'), (2, 'Sat')])

        self.assertEqual(type(cmafa.base_fields['transport'].widget), AdminRadioSelect)
        self.assertEqual(cmafa.base_fields['transport'].widget.attrs, {'class': 'radiolist inline'})
        self.assertEqual(
            list(cmafa.base_fields['transport'].widget.choices),
            [('', 'None'), (1, 'Plane'), (2, 'Train'), (3, 'Bus')]
        )

        class AdminConcertForm(forms.ModelForm):
            class Meta:
                model = Concert
                exclude = ('transport',)

        class ConcertAdmin(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdmin(Concert, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['main_band', 'opening_band', 'day'])

        class AdminConcertForm(forms.ModelForm):
            extra = forms.CharField()

            class Meta:
                model = Concert
                fields = ['extra', 'transport']

        class ConcertAdmin(ModelAdmin):
            form = AdminConcertForm

        ma = ConcertAdmin(Concert, self.site)
        self.assertEqual(list(ma.get_form(request).base_fields), ['extra', 'transport'])

        class ConcertInline(TabularInline):
            form = AdminConcertForm
            model = Concert
            fk_name = 'main_band'
            can_delete = True

        class BandAdmin(ModelAdmin):
            inlines = [ConcertInline]

        ma = BandAdmin(Band, self.site)
        self.assertEqual(
            list(list(ma.get_formsets_with_inlines(request))[0][0]().forms[0].fields),
            ['extra', 'transport', 'id', 'DELETE', 'main_band']
        )

    def test_log_actions(self):
        ma = ModelAdmin(Band, self.site)
        mock_request = MockRequest()
        mock_request.user = User.objects.create(username='bill')
        content_type = get_content_type_for_model(self.band)
        tests = (
            (ma.log_addition, ADDITION, {'added': {}}),
            (ma.log_change, CHANGE, {'changed': {'fields': ['name', 'bio']}}),
            (ma.log_deletion, DELETION, str(self.band)),
        )
        for method, flag, message in tests:
            with self.subTest(name=method.__name__):
                created = method(mock_request, self.band, message)
                fetched = LogEntry.objects.filter(action_flag=flag).latest('id')
                self.assertEqual(created, fetched)
                self.assertEqual(fetched.action_flag, flag)
                self.assertEqual(fetched.content_type, content_type)
                self.assertEqual(fetched.object_id, str(self.band.pk))
                self.assertEqual(fetched.user, mock_request.user)
                if flag == DELETION:
                    self.assertEqual(fetched.change_message, '')
                    self.assertEqual(fetched.object_repr, message)
                else:
                    self.assertEqual(fetched.change_message, str(message))
                    self.assertEqual(fetched.object_repr, str(self.band))

    def test_get_autocomplete_fields(self):
        class NameAdmin(ModelAdmin):
            search_fields = ['name']

        class SongAdmin(ModelAdmin):
            autocomplete_fields = ['featuring']
            fields = ['featuring', 'band']

        class OtherSongAdmin(SongAdmin):
            def get_autocomplete_fields(self, request):
                return ['band']

        self.site.register(Band, NameAdmin)
        try:
            # Uses autocomplete_fields if not overridden.
            model_admin = SongAdmin(Song, self.site)
            form = model_admin.get_form(request)()
            self.assertIsInstance(form.fields['featuring'].widget.widget, AutocompleteSelectMultiple)
            # Uses overridden get_autocomplete_fields
            model_admin = OtherSongAdmin(Song, self.site)
            form = model_admin.get_form(request)()
            self.assertIsInstance(form.fields['band'].widget.widget, AutocompleteSelect)
        finally:
            self.site.unregister(Band)

    def test_get_deleted_objects(self):
        mock_request = MockRequest()
        mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')
        self.site.register(Band, ModelAdmin)
        ma = self.site._registry[Band]
        deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
        self.assertEqual(deletable_objects, ['Band: The Doors'])
        self.assertEqual(model_count, {'bands': 1})
        self.assertEqual(perms_needed, set())
        self.assertEqual(protected, [])

    def test_get_deleted_objects_with_custom_has_delete_permission(self):
        """
        ModelAdmin.get_deleted_objects() uses ModelAdmin.has_delete_permission()
        for permissions checking.
        """
        mock_request = MockRequest()
        mock_request.user = User.objects.create_superuser(username='bob', email='bob@test.com', password='test')

        class TestModelAdmin(ModelAdmin):
            def has_delete_permission(self, request, obj=None):
                return False

        self.site.register(Band, TestModelAdmin)
        ma = self.site._registry[Band]
        deletable_objects, model_count, perms_needed, protected = ma.get_deleted_objects([self.band], request)
        self.assertEqual(deletable_objects, ['Band: The Doors'])
        self.assertEqual(model_count, {'bands': 1})
        self.assertEqual(perms_needed, {'band'})
        self.assertEqual(protected, [])

    def test_modeladmin_repr(self):
        ma = ModelAdmin(Band, self.site)
        self.assertEqual(
            repr(ma),
            "<ModelAdmin: model=Band site=AdminSite(name='admin')>",
        )

File: tests/admin_changelist/tests.py
Line number range: 54 - 1403
Content:
@override_settings(ROOT_URLCONF="admin_changelist.urls")
class ChangeListTests(TestCase):
    factory = RequestFactory()

    @classmethod
    def setUpTestData(cls):
        cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')

    def _create_superuser(self, username):
        return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')

    def _mocked_authenticated_request(self, url, user):
        request = self.factory.get(url)
        request.user = user
        return request

    def test_repr(self):
        m = ChildAdmin(Child, custom_site)
        request = self.factory.get('/child/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(repr(cl), '<ChangeList: model=Child model_admin=ChildAdmin>')

    def test_specified_ordering_by_f_expression(self):
        class OrderedByFBandAdmin(admin.ModelAdmin):
            list_display = ['name', 'genres', 'nr_of_members']
            ordering = (
                F('nr_of_members').desc(nulls_last=True),
                Upper(F('name')).asc(),
                F('genres').asc(),
            )

        m = OrderedByFBandAdmin(Band, custom_site)
        request = self.factory.get('/band/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.get_ordering_field_columns(), {3: 'desc', 2: 'asc'})

    def test_specified_ordering_by_f_expression_without_asc_desc(self):
        class OrderedByFBandAdmin(admin.ModelAdmin):
            list_display = ['name', 'genres', 'nr_of_members']
            ordering = (F('nr_of_members'), Upper('name'), F('genres'))

        m = OrderedByFBandAdmin(Band, custom_site)
        request = self.factory.get('/band/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.get_ordering_field_columns(), {3: 'asc', 2: 'asc'})

    def test_select_related_preserved(self):
        """
        Regression test for #10348: ChangeList.get_queryset() shouldn't
        overwrite a custom select_related provided by ModelAdmin.get_queryset().
        """
        m = ChildAdmin(Child, custom_site)
        request = self.factory.get('/child/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'parent': {}})

    def test_select_related_preserved_when_multi_valued_in_search_fields(self):
        parent = Parent.objects.create(name='Mary')
        Child.objects.create(parent=parent, name='Danielle')
        Child.objects.create(parent=parent, name='Daniel')

        m = ParentAdmin(Parent, custom_site)
        request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 1)
        # select_related is preserved.
        self.assertEqual(cl.queryset.query.select_related, {'child': {}})

    def test_select_related_as_tuple(self):
        ia = InvitationAdmin(Invitation, custom_site)
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'player': {}})

    def test_select_related_as_empty_tuple(self):
        ia = InvitationAdmin(Invitation, custom_site)
        ia.list_select_related = ()
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertIs(cl.queryset.query.select_related, False)

    def test_get_select_related_custom_method(self):
        class GetListSelectRelatedAdmin(admin.ModelAdmin):
            list_display = ('band', 'player')

            def get_list_select_related(self, request):
                return ('band', 'player')

        ia = GetListSelectRelatedAdmin(Invitation, custom_site)
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'player': {}, 'band': {}})

    def test_result_list_empty_changelist_value(self):
        """
        Regression test for #14982: EMPTY_CHANGELIST_VALUE should be honored
        for relationship fields
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">-</td>')
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_set_empty_value_display_on_admin_site(self):
        """
        Empty value display can be set on AdminSite.
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        # Set a new empty display value on AdminSite.
        admin.site.empty_value_display = '???'
        m = ChildAdmin(Child, admin.site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">???</td>')
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_set_empty_value_display_in_model_admin(self):
        """
        Empty value display can be set in ModelAdmin or individual fields.
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = EmptyValueChildAdmin(Child, admin.site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(
            new_child.id,
            link,
            '<td class="field-age_display">&amp;dagger;</td>'
            '<td class="field-age">-empty-</td>'
        )
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_html(self):
        """
        Inclusion tag result_list generates a table when with default
        ModelAdmin settings.
        """
        new_parent = Parent.objects.create(name='parent')
        new_child = Child.objects.create(name='name', parent=new_parent)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">%s</td>' % new_parent)
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_editable_html(self):
        """
        Regression tests for #11791: Inclusion tag result_list generates a
        table and this checks that the items are nested within the table
        element tags.
        Also a regression test for #13599, verifies that hidden fields
        when list_editable is enabled are rendered in a div outside the
        table.
        """
        new_parent = Parent.objects.create(name='parent')
        new_child = Child.objects.create(name='name', parent=new_parent)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)

        # Test with list_editable fields
        m.list_display = ['id', 'name', 'parent']
        m.list_display_links = ['id']
        m.list_editable = ['name']
        cl = m.get_changelist_instance(request)
        FormSet = m.get_changelist_formset(request)
        cl.formset = FormSet(queryset=cl.result_list)
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        # make sure that hidden fields are in the correct place
        hiddenfields_div = (
            '<div class="hiddenfields">'
            '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
            '</div>'
        ) % new_child.id
        self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')

        # make sure that list editable fields are rendered in divs correctly
        editable_name_field = (
            '<input name="form-0-name" value="name" class="vTextField" '
            'maxlength="30" type="text" id="id_form-0-name">'
        )
        self.assertInHTML(
            '<td class="field-name">%s</td>' % editable_name_field,
            table_output,
            msg_prefix='Failed to find "name" list_editable field',
        )

    def test_result_list_editable(self):
        """
        Regression test for #14312: list_editable with pagination
        """
        new_parent = Parent.objects.create(name='parent')
        for i in range(1, 201):
            Child.objects.create(name='name %s' % i, parent=new_parent)
        request = self.factory.get('/child/', data={'p': -1})  # Anything outside range
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)

        # Test with list_editable fields
        m.list_display = ['id', 'name', 'parent']
        m.list_display_links = ['id']
        m.list_editable = ['name']
        with self.assertRaises(IncorrectLookupParameters):
            m.get_changelist_instance(request)

    def test_custom_paginator(self):
        new_parent = Parent.objects.create(name='parent')
        for i in range(1, 201):
            Child.objects.create(name='name %s' % i, parent=new_parent)

        request = self.factory.get('/child/')
        request.user = self.superuser
        m = CustomPaginationAdmin(Child, custom_site)

        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertIsInstance(cl.paginator, CustomPaginator)

    def test_no_duplicates_for_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Basic ManyToMany.
        """
        blues = Genre.objects.create(name='Blues')
        band = Band.objects.create(name='B.B. King Review', nr_of_members=11)

        band.genres.add(blues)
        band.genres.add(blues)

        m = BandAdmin(Band, custom_site)
        request = self.factory.get('/band/', data={'genres': blues.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Group instance
        self.assertEqual(cl.result_count, 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_through_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. With an intermediate model.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = GroupAdmin(Group, custom_site)
        request = self.factory.get('/group/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Group instance
        self.assertEqual(cl.result_count, 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_through_m2m_at_second_level_in_list_filter(self):
        """
        When using a ManyToMany in list_filter at the second level behind a
        ForeignKey, results shouldn't appear more than once.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = ConcertAdmin(Concert, custom_site)
        request = self.factory.get('/concert/', data={'group__members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Concert instance
        self.assertEqual(cl.result_count, 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_inherited_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Model managed in the
        admin inherits from the one that defines the relationship.
        """
        lead = Musician.objects.create(name='John')
        four = Quartet.objects.create(name='The Beatles')
        Membership.objects.create(group=four, music=lead, role='lead voice')
        Membership.objects.create(group=four, music=lead, role='guitar player')

        m = QuartetAdmin(Quartet, custom_site)
        request = self.factory.get('/quartet/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Quartet instance
        self.assertEqual(cl.result_count, 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_m2m_to_inherited_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Target of the relationship
        inherits from another.
        """
        lead = ChordsMusician.objects.create(name='Player A')
        three = ChordsBand.objects.create(name='The Chords Trio')
        Invitation.objects.create(band=three, player=lead, instrument='guitar')
        Invitation.objects.create(band=three, player=lead, instrument='bass')

        m = ChordsBandAdmin(ChordsBand, custom_site)
        request = self.factory.get('/chordsband/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one ChordsBand instance
        self.assertEqual(cl.result_count, 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_non_unique_related_object_in_list_filter(self):
        """
        Regressions tests for #15819: If a field listed in list_filters is a
        non-unique related object, results shouldn't appear more than once.
        """
        parent = Parent.objects.create(name='Mary')
        # Two children with the same name
        Child.objects.create(parent=parent, name='Daniel')
        Child.objects.create(parent=parent, name='Daniel')

        m = ParentAdmin(Parent, custom_site)
        request = self.factory.get('/parent/', data={'child__name': 'Daniel'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # Exists() is applied.
        self.assertEqual(cl.queryset.count(), 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_changelist_search_form_validation(self):
        m = ConcertAdmin(Concert, custom_site)
        tests = [
            ({SEARCH_VAR: '\x00'}, 'Null characters are not allowed.'),
            ({SEARCH_VAR: 'some\x00thing'}, 'Null characters are not allowed.'),
        ]
        for case, error in tests:
            with self.subTest(case=case):
                request = self.factory.get('/concert/', case)
                request.user = self.superuser
                request._messages = CookieStorage(request)
                m.get_changelist_instance(request)
                messages = [m.message for m in request._messages]
                self.assertEqual(1, len(messages))
                self.assertEqual(error, messages[0])

    def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):
        """
        Regressions tests for #15819: If a field listed in search_fields
        is a non-unique related object, Exists() must be applied.
        """
        parent = Parent.objects.create(name='Mary')
        Child.objects.create(parent=parent, name='Danielle')
        Child.objects.create(parent=parent, name='Daniel')

        m = ParentAdmin(Parent, custom_site)
        request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # Exists() is applied.
        self.assertEqual(cl.queryset.count(), 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):
        """
        When using a ManyToMany in search_fields at the second level behind a
        ForeignKey, Exists() must be applied and results shouldn't appear more
        than once.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = ConcertAdmin(Concert, custom_site)
        request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # There's only one Concert instance
        self.assertEqual(cl.queryset.count(), 1)
        # Queryset must be deletable.
        self.assertIs(cl.queryset.query.distinct, False)
        cl.queryset.delete()
        self.assertEqual(cl.queryset.count(), 0)

    def test_multiple_search_fields(self):
        """
        All rows containing each of the searched words are returned, where each
        word must be in one of search_fields.
        """
        band_duo = Group.objects.create(name='Duo')
        band_hype = Group.objects.create(name='The Hype')
        mary = Musician.objects.create(name='Mary Halvorson')
        jonathan = Musician.objects.create(name='Jonathan Finlayson')
        band_duo.members.set([mary, jonathan])
        Concert.objects.create(name='Tiny desk concert', group=band_duo)
        Concert.objects.create(name='Woodstock concert', group=band_hype)
        # FK lookup.
        concert_model_admin = ConcertAdmin(Concert, custom_site)
        concert_model_admin.search_fields = ['group__name', 'name']
        # Reverse FK lookup.
        group_model_admin = GroupAdmin(Group, custom_site)
        group_model_admin.search_fields = ['name', 'concert__name', 'members__name']
        for search_string, result_count in (
            ('Duo Concert', 1),
            ('Tiny Desk Concert', 1),
            ('Concert', 2),
            ('Other Concert', 0),
            ('Duo Woodstock', 0),
        ):
            with self.subTest(search_string=search_string):
                # FK lookup.
                request = self.factory.get('/concert/', data={SEARCH_VAR: search_string})
                request.user = self.superuser
                concert_changelist = concert_model_admin.get_changelist_instance(request)
                self.assertEqual(concert_changelist.queryset.count(), result_count)
                # Reverse FK lookup.
                request = self.factory.get('/group/', data={SEARCH_VAR: search_string})
                request.user = self.superuser
                group_changelist = group_model_admin.get_changelist_instance(request)
                self.assertEqual(group_changelist.queryset.count(), result_count)
        # Many-to-many lookup.
        for search_string, result_count in (
            ('Finlayson Duo Tiny', 1),
            ('Finlayson', 1),
            ('Finlayson Hype', 0),
            ('Jonathan Finlayson Duo', 1),
            ('Mary Jonathan Duo', 1),
            ('Oscar Finlayson Duo', 0),
        ):
            with self.subTest(search_string=search_string):
                request = self.factory.get('/group/', data={SEARCH_VAR: search_string})
                request.user = self.superuser
                group_changelist = group_model_admin.get_changelist_instance(request)
                self.assertEqual(group_changelist.queryset.count(), result_count)

    def test_pk_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['group__pk']

        request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 1)

        request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk + 5})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 0)

    def test_builtin_lookup_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['name__iexact']

        request = self.factory.get('/', data={SEARCH_VAR: 'woodstock'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [concert])

        request = self.factory.get('/', data={SEARCH_VAR: 'wood'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [])

    def test_custom_lookup_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['group__name__cc']
        with register_lookup(Field, Contains, lookup_name='cc'):
            request = self.factory.get('/', data={SEARCH_VAR: 'Hype'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [concert])

            request = self.factory.get('/', data={SEARCH_VAR: 'Woodstock'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [])

    def test_spanning_relations_with_custom_lookup_in_search_fields(self):
        hype = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=hype)
        vox = Musician.objects.create(name='Vox', age=20)
        Membership.objects.create(music=vox, group=hype)
        # Register a custom lookup on IntegerField to ensure that field
        # traversing logic in ModelAdmin.get_search_results() works.
        with register_lookup(IntegerField, Exact, lookup_name='exactly'):
            m = ConcertAdmin(Concert, custom_site)
            m.search_fields = ['group__members__age__exactly']

            request = self.factory.get('/', data={SEARCH_VAR: '20'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [concert])

            request = self.factory.get('/', data={SEARCH_VAR: '21'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [])

    def test_custom_lookup_with_pk_shortcut(self):
        self.assertEqual(CharPK._meta.pk.name, 'char_pk')  # Not equal to 'pk'.
        m = admin.ModelAdmin(CustomIdUser, custom_site)

        abc = CharPK.objects.create(char_pk='abc')
        abcd = CharPK.objects.create(char_pk='abcd')
        m = admin.ModelAdmin(CharPK, custom_site)
        m.search_fields = ['pk__exact']

        request = self.factory.get('/', data={SEARCH_VAR: 'abc'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [abc])

        request = self.factory.get('/', data={SEARCH_VAR: 'abcd'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [abcd])

    def test_no_exists_for_m2m_in_list_filter_without_params(self):
        """
        If a ManyToManyField is in list_filter but isn't in any lookup params,
        the changelist's query shouldn't have Exists().
        """
        m = BandAdmin(Band, custom_site)
        for lookup_params in ({}, {'name': 'test'}):
            request = self.factory.get('/band/', lookup_params)
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertNotIn(' EXISTS', str(cl.queryset.query))

        # A ManyToManyField in params does have Exists() applied.
        request = self.factory.get('/band/', {'genres': '0'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertIn(' EXISTS', str(cl.queryset.query))

    def test_pagination(self):
        """
        Regression tests for #12893: Pagination in admins changelist doesn't
        use queryset set by modeladmin.
        """
        parent = Parent.objects.create(name='anything')
        for i in range(1, 31):
            Child.objects.create(name='name %s' % i, parent=parent)
            Child.objects.create(name='filtered %s' % i, parent=parent)

        request = self.factory.get('/child/')
        request.user = self.superuser

        # Test default queryset
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 60)
        self.assertEqual(cl.paginator.count, 60)
        self.assertEqual(list(cl.paginator.page_range), [1, 2, 3, 4, 5, 6])

        # Test custom queryset
        m = FilteredChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 30)
        self.assertEqual(cl.paginator.count, 30)
        self.assertEqual(list(cl.paginator.page_range), [1, 2, 3])

    def test_computed_list_display_localization(self):
        """
        Regression test for #13196: output of functions should be  localized
        in the changelist.
        """
        self.client.force_login(self.superuser)
        event = Event.objects.create(date=datetime.date.today())
        response = self.client.get(reverse('admin:admin_changelist_event_changelist'))
        self.assertContains(response, formats.localize(event.date))
        self.assertNotContains(response, str(event.date))

    def test_dynamic_list_display(self):
        """
        Regression tests for #14206: dynamic list_display support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(10):
            Child.objects.create(name='child %s' % i, parent=parent)

        user_noparents = self._create_superuser('noparents')
        user_parents = self._create_superuser('parents')

        # Test with user 'noparents'
        m = custom_site._registry[Child]
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertNotContains(response, 'Parent object')

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ['name', 'age'])
        self.assertEqual(list_display_links, ['name'])

        # Test with user 'parents'
        m = DynamicListDisplayChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_parents)
        response = m.changelist_view(request)
        self.assertContains(response, 'Parent object')

        custom_site.unregister(Child)

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ('parent', 'name', 'age'))
        self.assertEqual(list_display_links, ['parent'])

        # Test default implementation
        custom_site.register(Child, ChildAdmin)
        m = custom_site._registry[Child]
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertContains(response, 'Parent object')

    def test_show_all(self):
        parent = Parent.objects.create(name='anything')
        for i in range(1, 31):
            Child.objects.create(name='name %s' % i, parent=parent)
            Child.objects.create(name='filtered %s' % i, parent=parent)

        # Add "show all" parameter to request
        request = self.factory.get('/child/', data={ALL_VAR: ''})
        request.user = self.superuser

        # Test valid "show all" request (number of total objects is under max)
        m = ChildAdmin(Child, custom_site)
        m.list_max_show_all = 200
        # 200 is the max we'll pass to ChangeList
        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertEqual(len(cl.result_list), 60)

        # Test invalid "show all" request (number of total objects over max)
        # falls back to paginated pages
        m = ChildAdmin(Child, custom_site)
        m.list_max_show_all = 30
        # 30 is the max we'll pass to ChangeList for this test
        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertEqual(len(cl.result_list), 10)

    def test_dynamic_list_display_links(self):
        """
        Regression tests for #16257: dynamic list_display_links support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(1, 10):
            Child.objects.create(id=i, name='child %s' % i, parent=parent, age=i)

        m = DynamicListDisplayLinksChildAdmin(Child, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/child/', superuser)
        response = m.changelist_view(request)
        for i in range(1, 10):
            link = reverse('admin:admin_changelist_child_change', args=(i,))
            self.assertContains(response, '<a href="%s">%s</a>' % (link, i))

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ('parent', 'name', 'age'))
        self.assertEqual(list_display_links, ['age'])

    def test_no_list_display_links(self):
        """#15185 -- Allow no links from the 'change list' view grid."""
        p = Parent.objects.create(name='parent')
        m = NoListDisplayLinksParentAdmin(Parent, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/parent/', superuser)
        response = m.changelist_view(request)
        link = reverse('admin:admin_changelist_parent_change', args=(p.pk,))
        self.assertNotContains(response, '<a href="%s">' % link)

    def test_clear_all_filters_link(self):
        self.client.force_login(self.superuser)
        url = reverse('admin:auth_user_changelist')
        response = self.client.get(url)
        self.assertNotContains(response, '&#10006; Clear all filters')
        link = '<a href="%s">&#10006; Clear all filters</a>'
        for data, href in (
            ({'is_staff__exact': '0'}, '?'),
            (
                {'is_staff__exact': '0', 'username__startswith': 'test'},
                '?username__startswith=test',
            ),
            (
                {'is_staff__exact': '0', SEARCH_VAR: 'test'},
                '?%s=test' % SEARCH_VAR,
            ),
            (
                {'is_staff__exact': '0', IS_POPUP_VAR: 'id'},
                '?%s=id' % IS_POPUP_VAR,
            ),
        ):
            with self.subTest(data=data):
                response = self.client.get(url, data=data)
                self.assertContains(response, link % href)

    def test_clear_all_filters_link_callable_filter(self):
        self.client.force_login(self.superuser)
        url = reverse('admin:admin_changelist_band_changelist')
        response = self.client.get(url)
        self.assertNotContains(response, '&#10006; Clear all filters')
        link = '<a href="%s">&#10006; Clear all filters</a>'
        for data, href in (
            ({'nr_of_members_partition': '5'}, '?'),
            (
                {'nr_of_members_partition': 'more', 'name__startswith': 'test'},
                '?name__startswith=test',
            ),
            (
                {'nr_of_members_partition': '5', IS_POPUP_VAR: 'id'},
                '?%s=id' % IS_POPUP_VAR,
            ),
        ):
            with self.subTest(data=data):
                response = self.client.get(url, data=data)
                self.assertContains(response, link % href)

    def test_no_clear_all_filters_link(self):
        self.client.force_login(self.superuser)
        url = reverse('admin:auth_user_changelist')
        link = '>&#10006; Clear all filters</a>'
        for data in (
            {SEARCH_VAR: 'test'},
            {ORDER_VAR: '-1'},
            {TO_FIELD_VAR: 'id'},
            {PAGE_VAR: '1'},
            {IS_POPUP_VAR: '1'},
            {'username__startswith': 'test'},
        ):
            with self.subTest(data=data):
                response = self.client.get(url, data=data)
                self.assertNotContains(response, link)

    def test_tuple_list_display(self):
        swallow = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
        swallow2 = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
        swallow_o2o = SwallowOneToOne.objects.create(swallow=swallow2)

        model_admin = SwallowAdmin(Swallow, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/swallow/', superuser)
        response = model_admin.changelist_view(request)
        # just want to ensure it doesn't blow up during rendering
        self.assertContains(response, str(swallow.origin))
        self.assertContains(response, str(swallow.load))
        self.assertContains(response, str(swallow.speed))
        # Reverse one-to-one relations should work.
        self.assertContains(response, '<td class="field-swallowonetoone">-</td>')
        self.assertContains(response, '<td class="field-swallowonetoone">%s</td>' % swallow_o2o)

    def test_multiuser_edit(self):
        """
        Simultaneous edits of list_editable fields on the changelist by
        different users must not result in one user's edits creating a new
        object instead of modifying the correct existing object (#11313).
        """
        # To replicate this issue, simulate the following steps:
        # 1. User1 opens an admin changelist with list_editable fields.
        # 2. User2 edits object "Foo" such that it moves to another page in
        #    the pagination order and saves.
        # 3. User1 edits object "Foo" and saves.
        # 4. The edit made by User1 does not get applied to object "Foo" but
        #    instead is used to create a new object (bug).

        # For this test, order the changelist by the 'speed' attribute and
        # display 3 objects per page (SwallowAdmin.list_per_page = 3).

        # Setup the test to reflect the DB state after step 2 where User2 has
        # edited the first swallow object's speed from '4' to '1'.
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
        d = Swallow.objects.create(origin='Swallow D', load=9, speed=9)

        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')

        # Send the POST from User1 for step 3. It's still using the changelist
        # ordering from before User2's edits in step 2.
        data = {
            'form-TOTAL_FORMS': '3',
            'form-INITIAL_FORMS': '3',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(d.pk),
            'form-1-uuid': str(c.pk),
            'form-2-uuid': str(a.pk),
            'form-0-load': '9.0',
            'form-0-speed': '9.0',
            'form-1-load': '5.0',
            'form-1-speed': '5.0',
            'form-2-load': '5.0',
            'form-2-speed': '4.0',
            '_save': 'Save',
        }
        response = self.client.post(changelist_url, data, follow=True, extra={'o': '-2'})

        # The object User1 edited in step 3 is displayed on the changelist and
        # has the correct edits applied.
        self.assertContains(response, '1 swallow was changed successfully.')
        self.assertContains(response, a.origin)
        a.refresh_from_db()
        self.assertEqual(a.load, float(data['form-2-load']))
        self.assertEqual(a.speed, float(data['form-2-speed']))
        b.refresh_from_db()
        self.assertEqual(b.load, 2)
        self.assertEqual(b.speed, 2)
        c.refresh_from_db()
        self.assertEqual(c.load, float(data['form-1-load']))
        self.assertEqual(c.speed, float(data['form-1-speed']))
        d.refresh_from_db()
        self.assertEqual(d.load, float(data['form-0-load']))
        self.assertEqual(d.speed, float(data['form-0-speed']))
        # No new swallows were created.
        self.assertEqual(len(Swallow.objects.all()), 4)

    def test_get_edited_object_ids(self):
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        m = SwallowAdmin(Swallow, custom_site)
        data = {
            'form-TOTAL_FORMS': '3',
            'form-INITIAL_FORMS': '3',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-1-uuid': str(b.pk),
            'form-2-uuid': str(c.pk),
            'form-0-load': '9.0',
            'form-0-speed': '9.0',
            'form-1-load': '5.0',
            'form-1-speed': '5.0',
            'form-2-load': '5.0',
            'form-2-speed': '4.0',
            '_save': 'Save',
        }
        request = self.factory.post(changelist_url, data=data)
        pks = m._get_edited_object_pks(request, prefix='form')
        self.assertEqual(sorted(pks), sorted([str(a.pk), str(b.pk), str(c.pk)]))

    def test_get_list_editable_queryset(self):
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        data = {
            'form-TOTAL_FORMS': '2',
            'form-INITIAL_FORMS': '2',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-0-load': '10',
            '_save': 'Save',
        }
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        m = SwallowAdmin(Swallow, custom_site)
        request = self.factory.post(changelist_url, data=data)
        queryset = m._get_list_editable_queryset(request, prefix='form')
        self.assertEqual(queryset.count(), 1)
        data['form-0-uuid'] = 'INVALD_PRIMARY_KEY'
        # The unfiltered queryset is returned if there's invalid data.
        request = self.factory.post(changelist_url, data=data)
        queryset = m._get_list_editable_queryset(request, prefix='form')
        self.assertEqual(queryset.count(), 2)

    def test_get_list_editable_queryset_with_regex_chars_in_prefix(self):
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        data = {
            'form$-TOTAL_FORMS': '2',
            'form$-INITIAL_FORMS': '2',
            'form$-MIN_NUM_FORMS': '0',
            'form$-MAX_NUM_FORMS': '1000',
            'form$-0-uuid': str(a.pk),
            'form$-0-load': '10',
            '_save': 'Save',
        }
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        m = SwallowAdmin(Swallow, custom_site)
        request = self.factory.post(changelist_url, data=data)
        queryset = m._get_list_editable_queryset(request, prefix='form$')
        self.assertEqual(queryset.count(), 1)

    def test_changelist_view_list_editable_changed_objects_uses_filter(self):
        """list_editable edits use a filtered queryset to limit memory usage."""
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        data = {
            'form-TOTAL_FORMS': '2',
            'form-INITIAL_FORMS': '2',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-0-load': '10',
            '_save': 'Save',
        }
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        with CaptureQueriesContext(connection) as context:
            response = self.client.post(changelist_url, data=data)
            self.assertEqual(response.status_code, 200)
            self.assertIn('WHERE', context.captured_queries[4]['sql'])
            self.assertIn('IN', context.captured_queries[4]['sql'])
            # Check only the first few characters since the UUID may have dashes.
            self.assertIn(str(a.pk)[:8], context.captured_queries[4]['sql'])

    def test_deterministic_order_for_unordered_model(self):
        """
        The primary key is used in the ordering of the changelist's results to
        guarantee a deterministic order, even when the model doesn't have any
        default ordering defined (#17198).
        """
        superuser = self._create_superuser('superuser')

        for counter in range(1, 51):
            UnorderedObject.objects.create(id=counter, bool=True)

        class UnorderedObjectAdmin(admin.ModelAdmin):
            list_per_page = 10

        def check_results_order(ascending=False):
            custom_site.register(UnorderedObject, UnorderedObjectAdmin)
            model_admin = UnorderedObjectAdmin(UnorderedObject, custom_site)
            counter = 0 if ascending else 51
            for page in range(1, 6):
                request = self._mocked_authenticated_request('/unorderedobject/?p=%s' % page, superuser)
                response = model_admin.changelist_view(request)
                for result in response.context_data['cl'].result_list:
                    counter += 1 if ascending else -1
                    self.assertEqual(result.id, counter)
            custom_site.unregister(UnorderedObject)

        # When no order is defined at all, everything is ordered by '-pk'.
        check_results_order()

        # When an order field is defined but multiple records have the same
        # value for that field, make sure everything gets ordered by -pk as well.
        UnorderedObjectAdmin.ordering = ['bool']
        check_results_order()

        # When order fields are defined, including the pk itself, use them.
        UnorderedObjectAdmin.ordering = ['bool', '-pk']
        check_results_order()
        UnorderedObjectAdmin.ordering = ['bool', 'pk']
        check_results_order(ascending=True)
        UnorderedObjectAdmin.ordering = ['-id', 'bool']
        check_results_order()
        UnorderedObjectAdmin.ordering = ['id', 'bool']
        check_results_order(ascending=True)

    def test_deterministic_order_for_model_ordered_by_its_manager(self):
        """
        The primary key is used in the ordering of the changelist's results to
        guarantee a deterministic order, even when the model has a manager that
        defines a default ordering (#17198).
        """
        superuser = self._create_superuser('superuser')

        for counter in range(1, 51):
            OrderedObject.objects.create(id=counter, bool=True, number=counter)

        class OrderedObjectAdmin(admin.ModelAdmin):
            list_per_page = 10

        def check_results_order(ascending=False):
            custom_site.register(OrderedObject, OrderedObjectAdmin)
            model_admin = OrderedObjectAdmin(OrderedObject, custom_site)
            counter = 0 if ascending else 51
            for page in range(1, 6):
                request = self._mocked_authenticated_request('/orderedobject/?p=%s' % page, superuser)
                response = model_admin.changelist_view(request)
                for result in response.context_data['cl'].result_list:
                    counter += 1 if ascending else -1
                    self.assertEqual(result.id, counter)
            custom_site.unregister(OrderedObject)

        # When no order is defined at all, use the model's default ordering (i.e. 'number')
        check_results_order(ascending=True)

        # When an order field is defined but multiple records have the same
        # value for that field, make sure everything gets ordered by -pk as well.
        OrderedObjectAdmin.ordering = ['bool']
        check_results_order()

        # When order fields are defined, including the pk itself, use them.
        OrderedObjectAdmin.ordering = ['bool', '-pk']
        check_results_order()
        OrderedObjectAdmin.ordering = ['bool', 'pk']
        check_results_order(ascending=True)
        OrderedObjectAdmin.ordering = ['-id', 'bool']
        check_results_order()
        OrderedObjectAdmin.ordering = ['id', 'bool']
        check_results_order(ascending=True)

    @isolate_apps('admin_changelist')
    def test_total_ordering_optimization(self):
        class Related(models.Model):
            unique_field = models.BooleanField(unique=True)

            class Meta:
                ordering = ('unique_field',)

        class Model(models.Model):
            unique_field = models.BooleanField(unique=True)
            unique_nullable_field = models.BooleanField(unique=True, null=True)
            related = models.ForeignKey(Related, models.CASCADE)
            other_related = models.ForeignKey(Related, models.CASCADE)
            related_unique = models.OneToOneField(Related, models.CASCADE)
            field = models.BooleanField()
            other_field = models.BooleanField()
            null_field = models.BooleanField(null=True)

            class Meta:
                unique_together = {
                    ('field', 'other_field'),
                    ('field', 'null_field'),
                    ('related', 'other_related_id'),
                }

        class ModelAdmin(admin.ModelAdmin):
            def get_queryset(self, request):
                return Model.objects.none()

        request = self._mocked_authenticated_request('/', self.superuser)
        site = admin.AdminSite(name='admin')
        model_admin = ModelAdmin(Model, site)
        change_list = model_admin.get_changelist_instance(request)
        tests = (
            ([], ['-pk']),
            # Unique non-nullable field.
            (['unique_field'], ['unique_field']),
            (['-unique_field'], ['-unique_field']),
            # Unique nullable field.
            (['unique_nullable_field'], ['unique_nullable_field', '-pk']),
            # Field.
            (['field'], ['field', '-pk']),
            # Related field introspection is not implemented.
            (['related__unique_field'], ['related__unique_field', '-pk']),
            # Related attname unique.
            (['related_unique_id'], ['related_unique_id']),
            # Related ordering introspection is not implemented.
            (['related_unique'], ['related_unique', '-pk']),
            # Composite unique.
            (['field', '-other_field'], ['field', '-other_field']),
            # Composite unique nullable.
            (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
            # Composite unique and nullable.
            (['-field', 'null_field', 'other_field'], ['-field', 'null_field', 'other_field']),
            # Composite unique attnames.
            (['related_id', '-other_related_id'], ['related_id', '-other_related_id']),
            # Composite unique names.
            (['related', '-other_related_id'], ['related', '-other_related_id', '-pk']),
        )
        # F() objects composite unique.
        total_ordering = [F('field'), F('other_field').desc(nulls_last=True)]
        # F() objects composite unique nullable.
        non_total_ordering = [F('field'), F('null_field').desc(nulls_last=True)]
        tests += (
            (total_ordering, total_ordering),
            (non_total_ordering, non_total_ordering + ['-pk']),
        )
        for ordering, expected in tests:
            with self.subTest(ordering=ordering):
                self.assertEqual(change_list._get_deterministic_ordering(ordering), expected)

    @isolate_apps('admin_changelist')
    def test_total_ordering_optimization_meta_constraints(self):
        class Related(models.Model):
            unique_field = models.BooleanField(unique=True)

            class Meta:
                ordering = ('unique_field',)

        class Model(models.Model):
            field_1 = models.BooleanField()
            field_2 = models.BooleanField()
            field_3 = models.BooleanField()
            field_4 = models.BooleanField()
            field_5 = models.BooleanField()
            field_6 = models.BooleanField()
            nullable_1 = models.BooleanField(null=True)
            nullable_2 = models.BooleanField(null=True)
            related_1 = models.ForeignKey(Related, models.CASCADE)
            related_2 = models.ForeignKey(Related, models.CASCADE)
            related_3 = models.ForeignKey(Related, models.CASCADE)
            related_4 = models.ForeignKey(Related, models.CASCADE)

            class Meta:
                constraints = [
                    *[
                        models.UniqueConstraint(fields=fields, name=''.join(fields))
                        for fields in (
                            ['field_1'],
                            ['nullable_1'],
                            ['related_1'],
                            ['related_2_id'],
                            ['field_2', 'field_3'],
                            ['field_2', 'nullable_2'],
                            ['field_2', 'related_3'],
                            ['field_3', 'related_4_id'],
                        )
                    ],
                    models.CheckConstraint(check=models.Q(id__gt=0), name='foo'),
                    models.UniqueConstraint(
                        fields=['field_5'],
                        condition=models.Q(id__gt=10),
                        name='total_ordering_1',
                    ),
                    models.UniqueConstraint(
                        fields=['field_6'],
                        condition=models.Q(),
                        name='total_ordering',
                    ),
                ]

        class ModelAdmin(admin.ModelAdmin):
            def get_queryset(self, request):
                return Model.objects.none()

        request = self._mocked_authenticated_request('/', self.superuser)
        site = admin.AdminSite(name='admin')
        model_admin = ModelAdmin(Model, site)
        change_list = model_admin.get_changelist_instance(request)
        tests = (
            # Unique non-nullable field.
            (['field_1'], ['field_1']),
            # Unique nullable field.
            (['nullable_1'], ['nullable_1', '-pk']),
            # Related attname unique.
            (['related_1_id'], ['related_1_id']),
            (['related_2_id'], ['related_2_id']),
            # Related ordering introspection is not implemented.
            (['related_1'], ['related_1', '-pk']),
            # Composite unique.
            (['-field_2', 'field_3'], ['-field_2', 'field_3']),
            # Composite unique nullable.
            (['field_2', '-nullable_2'], ['field_2', '-nullable_2', '-pk']),
            # Composite unique and nullable.
            (
                ['field_2', '-nullable_2', 'field_3'],
                ['field_2', '-nullable_2', 'field_3'],
            ),
            # Composite field and related field name.
            (['field_2', '-related_3'], ['field_2', '-related_3', '-pk']),
            (['field_3', 'related_4'], ['field_3', 'related_4', '-pk']),
            # Composite field and related field attname.
            (['field_2', 'related_3_id'], ['field_2', 'related_3_id']),
            (['field_3', '-related_4_id'], ['field_3', '-related_4_id']),
            # Partial unique constraint is ignored.
            (['field_5'], ['field_5', '-pk']),
            # Unique constraint with an empty condition.
            (['field_6'], ['field_6']),
        )
        for ordering, expected in tests:
            with self.subTest(ordering=ordering):
                self.assertEqual(change_list._get_deterministic_ordering(ordering), expected)

    def test_dynamic_list_filter(self):
        """
        Regression tests for ticket #17646: dynamic list_filter support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(10):
            Child.objects.create(name='child %s' % i, parent=parent)

        user_noparents = self._create_superuser('noparents')
        user_parents = self._create_superuser('parents')

        # Test with user 'noparents'
        m = DynamicListFilterChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].list_filter, ['name', 'age'])

        # Test with user 'parents'
        m = DynamicListFilterChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_parents)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].list_filter, ('parent', 'name', 'age'))

    def test_dynamic_search_fields(self):
        child = self._create_superuser('child')
        m = DynamicSearchFieldsChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', child)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].search_fields, ('name', 'age'))

    def test_pagination_page_range(self):
        """
        Regression tests for ticket #15653: ensure the number of pages
        generated for changelist views are correct.
        """
        # instantiating and setting up ChangeList object
        m = GroupAdmin(Group, custom_site)
        request = self.factory.get('/group/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        cl.list_per_page = 10

        ELLIPSIS = cl.paginator.ELLIPSIS
        for number, pages, expected in [
            (1, 1, []),
            (1, 2, [1, 2]),
            (6, 11, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]),
            (6, 12, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),
            (6, 13, [1, 2, 3, 4, 5, 6, 7, 8, 9, ELLIPSIS, 12, 13]),
            (7, 12, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),
            (7, 13, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]),
            (7, 14, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ELLIPSIS, 13, 14]),
            (8, 13, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, 12, 13]),
            (8, 14, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]),
            (8, 15, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, ELLIPSIS, 14, 15]),
        ]:
            with self.subTest(number=number, pages=pages):
                # assuming exactly `pages * cl.list_per_page` objects
                Group.objects.all().delete()
                for i in range(pages * cl.list_per_page):
                    Group.objects.create(name='test band')

                # setting page number and calculating page range
                cl.page_num = number
                cl.get_results(request)
                self.assertEqual(list(pagination(cl)['page_range']), expected)

    def test_object_tools_displayed_no_add_permission(self):
        """
        When ModelAdmin.has_add_permission() returns False, the object-tools
        block is still shown.
        """
        superuser = self._create_superuser('superuser')
        m = EventAdmin(Event, custom_site)
        request = self._mocked_authenticated_request('/event/', superuser)
        self.assertFalse(m.has_add_permission(request))
        response = m.changelist_view(request)
        self.assertIn('<ul class="object-tools">', response.rendered_content)
        # The "Add" button inside the object-tools shouldn't appear.
        self.assertNotIn('Add ', response.rendered_content)

    def test_search_help_text(self):
        superuser = self._create_superuser('superuser')
        m = BandAdmin(Band, custom_site)
        # search_fields without search_help_text.
        m.search_fields = ['name']
        request = self._mocked_authenticated_request('/band/', superuser)
        response = m.changelist_view(request)
        self.assertIsNone(response.context_data['cl'].search_help_text)
        self.assertNotContains(response, '<div class="help">')
        # search_fields with search_help_text.
        m.search_help_text = 'Search help text'
        request = self._mocked_authenticated_request('/band/', superuser)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].search_help_text, 'Search help text')
        self.assertContains(response, '<div class="help">Search help text</div>')

File: tests/admin_changelist/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. 
3. from django.contrib import admin
4. from django.contrib.admin.models import LogEntry
5. from django.contrib.admin.options import IncorrectLookupParameters
6. from django.contrib.admin.templatetags.admin_list import pagination
7. from django.contrib.admin.tests import AdminSeleniumTestCase
8. from django.contrib.admin.views.main import (
9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,
10. )
11. from django.contrib.auth.models import User
12. from django.contrib.contenttypes.models import ContentType
13. from django.contrib.messages.storage.cookie import CookieStorage
14. from django.db import connection, models
15. from django.db.models import F, Field, IntegerField
16. from django.db.models.functions import Upper
17. from django.db.models.lookups import Contains, Exact
18. from django.template import Context, Template, TemplateSyntaxError
19. from django.test import TestCase, override_settings
20. from django.test.client import RequestFactory
21. from django.test.utils import (
22.     CaptureQueriesContext, isolate_apps, register_lookup,
23. )
24. from django.urls import reverse
25. from django.utils import formats
26. 
27. from .admin import (
28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,
33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
34.     site as custom_site,
35. )
36. from .models import (
37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
40. )
41. 
42. 
43. def build_tbody_html(pk, href, extra_fields):
44.     return (
45.         '<tbody><tr>'
46.         '<td class="action-checkbox">'
47.         '<input type="checkbox" name="_selected_action" value="{}" '
48.         'class="action-select"></td>'
49.         '<th class="field-name"><a href="{}">name</a></th>'
50.         '{}</tr></tbody>'
51.     ).format(pk, href, extra_fields)
52. 
53. 
54. @override_settings(ROOT_URLCONF="admin_changelist.urls")
55. class ChangeListTests(TestCase):
56.     factory = RequestFactory()
57. 
58.     @classmethod
59.     def setUpTestData(cls):
60.         cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
61. 
62.     def _create_superuser(self, username):
63.         return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')
64. 
65.     def _mocked_authenticated_request(self, url, user):
66.         request = self.factory.get(url)
67.         request.user = user
68.         return request
69. 
70.     def test_repr(self):
71.         m = ChildAdmin(Child, custom_site)
72.         request = self.factory.get('/child/')
73.         request.user = self.superuser
74.         cl = m.get_changelist_instance(request)
75.         self.assertEqual(repr(cl), '<ChangeList: model=Child model_admin=ChildAdmin>')
76. 
77.     def test_specified_ordering_by_f_expression(self):
78.         class OrderedByFBandAdmin(admin.ModelAdmin):
79.             list_display = ['name', 'genres', 'nr_of_members']
80.             ordering = (
81.                 F('nr_of_members').desc(nulls_last=True),
82.                 Upper(F('name')).asc(),
83.                 F('genres').asc(),
84.             )
85. 
86.         m = OrderedByFBandAdmin(Band, custom_site)
87.         request = self.factory.get('/band/')
88.         request.user = self.superuser
89.         cl = m.get_changelist_instance(request)
90.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'desc', 2: 'asc'})
91. 
92.     def test_specified_ordering_by_f_expression_without_asc_desc(self):
93.         class OrderedByFBandAdmin(admin.ModelAdmin):
94.             list_display = ['name', 'genres', 'nr_of_members']
95.             ordering = (F('nr_of_members'), Upper('name'), F('genres'))
96. 
97.         m = OrderedByFBandAdmin(Band, custom_site)
98.         request = self.factory.get('/band/')
99.         request.user = self.superuser
100.         cl = m.get_changelist_instance(request)
101.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'asc', 2: 'asc'})
102. 
103.     def test_select_related_preserved(self):
104.         """
105.         Regression test for #10348: ChangeList.get_queryset() shouldn't
106.         overwrite a custom select_related provided by ModelAdmin.get_queryset().
107.         """
108.         m = ChildAdmin(Child, custom_site)
109.         request = self.factory.get('/child/')
110.         request.user = self.superuser
111.         cl = m.get_changelist_instance(request)
112.         self.assertEqual(cl.queryset.query.select_related, {'parent': {}})
113. 
114.     def test_select_related_preserved_when_multi_valued_in_search_fields(self):
115.         parent = Parent.objects.create(name='Mary')
116.         Child.objects.create(parent=parent, name='Danielle')
117.         Child.objects.create(parent=parent, name='Daniel')
118. 
119.         m = ParentAdmin(Parent, custom_site)
120.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
121.         request.user = self.superuser
122. 
123.         cl = m.get_changelist_instance(request)
124.         self.assertEqual(cl.queryset.count(), 1)
125.         # select_related is preserved.
126.         self.assertEqual(cl.queryset.query.select_related, {'child': {}})
127. 
128.     def test_select_related_as_tuple(self):
129.         ia = InvitationAdmin(Invitation, custom_site)
130.         request = self.factory.get('/invitation/')
131.         request.user = self.superuser
132.         cl = ia.get_changelist_instance(request)
133.         self.assertEqual(cl.queryset.query.select_related, {'player': {}})
134. 
135.     def test_select_related_as_empty_tuple(self):
136.         ia = InvitationAdmin(Invitation, custom_site)
137.         ia.list_select_related = ()
138.         request = self.factory.get('/invitation/')
139.         request.user = self.superuser
140.         cl = ia.get_changelist_instance(request)
141.         self.assertIs(cl.queryset.query.select_related, False)
142. 
143.     def test_get_select_related_custom_method(self):
144.         class GetListSelectRelatedAdmin(admin.ModelAdmin):
145.             list_display = ('band', 'player')
146. 
147.             def get_list_select_related(self, request):
148.                 return ('band', 'player')
149. 
150.         ia = GetListSelectRelatedAdmin(Invitation, custom_site)
151.         request = self.factory.get('/invitation/')
152.         request.user = self.superuser
153.         cl = ia.get_changelist_instance(request)
154.         self.assertEqual(cl.queryset.query.select_related, {'player': {}, 'band': {}})
155. 
156.     def test_result_list_empty_changelist_value(self):
157.         """
158.         Regression test for #14982: EMPTY_CHANGELIST_VALUE should be honored
159.         for relationship fields
160.         """
161.         new_child = Child.objects.create(name='name', parent=None)
162.         request = self.factory.get('/child/')
163.         request.user = self.superuser
164.         m = ChildAdmin(Child, custom_site)
165.         cl = m.get_changelist_instance(request)
166.         cl.formset = None
167.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
168.         context = Context({'cl': cl, 'opts': Child._meta})
169.         table_output = template.render(context)
170.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
171.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">-</td>')
172.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
173. 
174.     def test_result_list_set_empty_value_display_on_admin_site(self):
175.         """
176.         Empty value display can be set on AdminSite.
177.         """
178.         new_child = Child.objects.create(name='name', parent=None)
179.         request = self.factory.get('/child/')
180.         request.user = self.superuser
181.         # Set a new empty display value on AdminSite.
182.         admin.site.empty_value_display = '???'
183.         m = ChildAdmin(Child, admin.site)
184.         cl = m.get_changelist_instance(request)
185.         cl.formset = None
186.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
187.         context = Context({'cl': cl, 'opts': Child._meta})
188.         table_output = template.render(context)
189.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
190.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">???</td>')
191.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
192. 
193.     def test_result_list_set_empty_value_display_in_model_admin(self):
194.         """
195.         Empty value display can be set in ModelAdmin or individual fields.
196.         """
197.         new_child = Child.objects.create(name='name', parent=None)
198.         request = self.factory.get('/child/')
199.         request.user = self.superuser
200.         m = EmptyValueChildAdmin(Child, admin.site)
201.         cl = m.get_changelist_instance(request)
202.         cl.formset = None
203.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
204.         context = Context({'cl': cl, 'opts': Child._meta})
205.         table_output = template.render(context)
206.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
207.         row_html = build_tbody_html(
208.             new_child.id,
209.             link,
210.             '<td class="field-age_display">&amp;dagger;</td>'
211.             '<td class="field-age">-empty-</td>'
212.         )
213.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
214. 
215.     def test_result_list_html(self):
216.         """
217.         Inclusion tag result_list generates a table when with default
218.         ModelAdmin settings.
219.         """
220.         new_parent = Parent.objects.create(name='parent')
221.         new_child = Child.objects.create(name='name', parent=new_parent)
222.         request = self.factory.get('/child/')
223.         request.user = self.superuser
224.         m = ChildAdmin(Child, custom_site)
225.         cl = m.get_changelist_instance(request)
226.         cl.formset = None
227.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
228.         context = Context({'cl': cl, 'opts': Child._meta})
229.         table_output = template.render(context)
230.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
231.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">%s</td>' % new_parent)
232.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
233. 
234.     def test_result_list_editable_html(self):
235.         """
236.         Regression tests for #11791: Inclusion tag result_list generates a
237.         table and this checks that the items are nested within the table
238.         element tags.
239.         Also a regression test for #13599, verifies that hidden fields
240.         when list_editable is enabled are rendered in a div outside the
241.         table.
242.         """
243.         new_parent = Parent.objects.create(name='parent')
244.         new_child = Child.objects.create(name='name', parent=new_parent)
245.         request = self.factory.get('/child/')
246.         request.user = self.superuser
247.         m = ChildAdmin(Child, custom_site)
248. 
249.         # Test with list_editable fields
250.         m.list_display = ['id', 'name', 'parent']
251.         m.list_display_links = ['id']
252.         m.list_editable = ['name']
253.         cl = m.get_changelist_instance(request)
254.         FormSet = m.get_changelist_formset(request)
255.         cl.formset = FormSet(queryset=cl.result_list)
256.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
257.         context = Context({'cl': cl, 'opts': Child._meta})
258.         table_output = template.render(context)
259.         # make sure that hidden fields are in the correct place
260.         hiddenfields_div = (
261.             '<div class="hiddenfields">'
262.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
263.             '</div>'
264.         ) % new_child.id
265.         self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')
266. 
267.         # make sure that list editable fields are rendered in divs correctly
268.         editable_name_field = (
269.             '<input name="form-0-name" value="name" class="vTextField" '
270.             'maxlength="30" type="text" id="id_form-0-name">'
271.         )
272.         self.assertInHTML(
273.             '<td class="field-name">%s</td>' % editable_name_field,
274.             table_output,
275.             msg_prefix='Failed to find "name" list_editable field',
276.         )
277. 
278.     def test_result_list_editable(self):
279.         """
280.         Regression test for #14312: list_editable with pagination
281.         """
282.         new_parent = Parent.objects.create(name='parent')
283.         for i in range(1, 201):
284.             Child.objects.create(name='name %s' % i, parent=new_parent)
285.         request = self.factory.get('/child/', data={'p': -1})  # Anything outside range
286.         request.user = self.superuser
287.         m = ChildAdmin(Child, custom_site)
288. 
289.         # Test with list_editable fields
290.         m.list_display = ['id', 'name', 'parent']
291.         m.list_display_links = ['id']
292.         m.list_editable = ['name']
293.         with self.assertRaises(IncorrectLookupParameters):
294.             m.get_changelist_instance(request)
295. 
296.     def test_custom_paginator(self):
297.         new_parent = Parent.objects.create(name='parent')
298.         for i in range(1, 201):
299.             Child.objects.create(name='name %s' % i, parent=new_parent)
300. 
301.         request = self.factory.get('/child/')
302.         request.user = self.superuser
303.         m = CustomPaginationAdmin(Child, custom_site)
304. 
305.         cl = m.get_changelist_instance(request)
306.         cl.get_results(request)
307.         self.assertIsInstance(cl.paginator, CustomPaginator)
308. 
309.     def test_no_duplicates_for_m2m_in_list_filter(self):
310.         """
311.         Regression test for #13902: When using a ManyToMany in list_filter,
312.         results shouldn't appear more than once. Basic ManyToMany.
313.         """
314.         blues = Genre.objects.create(name='Blues')
315.         band = Band.objects.create(name='B.B. King Review', nr_of_members=11)
316. 
317.         band.genres.add(blues)
318.         band.genres.add(blues)
319. 
320.         m = BandAdmin(Band, custom_site)
321.         request = self.factory.get('/band/', data={'genres': blues.pk})
322.         request.user = self.superuser
323. 
324.         cl = m.get_changelist_instance(request)
325.         cl.get_results(request)
326. 
327.         # There's only one Group instance
328.         self.assertEqual(cl.result_count, 1)
329.         # Queryset must be deletable.
330.         self.assertIs(cl.queryset.query.distinct, False)
331.         cl.queryset.delete()
332.         self.assertEqual(cl.queryset.count(), 0)
333. 
334.     def test_no_duplicates_for_through_m2m_in_list_filter(self):
335.         """
336.         Regression test for #13902: When using a ManyToMany in list_filter,
337.         results shouldn't appear more than once. With an intermediate model.
338.         """
339.         lead = Musician.objects.create(name='Vox')
340.         band = Group.objects.create(name='The Hype')
341.         Membership.objects.create(group=band, music=lead, role='lead voice')
342.         Membership.objects.create(group=band, music=lead, role='bass player')
343. 
344.         m = GroupAdmin(Group, custom_site)
345.         request = self.factory.get('/group/', data={'members': lead.pk})
346.         request.user = self.superuser
347. 
348.         cl = m.get_changelist_instance(request)
349.         cl.get_results(request)
350. 
351.         # There's only one Group instance
352.         self.assertEqual(cl.result_count, 1)
353.         # Queryset must be deletable.
354.         self.assertIs(cl.queryset.query.distinct, False)
355.         cl.queryset.delete()
356.         self.assertEqual(cl.queryset.count(), 0)
357. 
358.     def test_no_duplicates_for_through_m2m_at_second_level_in_list_filter(self):
359.         """
360.         When using a ManyToMany in list_filter at the second level behind a
361.         ForeignKey, results shouldn't appear more than once.
362.         """
363.         lead = Musician.objects.create(name='Vox')
364.         band = Group.objects.create(name='The Hype')
365.         Concert.objects.create(name='Woodstock', group=band)
366.         Membership.objects.create(group=band, music=lead, role='lead voice')
367.         Membership.objects.create(group=band, music=lead, role='bass player')
368. 
369.         m = ConcertAdmin(Concert, custom_site)
370.         request = self.factory.get('/concert/', data={'group__members': lead.pk})
371.         request.user = self.superuser
372. 
373.         cl = m.get_changelist_instance(request)
374.         cl.get_results(request)
375. 
376.         # There's only one Concert instance
377.         self.assertEqual(cl.result_count, 1)
378.         # Queryset must be deletable.
379.         self.assertIs(cl.queryset.query.distinct, False)
380.         cl.queryset.delete()
381.         self.assertEqual(cl.queryset.count(), 0)
382. 
383.     def test_no_duplicates_for_inherited_m2m_in_list_filter(self):
384.         """
385.         Regression test for #13902: When using a ManyToMany in list_filter,
386.         results shouldn't appear more than once. Model managed in the
387.         admin inherits from the one that defines the relationship.
388.         """
389.         lead = Musician.objects.create(name='John')
390.         four = Quartet.objects.create(name='The Beatles')
391.         Membership.objects.create(group=four, music=lead, role='lead voice')
392.         Membership.objects.create(group=four, music=lead, role='guitar player')
393. 
394.         m = QuartetAdmin(Quartet, custom_site)
395.         request = self.factory.get('/quartet/', data={'members': lead.pk})
396.         request.user = self.superuser
397. 
398.         cl = m.get_changelist_instance(request)
399.         cl.get_results(request)
400. 
401.         # There's only one Quartet instance
402.         self.assertEqual(cl.result_count, 1)
403.         # Queryset must be deletable.
404.         self.assertIs(cl.queryset.query.distinct, False)
405.         cl.queryset.delete()
406.         self.assertEqual(cl.queryset.count(), 0)
407. 
408.     def test_no_duplicates_for_m2m_to_inherited_in_list_filter(self):
409.         """
410.         Regression test for #13902: When using a ManyToMany in list_filter,
411.         results shouldn't appear more than once. Target of the relationship
412.         inherits from another.
413.         """
414.         lead = ChordsMusician.objects.create(name='Player A')
415.         three = ChordsBand.objects.create(name='The Chords Trio')
416.         Invitation.objects.create(band=three, player=lead, instrument='guitar')
417.         Invitation.objects.create(band=three, player=lead, instrument='bass')
418. 
419.         m = ChordsBandAdmin(ChordsBand, custom_site)
420.         request = self.factory.get('/chordsband/', data={'members': lead.pk})
421.         request.user = self.superuser
422. 
423.         cl = m.get_changelist_instance(request)
424.         cl.get_results(request)
425. 
426.         # There's only one ChordsBand instance
427.         self.assertEqual(cl.result_count, 1)
428.         # Queryset must be deletable.
429.         self.assertIs(cl.queryset.query.distinct, False)
430.         cl.queryset.delete()
431.         self.assertEqual(cl.queryset.count(), 0)
432. 
433.     def test_no_duplicates_for_non_unique_related_object_in_list_filter(self):
434.         """
435.         Regressions tests for #15819: If a field listed in list_filters is a
436.         non-unique related object, results shouldn't appear more than once.
437.         """
438.         parent = Parent.objects.create(name='Mary')
439.         # Two children with the same name
440.         Child.objects.create(parent=parent, name='Daniel')
441.         Child.objects.create(parent=parent, name='Daniel')
442. 
443.         m = ParentAdmin(Parent, custom_site)
444.         request = self.factory.get('/parent/', data={'child__name': 'Daniel'})
445.         request.user = self.superuser
446. 
447.         cl = m.get_changelist_instance(request)
448.         # Exists() is applied.
449.         self.assertEqual(cl.queryset.count(), 1)
450.         # Queryset must be deletable.
451.         self.assertIs(cl.queryset.query.distinct, False)
452.         cl.queryset.delete()
453.         self.assertEqual(cl.queryset.count(), 0)
454. 
455.     def test_changelist_search_form_validation(self):
456.         m = ConcertAdmin(Concert, custom_site)
457.         tests = [
458.             ({SEARCH_VAR: '\x00'}, 'Null characters are not allowed.'),
459.             ({SEARCH_VAR: 'some\x00thing'}, 'Null characters are not allowed.'),
460.         ]
461.         for case, error in tests:
462.             with self.subTest(case=case):
463.                 request = self.factory.get('/concert/', case)
464.                 request.user = self.superuser
465.                 request._messages = CookieStorage(request)
466.                 m.get_changelist_instance(request)
467.                 messages = [m.message for m in request._messages]
468.                 self.assertEqual(1, len(messages))
469.                 self.assertEqual(error, messages[0])
470. 
471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):
472.         """
473.         Regressions tests for #15819: If a field listed in search_fields
474.         is a non-unique related object, Exists() must be applied.
475.         """
476.         parent = Parent.objects.create(name='Mary')
477.         Child.objects.create(parent=parent, name='Danielle')
478.         Child.objects.create(parent=parent, name='Daniel')
479. 
480.         m = ParentAdmin(Parent, custom_site)
481.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
482.         request.user = self.superuser
483. 
484.         cl = m.get_changelist_instance(request)
485.         # Exists() is applied.
486.         self.assertEqual(cl.queryset.count(), 1)
487.         # Queryset must be deletable.
488.         self.assertIs(cl.queryset.query.distinct, False)
489.         cl.queryset.delete()
490.         self.assertEqual(cl.queryset.count(), 0)
491. 
492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):
493.         """
494.         When using a ManyToMany in search_fields at the second level behind a
495.         ForeignKey, Exists() must be applied and results shouldn't appear more
496.         than once.
497.         """
498.         lead = Musician.objects.create(name='Vox')
499.         band = Group.objects.create(name='The Hype')
500.         Concert.objects.create(name='Woodstock', group=band)


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and return it in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 00:21:09,425 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants to find relevant test cases for a bug related to unnecessary joins in admin changelist queries when using `search_fields`.\n   - The test cases should be complete and self-contained, which requires including all necessary imports.\n2. Extended relevance:\n   - This context provides all the necessary imports for the test cases in `tests/admin_changelist/tests.py`. It imports `admin`, `TestCase`, `RequestFactory`, various models, and other utilities that are essential for setting up and running the tests that follow.', relative_path='tests/admin_changelist/tests.py', start_line=1, end_line=41), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requires complete test cases, including setup and mocking.\n   - The bug is related to the admin changelist view.\n2. Extended relevance:\n   - This context provides the base test class `ChangeListTests` and its essential setup methods (`setUpTestData`, `_create_superuser`, `_mocked_authenticated_request`).\n   - This setup, particularly the creation of a superuser and a request factory, is a prerequisite for all the changelist tests that demonstrate the search functionality, making it a crucial part of a complete test case.', relative_path='tests/admin_changelist/tests.py', start_line=54, end_line=69), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug report describes a performance issue when searching with multiple words across related models, causing excessive JOINs.\n2. Extended relevance:\n   - This test case, `test_no_duplicates_for_non_unique_related_object_in_search_fields`, directly addresses a common problem caused by JOINs in searches: duplicate results.\n   - It verifies that when `search_fields` includes a non-unique related object, the query is constructed correctly to return only one result, not duplicates. This is highly relevant to ensuring search queries are built efficiently.', relative_path='tests/admin_changelist/tests.py', start_line=471, end_line=491), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug report highlights performance degradation from multiple JOINs when searching with several words across relationships.\n2. Extended relevance:\n   - This test, `test_multiple_search_fields`, is the most relevant example. It explicitly tests searching with a string containing multiple words across various `search_fields`, including fields on the model itself, a `ForeignKey` (`group__name`), and a `ManyToManyField` (`members__name`).\n   - It asserts the correct number of results are returned, directly testing the logic for combining multiple search terms and handling the resulting JOINs, which is the core of the reported bug.', relative_path='tests/admin_changelist/tests.py', start_line=603, end_line=661), ContextOutput(reasoning='1. Query requirement analysis:\n   - The bug involves `search_fields` that span relationships, leading to inefficient queries.\n2. Extended relevance:\n   - This test, `test_no_duplicates_for_many_to_many_at_second_level_in_search_fields`, demonstrates how the admin search handles complex queries that span multiple relationships (a `ForeignKey` followed by a `ManyToManyField`).\n   - It confirms that `Exists()` is used to prevent duplicate results, which is a key technique for writing efficient queries in such scenarios. This is directly related to the bug about preventing unnecessary or inefficient JOINs.', relative_path='tests/admin_changelist/tests.py', start_line=492, end_line=514)]
2025-10-06 00:21:09,426 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/admin_changelist/tests.py', content='1. import datetime\n2. \n3. from django.contrib import admin\n4. from django.contrib.admin.models import LogEntry\n5. from django.contrib.admin.options import IncorrectLookupParameters\n6. from django.contrib.admin.templatetags.admin_list import pagination\n7. from django.contrib.admin.tests import AdminSeleniumTestCase\n8. from django.contrib.admin.views.main import (\n9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n10. )\n11. from django.contrib.auth.models import User\n12. from django.contrib.contenttypes.models import ContentType\n13. from django.contrib.messages.storage.cookie import CookieStorage\n14. from django.db import connection, models\n15. from django.db.models import F, Field, IntegerField\n16. from django.db.models.functions import Upper\n17. from django.db.models.lookups import Contains, Exact\n18. from django.template import Context, Template, TemplateSyntaxError\n19. from django.test import TestCase, override_settings\n20. from django.test.client import RequestFactory\n21. from django.test.utils import (\n22.     CaptureQueriesContext, isolate_apps, register_lookup,\n23. )\n24. from django.urls import reverse\n25. from django.utils import formats\n26. \n27. from .admin import (\n28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n34.     site as custom_site,\n35. )\n36. from .models import (\n37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n40. )\n41. ', start_line_number=1, end_line_number=41), Context(relative_path='tests/admin_changelist/tests.py', content='54. @override_settings(ROOT_URLCONF="admin_changelist.urls")\n55. class ChangeListTests(TestCase):\n56.     factory = RequestFactory()\n57. \n58.     @classmethod\n59.     def setUpTestData(cls):\n60.         cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n61. \n62.     def _create_superuser(self, username):\n63.         return User.objects.create_superuser(username=username, email=\'a@b.com\', password=\'xxx\')\n64. \n65.     def _mocked_authenticated_request(self, url, user):\n66.         request = self.factory.get(url)\n67.         request.user = user\n68.         return request\n69. ', start_line_number=54, end_line_number=69), Context(relative_path='tests/admin_changelist/tests.py', content='471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):\n472.         """\n473.         Regressions tests for #15819: If a field listed in search_fields\n474.         is a non-unique related object, Exists() must be applied.\n475.         """\n476.         parent = Parent.objects.create(name=\'Mary\')\n477.         Child.objects.create(parent=parent, name=\'Danielle\')\n478.         Child.objects.create(parent=parent, name=\'Daniel\')\n479. \n480.         m = ParentAdmin(Parent, custom_site)\n481.         request = self.factory.get(\'/parent/\', data={SEARCH_VAR: \'daniel\'})\n482.         request.user = self.superuser\n483. \n484.         cl = m.get_changelist_instance(request)\n485.         # Exists() is applied.\n486.         self.assertEqual(cl.queryset.count(), 1)\n487.         # Queryset must be deletable.\n488.         self.assertIs(cl.queryset.query.distinct, False)\n489.         cl.queryset.delete()\n490.         self.assertEqual(cl.queryset.count(), 0)\n491. ', start_line_number=471, end_line_number=491), Context(relative_path='tests/admin_changelist/tests.py', content='603.         concert = Concert.objects.create(name=\'Woodstock\', group=band)\n604. \n605.         m = ConcertAdmin(Concert, custom_site)\n606.         m.search_fields = [\'group__name__cc\']\n607.         with register_lookup(Field, Contains, lookup_name=\'cc\'):\n608.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Hype\'})\n609.             request.user = self.superuser\n610.             cl = m.get_changelist_instance(request)\n611.             self.assertCountEqual(cl.queryset, [concert])\n612. \n613.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Woodstock\'})\n614.             request.user = self.superuser\n615.             cl = m.get_changelist_instance(request)\n616.             self.assertCountEqual(cl.queryset, [])\n617. \n618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):\n619.         hype = Group.objects.create(name=\'The Hype\')\n620.         concert = Concert.objects.create(name=\'Woodstock\', group=hype)\n621.         vox = Musician.objects.create(name=\'Vox\', age=20)\n622.         Membership.objects.create(music=vox, group=hype)\n623.         # Register a custom lookup on IntegerField to ensure that field\n624.         # traversing logic in ModelAdmin.get_search_results() works.\n625.         with register_lookup(IntegerField, Exact, lookup_name=\'exactly\'):\n626.             m = ConcertAdmin(Concert, custom_site)\n627.             m.search_fields = [\'group__members__age__exactly\']\n628. \n629.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'20\'})\n630.             request.user = self.superuser\n631.             cl = m.get_changelist_instance(request)\n632.             self.assertCountEqual(cl.queryset, [concert])\n633. \n634.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'21\'})\n635.             request.user = self.superuser\n636.             cl = m.get_changelist_instance(request)\n637.             self.assertCountEqual(cl.queryset, [])\n638. \n639.     def test_custom_lookup_with_pk_shortcut(self):\n640.         self.assertEqual(CharPK._meta.pk.name, \'char_pk\')  # Not equal to \'pk\'.\n641.         m = admin.ModelAdmin(CustomIdUser, custom_site)\n642. \n643.         abc = CharPK.objects.create(char_pk=\'abc\')\n644.         abcd = CharPK.objects.create(char_pk=\'abcd\')\n645.         m = admin.ModelAdmin(CharPK, custom_site)\n646.         m.search_fields = [\'pk__exact\']\n647. \n648.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abc\'})\n649.         request.user = self.superuser\n650.         cl = m.get_changelist_instance(request)\n651.         self.assertCountEqual(cl.queryset, [abc])\n652. \n653.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abcd\'})\n654.         request.user = self.superuser\n655.         cl = m.get_changelist_instance(request)\n656.         self.assertCountEqual(cl.queryset, [abcd])\n657. \n658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):\n659.         """\n660.         If a ManyToManyField is in list_filter but isn\'t in any lookup params,\n661.         the changelist\'s query shouldn\'t have Exists().', start_line_number=603, end_line_number=661), Context(relative_path='tests/admin_changelist/tests.py', content='492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):\n493.         """\n494.         When using a ManyToMany in search_fields at the second level behind a\n495.         ForeignKey, Exists() must be applied and results shouldn\'t appear more\n496.         than once.\n497.         """\n498.         lead = Musician.objects.create(name=\'Vox\')\n499.         band = Group.objects.create(name=\'The Hype\')\n500.         Concert.objects.create(name=\'Woodstock\', group=band)\n501.         Membership.objects.create(group=band, music=lead, role=\'lead voice\')\n502.         Membership.objects.create(group=band, music=lead, role=\'bass player\')\n503. \n504.         m = ConcertAdmin(Concert, custom_site)\n505.         request = self.factory.get(\'/concert/\', data={SEARCH_VAR: \'vox\'})\n506.         request.user = self.superuser\n507. \n508.         cl = m.get_changelist_instance(request)\n509.         # There\'s only one Concert instance\n510.         self.assertEqual(cl.queryset.count(), 1)\n511.         # Queryset must be deletable.\n512.         self.assertIs(cl.queryset.query.distinct, False)\n513.         cl.queryset.delete()\n514.         self.assertEqual(cl.queryset.count(), 0)', start_line_number=492, end_line_number=514)]
2025-10-06 00:21:09,427 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 00:21:09,427 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_csrf_cookie_masked.py
    |   ├── test_middleware_mixin.py
    |   ├── test_use_l10n.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_deprecation_forms.py
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoadmin_deprecated
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_middleware_urlconf.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   ├── test_shuffler.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── failures
    |   |   ├── __init__.py
    |   |   └── tests_failures.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       ├── tests_inheritance.py
    |       └── tests_syntax_error.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_serializemixin.py
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Unnecessary joins in admin changelist query

Issue description: 
Description
	
Django 1.2.5
Models:
class Client(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	contact_person = models.CharField(_('contact person'), max_length=256, blank=True, null=True)
	...
class ClientOffice(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	...
	client = models.ForeignKey(Client, verbose_name=_('client'))
	...
and admin options like these:
class ClientAdmin(admin.ModelAdmin):
	search_fields = ('name', 'name2', 'contact_person', 'clientoffice__name', 'clientoffice__name2')
	...
Numbers:
>>> Client.objects.count()
10907
>>> ClientOffice.objects.count()
16952
Now, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.
The problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 1 - 41
Content:
1. import datetime
2. 
3. from django.contrib import admin
4. from django.contrib.admin.models import LogEntry
5. from django.contrib.admin.options import IncorrectLookupParameters
6. from django.contrib.admin.templatetags.admin_list import pagination
7. from django.contrib.admin.tests import AdminSeleniumTestCase
8. from django.contrib.admin.views.main import (
9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,
10. )
11. from django.contrib.auth.models import User
12. from django.contrib.contenttypes.models import ContentType
13. from django.contrib.messages.storage.cookie import CookieStorage
14. from django.db import connection, models
15. from django.db.models import F, Field, IntegerField
16. from django.db.models.functions import Upper
17. from django.db.models.lookups import Contains, Exact
18. from django.template import Context, Template, TemplateSyntaxError
19. from django.test import TestCase, override_settings
20. from django.test.client import RequestFactory
21. from django.test.utils import (
22.     CaptureQueriesContext, isolate_apps, register_lookup,
23. )
24. from django.urls import reverse
25. from django.utils import formats
26. 
27. from .admin import (
28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,
33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
34.     site as custom_site,
35. )
36. from .models import (
37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
40. )
41. 


File: tests/admin_changelist/tests.py
Line number range: 54 - 69
Content:
54. @override_settings(ROOT_URLCONF="admin_changelist.urls")
55. class ChangeListTests(TestCase):
56.     factory = RequestFactory()
57. 
58.     @classmethod
59.     def setUpTestData(cls):
60.         cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
61. 
62.     def _create_superuser(self, username):
63.         return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')
64. 
65.     def _mocked_authenticated_request(self, url, user):
66.         request = self.factory.get(url)
67.         request.user = user
68.         return request
69. 


File: tests/admin_changelist/tests.py
Line number range: 471 - 491
Content:
471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):
472.         """
473.         Regressions tests for #15819: If a field listed in search_fields
474.         is a non-unique related object, Exists() must be applied.
475.         """
476.         parent = Parent.objects.create(name='Mary')
477.         Child.objects.create(parent=parent, name='Danielle')
478.         Child.objects.create(parent=parent, name='Daniel')
479. 
480.         m = ParentAdmin(Parent, custom_site)
481.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
482.         request.user = self.superuser
483. 
484.         cl = m.get_changelist_instance(request)
485.         # Exists() is applied.
486.         self.assertEqual(cl.queryset.count(), 1)
487.         # Queryset must be deletable.
488.         self.assertIs(cl.queryset.query.distinct, False)
489.         cl.queryset.delete()
490.         self.assertEqual(cl.queryset.count(), 0)
491. 


File: tests/admin_changelist/tests.py
Line number range: 603 - 661
Content:
603.         concert = Concert.objects.create(name='Woodstock', group=band)
604. 
605.         m = ConcertAdmin(Concert, custom_site)
606.         m.search_fields = ['group__name__cc']
607.         with register_lookup(Field, Contains, lookup_name='cc'):
608.             request = self.factory.get('/', data={SEARCH_VAR: 'Hype'})
609.             request.user = self.superuser
610.             cl = m.get_changelist_instance(request)
611.             self.assertCountEqual(cl.queryset, [concert])
612. 
613.             request = self.factory.get('/', data={SEARCH_VAR: 'Woodstock'})
614.             request.user = self.superuser
615.             cl = m.get_changelist_instance(request)
616.             self.assertCountEqual(cl.queryset, [])
617. 
618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):
619.         hype = Group.objects.create(name='The Hype')
620.         concert = Concert.objects.create(name='Woodstock', group=hype)
621.         vox = Musician.objects.create(name='Vox', age=20)
622.         Membership.objects.create(music=vox, group=hype)
623.         # Register a custom lookup on IntegerField to ensure that field
624.         # traversing logic in ModelAdmin.get_search_results() works.
625.         with register_lookup(IntegerField, Exact, lookup_name='exactly'):
626.             m = ConcertAdmin(Concert, custom_site)
627.             m.search_fields = ['group__members__age__exactly']
628. 
629.             request = self.factory.get('/', data={SEARCH_VAR: '20'})
630.             request.user = self.superuser
631.             cl = m.get_changelist_instance(request)
632.             self.assertCountEqual(cl.queryset, [concert])
633. 
634.             request = self.factory.get('/', data={SEARCH_VAR: '21'})
635.             request.user = self.superuser
636.             cl = m.get_changelist_instance(request)
637.             self.assertCountEqual(cl.queryset, [])
638. 
639.     def test_custom_lookup_with_pk_shortcut(self):
640.         self.assertEqual(CharPK._meta.pk.name, 'char_pk')  # Not equal to 'pk'.
641.         m = admin.ModelAdmin(CustomIdUser, custom_site)
642. 
643.         abc = CharPK.objects.create(char_pk='abc')
644.         abcd = CharPK.objects.create(char_pk='abcd')
645.         m = admin.ModelAdmin(CharPK, custom_site)
646.         m.search_fields = ['pk__exact']
647. 
648.         request = self.factory.get('/', data={SEARCH_VAR: 'abc'})
649.         request.user = self.superuser
650.         cl = m.get_changelist_instance(request)
651.         self.assertCountEqual(cl.queryset, [abc])
652. 
653.         request = self.factory.get('/', data={SEARCH_VAR: 'abcd'})
654.         request.user = self.superuser
655.         cl = m.get_changelist_instance(request)
656.         self.assertCountEqual(cl.queryset, [abcd])
657. 
658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):
659.         """
660.         If a ManyToManyField is in list_filter but isn't in any lookup params,
661.         the changelist's query shouldn't have Exists().


File: tests/admin_changelist/tests.py
Line number range: 492 - 514
Content:
492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):
493.         """
494.         When using a ManyToMany in search_fields at the second level behind a
495.         ForeignKey, Exists() must be applied and results shouldn't appear more
496.         than once.
497.         """
498.         lead = Musician.objects.create(name='Vox')
499.         band = Group.objects.create(name='The Hype')
500.         Concert.objects.create(name='Woodstock', group=band)
501.         Membership.objects.create(group=band, music=lead, role='lead voice')
502.         Membership.objects.create(group=band, music=lead, role='bass player')
503. 
504.         m = ConcertAdmin(Concert, custom_site)
505.         request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
506.         request.user = self.superuser
507. 
508.         cl = m.get_changelist_instance(request)
509.         # There's only one Concert instance
510.         self.assertEqual(cl.queryset.count(), 1)
511.         # Queryset must be deletable.
512.         self.assertIs(cl.queryset.query.distinct, False)
513.         cl.queryset.delete()
514.         self.assertEqual(cl.queryset.count(), 0)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 00:21:46,819 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user\'s bug report describes a performance issue caused by "unnecessary joins" when searching in the admin changelist with multiple search terms across related models.\n2. The provided context contains tests for admin search functionality, but they all use single-term search queries.\n3. These existing tests (`test_no_duplicates_for_non_unique_related_object_in_search_fields`, `test_no_duplicates_for_many_to_many_at_second_level_in_search_fields`) are relevant as they test `search_fields` with relationships and preventing duplicate results. However, they don\'t address the core issue of multiple search terms causing redundant joins.\n4. To find the most relevant test cases that demonstrate the reported bug or similar functionality, I need to examine tests that use multiple search words.\n5. Therefore, additional context from `tests/admin_changelist/tests.py` is required to find tests that cover this specific scenario.' refined_query="Please provide tests from `tests/admin_changelist/tests.py` that test the admin search functionality (`search_fields`) with multiple search terms, especially when the search spans foreign key or many-to-many relationships. I'm looking for tests that might check for query count or prevention of duplicate results or unnecessary joins."
2025-10-06 00:22:51,701 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56314, 'total_token_count': 63321, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56314}], 'thoughts_token_count': 7007, 'candidates_token_count': 0, 'cached_content_token_count': 0, 'cache_tokens_details': [], 'candidates_tokens_details': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-pro'} id='run--29a0598a-dfd9-42f9-9261-5e3684458e76-0' usage_metadata={'input_tokens': 56314, 'output_tokens': 0, 'total_tokens': 63321, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 7007}}
2025-10-06 00:22:51,702 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 00:22:51,702 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - No context available from tool messages, returning existing context
2025-10-06 00:22:51,702 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 00:22:51,702 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   └── static
|   |   |       └── fontawesome
|   |   └── djangodocs-epub
|   |       └── static
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   └── gis
|       └── mapwidget.test.js
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   └── admin
    |   |       └── admin_views
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   └── registration
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_csrf_cookie_masked.py
    |   ├── test_middleware_mixin.py
    |   ├── test_use_l10n.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   └── registration
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_deprecation_forms.py
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   └── robots.txt
    |   |   └── registration
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoadmin_deprecated
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   └── javascript_ignored.js
    |   |   └── templates
    |   |       └── subdir
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   ├── templates
    |   |   └── shortcuts
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   ├── loop
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   ├── jinja2
    |   |   └── template_backends
    |   ├── template_strings
    |   |   └── template_backends
    |   ├── templates
    |   |   └── template_backends
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   ├── templates
    |   |   └── template_loader
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   ├── other_templates
    |   |   └── priority
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   ├── fs2
    |   |   └── fs3
    |   ├── relative_templates
    |   |   └── dir1
    |   |       └── dir2
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── first
    |   |   ├── priority
    |   |   ├── second
    |   |   └── template_tests
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   └── views
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_middleware_urlconf.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   ├── test_shuffler.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── failures
    |   |   ├── __init__.py
    |   |   └── tests_failures.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       ├── tests_inheritance.py
    |       └── tests_syntax_error.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   ├── test_serializemixin.py
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Unnecessary joins in admin changelist query

Issue description: 
Description
	
Django 1.2.5
Models:
class Client(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	contact_person = models.CharField(_('contact person'), max_length=256, blank=True, null=True)
	...
class ClientOffice(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	...
	client = models.ForeignKey(Client, verbose_name=_('client'))
	...
and admin options like these:
class ClientAdmin(admin.ModelAdmin):
	search_fields = ('name', 'name2', 'contact_person', 'clientoffice__name', 'clientoffice__name2')
	...
Numbers:
>>> Client.objects.count()
10907
>>> ClientOffice.objects.count()
16952
Now, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.
The problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 1 - 41
Content:
1. import datetime
2. 
3. from django.contrib import admin
4. from django.contrib.admin.models import LogEntry
5. from django.contrib.admin.options import IncorrectLookupParameters
6. from django.contrib.admin.templatetags.admin_list import pagination
7. from django.contrib.admin.tests import AdminSeleniumTestCase
8. from django.contrib.admin.views.main import (
9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,
10. )
11. from django.contrib.auth.models import User
12. from django.contrib.contenttypes.models import ContentType
13. from django.contrib.messages.storage.cookie import CookieStorage
14. from django.db import connection, models
15. from django.db.models import F, Field, IntegerField
16. from django.db.models.functions import Upper
17. from django.db.models.lookups import Contains, Exact
18. from django.template import Context, Template, TemplateSyntaxError
19. from django.test import TestCase, override_settings
20. from django.test.client import RequestFactory
21. from django.test.utils import (
22.     CaptureQueriesContext, isolate_apps, register_lookup,
23. )
24. from django.urls import reverse
25. from django.utils import formats
26. 
27. from .admin import (
28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,
33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
34.     site as custom_site,
35. )
36. from .models import (
37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
40. )
41. 


File: tests/admin_changelist/tests.py
Line number range: 54 - 69
Content:
54. @override_settings(ROOT_URLCONF="admin_changelist.urls")
55. class ChangeListTests(TestCase):
56.     factory = RequestFactory()
57. 
58.     @classmethod
59.     def setUpTestData(cls):
60.         cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
61. 
62.     def _create_superuser(self, username):
63.         return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')
64. 
65.     def _mocked_authenticated_request(self, url, user):
66.         request = self.factory.get(url)
67.         request.user = user
68.         return request
69. 


File: tests/admin_changelist/tests.py
Line number range: 471 - 491
Content:
471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):
472.         """
473.         Regressions tests for #15819: If a field listed in search_fields
474.         is a non-unique related object, Exists() must be applied.
475.         """
476.         parent = Parent.objects.create(name='Mary')
477.         Child.objects.create(parent=parent, name='Danielle')
478.         Child.objects.create(parent=parent, name='Daniel')
479. 
480.         m = ParentAdmin(Parent, custom_site)
481.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
482.         request.user = self.superuser
483. 
484.         cl = m.get_changelist_instance(request)
485.         # Exists() is applied.
486.         self.assertEqual(cl.queryset.count(), 1)
487.         # Queryset must be deletable.
488.         self.assertIs(cl.queryset.query.distinct, False)
489.         cl.queryset.delete()
490.         self.assertEqual(cl.queryset.count(), 0)
491. 


File: tests/admin_changelist/tests.py
Line number range: 603 - 661
Content:
603.         concert = Concert.objects.create(name='Woodstock', group=band)
604. 
605.         m = ConcertAdmin(Concert, custom_site)
606.         m.search_fields = ['group__name__cc']
607.         with register_lookup(Field, Contains, lookup_name='cc'):
608.             request = self.factory.get('/', data={SEARCH_VAR: 'Hype'})
609.             request.user = self.superuser
610.             cl = m.get_changelist_instance(request)
611.             self.assertCountEqual(cl.queryset, [concert])
612. 
613.             request = self.factory.get('/', data={SEARCH_VAR: 'Woodstock'})
614.             request.user = self.superuser
615.             cl = m.get_changelist_instance(request)
616.             self.assertCountEqual(cl.queryset, [])
617. 
618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):
619.         hype = Group.objects.create(name='The Hype')
620.         concert = Concert.objects.create(name='Woodstock', group=hype)
621.         vox = Musician.objects.create(name='Vox', age=20)
622.         Membership.objects.create(music=vox, group=hype)
623.         # Register a custom lookup on IntegerField to ensure that field
624.         # traversing logic in ModelAdmin.get_search_results() works.
625.         with register_lookup(IntegerField, Exact, lookup_name='exactly'):
626.             m = ConcertAdmin(Concert, custom_site)
627.             m.search_fields = ['group__members__age__exactly']
628. 
629.             request = self.factory.get('/', data={SEARCH_VAR: '20'})
630.             request.user = self.superuser
631.             cl = m.get_changelist_instance(request)
632.             self.assertCountEqual(cl.queryset, [concert])
633. 
634.             request = self.factory.get('/', data={SEARCH_VAR: '21'})
635.             request.user = self.superuser
636.             cl = m.get_changelist_instance(request)
637.             self.assertCountEqual(cl.queryset, [])
638. 
639.     def test_custom_lookup_with_pk_shortcut(self):
640.         self.assertEqual(CharPK._meta.pk.name, 'char_pk')  # Not equal to 'pk'.
641.         m = admin.ModelAdmin(CustomIdUser, custom_site)
642. 
643.         abc = CharPK.objects.create(char_pk='abc')
644.         abcd = CharPK.objects.create(char_pk='abcd')
645.         m = admin.ModelAdmin(CharPK, custom_site)
646.         m.search_fields = ['pk__exact']
647. 
648.         request = self.factory.get('/', data={SEARCH_VAR: 'abc'})
649.         request.user = self.superuser
650.         cl = m.get_changelist_instance(request)
651.         self.assertCountEqual(cl.queryset, [abc])
652. 
653.         request = self.factory.get('/', data={SEARCH_VAR: 'abcd'})
654.         request.user = self.superuser
655.         cl = m.get_changelist_instance(request)
656.         self.assertCountEqual(cl.queryset, [abcd])
657. 
658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):
659.         """
660.         If a ManyToManyField is in list_filter but isn't in any lookup params,
661.         the changelist's query shouldn't have Exists().


File: tests/admin_changelist/tests.py
Line number range: 492 - 514
Content:
492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):
493.         """
494.         When using a ManyToMany in search_fields at the second level behind a
495.         ForeignKey, Exists() must be applied and results shouldn't appear more
496.         than once.
497.         """
498.         lead = Musician.objects.create(name='Vox')
499.         band = Group.objects.create(name='The Hype')
500.         Concert.objects.create(name='Woodstock', group=band)
501.         Membership.objects.create(group=band, music=lead, role='lead voice')
502.         Membership.objects.create(group=band, music=lead, role='bass player')
503. 
504.         m = ConcertAdmin(Concert, custom_site)
505.         request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
506.         request.user = self.superuser
507. 
508.         cl = m.get_changelist_instance(request)
509.         # There's only one Concert instance
510.         self.assertEqual(cl.queryset.count(), 1)
511.         # Queryset must be deletable.
512.         self.assertIs(cl.queryset.query.distinct, False)
513.         cl.queryset.delete()
514.         self.assertEqual(cl.queryset.count(), 0)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

2025-10-06 00:23:37,024 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - DEBUG - reasoning='1. The user is reporting a performance issue with admin changelist search when using multiple search terms that span related models, causing unnecessary SQL JOINs.\n2. The provided context contains tests for `search_fields` with related models, but all of them use a single search term. This is a crucial difference from the bug report, which is about multiple search words.\n3. To find the most relevant test cases, I need to find tests that use a search query with multiple words to see how the ORM handles the combination of lookups on related fields.\n4. Tests that assert the number of queries using `assertNumQueries` or `CaptureQueriesContext` would be highly relevant to this performance-related bug, but none are present in the provided context.\n5. Therefore, I need more context from `tests/admin_changelist/tests.py` to find tests that more closely match the scenario described in the bug report.' refined_query='Please provide the full content of `tests/admin_changelist/tests.py`. I am looking for tests that use multiple search words in the `SEARCH_VAR` when testing `search_fields` that span relationships. Tests that check the number of SQL queries generated for the changelist search would be particularly relevant.'
2025-10-06 00:23:40,717 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_changelist/tests.py"}'}, '__gemini_function_call_thought_signatures__': {'51457fc0-d909-46e1-8e18-475cb1b5f8b4': 'Ct8GAR/MhbZjFFUE3+Q9t6FCptqzf7idvbVk9uKCe3viY34ySv2w5/GRrM3BlvSHCKIBIOnypvImIEE2CLS+cd3f9oFBmneykjrQGqrEWaYTJLZpoBjUKhUY6ADD5yTOc/t4d2MMVan0OoL4VbwcpikTlSC/W/IidUQBg31f2ugm49qb7F6ZLqRs6GoBDiEXvaxUkSEU4pf+rMAVrnSEZdEfjo+8MQ1Km2PpW/kGEx3dbugDC1/Dzpqanqlp41HmENolqZLyf7MHppIanhOc0J6w+0CJxo9/DbjlUOQ0pUE7lu2BtObZ8LsTw8SF5p3MNAzU2XGvO+etuIcwVrecZh0GMNAg50M593LtgEX36DPXop5AIORH8rUIsQHB1oecMolxQhxtIebLeFXsvfqhhU9e9EQzqdRiZp9gDJcEmdYqMGdSCq53UKSNx3wMHtOZiJUYWrfkacz23oMfbQiZtzeoE1TKksIMCPVG4xtE1vCqa1OScvM9C6q7ehtKplnexCwqi/pu1J1C/B7cA2lMjX7Xi05E1dqVodav96gW2l+E2vwddbFa197hyPnK6JZ+EHOrMlCHXLRisxTIZUZp2pTmrK0pazGcrzi+QlsxT5qhiBffZvsFMM4sZV/kebheFS1Z4z6tNv3knDSPjhUe4gRDtbs812SbvQ+XiD1zk48X7hcqCPD8myFiVpXAPc7OBjb+9oG+Ybs9XyJUROrOy7Xj2xgDP0r+EHF0eF8uTshe0cOalnkIZM/JPH7sf+saBafT5rjtdfK34PVc7ttnUq/iSSkJF2xub5lOuBL6hFQ9ZAzmMUjHvBgGzXH7VjRqLADkZoitpZtcOtVg3FXZFOHeuhxZdyEhN7bca2z/HbhcUr201Kw+IbVPTHI3UDhO+ROBM8ro1K40bQcFb3n9nVvw589Eq+VXZY4P3QzvcS7U7EATSck11+7dG5YZPwl46N9ImUHVfSoshXA5L1pKh6zUcJPcm5oQ0QPq31oF2wm8sY6MFSXs2I0TvEzP723uBt/DSKJhEh3hzKXAWkQqWrmlY7oFuBJqnRirgNr3ka2/g3pZw1UpBCqZqWCKVc5Dg481d/pOAs/Lq6LfWK3SnQ4L55ZR3aOSJPvgEGR9VjazMROC9picu3+7DU3D/AekW4MKIgEfzIW2V3t3OKbVw/TQ9sVmIcnHt6C265EUiIDHEAyzdU8='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56311, 'candidates_token_count': 24, 'total_token_count': 56553, 'prompt_tokens_details': [{'modality': 1, 'token_count': 56311}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 24}], 'thoughts_token_count': 218, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5769959688186646, 'model_name': 'gemini-2.5-pro'} id='run--1cbba28d-a77b-479f-bea1-c89de011fbac-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_changelist/tests.py'}, 'id': '51457fc0-d909-46e1-8e18-475cb1b5f8b4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 56311, 'output_tokens': 24, 'total_tokens': 56553, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 218}}
2025-10-06 00:23:44,234 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/admin_changelist/tests.py", "start_line": 501.0, "end_line": 2000.0}'}, '__gemini_function_call_thought_signatures__': {'c3edb134-2d7f-4df2-8d58-93936fb80397': 'CqADAR/MhbYpuz7XsJPjEwOv3hkOc7Ao9mdYlreIEgOblJn//ZKOGQZro15/Fgf1ImD+Y//Ayp84iT7iBYWhqvRRJw8I2l4mfc6vpZw0oWLPtZ3NExBEnOI+j5L+hAJJZ1IihQfJENPrZ7tTGkTrujro77cRQScLsMy0mVtp/kChoBISRxBNS2P1ZuePdAvH0m0JpUvciY/hgLOToOSmDPUuc4AMTxbx6vOLV+ZSaTam4HO/Mk7v/w3PM+On72+xT4eovF/PF0E5pww16imgdHzU6mlsR4Mzc24dAhKtrz/crYrLMzUNu/m2nsQ6Wk8t3icupF7uN5KIpoRRg3M8AT4sw0pMIqOGRb7oDJgb9qldnU1T9HSaojxg6PycochtdwT7I8Fu+v0Ej8p8VLhqM6R+Ty0GwSl+Yw/NVg0aPyAzHf4XO4IIscC9mydyBMh2E1guyf3eZt1+013SkLSpCg/PVcKrYHfnkkXjIxCKmXnTJFkdE+L9eSdo/rF8TnZSeWczj4+3Me3Pi3xZ5nPvTHtaohhhnsvnsim0fgDcoW6JEqQ='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 64999, 'candidates_token_count': 30, 'total_token_count': 65145, 'prompt_tokens_details': [{'modality': 1, 'token_count': 65215}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 30}], 'thoughts_token_count': 116, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.36947657267252604, 'model_name': 'gemini-2.5-pro'} id='run--b8efc1f2-8b6c-4061-aaf5-ead55bb08106-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/admin_changelist/tests.py', 'start_line': 501.0, 'end_line': 2000.0}, 'id': 'c3edb134-2d7f-4df2-8d58-93936fb80397', 'type': 'tool_call'}] usage_metadata={'input_tokens': 64999, 'output_tokens': 30, 'total_tokens': 65145, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 116}}
2025-10-06 00:23:55,110 - thread-139660780025408.app.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `tests/admin_changelist/tests.py` and analyzed it for you. The file contains several tests relevant to your query about `search_fields` that span relationships and use multiple search terms.\n\nSpecifically, the `test_multiple_search_fields` test (lines 516-566) is highly relevant. It checks that searching for multiple words in `SEARCH_VAR` returns the correct results when `search_fields` includes fields from related models. For example, it uses `search_fields = ['group__name', 'name']` for the `Concert` model and `search_fields = ['name', 'concert__name', 'members__name']` for the `Group` model, demonstrating searches across foreign key and many-to-many relationships.\n\nAdditionally, the `test_changelist_view_list_editable_changed_objects_uses_filter` test (lines 1033-1056) uses `CaptureQueriesContext` to assert the number of SQL queries made, which aligns with your interest in performance testing of the changelist. Although this particular test focuses on `list_editable` functionality, the same technique can be applied to changelist searches. Several other tests in the file also deal with `search_fields` and relationships, such as `test_no_duplicates_for_many_to_many_at_second_level_in_search_fields` and `test_spanning_relations_with_custom_lookup_in_search_fields`." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 86744, 'candidates_token_count': 328, 'total_token_count': 87729, 'cached_content_token_count': 63811, 'prompt_tokens_details': [{'modality': 1, 'token_count': 87074}], 'cache_tokens_details': [{'modality': 1, 'token_count': 63811}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 328}], 'thoughts_token_count': 657}, 'finish_reason': 'STOP', 'avg_logprobs': -0.23697997302543827, 'model_name': 'gemini-2.5-pro'} id='run--96c94010-d139-4cd8-8139-00ad996fac23-0' usage_metadata={'input_tokens': 86744, 'output_tokens': 328, 'total_tokens': 87729, 'input_token_details': {'cache_read': 63811}, 'output_token_details': {'reasoning': 657}}
2025-10-06 00:23:55,110 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Starting context extraction process
2025-10-06 00:23:55,111 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - This is the original user query:

--- BEGIN ORIGINAL QUERY ---
Issue title:
Unnecessary joins in admin changelist query

Issue description: 
Description
	
Django 1.2.5
Models:
class Client(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	contact_person = models.CharField(_('contact person'), max_length=256, blank=True, null=True)
	...
class ClientOffice(models.Model):
	name = models.CharField(_('name'), max_length=256)
	name2 = models.CharField(_('unofficial or obsolete name'), max_length=256, blank=True, null=True)
	...
	client = models.ForeignKey(Client, verbose_name=_('client'))
	...
and admin options like these:
class ClientAdmin(admin.ModelAdmin):
	search_fields = ('name', 'name2', 'contact_person', 'clientoffice__name', 'clientoffice__name2')
	...
Numbers:
>>> Client.objects.count()
10907
>>> ClientOffice.objects.count()
16952
Now, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.
The problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

This is the refinement query. Please consider it together with the original query. It's really IMPORTANT!!!

--- BEGIN REFINEMENT QUERY ---
Please provide the full content of `tests/admin_changelist/tests.py`. I am looking for tests that use multiple search words in the `SEARCH_VAR` when testing `search_fields` that span relationships. Tests that check the number of SQL queries generated for the changelist search would be particularly relevant.
--- END REFINEMENT QUERY ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. 
3. from django.contrib import admin
4. from django.contrib.admin.models import LogEntry
5. from django.contrib.admin.options import IncorrectLookupParameters
6. from django.contrib.admin.templatetags.admin_list import pagination
7. from django.contrib.admin.tests import AdminSeleniumTestCase
8. from django.contrib.admin.views.main import (
9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,
10. )
11. from django.contrib.auth.models import User
12. from django.contrib.contenttypes.models import ContentType
13. from django.contrib.messages.storage.cookie import CookieStorage
14. from django.db import connection, models
15. from django.db.models import F, Field, IntegerField
16. from django.db.models.functions import Upper
17. from django.db.models.lookups import Contains, Exact
18. from django.template import Context, Template, TemplateSyntaxError
19. from django.test import TestCase, override_settings
20. from django.test.client import RequestFactory
21. from django.test.utils import (
22.     CaptureQueriesContext, isolate_apps, register_lookup,
23. )
24. from django.urls import reverse
25. from django.utils import formats
26. 
27. from .admin import (
28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,
33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
34.     site as custom_site,
35. )
36. from .models import (
37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
40. )
41. 
42. 
43. def build_tbody_html(pk, href, extra_fields):
44.     return (
45.         '<tbody><tr>'
46.         '<td class="action-checkbox">'
47.         '<input type="checkbox" name="_selected_action" value="{}" '
48.         'class="action-select"></td>'
49.         '<th class="field-name"><a href="{}">name</a></th>'
50.         '{}</tr></tbody>'
51.     ).format(pk, href, extra_fields)
52. 
53. 
54. @override_settings(ROOT_URLCONF="admin_changelist.urls")
55. class ChangeListTests(TestCase):
56.     factory = RequestFactory()
57. 
58.     @classmethod
59.     def setUpTestData(cls):
60.         cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
61. 
62.     def _create_superuser(self, username):
63.         return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')
64. 
65.     def _mocked_authenticated_request(self, url, user):
66.         request = self.factory.get(url)
67.         request.user = user
68.         return request
69. 
70.     def test_repr(self):
71.         m = ChildAdmin(Child, custom_site)
72.         request = self.factory.get('/child/')
73.         request.user = self.superuser
74.         cl = m.get_changelist_instance(request)
75.         self.assertEqual(repr(cl), '<ChangeList: model=Child model_admin=ChildAdmin>')
76. 
77.     def test_specified_ordering_by_f_expression(self):
78.         class OrderedByFBandAdmin(admin.ModelAdmin):
79.             list_display = ['name', 'genres', 'nr_of_members']
80.             ordering = (
81.                 F('nr_of_members').desc(nulls_last=True),
82.                 Upper(F('name')).asc(),
83.                 F('genres').asc(),
84.             )
85. 
86.         m = OrderedByFBandAdmin(Band, custom_site)
87.         request = self.factory.get('/band/')
88.         request.user = self.superuser
89.         cl = m.get_changelist_instance(request)
90.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'desc', 2: 'asc'})
91. 
92.     def test_specified_ordering_by_f_expression_without_asc_desc(self):
93.         class OrderedByFBandAdmin(admin.ModelAdmin):
94.             list_display = ['name', 'genres', 'nr_of_members']
95.             ordering = (F('nr_of_members'), Upper('name'), F('genres'))
96. 
97.         m = OrderedByFBandAdmin(Band, custom_site)
98.         request = self.factory.get('/band/')
99.         request.user = self.superuser
100.         cl = m.get_changelist_instance(request)
101.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'asc', 2: 'asc'})
102. 
103.     def test_select_related_preserved(self):
104.         """
105.         Regression test for #10348: ChangeList.get_queryset() shouldn't
106.         overwrite a custom select_related provided by ModelAdmin.get_queryset().
107.         """
108.         m = ChildAdmin(Child, custom_site)
109.         request = self.factory.get('/child/')
110.         request.user = self.superuser
111.         cl = m.get_changelist_instance(request)
112.         self.assertEqual(cl.queryset.query.select_related, {'parent': {}})
113. 
114.     def test_select_related_preserved_when_multi_valued_in_search_fields(self):
115.         parent = Parent.objects.create(name='Mary')
116.         Child.objects.create(parent=parent, name='Danielle')
117.         Child.objects.create(parent=parent, name='Daniel')
118. 
119.         m = ParentAdmin(Parent, custom_site)
120.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
121.         request.user = self.superuser
122. 
123.         cl = m.get_changelist_instance(request)
124.         self.assertEqual(cl.queryset.count(), 1)
125.         # select_related is preserved.
126.         self.assertEqual(cl.queryset.query.select_related, {'child': {}})
127. 
128.     def test_select_related_as_tuple(self):
129.         ia = InvitationAdmin(Invitation, custom_site)
130.         request = self.factory.get('/invitation/')
131.         request.user = self.superuser
132.         cl = ia.get_changelist_instance(request)
133.         self.assertEqual(cl.queryset.query.select_related, {'player': {}})
134. 
135.     def test_select_related_as_empty_tuple(self):
136.         ia = InvitationAdmin(Invitation, custom_site)
137.         ia.list_select_related = ()
138.         request = self.factory.get('/invitation/')
139.         request.user = self.superuser
140.         cl = ia.get_changelist_instance(request)
141.         self.assertIs(cl.queryset.query.select_related, False)
142. 
143.     def test_get_select_related_custom_method(self):
144.         class GetListSelectRelatedAdmin(admin.ModelAdmin):
145.             list_display = ('band', 'player')
146. 
147.             def get_list_select_related(self, request):
148.                 return ('band', 'player')
149. 
150.         ia = GetListSelectRelatedAdmin(Invitation, custom_site)
151.         request = self.factory.get('/invitation/')
152.         request.user = self.superuser
153.         cl = ia.get_changelist_instance(request)
154.         self.assertEqual(cl.queryset.query.select_related, {'player': {}, 'band': {}})
155. 
156.     def test_result_list_empty_changelist_value(self):
157.         """
158.         Regression test for #14982: EMPTY_CHANGELIST_VALUE should be honored
159.         for relationship fields
160.         """
161.         new_child = Child.objects.create(name='name', parent=None)
162.         request = self.factory.get('/child/')
163.         request.user = self.superuser
164.         m = ChildAdmin(Child, custom_site)
165.         cl = m.get_changelist_instance(request)
166.         cl.formset = None
167.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
168.         context = Context({'cl': cl, 'opts': Child._meta})
169.         table_output = template.render(context)
170.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
171.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">-</td>')
172.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
173. 
174.     def test_result_list_set_empty_value_display_on_admin_site(self):
175.         """
176.         Empty value display can be set on AdminSite.
177.         """
178.         new_child = Child.objects.create(name='name', parent=None)
179.         request = self.factory.get('/child/')
180.         request.user = self.superuser
181.         # Set a new empty display value on AdminSite.
182.         admin.site.empty_value_display = '???'
183.         m = ChildAdmin(Child, admin.site)
184.         cl = m.get_changelist_instance(request)
185.         cl.formset = None
186.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
187.         context = Context({'cl': cl, 'opts': Child._meta})
188.         table_output = template.render(context)
189.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
190.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">???</td>')
191.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
192. 
193.     def test_result_list_set_empty_value_display_in_model_admin(self):
194.         """
195.         Empty value display can be set in ModelAdmin or individual fields.
196.         """
197.         new_child = Child.objects.create(name='name', parent=None)
198.         request = self.factory.get('/child/')
199.         request.user = self.superuser
200.         m = EmptyValueChildAdmin(Child, admin.site)
201.         cl = m.get_changelist_instance(request)
202.         cl.formset = None
203.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
204.         context = Context({'cl': cl, 'opts': Child._meta})
205.         table_output = template.render(context)
206.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
207.         row_html = build_tbody_html(
208.             new_child.id,
209.             link,
210.             '<td class="field-age_display">&amp;dagger;</td>'
211.             '<td class="field-age">-empty-</td>'
212.         )
213.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
214. 
215.     def test_result_list_html(self):
216.         """
217.         Inclusion tag result_list generates a table when with default
218.         ModelAdmin settings.
219.         """
220.         new_parent = Parent.objects.create(name='parent')
221.         new_child = Child.objects.create(name='name', parent=new_parent)
222.         request = self.factory.get('/child/')
223.         request.user = self.superuser
224.         m = ChildAdmin(Child, custom_site)
225.         cl = m.get_changelist_instance(request)
226.         cl.formset = None
227.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
228.         context = Context({'cl': cl, 'opts': Child._meta})
229.         table_output = template.render(context)
230.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
231.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">%s</td>' % new_parent)
232.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
233. 
234.     def test_result_list_editable_html(self):
235.         """
236.         Regression tests for #11791: Inclusion tag result_list generates a
237.         table and this checks that the items are nested within the table
238.         element tags.
239.         Also a regression test for #13599, verifies that hidden fields
240.         when list_editable is enabled are rendered in a div outside the
241.         table.
242.         """
243.         new_parent = Parent.objects.create(name='parent')
244.         new_child = Child.objects.create(name='name', parent=new_parent)
245.         request = self.factory.get('/child/')
246.         request.user = self.superuser
247.         m = ChildAdmin(Child, custom_site)
248. 
249.         # Test with list_editable fields
250.         m.list_display = ['id', 'name', 'parent']
251.         m.list_display_links = ['id']
252.         m.list_editable = ['name']
253.         cl = m.get_changelist_instance(request)
254.         FormSet = m.get_changelist_formset(request)
255.         cl.formset = FormSet(queryset=cl.result_list)
256.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
257.         context = Context({'cl': cl, 'opts': Child._meta})
258.         table_output = template.render(context)
259.         # make sure that hidden fields are in the correct place
260.         hiddenfields_div = (
261.             '<div class="hiddenfields">'
262.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
263.             '</div>'
264.         ) % new_child.id
265.         self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')
266. 
267.         # make sure that list editable fields are rendered in divs correctly
268.         editable_name_field = (
269.             '<input name="form-0-name" value="name" class="vTextField" '
270.             'maxlength="30" type="text" id="id_form-0-name">'
271.         )
272.         self.assertInHTML(
273.             '<td class="field-name">%s</td>' % editable_name_field,
274.             table_output,
275.             msg_prefix='Failed to find "name" list_editable field',
276.         )
277. 
278.     def test_result_list_editable(self):
279.         """
280.         Regression test for #14312: list_editable with pagination
281.         """
282.         new_parent = Parent.objects.create(name='parent')
283.         for i in range(1, 201):
284.             Child.objects.create(name='name %s' % i, parent=new_parent)
285.         request = self.factory.get('/child/', data={'p': -1})  # Anything outside range
286.         request.user = self.superuser
287.         m = ChildAdmin(Child, custom_site)
288. 
289.         # Test with list_editable fields
290.         m.list_display = ['id', 'name', 'parent']
291.         m.list_display_links = ['id']
292.         m.list_editable = ['name']
293.         with self.assertRaises(IncorrectLookupParameters):
294.             m.get_changelist_instance(request)
295. 
296.     def test_custom_paginator(self):
297.         new_parent = Parent.objects.create(name='parent')
298.         for i in range(1, 201):
299.             Child.objects.create(name='name %s' % i, parent=new_parent)
300. 
301.         request = self.factory.get('/child/')
302.         request.user = self.superuser
303.         m = CustomPaginationAdmin(Child, custom_site)
304. 
305.         cl = m.get_changelist_instance(request)
306.         cl.get_results(request)
307.         self.assertIsInstance(cl.paginator, CustomPaginator)
308. 
309.     def test_no_duplicates_for_m2m_in_list_filter(self):
310.         """
311.         Regression test for #13902: When using a ManyToMany in list_filter,
312.         results shouldn't appear more than once. Basic ManyToMany.
313.         """
314.         blues = Genre.objects.create(name='Blues')
315.         band = Band.objects.create(name='B.B. King Review', nr_of_members=11)
316. 
317.         band.genres.add(blues)
318.         band.genres.add(blues)
319. 
320.         m = BandAdmin(Band, custom_site)
321.         request = self.factory.get('/band/', data={'genres': blues.pk})
322.         request.user = self.superuser
323. 
324.         cl = m.get_changelist_instance(request)
325.         cl.get_results(request)
326. 
327.         # There's only one Group instance
328.         self.assertEqual(cl.result_count, 1)
329.         # Queryset must be deletable.
330.         self.assertIs(cl.queryset.query.distinct, False)
331.         cl.queryset.delete()
332.         self.assertEqual(cl.queryset.count(), 0)
333. 
334.     def test_no_duplicates_for_through_m2m_in_list_filter(self):
335.         """
336.         Regression test for #13902: When using a ManyToMany in list_filter,
337.         results shouldn't appear more than once. With an intermediate model.
338.         """
339.         lead = Musician.objects.create(name='Vox')
340.         band = Group.objects.create(name='The Hype')
341.         Membership.objects.create(group=band, music=lead, role='lead voice')
342.         Membership.objects.create(group=band, music=lead, role='bass player')
343. 
344.         m = GroupAdmin(Group, custom_site)
345.         request = self.factory.get('/group/', data={'members': lead.pk})
346.         request.user = self.superuser
347. 
348.         cl = m.get_changelist_instance(request)
349.         cl.get_results(request)
350. 
351.         # There's only one Group instance
352.         self.assertEqual(cl.result_count, 1)
353.         # Queryset must be deletable.
354.         self.assertIs(cl.queryset.query.distinct, False)
355.         cl.queryset.delete()
356.         self.assertEqual(cl.queryset.count(), 0)
357. 
358.     def test_no_duplicates_for_through_m2m_at_second_level_in_list_filter(self):
359.         """
360.         When using a ManyToMany in list_filter at the second level behind a
361.         ForeignKey, results shouldn't appear more than once.
362.         """
363.         lead = Musician.objects.create(name='Vox')
364.         band = Group.objects.create(name='The Hype')
365.         Concert.objects.create(name='Woodstock', group=band)
366.         Membership.objects.create(group=band, music=lead, role='lead voice')
367.         Membership.objects.create(group=band, music=lead, role='bass player')
368. 
369.         m = ConcertAdmin(Concert, custom_site)
370.         request = self.factory.get('/concert/', data={'group__members': lead.pk})
371.         request.user = self.superuser
372. 
373.         cl = m.get_changelist_instance(request)
374.         cl.get_results(request)
375. 
376.         # There's only one Concert instance
377.         self.assertEqual(cl.result_count, 1)
378.         # Queryset must be deletable.
379.         self.assertIs(cl.queryset.query.distinct, False)
380.         cl.queryset.delete()
381.         self.assertEqual(cl.queryset.count(), 0)
382. 
383.     def test_no_duplicates_for_inherited_m2m_in_list_filter(self):
384.         """
385.         Regression test for #13902: When using a ManyToMany in list_filter,
386.         results shouldn't appear more than once. Model managed in the
387.         admin inherits from the one that defines the relationship.
388.         """
389.         lead = Musician.objects.create(name='John')
390.         four = Quartet.objects.create(name='The Beatles')
391.         Membership.objects.create(group=four, music=lead, role='lead voice')
392.         Membership.objects.create(group=four, music=lead, role='guitar player')
393. 
394.         m = QuartetAdmin(Quartet, custom_site)
395.         request = self.factory.get('/quartet/', data={'members': lead.pk})
396.         request.user = self.superuser
397. 
398.         cl = m.get_changelist_instance(request)
399.         cl.get_results(request)
400. 
401.         # There's only one Quartet instance
402.         self.assertEqual(cl.result_count, 1)
403.         # Queryset must be deletable.
404.         self.assertIs(cl.queryset.query.distinct, False)
405.         cl.queryset.delete()
406.         self.assertEqual(cl.queryset.count(), 0)
407. 
408.     def test_no_duplicates_for_m2m_to_inherited_in_list_filter(self):
409.         """
410.         Regression test for #13902: When using a ManyToMany in list_filter,
411.         results shouldn't appear more than once. Target of the relationship
412.         inherits from another.
413.         """
414.         lead = ChordsMusician.objects.create(name='Player A')
415.         three = ChordsBand.objects.create(name='The Chords Trio')
416.         Invitation.objects.create(band=three, player=lead, instrument='guitar')
417.         Invitation.objects.create(band=three, player=lead, instrument='bass')
418. 
419.         m = ChordsBandAdmin(ChordsBand, custom_site)
420.         request = self.factory.get('/chordsband/', data={'members': lead.pk})
421.         request.user = self.superuser
422. 
423.         cl = m.get_changelist_instance(request)
424.         cl.get_results(request)
425. 
426.         # There's only one ChordsBand instance
427.         self.assertEqual(cl.result_count, 1)
428.         # Queryset must be deletable.
429.         self.assertIs(cl.queryset.query.distinct, False)
430.         cl.queryset.delete()
431.         self.assertEqual(cl.queryset.count(), 0)
432. 
433.     def test_no_duplicates_for_non_unique_related_object_in_list_filter(self):
434.         """
435.         Regressions tests for #15819: If a field listed in list_filters is a
436.         non-unique related object, results shouldn't appear more than once.
437.         """
438.         parent = Parent.objects.create(name='Mary')
439.         # Two children with the same name
440.         Child.objects.create(parent=parent, name='Daniel')
441.         Child.objects.create(parent=parent, name='Daniel')
442. 
443.         m = ParentAdmin(Parent, custom_site)
444.         request = self.factory.get('/parent/', data={'child__name': 'Daniel'})
445.         request.user = self.superuser
446. 
447.         cl = m.get_changelist_instance(request)
448.         # Exists() is applied.
449.         self.assertEqual(cl.queryset.count(), 1)
450.         # Queryset must be deletable.
451.         self.assertIs(cl.queryset.query.distinct, False)
452.         cl.queryset.delete()
453.         self.assertEqual(cl.queryset.count(), 0)
454. 
455.     def test_changelist_search_form_validation(self):
456.         m = ConcertAdmin(Concert, custom_site)
457.         tests = [
458.             ({SEARCH_VAR: '\x00'}, 'Null characters are not allowed.'),
459.             ({SEARCH_VAR: 'some\x00thing'}, 'Null characters are not allowed.'),
460.         ]
461.         for case, error in tests:
462.             with self.subTest(case=case):
463.                 request = self.factory.get('/concert/', case)
464.                 request.user = self.superuser
465.                 request._messages = CookieStorage(request)
466.                 m.get_changelist_instance(request)
467.                 messages = [m.message for m in request._messages]
468.                 self.assertEqual(1, len(messages))
469.                 self.assertEqual(error, messages[0])
470. 
471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):
472.         """
473.         Regressions tests for #15819: If a field listed in search_fields
474.         is a non-unique related object, Exists() must be applied.
475.         """
476.         parent = Parent.objects.create(name='Mary')
477.         Child.objects.create(parent=parent, name='Danielle')
478.         Child.objects.create(parent=parent, name='Daniel')
479. 
480.         m = ParentAdmin(Parent, custom_site)
481.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
482.         request.user = self.superuser
483. 
484.         cl = m.get_changelist_instance(request)
485.         # Exists() is applied.
486.         self.assertEqual(cl.queryset.count(), 1)
487.         # Queryset must be deletable.
488.         self.assertIs(cl.queryset.query.distinct, False)
489.         cl.queryset.delete()
490.         self.assertEqual(cl.queryset.count(), 0)
491. 
492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):
493.         """
494.         When using a ManyToMany in search_fields at the second level behind a
495.         ForeignKey, Exists() must be applied and results shouldn't appear more
496.         than once.
497.         """
498.         lead = Musician.objects.create(name='Vox')
499.         band = Group.objects.create(name='The Hype')
500.         Concert.objects.create(name='Woodstock', group=band)

File: tests/admin_changelist/tests.py
Line number range: 501 - 2000
Content:
501.         Membership.objects.create(group=band, music=lead, role='lead voice')
502.         Membership.objects.create(group=band, music=lead, role='bass player')
503. 
504.         m = ConcertAdmin(Concert, custom_site)
505.         request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
506.         request.user = self.superuser
507. 
508.         cl = m.get_changelist_instance(request)
509.         # There's only one Concert instance
510.         self.assertEqual(cl.queryset.count(), 1)
511.         # Queryset must be deletable.
512.         self.assertIs(cl.queryset.query.distinct, False)
513.         cl.queryset.delete()
514.         self.assertEqual(cl.queryset.count(), 0)
515. 
516.     def test_multiple_search_fields(self):
517.         """
518.         All rows containing each of the searched words are returned, where each
519.         word must be in one of search_fields.
520.         """
521.         band_duo = Group.objects.create(name='Duo')
522.         band_hype = Group.objects.create(name='The Hype')
523.         mary = Musician.objects.create(name='Mary Halvorson')
524.         jonathan = Musician.objects.create(name='Jonathan Finlayson')
525.         band_duo.members.set([mary, jonathan])
526.         Concert.objects.create(name='Tiny desk concert', group=band_duo)
527.         Concert.objects.create(name='Woodstock concert', group=band_hype)
528.         # FK lookup.
529.         concert_model_admin = ConcertAdmin(Concert, custom_site)
530.         concert_model_admin.search_fields = ['group__name', 'name']
531.         # Reverse FK lookup.
532.         group_model_admin = GroupAdmin(Group, custom_site)
533.         group_model_admin.search_fields = ['name', 'concert__name', 'members__name']
534.         for search_string, result_count in (
535.             ('Duo Concert', 1),
536.             ('Tiny Desk Concert', 1),
537.             ('Concert', 2),
538.             ('Other Concert', 0),
539.             ('Duo Woodstock', 0),
540.         ):
541.             with self.subTest(search_string=search_string):
542.                 # FK lookup.
543.                 request = self.factory.get('/concert/', data={SEARCH_VAR: search_string})
544.                 request.user = self.superuser
545.                 concert_changelist = concert_model_admin.get_changelist_instance(request)
546.                 self.assertEqual(concert_changelist.queryset.count(), result_count)
547.                 # Reverse FK lookup.
548.                 request = self.factory.get('/group/', data={SEARCH_VAR: search_string})
549.                 request.user = self.superuser
550.                 group_changelist = group_model_admin.get_changelist_instance(request)
551.                 self.assertEqual(group_changelist.queryset.count(), result_count)
552.         # Many-to-many lookup.
553.         for search_string, result_count in (
554.             ('Finlayson Duo Tiny', 1),
555.             ('Finlayson', 1),
556.             ('Finlayson Hype', 0),
557.             ('Jonathan Finlayson Duo', 1),
558.             ('Mary Jonathan Duo', 1),
559.             ('Oscar Finlayson Duo', 0),
560.         ):
561.             with self.subTest(search_string=search_string):
562.                 request = self.factory.get('/group/', data={SEARCH_VAR: search_string})
563.                 request.user = self.superuser
564.                 group_changelist = group_model_admin.get_changelist_instance(request)
565.                 self.assertEqual(group_changelist.queryset.count(), result_count)
566. 
567.     def test_pk_in_search_fields(self):
568.         band = Group.objects.create(name='The Hype')
569.         Concert.objects.create(name='Woodstock', group=band)
570. 
571.         m = ConcertAdmin(Concert, custom_site)
572.         m.search_fields = ['group__pk']
573. 
574.         request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk})
575.         request.user = self.superuser
576.         cl = m.get_changelist_instance(request)
577.         self.assertEqual(cl.queryset.count(), 1)
578. 
579.         request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk + 5})
580.         request.user = self.superuser
581.         cl = m.get_changelist_instance(request)
582.         self.assertEqual(cl.queryset.count(), 0)
583. 
584.     def test_builtin_lookup_in_search_fields(self):
585.         band = Group.objects.create(name='The Hype')
586.         concert = Concert.objects.create(name='Woodstock', group=band)
587. 
588.         m = ConcertAdmin(Concert, custom_site)
589.         m.search_fields = ['name__iexact']
590. 
591.         request = self.factory.get('/', data={SEARCH_VAR: 'woodstock'})
592.         request.user = self.superuser
593.         cl = m.get_changelist_instance(request)
594.         self.assertCountEqual(cl.queryset, [concert])
595. 
596.         request = self.factory.get('/', data={SEARCH_VAR: 'wood'})
597.         request.user = self.superuser
598.         cl = m.get_changelist_instance(request)
599.         self.assertCountEqual(cl.queryset, [])
600. 
601.     def test_custom_lookup_in_search_fields(self):
602.         band = Group.objects.create(name='The Hype')
603.         concert = Concert.objects.create(name='Woodstock', group=band)
604. 
605.         m = ConcertAdmin(Concert, custom_site)
606.         m.search_fields = ['group__name__cc']
607.         with register_lookup(Field, Contains, lookup_name='cc'):
608.             request = self.factory.get('/', data={SEARCH_VAR: 'Hype'})
609.             request.user = self.superuser
610.             cl = m.get_changelist_instance(request)
611.             self.assertCountEqual(cl.queryset, [concert])
612. 
613.             request = self.factory.get('/', data={SEARCH_VAR: 'Woodstock'})
614.             request.user = self.superuser
615.             cl = m.get_changelist_instance(request)
616.             self.assertCountEqual(cl.queryset, [])
617. 
618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):
619.         hype = Group.objects.create(name='The Hype')
620.         concert = Concert.objects.create(name='Woodstock', group=hype)
621.         vox = Musician.objects.create(name='Vox', age=20)
622.         Membership.objects.create(music=vox, group=hype)
623.         # Register a custom lookup on IntegerField to ensure that field
624.         # traversing logic in ModelAdmin.get_search_results() works.
625.         with register_lookup(IntegerField, Exact, lookup_name='exactly'):
626.             m = ConcertAdmin(Concert, custom_site)
627.             m.search_fields = ['group__members__age__exactly']
628. 
629.             request = self.factory.get('/', data={SEARCH_VAR: '20'})
630.             request.user = self.superuser
631.             cl = m.get_changelist_instance(request)
632.             self.assertCountEqual(cl.queryset, [concert])
633. 
634.             request = self.factory.get('/', data={SEARCH_VAR: '21'})
635.             request.user = self.superuser
636.             cl = m.get_changelist_instance(request)
637.             self.assertCountEqual(cl.queryset, [])
638. 
639.     def test_custom_lookup_with_pk_shortcut(self):
640.         self.assertEqual(CharPK._meta.pk.name, 'char_pk')  # Not equal to 'pk'.
641.         m = admin.ModelAdmin(CustomIdUser, custom_site)
642. 
643.         abc = CharPK.objects.create(char_pk='abc')
644.         abcd = CharPK.objects.create(char_pk='abcd')
645.         m = admin.ModelAdmin(CharPK, custom_site)
646.         m.search_fields = ['pk__exact']
647. 
648.         request = self.factory.get('/', data={SEARCH_VAR: 'abc'})
649.         request.user = self.superuser
650.         cl = m.get_changelist_instance(request)
651.         self.assertCountEqual(cl.queryset, [abc])
652. 
653.         request = self.factory.get('/', data={SEARCH_VAR: 'abcd'})
654.         request.user = self.superuser
655.         cl = m.get_changelist_instance(request)
656.         self.assertCountEqual(cl.queryset, [abcd])
657. 
658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):
659.         """
660.         If a ManyToManyField is in list_filter but isn't in any lookup params,
661.         the changelist's query shouldn't have Exists().
662.         """
663.         m = BandAdmin(Band, custom_site)
664.         for lookup_params in ({}, {'name': 'test'}):
665.             request = self.factory.get('/band/', lookup_params)
666.             request.user = self.superuser
667.             cl = m.get_changelist_instance(request)
668.             self.assertNotIn(' EXISTS', str(cl.queryset.query))
669. 
670.         # A ManyToManyField in params does have Exists() applied.
671.         request = self.factory.get('/band/', {'genres': '0'})
672.         request.user = self.superuser
673.         cl = m.get_changelist_instance(request)
674.         self.assertIn(' EXISTS', str(cl.queryset.query))
675. 
676.     def test_pagination(self):
677.         """
678.         Regression tests for #12893: Pagination in admins changelist doesn't
679.         use queryset set by modeladmin.
680.         """
681.         parent = Parent.objects.create(name='anything')
682.         for i in range(1, 31):
683.             Child.objects.create(name='name %s' % i, parent=parent)
684.             Child.objects.create(name='filtered %s' % i, parent=parent)
685. 
686.         request = self.factory.get('/child/')
687.         request.user = self.superuser
688. 
689.         # Test default queryset
690.         m = ChildAdmin(Child, custom_site)
691.         cl = m.get_changelist_instance(request)
692.         self.assertEqual(cl.queryset.count(), 60)
693.         self.assertEqual(cl.paginator.count, 60)
694.         self.assertEqual(list(cl.paginator.page_range), [1, 2, 3, 4, 5, 6])
695. 
696.         # Test custom queryset
697.         m = FilteredChildAdmin(Child, custom_site)
698.         cl = m.get_changelist_instance(request)
699.         self.assertEqual(cl.queryset.count(), 30)
700.         self.assertEqual(cl.paginator.count, 30)
701.         self.assertEqual(list(cl.paginator.page_range), [1, 2, 3])
702. 
703.     def test_computed_list_display_localization(self):
704.         """
705.         Regression test for #13196: output of functions should be  localized
706.         in the changelist.
707.         """
708.         self.client.force_login(self.superuser)
709.         event = Event.objects.create(date=datetime.date.today())
710.         response = self.client.get(reverse('admin:admin_changelist_event_changelist'))
711.         self.assertContains(response, formats.localize(event.date))
712.         self.assertNotContains(response, str(event.date))
713. 
714.     def test_dynamic_list_display(self):
715.         """
716.         Regression tests for #14206: dynamic list_display support.
717.         """
718.         parent = Parent.objects.create(name='parent')
719.         for i in range(10):
720.             Child.objects.create(name='child %s' % i, parent=parent)
721. 
722.         user_noparents = self._create_superuser('noparents')
723.         user_parents = self._create_superuser('parents')
724. 
725.         # Test with user 'noparents'
726.         m = custom_site._registry[Child]
727.         request = self._mocked_authenticated_request('/child/', user_noparents)
728.         response = m.changelist_view(request)
729.         self.assertNotContains(response, 'Parent object')
730. 
731.         list_display = m.get_list_display(request)
732.         list_display_links = m.get_list_display_links(request, list_display)
733.         self.assertEqual(list_display, ['name', 'age'])
734.         self.assertEqual(list_display_links, ['name'])
735. 
736.         # Test with user 'parents'
737.         m = DynamicListDisplayChildAdmin(Child, custom_site)
738.         request = self._mocked_authenticated_request('/child/', user_parents)
739.         response = m.changelist_view(request)
740.         self.assertContains(response, 'Parent object')
741. 
742.         custom_site.unregister(Child)
743. 
744.         list_display = m.get_list_display(request)
745.         list_display_links = m.get_list_display_links(request, list_display)
746.         self.assertEqual(list_display, ('parent', 'name', 'age'))
747.         self.assertEqual(list_display_links, ['parent'])
748. 
749.         # Test default implementation
750.         custom_site.register(Child, ChildAdmin)
751.         m = custom_site._registry[Child]
752.         request = self._mocked_authenticated_request('/child/', user_noparents)
753.         response = m.changelist_view(request)
754.         self.assertContains(response, 'Parent object')
755. 
756.     def test_show_all(self):
757.         parent = Parent.objects.create(name='anything')
758.         for i in range(1, 31):
759.             Child.objects.create(name='name %s' % i, parent=parent)
760.             Child.objects.create(name='filtered %s' % i, parent=parent)
761. 
762.         # Add "show all" parameter to request
763.         request = self.factory.get('/child/', data={ALL_VAR: ''})
764.         request.user = self.superuser
765. 
766.         # Test valid "show all" request (number of total objects is under max)
767.         m = ChildAdmin(Child, custom_site)
768.         m.list_max_show_all = 200
769.         # 200 is the max we'll pass to ChangeList
770.         cl = m.get_changelist_instance(request)
771.         cl.get_results(request)
772.         self.assertEqual(len(cl.result_list), 60)
773. 
774.         # Test invalid "show all" request (number of total objects over max)
775.         # falls back to paginated pages
776.         m = ChildAdmin(Child, custom_site)
777.         m.list_max_show_all = 30
778.         # 30 is the max we'll pass to ChangeList for this test
779.         cl = m.get_changelist_instance(request)
780.         cl.get_results(request)
781.         self.assertEqual(len(cl.result_list), 10)
782. 
783.     def test_dynamic_list_display_links(self):
784.         """
785.         Regression tests for #16257: dynamic list_display_links support.
786.         """
787.         parent = Parent.objects.create(name='parent')
788.         for i in range(1, 10):
789.             Child.objects.create(id=i, name='child %s' % i, parent=parent, age=i)
790. 
791.         m = DynamicListDisplayLinksChildAdmin(Child, custom_site)
792.         superuser = self._create_superuser('superuser')
793.         request = self._mocked_authenticated_request('/child/', superuser)
794.         response = m.changelist_view(request)
795.         for i in range(1, 10):
796.             link = reverse('admin:admin_changelist_child_change', args=(i,))
797.             self.assertContains(response, '<a href="%s">%s</a>' % (link, i))
798. 
799.         list_display = m.get_list_display(request)
800.         list_display_links = m.get_list_display_links(request, list_display)
801.         self.assertEqual(list_display, ('parent', 'name', 'age'))
802.         self.assertEqual(list_display_links, ['age'])
803. 
804.     def test_no_list_display_links(self):
805.         """#15185 -- Allow no links from the 'change list' view grid."""
806.         p = Parent.objects.create(name='parent')
807.         m = NoListDisplayLinksParentAdmin(Parent, custom_site)
808.         superuser = self._create_superuser('superuser')
809.         request = self._mocked_authenticated_request('/parent/', superuser)
810.         response = m.changelist_view(request)
811.         link = reverse('admin:admin_changelist_parent_change', args=(p.pk,))
812.         self.assertNotContains(response, '<a href="%s">' % link)
813. 
814.     def test_clear_all_filters_link(self):
815.         self.client.force_login(self.superuser)
816.         url = reverse('admin:auth_user_changelist')
817.         response = self.client.get(url)
818.         self.assertNotContains(response, '&#10006; Clear all filters')
819.         link = '<a href="%s">&#10006; Clear all filters</a>'
820.         for data, href in (
821.             ({'is_staff__exact': '0'}, '?'),
822.             (
823.                 {'is_staff__exact': '0', 'username__startswith': 'test'},
824.                 '?username__startswith=test',
825.             ),
826.             (
827.                 {'is_staff__exact': '0', SEARCH_VAR: 'test'},
828.                 '?%s=test' % SEARCH_VAR,
829.             ),
830.             (
831.                 {'is_staff__exact': '0', IS_POPUP_VAR: 'id'},
832.                 '?%s=id' % IS_POPUP_VAR,
833.             ),
834.         ):
835.             with self.subTest(data=data):
836.                 response = self.client.get(url, data=data)
837.                 self.assertContains(response, link % href)
838. 
839.     def test_clear_all_filters_link_callable_filter(self):
840.         self.client.force_login(self.superuser)
841.         url = reverse('admin:admin_changelist_band_changelist')
842.         response = self.client.get(url)
843.         self.assertNotContains(response, '&#10006; Clear all filters')
844.         link = '<a href="%s">&#10006; Clear all filters</a>'
845.         for data, href in (
846.             ({'nr_of_members_partition': '5'}, '?'),
847.             (
848.                 {'nr_of_members_partition': 'more', 'name__startswith': 'test'},
849.                 '?name__startswith=test',
850.             ),
851.             (
852.                 {'nr_of_members_partition': '5', IS_POPUP_VAR: 'id'},
853.                 '?%s=id' % IS_POPUP_VAR,
854.             ),
855.         ):
856.             with self.subTest(data=data):
857.                 response = self.client.get(url, data=data)
858.                 self.assertContains(response, link % href)
859. 
860.     def test_no_clear_all_filters_link(self):
861.         self.client.force_login(self.superuser)
862.         url = reverse('admin:auth_user_changelist')
863.         link = '>&#10006; Clear all filters</a>'
864.         for data in (
865.             {SEARCH_VAR: 'test'},
866.             {ORDER_VAR: '-1'},
867.             {TO_FIELD_VAR: 'id'},
868.             {PAGE_VAR: '1'},
869.             {IS_POPUP_VAR: '1'},
870.             {'username__startswith': 'test'},
871.         ):
872.             with self.subTest(data=data):
873.                 response = self.client.get(url, data=data)
874.                 self.assertNotContains(response, link)
875. 
876.     def test_tuple_list_display(self):
877.         swallow = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
878.         swallow2 = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
879.         swallow_o2o = SwallowOneToOne.objects.create(swallow=swallow2)
880. 
881.         model_admin = SwallowAdmin(Swallow, custom_site)
882.         superuser = self._create_superuser('superuser')
883.         request = self._mocked_authenticated_request('/swallow/', superuser)
884.         response = model_admin.changelist_view(request)
885.         # just want to ensure it doesn't blow up during rendering
886.         self.assertContains(response, str(swallow.origin))
887.         self.assertContains(response, str(swallow.load))
888.         self.assertContains(response, str(swallow.speed))
889.         # Reverse one-to-one relations should work.
890.         self.assertContains(response, '<td class="field-swallowonetoone">-</td>')
891.         self.assertContains(response, '<td class="field-swallowonetoone">%s</td>' % swallow_o2o)
892. 
893.     def test_multiuser_edit(self):
894.         """
895.         Simultaneous edits of list_editable fields on the changelist by
896.         different users must not result in one user's edits creating a new
897.         object instead of modifying the correct existing object (#11313).
898.         """
899.         # To replicate this issue, simulate the following steps:
900.         # 1. User1 opens an admin changelist with list_editable fields.
901.         # 2. User2 edits object "Foo" such that it moves to another page in
902.         #    the pagination order and saves.
903.         # 3. User1 edits object "Foo" and saves.
904.         # 4. The edit made by User1 does not get applied to object "Foo" but
905.         #    instead is used to create a new object (bug).
906. 
907.         # For this test, order the changelist by the 'speed' attribute and
908.         # display 3 objects per page (SwallowAdmin.list_per_page = 3).
909. 
910.         # Setup the test to reflect the DB state after step 2 where User2 has
911.         # edited the first swallow object's speed from '4' to '1'.
912.         a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
913.         b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
914.         c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
915.         d = Swallow.objects.create(origin='Swallow D', load=9, speed=9)
916. 
917.         superuser = self._create_superuser('superuser')
918.         self.client.force_login(superuser)
919.         changelist_url = reverse('admin:admin_changelist_swallow_changelist')
920. 
921.         # Send the POST from User1 for step 3. It's still using the changelist
922.         # ordering from before User2's edits in step 2.
923.         data = {
924.             'form-TOTAL_FORMS': '3',
925.             'form-INITIAL_FORMS': '3',
926.             'form-MIN_NUM_FORMS': '0',
927.             'form-MAX_NUM_FORMS': '1000',
928.             'form-0-uuid': str(d.pk),
929.             'form-1-uuid': str(c.pk),
930.             'form-2-uuid': str(a.pk),
931.             'form-0-load': '9.0',
932.             'form-0-speed': '9.0',
933.             'form-1-load': '5.0',
934.             'form-1-speed': '5.0',
935.             'form-2-load': '5.0',
936.             'form-2-speed': '4.0',
937.             '_save': 'Save',
938.         }
939.         response = self.client.post(changelist_url, data, follow=True, extra={'o': '-2'})
940. 
941.         # The object User1 edited in step 3 is displayed on the changelist and
942.         # has the correct edits applied.
943.         self.assertContains(response, '1 swallow was changed successfully.')
944.         self.assertContains(response, a.origin)
945.         a.refresh_from_db()
946.         self.assertEqual(a.load, float(data['form-2-load']))
947.         self.assertEqual(a.speed, float(data['form-2-speed']))
948.         b.refresh_from_db()
949.         self.assertEqual(b.load, 2)
950.         self.assertEqual(b.speed, 2)
951.         c.refresh_from_db()
952.         self.assertEqual(c.load, float(data['form-1-load']))
953.         self.assertEqual(c.speed, float(data['form-1-speed']))
954.         d.refresh_from_db()
955.         self.assertEqual(d.load, float(data['form-0-load']))
956.         self.assertEqual(d.speed, float(data['form-0-speed']))
957.         # No new swallows were created.
958.         self.assertEqual(len(Swallow.objects.all()), 4)
959. 
960.     def test_get_edited_object_ids(self):
961.         a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
962.         b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
963.         c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
964.         superuser = self._create_superuser('superuser')
965.         self.client.force_login(superuser)
966.         changelist_url = reverse('admin:admin_changelist_swallow_changelist')
967.         m = SwallowAdmin(Swallow, custom_site)
968.         data = {
969.             'form-TOTAL_FORMS': '3',
970.             'form-INITIAL_FORMS': '3',
971.             'form-MIN_NUM_FORMS': '0',
972.             'form-MAX_NUM_FORMS': '1000',
973.             'form-0-uuid': str(a.pk),
974.             'form-1-uuid': str(b.pk),
975.             'form-2-uuid': str(c.pk),
976.             'form-0-load': '9.0',
977.             'form-0-speed': '9.0',
978.             'form-1-load': '5.0',
979.             'form-1-speed': '5.0',
980.             'form-2-load': '5.0',
981.             'form-2-speed': '4.0',
982.             '_save': 'Save',
983.         }
984.         request = self.factory.post(changelist_url, data=data)
985.         pks = m._get_edited_object_pks(request, prefix='form')
986.         self.assertEqual(sorted(pks), sorted([str(a.pk), str(b.pk), str(c.pk)]))
987. 
988.     def test_get_list_editable_queryset(self):
989.         a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
990.         Swallow.objects.create(origin='Swallow B', load=2, speed=2)
991.         data = {
992.             'form-TOTAL_FORMS': '2',
993.             'form-INITIAL_FORMS': '2',
994.             'form-MIN_NUM_FORMS': '0',
995.             'form-MAX_NUM_FORMS': '1000',
996.             'form-0-uuid': str(a.pk),
997.             'form-0-load': '10',
998.             '_save': 'Save',
999.         }
1000.         superuser = self._create_superuser('superuser')
1001.         self.client.force_login(superuser)
1002.         changelist_url = reverse('admin:admin_changelist_swallow_changelist')
1003.         m = SwallowAdmin(Swallow, custom_site)
1004.         request = self.factory.post(changelist_url, data=data)
1005.         queryset = m._get_list_editable_queryset(request, prefix='form')
1006.         self.assertEqual(queryset.count(), 1)
1007.         data['form-0-uuid'] = 'INVALD_PRIMARY_KEY'
1008.         # The unfiltered queryset is returned if there's invalid data.
1009.         request = self.factory.post(changelist_url, data=data)
1010.         queryset = m._get_list_editable_queryset(request, prefix='form')
1011.         self.assertEqual(queryset.count(), 2)
1012. 
1013.     def test_get_list_editable_queryset_with_regex_chars_in_prefix(self):
1014.         a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
1015.         Swallow.objects.create(origin='Swallow B', load=2, speed=2)
1016.         data = {
1017.             'form$-TOTAL_FORMS': '2',
1018.             'form$-INITIAL_FORMS': '2',
1019.             'form$-MIN_NUM_FORMS': '0',
1020.             'form$-MAX_NUM_FORMS': '1000',
1021.             'form$-0-uuid': str(a.pk),
1022.             'form$-0-load': '10',
1023.             '_save': 'Save',
1024.         }
1025.         superuser = self._create_superuser('superuser')
1026.         self.client.force_login(superuser)
1027.         changelist_url = reverse('admin:admin_changelist_swallow_changelist')
1028.         m = SwallowAdmin(Swallow, custom_site)
1029.         request = self.factory.post(changelist_url, data=data)
1030.         queryset = m._get_list_editable_queryset(request, prefix='form$')
1031.         self.assertEqual(queryset.count(), 1)
1032. 
1033.     def test_changelist_view_list_editable_changed_objects_uses_filter(self):
1034.         """list_editable edits use a filtered queryset to limit memory usage."""
1035.         a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
1036.         Swallow.objects.create(origin='Swallow B', load=2, speed=2)
1037.         data = {
1038.             'form-TOTAL_FORMS': '2',
1039.             'form-INITIAL_FORMS': '2',
1040.             'form-MIN_NUM_FORMS': '0',
1041.             'form-MAX_NUM_FORMS': '1000',
1042.             'form-0-uuid': str(a.pk),
1043.             'form-0-load': '10',
1044.             '_save': 'Save',
1045.         }
1046.         superuser = self._create_superuser('superuser')
1047.         self.client.force_login(superuser)
1048.         changelist_url = reverse('admin:admin_changelist_swallow_changelist')
1049.         with CaptureQueriesContext(connection) as context:
1050.             response = self.client.post(changelist_url, data=data)
1051.             self.assertEqual(response.status_code, 200)
1052.             self.assertIn('WHERE', context.captured_queries[4]['sql'])
1053.             self.assertIn('IN', context.captured_queries[4]['sql'])
1054.             # Check only the first few characters since the UUID may have dashes.
1055.             self.assertIn(str(a.pk)[:8], context.captured_queries[4]['sql'])
1056. 
1057.     def test_deterministic_order_for_unordered_model(self):
1058.         """
1059.         The primary key is used in the ordering of the changelist's results to
1060.         guarantee a deterministic order, even when the model doesn't have any
1061.         default ordering defined (#17198).
1062.         """
1063.         superuser = self._create_superuser('superuser')
1064. 
1065.         for counter in range(1, 51):
1066.             UnorderedObject.objects.create(id=counter, bool=True)
1067. 
1068.         class UnorderedObjectAdmin(admin.ModelAdmin):
1069.             list_per_page = 10
1070. 
1071.         def check_results_order(ascending=False):
1072.             custom_site.register(UnorderedObject, UnorderedObjectAdmin)
1073.             model_admin = UnorderedObjectAdmin(UnorderedObject, custom_site)
1074.             counter = 0 if ascending else 51
1075.             for page in range(1, 6):
1076.                 request = self._mocked_authenticated_request('/unorderedobject/?p=%s' % page, superuser)
1077.                 response = model_admin.changelist_view(request)
1078.                 for result in response.context_data['cl'].result_list:
1079.                     counter += 1 if ascending else -1
1080.                     self.assertEqual(result.id, counter)
1081.             custom_site.unregister(UnorderedObject)
1082. 
1083.         # When no order is defined at all, everything is ordered by '-pk'.
1084.         check_results_order()
1085. 
1086.         # When an order field is defined but multiple records have the same
1087.         # value for that field, make sure everything gets ordered by -pk as well.
1088.         UnorderedObjectAdmin.ordering = ['bool']
1089.         check_results_order()
1090. 
1091.         # When order fields are defined, including the pk itself, use them.
1092.         UnorderedObjectAdmin.ordering = ['bool', '-pk']
1093.         check_results_order()
1094.         UnorderedObjectAdmin.ordering = ['bool', 'pk']
1095.         check_results_order(ascending=True)
1096.         UnorderedObjectAdmin.ordering = ['-id', 'bool']
1097.         check_results_order()
1098.         UnorderedObjectAdmin.ordering = ['id', 'bool']
1099.         check_results_order(ascending=True)
1100. 
1101.     def test_deterministic_order_for_model_ordered_by_its_manager(self):
1102.         """
1103.         The primary key is used in the ordering of the changelist's results to
1104.         guarantee a deterministic order, even when the model has a manager that
1105.         defines a default ordering (#17198).
1106.         """
1107.         superuser = self._create_superuser('superuser')
1108. 
1109.         for counter in range(1, 51):
1110.             OrderedObject.objects.create(id=counter, bool=True, number=counter)
1111. 
1112.         class OrderedObjectAdmin(admin.ModelAdmin):
1113.             list_per_page = 10
1114. 
1115.         def check_results_order(ascending=False):
1116.             custom_site.register(OrderedObject, OrderedObjectAdmin)
1117.             model_admin = OrderedObjectAdmin(OrderedObject, custom_site)
1118.             counter = 0 if ascending else 51
1119.             for page in range(1, 6):
1120.                 request = self._mocked_authenticated_request('/orderedobject/?p=%s' % page, superuser)
1121.                 response = model_admin.changelist_view(request)
1122.                 for result in response.context_data['cl'].result_list:
1123.                     counter += 1 if ascending else -1
1124.                     self.assertEqual(result.id, counter)
1125.             custom_site.unregister(OrderedObject)
1126. 
1127.         # When no order is defined at all, use the model's default ordering (i.e. 'number')
1128.         check_results_order(ascending=True)
1129. 
1130.         # When an order field is defined but multiple records have the same
1131.         # value for that field, make sure everything gets ordered by -pk as well.
1132.         OrderedObjectAdmin.ordering = ['bool']
1133.         check_results_order()
1134. 
1135.         # When order fields are defined, including the pk itself, use them.
1136.         OrderedObjectAdmin.ordering = ['bool', '-pk']
1137.         check_results_order()
1138.         OrderedObjectAdmin.ordering = ['bool', 'pk']
1139.         check_results_order(ascending=True)
1140.         OrderedObjectAdmin.ordering = ['-id', 'bool']
1141.         check_results_order()
1142.         OrderedObjectAdmin.ordering = ['id', 'bool']
1143.         check_results_order(ascending=True)
1144. 
1145.     @isolate_apps('admin_changelist')
1146.     def test_total_ordering_optimization(self):
1147.         class Related(models.Model):
1148.             unique_field = models.BooleanField(unique=True)
1149. 
1150.             class Meta:
1151.                 ordering = ('unique_field',)
1152. 
1153.         class Model(models.Model):
1154.             unique_field = models.BooleanField(unique=True)
1155.             unique_nullable_field = models.BooleanField(unique=True, null=True)
1156.             related = models.ForeignKey(Related, models.CASCADE)
1157.             other_related = models.ForeignKey(Related, models.CASCADE)
1158.             related_unique = models.OneToOneField(Related, models.CASCADE)
1159.             field = models.BooleanField()
1160.             other_field = models.BooleanField()
1161.             null_field = models.BooleanField(null=True)
1162. 
1163.             class Meta:
1164.                 unique_together = {
1165.                     ('field', 'other_field'),
1166.                     ('field', 'null_field'),
1167.                     ('related', 'other_related_id'),
1168.                 }
1169. 
1170.         class ModelAdmin(admin.ModelAdmin):
1171.             def get_queryset(self, request):
1172.                 return Model.objects.none()
1173. 
1174.         request = self._mocked_authenticated_request('/', self.superuser)
1175.         site = admin.AdminSite(name='admin')
1176.         model_admin = ModelAdmin(Model, site)
1177.         change_list = model_admin.get_changelist_instance(request)
1178.         tests = (
1179.             ([], ['-pk']),
1180.             # Unique non-nullable field.
1181.             (['unique_field'], ['unique_field']),
1182.             (['-unique_field'], ['-unique_field']),
1183.             # Unique nullable field.
1184.             (['unique_nullable_field'], ['unique_nullable_field', '-pk']),
1185.             # Field.
1186.             (['field'], ['field', '-pk']),
1187.             # Related field introspection is not implemented.
1188.             (['related__unique_field'], ['related__unique_field', '-pk']),
1189.             # Related attname unique.
1190.             (['related_unique_id'], ['related_unique_id']),
1191.             # Related ordering introspection is not implemented.
1192.             (['related_unique'], ['related_unique', '-pk']),
1193.             # Composite unique.
1194.             (['field', '-other_field'], ['field', '-other_field']),
1195.             # Composite unique nullable.
1196.             (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
1197.             # Composite unique and nullable.
1198.             (['-field', 'null_field', 'other_field'], ['-field', 'null_field', 'other_field']),
1199.             # Composite unique attnames.
1200.             (['related_id', '-other_related_id'], ['related_id', '-other_related_id']),
1201.             # Composite unique names.
1202.             (['related', '-other_related_id'], ['related', '-other_related_id', '-pk']),
1203.         )
1204.         # F() objects composite unique.
1205.         total_ordering = [F('field'), F('other_field').desc(nulls_last=True)]
1206.         # F() objects composite unique nullable.
1207.         non_total_ordering = [F('field'), F('null_field').desc(nulls_last=True)]
1208.         tests += (
1209.             (total_ordering, total_ordering),
1210.             (non_total_ordering, non_total_ordering + ['-pk']),
1211.         )
1212.         for ordering, expected in tests:
1213.             with self.subTest(ordering=ordering):
1214.                 self.assertEqual(change_list._get_deterministic_ordering(ordering), expected)
1215. 
1216.     @isolate_apps('admin_changelist')
1217.     def test_total_ordering_optimization_meta_constraints(self):
1218.         class Related(models.Model):
1219.             unique_field = models.BooleanField(unique=True)
1220. 
1221.             class Meta:
1222.                 ordering = ('unique_field',)
1223. 
1224.         class Model(models.Model):
1225.             field_1 = models.BooleanField()
1226.             field_2 = models.BooleanField()
1227.             field_3 = models.BooleanField()
1228.             field_4 = models.BooleanField()
1229.             field_5 = models.BooleanField()
1230.             field_6 = models.BooleanField()
1231.             nullable_1 = models.BooleanField(null=True)
1232.             nullable_2 = models.BooleanField(null=True)
1233.             related_1 = models.ForeignKey(Related, models.CASCADE)
1234.             related_2 = models.ForeignKey(Related, models.CASCADE)
1235.             related_3 = models.ForeignKey(Related, models.CASCADE)
1236.             related_4 = models.ForeignKey(Related, models.CASCADE)
1237. 
1238.             class Meta:
1239.                 constraints = [
1240.                     *[
1241.                         models.UniqueConstraint(fields=fields, name=''.join(fields))
1242.                         for fields in (
1243.                             ['field_1'],
1244.                             ['nullable_1'],
1245.                             ['related_1'],
1246.                             ['related_2_id'],
1247.                             ['field_2', 'field_3'],
1248.                             ['field_2', 'nullable_2'],
1249.                             ['field_2', 'related_3'],
1250.                             ['field_3', 'related_4_id'],
1251.                         )
1252.                     ],
1253.                     models.CheckConstraint(check=models.Q(id__gt=0), name='foo'),
1254.                     models.UniqueConstraint(
1255.                         fields=['field_5'],
1256.                         condition=models.Q(id__gt=10),
1257.                         name='total_ordering_1',
1258.                     ),
1259.                     models.UniqueConstraint(
1260.                         fields=['field_6'],
1261.                         condition=models.Q(),
1262.                         name='total_ordering',
1263.                     ),
1264.                 ]
1265. 
1266.         class ModelAdmin(admin.ModelAdmin):
1267.             def get_queryset(self, request):
1268.                 return Model.objects.none()
1269. 
1270.         request = self._mocked_authenticated_request('/', self.superuser)
1271.         site = admin.AdminSite(name='admin')
1272.         model_admin = ModelAdmin(Model, site)
1273.         change_list = model_admin.get_changelist_instance(request)
1274.         tests = (
1275.             # Unique non-nullable field.
1276.             (['field_1'], ['field_1']),
1277.             # Unique nullable field.
1278.             (['nullable_1'], ['nullable_1', '-pk']),
1279.             # Related attname unique.
1280.             (['related_1_id'], ['related_1_id']),
1281.             (['related_2_id'], ['related_2_id']),
1282.             # Related ordering introspection is not implemented.
1283.             (['related_1'], ['related_1', '-pk']),
1284.             # Composite unique.
1285.             (['-field_2', 'field_3'], ['-field_2', 'field_3']),
1286.             # Composite unique nullable.
1287.             (['field_2', '-nullable_2'], ['field_2', '-nullable_2', '-pk']),
1288.             # Composite unique and nullable.
1289.             (
1290.                 ['field_2', '-nullable_2', 'field_3'],
1291.                 ['field_2', '-nullable_2', 'field_3'],
1292.             ),
1293.             # Composite field and related field name.
1294.             (['field_2', '-related_3'], ['field_2', '-related_3', '-pk']),
1295.             (['field_3', 'related_4'], ['field_3', 'related_4', '-pk']),
1296.             # Composite field and related field attname.
1297.             (['field_2', 'related_3_id'], ['field_2', 'related_3_id']),
1298.             (['field_3', '-related_4_id'], ['field_3', '-related_4_id']),
1299.             # Partial unique constraint is ignored.
1300.             (['field_5'], ['field_5', '-pk']),
1301.             # Unique constraint with an empty condition.
1302.             (['field_6'], ['field_6']),
1303.         )
1304.         for ordering, expected in tests:
1305.             with self.subTest(ordering=ordering):
1306.                 self.assertEqual(change_list._get_deterministic_ordering(ordering), expected)
1307. 
1308.     def test_dynamic_list_filter(self):
1309.         """
1310.         Regression tests for ticket #17646: dynamic list_filter support.
1311.         """
1312.         parent = Parent.objects.create(name='parent')
1313.         for i in range(10):
1314.             Child.objects.create(name='child %s' % i, parent=parent)
1315. 
1316.         user_noparents = self._create_superuser('noparents')
1317.         user_parents = self._create_superuser('parents')
1318. 
1319.         # Test with user 'noparents'
1320.         m = DynamicListFilterChildAdmin(Child, custom_site)
1321.         request = self._mocked_authenticated_request('/child/', user_noparents)
1322.         response = m.changelist_view(request)
1323.         self.assertEqual(response.context_data['cl'].list_filter, ['name', 'age'])
1324. 
1325.         # Test with user 'parents'
1326.         m = DynamicListFilterChildAdmin(Child, custom_site)
1327.         request = self._mocked_authenticated_request('/child/', user_parents)
1328.         response = m.changelist_view(request)
1329.         self.assertEqual(response.context_data['cl'].list_filter, ('parent', 'name', 'age'))
1330. 
1331.     def test_dynamic_search_fields(self):
1332.         child = self._create_superuser('child')
1333.         m = DynamicSearchFieldsChildAdmin(Child, custom_site)
1334.         request = self._mocked_authenticated_request('/child/', child)
1335.         response = m.changelist_view(request)
1336.         self.assertEqual(response.context_data['cl'].search_fields, ('name', 'age'))
1337. 
1338.     def test_pagination_page_range(self):
1339.         """
1340.         Regression tests for ticket #15653: ensure the number of pages
1341.         generated for changelist views are correct.
1342.         """
1343.         # instantiating and setting up ChangeList object
1344.         m = GroupAdmin(Group, custom_site)
1345.         request = self.factory.get('/group/')
1346.         request.user = self.superuser
1347.         cl = m.get_changelist_instance(request)
1348.         cl.list_per_page = 10
1349. 
1350.         ELLIPSIS = cl.paginator.ELLIPSIS
1351.         for number, pages, expected in [
1352.             (1, 1, []),
1353.             (1, 2, [1, 2]),
1354.             (6, 11, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]),
1355.             (6, 12, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),
1356.             (6, 13, [1, 2, 3, 4, 5, 6, 7, 8, 9, ELLIPSIS, 12, 13]),
1357.             (7, 12, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]),
1358.             (7, 13, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]),
1359.             (7, 14, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ELLIPSIS, 13, 14]),
1360.             (8, 13, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, 12, 13]),
1361.             (8, 14, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]),
1362.             (8, 15, [1, 2, ELLIPSIS, 5, 6, 7, 8, 9, 10, 11, ELLIPSIS, 14, 15]),
1363.         ]:
1364.             with self.subTest(number=number, pages=pages):
1365.                 # assuming exactly `pages * cl.list_per_page` objects
1366.                 Group.objects.all().delete()
1367.                 for i in range(pages * cl.list_per_page):
1368.                     Group.objects.create(name='test band')
1369. 
1370.                 # setting page number and calculating page range
1371.                 cl.page_num = number
1372.                 cl.get_results(request)
1373.                 self.assertEqual(list(pagination(cl)['page_range']), expected)
1374. 
1375.     def test_object_tools_displayed_no_add_permission(self):
1376.         """
1377.         When ModelAdmin.has_add_permission() returns False, the object-tools
1378.         block is still shown.
1379.         """
1380.         superuser = self._create_superuser('superuser')
1381.         m = EventAdmin(Event, custom_site)
1382.         request = self._mocked_authenticated_request('/event/', superuser)
1383.         self.assertFalse(m.has_add_permission(request))
1384.         response = m.changelist_view(request)
1385.         self.assertIn('<ul class="object-tools">', response.rendered_content)
1386.         # The "Add" button inside the object-tools shouldn't appear.
1387.         self.assertNotIn('Add ', response.rendered_content)
1388. 
1389.     def test_search_help_text(self):
1390.         superuser = self._create_superuser('superuser')
1391.         m = BandAdmin(Band, custom_site)
1392.         # search_fields without search_help_text.
1393.         m.search_fields = ['name']
1394.         request = self._mocked_authenticated_request('/band/', superuser)
1395.         response = m.changelist_view(request)
1396.         self.assertIsNone(response.context_data['cl'].search_help_text)
1397.         self.assertNotContains(response, '<div class="help">')
1398.         # search_fields with search_help_text.
1399.         m.search_help_text = 'Search help text'
1400.         request = self._mocked_authenticated_request('/band/', superuser)
1401.         response = m.changelist_view(request)
1402.         self.assertEqual(response.context_data['cl'].search_help_text, 'Search help text')
1403.         self.assertContains(response, '<div class="help">Search help text</div>')
1404. 
1405. 
1406. class GetAdminLogTests(TestCase):
1407. 
1408.     def test_custom_user_pk_not_named_id(self):
1409.         """
1410.         {% get_admin_log %} works if the user model's primary key isn't named
1411.         'id'.
1412.         """
1413.         context = Context({'user': CustomIdUser()})
1414.         template = Template('{% load log %}{% get_admin_log 10 as admin_log for_user user %}')
1415.         # This template tag just logs.
1416.         self.assertEqual(template.render(context), '')
1417. 
1418.     def test_no_user(self):
1419.         """{% get_admin_log %} works without specifying a user."""
1420.         user = User(username='jondoe', password='secret', email='super@example.com')
1421.         user.save()
1422.         ct = ContentType.objects.get_for_model(User)
1423.         LogEntry.objects.log_action(user.pk, ct.pk, user.pk, repr(user), 1)
1424.         t = Template(
1425.             '{% load log %}'
1426.             '{% get_admin_log 100 as admin_log %}'
1427.             '{% for entry in admin_log %}'
1428.             '{{ entry|safe }}'
1429.             '{% endfor %}'
1430.         )
1431.         self.assertEqual(t.render(Context({})), 'Added “<User: jondoe>”.')
1432. 
1433.     def test_missing_args(self):
1434.         msg = "'get_admin_log' statements require two arguments"
1435.         with self.assertRaisesMessage(TemplateSyntaxError, msg):
1436.             Template('{% load log %}{% get_admin_log 10 as %}')
1437. 
1438.     def test_non_integer_limit(self):
1439.         msg = "First argument to 'get_admin_log' must be an integer"
1440.         with self.assertRaisesMessage(TemplateSyntaxError, msg):
1441.             Template('{% load log %}{% get_admin_log "10" as admin_log for_user user %}')
1442. 
1443.     def test_without_as(self):
1444.         msg = "Second argument to 'get_admin_log' must be 'as'"
1445.         with self.assertRaisesMessage(TemplateSyntaxError, msg):
1446.             Template('{% load log %}{% get_admin_log 10 ad admin_log for_user user %}')
1447. 
1448.     def test_without_for_user(self):
1449.         msg = "Fourth argument to 'get_admin_log' must be 'for_user'"
1450.         with self.assertRaisesMessage(TemplateSyntaxError, msg):
1451.             Template('{% load log %}{% get_admin_log 10 as admin_log foruser user %}')
1452. 
1453. 
1454. @override_settings(ROOT_URLCONF='admin_changelist.urls')
1455. class SeleniumTests(AdminSeleniumTestCase):
1456. 
1457.     available_apps = ['admin_changelist'] + AdminSeleniumTestCase.available_apps
1458. 
1459.     def setUp(self):
1460.         User.objects.create_superuser(username='super', password='secret', email=None)
1461. 
1462.     def test_add_row_selection(self):
1463.         """
1464.         The status line for selected rows gets updated correctly (#22038).
1465.         """
1466.         from selenium.webdriver.common.by import By
1467.         self.admin_login(username='super', password='secret')
1468.         self.selenium.get(self.live_server_url + reverse('admin:auth_user_changelist'))
1469. 
1470.         form_id = '#changelist-form'
1471. 
1472.         # Test amount of rows in the Changelist
1473.         rows = self.selenium.find_elements(
1474.             By.CSS_SELECTOR,
1475.             '%s #result_list tbody tr' % form_id
1476.         )
1477.         self.assertEqual(len(rows), 1)
1478.         row = rows[0]
1479. 
1480.         selection_indicator = self.selenium.find_element(
1481.             By.CSS_SELECTOR,
1482.             '%s .action-counter' % form_id
1483.         )
1484.         all_selector = self.selenium.find_element(By.ID, 'action-toggle')
1485.         row_selector = self.selenium.find_element(
1486.             By.CSS_SELECTOR,
1487.             '%s #result_list tbody tr:first-child .action-select' % form_id
1488.         )
1489. 
1490.         # Test current selection
1491.         self.assertEqual(selection_indicator.text, "0 of 1 selected")
1492.         self.assertIs(all_selector.get_property('checked'), False)
1493.         self.assertEqual(row.get_attribute('class'), '')
1494. 
1495.         # Select a row and check again
1496.         row_selector.click()
1497.         self.assertEqual(selection_indicator.text, "1 of 1 selected")
1498.         self.assertIs(all_selector.get_property('checked'), True)
1499.         self.assertEqual(row.get_attribute('class'), 'selected')
1500. 
1501.         # Deselect a row and check again
1502.         row_selector.click()
1503.         self.assertEqual(selection_indicator.text, "0 of 1 selected")
1504.         self.assertIs(all_selector.get_property('checked'), False)
1505.         self.assertEqual(row.get_attribute('class'), '')
1506. 
1507.     def test_modifier_allows_multiple_section(self):
1508.         """
1509.         Selecting a row and then selecting another row whilst holding shift
1510.         should select all rows in-between.
1511.         """
1512.         from selenium.webdriver.common.action_chains import ActionChains
1513.         from selenium.webdriver.common.by import By
1514.         from selenium.webdriver.common.keys import Keys
1515. 
1516.         Parent.objects.bulk_create([Parent(name='parent%d' % i) for i in range(5)])
1517.         self.admin_login(username='super', password='secret')
1518.         self.selenium.get(self.live_server_url + reverse('admin:admin_changelist_parent_changelist'))
1519.         checkboxes = self.selenium.find_elements(By.CSS_SELECTOR, 'tr input.action-select')
1520.         self.assertEqual(len(checkboxes), 5)
1521.         for c in checkboxes:
1522.             self.assertIs(c.get_property('checked'), False)
1523.         # Check first row. Hold-shift and check next-to-last row.
1524.         checkboxes[0].click()
1525.         ActionChains(self.selenium).key_down(Keys.SHIFT).click(checkboxes[-2]).key_up(Keys.SHIFT).perform()
1526.         for c in checkboxes[:-2]:
1527.             self.assertIs(c.get_property('checked'), True)
1528.         self.assertIs(checkboxes[-1].get_property('checked'), False)
1529. 
1530.     def test_select_all_across_pages(self):
1531.         from selenium.webdriver.common.by import By
1532.         Parent.objects.bulk_create([Parent(name='parent%d' % i) for i in range(101)])
1533.         self.admin_login(username='super', password='secret')
1534.         self.selenium.get(self.live_server_url + reverse('admin:admin_changelist_parent_changelist'))
1535. 
1536.         selection_indicator = self.selenium.find_element(By.CSS_SELECTOR, '.action-counter')
1537.         select_all_indicator = self.selenium.find_element(By.CSS_SELECTOR, '.actions .all')
1538.         question = self.selenium.find_element(By.CSS_SELECTOR, '.actions > .question')
1539.         clear = self.selenium.find_element(By.CSS_SELECTOR, '.actions > .clear')
1540.         select_all = self.selenium.find_element(By.ID, 'action-toggle')
1541.         select_across = self.selenium.find_elements(By.NAME, 'select_across')
1542. 
1543.         self.assertIs(question.is_displayed(), False)
1544.         self.assertIs(clear.is_displayed(), False)
1545.         self.assertIs(select_all.get_property('checked'), False)
1546.         for hidden_input in select_across:
1547.             self.assertEqual(hidden_input.get_property('value'), '0')
1548.         self.assertIs(selection_indicator.is_displayed(), True)
1549.         self.assertEqual(selection_indicator.text, '0 of 100 selected')
1550.         self.assertIs(select_all_indicator.is_displayed(), False)
1551. 
1552.         select_all.click()
1553.         self.assertIs(question.is_displayed(), True)
1554.         self.assertIs(clear.is_displayed(), False)
1555.         self.assertIs(select_all.get_property('checked'), True)
1556.         for hidden_input in select_across:
1557.             self.assertEqual(hidden_input.get_property('value'), '0')
1558.         self.assertIs(selection_indicator.is_displayed(), True)
1559.         self.assertEqual(selection_indicator.text, '100 of 100 selected')
1560.         self.assertIs(select_all_indicator.is_displayed(), False)
1561. 
1562.         question.click()
1563.         self.assertIs(question.is_displayed(), False)
1564.         self.assertIs(clear.is_displayed(), True)
1565.         self.assertIs(select_all.get_property('checked'), True)
1566.         for hidden_input in select_across:
1567.             self.assertEqual(hidden_input.get_property('value'), '1')
1568.         self.assertIs(selection_indicator.is_displayed(), False)
1569.         self.assertIs(select_all_indicator.is_displayed(), True)
1570. 
1571.         clear.click()
1572.         self.assertIs(question.is_displayed(), False)
1573.         self.assertIs(clear.is_displayed(), False)
1574.         self.assertIs(select_all.get_property('checked'), False)
1575.         for hidden_input in select_across:
1576.             self.assertEqual(hidden_input.get_property('value'), '0')
1577.         self.assertIs(selection_indicator.is_displayed(), True)
1578.         self.assertEqual(selection_indicator.text, '0 of 100 selected')
1579.         self.assertIs(select_all_indicator.is_displayed(), False)
1580. 
1581.     def test_actions_warn_on_pending_edits(self):
1582.         from selenium.webdriver.common.by import By
1583.         Parent.objects.create(name='foo')
1584. 
1585.         self.admin_login(username='super', password='secret')
1586.         self.selenium.get(self.live_server_url + reverse('admin:admin_changelist_parent_changelist'))
1587. 
1588.         name_input = self.selenium.find_element(By.ID, 'id_form-0-name')
1589.         name_input.clear()
1590.         name_input.send_keys('bar')
1591.         self.selenium.find_element(By.ID, 'action-toggle').click()
1592.         self.selenium.find_element(By.NAME, 'index').click()  # Go
1593.         alert = self.selenium.switch_to.alert
1594.         try:
1595.             self.assertEqual(
1596.                 alert.text,
1597.                 'You have unsaved changes on individual editable fields. If you '
1598.                 'run an action, your unsaved changes will be lost.'
1599.             )
1600.         finally:
1601.             alert.dismiss()
1602. 
1603.     def test_save_with_changes_warns_on_pending_action(self):
1604.         from selenium.webdriver.common.by import By
1605.         from selenium.webdriver.support.ui import Select
1606. 
1607.         Parent.objects.create(name='parent')
1608. 
1609.         self.admin_login(username='super', password='secret')
1610.         self.selenium.get(self.live_server_url + reverse('admin:admin_changelist_parent_changelist'))
1611. 
1612.         name_input = self.selenium.find_element(By.ID, 'id_form-0-name')
1613.         name_input.clear()
1614.         name_input.send_keys('other name')
1615.         Select(
1616.             self.selenium.find_element(By.NAME, 'action')
1617.         ).select_by_value('delete_selected')
1618.         self.selenium.find_element(By.NAME, '_save').click()
1619.         alert = self.selenium.switch_to.alert
1620.         try:
1621.             self.assertEqual(
1622.                 alert.text,
1623.                 'You have selected an action, but you haven’t saved your '
1624.                 'changes to individual fields yet. Please click OK to save. '
1625.                 'You’ll need to re-run the action.',
1626.             )
1627.         finally:
1628.             alert.dismiss()
1629. 
1630.     def test_save_without_changes_warns_on_pending_action(self):
1631.         from selenium.webdriver.common.by import By
1632.         from selenium.webdriver.support.ui import Select
1633. 
1634.         Parent.objects.create(name='parent')
1635. 
1636.         self.admin_login(username='super', password='secret')
1637.         self.selenium.get(self.live_server_url + reverse('admin:admin_changelist_parent_changelist'))
1638. 
1639.         Select(
1640.             self.selenium.find_element(By.NAME, 'action')
1641.         ).select_by_value('delete_selected')
1642.         self.selenium.find_element(By.NAME, '_save').click()
1643.         alert = self.selenium.switch_to.alert
1644.         try:
1645.             self.assertEqual(
1646.                 alert.text,
1647.                 'You have selected an action, and you haven’t made any '
1648.                 'changes on individual fields. You’re probably looking for '
1649.                 'the Go button rather than the Save button.',
1650.             )
1651.         finally:
1652.             alert.dismiss()


--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to a given query and the refinement query, and return your response in the specified format!
EVERY context object MUST include: reasoning, relative_path, start_line, and end_line.

2025-10-06 00:25:09,056 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="This test is highly relevant as it uses multiple search terms (e.g., 'Duo Concert', 'Finlayson Duo Tiny') to test search functionality across fields that span relationships, including ForeignKey and ManyToManyField lookups (`group__name`, `concert__name`, `members__name`). This directly relates to the user's issue of multiple joins being created for multi-word search queries.", relative_path='tests/admin_changelist/tests.py', start_line=516, end_line=566), ContextOutput(reasoning='This test is relevant because it addresses the problem of duplicate results when searching on a related object (`child__name`). The bug report mentions unnecessary joins, which can lead to duplicate rows if not handled correctly (e.g., with `DISTINCT` or `Exists()`). This test verifies that the query is constructed correctly to avoid this issue.', relative_path='tests/admin_changelist/tests.py', start_line=471, end_line=491), ContextOutput(reasoning='This test is relevant as it checks for duplicate results when searching through a more complex, two-level relationship (`group__members__name`). This scenario is similar to the bug description where searches spanning relationships cause issues, and it tests that the ORM is generating an efficient query (using `Exists()`) instead of potentially inefficient JOINs.', relative_path='tests/admin_changelist/tests.py', start_line=492, end_line=515), ContextOutput(reasoning="This test is relevant because it specifically checks the behavior of searches that span relationships (`child__name`). While its main focus is on preserving `select_related`, it demonstrates a search across a foreign key relationship, which is a core part of the user's reported bug.", relative_path='tests/admin_changelist/tests.py', start_line=114, end_line=127), ContextOutput(reasoning='This test is relevant as it demonstrates a search spanning multiple relationships (`group__members__age__exactly`). This is a good example of a deep search query that could generate multiple JOINs, which is the crux of the performance problem described in the bug report.', relative_path='tests/admin_changelist/tests.py', start_line=618, end_line=638)]
2025-10-06 00:25:09,057 - thread-139660780025408.app.lang_graph.nodes.context_extraction_node - INFO - Context extraction complete, returning context [Context(relative_path='tests/admin_changelist/tests.py', content='1. import datetime\n2. \n3. from django.contrib import admin\n4. from django.contrib.admin.models import LogEntry\n5. from django.contrib.admin.options import IncorrectLookupParameters\n6. from django.contrib.admin.templatetags.admin_list import pagination\n7. from django.contrib.admin.tests import AdminSeleniumTestCase\n8. from django.contrib.admin.views.main import (\n9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n10. )\n11. from django.contrib.auth.models import User\n12. from django.contrib.contenttypes.models import ContentType\n13. from django.contrib.messages.storage.cookie import CookieStorage\n14. from django.db import connection, models\n15. from django.db.models import F, Field, IntegerField\n16. from django.db.models.functions import Upper\n17. from django.db.models.lookups import Contains, Exact\n18. from django.template import Context, Template, TemplateSyntaxError\n19. from django.test import TestCase, override_settings\n20. from django.test.client import RequestFactory\n21. from django.test.utils import (\n22.     CaptureQueriesContext, isolate_apps, register_lookup,\n23. )\n24. from django.urls import reverse\n25. from django.utils import formats\n26. \n27. from .admin import (\n28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n34.     site as custom_site,\n35. )\n36. from .models import (\n37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n40. )\n41. ', start_line_number=1, end_line_number=41), Context(relative_path='tests/admin_changelist/tests.py', content='54. @override_settings(ROOT_URLCONF="admin_changelist.urls")\n55. class ChangeListTests(TestCase):\n56.     factory = RequestFactory()\n57. \n58.     @classmethod\n59.     def setUpTestData(cls):\n60.         cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n61. \n62.     def _create_superuser(self, username):\n63.         return User.objects.create_superuser(username=username, email=\'a@b.com\', password=\'xxx\')\n64. \n65.     def _mocked_authenticated_request(self, url, user):\n66.         request = self.factory.get(url)\n67.         request.user = user\n68.         return request\n69. ', start_line_number=54, end_line_number=69), Context(relative_path='tests/admin_changelist/tests.py', content='471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):\n472.         """\n473.         Regressions tests for #15819: If a field listed in search_fields\n474.         is a non-unique related object, Exists() must be applied.\n475.         """\n476.         parent = Parent.objects.create(name=\'Mary\')\n477.         Child.objects.create(parent=parent, name=\'Danielle\')\n478.         Child.objects.create(parent=parent, name=\'Daniel\')\n479. \n480.         m = ParentAdmin(Parent, custom_site)\n481.         request = self.factory.get(\'/parent/\', data={SEARCH_VAR: \'daniel\'})\n482.         request.user = self.superuser\n483. \n484.         cl = m.get_changelist_instance(request)\n485.         # Exists() is applied.\n486.         self.assertEqual(cl.queryset.count(), 1)\n487.         # Queryset must be deletable.\n488.         self.assertIs(cl.queryset.query.distinct, False)\n489.         cl.queryset.delete()\n490.         self.assertEqual(cl.queryset.count(), 0)\n491. ', start_line_number=471, end_line_number=491), Context(relative_path='tests/admin_changelist/tests.py', content='603.         concert = Concert.objects.create(name=\'Woodstock\', group=band)\n604. \n605.         m = ConcertAdmin(Concert, custom_site)\n606.         m.search_fields = [\'group__name__cc\']\n607.         with register_lookup(Field, Contains, lookup_name=\'cc\'):\n608.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Hype\'})\n609.             request.user = self.superuser\n610.             cl = m.get_changelist_instance(request)\n611.             self.assertCountEqual(cl.queryset, [concert])\n612. \n613.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Woodstock\'})\n614.             request.user = self.superuser\n615.             cl = m.get_changelist_instance(request)\n616.             self.assertCountEqual(cl.queryset, [])\n617. \n618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):\n619.         hype = Group.objects.create(name=\'The Hype\')\n620.         concert = Concert.objects.create(name=\'Woodstock\', group=hype)\n621.         vox = Musician.objects.create(name=\'Vox\', age=20)\n622.         Membership.objects.create(music=vox, group=hype)\n623.         # Register a custom lookup on IntegerField to ensure that field\n624.         # traversing logic in ModelAdmin.get_search_results() works.\n625.         with register_lookup(IntegerField, Exact, lookup_name=\'exactly\'):\n626.             m = ConcertAdmin(Concert, custom_site)\n627.             m.search_fields = [\'group__members__age__exactly\']\n628. \n629.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'20\'})\n630.             request.user = self.superuser\n631.             cl = m.get_changelist_instance(request)\n632.             self.assertCountEqual(cl.queryset, [concert])\n633. \n634.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'21\'})\n635.             request.user = self.superuser\n636.             cl = m.get_changelist_instance(request)\n637.             self.assertCountEqual(cl.queryset, [])\n638. \n639.     def test_custom_lookup_with_pk_shortcut(self):\n640.         self.assertEqual(CharPK._meta.pk.name, \'char_pk\')  # Not equal to \'pk\'.\n641.         m = admin.ModelAdmin(CustomIdUser, custom_site)\n642. \n643.         abc = CharPK.objects.create(char_pk=\'abc\')\n644.         abcd = CharPK.objects.create(char_pk=\'abcd\')\n645.         m = admin.ModelAdmin(CharPK, custom_site)\n646.         m.search_fields = [\'pk__exact\']\n647. \n648.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abc\'})\n649.         request.user = self.superuser\n650.         cl = m.get_changelist_instance(request)\n651.         self.assertCountEqual(cl.queryset, [abc])\n652. \n653.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abcd\'})\n654.         request.user = self.superuser\n655.         cl = m.get_changelist_instance(request)\n656.         self.assertCountEqual(cl.queryset, [abcd])\n657. \n658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):\n659.         """\n660.         If a ManyToManyField is in list_filter but isn\'t in any lookup params,\n661.         the changelist\'s query shouldn\'t have Exists().', start_line_number=603, end_line_number=661), Context(relative_path='tests/admin_changelist/tests.py', content='516.     def test_multiple_search_fields(self):\n517.         """\n518.         All rows containing each of the searched words are returned, where each\n519.         word must be in one of search_fields.\n520.         """\n521.         band_duo = Group.objects.create(name=\'Duo\')\n522.         band_hype = Group.objects.create(name=\'The Hype\')\n523.         mary = Musician.objects.create(name=\'Mary Halvorson\')\n524.         jonathan = Musician.objects.create(name=\'Jonathan Finlayson\')\n525.         band_duo.members.set([mary, jonathan])\n526.         Concert.objects.create(name=\'Tiny desk concert\', group=band_duo)\n527.         Concert.objects.create(name=\'Woodstock concert\', group=band_hype)\n528.         # FK lookup.\n529.         concert_model_admin = ConcertAdmin(Concert, custom_site)\n530.         concert_model_admin.search_fields = [\'group__name\', \'name\']\n531.         # Reverse FK lookup.\n532.         group_model_admin = GroupAdmin(Group, custom_site)\n533.         group_model_admin.search_fields = [\'name\', \'concert__name\', \'members__name\']\n534.         for search_string, result_count in (\n535.             (\'Duo Concert\', 1),\n536.             (\'Tiny Desk Concert\', 1),\n537.             (\'Concert\', 2),\n538.             (\'Other Concert\', 0),\n539.             (\'Duo Woodstock\', 0),\n540.         ):\n541.             with self.subTest(search_string=search_string):\n542.                 # FK lookup.\n543.                 request = self.factory.get(\'/concert/\', data={SEARCH_VAR: search_string})\n544.                 request.user = self.superuser\n545.                 concert_changelist = concert_model_admin.get_changelist_instance(request)\n546.                 self.assertEqual(concert_changelist.queryset.count(), result_count)\n547.                 # Reverse FK lookup.\n548.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n549.                 request.user = self.superuser\n550.                 group_changelist = group_model_admin.get_changelist_instance(request)\n551.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n552.         # Many-to-many lookup.\n553.         for search_string, result_count in (\n554.             (\'Finlayson Duo Tiny\', 1),\n555.             (\'Finlayson\', 1),\n556.             (\'Finlayson Hype\', 0),\n557.             (\'Jonathan Finlayson Duo\', 1),\n558.             (\'Mary Jonathan Duo\', 1),\n559.             (\'Oscar Finlayson Duo\', 0),\n560.         ):\n561.             with self.subTest(search_string=search_string):\n562.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n563.                 request.user = self.superuser\n564.                 group_changelist = group_model_admin.get_changelist_instance(request)\n565.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n566. ', start_line_number=516, end_line_number=566), Context(relative_path='tests/admin_changelist/tests.py', content='492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):\n493.         """\n494.         When using a ManyToMany in search_fields at the second level behind a\n495.         ForeignKey, Exists() must be applied and results shouldn\'t appear more\n496.         than once.\n497.         """\n498.         lead = Musician.objects.create(name=\'Vox\')\n499.         band = Group.objects.create(name=\'The Hype\')\n500.         Concert.objects.create(name=\'Woodstock\', group=band)\n501.         Membership.objects.create(group=band, music=lead, role=\'lead voice\')\n502.         Membership.objects.create(group=band, music=lead, role=\'bass player\')\n503. \n504.         m = ConcertAdmin(Concert, custom_site)\n505.         request = self.factory.get(\'/concert/\', data={SEARCH_VAR: \'vox\'})\n506.         request.user = self.superuser\n507. \n508.         cl = m.get_changelist_instance(request)\n509.         # There\'s only one Concert instance\n510.         self.assertEqual(cl.queryset.count(), 1)\n511.         # Queryset must be deletable.\n512.         self.assertIs(cl.queryset.query.distinct, False)\n513.         cl.queryset.delete()\n514.         self.assertEqual(cl.queryset.count(), 0)\n515. ', start_line_number=492, end_line_number=515), Context(relative_path='tests/admin_changelist/tests.py', content="114.     def test_select_related_preserved_when_multi_valued_in_search_fields(self):\n115.         parent = Parent.objects.create(name='Mary')\n116.         Child.objects.create(parent=parent, name='Danielle')\n117.         Child.objects.create(parent=parent, name='Daniel')\n118. \n119.         m = ParentAdmin(Parent, custom_site)\n120.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})\n121.         request.user = self.superuser\n122. \n123.         cl = m.get_changelist_instance(request)\n124.         self.assertEqual(cl.queryset.count(), 1)\n125.         # select_related is preserved.\n126.         self.assertEqual(cl.queryset.query.select_related, {'child': {}})\n127. ", start_line_number=114, end_line_number=127)]
2025-10-06 00:25:09,057 - thread-139660780025408.app.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-10-06 00:25:09,058 - thread-139660780025408.app.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-10-06 00:25:09,058 - thread-139660780025408.app.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='tests/admin_changelist/tests.py', content='1. import datetime\n2. \n3. from django.contrib import admin\n4. from django.contrib.admin.models import LogEntry\n5. from django.contrib.admin.options import IncorrectLookupParameters\n6. from django.contrib.admin.templatetags.admin_list import pagination\n7. from django.contrib.admin.tests import AdminSeleniumTestCase\n8. from django.contrib.admin.views.main import (\n9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n10. )\n11. from django.contrib.auth.models import User\n12. from django.contrib.contenttypes.models import ContentType\n13. from django.contrib.messages.storage.cookie import CookieStorage\n14. from django.db import connection, models\n15. from django.db.models import F, Field, IntegerField\n16. from django.db.models.functions import Upper\n17. from django.db.models.lookups import Contains, Exact\n18. from django.template import Context, Template, TemplateSyntaxError\n19. from django.test import TestCase, override_settings\n20. from django.test.client import RequestFactory\n21. from django.test.utils import (\n22.     CaptureQueriesContext, isolate_apps, register_lookup,\n23. )\n24. from django.urls import reverse\n25. from django.utils import formats\n26. \n27. from .admin import (\n28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n34.     site as custom_site,\n35. )\n36. from .models import (\n37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n40. )\n41. ', start_line_number=1, end_line_number=41), Context(relative_path='tests/admin_changelist/tests.py', content='54. @override_settings(ROOT_URLCONF="admin_changelist.urls")\n55. class ChangeListTests(TestCase):\n56.     factory = RequestFactory()\n57. \n58.     @classmethod\n59.     def setUpTestData(cls):\n60.         cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n61. \n62.     def _create_superuser(self, username):\n63.         return User.objects.create_superuser(username=username, email=\'a@b.com\', password=\'xxx\')\n64. \n65.     def _mocked_authenticated_request(self, url, user):\n66.         request = self.factory.get(url)\n67.         request.user = user\n68.         return request\n69. ', start_line_number=54, end_line_number=69), Context(relative_path='tests/admin_changelist/tests.py', content='471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):\n472.         """\n473.         Regressions tests for #15819: If a field listed in search_fields\n474.         is a non-unique related object, Exists() must be applied.\n475.         """\n476.         parent = Parent.objects.create(name=\'Mary\')\n477.         Child.objects.create(parent=parent, name=\'Danielle\')\n478.         Child.objects.create(parent=parent, name=\'Daniel\')\n479. \n480.         m = ParentAdmin(Parent, custom_site)\n481.         request = self.factory.get(\'/parent/\', data={SEARCH_VAR: \'daniel\'})\n482.         request.user = self.superuser\n483. \n484.         cl = m.get_changelist_instance(request)\n485.         # Exists() is applied.\n486.         self.assertEqual(cl.queryset.count(), 1)\n487.         # Queryset must be deletable.\n488.         self.assertIs(cl.queryset.query.distinct, False)\n489.         cl.queryset.delete()\n490.         self.assertEqual(cl.queryset.count(), 0)\n491. ', start_line_number=471, end_line_number=491), Context(relative_path='tests/admin_changelist/tests.py', content='603.         concert = Concert.objects.create(name=\'Woodstock\', group=band)\n604. \n605.         m = ConcertAdmin(Concert, custom_site)\n606.         m.search_fields = [\'group__name__cc\']\n607.         with register_lookup(Field, Contains, lookup_name=\'cc\'):\n608.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Hype\'})\n609.             request.user = self.superuser\n610.             cl = m.get_changelist_instance(request)\n611.             self.assertCountEqual(cl.queryset, [concert])\n612. \n613.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Woodstock\'})\n614.             request.user = self.superuser\n615.             cl = m.get_changelist_instance(request)\n616.             self.assertCountEqual(cl.queryset, [])\n617. \n618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):\n619.         hype = Group.objects.create(name=\'The Hype\')\n620.         concert = Concert.objects.create(name=\'Woodstock\', group=hype)\n621.         vox = Musician.objects.create(name=\'Vox\', age=20)\n622.         Membership.objects.create(music=vox, group=hype)\n623.         # Register a custom lookup on IntegerField to ensure that field\n624.         # traversing logic in ModelAdmin.get_search_results() works.\n625.         with register_lookup(IntegerField, Exact, lookup_name=\'exactly\'):\n626.             m = ConcertAdmin(Concert, custom_site)\n627.             m.search_fields = [\'group__members__age__exactly\']\n628. \n629.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'20\'})\n630.             request.user = self.superuser\n631.             cl = m.get_changelist_instance(request)\n632.             self.assertCountEqual(cl.queryset, [concert])\n633. \n634.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'21\'})\n635.             request.user = self.superuser\n636.             cl = m.get_changelist_instance(request)\n637.             self.assertCountEqual(cl.queryset, [])\n638. \n639.     def test_custom_lookup_with_pk_shortcut(self):\n640.         self.assertEqual(CharPK._meta.pk.name, \'char_pk\')  # Not equal to \'pk\'.\n641.         m = admin.ModelAdmin(CustomIdUser, custom_site)\n642. \n643.         abc = CharPK.objects.create(char_pk=\'abc\')\n644.         abcd = CharPK.objects.create(char_pk=\'abcd\')\n645.         m = admin.ModelAdmin(CharPK, custom_site)\n646.         m.search_fields = [\'pk__exact\']\n647. \n648.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abc\'})\n649.         request.user = self.superuser\n650.         cl = m.get_changelist_instance(request)\n651.         self.assertCountEqual(cl.queryset, [abc])\n652. \n653.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abcd\'})\n654.         request.user = self.superuser\n655.         cl = m.get_changelist_instance(request)\n656.         self.assertCountEqual(cl.queryset, [abcd])\n657. \n658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):\n659.         """\n660.         If a ManyToManyField is in list_filter but isn\'t in any lookup params,\n661.         the changelist\'s query shouldn\'t have Exists().', start_line_number=603, end_line_number=661), Context(relative_path='tests/admin_changelist/tests.py', content='516.     def test_multiple_search_fields(self):\n517.         """\n518.         All rows containing each of the searched words are returned, where each\n519.         word must be in one of search_fields.\n520.         """\n521.         band_duo = Group.objects.create(name=\'Duo\')\n522.         band_hype = Group.objects.create(name=\'The Hype\')\n523.         mary = Musician.objects.create(name=\'Mary Halvorson\')\n524.         jonathan = Musician.objects.create(name=\'Jonathan Finlayson\')\n525.         band_duo.members.set([mary, jonathan])\n526.         Concert.objects.create(name=\'Tiny desk concert\', group=band_duo)\n527.         Concert.objects.create(name=\'Woodstock concert\', group=band_hype)\n528.         # FK lookup.\n529.         concert_model_admin = ConcertAdmin(Concert, custom_site)\n530.         concert_model_admin.search_fields = [\'group__name\', \'name\']\n531.         # Reverse FK lookup.\n532.         group_model_admin = GroupAdmin(Group, custom_site)\n533.         group_model_admin.search_fields = [\'name\', \'concert__name\', \'members__name\']\n534.         for search_string, result_count in (\n535.             (\'Duo Concert\', 1),\n536.             (\'Tiny Desk Concert\', 1),\n537.             (\'Concert\', 2),\n538.             (\'Other Concert\', 0),\n539.             (\'Duo Woodstock\', 0),\n540.         ):\n541.             with self.subTest(search_string=search_string):\n542.                 # FK lookup.\n543.                 request = self.factory.get(\'/concert/\', data={SEARCH_VAR: search_string})\n544.                 request.user = self.superuser\n545.                 concert_changelist = concert_model_admin.get_changelist_instance(request)\n546.                 self.assertEqual(concert_changelist.queryset.count(), result_count)\n547.                 # Reverse FK lookup.\n548.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n549.                 request.user = self.superuser\n550.                 group_changelist = group_model_admin.get_changelist_instance(request)\n551.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n552.         # Many-to-many lookup.\n553.         for search_string, result_count in (\n554.             (\'Finlayson Duo Tiny\', 1),\n555.             (\'Finlayson\', 1),\n556.             (\'Finlayson Hype\', 0),\n557.             (\'Jonathan Finlayson Duo\', 1),\n558.             (\'Mary Jonathan Duo\', 1),\n559.             (\'Oscar Finlayson Duo\', 0),\n560.         ):\n561.             with self.subTest(search_string=search_string):\n562.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n563.                 request.user = self.superuser\n564.                 group_changelist = group_model_admin.get_changelist_instance(request)\n565.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n566. ', start_line_number=516, end_line_number=566), Context(relative_path='tests/admin_changelist/tests.py', content='492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):\n493.         """\n494.         When using a ManyToMany in search_fields at the second level behind a\n495.         ForeignKey, Exists() must be applied and results shouldn\'t appear more\n496.         than once.\n497.         """\n498.         lead = Musician.objects.create(name=\'Vox\')\n499.         band = Group.objects.create(name=\'The Hype\')\n500.         Concert.objects.create(name=\'Woodstock\', group=band)\n501.         Membership.objects.create(group=band, music=lead, role=\'lead voice\')\n502.         Membership.objects.create(group=band, music=lead, role=\'bass player\')\n503. \n504.         m = ConcertAdmin(Concert, custom_site)\n505.         request = self.factory.get(\'/concert/\', data={SEARCH_VAR: \'vox\'})\n506.         request.user = self.superuser\n507. \n508.         cl = m.get_changelist_instance(request)\n509.         # There\'s only one Concert instance\n510.         self.assertEqual(cl.queryset.count(), 1)\n511.         # Queryset must be deletable.\n512.         self.assertIs(cl.queryset.query.distinct, False)\n513.         cl.queryset.delete()\n514.         self.assertEqual(cl.queryset.count(), 0)\n515. ', start_line_number=492, end_line_number=515), Context(relative_path='tests/admin_changelist/tests.py', content="114.     def test_select_related_preserved_when_multi_valued_in_search_fields(self):\n115.         parent = Parent.objects.create(name='Mary')\n116.         Child.objects.create(parent=parent, name='Danielle')\n117.         Child.objects.create(parent=parent, name='Daniel')\n118. \n119.         m = ParentAdmin(Parent, custom_site)\n120.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})\n121.         request.user = self.superuser\n122. \n123.         cl = m.get_changelist_instance(request)\n124.         self.assertEqual(cl.queryset.count(), 1)\n125.         # select_related is preserved.\n126.         self.assertEqual(cl.queryset.query.select_related, {'child': {}})\n127. ", start_line_number=114, end_line_number=127)]
2025-10-06 00:25:09,058 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\nUnnecessary joins in admin changelist query\n\nIssue description: \nDescription\n\t\nDjango 1.2.5\nModels:\nclass Client(models.Model):\n\tname = models.CharField(_(\'name\'), max_length=256)\n\tname2 = models.CharField(_(\'unofficial or obsolete name\'), max_length=256, blank=True, null=True)\n\tcontact_person = models.CharField(_(\'contact person\'), max_length=256, blank=True, null=True)\n\t...\nclass ClientOffice(models.Model):\n\tname = models.CharField(_(\'name\'), max_length=256)\n\tname2 = models.CharField(_(\'unofficial or obsolete name\'), max_length=256, blank=True, null=True)\n\t...\n\tclient = models.ForeignKey(Client, verbose_name=_(\'client\'))\n\t...\nand admin options like these:\nclass ClientAdmin(admin.ModelAdmin):\n\tsearch_fields = (\'name\', \'name2\', \'contact_person\', \'clientoffice__name\', \'clientoffice__name2\')\n\t...\nNumbers:\n>>> Client.objects.count()\n10907\n>>> ClientOffice.objects.count()\n16952\nNow, if we try searching for clients in admin by a search query containig several words (>3), got django/admin stalled.\nThe problem is going to be that each word in the search query leads to additional JOIN in final SQL query beacause of qs = qs.filter(...) pattern. The attached patch is for Django 1.2.5, but adopting for the current SVN trunk is trivial.\n\nIssue comments:\n\n\nBug reproducing context:\nFile: tests/admin_changelist/tests.py\nLine number range: 1 - 41\nContent:\n1. import datetime\n2. \n3. from django.contrib import admin\n4. from django.contrib.admin.models import LogEntry\n5. from django.contrib.admin.options import IncorrectLookupParameters\n6. from django.contrib.admin.templatetags.admin_list import pagination\n7. from django.contrib.admin.tests import AdminSeleniumTestCase\n8. from django.contrib.admin.views.main import (\n9.     ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n10. )\n11. from django.contrib.auth.models import User\n12. from django.contrib.contenttypes.models import ContentType\n13. from django.contrib.messages.storage.cookie import CookieStorage\n14. from django.db import connection, models\n15. from django.db.models import F, Field, IntegerField\n16. from django.db.models.functions import Upper\n17. from django.db.models.lookups import Contains, Exact\n18. from django.template import Context, Template, TemplateSyntaxError\n19. from django.test import TestCase, override_settings\n20. from django.test.client import RequestFactory\n21. from django.test.utils import (\n22.     CaptureQueriesContext, isolate_apps, register_lookup,\n23. )\n24. from django.urls import reverse\n25. from django.utils import formats\n26. \n27. from .admin import (\n28.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n29.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n30.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n31.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n32.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n33.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n34.     site as custom_site,\n35. )\n36. from .models import (\n37.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n38.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n39.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n40. )\n41. \n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 54 - 69\nContent:\n54. @override_settings(ROOT_URLCONF="admin_changelist.urls")\n55. class ChangeListTests(TestCase):\n56.     factory = RequestFactory()\n57. \n58.     @classmethod\n59.     def setUpTestData(cls):\n60.         cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n61. \n62.     def _create_superuser(self, username):\n63.         return User.objects.create_superuser(username=username, email=\'a@b.com\', password=\'xxx\')\n64. \n65.     def _mocked_authenticated_request(self, url, user):\n66.         request = self.factory.get(url)\n67.         request.user = user\n68.         return request\n69. \n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 471 - 491\nContent:\n471.     def test_no_duplicates_for_non_unique_related_object_in_search_fields(self):\n472.         """\n473.         Regressions tests for #15819: If a field listed in search_fields\n474.         is a non-unique related object, Exists() must be applied.\n475.         """\n476.         parent = Parent.objects.create(name=\'Mary\')\n477.         Child.objects.create(parent=parent, name=\'Danielle\')\n478.         Child.objects.create(parent=parent, name=\'Daniel\')\n479. \n480.         m = ParentAdmin(Parent, custom_site)\n481.         request = self.factory.get(\'/parent/\', data={SEARCH_VAR: \'daniel\'})\n482.         request.user = self.superuser\n483. \n484.         cl = m.get_changelist_instance(request)\n485.         # Exists() is applied.\n486.         self.assertEqual(cl.queryset.count(), 1)\n487.         # Queryset must be deletable.\n488.         self.assertIs(cl.queryset.query.distinct, False)\n489.         cl.queryset.delete()\n490.         self.assertEqual(cl.queryset.count(), 0)\n491. \n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 603 - 661\nContent:\n603.         concert = Concert.objects.create(name=\'Woodstock\', group=band)\n604. \n605.         m = ConcertAdmin(Concert, custom_site)\n606.         m.search_fields = [\'group__name__cc\']\n607.         with register_lookup(Field, Contains, lookup_name=\'cc\'):\n608.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Hype\'})\n609.             request.user = self.superuser\n610.             cl = m.get_changelist_instance(request)\n611.             self.assertCountEqual(cl.queryset, [concert])\n612. \n613.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'Woodstock\'})\n614.             request.user = self.superuser\n615.             cl = m.get_changelist_instance(request)\n616.             self.assertCountEqual(cl.queryset, [])\n617. \n618.     def test_spanning_relations_with_custom_lookup_in_search_fields(self):\n619.         hype = Group.objects.create(name=\'The Hype\')\n620.         concert = Concert.objects.create(name=\'Woodstock\', group=hype)\n621.         vox = Musician.objects.create(name=\'Vox\', age=20)\n622.         Membership.objects.create(music=vox, group=hype)\n623.         # Register a custom lookup on IntegerField to ensure that field\n624.         # traversing logic in ModelAdmin.get_search_results() works.\n625.         with register_lookup(IntegerField, Exact, lookup_name=\'exactly\'):\n626.             m = ConcertAdmin(Concert, custom_site)\n627.             m.search_fields = [\'group__members__age__exactly\']\n628. \n629.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'20\'})\n630.             request.user = self.superuser\n631.             cl = m.get_changelist_instance(request)\n632.             self.assertCountEqual(cl.queryset, [concert])\n633. \n634.             request = self.factory.get(\'/\', data={SEARCH_VAR: \'21\'})\n635.             request.user = self.superuser\n636.             cl = m.get_changelist_instance(request)\n637.             self.assertCountEqual(cl.queryset, [])\n638. \n639.     def test_custom_lookup_with_pk_shortcut(self):\n640.         self.assertEqual(CharPK._meta.pk.name, \'char_pk\')  # Not equal to \'pk\'.\n641.         m = admin.ModelAdmin(CustomIdUser, custom_site)\n642. \n643.         abc = CharPK.objects.create(char_pk=\'abc\')\n644.         abcd = CharPK.objects.create(char_pk=\'abcd\')\n645.         m = admin.ModelAdmin(CharPK, custom_site)\n646.         m.search_fields = [\'pk__exact\']\n647. \n648.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abc\'})\n649.         request.user = self.superuser\n650.         cl = m.get_changelist_instance(request)\n651.         self.assertCountEqual(cl.queryset, [abc])\n652. \n653.         request = self.factory.get(\'/\', data={SEARCH_VAR: \'abcd\'})\n654.         request.user = self.superuser\n655.         cl = m.get_changelist_instance(request)\n656.         self.assertCountEqual(cl.queryset, [abcd])\n657. \n658.     def test_no_exists_for_m2m_in_list_filter_without_params(self):\n659.         """\n660.         If a ManyToManyField is in list_filter but isn\'t in any lookup params,\n661.         the changelist\'s query shouldn\'t have Exists().\n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 516 - 566\nContent:\n516.     def test_multiple_search_fields(self):\n517.         """\n518.         All rows containing each of the searched words are returned, where each\n519.         word must be in one of search_fields.\n520.         """\n521.         band_duo = Group.objects.create(name=\'Duo\')\n522.         band_hype = Group.objects.create(name=\'The Hype\')\n523.         mary = Musician.objects.create(name=\'Mary Halvorson\')\n524.         jonathan = Musician.objects.create(name=\'Jonathan Finlayson\')\n525.         band_duo.members.set([mary, jonathan])\n526.         Concert.objects.create(name=\'Tiny desk concert\', group=band_duo)\n527.         Concert.objects.create(name=\'Woodstock concert\', group=band_hype)\n528.         # FK lookup.\n529.         concert_model_admin = ConcertAdmin(Concert, custom_site)\n530.         concert_model_admin.search_fields = [\'group__name\', \'name\']\n531.         # Reverse FK lookup.\n532.         group_model_admin = GroupAdmin(Group, custom_site)\n533.         group_model_admin.search_fields = [\'name\', \'concert__name\', \'members__name\']\n534.         for search_string, result_count in (\n535.             (\'Duo Concert\', 1),\n536.             (\'Tiny Desk Concert\', 1),\n537.             (\'Concert\', 2),\n538.             (\'Other Concert\', 0),\n539.             (\'Duo Woodstock\', 0),\n540.         ):\n541.             with self.subTest(search_string=search_string):\n542.                 # FK lookup.\n543.                 request = self.factory.get(\'/concert/\', data={SEARCH_VAR: search_string})\n544.                 request.user = self.superuser\n545.                 concert_changelist = concert_model_admin.get_changelist_instance(request)\n546.                 self.assertEqual(concert_changelist.queryset.count(), result_count)\n547.                 # Reverse FK lookup.\n548.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n549.                 request.user = self.superuser\n550.                 group_changelist = group_model_admin.get_changelist_instance(request)\n551.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n552.         # Many-to-many lookup.\n553.         for search_string, result_count in (\n554.             (\'Finlayson Duo Tiny\', 1),\n555.             (\'Finlayson\', 1),\n556.             (\'Finlayson Hype\', 0),\n557.             (\'Jonathan Finlayson Duo\', 1),\n558.             (\'Mary Jonathan Duo\', 1),\n559.             (\'Oscar Finlayson Duo\', 0),\n560.         ):\n561.             with self.subTest(search_string=search_string):\n562.                 request = self.factory.get(\'/group/\', data={SEARCH_VAR: search_string})\n563.                 request.user = self.superuser\n564.                 group_changelist = group_model_admin.get_changelist_instance(request)\n565.                 self.assertEqual(group_changelist.queryset.count(), result_count)\n566. \n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 492 - 515\nContent:\n492.     def test_no_duplicates_for_many_to_many_at_second_level_in_search_fields(self):\n493.         """\n494.         When using a ManyToMany in search_fields at the second level behind a\n495.         ForeignKey, Exists() must be applied and results shouldn\'t appear more\n496.         than once.\n497.         """\n498.         lead = Musician.objects.create(name=\'Vox\')\n499.         band = Group.objects.create(name=\'The Hype\')\n500.         Concert.objects.create(name=\'Woodstock\', group=band)\n501.         Membership.objects.create(group=band, music=lead, role=\'lead voice\')\n502.         Membership.objects.create(group=band, music=lead, role=\'bass player\')\n503. \n504.         m = ConcertAdmin(Concert, custom_site)\n505.         request = self.factory.get(\'/concert/\', data={SEARCH_VAR: \'vox\'})\n506.         request.user = self.superuser\n507. \n508.         cl = m.get_changelist_instance(request)\n509.         # There\'s only one Concert instance\n510.         self.assertEqual(cl.queryset.count(), 1)\n511.         # Queryset must be deletable.\n512.         self.assertIs(cl.queryset.query.distinct, False)\n513.         cl.queryset.delete()\n514.         self.assertEqual(cl.queryset.count(), 0)\n515. \n\n\nFile: tests/admin_changelist/tests.py\nLine number range: 114 - 127\nContent:\n114.     def test_select_related_preserved_when_multi_valued_in_search_fields(self):\n115.         parent = Parent.objects.create(name=\'Mary\')\n116.         Child.objects.create(parent=parent, name=\'Danielle\')\n117.         Child.objects.create(parent=parent, name=\'Daniel\')\n118. \n119.         m = ParentAdmin(Parent, custom_site)\n120.         request = self.factory.get(\'/parent/\', data={SEARCH_VAR: \'daniel\'})\n121.         request.user = self.superuser\n122. \n123.         cl = m.get_changelist_instance(request)\n124.         self.assertEqual(cl.queryset.count(), 1)\n125.         # select_related is preserved.\n126.         self.assertEqual(cl.queryset.query.select_related, {\'child\': {}})\n127. \n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-10-06 00:26:28,968 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='```python\nimport datetime\n\nfrom django.contrib import admin\nfrom django.contrib.admin.models import LogEntry\nfrom django.contrib.admin.options import IncorrectLookupParameters\nfrom django.contrib.admin.templatetags.admin_list import pagination\nfrom django.contrib.admin.tests import AdminSeleniumTestCase\nfrom django.contrib.admin.views.main import (\n    ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n)\nfrom django.contrib.auth.models import User\nfrom django.contrib.contenttypes.models import ContentType\nfrom django.contrib.messages.storage.cookie import CookieStorage\nfrom django.db import connection, models\nfrom django.db.models import F, Field, IntegerField\nfrom django.db.models.functions import Upper\nfrom django.db.models.lookups import Contains, Exact\nfrom django.template import Context, Template, TemplateSyntaxError\nfrom django.test import TestCase, override_settings\nfrom django.test.client import RequestFactory\nfrom django.test.utils import (\n    CaptureQueriesContext, isolate_apps, register_lookup,\n)\nfrom django.urls import reverse\nfrom django.utils import formats\n\nfrom .admin import (\n    BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n    CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n    DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n    DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n    FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n    NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n    site as custom_site,\n)\nfrom .models import (\n    Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n    Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n    Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n)\n\n\n# Models from the bug report, defined here for this test case.\n# The test runner will automatically create tables for them.\nclass Client(models.Model):\n    name = models.CharField(\'name\', max_length=256)\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\n    contact_person = models.CharField(\'contact person\', max_length=256, blank=True, null=True)\n\n    class Meta:\n        app_label = \'admin_changelist\'\n\n\nclass ClientOffice(models.Model):\n    name = models.CharField(\'name\', max_length=256)\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\n    client = models.ForeignKey(Client, on_delete=models.CASCADE, verbose_name=\'client\')\n\n    class Meta:\n        app_label = \'admin_changelist\'\n\n\n@isolate_apps(\'admin_changelist\')\n@override_settings(ROOT_URLCONF="admin_changelist.urls")\nclass ChangeListSearchTests(TestCase):\n    factory = RequestFactory()\n\n    @classmethod\n    def setUpTestData(cls):\n        cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n        client = Client.objects.create(name=\'Some Client\')\n        ClientOffice.objects.create(client=client, name=\'foo bar office\')\n\n    def test_unnecessary_joins_in_changelist_search(self):\n        """\n        Searching with multiple terms on a related field shouldn\'t create\n        unnecessary joins.\n        """\n        class ClientAdmin(admin.ModelAdmin):\n            search_fields = (\'clientoffice__name\',)\n\n        m = ClientAdmin(Client, custom_site)\n        request = self.factory.get(\'/\', data={SEARCH_VAR: \'foo bar\'})\n        request.user = self.superuser\n\n        with CaptureQueriesContext(connection) as context:\n            cl = m.get_changelist_instance(request)\n            # Evaluating the queryset will run the query.\n            # This also sanity-checks that the result is correct.\n            self.assertEqual(len(cl.queryset), 1)\n\n        # The bug creates a JOIN for each search term ("foo", "bar").\n        # With the fix, there should be only one JOIN to the clientoffice table.\n        # Django uses LEFT OUTER JOIN for these lookups.\n        self.assertEqual(context.captured_queries[0][\'sql\'].upper().count(\'LEFT OUTER JOIN\'), 1)\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 11605, 'end_index': 11891, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 27984, 'end_index': 28270, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 28633, 'end_index': 28905, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 5103, 'candidates_token_count': 1053, 'total_token_count': 13131, 'prompt_tokens_details': [{'modality': 1, 'token_count': 5103}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 1053}], 'thoughts_token_count': 6975, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0122551406324192, 'model_name': 'gemini-2.5-pro'} id='run--1d201a1d-b2d5-40b8-aa30-eee6e7c93d42-0' usage_metadata={'input_tokens': 5103, 'output_tokens': 1053, 'total_tokens': 13131, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 6975}}
2025-10-06 00:26:46,084 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'create_file', 'arguments': '{"content": "import datetime\\n\\nfrom django.contrib import admin\\nfrom django.contrib.admin.models import LogEntry\\nfrom django.contrib.admin.options import IncorrectLookupParameters\\nfrom django.contrib.admin.templatetags.admin_list import pagination\\nfrom django.contrib.admin.tests import AdminSeleniumTestCase\\nfrom django.contrib.admin.views.main import (\\n    ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\\n)\\nfrom django.contrib.auth.models import User\\nfrom django.contrib.contenttypes.models import ContentType\\nfrom django.contrib.messages.storage.cookie import CookieStorage\\nfrom django.db import connection, models\\nfrom django.db.models import F, Field, IntegerField\\nfrom django.db.models.functions import Upper\\nfrom django.db.models.lookups import Contains, Exact\\nfrom django.template import Context, Template, TemplateSyntaxError\\nfrom django.test import TestCase, override_settings\\nfrom django.test.client import RequestFactory\\nfrom django.test.utils import (\\n    CaptureQueriesContext, isolate_apps, register_lookup,\\n)\\nfrom django.urls import reverse\\nfrom django.utils import formats\\n\\nfrom .admin import (\\n    BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\\n    CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\\n    DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\\n    DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\\n    FilteredChildAdmin, GroupAdmin, InvitationAdmin,\\n    NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\\n    site as custom_site,\\n)\\nfrom .models import (\\n    Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\\n    Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\\n    Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\\n)\\n\\n\\n# Models from the bug report, defined here for this test case.\\n# The test runner will automatically create tables for them.\\nclass Client(models.Model):\\n    name = models.CharField(\'name\', max_length=256)\\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\\n    contact_person = models.CharField(\'contact person\', max_length=256, blank=True, null=True)\\n\\n    class Meta:\\n        app_label = \'admin_changelist\'\\n\\n\\nclass ClientOffice(models.Model):\\n    name = models.CharField(\'name\', max_length=256)\\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\\n    client = models.ForeignKey(Client, on_delete=models.CASCADE, verbose_name=\'client\')\\n\\n    class Meta:\\n        app_label = \'admin_changelist\'\\n\\n\\n@isolate_apps(\'admin_changelist\')\\n@override_settings(ROOT_URLCONF=\\"admin_changelist.urls\\")\\nclass ChangeListSearchTests(TestCase):\\n    factory = RequestFactory()\\n\\n    @classmethod\\n    def setUpTestData(cls):\\n        cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\\n        client = Client.objects.create(name=\'Some Client\')\\n        ClientOffice.objects.create(client=client, name=\'foo bar office\')\\n\\n    def test_unnecessary_joins_in_changelist_search(self):\\n        \\"\\"\\"\\n        Searching with multiple terms on a related field shouldn\'t create\\n        unnecessary joins.\\n        \\"\\"\\"\\n        class ClientAdmin(admin.ModelAdmin):\\n            search_fields = (\'clientoffice__name\',)\\n\\n        m = ClientAdmin(Client, custom_site)\\n        request = self.factory.get(\'/\', data={SEARCH_VAR: \'foo bar\'})\\n        request.user = self.superuser\\n\\n        with CaptureQueriesContext(connection) as context:\\n            cl = m.get_changelist_instance(request)\\n            # Evaluating the queryset will run the query.\\n            # This also sanity-checks that the result is correct.\\n            self.assertEqual(len(cl.queryset), 1)\\n\\n        # The bug creates a JOIN for each search term (\\"foo\\", \\"bar\\").\\n        # With the fix, there should be only one JOIN to the clientoffice table.\\n        # Django uses LEFT OUTER JOIN for these lookups.\\n        self.assertEqual(context.captured_queries[0][\'sql\'].upper().count(\'LEFT OUTER JOIN\'), 1)\\n", "relative_path": "tests/admin_changelist/test_search.py"}'}, '__gemini_function_call_thought_signatures__': {'c0e7c98b-6772-4285-8003-7caeea31f46b': 'CrgtAR/Mhba+RAxS5l3TIk53B39Z+h6i2Xmzg/Snu/+uPF/kvsMcudfFILTcdbpJLiaEtkepP77O821ugqexP8zc3Diub07TED7apHbMTR6Pnndrd/g+/jVLc/5mmu4k6bztUAte+JHr8tqV7IuN7RJPQ477kbR+f77LVOHp7MxZo2WOyx32Ib50u08yGR+kDvDgl9yLh2nKgsfkucWJJCz6CAlZHexW94xSUQOJD1Wh8pVaehtQyR7peU8f9u2P2riXjALkPB2bFOtDPdu/rPd5MNtPsghIJeM5KRsfBrrg1aKYxjg514sSojebZNgQgMguEGhE1Gz/MV1+cKRAwyaO9b2NqofaQIwCA0p1+CPSn9UbJIrZaFV0ZopKARs2O+myyF6j9DuDhfeg4/iVwFsdjYIUlKGsfCrKv9D/ECIN69Juefflo4miOzSyaJsCkj9A2tPl+7hw6hoV7u/SB/qCZQsASzMIgRly69oWbrZcDNV1Wv7yasw6cyqj/rmEonz+qdY/MzEPFwjh02taYph0HRemaF60PnuSIoKbmdQNvQ1r5ugZuujKZmMvML/+hR83W+XJ0Y9Uj/kk8TPdaVA/KWNOPbpr41vR39YbD7e23ts44qNxRy2dTVebKgpmocpnQGML0k1fhkmhCB8dWyOKviiX6kwctWOs50aMvigmXEIzwe/nOSczlE4d90cLM1ee28hic2VaapopwqGm2EiOejJw8cc24aoHkwOWr8RUWkfarRwJuSQqf7yj9RKJdAmrM16Niq59CAJdq3OP68VFivgOX2ahX8O5/ICY6PGp+vsbi8JF5mjKJ6zzzI30boa4iEpnOGVIAY5gz2tPSNieAbvI+6EiaQU/CfZGnnKv+3Tev4dVYoRmrUgG+wUfo4dbwlKg8joYfBVE+I981Z+V0ks6FwqKGoeIPcnI/S1IURYbhzexs9AgHRrPt70ywtL0TsoJLwhRrNa70WdqxjMX9oOk2f0yqdUdKaErbbNzzU61vT5KuWF/B8jBaC4PEsbUh+PMhODAylu5JcjowBBys8Acp0exMrXoB2vqwOgcB4m/1ukaC0/D2p+WqFpXdNi3dQ4hdkDIncmBqmxzMn3zImCfTBe+qRHD3250z7Lf3UU+Fv0K1qtMNSmOvo/HI5P/k9vMY7mL9+PUGZ18pkYRiAZCDn42F7moovspC5+70/Iw2ppr+hqiJaeNsXMuXKbSYTRB3au7bMhBdEoBrpPwH4Zzr2oqbRfYLALxLgPWYJOj6Ldy0u5SoII1gZ6DLdTZ0y+q6QYcbK3F+btJ8i/6oBWJgZZgJyxXyPPTGaAn2EZfQnR/y+Xn00N0tp/VKdNlz8JN9NBVaZDKD83u+aVE/b6Yex1/ABXseArP9o44XEIf24e40JfvZ6lBpFH6qHeKOGtHT/r+FINuiPj74QopSYbZ5O+L4afig/j6IuGMduUdaKCfv8JyL0lo0/8TaVoOXmungSQKUpMd+mChX30oV248XdFb1nUSI7/dGtkFZXP9AOCZRMuGlelTPbyGG7qtYrhNKU9N6Wg8ehxZQnHTM4Xb4wOzQ5kF+DyzIwoEeGUsOrwn/+4qrUitcKZ/zoaMNVIIgI6RhSjABMLFr9h6263+YyAYmrRuaVN6tmT4EBWwI5J5L9OUlTX+kTVOxSU5W0M5qMoAncShmjsT3pucou8OAmmc3upS70nLadC2h58f4lEVmN9zYjKDJdTsNhfG9CVSAcjA1KpkjGqXmiyIlaC/y3RTWb9pHAcAVMq0Sm1RoG+b5dXBKKvDtohihcAtagAK8n8xfFKYklZXgGOFNI0/XMBUPN90FivHfILPTJB+ZyN0atPvnxUdiETcce2af6QB9xSjZeelHvZ/u55bDc/7m19JGhnMdkwoTgiJZD1orjjrwTo1Lg2lIGCDucKEHe+li6WKPl3LfnJAkfhsHU9KOO3TKe+FpZG+UD+qU/yMKXaoedV5/WYNCktJi7Kh2GjmN8MkjurdXJp7/jVVFsWDPhO6LAH5c2aZdTylSuvX7Zbue0eXrAzFwRpxJhv7Y7PV1v1xrKFJJsEmG61jQzlPW21RRqOwyAzGiU889dIRQxbRa4uDhL1uPn9zM6K+8rZ7aUOPhflFFhuruokBvPA4wU8d3PrTjeDbRcXdwQvqgeQFUscQyJ1X8MWW58A7IWyB2+i7GqftvJkct1R1XJtaUATUttxgAz0kvW0FIuHaGRPi8mQnY5qulkQgU/gLnyFP3AXCl9t8fweFNPnoaYPxmESh5CoCWUteR3E1Xc18SKmy8Al445VXt0pzfAHzeXWeSzrmZx3IRCNLi/oew0jd9GqVwDp9Ot91bNleIBcQqsG2+09WshlcjxoWXqpwLlTmxSSZmK5pN+2WaYvKiT56/3bmNO0F4K87G42Hr7WA277H8JePEIV8G0SzvFX0e7rBFPRDRC9JAFgqk/G8zue2oZjsW+fEP8WJvpX0LfWZsSgUfX2Vibt3vg5ENHAbWRJzMvq2yd4xawx7l4OWhrTtj3kLxMUfRn8FKkO0vUehEYKPTRfprFwpTrP6lye6+LTqp+CC64bLSZGQFDgwf1FXyignp0fMJFhF34XyIX8dWhJX0zYhxbAqytUl3TlbeOrn/LHaZVC/YvGJopLMAoUp/HTq/GUXJmxqlyaFfuKECpQ0Z3OUa10ZpwLnNiJWpcMg5KpHBP608OWm4N/12r6ekgYxcyK7ynhcHtctDaqnGPC9JTzMPY6PLleP9kBZUvveNKqM56H3wmUshg9TtcXG0UE7jloli9PrDKppsAoS3BTlKw5YzurYNA2GG6TS+5KfsespOxhPUydWAIpFQyiyMSeLmrJRyd4DNSPhm9oq1FSM7ZsFkYgS/8OnsJ5m3dMS5BwK7IVW0zj8gVIDTW6HHf3isQjymU9oArr85HWNWq/bDjdk7Kkb/Ir/d7Uy50/v0rc5n0JsOsRGy8McU5l5IEeUXWy1ERo3DKBaJVuI8RhJy/sa7PY8uqadBOgg7SAGZoLQE9e+YGIbea5/mNbtAVBBaJBGve+sg0Zv/fkS/1FFNNBax3yk5mWb6u9DmhlT3GD5Zj7SD4fIZYk24cuhQSjCSaBEcvyIGTdJalsTyUf9BrUpHmEBKh8p0zYeSZq76ZCeKl+NmkDUCOLt7cS+mEANiLbM/O3NcFqt4lYP4IWCf6ieqNYoeyYBhp5Xxlw9ZZVjvTRq/JFXlI36/d48HUgSMXKbsesG2kFP0l16ZR8tuChA+0NOALo9DsU7SkvGBCRGASiJESukTsv1IMDoKc547EcP48tlAfGUBZVQOFK+80UI1h4veS0aOiynLUg8/uQeSxhL+QAaaH7fvafKVyJM76jjSmpn/TDxEkQ34Y6E0SvRtvi2ms1Iqu7fhdR0lP5rara2RQwPVtG+pwj9Xbi/Bcq209FagGWK2M+BZ9LYQPMhjZyeFnEPcdALwup7fHN7geTLgFvCOH6VLDmbG4/KY+E2EJDs63MHp8KU6pyaS3CDqqj9AXdNGOf0gkLOV7NtLubNLlYbI4j68dIv9AAQmQs6nu5kbJb9tfHnwmQLcR6Hhcptcd2wHjBVssRrpGK2Fn0Kiyuz4gnRtQlxpMuwZKE2iXO5ui8RKjKOfdTXEuX3ge4g7wzuCPYMZShOoV/xUUcLXMCfJUf14M5SFUsNsxDLLvPFX/Nz0FwP0snXr+iO534YF3oK5286PwHfm20zTMLJ7BE5NYsOWl9P2iUGYTfRtsUEWYBh8fRI0WW1sWm86HjKFU8VV6IiJlmGH2wCF5Np+FfvYo1G1RCYprIx7HCV6YzUY60EO+bgAuj3eqiIOuzjepedfHYNsnYyhrRVo0jmrdmAhhklCjfptGJUGI57Z2kiVY5ottsOhIca2cAvV+/MSSB8OizHJmhcqOriLsQ+Nwb02Ttng0pnJpQZW9E+MIMkhE3YYfnjJc2cMCiyumV+ZkPPSUDgfkR5CC/aBaGssHCav37SKJextDcM95/omq3B2KWETGUXrE3XnZICZCbeYA98oDa8V1rBW4m5AaBOmDlFHN8LElBHwhDPk/xEiom6egiQiVEDC1DT9KbXobhzWDqEIoxUdxVEaVpLx9Ibcrj0/7uz08fecmVrgafe5OzSr8fj675PDl1wwH+UbDmiMQ0tBXnm9SIkUtiTsmqsvt9jwMoh01HKLf4dBoIqzPrGrqOaAATNBtWO1oRocbabAI2Bc9Rgr74V0gVRTq114PXyH9AoE1v9Orif++2W00Mg0sLyZuNKr+CciSJDIUR7ynY1Vnxp9YEyCnXIlV7APenVO22/810ahT9IqFPRYm9VqpsHCfyQJCOhhpVPX/L9tcTRskkNePOOUU7P2IYfGhaDAstKTtNuxxLlW8VzSrS41lybpJnjGl7GFHzioWBCZdn2CdFZgASxU1XRgJo+m95pBnlMXlb3PQZFedLW+Oao5oSRXyNtVbVERumQgoqufGzTgXj05yK33uQ/JqNgxpAtDMH65QmvB6VspW0S84YwoADfBac2qGBd+LCwF982CbVocluUfXUqz55DwFqCVorJ9bkqXOl64Ea4GkIJTBw4GPAsf3n7JeH0TwM6LdBip3tR+xsHW1LUde8pFH4i4RH4ZqcYgVMkLFzY2ThyN43AveSAQZYU+usTYwfOY58P/zmvh0ctJ8pZr2Uo1eO5H1P8ajrzbHZgDV/spJesl93Bcvl2PFEUjlMOjdUhFNJokyuZEmlQQM+GVNX6JXFwk+N/dqVWNNvDBu6pBDYmI3l25A8wJrmk4RZ0dzxo+yR3u3GALBj30WhhXxY3I4cM11wLr8T1lisab8YPntDe7XDC6eEPYM8agUQVn70r27hcOjsOdtw2oY5A/8hsXJkWvJ8/5T2oPgucqRPVmoE/LzIt4S6qOQfwyDR9EB6RtI2lqcvQ4fBkouQx2h3y+x3uPq4GN1S/J1xk+3UgYQ0L+Ey0Fyu9suqieqj3VMQcZKNSs9UbnjF3jH8pPr8ifGFzzmPCXydMo9DqFg2jbrTvt2IPNtZvdUqaB06J4PAyoUfOuCn8sN3QwyKcAZhV5bXvQRsnOmmW3SES4jLJcFhpKled8yzYQArQ8+nHpJdnR/IBFZPKhuaNeTS8Nz85WjFAL5oqwO4Z7HCXB3VjtDm9ftkUglZXNVhkpvOz+jM+pP6Me1jGMDsjMTvOG+OXhPdTAlJp1kTnT5hM4cMVF0oK5w+09cLOOVcj1Z8ASPlGusr060hbpXoEHOzSkD5mLsCvwO+IjN2JgYrva99pjCTT/CeVbuBIoGaF4td2MbaAtGlP5Vst+/6wKcees0MqSI+u7lP3/AqYrpPU2aO+HJ1OGJ6Nbob3f6jATPt9z6May6TZyzYQp12T7irlvRploH3+rh/pJpBEXmbKV9Km6a0VxdkUNCgyzQ0b33GSZDFfFaVzYTWqWEbuP0ytknNI7LM6hp5lKh5F6w/5w1zL5Q8YouiI9bpwo9Iaxy4w0V0GS0xAoj2h3WKZCzD7Qot5hLaEsEzBqVKZOPP/H2k+IabPi14vf5TVzhcsJV06zg1yHnV6tAW7LDflO26AjK4z+8CXCDo8j6oR8CxKRNzTA4TEmwLVdfg63LCFoXU6JHj5UigXP4RZA58rnYKTgPc1mDko53nYgVJBr7phrAh4XyIRC0pbEnbWYUZHQzZgDS/RbXW3c6pZ9d0fifrYfEl7WeiiRQ+NswGY8/94GoKKjND7z31Guxnw/R9RrYwiRy9rP4c0UtT3HBN7pAz8RSD+SPFXNr6kh8JOtn5URss6Q2v3ICRetlYFmoRKRqm/qBKqIMl7eYxdxV29ebTYku2z+LIK1rkJhSPHHAW+lb38yC/DYqHCXDAQKD1Re9XIIjbC/+sB1+3IDgSpx6hqMniFKFLpJkqNxhrIFE7TU8Z9ZO7+gZ3pBhJO+3bq8ps//dUKpebe7el9MlmduU3iIQI12Xy6RxHT8kmzW38txkdAxd7bwUfeG3Zc7X+GWeQsMYUpK3LaxjoAqmfd5nrnX9jiyxGJEzxO+5L8mm+pZSqtPmaqbhhrEo18cBD7QvCDmFSOzhnonSWPUOt23018mZF5TLXCTu1j66M/I7t/P9lJoDMz6Os8UjnH4gCARmKDIST5Ibwk4ykCDRPNKiOuH1xgJCZB9hUzPLO7vzgnDj2tC87CDSsptqWQrfNLysLhwAFBXn14FM3/WXb/s3k9EoxEXSqaecABK2s4cFa6fUrkhdQVdBjoVIZm0JRdPao892fkTKcXx+LZr/dDuH2xb3XCYAQLT8uut3RMY92xpPwjayKxC8nfB5wIvCjmUeEGD4q68GV17IeVSinOGGQpwVzYavdIXeRDdWzCC2aXvqosTY82VVt4WFLMT70OeACyueGZVtydpIZva9/eFSDBbHRXj1vkaX6MiBmOOBT4uV/ng/Bo74hLc5cN3sA7Y0HsyaJbreDHQ5BzUxRmQRsTt6MgV02T5Me6Np7LwhQX+iW5ZoXy3cGYutQ8zH9p2GSK38Etb41YDFhG6q9K75L7Cad1WwuM/T6MUiRumymrKHIwMDahwQZTkzxm1wGMSQX/4StyPfCxP3DhwuFHMWJ2m8PQdkG/7oHdHyWfH30h3FHdHdfJJuEijSiqwzily9imF50A1SJuQzQM+O5M7sZl20X+rqMSiDU8IdGTVwFopRVduzl3wmPYXUvS3M3VfkaZwyMvDRplsdj8kSHSKZjJmpupXq9BrToWywpmeFyJ3veikw7HBppvbNJjrDpVKSNqpQs9HY0/3w8iNUKE24y2SbY3WFE0Qwgue7oN1Op48FNorxkYWY3sWrdmkVdsMXzOdTyhw4gQiSAmKaD/ILBw4gs4/6CbG6u1udauRj9WYOiikWsj7lQbAnyPNx49AFYIbCR8ALFydHlrF63BvgohV/rUhHkkZXePnkrLY7Y1CTeztUE4sThYFcR8tT/ytv0z+pX9BhKLWvtWfnWpW/gBt9VlShDlIz4oIGKscRD1rBItdnRJFMeIFtT2zavRJwL0Aqet28BShodeandQAErsI2HF6hP6yG4qwDNieRQd0ZpB9g6/m0O1En/TOxtKSYBE6+VmLfCPQuauoNELd1qwyrT3O1tWI4Co4tQ0265HoN/hKDrPGuFLsLKC46BdCpv2hqCkDP/VRFxuxKHVMh+CgFjdpq6goSn+UUkMwPIxiBR/6LDoHUUd8H80aUqiCQ/3GbVgI88r21iIaoIBE8nDqsd8CcDmSzW8n8qZn1esRUjiIBS2f03OfcBDym5muQfYhld+J2Omtvf3L0Sh7O903eU5RmRqjtqBNIeSG6F4cknWFjjQrTRc1m9YCBpLYUAIYUMHfkv9vPLBdEPVEBJV/RUqbPtwkNBmU9UBUz1n6NZl8Np48KAG1fnZ3Z209Voum+LpIMwZJgANP0Kwie8/Ckb4GuPZMUtIzIW+O6TZa68HWljJt4XeWLSoLoz2fcH14vzmbNj5x9Iq0nyEMQyBCZVkYTMVLv8+2mfQWokWzCedDQUmDQFF7++U6Fbmq1zsVf2MvjDQQiZQWf/w6fM3RSlJcd6NfmusFfyAvyW/5hyDKsAv2pNRcEz75vUH6CowChZ/F9ETL7XLdwroii5ex1aQEYLywtaOF8vigWjyazUf5hIhWcXTXtjRcZqjTz/D1JBxss12jkqPz+34L6ffOJ/QVZOeXWthbvZMjgY4fg+8leypJX2g5MtqIzVILQZc07/q4gZTZgmnl9agl48F9rOvZuM='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 2045, 'end_index': 2331, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 2694, 'end_index': 2966, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 6486, 'end_index': 6772, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 7135, 'end_index': 7407, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 55610, 'candidates_token_count': 1068, 'total_token_count': 58178, 'prompt_tokens_details': [{'modality': 1, 'token_count': 55610}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 1068}], 'thoughts_token_count': 1500, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.04740631089228369, 'model_name': 'gemini-2.5-pro'} id='run--025cea31-8abb-4f3d-a72c-1fb9eae73ce7-0' tool_calls=[{'name': 'create_file', 'args': {'content': 'import datetime\n\nfrom django.contrib import admin\nfrom django.contrib.admin.models import LogEntry\nfrom django.contrib.admin.options import IncorrectLookupParameters\nfrom django.contrib.admin.templatetags.admin_list import pagination\nfrom django.contrib.admin.tests import AdminSeleniumTestCase\nfrom django.contrib.admin.views.main import (\n    ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,\n)\nfrom django.contrib.auth.models import User\nfrom django.contrib.contenttypes.models import ContentType\nfrom django.contrib.messages.storage.cookie import CookieStorage\nfrom django.db import connection, models\nfrom django.db.models import F, Field, IntegerField\nfrom django.db.models.functions import Upper\nfrom django.db.models.lookups import Contains, Exact\nfrom django.template import Context, Template, TemplateSyntaxError\nfrom django.test import TestCase, override_settings\nfrom django.test.client import RequestFactory\nfrom django.test.utils import (\n    CaptureQueriesContext, isolate_apps, register_lookup,\n)\nfrom django.urls import reverse\nfrom django.utils import formats\n\nfrom .admin import (\n    BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,\n    CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,\n    DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,\n    DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,\n    FilteredChildAdmin, GroupAdmin, InvitationAdmin,\n    NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,\n    site as custom_site,\n)\nfrom .models import (\n    Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,\n    Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,\n    Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,\n)\n\n\n# Models from the bug report, defined here for this test case.\n# The test runner will automatically create tables for them.\nclass Client(models.Model):\n    name = models.CharField(\'name\', max_length=256)\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\n    contact_person = models.CharField(\'contact person\', max_length=256, blank=True, null=True)\n\n    class Meta:\n        app_label = \'admin_changelist\'\n\n\nclass ClientOffice(models.Model):\n    name = models.CharField(\'name\', max_length=256)\n    name2 = models.CharField(\'unofficial or obsolete name\', max_length=256, blank=True, null=True)\n    client = models.ForeignKey(Client, on_delete=models.CASCADE, verbose_name=\'client\')\n\n    class Meta:\n        app_label = \'admin_changelist\'\n\n\n@isolate_apps(\'admin_changelist\')\n@override_settings(ROOT_URLCONF="admin_changelist.urls")\nclass ChangeListSearchTests(TestCase):\n    factory = RequestFactory()\n\n    @classmethod\n    def setUpTestData(cls):\n        cls.superuser = User.objects.create_superuser(username=\'super\', email=\'a@b.com\', password=\'xxx\')\n        client = Client.objects.create(name=\'Some Client\')\n        ClientOffice.objects.create(client=client, name=\'foo bar office\')\n\n    def test_unnecessary_joins_in_changelist_search(self):\n        """\n        Searching with multiple terms on a related field shouldn\'t create\n        unnecessary joins.\n        """\n        class ClientAdmin(admin.ModelAdmin):\n            search_fields = (\'clientoffice__name\',)\n\n        m = ClientAdmin(Client, custom_site)\n        request = self.factory.get(\'/\', data={SEARCH_VAR: \'foo bar\'})\n        request.user = self.superuser\n\n        with CaptureQueriesContext(connection) as context:\n            cl = m.get_changelist_instance(request)\n            # Evaluating the queryset will run the query.\n            # This also sanity-checks that the result is correct.\n            self.assertEqual(len(cl.queryset), 1)\n\n        # The bug creates a JOIN for each search term ("foo", "bar").\n        # With the fix, there should be only one JOIN to the clientoffice table.\n        # Django uses LEFT OUTER JOIN for these lookups.\n        self.assertEqual(context.captured_queries[0][\'sql\'].upper().count(\'LEFT OUTER JOIN\'), 1)\n', 'relative_path': 'tests/admin_changelist/test_search.py'}, 'id': 'c0e7c98b-6772-4285-8003-7caeea31f46b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 55610, 'output_tokens': 1068, 'total_tokens': 58178, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1500}}
2025-10-06 00:26:47,304 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='tests/admin_changelist/test_search.py' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 56700, 'candidates_token_count': 12, 'total_token_count': 56712, 'cached_content_token_count': 54476, 'prompt_tokens_details': [{'modality': 1, 'token_count': 58198}], 'cache_tokens_details': [{'modality': 1, 'token_count': 54476}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 12}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -1.5843665702656533e-05, 'model_name': 'gemini-2.5-pro'} id='run--04e0dbdd-9484-489f-b3fc-12dc13814732-0' usage_metadata={'input_tokens': 56700, 'output_tokens': 12, 'total_tokens': 56712, 'input_token_details': {'cache_read': 54476}}
2025-10-06 00:26:47,500 - thread-139660780025408.app.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/tests/admin_changelist/test_search.py b/tests/admin_changelist/test_search.py
new file mode 100644
index 0000000000..c39b0837fe
--- /dev/null
+++ b/tests/admin_changelist/test_search.py
@@ -0,0 +1,95 @@
+import datetime
+
+from django.contrib import admin
+from django.contrib.admin.models import LogEntry
+from django.contrib.admin.options import IncorrectLookupParameters
+from django.contrib.admin.templatetags.admin_list import pagination
+from django.contrib.admin.tests import AdminSeleniumTestCase
+from django.contrib.admin.views.main import (
+    ALL_VAR, IS_POPUP_VAR, ORDER_VAR, PAGE_VAR, SEARCH_VAR, TO_FIELD_VAR,
+)
+from django.contrib.auth.models import User
+from django.contrib.contenttypes.models import ContentType
+from django.contrib.messages.storage.cookie import CookieStorage
+from django.db import connection, models
+from django.db.models import F, Field, IntegerField
+from django.db.models.functions import Upper
+from django.db.models.lookups import Contains, Exact
+from django.template import Context, Template, TemplateSyntaxError
+from django.test import TestCase, override_settings
+from django.test.client import RequestFactory
+from django.test.utils import (
+    CaptureQueriesContext, isolate_apps, register_lookup,
+)
+from django.urls import reverse
+from django.utils import formats
+
+from .admin import (
+    BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
+    CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
+    DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
+    DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
+    FilteredChildAdmin, GroupAdmin, InvitationAdmin,
+    NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
+    site as custom_site,
+)
+from .models import (
+    Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
+    Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
+    Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
+)
+
+
+# Models from the bug report, defined here for this test case.
+# The test runner will automatically create tables for them.
+class Client(models.Model):
+    name = models.CharField('name', max_length=256)
+    name2 = models.CharField('unofficial or obsolete name', max_length=256, blank=True, null=True)
+    contact_person = models.CharField('contact person', max_length=256, blank=True, null=True)
+
+    class Meta:
+        app_label = 'admin_changelist'
+
+
+class ClientOffice(models.Model):
+    name = models.CharField('name', max_length=256)
+    name2 = models.CharField('unofficial or obsolete name', max_length=256, blank=True, null=True)
+    client = models.ForeignKey(Client, on_delete=models.CASCADE, verbose_name='client')
+
+    class Meta:
+        app_label = 'admin_changelist'
+
+
+@isolate_apps('admin_changelist')
+@override_settings(ROOT_URLCONF="admin_changelist.urls")
+class ChangeListSearchTests(TestCase):
+    factory = RequestFactory()
+
+    @classmethod
+    def setUpTestData(cls):
+        cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
+        client = Client.objects.create(name='Some Client')
+        ClientOffice.objects.create(client=client, name='foo bar office')
+
+    def test_unnecessary_joins_in_changelist_search(self):
+        """
+        Searching with multiple terms on a related field shouldn't create
+        unnecessary joins.
+        """
+        class ClientAdmin(admin.ModelAdmin):
+            search_fields = ('clientoffice__name',)
+
+        m = ClientAdmin(Client, custom_site)
+        request = self.factory.get('/', data={SEARCH_VAR: 'foo bar'})
+        request.user = self.superuser
+
+        with CaptureQueriesContext(connection) as context:
+            cl = m.get_changelist_instance(request)
+            # Evaluating the queryset will run the query.
+            # This also sanity-checks that the result is correct.
+            self.assertEqual(len(cl.queryset), 1)
+
+        # The bug creates a JOIN for each search term ("foo", "bar").
+        # With the fix, there should be only one JOIN to the clientoffice table.
+        # Django uses LEFT OUTER JOIN for these lookups.
+        self.assertEqual(context.captured_queries[0]['sql'].upper().count('LEFT OUTER JOIN'), 1)

2025-10-06 00:26:47,501 - thread-139660780025408.app.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-10-06 00:26:47,553 - thread-139660780025408.app.docker.base_container - INFO - Resetting git repository in the container
2025-10-06 00:26:47,553 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git reset --hard
2025-10-06 00:26:48,104 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:26:48,104 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

HEAD is now at e1d673c373 Fixed unescape_string_literal() crash on empty strings.

2025-10-06 00:26:48,104 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: git clean -fd
2025-10-06 00:26:48,205 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:26:48,205 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:


2025-10-06 00:26:48,205 - thread-139660780025408.app.docker.base_container - INFO - Updating files in the container after edits.
2025-10-06 00:26:48,205 - thread-139660780025408.app.docker.base_container - INFO - Creating directory tests/admin_changelist in the container
2025-10-06 00:26:48,205 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: mkdir -p tests/admin_changelist
2025-10-06 00:26:48,307 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:26:48,307 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
[A(testbed) root@iZd7o0ltqvddf3pkxkvmq9Z:/testbed# mkdir -p tests/admin_changelis[Kt


2025-10-06 00:26:48,308 - thread-139660780025408.app.docker.base_container - INFO - Updating tests/admin_changelist/test_search.py in the container
2025-10-06 00:26:48,310 - thread-139660780025408.app.docker.base_container - INFO - Files updated successfully
2025-10-06 00:26:51,068 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python manage.py test admin_changelist.test_search"}'}, '__gemini_function_call_thought_signatures__': {'a8849141-e5c5-4799-98ef-9969c972a4e1': 'Cq8GAR/MhbbJGOFrEvvCKkSMZ65J19touc0MUVE8+oGMdNBQ93B6VgCpFXOZBl8rhX8NdWn7pjthql80h+4LnSjHbw3F5nzNHboFL4Iaez4QFxRTArh5mSFJr9yotuKwbcBRBfw1u5do+zNhXSp0b1eO51046VgyUFPAOvIShryKu91YK9ow8drqtJsrbm3Cuq2xTJ273DpAwhQgg2NCAidr0iQiIpHvpBr7K5Awpry50eUjmv25xz6ZywVbiOGAzSmmOBM0j3QjXbevz6MxvjqnJDucZ/Z/kIjeYVJPwGyDYiAAk1hs/PFGtV8RnxRXw7ubNZuXLF4ZImFWpogqHeGVPMyq2BRaiEGjW7DOrkgSXuvHFDqdXLI7NDPOtgWTkmR8utUVnQE5ERs3tnEk46WvWMw2P4jC5XOrjYiGdP9Paxy2WsGmE455Ba/R0rmgAlYKOa4LxxKsWsphN7NS3a0zcxtOT0ONaacWQHcfHGs/jt/ijbb2iXEFWRoAKXbuzvV24qvaTRkOr9ID6dMGQgCYeWKgKWjiU+qh0TjtRk467LIFHjEIXq2b0lQ/tpSW2eXP4m+mHDvqDPIEkSe5x53O3DnvhOGwmS8CzeTy5v/w5cnwofRh3hiF6UpCoUhoEim/CK0r0qmgGbOOMHeBEoxBExd9b6KLdMtzXtKu/2/GY5kRQYHt121gpkUe1JFp2UjGtoAbcEylzfY+VqKhHBQPcaVe4swqxdTIi66eBaZGZBHYpoGaXRANN/FRUVOp/Y957FhC5Jc2vOWGQg6JvvZyFPl8ewD607U2S1XhYBOvcD3APZwY+kj3Kvc5s5RPJ7O0xnDl4HRkY/YFlxHKOuB9MtqsCnOM5y/9ZqCWwjt0QEsFKcLvUf3tH6P929abGKbfl1zXPDeCx6SUB+8m9il+z1xg53FIikRm0zAa4Lgt+lfIawSn62pc7v9+auiMcmgsrs/rqqyNesOXEe83OZWTtv1l7POLz1J/GLIRdJkC7MFquGHhKrCIDQYMTLKWueViwjIY8D1vszZEWXiTTzdtDJz1F//Vh+1LMOykbTq6yjgNp/Ex2dMBHT43pr/EwZk='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 591, 'candidates_token_count': 17, 'total_token_count': 812, 'prompt_tokens_details': [{'modality': 1, 'token_count': 591}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 17}], 'thoughts_token_count': 204, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7629679511575138, 'model_name': 'gemini-2.5-pro'} id='run--4d7d509c-51cb-42d1-a6e3-9b5b15c418a6-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python manage.py test admin_changelist.test_search'}, 'id': 'a8849141-e5c5-4799-98ef-9969c972a4e1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 591, 'output_tokens': 17, 'total_tokens': 812, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 204}}
2025-10-06 00:26:51,070 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python manage.py test admin_changelist.test_search
2025-10-06 00:26:51,171 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 2
2025-10-06 00:26:51,171 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
python manage.py test admin_chan
ngelist.test_search

python: can't open file '/testbed/manage.py': [Errno 2] No such file or directory

2025-10-06 00:26:53,251 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "find . -name \\"manage.py\\""}'}, '__gemini_function_call_thought_signatures__': {'8ac36bfa-b1c5-4380-a90b-4e67dbc77b39': 'CpsDAR/MhbbMH9DqiONyJ2IxD6LHcrMYSpEMjnasrNbtoX/2uMXNzBtHj6uDdku7Q+On6P6f84vfDIaiYjkVATv+CuOIqnsASBIcBgwLEOFout0QIp30TTxvpEqrCMeA8IbLC2msZaz24fwur9ajUvjTHpy6j10MLdUxaf9UQsj4BeOdMg7Eh5jYEn7YuoB5ctyIekZn6Y5K1m38aNbtW4UkTTdhk/lqvjO/dBh8R1MHP7pCzZeVloMf+RNMFdyZyDIQKya5jYRNvRz/AX8BCYHKgVdWGIWyvIWj8Ux1P9VDKFKnMhuxAvbS63hZpRh+sAl7A2PBhk0VjxStM+fvufO9mjoqCc3AGYLQeaM0N/D0J1ODteQacCCM82Aq/iCl4hl6M8OxoPq2u7rSsGAZjapxg9KoPhyQZaSMBPciyVlJgYcMgzutHqRdNFc2lMQJKBh5pypurh1gz2wIujAdWQqDvlPx/dbfG7/QP4nnxseKnH05fLdtkAIgLj5vmVM6LOuJwL3v05p0ZYR6rqN0/0wYn7AWvpk/adkPFdiD'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 655, 'candidates_token_count': 13, 'total_token_count': 768, 'prompt_tokens_details': [{'modality': 1, 'token_count': 857}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13}], 'thoughts_token_count': 100, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5236311692457932, 'model_name': 'gemini-2.5-pro'} id='run--d0b60ccc-b73f-42a4-8b5f-bbf0e0245446-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'find . -name "manage.py"'}, 'id': '8ac36bfa-b1c5-4380-a90b-4e67dbc77b39', 'type': 'tool_call'}] usage_metadata={'input_tokens': 655, 'output_tokens': 13, 'total_tokens': 768, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 100}}
2025-10-06 00:26:53,253 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: find . -name "manage.py"
2025-10-06 00:26:53,354 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:26:53,354 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

./tests/i18n/sampleproject/manage.py

2025-10-06 00:26:57,705 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "ls -l tests"}'}, '__gemini_function_call_thought_signatures__': {'385d001a-71cb-42c6-9a63-abdec8effd50': 'CvkJAR/MhbY7BVKBElT8ksyMDmnssl9/r/4L8oCYnyXTOrg5ZAQuOBiGmI+bQQtmKnXuxNZD5+PpMAceloi7+O/OsoHRvyXhHIo/VaUAnbj6qBmNps1JQJFbJoiY6V7eNcRtMBDXUPvHjMpo6EIwy+c+i40ZFKJmbjNvOSXCh2OdbWidhUOp5XNxzuOza7PpbVqycjhgQ//UBQTkrqFqLa6UqpJxHDn4t1ETxJIFuGefbq5RCGpJbu8d36H6iC/BdpucbZ/hpX3zdNKpvtRhexpx4p3PE+ewocsDAjZfUW7jLmlKcuRuuYpS+BsyNDcHTY48Z68YuP+HTDciXs54D8HMkkDmArHLpfwkxKuTdhgPrknfU0VdVoozVKqXo1vE6D+DsH7FCe1tX6RVkK8mtwt47GLItYddTo6frR/XNNEcpWcY9SKA9Tw2+A3QdLfPPHjLq1YVMrqh0Y9MIf5AtP5rnJVBePHksFBvGrr4DHihazbz0Nt/4XwwPjqiGeb9Sv77KfsBZugWFghRmt+wW1gVz6hQIe+UHiOAsMas/BhNsInWM7vovmXPHzlPi9csd+6JP482oU2oKa3YggegLfO3nH00QoKWfjRTC4ATeS93n3LLDzGKQKfDdQhyrLZ7xPiBnB2omig6LNVuxDxEpn6qLMWiU0jcHWOqLWFUyR5wnnXenEy0xeIv1k7rNH2Q60rhaKzHKTMZ4x1XoV70zDvUz82EsVywrjMn1F84z3F38Wr26GFSWXobJK4CscgXN7TmQG8NUiKrULIkA9BdY2j/ZFgoZ7NEI5F+3kdxsrYifTIs2g4iBsxjxtYbMjs6Qk3EZgPXoRPrz1Umhs5qGtOJSRYzCivtSmdCq/QtE0ahiV95Pc+tqaq8Xs1fVXwmal/71qaiHj/DtIbfX/5fWKw9v7HaTyLeeU5EceY+XmM5nZmqjQj9ul7Eh78Ms2hpxsAEQJUFiH5w8kzkhMLggiFbKRydXtWvhwbd6Q2v0KSfdt2nW6RmWuBrxanLBoJHzeau+/7w8TgWHrETLgxlwxBDEHVbSiy2WBfnXX7uFCSvwvtrMaCtKWTNKF4HIWeZiNFr5Qf805hBBRk10923iwGGTJSs+yAcqaueZeuqiJZPMvrn7N2LaycNC2wHMiTBsYWCKQq/9xwkXeCZZ5Y3fidedMhmQw3y4w7NbSc7ggsHgngI2CS45eYppxqThPQOfMR3OPr9N35Y8wI6XNeDjCCoVQ12ejuYG371jRqOjMlA4ozfFG10pahbxx1B7yhxrKyKlc/uSUXcJpc2T9UaDV+4V4Y8/x/GXoHEE33qsYJRgCaZqGs2nFbWWONrMUPOMlrDg9aaagkmGChUBb7287Cg6UxMWnoP00/Q9yCBCs1MCtPfLUpURLqmaqiG4rJtIe1Gg49mwpo9pBzXOnIORq/NlSzzBTBKYgWiFm2KTkyuJiuln3iqgR2hMVd6IEDUeGzCYUkGjIRPYQLckmCTW8hO5fT7Xt+MdJ0J6R9mIIqY7mhyCdtjm00YP6oAMrSTNEz9TZZA8dFQh+SZ+SMvWZILycrcyqjtLa+hGovkBvw3EOe7T56Au0wDkGRVpR3zUvFtAynwwETCZD59C/mGmIAD5oGzfSYCf7YVIgCjSuYu+6qnEGY6FANQSDsbIwqPt8OKUt8lu4nBKaERAfJvj5hdVgBHjy8FFh26kA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 688, 'candidates_token_count': 8, 'total_token_count': 1050, 'prompt_tokens_details': [{'modality': 1, 'token_count': 988}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 8}], 'thoughts_token_count': 354, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -5.950329303741455, 'model_name': 'gemini-2.5-pro'} id='run--853c03f9-9244-418d-a896-ca7794c7eaa4-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -l tests'}, 'id': '385d001a-71cb-42c6-9a63-abdec8effd50', 'type': 'tool_call'}] usage_metadata={'input_tokens': 688, 'output_tokens': 8, 'total_tokens': 1050, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 354}}
2025-10-06 00:26:57,706 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: ls -l tests
2025-10-06 00:26:57,808 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 0
2025-10-06 00:26:57,808 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:

total 1096
-rw-r--r-- 1 root root   381 Oct  5 16:26 README.rst
drwxrwxrwx 1 root root  4096 Oct  5 16:26 absolute_url_overrides
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_autodiscover
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_changelist
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_checks
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_custom_urls
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_default_site
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_docs
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_filters
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_inlines
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_ordering
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_registration
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_scripts
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_utils
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_views
drwxrwxrwx 1 root root  4096 Oct  5 16:26 admin_widgets
drwxrwxrwx 1 root root  4096 Oct  5 16:26 aggregation
drwxrwxrwx 1 root root  4096 Oct  5 16:26 aggregation_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 annotations
drwxrwxrwx 1 root root  4096 Oct  5 16:26 app_loading
drwxrwxrwx 1 root root  4096 Oct  5 16:26 apps
drwxrwxrwx 1 root root  4096 Oct  5 16:26 asgi
drwxrwxrwx 1 root root  4096 Oct  5 16:26 async
drwxrwxrwx 1 root root  4096 Oct  5 16:26 auth_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 backends
drwxrwxrwx 1 root root  4096 Oct  5 16:26 base
drwxrwxrwx 1 root root  4096 Oct  5 16:26 bash_completion
drwxrwxrwx 1 root root  4096 Oct  5 16:26 basic
drwxrwxrwx 1 root root  4096 Oct  5 16:26 builtin_server
drwxrwxrwx 1 root root  4096 Oct  5 16:26 bulk_create
drwxrwxrwx 1 root root  4096 Oct  5 16:26 cache
drwxrwxrwx 1 root root  4096 Oct  5 16:26 check_framework
drwxrwxrwx 1 root root  4096 Oct  5 16:26 conditional_processing
drwxrwxrwx 1 root root  4096 Oct  5 16:26 constraints
drwxrwxrwx 1 root root  4096 Oct  5 16:26 contenttypes_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 context_processors
drwxrwxrwx 1 root root  4096 Oct  5 16:26 csrf_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_columns
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_lookups
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_managers
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_methods
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_migration_operations
drwxrwxrwx 1 root root  4096 Oct  5 16:26 custom_pk
drwxrwxrwx 1 root root  4096 Oct  5 16:26 datatypes
drwxrwxrwx 1 root root  4096 Oct  5 16:26 dates
drwxrwxrwx 1 root root  4096 Oct  5 16:26 datetimes
drwxrwxrwx 1 root root  4096 Oct  5 16:26 db_functions
drwxrwxrwx 1 root root  4096 Oct  5 16:26 db_typecasts
drwxrwxrwx 1 root root  4096 Oct  5 16:26 db_utils
drwxrwxrwx 1 root root  4096 Oct  5 16:26 dbshell
drwxrwxrwx 1 root root  4096 Oct  5 16:26 decorators
drwxrwxrwx 1 root root  4096 Oct  5 16:26 defer
drwxrwxrwx 1 root root  4096 Oct  5 16:26 defer_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 delete
drwxrwxrwx 1 root root  4096 Oct  5 16:26 delete_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 deprecation
drwxrwxrwx 1 root root  4096 Oct  5 16:26 dispatch
drwxrwxrwx 1 root root  4096 Oct  5 16:26 distinct_on_fields
drwxrwxrwx 1 root root  4096 Oct  5 16:26 empty
drwxrwxrwx 1 root root  4096 Oct  5 16:26 empty_models
drwxrwxrwx 1 root root  4096 Oct  5 16:26 expressions
drwxrwxrwx 1 root root  4096 Oct  5 16:26 expressions_case
drwxrwxrwx 1 root root  4096 Oct  5 16:26 expressions_window
drwxrwxrwx 1 root root  4096 Oct  5 16:26 extra_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 field_deconstruction
drwxrwxrwx 1 root root  4096 Oct  5 16:26 field_defaults
drwxrwxrwx 1 root root  4096 Oct  5 16:26 field_subclassing
drwxrwxrwx 1 root root  4096 Oct  5 16:26 file_storage
drwxrwxrwx 1 root root  4096 Oct  5 16:26 file_uploads
drwxrwxrwx 1 root root  4096 Oct  5 16:26 files
drwxrwxrwx 1 root root  4096 Oct  5 16:26 filtered_relation
drwxrwxrwx 1 root root  4096 Oct  5 16:26 fixtures
drwxrwxrwx 1 root root  4096 Oct  5 16:26 fixtures_model_package
drwxrwxrwx 1 root root  4096 Oct  5 16:26 fixtures_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 flatpages_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 force_insert_update
drwxrwxrwx 1 root root  4096 Oct  5 16:26 foreign_object
drwxrwxrwx 1 root root  4096 Oct  5 16:26 forms_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 from_db_value
drwxrwxrwx 1 root root  4096 Oct  5 16:26 generic_inline_admin
drwxrwxrwx 1 root root  4096 Oct  5 16:26 generic_relations
drwxrwxrwx 1 root root  4096 Oct  5 16:26 generic_relations_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 generic_views
drwxrwxrwx 1 root root  4096 Oct  5 16:26 get_earliest_or_latest
drwxrwxrwx 1 root root  4096 Oct  5 16:26 get_object_or_404
drwxrwxrwx 1 root root  4096 Oct  5 16:26 get_or_create
drwxrwxrwx 1 root root  4096 Oct  5 16:26 gis_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 handlers
drwxrwxrwx 1 root root  4096 Oct  5 16:26 httpwrappers
drwxrwxrwx 1 root root  4096 Oct  5 16:26 humanize_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 i18n
drwxrwxrwx 1 root root  4096 Oct  5 16:26 import_error_package
drwxrwxrwx 1 root root  4096 Oct  5 16:26 indexes
drwxrwxrwx 1 root root  4096 Oct  5 16:26 inline_formsets
drwxrwxrwx 1 root root  4096 Oct  5 16:26 inspectdb
drwxrwxrwx 1 root root  4096 Oct  5 16:26 introspection
drwxrwxrwx 1 root root  4096 Oct  5 16:26 invalid_models_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 known_related_objects
drwxrwxrwx 1 root root  4096 Oct  5 16:26 logging_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 lookup
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_and_m2o
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_intermediary
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_multiple
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_recursive
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_signals
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_through
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2m_through_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 m2o_recursive
drwxrwxrwx 1 root root  4096 Oct  5 16:26 mail
drwxrwxrwx 1 root root  4096 Oct  5 16:26 managers_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 many_to_many
drwxrwxrwx 1 root root  4096 Oct  5 16:26 many_to_one
drwxrwxrwx 1 root root  4096 Oct  5 16:26 many_to_one_null
drwxrwxrwx 1 root root  4096 Oct  5 16:26 max_lengths
drwxrwxrwx 1 root root  4096 Oct  5 16:26 messages_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 middleware
drwxrwxrwx 1 root root  4096 Oct  5 16:26 middleware_exceptions
drwxrwxrwx 1 root root  4096 Oct  5 16:26 migrate_signals
drwxrwxrwx 1 root root  4096 Oct  5 16:26 migration_test_data_persistence
drwxrwxrwx 1 root root  4096 Oct  5 16:26 migrations
drwxrwxrwx 1 root root  4096 Oct  5 16:26 migrations2
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_enums
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_fields
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_forms
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_formsets
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_formsets_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_indexes
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_inheritance
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_inheritance_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_meta
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_options
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_package
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 model_utils
drwxrwxrwx 1 root root  4096 Oct  5 16:26 modeladmin
drwxrwxrwx 1 root root  4096 Oct  5 16:26 multiple_database
drwxrwxrwx 1 root root  4096 Oct  5 16:26 mutually_referential
drwxrwxrwx 1 root root  4096 Oct  5 16:26 nested_foreign_keys
drwxrwxrwx 1 root root  4096 Oct  5 16:26 no_models
drwxrwxrwx 1 root root  4096 Oct  5 16:26 null_fk
drwxrwxrwx 1 root root  4096 Oct  5 16:26 null_fk_ordering
drwxrwxrwx 1 root root  4096 Oct  5 16:26 null_queries
drwxrwxrwx 1 root root  4096 Oct  5 16:26 one_to_one
drwxrwxrwx 1 root root  4096 Oct  5 16:26 or_lookups
drwxrwxrwx 1 root root  4096 Oct  5 16:26 order_with_respect_to
drwxrwxrwx 1 root root  4096 Oct  5 16:26 ordering
drwxrwxrwx 1 root root  4096 Oct  5 16:26 pagination
drwxrwxrwx 1 root root  4096 Oct  5 16:26 postgres_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 prefetch_related
drwxrwxrwx 1 root root  4096 Oct  5 16:26 project_template
drwxrwxrwx 1 root root  4096 Oct  5 16:26 properties
drwxrwxrwx 1 root root  4096 Oct  5 16:26 proxy_model_inheritance
drwxrwxrwx 1 root root  4096 Oct  5 16:26 proxy_models
drwxrwxrwx 1 root root  4096 Oct  5 16:26 queries
drwxrwxrwx 1 root root  4096 Oct  5 16:26 queryset_pickle
drwxrwxrwx 1 root root  4096 Oct  5 16:26 raw_query
drwxrwxrwx 1 root root  4096 Oct  5 16:26 redirects_tests
drwxr-xr-x 1 root root  4096 Oct  5 16:26 requests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 requirements
drwxrwxrwx 1 root root  4096 Oct  5 16:26 reserved_names
drwxrwxrwx 1 root root  4096 Oct  5 16:26 resolve_url
drwxrwxrwx 1 root root  4096 Oct  5 16:26 responses
drwxrwxrwx 1 root root  4096 Oct  5 16:26 reverse_lookup
-rwxr-xr-x 1 root root 25311 Oct  5 16:26 runtests.py
drwxrwxrwx 1 root root  4096 Oct  5 16:26 save_delete_hooks
drwxrwxrwx 1 root root  4096 Oct  5 16:26 schema
drwxrwxrwx 1 root root  4096 Oct  5 16:26 select_for_update
drwxrwxrwx 1 root root  4096 Oct  5 16:26 select_related
drwxrwxrwx 1 root root  4096 Oct  5 16:26 select_related_onetoone
drwxrwxrwx 1 root root  4096 Oct  5 16:26 select_related_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 serializers
drwxrwxrwx 1 root root  4096 Oct  5 16:26 servers
drwxrwxrwx 1 root root  4096 Oct  5 16:26 sessions_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 settings_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 shell
drwxrwxrwx 1 root root  4096 Oct  5 16:26 shortcuts
drwxrwxrwx 1 root root  4096 Oct  5 16:26 signals
drwxrwxrwx 1 root root  4096 Oct  5 16:26 signed_cookies_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 signing
drwxrwxrwx 1 root root  4096 Oct  5 16:26 sitemaps_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 sites_framework
drwxrwxrwx 1 root root  4096 Oct  5 16:26 sites_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 staticfiles_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 str
drwxrwxrwx 1 root root  4096 Oct  5 16:26 string_lookup
drwxrwxrwx 1 root root  4096 Oct  5 16:26 swappable_models
drwxrwxrwx 1 root root  4096 Oct  5 16:26 syndication_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 template_backends
drwxrwxrwx 1 root root  4096 Oct  5 16:26 template_loader
drwxrwxrwx 1 root root  4096 Oct  5 16:26 template_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 templates
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_client
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_client_regress
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_exceptions
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_runner
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_runner_apps
-rw-r--r-- 1 root root  1073 Oct  5 16:26 test_sqlite.py
drwxrwxrwx 1 root root  4096 Oct  5 16:26 test_utils
drwxrwxrwx 1 root root  4096 Oct  5 16:26 timezones
drwxrwxrwx 1 root root  4096 Oct  5 16:26 transaction_hooks
drwxrwxrwx 1 root root  4096 Oct  5 16:26 transactions
drwxrwxrwx 1 root root  4096 Oct  5 16:26 unmanaged_models
drwxrwxrwx 1 root root  4096 Oct  5 16:26 update
drwxrwxrwx 1 root root  4096 Oct  5 16:26 update_only_fields
drwxrwxrwx 1 root root  4096 Oct  5 16:26 urlpatterns
drwxrwxrwx 1 root root  4096 Oct  5 16:26 urlpatterns_reverse
-rw-r--r-- 1 root root   211 Oct  5 16:26 urls.py
drwxrwxrwx 1 root root  4096 Oct  5 16:26 user_commands
drwxrwxrwx 1 root root  4096 Oct  5 16:26 utils_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 validation
drwxrwxrwx 1 root root  4096 Oct  5 16:26 validators
drwxrwxrwx 1 root root  4096 Oct  5 16:26 version
drwxrwxrwx 1 root root  4096 Oct  5 16:26 view_tests
drwxrwxrwx 1 root root  4096 Oct  5 16:26 wsgi

2025-10-06 00:26:59,537 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'run_command', 'arguments': '{"command": "python tests/runtests.py admin_changelist.test_search"}'}, '__gemini_function_call_thought_signatures__': {'76c67378-8049-4045-8c18-ffe647f68244': 'Cu0CAR/MhbawH5fZrsnuPsP/QKODOE3RgqgGfjICYqRWcKTsgKaeBHO+Q39daNiQYAzscRr1rN/UXkqM5hVCpzgpMYvSInSD23Y6NKeTfMylD0PGQjs9/pIpMYXnUdgy9l7nJmTzYQmHZ+yc48JoInCyMqn1fmIPmzV8HLxxN7AruCfMCtlV1V3g/aJDzjGyvUIpJuZntNGZwGfX8vWmLaWRW3x+haB4ncGl2kh0oREf+/3asL8oAo1eQhsy20ltcHN05B37naly78BE1jEkzO3X3TODqQMBmmU9jxKBX4EWwlbYLkd+kjQ2RWREBtcPf6hY5HXSggyxw60X2vyVweXhoARATkH/DLEUfkHDEpjLPiEng9UcFvYGDLjEN1aR71MDxkozyy4HyJxokuSpoTuqJgxmkNwc8Te28UYUNTykaFQvZckojd/q5sYx2pEAiH58uNBLfx7eZ7NOnjk4bxoVj15fxhk3FEor/s0GYlY='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 6783, 'candidates_token_count': 19, 'total_token_count': 6895, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7435}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 19}], 'thoughts_token_count': 93, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3842973960073371, 'model_name': 'gemini-2.5-pro'} id='run--be96a231-0e2e-4c69-910c-57ab438d7fd2-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'python tests/runtests.py admin_changelist.test_search'}, 'id': '76c67378-8049-4045-8c18-ffe647f68244', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6783, 'output_tokens': 19, 'total_tokens': 6895, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 93}}
2025-10-06 00:26:59,539 - thread-139660780025408.app.docker.base_container - DEBUG - Executing command: python tests/runtests.py admin_changelist.test_search
2025-10-06 00:27:00,210 - thread-139660780025408.app.docker.base_container - DEBUG - Command exit code: 1
2025-10-06 00:27:00,211 - thread-139660780025408.app.docker.base_container - DEBUG - Command output:
python tests/runtests.py admin_c
changelist.test_search

Testing against Django installed in '/testbed/django' with up to 8 processes
Found 1 test(s).
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
F
======================================================================
FAIL: test_unnecessary_joins_in_changelist_search (admin_changelist.test_search.ChangeListSearchTests)
Searching with multiple terms on a related field shouldn't create
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/admin_changelist/test_search.py", line 95, in test_unnecessary_joins_in_changelist_search
    self.assertEqual(context.captured_queries[0]['sql'].upper().count('LEFT OUTER JOIN'), 1)
AssertionError: 0 != 1

----------------------------------------------------------------------
Ran 1 test in 0.004s

FAILED (failures=1)
Destroying test database for alias 'default'...

2025-10-06 00:27:03,583 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='I have successfully executed the test and confirmed the bug. The test `test_unnecessary_joins_in_changelist_search` within `admin_changelist/test_search.py` failed as expected.\n\nHere is the detailed output of the test execution:\n```\npython tests/runtests.py admin_changelist.test_search\n\nTesting against Django installed in \'/testbed/django\' with up to 8 processes\nFound 1 test(s).\nCreating test database for alias \'default\'...\nSystem check identified no issues (0 silenced).\nF\n======================================================================\nFAIL: test_unnecessary_joins_in_changelist_search (admin_changelist.test_search.ChangeListSearchTests)\nSearching with multiple terms on a related field shouldn\'t create\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/admin_changelist/test_search.py", line 95, in test_unnecessary_joins_in_changelist_search\n    self.assertEqual(context.captured_queries[0][\'sql\'].upper().count(\'LEFT OUTER JOIN\'), 1)\nAssertionError: 0 != 1\n\n----------------------------------------------------------------------\nRan 1 test in 0.004s\n\nFAILED (failures=1)\nDestroying test database for alias \'default\'...\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 7046, 'candidates_token_count': 298, 'total_token_count': 7415, 'cached_content_token_count': 5828, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7789}], 'cache_tokens_details': [{'modality': 1, 'token_count': 5828}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 298}], 'thoughts_token_count': 71}, 'finish_reason': 'STOP', 'avg_logprobs': -0.03701978721874672, 'model_name': 'gemini-2.5-pro'} id='run--e87d2d72-a203-4707-8fad-44c01415c405-0' usage_metadata={'input_tokens': 7046, 'output_tokens': 298, 'total_tokens': 7415, 'input_token_details': {'cache_read': 5828}, 'output_token_details': {'reasoning': 71}}
2025-10-06 00:27:21,479 - thread-139660780025408.app.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=True reproduced_bug_failure_log='FAIL: test_unnecessary_joins_in_changelist_search (admin_changelist.test_search.ChangeListSearchTests)\nSearching with multiple terms on a related field shouldn\'t create\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File "/testbed/tests/admin_changelist/test_search.py", line 95, in test_unnecessary_joins_in_changelist_search\n    self.assertEqual(context.captured_queries[0][\'sql\'].upper().count(\'LEFT OUTER JOIN\'), 1)\nAssertionError: 0 != 1' reproduced_bug_commands=['python tests/runtests.py admin_changelist.test_search']
2025-10-06 00:27:21,480 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
2025-10-06 00:27:21,480 - thread-139660780025408.app.docker.base_container - INFO - Closing persistent shell...
2025-10-06 00:27:21,580 - thread-139660780025408.app.docker.base_container - INFO - Cleaning up container and temporary files
